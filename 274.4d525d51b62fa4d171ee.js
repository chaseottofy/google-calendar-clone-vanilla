"use strict";(self.webpackChunkgoogle_calendar_clone_vanilla=self.webpackChunkgoogle_calendar_clone_vanilla||[]).push([[274,748],{274:(t,e,s)=>{s.r(e),s.d(e,{default:()=>l});var r=s(827),o=s(151);const n={0:{shortcut:"0",action:"change app theme"},1:{shortcut:["1","D"],action:"open day view"},2:{shortcut:["2","W"],action:"open week view"},3:{shortcut:["3","M"],action:"open month view"},4:{shortcut:["4","Y"],action:"open year view"},5:{shortcut:["5","L"],action:"open list view"},6:{shortcut:"v",action:"toggle view options"},7:{shortcut:"t",action:"set date to today"},8:{shortcut:"g",action:"enter date manually"},9:{shortcut:"n",action:"next period"},10:{shortcut:"p",action:"previous period"},11:{shortcut:"s",action:"toggle sidebar"},12:{shortcut:"f",action:"open form"},13:{shortcut:"+",action:"open new category form"},14:{shortcut:"a",action:"open settings"},15:{shortcut:["/","?"],action:"open keyboard shortcuts"},16:{shortcut:"e",action:"(entry options) opens form with entry details"},17:{shortcut:"↑",action:["(datepicker) set date to next month/week","(yearpicker) set year to next year"]},18:{shortcut:"↓",action:["(datepicker) set date to prev month/week","(yearpicker) set year to prev year"]},19:{shortcut:"←",action:["(datepicker) set date to prev day","(monthpicker) set month to prev month"]},20:{shortcut:"→",action:["(datepicker) set date to next day","(monthpicker) set month to next month"]},21:{shortcut:"DELETE",action:"(entry options) delete entry"},22:{shortcut:"ENTER",action:["(datepicker) set date to selected date","(form) submit form"]},23:{shortcut:"ESCAPE",action:"close any active modal/popup/form"}};var a=s(634),i=s(2);class c{constructor(){this.store=this.getInitStore(),this.userUpload={},this.colors=o.Z.colorsMutedMed,this.ctg=this.getInitCtg(),this.activeOverlay=new Set,this.handleRenders={sidebar:{callback:null},datepicker:{reset:null},form:{callback:null},reconfig:{callback:null},categories:{callback:null},calendars:{previous:{reset:null},month:{reset:null,resize:null},week:{reset:null,render:null},day:{reset:null},list:{reset:null}}},this.keyboardShortcuts=n,this.keyboardShortcutsStatus=!0,this.animationStatus=!1,this.hasServerIntegration=!1}getInitStore(){return i.Z.getItem("store")?JSON.parse(i.Z.getItem("store")):[]}getInitCtg(){return i.Z.getItem("ctg")?JSON.parse(i.Z.getItem("ctg")):{default:{color:this.colors.blue[4],active:!0}}}setStoreForTesting(t){this.store=t,c.setStore(this.store)}getStoreStats(){return[this.store.length,this.getAllCtgNames().length]}getAllMethodNames(){return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter((t=>"constructor"!==t&&"getStoreStats"!==t))}static getStore(){return JSON.parse(i.Z.getItem("store"))||[]}static getActiveStore(){return JSON.parse(i.Z.getItem("activeStore"))||[]}static getCtg(){return JSON.parse(i.Z.getItem("ctg"))||[]}static getShortcutsStatus(){return JSON.parse(i.Z.getItem("keyboardShortcutsStatus"))}static getAnimationStatus(){return JSON.parse(i.Z.getItem("animationStatus"))}static setStore(t){i.Z.setItem("store",JSON.stringify(t))}static setActiveStore(t){i.Z.setItem("activeStore",JSON.stringify(t))}static setCtg(t){i.Z.setItem("ctg",JSON.stringify(t))}static setShortcutsStatus(t){i.Z.setItem("keyboardShortcutsStatus",JSON.stringify(t))}static setAnimationStatus(t){i.Z.setItem("animationStatus",JSON.stringify(t))}getColors(){return this.colors}getServerStatus(){return this.hasServerIntegration}addEntry(t){this.store.push(t),c.setStore(this.store)}createEntry(...t){this.addEntry(new r.ZP(...t)),c.setStore(this.store)}deleteEntry(t){this.store=this.store.filter((e=>e.id!==t)),c.setStore(this.store)}getActiveEntries(){const t=this.getActiveCategories();if(0===t.length)return[];return this.store.filter((e=>t?t.includes(e.category):[]))}getEntry(t){return this.store.find((e=>e.id===t))}getEntries(){return this.store||[]}getEntriesByCtg(t){return this.store.filter((e=>e.category===t))}removeLastEntry(){this.store.pop(),c.setStore(this.store)}getLastEntryId(){return this.store.at(-1).id}compareEntries(t,e){for(const s in t)if("id"!==s&&"coordinates"!==s)if("end"===s||"start"===s){if(new Date(t[s]).getTime()-new Date(e[s]).getTime()!=0)return!1}else if(t[s]!==e[s])return!1;return!0}updateEntry(t,e){this.store=this.store.map((s=>s.id===t?Object.assign(s,e):s)),c.setStore(this.store)}sortBy(t,e,s){if(0===t.length)return[];const r=["description","title","category"].includes(e),o=(t,e)=>"desc"===s?t-e:e-t;return t.sort(((t,s)=>"start"===e?o(new Date(t.start),new Date(s.start)):"end"===e?o(new Date(t.end),new Date(s.end)):r?o(t[e].localeCompare(s[e])):o(t[e],s[e])))}getFirstAndLastEntry(){const t=this.sortBy(this.getActiveEntries(),"start","desc");return void 0===t?[0,0]:[t[0].start,t.at(-1).end]}generateCoordinates(t,e){[t,e]=[(0,a.If)(t),(0,a.If)(e)];const s=4*t.getHours()+Math.floor(t.getMinutes()/15),r=4*e.getHours()+Math.floor(e.getMinutes()/15)-s,o=s+r;return(0,a.aN)(t,e)?{allDay:!1,x:t.getDay(),y:s,h:r,e:o}:{allDay:!0,x:t.getDay(),x2:e.getDay()}}getDayEntries(t){const e=this.getActiveEntries(),s={allDay:[],day:[]};if(0===e.length)return s;const r=e.filter((e=>{const s=new Date(e.start),[r,o,n]=[s.getFullYear(),s.getMonth(),s.getDate()];return r===t.getFullYear()&&o===t.getMonth()&&n===t.getDate()}));for(const t of r)t.coordinates=this.generateCoordinates(new Date(t.start),new Date(t.end)),t.coordinates.allDay?s.allDay.push(t):s.day.push(t);return s}getDayEntriesArray(t){const e=this.getActiveEntries();return 0===e.length?[]:e.filter((e=>{const s=new Date(e.start),[r,o,n]=[s.getFullYear(),s.getMonth(),s.getDate()];return r===t.getFullYear()&&o===t.getMonth()&&n===t.getDate()}))}getMonthEntries(t){const e=this.getActiveEntries();return 0===e.length?[]:e.filter((e=>{const s=new Date(e.start);return s>=t[0]&&s<=t.at(-1)}))}getMonthEntryDates(t){const e=this.getMonthEntries(t),s={};for(const t of e){const e=new Date(t.start),[r,o,n]=[e.getFullYear(),e.getMonth(),e.getDate()],a=`${r}-${o}-${n}`;s[a]||(s[a]=[]),s[a].push(t)}return Object.keys(s)}getGroupedMonthEntries(t){return t.reduce(((t,e)=>{const s=new Date(e.start).getDate();return t[s]||(t[s]=[]),t[s].push(e),t}),{})}getWeekEntries(t){const e=this.getActiveEntries(),[s,r]=[t[0],t[6]],o={allDay:[],day:[]};if(0===e.length)return o;const n=e.filter((t=>{const e=new Date(t.start);return e>=s&&e<=r}));for(const t of n)t.coordinates=this.generateCoordinates(new Date(t.start),new Date(t.end)),t.coordinates.allDay?o.allDay.push(t):o.day.push(t);return o}getYearEntries(t){const e=this.getActiveEntries();return 0===e.length?[]:e.filter((e=>new Date(e.start).getFullYear()===t))}getGroupedYearEntries(t){const e={};for(const s of t){const t=new Date(s.start),r=t.getMonth(),o=t.getDate();e[r]||(e[r]={}),e[r][o]||(e[r][o]=[]),e[r][o].push(s)}return e}addNewCtg(t,e){this.hasCtg(t)||(this.ctg[t]={color:e,active:!0},c.setCtg(this.ctg))}deleteCategory(t){this.hasCtg(t)&&(delete this.ctg[t],c.setCtg(this.ctg))}getDefaultCtg(){return Object.entries(this.ctg)[0]}getFirstActiveCategory(){for(const[t,e]of Object.entries(this.ctg))if(e.active)return t;return"default"}getFirstActiveCategoryKeyPair(){for(const[t,e]of Object.entries(this.ctg))if(e.active)return[t,e.color];const t=this.getDefaultCtg();return[t[0],t[1].color]}getActiveCategories(){const t=Object.keys(this.ctg).filter((t=>this.ctg[t].active));return t.length>0?t:[]}getActiveCategoriesKeyPair(){return Object.entries(this.ctg).filter((t=>t[1].active))}getAllCtg(){return this.ctg}getAllCtgColors(){return Object.values(this.ctg).map((t=>t.color))}getAllCtgNames(){return Object.keys(this.ctg)}getCtgColor(t){return this.ctg[t].color}getCtgLength(t){return this.store.filter((e=>e.category===t)).length}hasCtg(t){let e=!1;for(const s in this.ctg)s.toLowerCase()===t.toLowerCase()&&(e=!0);return e}moveCategoryEntriesToNewCategory(t,e,s){if(this.hasCtg(t)||!0===s){for(const s of this.store)s.category===t&&(s.category=e);c.setStore(this.store)}this.deleteCategory(t)}removeCategoryAndEntries(t){this.hasCtg(t)&&(this.store=this.store.filter((e=>e.category!==t)),c.setStore(this.store)),this.deleteCategory(t)}setCategoryStatus(t,e){this.hasCtg(t)&&(this.ctg[t].active=e,c.setCtg(this.ctg))}setAllCategoryStatusExcept(t,e){for(const s in this.ctg)this.ctg[s].active=s!==t?e:!e;c.setCtg(this.ctg)}updateCtgColor(t,e){this.hasCtg(t)&&(this.ctg[t].color=e,c.setCtg(this.ctg))}getCtgIndex(t){return Object.keys(this.ctg).indexOf(t)}updateCtg(t,e,s){const r=Object.entries(this.ctg),o=null!==e,n=r.length;!Number.isNaN(Number.parseFloat(t))&&Number.isFinite(t)&&(t=`category ${t}`);for(let n=0;n<r.length;n++){const a=r[n][0];s===a&&(r[n][0]=t,o&&(r[n][1].color=e))}r.length===n?(this.ctg=Object.fromEntries(r),this.moveCategoryEntriesToNewCategory(s,t,!0),c.setCtg(this.ctg)):console.error("something went wrong with category name/color change")}getShortcuts(){return this.keyboardShortcuts}setShortcutsStatus(t){this.keyboardShortcutsStatus=t,c.setShortcutsStatus(t)}getShortcutsStatus(){const t=c.getShortcutsStatus();return null===t||t}getAnimationStatus(){return null===c.getAnimationStatus()&&(this.animationStatus=!1,i.Z.setItem("animationStatus",JSON.stringify(!1))),this.animationStatus}setAnimationStatus(t){this.animationStatus=t,c.setAnimationStatus(t)}addActiveOverlay(t){this.activeOverlay.add(t)}removeActiveOverlay(t){return 0===this.activeOverlay.size?void 0:1===this.activeOverlay.size?void(this.activeOverlay=new Set):void(this.activeOverlay=new Set([...this.activeOverlay].filter((e=>e!==t))))}getActiveOverlay(){return this.activeOverlay}hasActiveOverlay(){return this.activeOverlay.size>0}setUserUpload(t){i.Z.setUploadedData(t),window.location.reload()}setFormRenderHandle(t,e){this.handleRenders.calendars[t].render=e}setFormResetHandle(t,e){this.handleRenders.calendars[t].reset=e}setRenderFormCallback(t){this.handleRenders.form.callback=t}setRenderSidebarCallback(t){this.handleRenders.sidebar.callback=t}setResizeHandle(t,e){this.handleRenders.calendars[t].resize=e}setDataReconfigCallback(t){this.handleRenders.reconfig.callback=t}setResetDatepickerCallback(t){this.handleRenders.datepicker.reset=t}setResetPreviousViewCallback(t){this.handleRenders.calendars.previous.reset=t}setRenderCategoriesCallback(t){this.handleRenders.categories.callback=t}getRenderCategoriesCallback(){return this.handleRenders.categories.callback}getResetPreviousViewCallback(){return this.handleRenders.calendars.previous.reset}getResetDatepickerCallback(){return this.handleRenders.datepicker.reset}getDataReconfigCallback(){return this.handleRenders.reconfig.callback}getResizeHandle(t){return void 0===this.handleRenders.calendars[t]?null:this.handleRenders.calendars[t].resize}getFormRenderHandle(t){return void 0===this.handleRenders.calendars[t]?null:this.handleRenders.calendars[t].render}getFormResetHandle(t){return void 0===this.handleRenders.calendars[t].reset?null:this.handleRenders.calendars[t].reset}getRenderFormCallback(){const t=this.handleRenders.form.callback;return null!==t?t:null}getRenderSidebarCallback(){const t=this.handleRenders.sidebar.callback;return null!==t?t:null}}const l=new c},827:(t,e,s)=>{s.d(e,{HY:()=>n,Jc:()=>a,ZP:()=>o});var r=s(748);class o{constructor(t,e,s,o,n,a){this.category=t,this.completed=e,this.description=s,this.end=o,this.id=(0,r.generateId)(),this.start=n,this.title=a}}class n{constructor(t,e){this.boxes=t,this.boxesTop=e}setAllBoxes(t){this.boxes=t.day,this.boxesTop=t.allDay}addBox(t){this.boxes.push(t)}addBoxTop(t){this.boxesTop.push(t)}getBox(t){return this.boxes.find((e=>e.id===t))}getBoxes(){return this.boxes}getBoxesTop(){return this.boxesTop}getLength(){return this.boxes.length}getBoxesByColumn(t){return this.boxes.filter((e=>+e.coordinates.x===t))}getBoxesByColumnTop(t){return this.boxesTop.filter((e=>+e.coordinates.x===t))}getBoxesTopLengths(){return this.getBoxesTop().reduce(((t,e)=>{const s=new Date(e.start);return t[s.getDay()]?t[s.getDay()]++:t[s.getDay()]=1,t}),{})}getColumnsWithMultipleBoxes(){const t={},e=[];for(const s of this.boxes)t[s.coordinates.x]?(t[s.coordinates.x]++,2===t[s.coordinates.x]&&e.push(s.coordinates.x)):t[s.coordinates.x]=1;return e}getEntriesByTitle(t){return this.boxes.filter((e=>e.title.toLowerCase().includes(t.toLowerCase())))}updateCoordinates(t,e){this.getBox(t).coordinates=e}sortByY(t){return t.sort(((t,e)=>+t.coordinates.y-+e.coordinates.y))}updateStore(t,e,s){const r=this.getBox(e).coordinates,o=15*+r.y,n=15*+r.e,a=s[+r.x],i=new Date(a),c=Math.floor(o/60),l=o%60;i.setHours(c),i.setMinutes(l);const h=new Date(a),u=Math.floor(n/60),g=n%60;h.setHours(u),h.setMinutes(g),t.updateEntry(e,{start:i,end:h})}}class a{constructor(t,e){this.boxes=t,this.boxesTop=e}setAllBoxes(t){this.boxes=t.day,this.boxesTop=t.allDay}addBox(t){this.boxes.push(t)}addBoxTop(t){this.boxesTop.push(t)}getBox(t){return this.boxes.find((e=>e.id===t))}getBoxes(){return this.boxes}getBoxesTop(){return this.boxesTop}getAllBoxes(){return[...this.boxes,...this.boxesTop]}getLength(){return this.boxes.length}getBoxesTopLengths(){return this.getBoxesTop().reduce(((t,e)=>{const s=new Date(e.start);return t[s.getDay()]?t[s.getDay()]++:t[s.getDay()]=1,t}),{})}getEntriesByTitle(t){return this.boxes.filter((e=>e.title.toLowerCase().includes(t.toLowerCase())))}updateCoordinates(t,e){this.getBox(t).coordinates=e}getEntriesEndingOnDay(t){return this.boxes.filter((e=>+e.coordinates.e===t))}sortByY(t){return t.sort(((t,e)=>{const s=+t.coordinates.y-+e.coordinates.y;return 0===s?+t.coordinates.e-+e.coordinates.e:s}))}updateStore(t,e){const s=this.getBox(e),r=s.coordinates,o=15*+r.y,n=15*+r.e,a=new Date(s.start),i=Math.floor(o/60),c=o%60;a.setHours(i),a.setMinutes(c);const l=new Date(s.start);let h=Math.floor(n/60),u=n%60;24===h&&(h=23,u=59),l.setHours(h),l.setMinutes(u),t.updateEntry(e,{start:a,end:l})}}},748:(t,e,s)=>{function r(t,e){return t.target.closest(e)}function o(t,e){let s=0,r=0,o=0;const n=e;return s="0x"+t[1]+t[2],r="0x"+t[3]+t[4],o="0x"+t[5]+t[6],"rgba("+ +s+","+ +r+","+ +o+","+n+")"}function n(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}s.r(e),s.d(e,{default:()=>h,generateId:()=>n,getClosest:()=>r,hextorgba:()=>o,isNumeric:()=>l,placePopup:()=>c,setTheme:()=>i,throttle:()=>a});const a=(t,e)=>{let s,r,o;return function(...n){s?(clearTimeout(r),r=setTimeout((()=>{Date.now()-o>=e&&(t.apply(this,n),o=Date.now())}),Math.max(e-(Date.now()-o),0))):(t.apply(this,n),o=Date.now(),s=!0)}};function i(t,e){const s=document.querySelector(".body"),r=document.getElementsByName("color-scheme")[0],o=t.getColorScheme(),n=s.classList.contains("light-mode"),a=s.classList.contains("contrast-mode"),i=e.getAnimationStatus();if("light"===o&&n&&!a||"dark"===o&&!n&&!a||"contrast"===o&&a&&!n)return void setTimeout((()=>{s.setAttribute("data-disable-transitions",i)}),2e3);const c=(e,o,n)=>{s.setAttribute("data-disable-transitions",!0),t.setColorScheme(e),r.setAttribute("content",o),s.setAttribute("class",n),setTimeout((()=>{s.setAttribute("data-disable-transitions",i)}),350)};switch(o){case"light":c("light","light","body light-mode");break;case"contrast":c("contrast","dark","body contrast-mode");break;default:c("dark","dark light","body")}}function c(t,e,s,r,o=!1,n=null){const[a,i]=[t,e],[c,l]=s,[h,u]=r;let g;o&&n?(g=c-a/2+n/2,t+c+4>=h&&(g=h-a-4)):g=c+a>h?c-a-6:c;let d=l+i>u?u-i-6:l;return g<0&&(g=Math.abs(g)),d<0&&(d=56),[g,d]}function l(t){return!Number.isNaN(Number.parseFloat(t))&&Number.isFinite(t)}const h=function(t,e){let s;return function(...r){clearTimeout(s),s=setTimeout((()=>t.apply(this,r)),e)}}}}]);