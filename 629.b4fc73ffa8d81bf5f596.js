"use strict";(self.webpackChunkgoogle_calendar_clone_vanilla=self.webpackChunkgoogle_calendar_clone_vanilla||[]).push([[629],{629:(e,t,o)=>{o.r(t),o.d(t,{default:()=>C});var n=o(432),a=o(827),s=o(151),l=o(634),d=o(375),c=o(748),r=o(340),i=o(255),u=o(287),m=o(944),g=o(683),p=o(611);const y=document.querySelector(".sidebar"),b=document.querySelector(".resize-overlay"),v=document.querySelector(".weekview"),w=document.querySelector(".weekview--calendar"),f=document.querySelector(".weekview--header"),h=document.querySelectorAll(".weekview--header-day__number"),x=document.querySelector(".weekview__grid"),k=document.querySelectorAll(".allday--col"),L=document.querySelectorAll(".week--col");function C(e,t,o){const C=e.getWeekArray(),E=t.getWeekEntries(C),_=new a.HY(E.day,E.allDay);let A=null;function S(){for(const e of L)e.innerText="";for(const e of k)e.innerText="";v.onmousedown=null,f.onclick=null}function B(e,t){const o=document.createElement("div");o.classList.add("allday__cell"),o.classList.add("allday__cell--active");const n=document.createElement("div");n.classList.add("wv-ad--taskicons");const a=document.createElement("div");a.classList.add("wv-ad--taskicon"),a.style.backgroundColor="#6F0C2B",n.append(a);const s=document.createElement("div");s.classList.add("wv-ad--celltitle"),s.textContent=`${t} more`;const l=document.createElement("div");l.classList.add("wv-ad--cellexpand"),l.append((0,r.NM)("var(--white3)")),o.append(n,s,l),e.append(o)}function D(e,o){const n=document.createElement("div");n.classList.add("allday-modal__cell"),n.setAttribute("data-allday-modal-cell",o),n.setAttribute("data-allday-modal-cell-id",e.id),n.style.backgroundColor=t.getCtgColor(e.category);const a=document.createElement("div");a.classList.add("allday-modal__cell-content");const s=document.createElement("div");s.classList.add("allday-modal__cell-action-icons");const d=document.createElement("div");d.classList.add("allday-modal__celltitle"),d.textContent=e.title;const c=document.createElement("div");c.classList.add("allday-modal__cellend-date"),c.textContent=(0,l.$M)(new Date(e.start),new Date(e.end));const i=document.createElement("div");return i.classList.add("allday-modal__cellcategory-title"),i.textContent="category: "+e.category,a.append(d,i,c),s.append((0,r.bg)("var(--taskcolor")),n.append(a,s),n}function M(n,a,d,i,p){const{labels:y}=s.Z,w=y.weekdaysLong[i],f=a.getAttribute("data-wvtop-day"),h=document.createElement("div");h.classList.add("allday-modal");const k=a.getBoundingClientRect();let L;L=d.length<4?Number.parseInt(55*d.length)+60:Number.parseInt(220)+60;const[E,_]=(0,c.tb)(240,L,[Number.parseInt(k.left),Number.parseInt(k.top)+24],[window.innerWidth,window.innerHeight],!0,Math.floor((window.innerWidth-36-x.offsetLeft)/7));E+250>window.innerWidth?h.style.left=window.innerWidth-246+"px":h.style.left=E+"px",h.style.top=_+"px";const A=document.createElement("div");A.classList.add("allday-modal__header");const S=document.createElement("div");S.classList.add("allday-modal-title"),S.textContent=`${w}, ${y.monthsLong[C[i].getMonth()]} ${f}${(0,l.To)(f)}`;const B=document.createElement("div");B.classList.add("close-allday-modal"),B.append((0,r.G0)("var(--white4"));const M=document.createElement("div");function Z(e){"Escape"===e.key&&T()}function T(){h.remove(),h.onmousedown=null,b.classList.add("hide-resize-overlay"),b.onclick=null,document.removeEventListener("keydown",Z),t.removeActiveOverlay("allday-modal"),p.firstChild.firstChild.style.backgroundColor="#6F0C2B",p.classList.remove("allday-modal__cell--open")}M.classList.add("allday-modal__content");for(const[e,t]of d.entries())M.append(D(t,e));A.append(S,B),h.append(A,M),v.insertBefore(h,document.querySelector(".weekview__top")),t.addActiveOverlay("allday-modal"),b.onclick=T,h.onmousedown=function(n){const a=(0,c.As)(n,".close-allday-modal"),s=(0,c.As)(n,".allday-modal__cell-action-icons");a?T():s&&function(n,a,s){const d=n.id,r=n.start,i=t.getCtgColor(n.category),p=s.target.getBoundingClientRect(),[y,b]=(0,c.tb)(400,165,[Number.parseInt(p.right),s.clientY+28],[window.innerWidth,window.innerHeight]);t.setFormResetHandle("week",a);const v=new m.Z;v.setSubmission("edit",d,n.title,n.description),v.setCategory(n.category,i),v.setDates((0,l.cF)(r,n.end)),u.Z.setFormDatepickerDate(e,o,r);const w=()=>u.Z.getConfig(v.getSetup());(0,g.Z)(e,t,n,o,w);const f=document.querySelector(".entry__options");f.style.top=b+"px",f.style.left=y+"px"}(t.getEntry(n.target.parentElement.getAttribute("data-allday-modal-cell-id")),T,n)},document.addEventListener("keydown",Z)}function Z(e){return document.querySelector(`[data-column-index="${e}"]`)}function T(){document.querySelector(".temp-week-box")?.remove()}function q(n,a){(0,d.iE)("dragstart",v,t);const s=a.parentElement,r=s.getAttribute("data-column-index");let b=s.getAttribute("data-column-index"),w=!1;a.setAttribute("data-box-col",b);const f=+a.style.top.split("px")[0],h=+a.style.height.split("px")[0],k=n.pageY-x.offsetTop,E=n.pageY;let A=n.pageX,[S,B]=[0,0],D=!1;const M=e=>{S=Math.abs(e.clientX-A),B=Math.abs(e.clientY-E),D||(S>3||B>3)&&(D=!0,document.body.style.cursor="move",a.classList.contains("box-ontop")&&(w=!0,(0,d.mg)("week",a)),a.classList.add("box-dragging"),(0,d.Ly)(a,s,w,"week"),S=0,B=0);const t=x.offsetTop,o=e.pageY-t,n=o-k;let l=12.5*Math.round((n+f)/12.5);if(l<0||o<0)return void(l=0);if(l+h>1188)return;a.style.top=`${l}px`;const c=e.pageX-A>0?"right":"left";let r,i;r=+b-1>=0?Number.parseInt(Z(b-1).getBoundingClientRect().right):null,i=+b+1<L.length?Number.parseInt(Z(+b+1).getBoundingClientRect().left):null,"right"===c&&null!==i&&e.pageX>=i&&(Z(+b+1).append(a),A=e.pageX,b=+b+1,a.setAttribute("data-box-col",+b)),"left"===c&&null!==r&&e.pageX<=r&&(Z(+b-1).append(a),A=e.pageX,b=+b-1,a.setAttribute("data-box-col",+b))};document.addEventListener("mousemove",M),document.addEventListener("mouseup",(function n(){const s=document.querySelector(".temporary-box");if(a.classList.remove("box-dragging"),w&&a.classList.add("box-ontop"),null===s){const n=()=>{(0,d.iE)("dragend",v,t),a.classList.remove("wv-box-clicked")};a.classList.add("wv-box-clicked");const s=a.getAttribute("data-box-id"),r=t.getEntry(s),i=r.start,p=a.style.backgroundColor,y=a.getBoundingClientRect(),[b,w]=(0,c.tb)(400,165,[Number.parseInt(y.left),Number.parseInt(y.top)+56],[window.innerWidth,window.innerHeight],!1);t.setFormResetHandle("week",n);const f=new m.Z;f.setSubmission("edit",s,r.title,r.description),f.setCategory(r.category,p),f.setDates((0,l.cF)(i,r.end)),u.Z.setFormDatepickerDate(e,o,i);const h=()=>u.Z.getConfig(f.getSetup());(0,g.Z)(e,t,r,o,h);const x=document.querySelector(".entry__options");window.innerWidth>580?(x.style.top=+w+"px",x.style.left=b+"px"):x.style.top="64px"}else{s.remove(),(0,d.c4)(a,"week");const n=(0,i.ZP)(+a.getAttribute("data-start-time"),+a.getAttribute("data-time-intervals"));a.setAttribute("data-time",n),a.children[1].children[0].textContent=n,(0,d.nF)(a,"week",_),_.updateStore(t,a.getAttribute("data-box-id"),C),b!==+r&&(y.classList.contains("hide-sidebar")||(o.setDate(e.getYear(),e.getMonth(),e.getDay()),(0,p.Z)(e,t,o)));const l=+a.getAttribute("data-box-col");_.getBoxesByColumn(l).length>1?(0,d.ZP)(l,"week",_):a.setAttribute("box-idx","box-one"),(0,d.iE)("dragend",v,t)}document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",n)}))}function F(n){(0,d.iE)("dragstart",v,t),document.body.style.cursor="move";const[a,s]=t.getFirstActiveCategoryKeyPair(),c=Number.parseInt(n.target.getAttribute("data-column-index")),r=document.createElement("div");r.setAttribute("class","box box-dragging temp-week-box");const g=(0,d.E_)("week"),p=document.createElement("div"),y=document.createElement("span"),b=document.createElement("span");p.classList.add("box__content"),y.classList.add("box-time"),b.classList.add("box-time");const w=+x.offsetTop,f=Number.parseInt(x.scrollTop),h=n.pageY-x.offsetTop,k=12.5*Math.round((h+Math.abs(f))/12.5);r.setAttribute("style",(0,d.ZB)(k,s));const L={y:+k/12.5,x:c,h:1,e:2};let[E,_,A,S]=(0,d.Xd)(k);function B(e){const t=e.pageY-w-h;let o=12.5*Math.round(t/12.5);o<=12.5&&(o=12.5),o+k>1188&&(o=1187.5-k),r.style.height=`${o}px`,L.h=+o/12.5,L.e=+L.y+L.h,A=Math.floor((+o+ +k)/12.5/4),S=15*Math.floor((+o+ +k)/12.5%4),y.style.wordBreak="break-word",y.textContent=`${(0,i.mr)(E,_)} â€“ `,b.textContent=`${(0,i.mr)(A,S)}`}p.append(y,b),r.append(g,p),n.target.append(r),document.addEventListener("mousemove",B),document.addEventListener("mouseup",(function n(){const i=(0,l.cp)(new Date(C[c]),[E,A],[_,S]);!function(n,a,s,d,c){t.setFormResetHandle("week",T);const r=t.getRenderFormCallback(),i=new m.Z,[g,p,y,b]=c;i.setSubmission(g,p,y,b),"create"===g&&(n.style.opacity=.9);const[v,w]=s;i.setCategory(v,w);const[f,h]=d;i.setDates((0,l.cF)(f,h)),r(),u.Z.setFormDatepickerDate(e,o,f),u.Z.getConfig(i.getSetup())}(r,0,[a,s],i,["create",null,null,null]),(0,d.iE)("dragend",v,t),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",B)}))}function $(e){const o=(0,c.As)(e,".box-resize-s"),n=(0,c.As)(e,".box"),a=(0,c.As)(e,".week--col"),s=(0,c.As)(e,".allday--col");o?function(e,o){(0,d.iE)("dragstart",v,t),document.body.style.cursor="move";const n=o.parentElement,a=n.getAttribute("data-column-index");o.setAttribute("data-box-col",a);let s=!1;const l=(0,d.gn)(o);o.classList.contains("box-ontop")&&(s=!0,(0,d.mg)("week",o)),o.classList.add("box-resizing");const c=o.offsetTop;(0,d.Ly)(o,n,s,"week");const r=e=>{const t=x.offsetTop;let n=Math.abs(Number.parseInt(w.getBoundingClientRect().top));n==t?n-=t:w.getBoundingClientRect().top>0?n=t-n:n+=t;const a=12.5*Math.round((e.pageY-c-t+n)/12.5);a<=12.5?o.style.height="12.5px":a+Number.parseInt(o.style.top)>1188||(o.style.height=`${a}px`)},u=()=>{if(document.querySelector(".temporary-box").remove(),o.classList.remove("box-resizing"),s&&o.classList.add("box-ontop"),o.style.height===l.height)s&&(o.setAttribute("class",l.class),o.style.left=l.left,o.style.width=l.width);else{(0,d.c4)(o,"week");const e=+o.getAttribute("data-start-time"),n=+o.getAttribute("data-time-intervals"),a=(0,i.ZP)(e,n);o.children[1].children[0].textContent=a,(0,d.nF)(o,"week",_);const s=+o.getAttribute("data-box-col");_.getBoxesByColumn(s).length>1&&(0,d.ZP)(s,"week",_),_.updateStore(t,o.getAttribute("data-box-id"),C)}(0,d.iE)("dragend",v,t),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",u)}(0,e.target.parentElement):n?q(e,e.target):a?F(e,e.target):s&&e.target.childElementCount>0&&function(e,t){const o=t.parentElement;t.classList.add("allday-modal__cell--open"),t.firstChild.firstChild.style.backgroundColor="#01635b";const n=Number.parseInt(o.getAttribute("data-allday-column")),a=_.getBoxesByColumnTop(n);a.length>0&&(M(0,o,a,n,t),b.classList.remove("hide-resize-overlay"))}(0,e.target)}function N(){!function(){for(const e of L)e.innerText="";for(const e of k)e.innerText="";for(const e of _.getBoxes()){const o=e.coordinates.y;(null===A||o<A)&&(A=o);const n=L[+e.coordinates.x];(0,d.dO)(n,e,"week",t.getCtgColor(e.category))}const e=_.getBoxesTopLengths();for(const t in e)B(k[+t],e[t])}();const e=_.getColumnsWithMultipleBoxes();for(const t of e)(0,d.ZP)(t,"week",_)}function I(a){(0,c.As)(a,".weekview--header-day__number")&&function(a){const[s,d,c]=(0,l.pH)(a.target,"data-weekview-date");e.setDate(s,d,c),e.setDateSelected(c),e.setComponent("day"),(0,n.Z)("day",e,t,o)}(a)}!function(){let t,o;document.querySelector(".wv-gmt").textContent=`UTC ${e.getGmt()}`;const n=[],a=[],s=e.getToday(),[l,d,c]=[s.getFullYear(),s.getMonth(),s.getDate()];for(const s of C){const[r,i,u]=[s.getFullYear(),s.getMonth(),s.getDate()];n.push(u),a.push(`${r}-${i}-${u}`),u===e.getDateSelected()&&i===e.getMonth()&&(o=u),u===c&&i===d&&r===l&&(t=u)}for(const[e,s]of n.entries())s===o?h[e].classList.add("wvh--selected"):h[e].classList.remove("wvh--selected"),s===t?h[e].classList.add("wvh--today"):h[e].classList.remove("wvh--today"),h[e].textContent=s,h[e].setAttribute("data-weekview-date",a[e]),k[e].setAttribute("data-wvtop-day",s)}(),N(),v.onmousedown=$,f.onclick=I,t.setResetPreviousViewCallback(S),null!==A&&setTimeout((()=>{x.scrollTo({top:Math.abs(12.5*+A-25),behavior:"instant"})}),4)}}}]);