"use strict";(self.webpackChunkgoogle_calendar_clone_vanilla=self.webpackChunkgoogle_calendar_clone_vanilla||[]).push([[712],{712:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var o=n(432);const s=class{constructor(t){this.flag=t,this.tops=[20,20],this.heights=[18,18]}updateFlag(){this.flag=window.innerWidth<=530||window.innerHeight<=470}getFlag(){return this.flag}getTop(){const[t,e]=this.tops;return this.flag?t:e}getHeight(){const[t,e]=this.heights;return this.flag?t:e}getPrevTop(t){const[e,n]=this.tops;return t===e?n:e}};var a=n(151),i=n(634),r=n(375),d=n(748),l=n(340),c=n(287),m=n(944),u=n(683),p=n(611);const h=document.querySelector(".resize-overlay"),g=document.querySelector(".sidebar"),v=document.querySelector(".monthview--calendar");function f(t,e,n){const f=new s(window.innerWidth<=530||window.innerHeight<=470);function y(){g.classList.contains("hide-sidebar")||(n.resetDate(),t.setDateSelected(t.getDay()),(0,p.Z)(t,e,n))}function w(t){"hide"===t?(h.classList.add("hide-resize-overlay"),e.removeActiveOverlay("hide-resize-overlay")):(h.classList.remove("hide-resize-overlay"),e.addActiveOverlay("hide-resize-overlay"))}function b(){t.setComponent("day"),(0,o.Z)("day",t,e,n),y()}function L(t,n,o,s){const a=document.createElement("div");a.classList.add("monthview--box"),a.setAttribute("data-monthview-id",t),a.style.backgroundColor=e.getCtgColor(n),a.style.top=`${o}px`,a.style.height=`${f.getHeight()}px`,a.style.width="100%";const i=document.createElement("div");return i.classList.add("monthview--title"),i.textContent=s,a.append(i),a}function x(e,n,o,s){const r=[+e.getDay(),Math.floor(n/7)],d=document.createElement("div");d.classList.add("monthview--day"),d.setAttribute("data-mv-date",s),d.setAttribute("data-mv-idx",n),d.setAttribute("data-mv-coordinates",r);const l=document.createElement("button");l.classList.add("monthview--dayofmonth");const c=document.createElement("div");c.classList.add("monthview--daycontent"),e.getMonth()===t.getMonth()&&e.getDate()===t.getDateSelected()&&l.classList.add("monthview--dayofmonth-selected"),l.append(function(e,n){const{labels:o}=a.Z,s=`${n.getDate()} ${o.monthsShort[n.getMonth()]}`,r=document.createElement("span");return r.classList.add("monthview--daynumber"),n.getMonth()!==t.getMonth()?(r.textContent=s,r.classList.add("monthview--daynumber-prevnext")):1===n.getDate()?r.textContent=s:(0,i.aN)(n,new Date)?(r.textContent=n.getDate(),r.classList.add("monthview--daynumber-today"),e.classList.add("monthview--today")):r.textContent=n.getDate(),r}(d,e));let m=0;if(void 0!==o&&o.length>0)if((o=o.filter((t=>new Date(t.start).getMonth()===e.getMonth()))).length>=6)c.append(function(t,e){const n=document.createElement("div");n.classList.add("monthview--daygroup"),n.setAttribute("data-mvgrouped-date",t),n.setAttribute("data-mvgrouped-length",e);const o=document.createElement("div");o.classList.add("monthview--grouped");const s=document.createElement("div");return s.classList.add("monthview--daycontent__grouped-title"),s.textContent=`${e} more...`,o.append(s),n.append(o),n}(s,o.length)),c.classList.add("monthview--daycontent-grouped");else for(const[t,n]of o.entries())(0,i.aN)(new Date(n.start),e)&&(t>0&&(m+=f.getTop()),c.append(L(n.id,n.category,m,n.title)));d.append(l,c),v.append(d)}function E(){v.innerText="",v.onmousedown=null,v.onclick=null}function C(t){return t.getAttribute("data-mv-coordinates").split(",").map((t=>Number.parseInt(t)))}function A(t,n){const[o,s,a]=(0,i.pH)(t,"data-mv-date","month"),r=n.getAttribute("data-monthview-id"),d=e.getEntry(r),[l,c]=[new Date(d.start),new Date(d.end)],m=new Date(o,s,a),u=(0,i.Z_)(l,m),p=c.getDate()+Math.floor(u/86400)+1;e.updateEntry(r,{start:new Date(o,s,a,l.getHours(),l.getMinutes()),end:new Date(c.getFullYear(),c.getMonth(),p,c.getHours(),c.getMinutes())})}function D(t){t.classList.remove("box-mv-dragactive"),t.style.top="0px",t.style.left="0px",t.style.width="100%",t.style.height=`${f.getHeight()}px`}function _(t,e){if(0!==t.length&&void 0!==t)for(let n=0;n<t.length;n++)void 0===t[n]||null===t[n]||t[n].classList.contains("monthview--box__form-temp")||(t[n].style.top=n*f.getTop()+"px",e?(t[n].classList.add("monthview--box__drop"),setTimeout((()=>{t[n].classList.remove("monthview--box__drop")}),200)):t[n].setAttribute("class","monthview--box"))}function S(o,s){(0,r.iE)("dragstart",v,e);const a=Date.now(),l=s.parentElement,p=l.parentElement;p.classList.add("current-drop-zone");const h=document?.querySelector(".more-modal"),g=l.childElementCount,[w,b]=C(p);!function(t){const e=t.cloneNode(!0);v.prepend(e),e.classList.add("box-mv-dragactive"),e.focus()}(s);const L=document?.querySelector(".box-mv-dragactive");L.setAttribute("data-box-mvx",w),L.setAttribute("data-box-mvy",b);const x=p.getBoundingClientRect(),E=Number.parseFloat(x.width.toFixed(2)),S=Number.parseFloat(x.height.toFixed(2)),k=Number.parseInt(v.offsetLeft),$=s.getBoundingClientRect(),F=Number.parseFloat($.width),H=f.getHeight();L.style.top=`${l.offsetTop}px`,L.style.width=`${F}px`,L.style.height=`${H}px`,L.style.left=`${l.offsetLeft}px`,L.classList.add("hide-mv-clone");const M=v.classList.contains("five-weeks"),[q,T]=[o.clientX,o.clientY];let[Z,z]=[0,0],[I,R]=[w,b],B=!1,Y=!1;const P=t=>{Z=Math.abs(t.clientX-q),z=Math.abs(t.clientY-T),(Z>1||z>1)&&(Y||(h&&h.remove(),document.body.style.cursor="move",Y=!0)),(Z>3||z>3)&&(B||(s.style.opacity="0.5",L.classList.remove("hide-mv-clone")),B=!0);let e=Math.floor((t.clientX-v.offsetLeft)/E);if(e<0)return void(e=0);if(e>6)return void(e=6);if(I!==e){const t=e*E+k;L.style.left=`${Number.parseFloat(t.toFixed(2))}px`,I=e}let n=Math.floor((t.clientY-v.offsetTop)/S);if(n<0)n=0;else if(M&&n>4)n=4;else if(!M&&n>5)n=5;else{if(R!==n){const t=n*S+v.offsetTop+16;L.style.top=`${Number.parseFloat(t.toFixed(2))}px`,R=n}document.querySelector(".current-drop-zone")?.classList.remove("current-drop-zone"),document.querySelector(`[data-mv-coordinates="${e},${n}"]`).classList.add("current-drop-zone")}},W=()=>{const o=document?.querySelector(".current-drop-zone"),p=Date.now()-a,[f,x]=C(o);o.classList.remove("current-drop-zone");const E=o.children[1],S=E?.children;let k=!1;if(null==o)return(0,r.iE)("dragend",v,e),s.style.opacity="1",L.remove(),k=!1,document.removeEventListener("mousemove",P),void document.removeEventListener("mouseup",W);f===w&&x===b?(k=!1,s.style.opacity="1",L.remove(),h&&h.remove(),p<200&&function(o,s){const a=o.getAttribute("data-monthview-id"),r=e.getEntry(a),l=r.start,p=e.getCtgColor(r.category),h=(0,d.v0)(p,.5);s.classList.add("monthview--daycontent__form-temp"),s.style.backgroundColor=h;const g=s.getBoundingClientRect(),[v,f]=(0,d.tb)(360,165,[Number.parseInt(g.left),Number.parseInt(g.top)],[window.innerWidth,window.innerHeight]);e.setFormResetHandle("month",N);const y=new m.Z;y.setSubmission("edit",a,r.title,r.description),y.setCategory(r.category,p),y.setDates((0,i.cF)(l,r.end)),c.Z.setFormDatepickerDate(t,n,l);const w=()=>c.Z.getConfig(y.getSetup());(0,u.Z)(t,e,r,n,w);const b=document.querySelector(".entry__options");b.style.top=f+"px",b.style.left=v+"px"}(s,o)):(k=!0,void 0!==S[0]?S[0].classList.contains("monthview--daygroup")?(!function(t){const e=t.getAttribute("data-mvgrouped-length");t.setAttribute("data-mvgrouped-length",+e+1),t.firstChild.firstChild.textContent=`${t.getAttribute("data-mvgrouped-length")} more...`}(S[0]),A(o,L),L.remove(),s.remove()):(D(L),L.classList.remove("hide-mv-clone"),E.insertBefore(L,S[0]),A(o,L),s.remove(),S.length<=5?_(S,!0):function(t,e,n,o){const s=document.createElement("div");s.classList.add("monthview--daygroup"),s.setAttribute("data-mvgrouped-date",t.getAttribute("data-mv-date")),s.setAttribute("data-mvgrouped-length",n.length);const a=document.createElement("div");a.classList.add("monthview--grouped");const i=document.createElement("div");i.classList.add("monthview--daycontent__grouped-title"),i.textContent=`${n.length} more...`,e.innerText="",s.append(a),a.append(i),e.append(s),e.classList.add("monthview--daycontent-grouped"),o.remove()}(o,E,S,L)):(D(L),s.remove(),L.classList.remove("hide-mv-clone"),E.append(L),A(o,L),y())),k&&(1===g?y():_(l.children,!0)),(0,r.iE)("dragend",v,e),document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",W)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",W)}function k(t){"Escape"===t.key&&$()}function $(){const t=document?.querySelector(".more-modal");t&&t.remove(),w("hide"),document.removeEventListener("keydown",k)}function F(n){const{labels:o}=a.Z,s=function(t){const[n,o,s]=(0,i.pH)(t.target.parentElement.parentElement,"data-mv-date","month");return e.getDayEntriesArray(new Date(n,o,s))}(n);w("show");const r=n.target.parentElement.parentElement,c=document.createElement("div");c.classList.add("more-modal"),c.setAttribute("data-mv-modal",r.getAttribute("data-mv-idx"));let m=28*s.length+64;m>400&&(m=400);const u=r.getBoundingClientRect(),p=Number.parseInt(u.width),[g,f]=(0,d.tb)(216,m,[Number.parseInt(u.left),Number.parseInt(u.top)],[window.innerWidth,window.innerHeight],!0,p),y=+window.innerHeight-+f-24;c.setAttribute("style",`top: ${f}px; left: ${g}px; width: 216px; height: ${m}px; min-height: 120px; max-height: ${y}px;`);const L=document.createElement("div");L.classList.add("more-modal-header");const x=document.createElement("div");x.classList.add("more-modal-header-title");const E=(0,i.RU)(n.target.parentElement.parentElement.getAttribute("data-mv-date")),C=document.createElement("span");C.classList.add("more-modal-header-title-dow"),C.textContent=o.weekdaysShort[E.getDay()].toUpperCase();const A=document.createElement("span");A.classList.add("more-modal-header-title-dayn"),A.textContent=E.getDate();const D=document.createElement("div");D.classList.add("more-modal-header-close"),D.append((0,l.G0)("var(--white3)")),D.setAttribute("data-tooltip","Close"),x.append(D,C,A),L.append(x),c.append(L,function(t){const n=document.createElement("div");n.classList.add("more-modal-content");for(let o=0;o<t.length;o++){const s=t[o],a=document.createElement("div");a.classList.add("more-modal-entry"),a.style.top=22*o+"px",a.style.width="calc(100% - 16px)",a.style.height="20px",a.setAttribute("data-monthview-id",s.id),a.setAttribute("data-mvhidden-category",s.category),a.style.backgroundColor=e.getCtgColor(s.category);const i=document.createElement("div");i.classList.add("more-modal-entry-title"),i.textContent=s.title,a.append(i),n.append(a)}return n}(s)),v.append(c),A.addEventListener("click",(()=>{!function(e){w("hide"),t.setDate(e.getFullYear(),e.getMonth(),e.getDate()),b()}(E)}),{once:!0}),h.addEventListener("click",(()=>{$()}),{once:!0}),document.addEventListener("keydown",k)}function N(){const t=document.querySelector(".monthview--daycontent__form-temp");t&&(t.removeAttribute("style"),t.classList.remove("monthview--daycontent__form-temp"))}function H(){const t=document?.querySelector(".monthview--box__form-temp");if(!t)return;const e=t.parentElement,n=e.parentElement;n.removeAttribute("style"),n.classList.remove("monthview--daycontent__form-temp"),t.remove(),_(e.children,!1)}function M(o,s){if(o.target.classList.contains("monthview--daycontent")){const o=s.parentElement,a=o.getBoundingClientRect(),r=(0,i.pH)(o,"data-mv-date","month"),[l,u]=(0,i.tB)(r);let p,h;if(0===e.getActiveCategories().length){const t=e.getDefaultCtg();p=t[0],h=t[1].color}else{const t=e.getFirstActiveCategoryKeyPair();p=t[0],h=t[1]}!function(t,e,n,o){const s=L("temp",n,0,"( New Entry )");t.scrollTop=0,s.classList.add("monthview--box__form-temp"),e.classList.add("monthview--daycontent__form-temp"),e.style.backgroundColor=o,t.children.length>0?(t.insertBefore(s,t.children[0]),_(t.children,!1)):t.append(s)}(s,o,p,(0,d.v0)(h,.5)),e.setFormResetHandle("month",H);const g=e.getRenderFormCallback(),v=new m.Z;v.setSubmission("create",null,null,null),v.setCategory(p,h),v.setDates((0,i.cF)(l,u)),g(),c.Z.setFormDatepickerDate(t,n,l),c.Z.getConfig(v.getSetup()),c.Z.setFormStyle(Number.parseInt(a.right),Number.parseInt(a.top),!1,null)}}function q(e){const n=(0,d.As)(e,".monthview--box"),o=(0,d.As)(e,".monthview--dayofmonth"),s=(0,d.As)(e,".monthview--daygroup"),a=(0,d.As)(e,".more-modal-entry"),r=(0,d.As)(e,".more-modal-header-close");if(n){if(window.innerHeight<=280)return;S(e,e.target)}else{if(o)return e.stopPropagation(),void function(e){const[n,o,s]=(0,i.pH)(e.target.parentElement,"data-mv-date","month");t.setDate(n,o,s),t.setDateSelected(s),b()}(e);if(s)F(e);else if(a){if(window.innerHeight<=300)return;!function(t){const e=document.querySelector(".more-modal"),n=Number.parseInt(e.getAttribute("data-mv-modal")),o=document.querySelector(`[data-mv-idx="${n}"]`),s=t.target.cloneNode(!0);s.setAttribute("class","monthview--box"),s.firstChild.setAttribute("class","monthview--title"),s.style.top=`${f.getTop()}px`,s.style.left="0px",s.style.width="100%",o.lastChild.append(s);const a=o.lastChild.firstChild,i=Number.parseInt(a.getAttribute("data-mvgrouped-length"))-1;i<1?(o.lastChild.classList.remove("monthview--daycontent-grouped"),a.remove(),s.style.top="0px"):(a.setAttribute("data-mvgrouped-length",i),a.firstChild.firstChild.textContent=`${i} more...`),S(t,s),s.focus(),e.style.opacity="0.8"}(e)}else r&&$()}}function T(t){if((0,d.As)(t,".monthview--daycontent")){if(window.innerHeight<=300)return;M(t,t.target)}else;}!function(){v.innerText="";let n=t.getMonthArray(),o=e.getMonthEntries(n),s=e.getGroupedMonthEntries(o);n.length<42?v.classList.add("five-weeks"):v.classList.remove("five-weeks");const a=t=>{const e=s[t.getDate()];return void 0!==e?e:[]};for(const[t,e]of n.entries())x(e,t,a(e),(0,i.OT)(e));n=null,o=null,s=null}(),v.onmousedown=q,v.onclick=T,e.setResetPreviousViewCallback(E)}}}]);