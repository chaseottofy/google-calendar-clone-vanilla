/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";const e={labels:{monthsLong:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShortLower:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],monthsLongLower:["january","february","march","april","may","june","july","august","september","october","november","december"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysLong:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysNarrow:["S","M","T","W","T","F","S"],numbers:["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen"]},colorsMutedMed:{red:{1:"#df2ab5",2:"#af1f8d",3:"#981b7b",4:"#bc136f",5:"#ab1369",6:"#941361",7:"#84135c",8:"#a81f9c",9:"#941b85",10:"#bc138c",11:"#ab1381",12:"#941371",13:"#c126b6"},orange:{1:"#ee6a8b",2:"#d4476a",3:"#d44c52",4:"#cb444a",5:"#af3d46",6:"#9c3a44",7:"#883642",8:"#d44785",9:"#d44467",10:"#cb3b5e",11:"#af3855",12:"#9c354e",13:"#d65f91"},green:{1:"#1e9e6d",2:"#19855c",3:"#177c56",4:"#166f4d",5:"#156a4a",6:"#125e41",7:"#11593d",8:"#19854c",9:"#177c47",10:"#166f42",11:"#156a40",12:"#125e3b",13:"#1b8e4f"},blue:{1:"#14759a",2:"#117698",3:"#307ea7",4:"#1d6f99",5:"#196489",6:"#16597a",7:"#124f6c",8:"#118891",9:"#3092a7",10:"#1d8499",11:"#197589",12:"#16677a",13:"#127a87"},purple:{1:"#33418b",2:"#33428c",3:"#3c4176",4:"#373d81",5:"#303571",6:"#292f63",7:"#242a5a",8:"#33528c",9:"#3b4576",10:"#374981",11:"#2f3d71",12:"#293563",13:"#2e487d"},grey:{1:"#859392",2:"#5f6a69",3:"#4d5656",4:"#4b5858",5:"#506160",6:"#566968",7:"#607a7a",8:"#5f6a68",9:"#4d5655",10:"#4b5856",11:"#50615d",12:"#566964",13:"#788482"}}};function t(t,o){const{labels:n}=e,{weekdaysLong:s,monthsLong:r}=n,a=new Date;document.querySelector(".btn-today").setAttribute("data-tooltip",`${s[a.getDay()]}, ${r[a.getMonth()]} ${a.getDate()}`);const i=document.querySelector(".datetime-content--title"),c=document.querySelector(".header"),d=document.querySelector(".select__modal"),l=document.querySelector(".prev"),u=document.querySelector(".next"),m=document.querySelector(".h-col-2"),g=document.querySelector(".datetime-content"),p=document.querySelector(".prev-next"),h=(e,t)=>{c.style.borderBottom=e,i.textContent=t,m.classList.remove("datetime-inactive"),m.style.paddingRight="0",g.removeAttribute("style"),p.removeAttribute("style")},y=e=>{"list"!==e&&(l.setAttribute("data-tooltip",`prev ${e}`),u.setAttribute("data-tooltip",`next ${e}`)),d.textContent=e[0].toUpperCase()+e.slice(1),d.setAttribute("data-value",e.slice(0,1).toUpperCase())};switch(o){case"day":h("1px solid transparent",`${t.getMonthName()} ${t.getDay()}, ${t.getYear()}`),y("day");break;case"week":h("1px solid transparent",t.getWeekRange()),y("week");break;case"month":h("1px solid transparent",`${t.getMonthName()} ${t.getYear()}`),y("month");break;case"year":h("1px solid transparent",t.getYear()),y("year");break;case"list":y("list"),c.style.borderBottom="1px solid var(--mediumgrey1)",p.setAttribute("style","pointer-events:none;"),m.classList.add("datetime-inactive")}}function o(e,t){return e.target.closest(t)}function n(e,t){let o=0,n=0,s=0;const r=t;return o="0x"+e[1]+e[2],n="0x"+e[3]+e[4],s="0x"+e[5]+e[6],"rgba("+ +o+","+ +n+","+ +s+","+r+")"}const s=(e,t)=>{let o,n,s;return function(...r){o?(clearTimeout(n),n=setTimeout((()=>{Date.now()-s>=t&&(e.apply(this,r),s=Date.now())}),Math.max(t-(Date.now()-s),0))):(e.apply(this,r),s=Date.now(),o=!0)}};function r(e,t){const o=document.querySelector(".body"),n=document.getElementsByName("color-scheme")[0],s=e.getColorScheme(),r=o.classList.contains("light-mode"),a=o.classList.contains("contrast-mode"),i=t.getAnimationStatus();if(o.setAttribute("data-disable-transitions",!0),"light"===s&&r&&!a||"dark"===s&&!r&&!a||"contrast"===s&&a&&!r)return void setTimeout((()=>{o.setAttribute("data-disable-transitions",i)}),350);const c=(t,s,r)=>{o.setAttribute("data-disable-transitions",!0),e.setColorScheme(t),n.setAttribute("content",s),o.setAttribute("class",r),setTimeout((()=>{o.setAttribute("data-disable-transitions",i)}),350)};switch(s){case"light":c("light","light","body light-mode");break;case"contrast":c("contrast","dark","body contrast-mode");break;default:c("dark","dark light","body")}}function a(e,t,o,n,s=!1,r=null){const[a,i]=[e,t],[c,d]=o,[l,u]=n;let m;s&&r?(m=c-a/2+r/2,e+c+4>=l&&(m=l-a-4)):m=c+a>l?c-a-6:c;let g=d+i>u?u-i-6:d;return m<0&&(m=Math.abs(m)),g<0&&(g=56),[m,g]}class i{constructor(e,t,o,n,s,r){this.category=e,this.completed=t,this.description=o,this.end=n,this.id=Date.now().toString(36)+Math.random().toString(36).slice(2),this.start=s,this.title=r}}class c{constructor(e,t){this.boxes=e,this.boxesTop=t}setAllBoxes(e){this.boxes=e.day,this.boxesTop=e.allDay}addBox(e){this.boxes.push(e)}addBoxTop(e){this.boxesTop.push(e)}getBox(e){return this.boxes.find((t=>t.id===e))}getBoxes(){return this.boxes}getBoxesTop(){return this.boxesTop}getLength(){return this.boxes.length}getBoxesByColumn(e){return this.boxes.filter((t=>+t.coordinates.x===e))}getBoxesByColumnTop(e){return this.boxesTop.filter((t=>+t.coordinates.x===e))}getBoxesTopLengths(){return this.getBoxesTop().reduce(((e,t)=>{const o=new Date(t.start);return e[o.getDay()]?e[o.getDay()]++:e[o.getDay()]=1,e}),{})}getColumnsWithMultipleBoxes(){const e={},t=[];for(const o of this.boxes)e[o.coordinates.x]?(e[o.coordinates.x]++,2===e[o.coordinates.x]&&t.push(o.coordinates.x)):e[o.coordinates.x]=1;return t}getEntriesByTitle(e){return this.boxes.filter((t=>t.title.toLowerCase().includes(e.toLowerCase())))}updateCoordinates(e,t){this.getBox(e).coordinates=t}sortByY(e){return e.sort(((e,t)=>+e.coordinates.y-+t.coordinates.y))}updateStore(e,t,o){const n=this.getBox(t).coordinates,s=15*+n.y,r=15*+n.e,a=o[+n.x],i=new Date(a),c=Math.floor(s/60),d=s%60;i.setHours(c),i.setMinutes(d);const l=new Date(a),u=Math.floor(r/60),m=r%60;l.setHours(u),l.setMinutes(m),e.updateEntry(t,{start:i,end:l})}}class d{constructor(e,t){this.boxes=e,this.boxesTop=t}setAllBoxes(e){this.boxes=e.day,this.boxesTop=e.allDay}addBox(e){this.boxes.push(e)}addBoxTop(e){this.boxesTop.push(e)}getBox(e){return this.boxes.find((t=>t.id===e))}getBoxes(){return this.boxes}getBoxesTop(){return this.boxesTop}getAllBoxes(){return[...this.boxes,...this.boxesTop]}getLength(){return this.boxes.length}getBoxesTopLengths(){return this.getBoxesTop().reduce(((e,t)=>{const o=new Date(t.start);return e[o.getDay()]?e[o.getDay()]++:e[o.getDay()]=1,e}),{})}getEntriesByTitle(e){return this.boxes.filter((t=>t.title.toLowerCase().includes(e.toLowerCase())))}updateCoordinates(e,t){this.getBox(e).coordinates=t}getEntriesEndingOnDay(e){return this.boxes.filter((t=>+t.coordinates.e===e))}sortByY(e){return e.sort(((e,t)=>{const o=+e.coordinates.y-+t.coordinates.y;return 0===o?+e.coordinates.e-+t.coordinates.e:o}))}updateStore(e,t){const o=this.getBox(t),n=o.coordinates,s=15*+n.y,r=15*+n.e,a=new Date(o.start),i=Math.floor(s/60),c=s%60;a.setHours(i),a.setMinutes(c);const d=new Date(o.start);let l=Math.floor(r/60),u=r%60;24===l&&(l=23,u=59),d.setHours(l),d.setMinutes(u),e.updateEntry(t,{start:a,end:d})}}function l(e,t){let o;return 60===t&&(t=0,e+=1),0==+e?(e=12,o="am"):e<12?o="am":12===e?o="pm":24===e?(o="am",e-=12):(e-=12,o="pm"),0==+t?`${e}${o}`:`${e}:${t}${o}`}function u(e,t){const[o,n]=e,[s,r]=t;let a=l(o,s);const i=l(n,r);return a.slice(-2)===i.slice(-2)&&(a=a.slice(0,-2)),`${a} – ${i}`}const m=function(e,t){const o=Math.floor(+e/4),n=15*+e%60,s=Math.floor((e+t)/4),r=15*(e+t)%60;let a=l(o,n);const i=l(s,r);return a.slice(-2)===i.slice(-2)&&(a=a.slice(0,-2)),`${a} – ${i}`};function g(e){return e instanceof Date&&!Number.isNaN(e)?e:new Date(e)}function p(e){return`${(e=g(e)).getFullYear()}-${e.getMonth()}-${e.getDate()}`}function h(e){return[+e.getFullYear(),+e.getMonth()+1,+e.getDate()]}function y(e,t){return[e,t]=[g(e),g(t)],e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function b(e){const t={year:31536e3,day:86400,hour:3600},o=[];if(0===e)return"now";for(const n in t)if(e>=t[n]){let s=Math.floor(e/t[n]);o.push(s+=s>1?" "+n+"s":" "+n),e%=t[n]}return o.length>1?o.join(", ").replace(/,([^,]*)$/," &$1"):o[0]}function f(t,o,n){const{monthsShort:s}=e.labels;[t,o]=[g(t),g(o)];const[r,a,i]=[t.getDate(),s[t.getMonth()],t.getFullYear()],[c,d,l]=[o.getDate(),s[o.getMonth()],o.getFullYear()];let u=i,m=l;return n&&(u=i.toString().slice(2,4),m=l.toString().slice(2,4)),i===l?a===d?r===c?`${a} ${r} ${i}`:`${a} ${r} – ${c}, ${i}`:`${a} ${r} – ${d} ${c}, ${i}`:`${a} ${r}, ${u} – ${d} ${c}, ${m}`}function v(e,t){[e,t]=[new Date(e),new Date(t)];let o=e.getMinutes(),n=t.getMinutes();n=n%15==0?n:n+(15-n%15),o=o%15==0?o:o+(15-o%15);let s=l(e.getHours(),o);const r=l(t.getHours(),n);return s.slice(-2)===r.slice(-2)&&(s=s.slice(0,-2)),`${s} – ${r}`}function w(e,t){return[e,t]=[new Date(e),new Date(t)],e.getTime()<t.getTime()}function S(e){return e instanceof Date&&!Number.isNaN(e)}function k(e,t,o){return e.getAttribute(t).split("-").map(((e,t)=>"month"===o&&1===t?Number.parseInt(e)-1:Number.parseInt(e)))}function L(e){return new Date(e.map((e=>Number.parseInt(e))))}function _(e,t,o){return e=g(e),new Date(e.getFullYear(),e.getMonth(),e.getDate(),Number.parseInt(t),Number.parseInt(o),1,1)}function x(e,t,o){return[_(e=g(e),t[0],o[0]),_(e,t[1],o[1])]}function C(e,t){[e,t]=[g(e),g(t)];const o=e=>{const t=e.getMinutes();return 0===t?"00":t};return{dateObj:[e,t],minutes:[o(e),o(t)],formatted:[p(e),p(t)]}}function D(e,t){return Math.floor(t.getTime()/1e3)-Math.floor(e.getTime()/1e3)}function A(t,o){const{labels:n}=e,[s,r]=[t.getFullYear(),o.getFullYear()],[a,i]=[t.getMonth(),o.getMonth()],[c,d]=[t.getDate(),o.getDate()],[l,m]=[t.getHours(),o.getHours()],[g,p]=[t.getMinutes(),o.getMinutes()];let h=!1;const y=new Date;if(w(t,y)&&(h=!0),s===r){if(a===i){if(c===d){const e=function(e){const t={hour:3600,minute:60},o=[];if(0===e)return"now";for(const n in t)if(e>=t[n]){let s=Math.floor(e/t[n]);o.push(s+=s>1?" "+n+"s":" "+n),e%=t[n]}return o.length>1?o.join(", ").replace(/,([^,]*)$/," &$1"):o[0]}(D(h?y:t,o));return{date:`${n.monthsLong[a]} ${c}, ${s} (${u([l,m],[g,p])})`,time:e}}{const e=b(D(h?y:t,o));return{date:`${n.monthsLong[a]} ${c} – ${d}, ${s}`,time:e}}}{const e=b(D(h?y:t,o));return{date:`${n.monthsShort[a]} ${c} – ${n.monthsShort[i]} ${d}, ${r}`,time:e}}}{const e=b(D(h?y:t,o));return{date:`${n.monthsShort[a]} ${c}, ${s} – ${n.monthsShort[i]} ${d}, ${r}`,time:e}}}const E={boxClasses:{week:{base:"box",ontop:"box-ontop",active:"box-mv-dragactive",temporary:"temporary-box",prepend:"box-"},day:{base:"dv-box",ontop:"dv-box-ontop",active:"dv-box-mv-dragactive",temporary:"dv-temporary-box",prepend:"dv-box-"}},boxAttributes:{week:{updatecoord:["data-box-id","data-start-time","data-time-intervals"],dataIdx:"box-idx",dataId:"data-box-id",dataCol:"data-box-col",prepend:"data-",prepentwo:"data-wv-"},day:{updatecoord:["data-dv-box-id","data-dv-start-time","data-dv-time-intervals"],dataIdx:"data-dv-box-index",dataId:"data-dv-box-id",prepend:"data-dv-",prepentwo:"data-dv-"}},boxGrid:{leftCoord:["0.00","5.00","10.00","25.00","55.00","70.00","5.00","10.00","25.00","55.00","80.00","15.00","5.00","25.00","65.00"],widthCoord:["100.00","95.00","90.00","75.00","45.00","30.00","45.00","55.00","75.00","45.00","20.00","45.00","30.00","50.00","25.00"]},styles:{newBox:{left:"0%",height:"12.5px",width:"97%"}}};function M(e,t,o){const n=document.querySelector(".sidebar"),s=document.querySelector(".resize-overlay");switch(e){case"dragstart":n.classList.contains("hide-sidebar")||0===t.offsetLeft&&n.classList.add("sidebar--dragged-over"),o.addActiveOverlay("hide-resize-overlay"),s.classList.remove("hide-resize-overlay");break;case"dragend":o.removeActiveOverlay("hide-resize-overlay"),n.classList.remove("sidebar--dragged-over"),s.classList.add("hide-resize-overlay"),document.body.style.cursor="default"}}function $(e,t,o){const[n,s,r]=E.boxAttributes[t].updatecoord.map((t=>e.getAttribute(t))),a="week"===t?e.getAttribute("data-box-col"):1;o.updateCoordinates(n,{x:Number.parseInt(a),y:Number.parseInt(s),h:Number.parseInt(r),e:Number.parseInt(s)+Number.parseInt(r)})}function q(e,t){let o=+e.style.top.split("px")[0];o=o>=0?o/12.5:0;const n=+e.style.height.split("px")[0]/12.5,s=o+n,r=E.boxAttributes[t].prepend;e.setAttribute(`${r}start-time`,o),e.setAttribute(`${r}time-intervals`,n),e.setAttribute(`${r}end-time`,s)}function N(e,t,o,n){const s=E.boxClasses[o].base,r=E.boxAttributes[o].prepend,a=E.boxAttributes[o].prependtwo,i=t.coordinates,c=document.createElement("div");c.classList.add(s),c.style.backgroundColor=n,c.style.top=12.5*+i.y+"px",c.style.height=12.5*+i.h+"px",c.style.left="calc((100% - 0px) * 0 + 0px)",c.style.width="calc((100% - 4px) * 1)";const d=document.createElement("div");d.classList.add(`${s}__header`);const l=document.createElement("div");l.classList.add(`${s}-title`),l.textContent=t.title,d.append(l);const u=document.createElement("div");u.classList.add(`${s}__content`);const g=document.createElement("span");g.classList.add(`${s}-time`),u.append(g);const p=document.createElement("div");p.classList.add(`${s}-resize-s`),"true"===e.getAttribute(`${a}top`)?(c.setAttribute(`${a}start`,i.x),c.setAttribute(`${a}end`,i.x2)):(c.setAttribute(`${r}start-time`,i.y),c.setAttribute(`${r}time-intervals`,i.h),c.setAttribute(`${r}end-time`,+i.y+ +i.h),"week"===o?(c.setAttribute("data-box-col",i.x),c.setAttribute("box-idx",1)):c.setAttribute("data-dv-box-index",1),g.textContent=m(i.y,+i.h)),c.setAttribute(`${r}box-id`,t.id),c.setAttribute(`${r}box-category`,t.category),c.append(d,u,p),e.append(c)}function T(e,t,o,n){const s=e.cloneNode(!0);s.classList.add(`${E.boxClasses[n].temporary}`),o?t.insertBefore(s,e.nextElementSibling):t.append(s)}function I(e,t){const o=E.styles.newBox;return`top:${e}px; left:${o.left}; height:${o.height}; width:${o.width}; background-color:${t};`}function Y(e,t){t.setAttribute("class",E.boxClasses[e].base),t.style.left="calc((100% - 0px) * 0 + 0px)",t.style.width="calc((100% - 4px) * 1)"}function F(e){const t=E.boxClasses[e].base,o=document.createElement("div"),n=document.createElement("div");return o.classList.add(`${t}__header`),n.classList.add(`${t}-title`),n.textContent="(no title)",o.append(n),o}function O(e){const t=Math.floor(e/12.5/4),o=15*Math.floor(e/12.5%4);return[t,o,t,+o+15]}function R(e){return{height:e.style.height,left:e.style.left,width:e.style.width,class:e.getAttribute("class")}}const B=function(e,t,o){const{boxClasses:n,boxAttributes:s,boxGrid:r}=E,{ontop:a}=n[t],{dataId:i}=s[t],{leftCoord:c,widthCoord:d}=r,l="week"===t?o.getBoxesByColumn(e):o.getBoxes();if(0===l.length)return;(function(e){e.sort(((e,t)=>e.coordinates.y-t.coordinates.y));let t=[],o=[];function n(e,t){let o=e.coordinates.y+e.coordinates.h,n=t.coordinates.y+t.coordinates.h;return e.coordinates.y<=t.coordinates.y&&o>t.coordinates.y||t.coordinates.y<=e.coordinates.y&&n>e.coordinates.y}for(let s of e)0===o.length||o.some((e=>n(e,s)))?o.push(s):(t.push(o),o=[s]);return o.length>0&&t.push(o),t})(l).forEach((e=>{for(let r=0;r<e.length;r++){const l=e[r],{id:u}=l,m=document.querySelector(`[${i}="${u}"]`),g=r%d.length;m.style.zIndex=r+1,r>0&&m.classList.add(a),o=g,n=c,s=d,(t=m).style.left=`${Number.parseFloat(n[o])}%`,t.style.width=`${Number.parseFloat(s[o])}%`}var t,o,n,s}))},H=()=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("height","20"),e.setAttribute("width","20"),e.setAttribute("fill","var(--white3)");const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M10 16q-.625 0-1.062-.438Q8.5 15.125 8.5 14.5t.438-1.062Q9.375 13 10 13t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 16 10 16Zm0-4.5q-.625 0-1.062-.438Q8.5 10.625 8.5 10t.438-1.062Q9.375 8.5 10 8.5t1.062.438q.438.437.438 1.062t-.438 1.062q-.437.438-1.062.438ZM10 7q-.625 0-1.062-.438Q8.5 6.125 8.5 5.5t.438-1.062Q9.375 4 10 4t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 7 10 7Z"),e.append(t),e},P=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","24"),t.setAttribute("width","24"),t.setAttribute("viewBox","0 0 24 24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white3)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M15 4V3H9v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5zm2 15H7V6h10v13z");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M9 8h2v9H9zm4 0h2v9h-2z"),t.append(o,n),t},j=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","20"),t.setAttribute("width","20"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white3)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6.062 15 5 13.938 8.938 10 5 6.062 6.062 5 10 8.938 13.938 5 15 6.062 11.062 10 15 13.938 13.938 15 10 11.062Z"),t.append(o),t},W=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","18px"),t.setAttribute("width","18px"),t.setAttribute("viewBox","0 0 24 24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white2)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M0 0h24v24H0z"),o.setAttribute("fill","none");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"),t.append(o,n),t},z=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","24"),t.setAttribute("width","24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white4)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6 14q-.825 0-1.412-.588Q4 12.825 4 12t.588-1.413Q5.175 10 6 10t1.412.587Q8 11.175 8 12q0 .825-.588 1.412Q6.825 14 6 14Zm6 0q-.825 0-1.412-.588Q10 12.825 10 12t.588-1.413Q11.175 10 12 10t1.413.587Q14 11.175 14 12q0 .825-.587 1.412Q12.825 14 12 14Zm6 0q-.825 0-1.413-.588Q16 12.825 16 12t.587-1.413Q17.175 10 18 10q.825 0 1.413.587Q20 11.175 20 12q0 .825-.587 1.412Q18.825 14 18 14Z"),t.append(o),t},U=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","18px"),t.setAttribute("width","18px"),t.setAttribute("viewBox","0 0 24 24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white3)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M0 0h24v24H0z"),o.setAttribute("fill","none");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"),t.append(o,n),t};const J=new class{constructor(){this.headerOffset=document.querySelector(".header"),this.form=document.querySelector(".entries__form"),this.formBody=document.querySelector(".entries__form--body"),this.formTitleDescription=document.querySelectorAll(".form-body-single"),this.formStartEndCtg=document.querySelectorAll(".form-body-double"),this.formsubmitbtn=document.querySelector(".form--footer__button-save"),this.formCategoryWrapper=document.querySelector(".form--body__category-modal--wrapper"),this.formCategorySelect=document.querySelector(".form--body__category-modal--wrapper-selection"),this.formCategoryWrapperIcon=document.querySelector(".form--body__category-modal--wrapper__color"),this.formCategoryTitle=document.querySelector(".form--body__category-modal--wrapper__title"),this.formCatgoryIcon=document.querySelector(".form--body__category-icon")}setFormStyle(e,t,o,n){o||(o=!1),n||(n=null);const[s,r]=a(this.form.offsetWidth,this.form.offsetHeight,[e,t],[window.innerWidth,window.innerHeight],o,n);this.form.style.left=`${s}px`,this.form.style.top=`${r}px`,this.form.style.margin="0"}setFormSubmitType(e,t){this.formsubmitbtn.setAttribute("data-form-action",e),this.formsubmitbtn.setAttribute("data-form-entry-id",null===t?t="":t)}configFormTitleDescriptionInput(e,t){for(const[o,n]of this.formTitleDescription.entries())n.firstElementChild.value=[e,t][o]}setFormDateInput(t,o,n,s){const{labels:r}=e,[a,i]=[t.firstElementChild,t.lastElementChild],c=`${o.getHours()}:${n}`;i.setAttribute("data-form-time",c),i.textContent=`${0==+o.getHours()||12==+o.getHours()?12:o.getHours()%12}:${n}${o.getHours()<12?"am":"pm"}`,a.setAttribute("data-form-date",s),a.textContent=`${r.monthsShort[o.getMonth()]} ${o.getDate()}, ${o.getFullYear()}`}setFormDatepickerDate(e,t,o){o=new Date(o),e.setDateSelected(o.getDate()),t.setDate(e.getYear(),e.getMonth(),e.getDay()),t.setDateSelected(o.getDate())}configFormDateInputs(e){for(let t=0;t<2;t++)this.setFormDateInput(this.formStartEndCtg[t].lastElementChild,e.dateObj[t],e.minutes[t],e.formatted[t])}configFormCategoryInput(e){const[t,o]=e;this.formCategoryWrapper.setAttribute("data-form-category",t),this.formCategorySelect.style.backgroundColor=o,this.formCategoryWrapperIcon.style.backgroundColor=o,this.formCatgoryIcon.firstChild.setAttribute("fill",o),this.formCategoryTitle.textContent=t}getConfig(e){this.setFormSubmitType(e.submission.type,e.submission.id),this.configFormCategoryInput([e.category.name,e.category.color]),this.configFormDateInputs(e.dates.object),"edit"===e.submission.type&&this.configFormTitleDescriptionInput(e.submission.title,e.submission.description)}},Q=J;class X{constructor(){this.submission={},this.category={},this.dates={}}setSubmission(e,t,o,n){this.submission={type:e,id:t||null,title:o||null,description:n||null}}setCategory(e,t){this.category={name:e,color:t}}setDates(e){this.dates={object:e}}getSetup(){return{submission:this.submission,category:this.category,dates:this.dates}}}const K=document.querySelector(".entry__options--overlay"),V=document.querySelector(".entry__options"),G=document.querySelector(".entry__options--header"),Z=document.querySelector(".entry__options-date"),ee=document.querySelector(".entry__options-time"),te=document.querySelector(".eob-title"),oe=document.querySelector(".eob-description"),ne=document.querySelector(".eob-category--icon"),se=document.querySelector(".eob-category");function re(e,t,n,s,r){function a(){t.getRenderFormCallback()(),r(),d()}function i(){const o=document.createElement("div");o.classList.add("delete-popup");const r=document.createElement("div");r.classList.add("delete-popup__btns");const a=document.createElement("button");a.classList.add("delete-popup__cancel"),a.textContent="Cancel";const i=document.createElement("button");i.classList.add("delete-popup__confirm"),i.textContent="Delete";const c=document.createElement("p");c.classList.add("delete-popup__text"),c.textContent="Are you sure you want to delete this entry?",r.append(a,i),o.append(c,r),V.append(o);const l=()=>{o.remove()};a.onclick=l,i.onclick=()=>{var o;o=n,t.deleteEntry(o.id),d(),Ve(e.getComponent(),e,t,s),l();const r=t.getFormResetHandle(e.getComponent());null!==r&&r()}}function c(){const o=t.getFormResetHandle(e.getComponent());d(),o()}function d(){for(const e of[Z,ee,te,oe,se])e.innerText="";V.classList.add("entry__options--hidden"),K.classList.add("entry__options--hidden"),t.removeActiveOverlay("entry__options--hidden"),oe.parentElement.removeAttribute("style"),V.onclick=null,K.onclick=null,G.focus(),document.removeEventListener("keydown",l)}function l(e){const t=document?.querySelector(".delete-popup");if("Escape"===e.key){if(t)return void t.remove();c()}"e"===e.key.toLowerCase()&&a(),"Delete"===e.key&&i()}function u(e){const t=o(e,".eoi__edit"),n=o(e,".eoi__delete"),s=o(e,".eoi__close");t?a():n?i():s&&c()}!function(){V.classList.remove("entry__options--hidden"),K.classList.remove("entry__options--hidden"),t.addActiveOverlay("entry__options--hidden");const[e,o]=[new Date(n.start),new Date(n.end)];let s=!1;y(e,new Date)&&(s=!0);const r=A(e,o);if(Z.textContent=r.date,null!==r.time)if(void 0===r.time){const e=(new Date).getTime()-o.getTime(),t=Math.floor(e/864e5);let n;if(0===t){const t=Math.floor(e/36e5),o=Math.floor((e-1e3*t*60*60)/6e4);0===t?n=1===o?`ended ${o} minute ago`:`ended ${o} minutes ago`:1===t?n=`ended ${t} hour ago`:t>1&&(n=`ended ${t} hours ago`)}else n=1===t?"ended yesterday":`ended ${t} days ago`;ee.textContent=n}else ee.textContent=s?"ending in "+r.time:r.time;te.textContent=n.title,0===n.description?oe.parentElement.style.display="none":oe.textContent=n.description,ne.setAttribute("fill",t.getCtgColor(n.category)),se.textContent=n.category,V.onclick=u,K.onclick=c,document.addEventListener("keydown",l)}()}const ae=document.querySelector(".dayview--header-day__title"),ie=document.querySelector(".dayview--header-day__number"),ce=document.querySelector(".dayview--header-day__info"),de=document.querySelector(".dayview--ontop-container"),le=document.querySelector(".calendar__dayview"),ue=document.querySelector(".dayview__grid"),me=document.querySelector(".dayview--main-grid");function ge(t,n,s){const r=t.getDate();let i=null,c=null,u=null;function g(e){let t=0,o=100;for(let n=0;n<e.length;n++){const[s,r]=[e[n].coordinates.y,e[n].coordinates.e];r>t&&(t=r),s<o&&(o=s)}const[n,s]=[Math.floor(o/4),Math.floor(t/4)],[r,a]=[o%4*15,t%4*15],[i,c]=[new Date(e[0].start),new Date(e[0].start)];return i.setHours(n),i.setMinutes(r),c.setHours(s),c.setMinutes(a),v(i,c)}function p(){for(const e of[ae,ie,ce])e.innerText="";let o=(new Date).getTimezoneOffset()/60;o<0&&(o=`+${Math.abs(o)}`),document.querySelector(".dv-gmt").textContent=`UTC ${t.getGmt()}`;const n=t.getDay();ie.textContent=n,t.isToday()?(ie.classList.add("dayview--header-day__number--today"),ae.style.color="var(--primary1)"):(ie.classList.remove("dayview--header-day__number--today"),ae.removeAttribute("style")),ae.textContent=e.labels.weekdaysShort[t.getWeekday()].toUpperCase(),ce.textContent=function(){const e=c.getAllBoxes();if(0===e.length)return"no entries";let t,[o,n]=[0,0];const s=r.getDate();for(let r=0;r<e.length;r++){const[a,i]=[new Date(e[r].start),new Date(e[r].end)];a.getDate()===s&&n++,i.getDate()===s&&(o++,t=e[r])}if(1===n&&1===o)return`1 entry ( ${v(new Date(e[0].start),new Date(e[0].end))} )`;if(n>1&&n===o)return`${n} entries starting & ending today ( ${g(c.boxes)} )`;let a="";return a+=n>0?1===n?`${n} entry starting today`:`${n} entries started`:"no entries started",a+=o>0?1===o?` – ${o} ending ( ${v(new Date(t.start),new Date(t.end))} )`:` – ${o} ending ( ${g(c.boxes)} )`:" – no entries ending today",a}()}function h(){me.innerText="",de.innerText="",ce.innerText="",le.onmousedown=null,i=null,c=null,u=null}function y(e,o){const r=e.target,i=r.getAttribute("data-sdvt-id"),c=n.getEntry(i),d=c.start,l=n.getCtgColor(c.category),u=r.getBoundingClientRect(),[m,g]=a(400,165,[Number.parseInt(u.left),Number.parseInt(u.top)+24],[window.innerWidth,window.innerHeight],!1);n.setFormResetHandle("day",o||(()=>{console.log("reset")}));const p=new X;p.setSubmission("edit",i,c.title,c.description),p.setCategory(c.category,l),p.setDates(C(d,c.end)),Q.setFormDatepickerDate(t,s,d);re(t,n,c,s,(()=>Q.getConfig(p.getSetup())));const h=document.querySelector(".entry__options");h.style.top=+g+"px",h.style.left=+m+"px"}function b(e){if(document.createElement("div").classList.add("dv--ontop__grid"),e.length>6){const t=document.createElement("div");return t.classList.add("dv--ontop__more"),t.textContent=`${e.length} more...`,void de.append(t)}!function(e){const t=document.createElement("div");t.classList.add("dayview--ontop__grid");for(const o of e){const e=document.createElement("div");e.classList.add("dayview--ontop__grid-item"),e.textContent=o.title,e.style.backgroundColor=n.getCtgColor(o.category),e.setAttribute("data-sdvt-id",o.id),t.append(e)}de.append(t)}(e)}function f(){document.querySelector(".dayview-temp-box")?.remove()}function w(e){M("dragstart",ue,n),document.body.style.cursor="move";const[o,a]=n.getFirstActiveCategoryKeyPair(),i=document.createElement("div");i.setAttribute("class","dv-box dv-box-dragging dayview-temp-box");const c=F("day"),d=document.createElement("div"),u=document.createElement("span"),m=document.createElement("span");d.classList.add("dv-box__content"),u.classList.add("dv-box-time"),m.classList.add("dv-box-time");const g=Number.parseInt(ue.offsetTop),p=Number.parseInt(ue.scrollTop),h=e.pageY-g,y=12.5*Math.round((h+Math.abs(p))/12.5);i.setAttribute("style",I(y,a));const b={y:+y/12.5,x:1,h:1,e:2};let[v,w,S,k]=O(y),L=0;function _(e){L+=e.movementY;let t=12.5*Math.round((e.pageY+p-y-g)/12.5);t<=12.5&&(t=12.5),t+y>1188&&(t=1187.5-y),i.style.height=`${t}px`,b.h=+t/12.5,b.e=+b.y+b.h,S=function(e,t){return Math.floor((e+t)/12.5/4)}(t,y),k=function(e,t){return 15*Math.floor((e+t)/12.5%4)}(t,y),u.style.wordBreak="break-word",u.textContent=`${l(v,w)} – `,m.textContent=`${l(S,k)}`}d.append(u,m),i.append(c,d),e.target.append(i),document.addEventListener("mousemove",_),document.addEventListener("mouseup",(function e(){L<=20&&(+b.y>=92?(b.y=92,b.e=95,b.h=3,i.style.height="37.5px",i.style.top="1150px",[v,w]=[23,0],[S,k]=[23,45],u.textContent=`${l(v,w)} – `,m.textContent=`${l(S,k)}`):(b.y=4*v,b.e=+b.y+4,b.h=4,i.style.height="50px",i.style.top=12.5*+b.y+"px",w=0,[S,k]=[v+1,0],u.textContent=`${l(v,w)} – `,m.textContent=`${l(S,k)}`));const c=x(r,[v,S],[w,k]);!function(e,o,r,a){n.setFormResetHandle("day",f);const i=n.getRenderFormCallback(),c=new X,[d,l,u,m]=a;c.setSubmission(d,l,u,m),"create"===d&&(e.style.opacity=.9);const[g,p]=o;c.setCategory(g,p);const[h,y]=r;c.setDates(C(h,y)),i(),Q.setFormDatepickerDate(t,s,h),Q.getConfig(c.getSetup())}(i,[o,a],c,["create",null,null,null]),M("dragend",ue,n),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",_)}))}function S(){!function(){me.innerText="",de.innerText="",b(c.getBoxesTop());for(const e of c.getBoxes()){const t=e.coordinates.y;(null===u||t<u)&&(u=t),N(me,e,"day",n.getCtgColor(e.category))}}(),B(null,"day",c)}function k(e){const r=o(e,".dv-box-resize-s"),i=o(e,".dv-box"),d=o(e,".dayview--main-grid"),l=o(e,".dayview--ontop__grid-item"),u=o(e,".dv--ontop__more");r?function(e,t){M("dragstart",ue,n),document.body.style.cursor="move";const o=t.parentElement;let s=!1;const r=R(t);t.classList.contains("dv-box-ontop")&&(s=!0,Y("day",t)),t.classList.add("dv-box-resizing");const a=t.offsetTop,i=Number.parseInt(ue.offsetTop);T(t,o,s,"day");const d=Number.parseInt(ue.scrollTop),l=e=>{const o=12.5*Math.round((e.pageY+d-a-i)/12.5);o<=12.5?t.style.height="12.5px":o+a>1188||(t.style.height=`${o}px`)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",(function e(){if(document.querySelector(".dv-temporary-box").remove(),t.classList.remove("dv-box-resizing"),s&&t.classList.add("dv-box-ontop"),r.height===t.offsetHeight)!function(e,t){e.setAttribute("class",t.class),e.style.left=t.left,e.style.width=t.width}(t,r);else{q(t,"day");const e=+t.getAttribute("data-dv-start-time"),o=+t.getAttribute("data-dv-time-intervals"),s=m(e,o);t.setAttribute("data-dv-time",s),t.firstChild.nextSibling.firstElementChild.textContent=s,$(t,"day",c),c.updateStore(n,t.getAttribute("data-dv-box-id")),c.getBoxes().length>1?B(null,"day",c):t.setAttribute("data-dv-box-index","box-one")}p(),M("dragend",ue,n),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",e)}))}(0,e.target.parentElement):i?function(e,o){M("dragstart",ue,n);const r=o.parentElement;let i=!1;const d=+o.style.top.split("px")[0],l=+o.style.height.split("px")[0],u=e.pageY-Number.parseInt(ue.offsetTop),g=+ue.getBoundingClientRect().top.toFixed(2),[h,y]=[e.pageX,e.pageY];let[b,f]=[0,0],v=!1;const w=e=>{b=Math.abs(e.clientX-h),f=Math.abs(e.clientY-y),v||(b>3||f>3)&&(v=!0,document.body.style.cursor="move",o.classList.contains("dv-box-ontop")&&(i=!0,Y("day",o)),o.classList.add("dv-box-dragging"),T(o,r,i,"day"),b=0,f=0);const t=e.pageY-g,n=t-u;let s=12.5*Math.round((n+d)/12.5);s<0||t<0?s=0:s+l>1188||(o.style.top=`${s}px`)},S=()=>{const e=document?.querySelector(".dv-temporary-box");if(null===e){const e=()=>{M("dragend",ue,n),o.classList.remove("dv-box-clicked")};o.classList.add("dv-box-clicked");const r=o.getAttribute("data-dv-box-id"),i=n.getEntry(r),c=i.start,d=o.style.backgroundColor,l=o.getBoundingClientRect(),[u,m]=a(400,165,[Number.parseInt(l.left)+32,Number.parseInt(l.top)+32],[window.innerWidth,window.innerHeight],!1);n.setFormResetHandle("day",e);const g=new X;g.setSubmission("edit",r,i.title,i.description),g.setCategory(i.category,d),g.setDates(C(c,i.end)),Q.setFormDatepickerDate(t,s,c),re(t,n,i,s,(()=>Q.getConfig(g.getSetup())));const p=document.querySelector(".entry__options");window.innerWidth>580?(p.style.top=+m+"px",p.style.left=u+"px"):p.style.top="64px"}else{e.remove(),o.classList.remove("dv-box-dragging"),i&&o.classList.add("dv-box-ontop"),q(o,"day");const t=+o.getAttribute("data-dv-start-time"),s=+o.getAttribute("data-dv-time-intervals"),r=m(t,s);o.setAttribute("data-dv-time",r),o.children[1].children[0].textContent=r,$(o,"day",c),c.updateStore(n,o.getAttribute("data-dv-box-id")),c.getBoxes().length>1?B(null,"day",c):o.setAttribute("data-dv-box-index","box-one"),p(),M("dragend",ue,n)}document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",S)}(e,e.target):d?w(e,e.target):l?y(e):u&&function(e){n.addActiveOverlay("morepopup");const t=document.createElement("aside");t.classList.add("dv--morepopup__overlay");const s=document.createElement("aside");s.classList.add("dv--morepopup"),s.style.left=`${de.offsetLeft}px`,s.style.top=`${de.offsetTop}px`;const r=document.createElement("div");r.classList.add("dv--morepopup__header");const a=document.createElement("span");a.classList.add("dv--morepopup__title"),a.textContent="Events spanning multiple days";const i=document.createElement("span");i.classList.add("dv--morepopup__close"),i.append(j("var(--white3)")),r.append(a,i);const c=document.createElement("div");c.classList.add("dv--morepopup__body");const d=e=>{const t=document.createElement("div");t.classList.add("dv--morepopup__entry"),t.style.backgroundColor=`${n.getCtgColor(e.category)}`,t.setAttribute("data-sdvt-id",e.id);const o=document.createElement("span");o.classList.add("dv--morepopup__entry-title"),o.textContent=e.title;const s=document.createElement("span");s.classList.add("dv--morepopup__entry-category"),s.textContent=e.category;const r=document.createElement("span");return r.classList.add("dv--morepopup__entry-time"),r.textContent=A(new Date(e.start),new Date(e.end)).date,t.append(o,s,r),t};for(const t of e){const e=d(t);c.append(e)}const l=()=>{t.remove(),s.remove(),n.removeActiveOverlay("morepopup"),document.removeEventListener("keydown",u),t.onclick=null,i.onclick=null,c.onclick=null},u=e=>{"Escape"!==e.key||l()};s.append(r,c),document.body.prepend(t,s),t.onclick=l,i.onclick=l,c.onclick=function(e){o(e,".dv--morepopup__entry")&&y(e,l)},document.addEventListener("keydown",u)}(c.getBoxesTop())}i=n.getDayEntries(r),c=new d(i.day,i.allDay),S(),p(),le.onmousedown=k,n.setResetPreviousViewCallback(h),function(){if(null!==u){const e=12.5*+u;setTimeout((()=>{ue.scrollTo({top:e,behavior:"instant"})}),4)}else{const e=50*(new Date).getHours();setTimeout((()=>{ue.scrollTo({top:e-25<=0?0:e-25,behavior:"instant"})}),4)}}()}const pe=document.querySelector(".datetime-content--title"),he=document.querySelector(".listview"),ye=document.querySelector(".listview__body"),be=document.querySelectorAll(".lv-view-input");function fe(t,s,r){const{labels:a}=e;let i=a.monthsShort.map((e=>e.toUpperCase())),c=a.weekdaysShort.map((e=>e.toUpperCase()));function d(e,t,o,n,s){const r=document.createElement("div");r.classList.add("rowgroup-header");const a=document.createElement("div");a.classList.add("rowgroup--header__datenumber"),a.textContent=o,a.setAttribute("data-rgheader-date",n);const i=document.createElement("div");return i.classList.add("rowgroup--header__monthdow"),i.textContent=`${t}, ${e}`,s&&(a.classList.add("top-datenumber"),i.classList.add("top-monthdow")),r.append(a,i),r}function l(e){const t=s.getCtgColor(e.category),[o,n]=[new Date(e.start),new Date(e.end)];let r;if(D(o,n)>86400){let e=0;o.getFullYear()!==n.getFullYear()&&(console.log(o.getFullYear(),n.getFullYear()),e=+n.getFullYear()-2e3),r=`${i[n.getMonth()]} ${n.getDate()} ${e>0?e:""}`}else r=`${u([o.getHours(),n.getHours()],[o.getMinutes(),n.getMinutes()])}`;const a=document.createElement("div");a.classList.add("rowgroup--cell"),a.setAttribute("data-rgcell-id",e.id);const c=document.createElement("div");c.classList.add("rowgroup--cell__color"),c.style.backgroundColor=t;const d=document.createElement("div");d.classList.add("rowgroup--cell__time"),d.textContent=r;const l=document.createElement("div");return l.classList.add("rowgroup--cell__title"),l.textContent=e.title,a.append(c,d,l),a}function m(){const e=document?.querySelector(".rowgroup--cell-active");e&&(e.classList.remove("rowgroup--cell-active"),e.removeAttribute("style"))}function g(e){const a=o(e,".rowgroup--header__datenumber"),i=o(e,".rowgroup--cell");a?function(e){const[o,n,a]=k(e,"data-rgheader-date","month");t.setDate(o,n,a),t.setDateSelected(a),"open"===t.getSidebarState()&&(r.setDate(o,n,a),r.setDateSelected(a)),t.setComponent("day"),Ve("day",t,s,r)}(e.target):i&&function(e){const o=e.getAttribute("data-rgcell-id");e.classList.add("rowgroup--cell-active");const a=s.getEntry(o),i=a.start,c=s.getCtgColor(a.category);e.style.backgroundColor=n(c,.7);const d=e.getBoundingClientRect(),l=e.offsetHeight,u=Number.parseInt(d.top)+l,g=Number.parseInt(d.left);let p=u+12;u+165>window.innerHeight&&(p=u-165-l-12);let h=g;g+150>window.innerWidth&&(h=window.innerWidth-150),s.setFormResetHandle("list",m);const y=new X;y.setSubmission("edit",o,a.title,a.description),y.setCategory(a.category,c),y.setDates(C(i,a.end)),Q.setFormDatepickerDate(t,r,i),re(t,s,a,r,(()=>Q.getConfig(y.getSetup())));const b=document.querySelector(".entry__options");b.style.top=p+"px",b.style.left=h+"px"}(i)}function p(){ye.innerText="",he.onclick=null,i=null,c=null}const y=e=>{let o=Object.keys(e);const n=o.length;if(0===n)return void(pe.textContent="Schedule Clear");const s=L(o[0].split("-"));t.setDateFromDateObj(s),t.setDateSelected(s.getDate()),"open"===t.getSidebarState&&(r.setDateFromDateObj(s),r.setDateSelected(s.getDate())),pe.textContent=f(o[0],o[n-1],!0),function(e){let t=1;for(const[n,s]of Object.entries(e)){const e=L(n.split("-")),r=d(c[e.getDay()],i[e.getMonth()],e.getDate(),n,1===t);t=null;const a=document.createElement("div");a.classList.add("rowgroup-content");for(const e of(o=s).length<=1?o:o.sort(((e,t)=>"end"in e&&"end"in t?new Date(e.end)-new Date(t.end)||new Date(e.start)-new Date(t.start):e-t)))a.append(l(e));const u=document.createElement("div");u.classList.add("listview__rowgroup"),u.append(r,a),ye.append(u)}var o}(e),e=null,o=null},b=(e,t)=>{const[o,n,s]=h(t);return e.reduce(((e,t)=>{const r=new Date(t.start),[a,i,c]=h(r),d=`${a}-${i}-${c}`;return a<o||a===o&&i<n||a===o&&i===n&&c<s||(e[d]||(e[d]=[]),e[d].push(t)),e}),{})},v=(e,t)=>{if(ye.innerText="",0!==e.length){if("tasks"===he.getAttribute("data-listview-type"))y(b(t,new Date));else{const e=t.length>0?new Date(t[0].start):new Date;y(b(t,e))}e=null,t=null}else pe.textContent="No Entries to Display"},w=(e,t,o)=>{const n=e.target.value;he.setAttribute("data-listview-type",n),v(t,o)};(()=>{const e=s.getActiveEntries();let t=s.sortBy(e,"start","desc");s.setResetPreviousViewCallback(p),v(e,t),he.onclick=g;for(const o of be)o.onchange=o=>{w(o,e,t)}})()}const ve=class{constructor(e){this.flag=e,this.tops=[20,20],this.heights=[18,18]}updateFlag(){this.flag=window.innerWidth<=530||window.innerHeight<=470}getFlag(){return this.flag}getTop(){const[e,t]=this.tops;return this.flag?e:t}getHeight(){const[e,t]=this.heights;return this.flag?e:t}getPrevTop(e){const[t,o]=this.tops;return e===t?o:t}},we=document.querySelector(".datepicker-sidebar"),Se=document.querySelector(".sbdatepicker__body--dates"),ke=document.querySelector(".sbdatepicker-title"),Le=document.querySelector(".sb-datepicker-change-date"),_e=document.querySelector(".sb-yearpicker-title"),xe=document.querySelectorAll(".sb-monthpicker__month");function Ce(e,t,n){n.setDate(...e.getDateArray());let s=n.getMonthArray(),r=t.getMonthEntryDates(s),a=e.getWeek(),i=!1,c=0,[d,l]=[null,null];function u(){const e=n.getMonthName(),t=n.getYear();ke.textContent=`${e} ${t}`}function m(t){Se.innerText="";const o=e.getComponent();for(let s=0;s<t.length;s++){const d=document.createElement("div"),l=document.createElement("div");d.classList.add("sbdatepicker__body--dates-cell"),l.classList.add("sbdatepicker__body--datename"),t[s].getMonth()!==n.getMonth()&&l.classList.add("sbdatepicker__body--datename-disabled"),"week"===o&&a.getDate()===t[s].getDate()&&a.getMonth()===t[s].getMonth()&&a.getFullYear()===t[s].getFullYear()&&(i=!0),i?(c++,c<=7&&d.classList.add("sbdatepicker__body--dates-week")):d.classList.remove("sbdatepicker__body--dates-week"),e.isToday(t[s])&&(l.setAttribute("class","sbdatepicker__body--datename"),l.classList.add("sbdatepicker__body--datename-today")),t[s].getDate()===e.getDateSelected()&&t[s].getMonth()===n.getMonth()&&(l.classList.contains("sbdatepicker__body--datename-today")||(l.setAttribute("class","sbdatepicker__body--datename"),l.classList.add("sbdatepicker__body--datename-selected"))),l.textContent=t[s].getDate();const u=p(t[s]);l.setAttribute("data-datepicker-date",u),r.includes(u)?l.classList.contains("sbdatepicker__body--datename-selected")||l.classList.contains("sbdatepicker__body--datename-today")||(l.setAttribute("class","sbdatepicker__body--datename"),l.classList.add("sbdatepicker__body--datename-entries")):l.classList.remove("sbdatepicker__body--datename-entries"),d.append(l),Se.append(d)}}function g(){s=n.getMonthArray(),r=t.getMonthEntryDates(s),a=e.getWeek(),c=0,i=!1}function h(o,r,a){e.setDate(o,r,a),e.setDateSelected(a),n.setDate(o,r,a),Ve(e.getComponent(),e,t,n),g(),m(s),u(),s=[]}function y(t,o){e.setDateSelected(o);const n=document.querySelectorAll(".sbdatepicker__body--datename-selected");for(const e of n)e.classList.remove("sbdatepicker__body--datename-selected");t.target.setAttribute("class","sbdatepicker__body--datename"),t.target.classList.add("sbdatepicker__body--datename-selected")}function b(t){const o=t.target,[n,s,r]=o.getAttribute("data-datepicker-date").split("-").map((e=>Number.parseInt(e))),a=e.getComponent();if("list"!==a)return"year"===a?e.getYear()!==n?void h(n,s,r):void y(t,r):"month"===a?e.getMonth()!==s?void h(n,s,r):void y(t,r):"week"===a?t.target.parentElement.classList.contains("sbdatepicker__body--dates-week")?void y(t,r):void h(n,s,r):"day"===a?e.isToday(new Date(n,s,r))?void y(t,r):void h(n,s,r):void 0;y(t,r)}function f(){d=n.getMonth(),l=n.getYear(),Le.classList.add("show-sbdpcd"),S(null,!0),w(n.getMonth(),!0)}function v(){d===n.getMonth()&&l===n.getYear()||(g(),m(s),u(),s=[]),Le.classList.remove("show-sbdpcd")}function w(e,t){const o=e;if(t||o!==n.getMonth()){n.setMonth(o);for(const[e,t]of xe.entries())e===o?t.classList.add("monthpicker__active-month"):t.classList.remove("monthpicker__active-month")}}function S(e,t){if(t)return void(_e.textContent=n.getYear());const o=Number.parseInt(n.getYear())+e;o!=+n.getYear()&&(n.setYear(o),_e.textContent=o)}function k(e){const t=o(e,".sbdatepicker__body--datename"),r=o(e,".sbdatepicker-nav--next"),a=o(e,".sbdatepicker-nav--prev"),i=o(e,".sbdatepicker-title"),c=o(e,".sb-close-change-date"),d=o(e,".sb-yearpicker-next"),l=o(e,".sb-yearpicker-prev"),p=o(e,".sb-monthpicker__month");if(t)b(e);else{if(r)return n.setNextMonth(),g(),m(s),u(),void(s=[]);if(a)return n.setPrevMonth(),g(),m(s),u(),void(s=[]);if(t)b(e);else if(i)f();else if(c)v();else if(d)S(1,!1);else if(l)S(-1,!1);else if(p){w(Number.parseInt(e.target.getAttribute("data-sbdp-month")),!1)}else;}}Le.classList.remove("show-sbdpcd"),u(),m(s),we.onclick=k,s=null,r=null}const De=document.querySelector(".resize-overlay"),Ae=document.querySelector(".sidebar"),Ee=document.querySelector(".monthview--calendar");function Me(t,s,r){const i=new ve(window.innerWidth<=530||window.innerHeight<=470),c=t.getMonth(),d=t.getDateSelected();function l(){Ae.classList.contains("hide-sidebar")||(r.resetDate(),t.setDateSelected(t.getDay()),Ce(t,s,r))}function u(e){"hide"===e?(De.classList.add("hide-resize-overlay"),s.removeActiveOverlay("hide-resize-overlay")):(De.classList.remove("hide-resize-overlay"),s.addActiveOverlay("hide-resize-overlay"))}function m(){t.setComponent("day"),Ve("day",t,s,r),l()}function p(e,t,o,n){const r=document.createElement("div");r.classList.add("monthview--box"),r.setAttribute("data-monthview-id",e),r.style.backgroundColor=s.getCtgColor(t),r.style.top=`${o}px`,r.style.height=`${i.getHeight()}px`,r.style.width="100%";const a=document.createElement("div");return a.classList.add("monthview--title"),a.textContent=n,r.append(a),r}function h(t,o,n,s){const r=[+t.getDay(),Math.floor(o/7)],a=document.createElement("div");a.classList.add("monthview--day"),a.setAttribute("data-mv-date",s),a.setAttribute("data-mv-idx",o),a.setAttribute("data-mv-coordinates",r);const l=document.createElement("button");l.classList.add("monthview--dayofmonth");const u=document.createElement("div");u.classList.add("monthview--daycontent"),t.getMonth()===c&&t.getDate()===d&&l.classList.add("monthview--dayofmonth-selected"),l.append(function(t,o){const{labels:n}=e,s=`${o.getDate()} ${n.monthsShort[o.getMonth()]}`,r=document.createElement("span");return r.classList.add("monthview--daynumber"),o.getMonth()!==c?(r.textContent=s,r.classList.add("monthview--daynumber-prevnext")):1===o.getDate()?r.textContent=s:y(o,new Date)?(r.textContent=o.getDate(),r.classList.add("monthview--daynumber-today"),t.classList.add("monthview--today")):r.textContent=o.getDate(),r}(a,t));let m=0;if(void 0!==n&&n.length>0)if((n=n.filter((e=>new Date(e.start).getMonth()===t.getMonth()))).length>=6)u.append(function(e,t){const o=document.createElement("div");o.classList.add("monthview--daygroup"),o.setAttribute("data-mvgrouped-date",e),o.setAttribute("data-mvgrouped-length",t);const n=document.createElement("div");n.classList.add("monthview--grouped");const s=document.createElement("div");return s.classList.add("monthview--daycontent__grouped-title"),s.textContent=`${t} more...`,n.append(s),o.append(n),o}(s,n.length)),u.classList.add("monthview--daycontent-grouped");else for(const[e,o]of n.entries())y(new Date(o.start),t)&&(e>0&&(m+=i.getTop()),u.append(p(o.id,o.category,m,o.title)));a.append(l,u),Ee.append(a)}function b(){Ee.innerText="",Ee.onmousedown=null,Ee.onclick=null}function f(e){return e.getAttribute("data-mv-coordinates").split(",").map((e=>Number.parseInt(e)))}function v(e,t){const[o,n,r]=k(e,"data-mv-date","month"),a=t.getAttribute("data-monthview-id"),i=s.getEntry(a),[c,d]=[new Date(i.start),new Date(i.end)],l=D(c,new Date(o,n,r)),u=d.getDate()+Math.floor(l/86400)+1;s.updateEntry(a,{start:new Date(o,n,r,c.getHours(),c.getMinutes()),end:new Date(d.getFullYear(),d.getMonth(),u,d.getHours(),d.getMinutes())})}function w(e){e.classList.remove("box-mv-dragactive"),e.style.top="0px",e.style.left="0px",e.style.width="100%",e.style.height=`${i.getHeight()}px`}function S(e,t){if(0!==e.length&&void 0!==e)for(let o=0;o<e.length;o++)void 0===e[o]||null===e[o]||e[o].classList.contains("monthview--box__form-temp")||(e[o].style.top=o*i.getTop()+"px",t?(e[o].classList.add("monthview--box__drop"),setTimeout((()=>{e[o].classList.remove("monthview--box__drop")}),200)):e[o].setAttribute("class","monthview--box"))}function L(e,o){M("dragstart",Ee,s);const c=Date.now(),d=o.parentElement,u=d.parentElement;u.classList.add("current-drop-zone");const m=document?.querySelector(".more-modal"),g=d.childElementCount,[p,h]=f(u);!function(e){const t=e.cloneNode(!0);Ee.prepend(t),t.classList.add("box-mv-dragactive"),t.focus()}(o);const y=document?.querySelector(".box-mv-dragactive");y.setAttribute("data-box-mvx",p),y.setAttribute("data-box-mvy",h);const b=u.getBoundingClientRect(),k=Number.parseFloat(b.width.toFixed(2)),L=Number.parseFloat(b.height.toFixed(2)),_=Number.parseInt(Ee.offsetLeft),x=o.getBoundingClientRect(),D=Number.parseFloat(x.width),A=i.getHeight();y.style.top=`${d.offsetTop}px`,y.style.width=`${D}px`,y.style.height=`${A}px`,y.style.left=`${d.offsetLeft}px`,y.classList.add("hide-mv-clone");const $=Ee.classList.contains("five-weeks"),[q,N]=[e.clientX,e.clientY];let[T,I]=[0,0],[Y,F]=[p,h],O=!1,R=!1;const B=e=>{T=Math.abs(e.clientX-q),I=Math.abs(e.clientY-N),(T>1||I>1)&&(R||(m&&m.remove(),document.body.style.cursor="move",R=!0)),(T>3||I>3)&&(O||(o.style.opacity="0.5",y.classList.remove("hide-mv-clone")),O=!0);let t=Math.floor((e.clientX-Ee.offsetLeft)/k);if(t<0)return void(t=0);if(t>6)return void(t=6);if(Y!==t){const e=t*k+_;y.style.left=`${Number.parseFloat(e.toFixed(2))}px`,Y=t}let n=Math.floor((e.clientY-Ee.offsetTop)/L);if(n<0)n=0;else if($&&n>4)n=4;else if(!$&&n>5)n=5;else{if(F!==n){const e=n*L+Ee.offsetTop+16;y.style.top=`${Number.parseFloat(e.toFixed(2))}px`,F=n}document.querySelector(".current-drop-zone")?.classList.remove("current-drop-zone"),document.querySelector(`[data-mv-coordinates="${t},${n}"]`).classList.add("current-drop-zone")}},H=()=>{const e=document?.querySelector(".current-drop-zone"),i=Date.now()-c,[u,b]=f(e);e.classList.remove("current-drop-zone");const k=e.children[1],L=k?.children;let _=!1;if(null==e)return M("dragend",Ee,s),o.style.opacity="1",y.remove(),_=!1,document.removeEventListener("mousemove",B),void document.removeEventListener("mouseup",H);u===p&&b===h?(_=!1,o.style.opacity="1",y.remove(),m&&m.remove(),i<200&&function(e,o){const i=e.getAttribute("data-monthview-id"),c=s.getEntry(i),d=c.start,l=s.getCtgColor(c.category),u=n(l,.5);o.classList.add("monthview--daycontent__form-temp"),o.style.backgroundColor=u;const m=o.getBoundingClientRect(),[g,p]=a(360,165,[Number.parseInt(m.left),Number.parseInt(m.top)],[window.innerWidth,window.innerHeight]);s.setFormResetHandle("month",E);const h=new X;h.setSubmission("edit",i,c.title,c.description),h.setCategory(c.category,l),h.setDates(C(d,c.end)),Q.setFormDatepickerDate(t,r,d);re(t,s,c,r,(()=>Q.getConfig(h.getSetup())));const y=document.querySelector(".entry__options");y.style.top=p+"px",y.style.left=g+"px"}(o,e)):(_=!0,void 0!==L[0]?L[0].classList.contains("monthview--daygroup")?(!function(e){const t=e.getAttribute("data-mvgrouped-length");e.setAttribute("data-mvgrouped-length",+t+1),e.firstChild.firstChild.textContent=`${e.getAttribute("data-mvgrouped-length")} more...`}(L[0]),v(e,y),y.remove(),o.remove()):(w(y),y.classList.remove("hide-mv-clone"),k.insertBefore(y,L[0]),v(e,y),o.remove(),L.length<=5?S(L,!0):function(e,t,o,n){const s=document.createElement("div");s.classList.add("monthview--daygroup"),s.setAttribute("data-mvgrouped-date",e.getAttribute("data-mv-date")),s.setAttribute("data-mvgrouped-length",o.length);const r=document.createElement("div");r.classList.add("monthview--grouped");const a=document.createElement("div");a.classList.add("monthview--daycontent__grouped-title"),a.textContent=`${o.length} more...`,t.innerText="",s.append(r),r.append(a),t.append(s),t.classList.add("monthview--daycontent-grouped"),n.remove()}(e,k,L,y)):(w(y),o.remove(),y.classList.remove("hide-mv-clone"),k.append(y),v(e,y),l())),_&&(1===g?l():S(d.children,!0)),M("dragend",Ee,s),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",H)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",H)}function _(e){"Escape"===e.key&&x()}function x(){const e=document?.querySelector(".more-modal");e&&e.remove(),u("hide"),document.removeEventListener("keydown",_)}function A(o){const{labels:n}=e,r=function(e){const[t,o,n]=k(e.target.parentElement.parentElement,"data-mv-date","month");return s.getDayEntriesArray(new Date(t,o,n))}(o);u("show");const i=o.target.parentElement.parentElement,c=document.createElement("div");c.classList.add("more-modal"),c.setAttribute("data-mv-modal",i.getAttribute("data-mv-idx"));let d=28*r.length+64;d>400&&(d=400);const l=i.getBoundingClientRect(),g=Number.parseInt(l.width),[p,h]=a(216,d,[Number.parseInt(l.left),Number.parseInt(l.top)],[window.innerWidth,window.innerHeight],!0,g),y=+window.innerHeight-+h-24;c.setAttribute("style",`top: ${h}px; left: ${p}px; width: 216px; height: ${d}px; min-height: 120px; max-height: ${y}px;`);const b=document.createElement("div");b.classList.add("more-modal-header");const f=document.createElement("div");f.classList.add("more-modal-header-title");const v=function(e){const t=e.split("-");return new Date(t[0],t[1]-1,t[2])}(o.target.parentElement.parentElement.getAttribute("data-mv-date")),w=document.createElement("span");w.classList.add("more-modal-header-title-dow"),w.textContent=n.weekdaysShort[v.getDay()].toUpperCase();const S=document.createElement("span");S.classList.add("more-modal-header-title-dayn"),S.textContent=v.getDate();const L=document.createElement("div");L.classList.add("more-modal-header-close"),L.append(j("var(--white3)")),L.setAttribute("data-tooltip","Close"),f.append(L,w,S),b.append(f),c.append(b,function(e){const t=document.createElement("div");t.classList.add("more-modal-content");for(let o=0;o<e.length;o++){const n=e[o],r=document.createElement("div");r.classList.add("more-modal-entry"),r.style.top=22*o+"px",r.style.width="calc(100% - 16px)",r.style.height="20px",r.setAttribute("data-monthview-id",n.id),r.setAttribute("data-mvhidden-category",n.category),r.style.backgroundColor=s.getCtgColor(n.category);const a=document.createElement("div");a.classList.add("more-modal-entry-title"),a.textContent=n.title,r.append(a),t.append(r)}return t}(r)),Ee.append(c),S.addEventListener("click",(()=>{!function(e){u("hide"),t.setDate(e.getFullYear(),e.getMonth(),e.getDate()),m()}(v)}),{once:!0}),De.addEventListener("click",(()=>{x()}),{once:!0}),document.addEventListener("keydown",_)}function E(){const e=document.querySelector(".monthview--daycontent__form-temp");e&&(e.removeAttribute("style"),e.classList.remove("monthview--daycontent__form-temp"))}function $(){const e=document?.querySelector(".monthview--box__form-temp");if(!e)return;const t=e.parentElement,o=t.parentElement;o.removeAttribute("style"),o.classList.remove("monthview--daycontent__form-temp"),e.remove(),S(t.children,!1)}function q(e,o){if(e.target.classList.contains("monthview--daycontent")){const e=o.parentElement,a=e.getBoundingClientRect(),[i,c]=function(e){const t=new Date,[o,n,s]=e,r=new Date(o,n,s);r.setHours(t.getHours()),r.setMinutes(0);const a=new Date(r);return a.setHours(t.getHours()),a.setMinutes(30),[r,a]}(k(e,"data-mv-date","month"));let d,l;if(0===s.getActiveCategories().length){const e=s.getDefaultCtg();d=e[0],l=e[1].color}else{const e=s.getFirstActiveCategoryKeyPair();d=e[0],l=e[1]}!function(e,t,o,n){const s=p("temp",o,0,"( New Entry )");e.scrollTop=0,s.classList.add("monthview--box__form-temp"),t.classList.add("monthview--daycontent__form-temp"),t.style.backgroundColor=n,e.children.length>0?(e.insertBefore(s,e.children[0]),S(e.children,!1)):e.append(s)}(o,e,d,n(l,.5)),s.setFormResetHandle("month",$);const u=s.getRenderFormCallback(),m=new X;m.setSubmission("create",null,null,null),m.setCategory(d,l),m.setDates(C(i,c)),u(),Q.setFormDatepickerDate(t,r,i),Q.getConfig(m.getSetup()),Q.setFormStyle(Number.parseInt(a.right),Number.parseInt(a.top),!1,null)}}function N(e){const n=o(e,".monthview--box"),s=o(e,".monthview--dayofmonth"),r=o(e,".monthview--daygroup"),a=o(e,".more-modal-entry"),c=o(e,".more-modal-header-close");if(n){if(window.innerHeight<=280)return;L(e,e.target)}else{if(s)return e.stopPropagation(),void function(e){const[o,n,s]=k(e.target.parentElement,"data-mv-date","month");t.setDate(o,n,s),t.setDateSelected(s),m()}(e);if(r)A(e);else if(a){if(window.innerHeight<=300)return;!function(e){const t=document.querySelector(".more-modal"),o=Number.parseInt(t.getAttribute("data-mv-modal")),n=document.querySelector(`[data-mv-idx="${o}"]`),s=e.target.cloneNode(!0);s.setAttribute("class","monthview--box"),s.firstChild.setAttribute("class","monthview--title"),s.style.top=`${i.getTop()}px`,s.style.left="0px",s.style.width="100%",n.lastChild.append(s);const r=n.lastChild.firstChild,a=Number.parseInt(r.getAttribute("data-mvgrouped-length"))-1;a<1?(n.lastChild.classList.remove("monthview--daycontent-grouped"),r.remove(),s.style.top="0px"):(r.setAttribute("data-mvgrouped-length",a),r.firstChild.firstChild.textContent=`${a} more...`),L(e,s),s.focus(),t.style.opacity="0.8"}(e)}else c&&x()}}function T(e){if(o(e,".monthview--daycontent")){if(window.innerHeight<=300)return;q(e,e.target)}else;}!function(){Ee.innerText="";let e=t.getMonthArray(),o=s.getMonthEntries(e),n=s.getGroupedMonthEntries(o);e.length<42?Ee.classList.add("five-weeks"):Ee.classList.remove("five-weeks");const r=e=>{const t=n[e.getDate()];return void 0!==t?t:[]};for(const[t,o]of e.entries())h(o,t,r(o),`${(a=g(a=o)).getFullYear()}-${a.getMonth()+1}-${a.getDate()}`);var a;e=null,o=null,n=null}(),Ee.onmousedown=N,Ee.onclick=T,s.setResetPreviousViewCallback(b)}const $e=document.querySelector(".sidebar"),qe=document.querySelector(".resize-overlay"),Ne=document.querySelector(".weekview"),Te=document.querySelector(".weekview--calendar"),Ie=document.querySelector(".weekview--header"),Ye=document.querySelectorAll(".weekview--header-day__number"),Fe=document.querySelector(".weekview__grid"),Oe=document.querySelectorAll(".allday--col"),Re=document.querySelectorAll(".week--col");function Be(t,n,s){const r=t.getWeekArray(),i=n.getWeekEntries(r),d=new c(i.day,i.allDay);let u=null;function g(){for(const e of Re)e.innerText="";for(const e of Oe)e.innerText="";Ne.onmousedown=null,Ie.onclick=null}function p(e,t){const o=document.createElement("div");o.classList.add("allday__cell"),o.classList.add("allday__cell--active");const n=document.createElement("div");n.classList.add("wv-ad--taskicons");const s=document.createElement("div");s.classList.add("wv-ad--taskicon"),s.style.backgroundColor="#6F0C2B",n.append(s);const r=document.createElement("div");r.classList.add("wv-ad--celltitle"),r.textContent=`${t} more`;const a=document.createElement("div");a.classList.add("wv-ad--cellexpand"),a.append(U("var(--white3)")),o.append(n,r,a),e.append(o)}function h(e,t){const o=document.createElement("div");o.classList.add("allday-modal__cell"),o.setAttribute("data-allday-modal-cell",t),o.setAttribute("data-allday-modal-cell-id",e.id),o.style.backgroundColor=n.getCtgColor(e.category);const s=document.createElement("div");s.classList.add("allday-modal__cell-content");const r=document.createElement("div");r.classList.add("allday-modal__cell-action-icons");const a=document.createElement("div");a.classList.add("allday-modal__celltitle"),a.textContent=e.title;const i=document.createElement("div");i.classList.add("allday-modal__cellend-date"),i.textContent=f(new Date(e.start),new Date(e.end));const c=document.createElement("div");return c.classList.add("allday-modal__cellcategory-title"),c.textContent="category: "+e.category,s.append(a,c,i),r.append(z("var(--taskcolor")),o.append(s,r),o}function y(i,c,d,l,u){const{labels:m}=e,g=m.weekdaysLong[l],p=c.getAttribute("data-wvtop-day"),y=document.createElement("div");y.classList.add("allday-modal");const b=c.getBoundingClientRect();let f;f=d.length<4?Number.parseInt(55*d.length)+60:Number.parseInt(220)+60;const[v,w]=a(240,f,[Number.parseInt(b.left),Number.parseInt(b.top)+24],[window.innerWidth,window.innerHeight],!0,Math.floor((window.innerWidth-36-Fe.offsetLeft)/7));v+250>window.innerWidth?y.style.left=window.innerWidth-246+"px":y.style.left=v+"px",y.style.top=w+"px";const S=document.createElement("div");S.classList.add("allday-modal__header");const k=document.createElement("div");k.classList.add("allday-modal-title"),k.textContent=`${g}, ${m.monthsLong[r[l].getMonth()]} ${p}${function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(p)}`;const L=document.createElement("div");L.classList.add("close-allday-modal"),L.append(j("var(--white4"));const _=document.createElement("div");function x(e){"Escape"===e.key&&D()}function D(){y.remove(),y.onmousedown=null,qe.classList.add("hide-resize-overlay"),qe.onclick=null,document.removeEventListener("keydown",x),n.removeActiveOverlay("allday-modal"),u.firstChild.firstChild.style.backgroundColor="#6F0C2B",u.classList.remove("allday-modal__cell--open")}_.classList.add("allday-modal__content");for(const[e,t]of d.entries())_.append(h(t,e));S.append(k,L),y.append(S,_),Ne.insertBefore(y,document.querySelector(".weekview__top")),n.addActiveOverlay("allday-modal"),qe.onclick=D,y.onmousedown=function(e){const r=o(e,".close-allday-modal"),i=o(e,".allday-modal__cell-action-icons");r?D():i&&function(e,o,r){const i=e.id,c=e.start,d=n.getCtgColor(e.category),l=r.target.getBoundingClientRect(),[u,m]=a(400,165,[Number.parseInt(l.right),r.clientY+28],[window.innerWidth,window.innerHeight]);n.setFormResetHandle("week",o);const g=new X;g.setSubmission("edit",i,e.title,e.description),g.setCategory(e.category,d),g.setDates(C(c,e.end)),Q.setFormDatepickerDate(t,s,c);re(t,n,e,s,(()=>Q.getConfig(g.getSetup())));const p=document.querySelector(".entry__options");p.style.top=m+"px",p.style.left=u+"px"}(n.getEntry(e.target.parentElement.getAttribute("data-allday-modal-cell-id")),D,e)},document.addEventListener("keydown",x)}function b(e){return document.querySelector(`[data-column-index="${e}"]`)}function v(){document.querySelector(".temp-week-box")?.remove()}function w(e,o){M("dragstart",Ne,n);const i=o.parentElement,c=i.getAttribute("data-column-index");let l=i.getAttribute("data-column-index"),u=!1;o.setAttribute("data-box-col",l);const g=+o.style.top.split("px")[0],p=+o.style.height.split("px")[0],h=e.pageY-Fe.offsetTop,y=e.pageY;let f=e.pageX,[v,w]=[0,0],S=!1;const k=e=>{v=Math.abs(e.clientX-f),w=Math.abs(e.clientY-y),S||(v>3||w>3)&&(S=!0,document.body.style.cursor="move",o.classList.contains("box-ontop")&&(u=!0,Y("week",o)),o.classList.add("box-dragging"),T(o,i,u,"week"),v=0,w=0);const t=Fe.offsetTop,n=e.pageY-t,s=n-h;let r=12.5*Math.round((s+g)/12.5);if(r<0||n<0)return void(r=0);if(r+p>1188)return;o.style.top=`${r}px`;const a=e.pageX-f>0?"right":"left";let c,d;c=+l-1>=0?Number.parseInt(b(l-1).getBoundingClientRect().right):null,d=+l+1<Re.length?Number.parseInt(b(+l+1).getBoundingClientRect().left):null,"right"===a&&null!==d&&e.pageX>=d&&(b(+l+1).append(o),f=e.pageX,l=+l+1,o.setAttribute("data-box-col",+l)),"left"===a&&null!==c&&e.pageX<=c&&(b(+l-1).append(o),f=e.pageX,l=+l-1,o.setAttribute("data-box-col",+l))};document.addEventListener("mousemove",k),document.addEventListener("mouseup",(function e(){const i=document.querySelector(".temporary-box");if(o.classList.remove("box-dragging"),u&&o.classList.add("box-ontop"),null===i){const e=()=>{M("dragend",Ne,n),o.classList.remove("wv-box-clicked")};o.classList.add("wv-box-clicked");const r=o.getAttribute("data-box-id"),i=n.getEntry(r),c=i.start,d=o.style.backgroundColor,l=o.getBoundingClientRect(),[u,m]=a(400,165,[Number.parseInt(l.left),Number.parseInt(l.top)+56],[window.innerWidth,window.innerHeight],!1);n.setFormResetHandle("week",e);const g=new X;g.setSubmission("edit",r,i.title,i.description),g.setCategory(i.category,d),g.setDates(C(c,i.end)),Q.setFormDatepickerDate(t,s,c);re(t,n,i,s,(()=>Q.getConfig(g.getSetup())));const p=document.querySelector(".entry__options");window.innerWidth>580?(p.style.top=+m+"px",p.style.left=u+"px"):p.style.top="64px"}else{i.remove(),q(o,"week");const e=m(+o.getAttribute("data-start-time"),+o.getAttribute("data-time-intervals"));o.setAttribute("data-time",e),o.children[1].children[0].textContent=e,$(o,"week",d),d.updateStore(n,o.getAttribute("data-box-id"),r),l!==+c&&($e.classList.contains("hide-sidebar")||(s.setDate(t.getYear(),t.getMonth(),t.getDay()),Ce(t,n,s)));const a=+o.getAttribute("data-box-col");d.getBoxesByColumn(a).length>1?B(a,"week",d):o.setAttribute("box-idx","box-one"),M("dragend",Ne,n)}document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",e)}))}function S(e){M("dragstart",Ne,n),document.body.style.cursor="move";const[o,a]=n.getFirstActiveCategoryKeyPair(),i=Number.parseInt(e.target.getAttribute("data-column-index")),c=document.createElement("div");c.setAttribute("class","box box-dragging temp-week-box");const d=F("week"),u=document.createElement("div"),m=document.createElement("span"),g=document.createElement("span");u.classList.add("box__content"),m.classList.add("box-time"),g.classList.add("box-time");const p=+Fe.offsetTop,h=Number.parseInt(Fe.scrollTop),y=e.pageY-Fe.offsetTop,b=12.5*Math.round((y+Math.abs(h))/12.5);c.setAttribute("style",I(b,a));const f={y:+b/12.5,x:i,h:1,e:2};let[w,S,k,L]=O(b);function _(e){const t=e.pageY-p-y;let o=12.5*Math.round(t/12.5);o<=12.5&&(o=12.5),o+b>1188&&(o=1187.5-b),c.style.height=`${o}px`,f.h=+o/12.5,f.e=+f.y+f.h,k=Math.floor((+o+ +b)/12.5/4),L=15*Math.floor((+o+ +b)/12.5%4),m.style.wordBreak="break-word",m.textContent=`${l(w,S)} – `,g.textContent=`${l(k,L)}`}u.append(m,g),c.append(d,u),e.target.append(c),document.addEventListener("mousemove",_),document.addEventListener("mouseup",(function e(){const d=x(new Date(r[i]),[w,k],[S,L]);!function(e,o,r,a,i){n.setFormResetHandle("week",v);const c=n.getRenderFormCallback(),d=new X,[l,u,m,g]=i;d.setSubmission(l,u,m,g),"create"===l&&(e.style.opacity=.9);const[p,h]=r;d.setCategory(p,h);const[y,b]=a;d.setDates(C(y,b)),c(),Q.setFormDatepickerDate(t,s,y),Q.getConfig(d.getSetup())}(c,0,[o,a],d,["create",null,null,null]),M("dragend",Ne,n),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",_)}))}function L(e){const t=o(e,".box-resize-s"),s=o(e,".box"),a=o(e,".week--col"),i=o(e,".allday--col");t?function(e,t){M("dragstart",Ne,n),document.body.style.cursor="move";const o=t.parentElement,s=o.getAttribute("data-column-index");t.setAttribute("data-box-col",s);let a=!1;const i=R(t);t.classList.contains("box-ontop")&&(a=!0,Y("week",t)),t.classList.add("box-resizing");const c=t.offsetTop;T(t,o,a,"week");const l=e=>{const o=Fe.offsetTop;let n=Math.abs(Number.parseInt(Te.getBoundingClientRect().top));n==o?n-=o:Te.getBoundingClientRect().top>0?n=o-n:n+=o;const s=12.5*Math.round((e.pageY-c-o+n)/12.5);s<=12.5?t.style.height="12.5px":s+Number.parseInt(t.style.top)>1188||(t.style.height=`${s}px`)},u=()=>{if(document.querySelector(".temporary-box").remove(),t.classList.remove("box-resizing"),a&&t.classList.add("box-ontop"),t.style.height===i.height)a&&(t.setAttribute("class",i.class),t.style.left=i.left,t.style.width=i.width);else{q(t,"week");const e=+t.getAttribute("data-start-time"),o=+t.getAttribute("data-time-intervals"),s=m(e,o);t.children[1].children[0].textContent=s,$(t,"week",d);const a=+t.getAttribute("data-box-col");d.getBoxesByColumn(a).length>1&&B(a,"week",d),d.updateStore(n,t.getAttribute("data-box-id"),r)}M("dragend",Ne,n),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",u)}(0,e.target.parentElement):s?w(e,e.target):a?S(e,e.target):i&&e.target.childElementCount>0&&function(e,t){const o=t.parentElement;t.classList.add("allday-modal__cell--open"),t.firstChild.firstChild.style.backgroundColor="#01635b";const n=Number.parseInt(o.getAttribute("data-allday-column")),s=d.getBoxesByColumnTop(n);s.length>0&&(y(0,o,s,n,t),qe.classList.remove("hide-resize-overlay"))}(0,e.target)}function _(){!function(){for(const e of Re)e.innerText="";for(const e of Oe)e.innerText="";for(const e of d.getBoxes()){const t=e.coordinates.y;(null===u||t<u)&&(u=t),N(Re[+e.coordinates.x],e,"week",n.getCtgColor(e.category))}const e=d.getBoxesTopLengths();for(const t in e)p(Oe[+t],e[t])}();const e=d.getColumnsWithMultipleBoxes();for(const t of e)B(t,"week",d)}function D(e){o(e,".weekview--header-day__number")&&function(e){const[o,r,a]=k(e.target,"data-weekview-date");t.setDate(o,r,a),t.setDateSelected(a),t.setComponent("day"),Ve("day",t,n,s)}(e)}!function(){let e,o;document.querySelector(".wv-gmt").textContent=`UTC ${t.getGmt()}`;const n=[],s=[],a=t.getToday(),[i,c,d]=[a.getFullYear(),a.getMonth(),a.getDate()];for(const a of r){const[r,l,u]=[a.getFullYear(),a.getMonth(),a.getDate()];n.push(u),s.push(`${r}-${l}-${u}`),u===t.getDateSelected()&&l===t.getMonth()&&(o=u),u===d&&l===c&&r===i&&(e=u)}for(const[t,r]of n.entries())r===o?Ye[t].classList.add("wvh--selected"):Ye[t].classList.remove("wvh--selected"),r===e?Ye[t].classList.add("wvh--today"):Ye[t].classList.remove("wvh--today"),Ye[t].textContent=r,Ye[t].setAttribute("data-weekview-date",s[t]),Oe[t].setAttribute("data-wvtop-day",r)}(),_(),Ne.onmousedown=L,Ie.onclick=D,n.setResetPreviousViewCallback(g),null!==u&&setTimeout((()=>{Fe.scrollTo({top:Math.abs(12.5*+u-25),behavior:"instant"})}),4)}const He=document.querySelector(".calendar__yearview"),Pe=document.querySelector(".sidebar");function je(t,n,s){function r(o,n,s){const{labels:r}=e,a=t.getToday(),[i,c,d]=[+a.getFullYear(),+a.getMonth(),+a.getDate()],l=new Date(o,n,0),u=l.getDate(),m=new Date(o,n,1),g=new Date(o,n+1,0).getDate(),p=m.getDay(),h=document.createElement("div");h.classList.add("yv-monthcell");const y=document.createElement("div");y.classList.add("yv-monthcell__header");const b=document.createElement("div");b.classList.add("yv-monthcell__header--rowone"),b.textContent=r.monthsLong[n],n===t.getMonth()&&o===t.getYear()&&(b.classList.add("yvmht-current"),h.classList.add("cell-current"));const f=document.createElement("div");f.classList.add("yv-monthcell__header--weekdays");for(const e of r.weekdaysNarrow){const t=document.createElement("div");t.classList.add("yv-monthcell__header--weekday"),t.textContent=e,f.append(t)}const v=document.createElement("div");return v.classList.add("yv-monthcell__body"),y.append(b,f),function(){const e=(e,o,n,r,a)=>{const l=document.createElement("div");return l.classList.add("yv-monthcell__body--day-wrapper"),null!==o&&l.classList.add(o),a&&(l.setAttribute("data-yv-date",`${n}-${r}-${e}`),l.textContent=e,e===t.getDateSelected()&&r===t.getMonth()&&n===t.getYear()&&l.classList.add("yvmb-selected"),e===d&&r===c&&n===i&&l.classList.add("yvmb-today"),s[e]&&l.classList.add("yvmb-has-entry")),l};for(let t=u-p;t<u;t++)v.append(e(t+1,"yvmb-prevnext",l.getFullYear(),l.getMonth(),!1));for(let t=0;t<g;t++)v.append(e(t+1,null,m.getFullYear(),m.getMonth(),!0))}(),h.append(y,v),h}function a(e){const o=e.target,[r,a,i]=k(o,"data-yv-date",null);t.setDate(r,a,i),t.setDateSelected(i),t.setComponent("day"),Ve("day",t,n,s),Pe.classList.contains("hide-sidebar")||(s.setDate(t.getYear(),t.getMonth(),t.getDay()),Ce(t,n,s))}function i(e){o(e,".yv-monthcell__body--day-wrapper")&&a(e)}function c(){He.innerText="",He.onmousedown=null}!function(){!function(){He.innerText="";let e=t.getYear(),o=n.getGroupedYearEntries(n.getYearEntries(e));for(let t=0;t<12;t++)o[t]?He.append(r(e,t,o[t])):He.append(r(e,t,[]));o=null,e=null}(),He.onmousedown=i,n.setResetPreviousViewCallback(c);const e=document?.querySelector(".cell-current");e&&setTimeout((()=>{He.scrollTo({top:Number.parseInt(e.offsetTop)-100,behavior:"instant"})}),4)}()}const We=document.querySelector(".yearview"),ze=document.querySelector(".monthview"),Ue=document.querySelector(".weekview"),Je=document.querySelector(".dayview"),Qe=document.querySelector(".listview");let[Xe,Ke]=[null,null];function Ve(e,o,n,s){Xe=Ke,Ke=e,function(){const e=[We,ze,Ue,Je,Qe],t=n.getResetPreviousViewCallback();null!==Xe&&null!==t&&Xe!==Ke&&t();for(const t of e)t.classList.add("hide-view")}(),document.title=o.getMonthName(),function(e){switch(e){case"day":o.setComponent(e),t(o,e),ge(o,n,s),Je.classList.remove("hide-view");break;case"week":o.setComponent(e),t(o,e),Be(o,n,s),Ue.classList.remove("hide-view");break;case"month":o.setComponent(e),t(o,e),Me(o,n,s),ze.classList.remove("hide-view");break;case"year":o.setComponent(e),t(o,e),je(o,n,s),We.classList.remove("hide-view");break;case"list":o.setComponent(e),t(o,e),fe(o,n,s),Qe.classList.remove("hide-view");break;default:o.setComponent("month"),t(o,"month"),Me(o,n,s),ze.classList.remove("hide-view")}}(e)}const Ge=document.querySelector(".datepicker"),Ze=document.querySelector(".datepicker-overlay"),et=document.querySelector(".datepicker__body--dates"),tt=document.querySelector(".datepicker-title"),ot=document.querySelector(".datepicker-change-date"),nt=document.querySelector(".prev"),st=document.querySelector(".next"),rt=document.querySelector(".yearpicker-title"),at=document.querySelectorAll(".monthpicker__month");function it(e,t,n,r){let a,i=n.getMonthArray(),c=0;const d="form"===r?n.getDateSelected():e.getDateSelected();let[l,u]=[null,null];const m=s((function(e){const t=ot.classList.contains("show-dpcd");switch(e.key){case"ArrowDown":t?L(-1,!1):v();break;case"ArrowUp":t?L(1,!1):f();break;case"ArrowRight":t?_("next"):function(){let e=document.querySelector(".datepicker__body--datename-selected");const t=e.parentElement,o=t?.nextElementSibling?.firstElementChild;if(o&&null!=o){e.classList.remove("datepicker__body--datename-selected"),o.classList.add("datepicker__body--datename-selected");const t=o.getAttribute("data-datepicker-date"),s=Number.parseInt(t.split("-")[2]);return void n.setDateSelected(s)}f(),n.setDateSelected(1),e=document.querySelector(".datepicker__body--datename-selected"),e.classList.remove("datepicker__body--datename-selected");document.querySelectorAll(".datepicker__body--datename")[0].classList.add("datepicker__body--datename-selected")}();break;case"ArrowLeft":t?_("prev"):function(){let e=document.querySelector(".datepicker__body--datename-selected");const t=e.parentElement,o=t?.previousElementSibling?.firstElementChild;if(o&&null!=o)return e.classList.remove("datepicker__body--datename-selected"),void o.classList.add("datepicker__body--datename-selected");{v();const t=n.getDaysInMonth();n.setDateSelected(+t),e=document.querySelector(".datepicker__body--datename-selected"),e.classList.remove("datepicker__body--datename-selected");document.querySelectorAll(".datepicker__body--datename").at(-1).classList.add("datepicker__body--datename-selected")}}();break;case"Enter":if(ot.classList.contains("show-dpcd"))C();else{const e=document.querySelector(".datepicker__body--datename-selected");if(null!==e&&e){b(null,k(e,"data-datepicker-date"))}else b(null,[n.getYear(),n.getMonth(),28])}break;case"Escape":ot.classList.contains("show-dpcd")?C():D()}}),100);function g(){const e=n.getYear(),t=n.getMonthName();tt.textContent=`${t} ${e}`}function h(o){et.innerText="";let s=t.getMonthEntryDates(o),r=e.getWeek();for(let t=0;t<o.length;t++){const i=document.createElement("div"),l=document.createElement("div");i.classList.add("datepicker__body--dates-cell"),l.classList.add("datepicker__body--datename"),o[t].getMonth()!==n.getMonth()&&l.classList.add("datepicker__body--datename-disabled"),y(o[t],r)&&"week"===e.getComponent()&&(a=!0),a?(c++,c<=7&&i.classList.add("datepicker__body--dates-week")):i.classList.remove("datepicker__body--dates-week"),o[t].getDate()===d&&o[t].getMonth()===n.getMonth()&&(l.classList.contains("datepicker__body--datename-today")||(l.setAttribute("class","datepicker__body--datename"),l.classList.add("datepicker__body--datename-selected"))),e.isToday(o[t])&&(l.setAttribute("class","datepicker__body--datename"),l.classList.add("datepicker__body--datename-today")),l.innerText=o[t].getDate();const u=p(o[t]);l.setAttribute("data-datepicker-date",u),s.includes(u)?l.classList.contains("datepicker__body--datename-today")||l.classList.contains("datepicker__body--datename-selected")||(l.setAttribute("class","datepicker__body--datename"),l.classList.add("datepicker__body--datename-entries")):l.classList.remove("datepicker__body--datename-entries"),i.append(l),et.append(i)}r=null,s=[]}function b(o,s){let[a,i,c]=[null,null,null];if(null===o)a=s[0],i=s[1],c=s[2];else{const e=k(o.target,"data-datepicker-date");a=e[0],i=e[1],c=e[2]}"form"===r?(!function(t,o,s){n.setDate(t,o,s),e.setDateSelected(s);const r=n.getDate(),a=document.querySelector(".active-form-date");a.setAttribute("data-form-date",`${t}-${o}-${s}`),a.textContent=`${n.getMonthName().slice(0,3)} ${s}, ${t}`;const i=document?.querySelector(".inactive-form-date"),c=i.getAttribute("data-form-date").split("-").map((e=>Number.parseInt(e))),d=new Date(c[0],c[1],c[2]),l=i.getAttribute("data-form-date-type");(w(d,r)&&"end"===l||w(r,d)&&"start"===l)&&(i.setAttribute("data-form-date",`${t}-${o}-${s}`),i.textContent=`${n.getMonthName().slice(0,3)} ${s}, ${t}`)}(a,i,c),D()):function(o,s,r){e.setDate(o,s,r),e.setDateSelected(r),Ve(e.getComponent(),e,t,n),n.setDate(o,s,r),D()}(a,i,c)}function f(){n.setNextMonth(),i=n.getMonthArray(),h(i),g()}function v(){n.setPrevMonth(),i=n.getMonthArray(),h(i),g()}function S(e,t){const o=e;if(t||o!==n.getMonth()){n.setMonth(o);for(const[e,t]of at.entries())e===o?t.classList.add("monthpicker__active-month"):t.classList.remove("monthpicker__active-month")}}function L(e,t){if(t)return void(rt.textContent=n.getYear());const o=Number.parseInt(n.getYear())+e;o!=+n.getYear()&&(n.setYear(o),rt.textContent=o)}function _(e){const t=document.querySelector(".monthpicker__active-month"),o=Number.parseInt(t.getAttribute("data-dp-month"));S("next"===e?(o+1)%12:0===o?11:o-1)}function x(){l=n.getMonth(),u=n.getYear(),ot.classList.add("show-dpcd"),L(null,!0),S(n.getMonth(),!0)}function C(){l===n.getMonth()&&u===n.getYear()||(i=n.getMonthArray(),h(i),g()),ot.classList.remove("show-dpcd")}function D(){Ge.classList.add("hide-datepicker"),Ze.classList.add("hide-datepicker-overlay"),C();const o=t.getActiveOverlay().has("hide-form-overlay");!("list"!==e.getComponent())&&o||(nt.removeAttribute("style"),st.removeAttribute("style")),"form"===r&&document.querySelector(".active-form-date")?.classList.remove("active-form-date"),et.innerText="",Ge.removeAttribute("tabindex"),c=0,l=null,u=null,i=[],Ze.onclick=null,Ge.onclick=null,document.removeEventListener("keydown",m)}function A(e){const t=o(e,".datepicker__body--datename"),n=o(e,".datepicker-nav--next"),s=o(e,".datepicker-nav--prev"),r=o(e,".datepicker-title"),a=o(e,".close-change-date"),i=o(e,".yearpicker-next"),c=o(e,".yearpicker-prev"),d=o(e,".monthpicker__month");if(t)b(e);else if(n)f();else if(s)v();else if(r)x();else if(a)C();else if(i)L(1,!1);else if(c)L(-1,!1);else if(d){S(Number.parseInt(e.target.getAttribute("data-dp-month")),!1)}else;}g(),h(i),t.setResetDatepickerCallback(D),Ze.onclick=D,Ge.onclick=A,document.addEventListener("keydown",m),i=[]}const ct={0:{shortcut:"0",action:"change app theme"},1:{shortcut:["1","D"],action:"open day view"},2:{shortcut:["2","W"],action:"open week view"},3:{shortcut:["3","M"],action:"open month view"},4:{shortcut:["4","Y"],action:"open year view"},5:{shortcut:["5","L"],action:"open list view"},6:{shortcut:"v",action:"toggle view options"},7:{shortcut:"t",action:"set date to today"},8:{shortcut:"g",action:"enter date manually"},9:{shortcut:"n",action:"next period"},10:{shortcut:"p",action:"previous period"},11:{shortcut:"s",action:"toggle sidebar"},12:{shortcut:"f",action:"open form"},13:{shortcut:"+",action:"open new category form"},14:{shortcut:"a",action:"open settings"},15:{shortcut:["/","?"],action:"open keyboard shortcuts"},16:{shortcut:"e",action:"(entry options) opens form with entry details"},17:{shortcut:"↑",action:["(datepicker) set date to next month/week","(yearpicker) set year to next year"]},18:{shortcut:"↓",action:["(datepicker) set date to prev month/week","(yearpicker) set year to prev year"]},19:{shortcut:"←",action:["(datepicker) set date to prev day","(monthpicker) set month to prev month"]},20:{shortcut:"→",action:["(datepicker) set date to next day","(monthpicker) set month to next month"]},21:{shortcut:"DELETE",action:"(entry options) delete entry"},22:{shortcut:"ENTER",action:["(datepicker) set date to selected date","(form) submit form"]},23:{shortcut:"ESCAPE",action:"close any active modal/popup/form"}};const dt=new class{constructor(){this.sessionOnlyKeys=new Set(["animationStatus","dateSelected","daySelected","monthSelected","pickerYearSelected","pickerMonthSelected","pickerDateSelected","pickerDaySelected","yearSelected","colorScheme","pickerDaySelected","SidebarState","component"]),this.cache=new Map,this.secondaryStorage=this.localStorageAvailable()?localStorage:this.cache,this.serverStorageCache=new Map,this.serverStorage=new Map,this.hasServer=!1}setHasServer(e){this.hasServer=e}getHasServer(){return this.hasServer}setUploadedData(e){this.clear();for(const t in e)this.setItem(t,e[t])}getAllData(){const e={};for(let t=0;t<this.length;t++){const o=this.key(t);e[o]=this.getItem(o)}return e}localStorageAvailable(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch{return!1}}setServerStorage(e){this.serverStorage.set(e.key,e.value),this.secondaryStorage.setItem(e.key,e.value)}getServerStorage(e){return this.serverStorage.get(e)}setItem(e,t){this.hasServer?this.sessionOnlyKeys.has(e)?this.secondaryStorage.setItem(e,t):(console.log(e,"set server storage"),this.setServerStorage({key:e,value:t})):this.secondaryStorage.setItem(e,t)}getItem(e){return this.hasServer?this.sessionOnlyKeys.has(e)?this.secondaryStorage.getItem(e)||null:this.getServerStorage(e)||this.secondaryStorage.getItem(e)||null:this.secondaryStorage.getItem(e)||null}removeItem(e){this.hasServer?(this.sessionOnlyKeys.has(e)||this.serverStorage.delete(e),this.secondaryStorage.removeItem(e)):this.secondaryStorage.removeItem(e)}clear(){this.secondaryStorage.clear()}key(e){return this.secondaryStorage instanceof Map?[...this.secondaryStorage.keys()][e]:this.secondaryStorage.key(e)}get length(){return this.secondaryStorage instanceof Map?this.secondaryStorage.size:this.secondaryStorage.length}};class lt{constructor(){this.store=this.getInitStore(),this.userUpload={},this.colors=e.colorsMutedMed,this.ctg=this.getInitCtg(),this.activeOverlay=new Set,this.handleRenders={sidebar:{callback:null},datepicker:{reset:null},form:{callback:null},reconfig:{callback:null},categories:{callback:null},calendars:{previous:{reset:null},month:{reset:null,resize:null},week:{reset:null,render:null},day:{reset:null},list:{reset:null}}},this.keyboardShortcuts=ct,this.keyboardShortcutsStatus=!0,this.animationStatus=!1,this.hasServerIntegration=!1}getInitStore(){return dt.getItem("store")?JSON.parse(dt.getItem("store")):[]}getInitCtg(){return dt.getItem("ctg")?JSON.parse(dt.getItem("ctg")):{default:{color:this.colors.blue[4],active:!0}}}setStoreForTesting(e){this.store=e,lt.setStore(this.store)}getStoreStats(){return[this.store.length,this.getAllCtgNames().length]}getAllMethodNames(){return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter((e=>"constructor"!==e&&"getStoreStats"!==e))}static getStore(){return JSON.parse(dt.getItem("store"))||[]}static getActiveStore(){return JSON.parse(dt.getItem("activeStore"))||[]}static getCtg(){return JSON.parse(dt.getItem("ctg"))||[]}static getShortcutsStatus(){return JSON.parse(dt.getItem("keyboardShortcutsStatus"))}static getAnimationStatus(){return JSON.parse(dt.getItem("animationStatus"))}static setStore(e){dt.setItem("store",JSON.stringify(e))}static setActiveStore(e){dt.setItem("activeStore",JSON.stringify(e))}static setCtg(e){dt.setItem("ctg",JSON.stringify(e))}static setShortcutsStatus(e){dt.setItem("keyboardShortcutsStatus",JSON.stringify(e))}static setAnimationStatus(e){dt.setItem("animationStatus",JSON.stringify(e))}getColors(){return this.colors}getServerStatus(){return this.hasServerIntegration}addEntry(e){this.store.push(e),lt.setStore(this.store)}createEntry(...e){this.addEntry(new i(...e)),lt.setStore(this.store)}deleteEntry(e){this.store=this.store.filter((t=>t.id!==e)),lt.setStore(this.store)}getActiveEntries(){const e=this.getActiveCategories();if(0===e.length)return[];return this.store.filter((t=>e?e.includes(t.category):[]))}getEntry(e){return this.store.find((t=>t.id===e))}getEntries(){return this.store||[]}getEntriesByCtg(e){return this.store.filter((t=>t.category===e))}removeLastEntry(){this.store.pop(),lt.setStore(this.store)}getLastEntryId(){return this.store.at(-1).id}compareEntries(e,t){for(const o in e)if("id"!==o&&"coordinates"!==o)if("end"===o||"start"===o){if(new Date(e[o]).getTime()-new Date(t[o]).getTime()!=0)return!1}else if(e[o]!==t[o])return!1;return!0}updateEntry(e,t){this.store=this.store.map((o=>o.id===e?Object.assign(o,t):o)),lt.setStore(this.store)}sortBy(e,t,o){if(0===e.length)return[];const n=["description","title","category"].includes(t),s=(e,t)=>"desc"===o?e-t:t-e;return e.sort(((e,o)=>"start"===t?s(new Date(e.start),new Date(o.start)):"end"===t?s(new Date(e.end),new Date(o.end)):n?s(e[t].localeCompare(o[t])):s(e[t],o[t])))}getFirstAndLastEntry(){const e=this.sortBy(this.getActiveEntries(),"start","desc");return void 0===e?[0,0]:[e[0].start,e.at(-1).end]}generateCoordinates(e,t){[e,t]=[g(e),g(t)];const o=4*e.getHours()+Math.floor(e.getMinutes()/15),n=4*t.getHours()+Math.floor(t.getMinutes()/15)-o,s=o+n;return y(e,t)?{allDay:!1,x:e.getDay(),y:o,h:n,e:s}:{allDay:!0,x:e.getDay(),x2:t.getDay()}}getDayEntries(e){const t=this.getActiveEntries(),o={allDay:[],day:[]};if(0===t.length)return o;const n=t.filter((t=>{const o=new Date(t.start),[n,s,r]=[o.getFullYear(),o.getMonth(),o.getDate()];return n===e.getFullYear()&&s===e.getMonth()&&r===e.getDate()}));for(const e of n)e.coordinates=this.generateCoordinates(new Date(e.start),new Date(e.end)),e.coordinates.allDay?o.allDay.push(e):o.day.push(e);return o}getDayEntriesArray(e){const t=this.getActiveEntries();return 0===t.length?[]:t.filter((t=>{const o=new Date(t.start),[n,s,r]=[o.getFullYear(),o.getMonth(),o.getDate()];return n===e.getFullYear()&&s===e.getMonth()&&r===e.getDate()}))}getMonthEntries(e){const t=this.getActiveEntries();return 0===t.length?[]:t.filter((t=>{const o=new Date(t.start);return o>=e[0]&&o<=e.at(-1)}))}getMonthEntryDates(e){const t=this.getMonthEntries(e),o={};for(const e of t){const t=new Date(e.start),[n,s,r]=[t.getFullYear(),t.getMonth(),t.getDate()],a=`${n}-${s}-${r}`;o[a]||(o[a]=[]),o[a].push(e)}return Object.keys(o)}getGroupedMonthEntries(e){return e.reduce(((e,t)=>{const o=new Date(t.start).getDate();return e[o]||(e[o]=[]),e[o].push(t),e}),{})}getWeekEntries(e){const t=this.getActiveEntries(),[o,n]=[e[0],e[6]],s={allDay:[],day:[]};if(0===t.length)return s;const r=t.filter((e=>{const t=new Date(e.start);return t>=o&&t<=n}));for(const e of r)e.coordinates=this.generateCoordinates(new Date(e.start),new Date(e.end)),e.coordinates.allDay?s.allDay.push(e):s.day.push(e);return s}getYearEntries(e){const t=this.getActiveEntries();return 0===t.length?[]:t.filter((t=>new Date(t.start).getFullYear()===e))}getGroupedYearEntries(e){const t={};for(const o of e){const e=new Date(o.start),n=e.getMonth(),s=e.getDate();t[n]||(t[n]={}),t[n][s]||(t[n][s]=[]),t[n][s].push(o)}return t}addNewCtg(e,t){this.hasCtg(e)||(this.ctg[e]={color:t,active:!0},lt.setCtg(this.ctg))}deleteCategory(e){this.hasCtg(e)&&(delete this.ctg[e],lt.setCtg(this.ctg))}getDefaultCtg(){return Object.entries(this.ctg)[0]}getFirstActiveCategory(){for(const[e,t]of Object.entries(this.ctg))if(t.active)return e;return"default"}getFirstActiveCategoryKeyPair(){for(const[e,t]of Object.entries(this.ctg))if(t.active)return[e,t.color];const e=this.getDefaultCtg();return[e[0],e[1].color]}getActiveCategories(){const e=Object.keys(this.ctg).filter((e=>this.ctg[e].active));return e.length>0?e:[]}getActiveCategoriesKeyPair(){return Object.entries(this.ctg).filter((e=>e[1].active))}getAllCtg(){return this.ctg}getAllCtgColors(){return Object.values(this.ctg).map((e=>e.color))}getAllCtgNames(){return Object.keys(this.ctg)}getCtgColor(e){return this.ctg[e].color}getCtgLength(e){return this.store.filter((t=>t.category===e)).length}hasCtg(e){let t=!1;for(const o in this.ctg)o.toLowerCase()===e.toLowerCase()&&(t=!0);return t}moveCategoryEntriesToNewCategory(e,t,o){if(this.hasCtg(e)||!0===o){for(const o of this.store)o.category===e&&(o.category=t);lt.setStore(this.store)}this.deleteCategory(e)}removeCategoryAndEntries(e){this.hasCtg(e)&&(this.store=this.store.filter((t=>t.category!==e)),lt.setStore(this.store)),this.deleteCategory(e)}setCategoryStatus(e,t){this.hasCtg(e)&&(this.ctg[e].active=t,lt.setCtg(this.ctg))}setAllCategoryStatusExcept(e,t){for(const o in this.ctg)this.ctg[o].active=o!==e?t:!t;lt.setCtg(this.ctg)}updateCtgColor(e,t){this.hasCtg(e)&&(this.ctg[e].color=t,lt.setCtg(this.ctg))}getCtgIndex(e){return Object.keys(this.ctg).indexOf(e)}updateCtg(e,t,o){const n=Object.entries(this.ctg),s=null!==t,r=n.length;!Number.isNaN(Number.parseFloat(e))&&Number.isFinite(e)&&(e=`category ${e}`);for(let r=0;r<n.length;r++){const a=n[r][0];o===a&&(n[r][0]=e,s&&(n[r][1].color=t))}n.length===r?(this.ctg=Object.fromEntries(n),this.moveCategoryEntriesToNewCategory(o,e,!0),lt.setCtg(this.ctg)):console.error("something went wrong with category name/color change")}getShortcuts(){return this.keyboardShortcuts}setShortcutsStatus(e){this.keyboardShortcutsStatus=e,lt.setShortcutsStatus(e)}getShortcutsStatus(){const e=lt.getShortcutsStatus();return null===e||e}getAnimationStatus(){return null===lt.getAnimationStatus()&&(this.animationStatus=!1,dt.setItem("animationStatus",JSON.stringify(!1))),this.animationStatus}setAnimationStatus(e){this.animationStatus=e,lt.setAnimationStatus(e)}addActiveOverlay(e){this.activeOverlay.add(e)}removeActiveOverlay(e){return 0===this.activeOverlay.size?void 0:1===this.activeOverlay.size?void(this.activeOverlay=new Set):void(this.activeOverlay=new Set([...this.activeOverlay].filter((t=>t!==e))))}getActiveOverlay(){return this.activeOverlay}hasActiveOverlay(){return this.activeOverlay.size>0}setUserUpload(e){dt.setUploadedData(e),window.location.reload()}setFormRenderHandle(e,t){this.handleRenders.calendars[e].render=t}setFormResetHandle(e,t){this.handleRenders.calendars[e].reset=t}setRenderFormCallback(e){this.handleRenders.form.callback=e}setRenderSidebarCallback(e){this.handleRenders.sidebar.callback=e}setResizeHandle(e,t){this.handleRenders.calendars[e].resize=t}setDataReconfigCallback(e){this.handleRenders.reconfig.callback=e}setResetDatepickerCallback(e){this.handleRenders.datepicker.reset=e}setResetPreviousViewCallback(e){this.handleRenders.calendars.previous.reset=e}setRenderCategoriesCallback(e){this.handleRenders.categories.callback=e}getRenderCategoriesCallback(){return this.handleRenders.categories.callback}getResetPreviousViewCallback(){return this.handleRenders.calendars.previous.reset}getResetDatepickerCallback(){return this.handleRenders.datepicker.reset}getDataReconfigCallback(){return this.handleRenders.reconfig.callback}getResizeHandle(e){return void 0===this.handleRenders.calendars[e]?null:this.handleRenders.calendars[e].resize}getFormRenderHandle(e){return void 0===this.handleRenders.calendars[e]?null:this.handleRenders.calendars[e].render}getFormResetHandle(e){return void 0===this.handleRenders.calendars[e].reset?null:this.handleRenders.calendars[e].reset}getRenderFormCallback(){const e=this.handleRenders.form.callback;return null!==e?e:null}getRenderSidebarCallback(){const e=this.handleRenders.sidebar.callback;return null!==e?e:null}}const ut=new lt,mt=document.querySelector(".toast");function gt(e,t){function n(){mt.classList.remove("show-toast"),mt.innerText="",document.onmousedown=null,document.onkeydown=null,ut.removeActiveOverlay("toast")}!function(){mt.innerText="";const s=document.createElement("div");s.classList.add("toast-message"),s.textContent=e;const r=document.createElement("div");r.classList.add("close-toast-icon-wrapper"),r.append(j("var(--white4)"));const a=document.createElement("div");a.classList.add("undo-toast-wrapper");const i=document.createElement("div");i.classList.add("undo-toast-message"),i.textContent="Undo",a.append(i),mt.append(s,a,r),mt.classList.add("show-toast"),ut.addActiveOverlay("toast"),document.onkeydown=function(e){e.key&&n()},document.onmousedown=function(e){if(!o(e,".toast"))return void n();const s=o(e,".undo-toast-wrapper"),r=o(e,".close-toast-icon-wrapper");if(s)return t(),void n();r&&n()}}()}const pt=document.querySelector(".sidebar"),ht=document.querySelector(".datepicker"),yt=document.querySelector(".datepicker-overlay"),bt=document.querySelector(".form-overlay"),ft=document.querySelector(".form-modal-overlay"),vt=document.querySelector(".entries__form"),wt=document.querySelector(".entries__form--header"),St=document.querySelector(".entry-form"),kt=document.querySelector(".entries__form--body"),Lt=document.querySelector(".form--body__title-input"),_t=document.querySelector(".form--body__description-input"),xt=document.querySelector(".form--body-start__date"),Ct=document.querySelector(".form--body-end__date"),Dt=document.querySelector(".form--body-start__time"),At=document.querySelector(".form--body-end__time"),Et=document.querySelector(".form--body__category-modal"),Mt=document.querySelector(".close-options-floating__btn"),$t=document.querySelector(".form--body__category-icon"),qt=document.querySelector(".form--body__category-modal--wrapper"),Nt=document.querySelector(".form--body__category-modal--wrapper-selection"),Tt=document.querySelector(".form--body__category-modal--wrapper__color"),It=document.querySelector(".form--body__category-modal--wrapper__title"),Yt=document.querySelector(".form--footer__button-save");function Ft(t,n,r){let i,c,d,[l,u,m]=[null,null,null];function g(){const e=document?.querySelector(".timepicker"),t=document?.querySelector(".timepicker-overlay"),o=document?.querySelector(".timepicker-times__container"),n=document?.querySelector(".active-form-time");e&&(e.scrollTo(0,0),e.remove(),t.remove(),t.onclick=null,o.onclick=null),n&&n.classList.remove("active-form-time")}function h(){const{labels:t}=e,o=xt.getAttribute("data-form-date").split("-").map((e=>Number.parseInt(e))),n=new Date(o[0],o[1],o[2]+1),s=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`,r=t.monthsShort[n.getMonth()]+" "+n.getDate()+", "+n.getFullYear();Ct.setAttribute("data-form-date",s),Ct.textContent=r,At.setAttribute("data-form-time","00:30"),At.textContent="12:30am"}function y(e,t,n,s){const r=document.createElement("div");r.classList.add("timepicker"),r.style.top=`${e.y}px`,r.style.left=`${e.x}px`;const a=document.createElement("div");a.classList.add("timepicker-overlay");const i=document.createElement("div");i.classList.add("timepicker-times__container");let c=[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11],d=["am","am","am","am","am","am","am","am","am","am","am","am","pm","pm","pm","pm","pm","pm","pm","pm","pm","pm","pm","pm"];const l=["00","15","30","45"];let[u,m]=t.split(":").map((e=>Number.parseInt(e)));const p=u>12?"pm":"am",y=xt.getAttribute("data-form-date")===Ct.getAttribute("data-form-date"),b=n&&23===u&&45===m;if(u>12&&(u-=12),null!==s&&y){let[e,t]=s.split(":").map((e=>Number.parseInt(e)));if(b&&23===e&&t>=15)return h(),void g();23===e?45===t?h():(c=[12],d=["pm"],t=t.slice(-1)):(c=c.slice(+e+1),d=d.slice(+e+1))}let f,v=0;for(const[e,t]of c.entries())for(const o of l){const s=document.createElement("div");let r;s.classList.add("timepicker-time"),"am"===d[e]?r=12==+t?`00:${o}`:`${t}:${o}`:"pm"===d[e]&&(r=12===t?`12:${o}`:`${t+12}:${o}`),s.setAttribute("data-tp-time",r),s.textContent=`${t}:${o}${d[e]}`,v++,n||+t==+u&&+o==+m&&("pm"===p&&"pm"===d[e]||"am"===p&&"am"===d[e])&&(s.classList.add("timepicker-time--selected"),f=v),i.append(s)}function w(e){const t=e.target.textContent,o=e.target.getAttribute("data-tp-time");if(n)At.textContent=t,At.setAttribute("data-form-time",o);else{Dt.textContent=t,Dt.setAttribute("data-form-time",o);const[e,n]=o.split(":").map((e=>+e)),[s,r]=At.getAttribute("data-form-time").split(":").map((e=>Number.parseInt(e)));y&&(23===e&&45===n?h():(e>s||e===s&&n>=r)&&function(){const e=Dt.getAttribute("data-form-time").split(":").map((e=>Number.parseInt(e))),[t,o]=[e[0]<23?e[0]+1:23,e[0]<23?e[1]:45],n=new Date(0,0,0,t,o),s=n.getHours()>12?"pm":"am",r=`${n.getHours()}:${n.getMinutes()}`,a=`${+n.getHours()%12}:${0==+n.getMinutes()?"00":n.getMinutes()}${s}`;At.setAttribute("data-form-time",r),At.textContent=a}())}g()}r.append(i);const[S,k]=e;r.setAttribute("style",`top:${k}px; left:${S}px;`),document.body.prepend(a,r),a.onclick=g,i.onclick=e=>{o(e,".timepicker-time")&&w(e)},n?r.scrollTo(0,0):f>0?r.scrollTo(0,Number.parseInt(40*f)-40):r.scrollTo(0,0)}function b(e,o){e.preventDefault(),"start"===o?(xt.setAttribute("class","form--body-start__date active-form-date"),Ct.setAttribute("class","form--body-end__date inactive-form-date")):(xt.setAttribute("class","form--body-start__date inactive-form-date"),Ct.setAttribute("class","form--body-end__date active-form-date"));const[s,a,i]=k(e.target,"data-form-date"),c=e.target.getBoundingClientRect(),d=Number.parseInt(c.left),l=Number.parseInt(c.bottom);let u=Number.parseInt(c.top);var m,g,p;"end"===o&&(u-=40),window.innerHeight-216<=l&&(u=window.innerHeight-242),ht.setAttribute("style",`top:${u}px;left:${d}px;`),m=s,g=a,p=i,yt.classList.remove("hide-datepicker-overlay"),ht.classList.remove("hide-datepicker"),n.addActiveOverlay("hide-datepicker-overlay"),r.setDate(m,g,p),r.setDateSelected(p),it(t,n,r,"form")}function f(e){return new Date(...e.split("-").map((e=>Number.parseInt(e))))}function v(e){return e.split(":").map((e=>Number.parseInt(e)))}function L(e,t){return e.setHours(t[0]),e.setMinutes(t[1]),e.setSeconds(0),e}function _(e){if(e.target.classList.contains("form-input-error"))e.preventDefault(),e.target.classList.remove("form-input-error"),e.target.removeAttribute("data-form-error-message"),e.target.firstElementChild.focus();else{if(!e.target.classList.contains("form-input-error__custom-input"))return;e.target.classList.remove("form-input-error__custom-input"),e.target.removeAttribute("data-form-error-message"),e.target.focus()}}function x(){n.removeLastEntry(),Ve(d,t,n,r)}function C(){const e=document?.querySelectorAll(".form-input-error");if(e)for(const t of e)t.classList.remove("form-input-error"),t.removeAttribute("data-form-error-message")}function D(){ht.classList.contains("hide-datepicker")||(ht.classList.add("hide-datepicker"),yt.classList.add("hide-datepicker-overlay")),C(),bt.onclick=null,wt.onmousedown=null,vt.onclick=null,document.removeEventListener("keydown",I),vt.classList.add("hide-form"),bt.classList.add("hide-form-overlay"),n.removeActiveOverlay("hide-datepicker-overlay"),n.removeActiveOverlay("hide-form-overlay"),St.reset(),_t.value="",Lt.value="",qt.classList.contains("category-modal-open")&&M();const e=n.getFormResetHandle(d);null!==e&&(e(),n.setFormResetHandle(d,null))}function A(e,o,s,a){if(t.setDate(e.getFullYear(),e.getMonth(),e.getDate()),t.setDateSelected(e.getDate()),Ve(d,t,n,r),n.getDayEntriesArray(t.getDate()).length<=1&&(pt.classList.contains("hide-sidebar")||(t.setDateSelected(m),Ce(t,n,r))),D(),"create"===o)setTimeout((()=>{gt("Event created",x)}),4);else{if(!n.compareEntries(a,n.getEntry(s))){const e=()=>{!function(e,o){const s=new Date(o.start);n.updateEntry(e,{category:o.category,completed:o.completed,description:o.description,end:new Date(o.end),id:e,start:s,title:o.title}),t.setDate(s.getFullYear(),s.getMonth(),s.getDate()),t.setDateSelected(s.getDate()),Ve(d,t,n,r)}(s,a)};setTimeout((()=>{gt("Event updated",e)}),4)}}}function E(e){e.preventDefault();const t=Lt.value,o=_t.value,[s,r]=function(){const e=f(xt.getAttribute("data-form-date")),t=Dt.getAttribute("data-form-time"),[o,n]=v(t),s=f(Ct.getAttribute("data-form-date")),r=At.getAttribute("data-form-time"),[a,i]=v(r);return[L(e,[o,n]),L(s,[a,i])]}(),a=qt.getAttribute("data-form-category"),i=function(e,t,o,s,r){const a={title:!0,description:!0,startDate:!0,endDate:!0,valid:!0};if("string"==typeof e){const t=e.trim().replaceAll(/[^\s\w-]+|\s{2,}/g," ");t.length>50?(a.title="Title must be Less than 50 characters",a.valid=!1):0===t.length&&(a.title="Title cannot be empty",a.valid=!1)}else a.title="Title cannot be empty";t.length>=200&&(a.description="Description must be less than 200 characters",a.valid=!1),n.hasCtg(o)&&o||qt.setAttribute("data-form-category","default"),s?S(s)||(a.startDate="Start date is not valid",a.valid=!1):(a.startDate="Start date cannot be empty",a.valid=!1),r?S(r)?w(s,r)||(a.endDate="End date must be after start date",a.valid=!1):(a.endDate="End date is not valid",a.valid=!1):(a.endDate="End date cannot be empty",a.valid=!1);const i={};let c;for(const e in a)!0!==a[e]&&(i[e]=a[e],c=!0);return!c||i}(t,o,a,s,r);if(!0===i){if("edit"===Yt.getAttribute("data-form-action")){const e=Yt.getAttribute("data-form-entry-id"),i=structuredClone(n.getEntry(e));return n.updateEntry(e,{category:a,completed:!1,description:o,end:r,id:e,start:s,title:t}),void A(s,"edit",e,i)}n.createEntry(a,!1,o,r,s,t),A(s,"create",n.getLastEntryId(),null)}else!function(e){Lt.blur();const t={title:Lt,description:_t,startDate:xt,endDate:Ct},o="data-form-error-message",n="form-input-error",s="form-input-error__custom-input",r="form-error__submit-btn";for(const r in e)if(t[r])if("title"===r||"description"===r)t[r].parentElement.setAttribute(o,e[r]),t[r].parentElement.classList.add(n);else{t[r].setAttribute(o,e[r]),t[r].classList.add(s);const n=t[r].parentElement.parentElement.firstElementChild.firstElementChild;n.style.fill="var(--red2)",setTimeout((()=>{n.style.fill="var(--white3)"}),1e3)}Yt.classList.add(r),setTimeout((()=>{Yt.classList.remove(r)}),1e3)}(i)}function M(){Mt.style.display="none",qt.classList.remove("category-modal-open"),Et.classList.add("hide-form-category-modal"),Nt.classList.remove("hide-form-category-selection"),ft.classList.add("hide-form-overlay"),qt.removeAttribute("style"),Et.innerText=""}function $(e,t){const o=t.length;1!==o&&(Mt.removeAttribute("style"),setTimeout((()=>{kt.scrollTo({top:kt.scrollHeight,behavior:"smooth"})}),5),o>=5?Mt.setAttribute("style","top: -100px"):Mt.setAttribute("style",`top: ${20*o*-1}px`),qt.classList.add("category-modal-open"),qt.style.height=o<5?32*o+"px":"160px",Nt.classList.add("hide-form-category-selection"),Et.classList.remove("hide-form-category-modal"),Et.style.height=32*o+"px",Et.innerText="",function(e,t){const o=qt.getAttribute("data-form-category");for(const[n,s]of t){const t=s.color,r=document.createElement("div");r.classList.add("category-modal--category"),r.style.width="200px",r.style.backgroundColor=t,r.setAttribute("data-form-category-title",n),r.setAttribute("data-form-category-color",t);const a=document.createElement("div");a.classList.add("category-modal--category-color"),a.style.backgroundColor=t;const i=document.createElement("div");if(i.classList.add("category-modal--category-title"),i.textContent=n,n===o){const e=W("var(--white4)"),t=document.createElement("div");t.classList.add("category-modal--category-check"),t.append(e),r.append(a,i,t)}else r.append(a,i);e.append(r)}}(Et,t),ft.classList.remove("hide-form-overlay"))}function q(e){const t=e.getBoundingClientRect(),[o,n]=a(180,200,[Number.parseInt(t.left),Number.parseInt(t.top)],[window.innerWidth,window.innerHeight],!1);return[o,n]}function N(e){const t=o(e,".form-header--dragarea"),n=o(e,".form--header__icon-close");if(t){if(window.innerWidth<500||window.innerHeight<500)return;!function(e){const t=document.querySelector(".form--header__icon-close"),o=vt.getBoundingClientRect(),[n,r]=[Number.parseInt(o.left),Number.parseInt(o.top)];vt.style.margin="0",vt.style.opacity="0.8",vt.style.userSelect="none",vt.style.top=r+"px",vt.style.left=n+"px",vt.style.bottom="0",vt.style.right="0",t.style.pointerEvents="none",St.style.pointerEvents="none";let[a,i]=[e.clientX,e.clientY];const[c,d]=[window.innerHeight,window.innerWidth],l=s((function(e){const[t,o]=[a-e.clientX,i-e.clientY];a=e.clientX,i=e.clientY,vt.offsetTop<0&&(vt.style.top="0px"),vt.offsetLeft<0&&(vt.style.left="0px"),vt.offsetLeft+vt.offsetWidth>d&&(vt.style.left=d-vt.offsetWidth+"px"),vt.offsetTop+vt.offsetHeight>c&&(vt.style.top=c-vt.offsetHeight+"px"),vt.style.top=vt.offsetTop-o+"px",vt.style.left=vt.offsetLeft-t+"px"}),10);document.addEventListener("mousemove",l),document.addEventListener("mouseup",(function e(){vt.style.opacity="1",vt.style.userSelect="all",t.removeAttribute("style"),St.removeAttribute("style"),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",e)}))}(e)}else n&&D()}function T(e){const t=o(e,".form--body-start__date"),n=o(e,".form--body-start__time"),s=o(e,".form--body-end__date"),r=o(e,".form--body-end__time"),a=o(e,".form--body__category-modal"),c=o(e,".form--body__category-modal--wrapper-selection"),d=o(e,".close-options-floating__btn"),l=o(e,".form-modal-overlay"),u=o(e,".form-input-error"),m=o(e,".form-input-error__custom-input"),g=o(e,".form--footer__button-cancel"),p=o(e,".form--footer__button-save");if(t)b(e,"start");else{if(n)return e.target.classList.add("active-form-time"),void y(q(e.target),Dt.getAttribute("data-form-time"),!1,null);if(s)b(e,"end");else{if(r)return e.target.classList.add("active-form-time"),void y(q(e.target),At.getAttribute("data-form-time"),!0,Dt.getAttribute("data-form-time"));if(a)Et.childElementCount>0&&function(e){const t=e.target.getAttribute("data-form-category-title"),o=e.target.getAttribute("data-form-category-color");qt.setAttribute("data-form-category",t),$t.firstElementChild.setAttribute("fill",o),Nt.style.backgroundColor=o,Tt.style.backgroundColor=o,It.textContent=t,M()}(e);else if(c)$(0,i);else if(d)M();else if(l)M();else if(u)_(e);else{if(!m)return g?(St.reset(),C(),Y(),void M()):void(p&&E(e));_(e)}}}}function I(e){if(ht.classList.contains("hide-datepicker")){const t=document?.querySelector(".timepicker"),o=document?.querySelector(".hide-form-category-modal");"Escape"===e.key&&(null!==t?g():null===o?M():D()),"Enter"===e.key&&(null!==t?g():null===o?M():E(e))}}function Y(){i=Object.entries(n.getAllCtg()),c=n.getActiveCategoriesKeyPair(),d=t.getComponent(),l=t.getYear(),u=t.getMonth(),m=t.getDay(),_t.value="",Lt.blur(),Lt.value="",setTimeout((()=>{Lt.focus()}),10),function(){const[e,t]=0===c.length?[i[0][0],i[0][1].color]:[c[0][0],c[0][1].color];qt.setAttribute("data-form-category",e),Nt.style.backgroundColor=t,It.textContent=e,Tt.style.backgroundColor=t,$t.firstElementChild.setAttribute("fill",t)}(),r.setDate(l,u,m),t.setDateSelected(m);const e=`${t.getMonthName().slice(0,3)} ${m}, ${l}`;xt.textContent=e,xt.setAttribute("data-form-date",p(t.getDate())),Ct.textContent=e,Ct.setAttribute("data-form-date",p(t.getDate()));const o=(new Date).getHours();Dt.setAttribute("data-form-time",`${o}:00`),At.setAttribute("data-form-time",`${o}:30`);const s=(e,t)=>`${0==+e||12==+e?12:e%12}:${t}${e<12?"am":"pm"}`;Dt.textContent=s(o,"00"),At.textContent=s(o,"30"),Yt.setAttribute("data-form-action","create"),Yt.setAttribute("data-form-id",""),wt.onmousedown=N,bt.onclick=D,vt.onclick=T,document.addEventListener("keydown",I)}Y()}const Ot=document.querySelector(".go-to-date-overlay"),Rt=document.querySelector(".go-to-date"),Bt=document.querySelector(".go-to-input"),Ht=document.querySelector(".go-to-err"),Pt=document.querySelector(".cancel-go-to"),jt=document.querySelector(".submit-go-to");function Wt(t,o,n){const{labels:s}=e,{monthsShortLower:r}=s;function a(){Ht.style.display="none",Ht.onmousedown=null}function i(){const e=function(e){const t=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/),o=e.match(/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+(\d{1,2})\s+(\d{4})$/i);let n,s,a;if(t)[,n,s,a]=t,n=Number.parseInt(n,10)-1,s=Number.parseInt(s,10),a=Number.parseInt(a,10);else{if(!o)return!1;{const[,e,t,i]=o;n=r.indexOf(e.toLowerCase()),s=Number.parseInt(t,10),a=Number.parseInt(i,10)}}const i=new Date(a,n,s);return i.getFullYear()===a&&i.getMonth()===n&&i.getDate()===s&&i}(Bt.value.toLowerCase());if(e instanceof Date){t.setDate(e.getFullYear(),e.getMonth(),e.getDate()),t.setDateSelected(e.getDate()),"hide"!==t.getSidebarState()&&Ce(t,o,n);let s=t.getComponent();"list"===s&&(s="day"),d(),Ve(s,t,o,n)}else Ht.style.display="block",Ht.onmousedown=a}function c(e){const t=e.key.toLowerCase();"escape"!==t?"enter"!==t||i():"block"===Ht.style.display?a():d()}function d(){document.removeEventListener("keydown",c),Pt.onclick=null,jt.onclick=null,o.removeActiveOverlay("hide-gotodate"),Ot.classList.add("hide-gotodate"),Rt.classList.add("hide-gotodate"),Bt.value=""}a(),setTimeout((()=>{Bt.focus(),Bt.value=function(){const[e,o,n]=[t.getYear(),t.getMonth(),t.getDay()];return`${r[o]} ${n} ${e}`}()}),10),Ot.classList.remove("hide-gotodate"),Rt.classList.remove("hide-gotodate"),o.addActiveOverlay("hide-gotodate"),document.addEventListener("keydown",c),Pt.onclick=d,jt.onclick=i}const zt=class{constructor(e,t){this.catname=e,this.catcolor=t,this.errMsg="",this.prevColorIdx=t,this.originalName=e,this.originalColor=t}setName(e){this.catname=e}setColor(e){this.catcolor=e}setPrevColor(e){this.prevColorIdx=e}getName(){return this.catname}getColor(){return this.catcolor}prevColor(){return this.prevColorIdx}setErrMsg(e){this.errMsg=e}getErrMsg(){return this.errMsg}getOriginalName(){return this.originalName}getOriginalColor(){return this.originalColor}},Ut=document.querySelector(".category__form"),Jt=document.querySelector(".category__form-overlay"),Qt=document.querySelector(".category__form-input"),Xt=document.querySelector(".color-picker__options"),Kt=document.querySelector(".ctg-input--err");function Vt(e,t,o,n){const s=Object.values(e.getColors()),r=new zt(t.name,t.color);function a(e,t){const o=document.createElement("div");return o.classList.add("color-picker--option"),o.style.backgroundColor=e,o.setAttribute("data-color-hex",e),e===t&&(o.classList.add("selected-color"),r.setColor(e)),o}function i(t,n){let s=t.trim().replaceAll(/[^\d\sA-Za-z]+|\s{2,}/g," ").trim();(function(e){return!Number.isNaN(Number.parseFloat(e))&&Number.isFinite(e)})(s)&&(s=`category ${s}`);const a=r.getOriginalName();let i=!1;if(0===s.length?(r.setErrMsg("Category name is required"),i=!0):e.hasCtg(s)&&(!o||o&&a!==s)&&(r.setErrMsg("Category already exists"),i=!0),i)return Kt.classList.remove("hide-ctg-err"),Kt.textContent=r.getErrMsg(),void(Kt.onclick=()=>{Kt.classList.add("hide-ctg-err"),Qt.focus()});{if(o){if(a===s&&r.getOriginalColor()===n)return void c();a!==s?e.updateCtg(s,n,r.getName()):e.updateCtgColor(a,n)}else e.addNewCtg(s,n);const t=e.getRenderCategoriesCallback();c(),t()}}function c(){null!==n&&n.removeAttribute("style"),Ut.classList.add("hide-ctg-form"),Jt.classList.add("hide-ctg-form"),Qt.value="",Kt.classList.add("hide-ctg-err"),e.removeActiveOverlay("hide-ctg-form"),Ut.onmousedown=null,Jt.onclick=null,document.removeEventListener("keydown",d)}function d(e){const t=e.key.toLowerCase();"escape"===t?Kt.classList.contains("hide-ctg-err")?c():(Kt.classList.add("hide-ctg-err"),Qt.focus()):"enter"===t&&i(Qt.value,r.getColor())}function l(e,t){return e.target.closest(t)}function u(e){const t=l(e,".category__form--cancel"),o=l(e,".color-picker--option"),n=l(e,".category__form--submit");if(!t)return o?(function(e,t){const o=e.target,n=o.getAttribute("data-color-hex");n!==t&&(document?.querySelector(".selected-color")?.classList.remove("selected-color"),o.classList.add("selected-color"),Qt.style.border=`2px solid ${n}`,e.target.blur(),r.setColor(n))}(e,r.getColor()),void Qt.focus()):void(n&&i(Qt.value,r.getColor()));c()}!function(e){if(0===Xt.children.length)for(const t of s)for(const o of Object.values(t))Xt.append(a(o,e))}(r.getColor()),function(t){if(e.addActiveOverlay("hide-ctg-form"),Jt.classList.remove("hide-ctg-form"),Ut.classList.remove("hide-ctg-form"),Ut.removeAttribute("style"),null!==n){const e=n.getBoundingClientRect(),t=Number.parseInt(e.right);Ut.setAttribute("style",`left:${t}px;top:0;margin-top:auto;`)}else Ut.setAttribute("style","inset:5%;margin:auto;");Kt.classList.add("hide-ctg-err"),Qt.style.border=`2px solid ${r.getColor()}`,setTimeout((()=>{t?Qt.value=r.getName():Qt.placeholder="create new category...",Qt.focus()}),4)}(o),Ut.onmousedown=u,Jt.onclick=c,document.addEventListener("keydown",d)}const Gt=document.querySelector(".shortcuts-modal-overlay"),Zt=document.querySelector(".shortcuts__modal"),eo=document.querySelector(".shortcuts-modal-content"),to=document.querySelector(".close-shortcuts-modal"),oo=document.querySelector(".keyboard-disabled-sm-two");function no(e){function t(e,t){const o=document.createElement("div");o.classList.add("sm-item");const n=document.createElement("div");n.classList.add("sm-key");const s=document.createElement("span");if(Array.isArray(e)){const t=document.createElement("span");t.textContent=" or ";const o=document.createElement("span");s.textContent=e[0].toUpperCase(),o.textContent=e[1].toUpperCase(),n.append(s,t,o)}else"ENTER"!=e&&"ESCAPE"!=e&&"DELETE"!=e||s.classList.add("key-full"),s.textContent=e.toUpperCase(),n.append(s);const r=document.createElement("div");if(r.classList.add("sm-description"),Array.isArray(t)){o.classList.add("sm-item--full"),r.classList.add("sm-description--full");const e=document.createElement("span"),n=document.createElement("span");e.textContent=t[0],n.textContent=t[1],r.append(e,n)}else r.textContent=t;return o.append(n,r),o}function o(){eo.innerText="",Gt.classList.add("hide-shortcuts"),Zt.classList.add("hide-shortcuts"),e.removeActiveOverlay("hide-shortcuts"),document.removeEventListener("keydown",n)}function n(e){const t=e.key.toLowerCase();"escape"!==t&&"/"!==t&&"?"!==t||o()}function s(e){e?(oo.setAttribute("data-tooltip","Keyboard shortcuts enabled"),oo.firstElementChild.setAttribute("fill","var(--primary1)")):(oo.setAttribute("data-tooltip","Keyboard shortcuts disabled"),oo.firstElementChild.setAttribute("fill","var(--red1)"))}!function(){Gt.classList.remove("hide-shortcuts"),Zt.classList.remove("hide-shortcuts"),e.addActiveOverlay("hide-shortcuts"),s(e.getShortcutsStatus());const r=e.getShortcuts();for(let e=0;e<Object.values(r).length;e++){const o=Object.values(r)[e];eo.append(t(o.shortcut,o.action))}Gt.onclick=o,to.onclick=o,oo.onclick=function(){const t=!1===e.getShortcutsStatus();s(t),e.setShortcutsStatus(t)},document.addEventListener("keydown",n)}()}const so=document.querySelector(".sb__categories"),ro=document.querySelector(".sb__categories--body"),ao=document.querySelector(".sb__categories--body-form"),io=document.querySelector(".sb__categories--header"),co=document.querySelector(".sbch-caret");function lo(e,t,n){const s=t.getDefaultCtg()[0];function r(){Ve(e.getComponent(),e,t,n)}function i(){Ce(e,t,n)}function c(){ao.innerText="";const e=t.getAllCtg(),o=Object.keys(e);for(let t=0;t<o.length;t++){const[n,s,r]=[o[t],e[o[t]].color,e[o[t]].active];d(n,s,r)}}function d(e,t,o){const n=document.createElement("div");n.classList.add("sbch-form--item");const r=document.createElement("div");r.classList.add("sbch-form--item__col");const a=document.createElement("div");a.classList.add("sbch-form--item__checkbox--wrapper");const i=document.createElement("button");let c;i.classList.add("sbch-form--item__checkbox"),i.setAttribute("data-sbch-checked",`${o}`),i.setAttribute("data-sbch-category",e),o?(i.style.backgroundColor=t,c=W("var(--taskcolor0)")):(i.style.backgroundColor="var(--black1)",c=W("none")),i.style.border=`2px solid ${t}`,i.append(c),a.append(i);const d=document.createElement("span");d.classList.add("sbch-form--item__label"),d.textContent=e,r.append(a,d);const l=document.createElement("div");l.classList.add("sbch-form--item__col--actions");const u=document.createElement("button");u.classList.add("sbch-col--actions__delete-icon"),u.setAttribute("data-sbch-category",e),u.setAttribute("data-sbch-color",t);const m=document.createElement("button");m.classList.add("sbch-col--actions__edit-icon"),m.setAttribute("data-sbch-category",e),m.setAttribute("data-sbch-color",t),e.toLowerCase()===s?m.classList.add("sbch-col--actions__edit-icon--immutable"):(u.append(j("var(--white2)")),l.append(u)),m.append(H("var(--white2)")),l.append(m),n.append(r,l),ao.append(n)}function l(e){const n=o(e,".sbch-col__one"),s=o(e,".sbch-col--actions__edit-icon"),d=o(e,".sbch-col--actions__delete-icon"),l=o(e,".sbch-form--item__col"),u=o(e,".sbch-plus");if(n)return ro.classList.toggle("toggle-category--modal"),ro.classList.contains("toggle-category--modal")?co.classList.remove("sbch-caret--open"):co.classList.add("sbch-caret--open"),io.style.backgroundColor="var(--black0)",void setTimeout((()=>{io.style.backgroundColor="var(--black1)"}),200);if(s){const o={name:e.target.getAttribute("data-sbch-category"),color:e.target.getAttribute("data-sbch-color")},n=e.target.parentElement.parentElement;return n.style.borderBottom=`2px solid ${o.color}`,void function(e,o){const[n,s]=o,d=[e.clientX,Number.parseInt(s.getBoundingClientRect().top)-8],[l,u]=a(192,128,d,[window.innerWidth,window.innerHeight],!1,null),m=document.createElement("div");m.classList.add("popup-ctg-options"),m.style.top=`${u}px`,m.style.left=`${l}px`;const g=document.createElement("div");g.classList.add("popup-ctg-options__overlay"),t.addActiveOverlay("popup-ctg-options__overlay");const p=document.createElement("div");p.classList.add("option__open-ctg-edit"),p.textContent="Edit category (name, color)";const h=document.createElement("div");h.classList.add("option__close-other-ctg"),h.textContent="Display this only";const y=document.createElement("div");function b(e,o){document.querySelector(".popup-ctg-options").remove(),document.querySelector(".popup-ctg-options__overlay").remove(),t.removeActiveOverlay("popup-ctg-options__overlay"),e&&o.removeAttribute("style"),document.removeEventListener("keydown",w)}function f(){i(),r(),c()}function v(){b(!0,s)}function w(e){"Escape"===e.key&&v()}y.classList.add("option__open-other-ctg"),y.textContent="Display all but this",m.append(p,h,y),document.body.prepend(g,m),document.addEventListener("keydown",w),p.onclick=function(){Vt(t,n,!0,s),b()},g.onclick=v,h.onclick=function(){t.setAllCategoryStatusExcept(n.name,!1),v(),f()},y.onclick=function(){t.setAllCategoryStatusExcept(n.name,!0),v(),f()}}(e,[o,n])}if(d)!function(e){const o=e.target.getAttribute("data-sbch-category"),n=t.getCtgColor(o),s=n,a=t.getCtgLength(o);let d=!1;const l=document.createElement("aside");l.classList.add("popup-delete-ctg__overlay");const u=document.createElement("aside");u.classList.add("popup-delete-ctg"),0===a&&(d=!0,u.classList.add("popup-delete-ctg__no-entries"));const m=1===a?"entry":"entries",g=document.createElement("div");g.classList.add("popup-delete-ctg__header");const p=document.createElement("div");p.classList.add("popup-delete-ctg__title"),p.style.border=`2px solid ${n}`,p.style.backgroundColor=s,p.textContent=`removing – "${o}"`;const h=document.createElement("div");if(h.classList.add("popup-delete-ctg__stats"),h.textContent=`(${a} total ${m} in this category)`,g.append(p,h),u.append(g),!d){const e=document.createElement("div");e.classList.add("popup-delete-ctg__body");const r=document.createElement("div"),i=t.getAllCtgNames();r.classList.add("popup-delete-ctg__options"),r.classList.add("popup-delete-act"),r.style.backgroundColor=s,r.style.border=`2px solid ${n}`;const c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("name","popup-delete-ctg__option"),c.setAttribute("id","ctg-move"),c.setAttribute("checked","true");const d=document.createElement("div"),l=document.createElement("span"),g=document.createElement("select");d.classList.add("popup-delete-ctg__option--move"),l.textContent=`Move "${o}" ${m} to `,g.classList.add("popup-delete-ctg__option--move-select");for(let e=0;e<i.length;e++)if(i[e]!==o){const t=document.createElement("option");t.value=i[e],t.textContent=i[e],g.append(t)}d.append(l,g),r.append(c,d);const p=document.createElement("div");p.classList.add("popup-delete-ctg__options"),p.style.border=`2px solid ${n}`;const h=document.createElement("input");h.setAttribute("type","radio"),h.setAttribute("name","popup-delete-ctg__option"),h.setAttribute("id","ctg-delete");const y=document.createElement("div");y.classList.add("popup-delete-ctg__option--remove");const b=document.createElement("span");b.textContent=`Delete "${o}" and ${a} ${m} (irreversible)`;const f=P(n),v=e=>{if("ctg-delete"!==e.target.id&&"ctg-move"!==e.target.id&&!e.target.classList.contains("popup-delete-ctg__option--move")&&!e.target.classList.contains("popup-delete-ctg__option--move-select")){e.target.closest(".popup-delete-ctg__options").querySelector("input").checked=!0;for(const e of document.querySelectorAll(".popup-delete-ctg__options"))e.setAttribute("style",`background-color: transparent; border: 2px solid ${n};`),e.classList.remove("popup-delete-act");e.target.closest(".popup-delete-ctg__options").setAttribute("style",`background-color: ${s}; border: 2px solid ${n};`),e.target.closest(".popup-delete-ctg__options").classList.add("popup-delete-act")}};y.append(b,f),p.append(h,y),e.append(r,p),u.append(e),r.onclick=v,p.onclick=v}const y=document.createElement("div");y.classList.add("popup-delete-ctg__footer");const b=document.createElement("button");b.textContent="cancel",b.classList.add("popup-delete-ctg__btn--cancel"),b.style.backgroundColor=s;const f=document.createElement("button");f.classList.add("popup-delete-ctg__btn--proceed"),f.textContent="proceed",y.append(b,f),u.append(y),document.body.append(l,u),t.addActiveOverlay("popup-delete-ctg__overlay");const v=e=>{"Escape"===e.key&&w()},w=()=>{u.remove(),l.remove(),t.removeActiveOverlay("popup-delete-ctg__overlay"),document.removeEventListener("keydown",v)};f.onclick=()=>{if(d)t.deleteCategory(o);else{const e=document?.querySelector("input[name='popup-delete-ctg__option']:checked").id,n=document.querySelector(".popup-delete-ctg__option--move-select").value;"ctg-move"===e?t.moveCategoryEntriesToNewCategory(o,n):"ctg-delete"===e&&t.removeCategoryAndEntries(o)}w(),r(),i(),c()},l.onclick=w,b.onclick=w,document.addEventListener("keydown",v)}(e);else if(l)!function(e){const o=e.target.children[0].children[0],n=o.getAttribute("data-sbch-checked"),s=o.getAttribute("data-sbch-category"),a=t.getCtgColor(s);"true"===n?(o.setAttribute("data-sbch-checked","false"),t.setCategoryStatus(s,!1),o.style.backgroundColor="var(--black1)",o.firstChild.setAttribute("fill","none")):(o.setAttribute("data-sbch-checked","true"),t.setCategoryStatus(s,!0),o.style.backgroundColor=a,o.firstChild.setAttribute("fill","var(--taskcolor0)")),i(),r()}(e);else if(u){const o={name:"new category",color:t.getDefaultCtg()[1].color};Vt(t,o,!1,e.target)}else;}(()=>{c();t.setRenderCategoriesCallback((()=>{c(),r()})),so.onmousedown=l})()}const uo=function(e){return new Promise((t=>{if(navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)navigator.clipboard.writeText(e).then((()=>t(e))).catch((()=>t("")));else if(window.isSecureContext){const o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",o.setAttribute("readonly",""),document.body.append(o),o.focus(),o.select();try{const n=document.execCommand("copy");o.remove(),t(n?e:"")}catch{o.remove(),t("")}}else t("")}))},mo=document.querySelector(".sb__info"),go=document.querySelector(".sb__info-popup"),po=document.querySelector(".sb__info-popup-overlay"),ho=document.querySelector(".select-popup-info"),yo=document.querySelector(".close-sb-info"),bo=document.querySelector(".sbip-title"),fo=document.querySelector(".sbip-content");function vo(e){const t={notes:{title:"Breakdown of project & current status",content:"These are my project notes"},privacy:{title:"Cookies and Data Privacy",content:"This project uses an open source license"},terms:{title:"Code license and terms of use",content:"All data is stored locally meaning no data is sent to a server."}};function n(){e.removeActiveOverlay("hide-sb-info-popup"),go.classList.add("hide-sb-info-popup"),po.classList.add("hide-sb-info-popup"),document.removeEventListener("keydown",a),po.onclick=null,yo.onclick=null}function s(e){bo.innerText=t[e].title,fo.innerText=t[e].content}function r(e){s(e.target.value)}function a(e){"Escape"===e.key&&n()}function i(t){const o=["notes","privacy","terms"].indexOf(t);ho.selectedIndex=o,e.addActiveOverlay("hide-sb-info-popup"),go.classList.remove("hide-sb-info-popup"),po.classList.remove("hide-sb-info-popup"),s(ho.value),ho.onchange=r,po.onclick=n,yo.onclick=n,document.addEventListener("keydown",a)}mo.onmousedown=function(e){const t=o(e,".sb__project-notes"),n=o(e,".sb__privacy"),s=o(e,".sb__terms"),r=o(e,".sbl-email");t?i("notes"):n?i("privacy"):s?i("terms"):r&&uo("ottofy@zohomail.com")}}const wo=document.querySelector(".sidebar-sub-menu__overlay"),So=document.querySelector(".sidebar-sub-menu"),ko=document.querySelector(".body"),Lo=document.querySelectorAll(".theme-radio__input"),_o=document.querySelector(".smia-toggle-shortcuts-checkbox"),xo=document.querySelector(".smdt-toggle-checkbox"),Co=document.querySelector(".keyboard-disabled-sm");function Do(e,t){const n=["dark","light","contrast"],s="hide-sidebar-sub-menu";function a(e){const t=document.querySelector(".sb-sub-popup-confirm");if("Escape"===e.key){if(t)return t.remove(),void wo.classList.remove("sub-overlay-vis");i(),wo.classList.remove("sub-overlay-vis")}if("a"===e.key.toLowerCase()){if(t)return;i()}}function i(){const t=document.querySelector(".sb-sub-popup-confirm");if(t)return t.remove(),void wo.classList.remove("sub-overlay-vis");e.removeActiveOverlay(s),So.classList.add(s),wo.classList.add(s),document.removeEventListener("keydown",a),wo.onclick=null}function c(e){e?(Co.setAttribute("data-tooltip","Keyboard shortcuts enabled"),Co.firstElementChild.setAttribute("fill","var(--primary1)")):(Co.setAttribute("data-tooltip","Keyboard shortcuts disabled"),Co.firstElementChild.setAttribute("fill","var(--red1)"))}function d(){const t=JSON.stringify(dt.getAllData(),null,2),[o,n]=e.getStoreStats(),s=`ENT_${o}_CAT_${n}_${function(){const e=new Date;return`${Number.parseInt(e.getDate())}`}()}`,r=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download=s+".json",document.body.append(i),i.click(),URL.revokeObjectURL(a),i.remove()}function l(){wo.classList.remove("sub-overlay-vis");const e=document.querySelector(".sb-sub-popup-confirm");e&&e.remove()}function u(t){if("download"===t)d();else{const t=function(){const t=document.createElement("div");t.classList.add("sb-sub-popup-confirm");const[o,n]=e.getStoreStats();let s,[r,a]=[!1,!1];o>0&&(r=`Overwriting ${o} entries`),n>1&&(a=2===n?"1 category.":+n-1+" categories."),s=r&&a?`${r} and ${a}`:r&&!a?`${r}.`:!r&&a?`No entries. Overwriting ${a}`:"Current calendar has no entries or categories.";const i=document.createElement("div");i.classList.add("sb-sub-popup-subtitle"),i.textContent=s;const c=document.createElement("div");c.classList.add("sb-sub-popup-subtitle"),c.textContent="This action is irreversible.";const d=document.createElement("div");d.classList.add("sb-sub-popup-title"),d.textContent='Please ensure you have a valid backup before proceeding. Use the "validate .json" button next to "upload .json" to check that everything is in order.';const l=document.createElement("div");l.classList.add("sb-sub-popup-btns");const u=document.createElement("button");u.classList.add("sb-sub-popup-btn--cancel"),u.textContent="Cancel";const m=document.createElement("button");return m.classList.add("sb-sub-popup-btn--proceed"),m.textContent="Proceed",l.append(u,m),t.append(i,c,d,l),t}();document.body.append(t),wo.classList.add("sub-overlay-vis");const o=t.querySelector(".sb-sub-popup-btn--cancel"),n=t.querySelector(".sb-sub-popup-btn--proceed");o.onclick=l,n.onclick=()=>async function(e,t){return new Promise(((o,n)=>{const s=document.createElement("input");s.type="file",s.accept="application/json",s.onchange=async r=>{try{const n=r.target.files[0];if(!n)throw new Error("No file selected");const s=await n.text(),a=JSON.parse(s);e.setUserUpload(a),t(),o(a)}catch(e){console.error("Error processing file:",e),n(e)}finally{s.remove(),t()}},document.body.append(s),s.click()}))}(e,i).then((e=>{console.log("JSON upload successful:",e)})).catch((e=>{console.error("JSON upload failed:",e)}))}}function m(e){const t=document.querySelector(".toggle-animations-icon__sm"),o={on:document.querySelector(".tai-on"),off:document.querySelector(".tai-off")};e?(o.on.classList.remove("hide-tai"),o.off.classList.add("hide-tai"),t.setAttribute("data-tooltip","Animations Enabled")):(o.on.classList.add("hide-tai"),o.off.classList.remove("hide-tai"),t.setAttribute("data-tooltip","Animations Disabled"))}function g(t){const o=!1===xo.checked;e.setAnimationStatus(o),m(o),t&&(xo.checked=o),ko.setAttribute("data-disable-transitions",!o)}function p(n){const s=o(n,".down-json"),a=o(n,".upload-json"),d=o(n,".theme-option"),l=o(n,".toggle-kb-shortcuts-btn__smia"),m=o(n,".smia-disable-shortcuts__btn"),p=o(n,".keyboard-disabled-sm"),h=o(n,".smdt-toggle"),y=o(n,".toggle-animations-icon__sm"),b=o(n,".close-sub-menu");if(s)u("download");else if(a)u("upload");else{if(!d)return l?(i(),void no(e)):void(m?function(){const t=!1===_o.checked;e.setShortcutsStatus(t),c(t)}():p?function(){let t=e.getShortcutsStatus();t=!t,e.setShortcutsStatus(t),c(t),_o.checked=t}():h?g():y?g(!0):b&&i());!function(o){const n=o.target.firstElementChild,s=n.value;n.checked=!0,s!==t.getColorScheme()&&(t.setColorScheme(s),r(t,e))}(n)}}!function(){const o=n.indexOf(t.getColorScheme());Lo[o].checked=!0;const r=e.getShortcutsStatus();c(r),_o.checked=r;const d=e.getAnimationStatus();m(d),xo.checked=d,e.addActiveOverlay(s),So.classList.remove(s),wo.classList.remove(s),document.addEventListener("keydown",a),wo.onclick=i}(),So.onmousedown=p}const Ao=document.querySelector(".h__container"),Eo=document.querySelector(".logo"),Mo=document.querySelector(".toggle-form"),$o=document.querySelector(".sb-toggle-form-btn"),qo=document.querySelector(".sb-data-btn"),No=document.querySelector(".form-overlay"),To=document.querySelector(".entries__form"),Io=document.querySelector(".datepicker"),Yo=document.querySelector(".datepicker-overlay"),Fo=document.querySelector(".datetime-wrapper"),Oo=document.querySelector(".datetime-content"),Ro=document.querySelector(".datepicker-sidebar"),Bo=document.querySelector(".sbdatepicker__body--dates"),Ho=document.querySelector(".sb__categories--body-form"),Po=document.querySelector(".select__modal"),jo=document.querySelector(".change-view--overlay"),Wo=document.querySelector(".change-view--wrapper"),zo=document.querySelector(".sidebar"),Uo=document.querySelector(".sb__info"),Jo=document.querySelector(".sb__categories"),Qo=document.querySelector(".container__calendars"),Xo=document.querySelector(".yearview"),Ko=document.querySelector(".monthview"),Vo=document.querySelector(".listview__body"),Go=document.querySelector(".collapse-view");class Zo{constructor(){this.colorScheme="dark",this.component="month",this.sidebarState="hide",this.date=new Date,this.gmt=(new Date).getTimezoneOffset()/60,this.dateSelected=1,this.daySelected=this.date.getDate(),this.monthSelected=this.date.getMonth(),this.yearSelected=this.date.getFullYear(),this.month=this.getMonth(),this.monthArray=this.getMonthArray(),this.week=this.getWeek()}setDefaults(){const e={yearSelected:[this.date.getFullYear(),Zo.setLocalYear],monthSelected:[this.date.getMonth(),Zo.setLocalMonth],daySelected:[this.date.getDate(),Zo.setLocalDay],dateSelected:[1,Zo.setLocalDateSelected],colorScheme:["dark",Zo.setLocalColorScheme],component:["month",Zo.setLocalComponent],sidebarState:["hide",Zo.setLocalSidebarState]};for(const[t,o]of Object.entries(e))if(null===dt.getItem(t)){const[e,n]=o;void 0===this[t]&&(this[t]=e),n(this[t])}}static getLocalDay(){return void 0===+dt.getItem("daySelected")?1:+dt.getItem("daySelected")}static getLocalMonth(){return void 0===+dt.getItem("monthSelected")?1:+dt.getItem("monthSelected")}static getLocalYear(){return void 0===+dt.getItem("yearSelected")?1:+dt.getItem("yearSelected")}static getLocalDateSelected(){return+dt.getItem("dateSelected")}static getLocalComponent(){return dt.getItem("component")}static getLocalColorScheme(){return dt.getItem("colorScheme")}static getLocalSidebarState(){return dt.getItem("sidebarState")}static setLocalDay(e){dt.setItem("daySelected",e)}static setLocalMonth(e){dt.setItem("monthSelected",e)}static setLocalYear(e){dt.setItem("yearSelected",e)}static setLocalDateSelected(e){dt.setItem("dateSelected",e)}static setLocalComponent(e){dt.setItem("component",e)}static setLocalSidebarState(e){dt.setItem("sidebarState",e)}static setLocalColorScheme(e){dt.setItem("colorScheme",e)}getAllMethodNames(){return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter((e=>"constructor"!==e&&"getStoreStats"!==e))}getColorScheme(){return Zo.getLocalColorScheme()}setColorScheme(e){this.colorScheme=e,Zo.setLocalColorScheme(e)}setSidebarState(e){this.sidebarState=e,Zo.setLocalSidebarState(e)}toggleSidebarState(){this.sidebarState="open"===this.getSidebarState()?"hide":"open",Zo.setLocalSidebarState(this.sidebarState)}getComponent(){return Zo.getLocalComponent()||"month"}setComponent(e){this.component=e,window.location.hash=e,Zo.setLocalComponent(e)}getSidebarState(){return Zo.getLocalSidebarState()||"hide"}setDay(e){this.daySelected=e,Zo.setLocalDay(e)}setMonth(e){this.monthSelected=e,Zo.setLocalMonth(e)}setYear(e){this.yearSelected=e,Zo.setLocalYear(e)}setDate(e,t,o){this.setYear(e),this.setMonth(t),this.setDay(o)}setDateFromDateObj(e){this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setDateSelected(e){this.dateSelected=e,Zo.setLocalDateSelected(e)}setPrevDay(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()-1);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setPrevWeek(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()-7);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setPrevMonth(){const e=new Date(this.getYear(),+this.getMonth()-1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setPrevYear(){this.setYear(this.getYear()-1)}setNextDay(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()+1);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextWeek(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()+7);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextMonth(){const e=new Date(this.getYear(),this.getMonth()+1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextYear(){this.setYear(this.getYear()+1)}getGmt(){return this.gmt}getDateSelected(){return+Zo.getLocalDateSelected()}getDay(){return+Zo.getLocalDay()}getMonth(){return+Zo.getLocalMonth()}getYear(){return+Zo.getLocalYear()||this.date.getFullYear()}getDate(){return new Date(this.getYear(),this.getMonth(),this.getDay())}getDateArray(){return[this.getYear(),this.getMonth(),this.getDay()]}getToday(){return this.date}getWeek(){const e=this.getDate();return e.setDate(e.getDate()-e.getDay()),e}getWeekday(){return this.getDate().getDay()}getWeekArray(){const e=this.getWeek(),t=[];for(let o=0;o<7;o++)o<6?t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate()+o)):t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate()+o,23,59,59,999));return t}getWeekRange(){const{labels:t}=e,o=this.getWeekArray(),[n,s]=[o[0].getMonth(),o[6].getMonth()],[r,a]=[o[0].getDate(),o[6].getDate()];return n===s?`${t.monthsShort[n]} ${r} – ${a}, ${o[0].getFullYear()}`:`${t.monthsShort[n]} ${r} – ${a} ${t.monthsShort[s]}, ${o[1].getFullYear()}`}getWeekNumber(){const e=new Date(Date.UTC(this.getYear(),this.getMonth(),this.getDay()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const t=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-t)/864e5+1)/7)}getMonthName(){const{labels:t}=e;return t.monthsLong[this.getMonth()]}getDaysInMonth(){return new Date(this.getYear(),this.getMonth()+1,0).getDate()}getMonthArrayStart(e,t){const o=[],n=new Date(e,t,1).getDay();for(let s=0;s<n;s++)o.push(new Date(e,t,0-s));return o}getMonthArrayEnd(e,t,o=!1){const n=[];if(o){for(let o=1;o<8;o++)n.push(new Date(e,+t+1,o));return n}{const o=new Date(e,t+1,0).getDay();for(let s=1;s<7-o;s++)n.push(new Date(e,+t+1,s));return n}}getMonthArray(){const e=[];let t=[this.getYear(),this.getMonth()],[o,n]=t;const s=this.getMonthArrayStart(o,n);for(let t=s.length-1;t>=0;t--)e.push(s[t]);[o,n]=t;const r=new Date(o,n+1,0).getDate();for(let t=1;t<=r;t++)e.push(new Date(o,n,t));e.at(-1).setHours(23,59,59,999),[o,n]=t;let a=this.getMonthArrayEnd(o,n);if(28===e.length&&a.length<7){const t=e.at(-1);a=this.getMonthArrayEnd(t.getFullYear(),t.getMonth(),!0)}for(let t=0;t<a.length;t++)t===a.length-1&&a[t].setHours(23,59,59,999),e.push(a[t]);return e}isToday(e){return y(e||this.getDate(),new Date)}}class en{constructor(){this.date=new Date,this.dateSelected=this.date.getDate(),this.daySelected=this.date.getDate(),this.monthSelected=this.date.getMonth(),this.yearSelected=this.date.getFullYear(),this.month=this.getMonth(),this.monthArray=this.getMonthArray()}setDefaults(){const e={pickerYearSelected:[this.yearSelected,this.date.getFullYear(),en.setLocalPickerYear],pickerMonthSelected:[this.monthSelected,this.date.getMonth(),en.setLocalPickerMonth],pickerDaySelected:[this.daySelected,this.date.getDate(),en.setLocalPickerDay],pickerDateSelected:[this.dateSelected,this.date.getDate(),en.setLocalPickerDateSelected]};for(const[t,o]of Object.entries(e))if(null===dt.getItem(t)){const[e,t,n]=o;void 0===this[e]&&(this[e]=t),n(e)}}static getLocalPickerDay(){return+dt.getItem("pickerDaySelected")}static getLocalPickerMonth(){return+dt.getItem("pickerMonthSelected")}static getLocalPickerYear(){return+dt.getItem("pickerYearSelected")}static getLocalPickerDateSelected(){return+dt.getItem("pickerDateSelected")}static setLocalPickerDay(e){dt.setItem("pickerDaySelected",e)}static setLocalPickerMonth(e){dt.setItem("pickerMonthSelected",e)}static setLocalPickerYear(e){dt.setItem("pickerYearSelected",e)}static setLocalPickerDateSelected(e){dt.setItem("pickerDateSelected",e)}setDay(e){this.daySelected=e,en.setLocalPickerDay(e)}setMonth(e){this.monthSelected=e,en.setLocalPickerMonth(e)}setYear(e){this.yearSelected=e,en.setLocalPickerYear(e)}setDateSelected(e){this.dateSelected=e,en.setLocalPickerDateSelected(e)}setDate(e,t,o){this.setYear(e),this.setMonth(t),this.setDay(o)}setDateFromDateObj(e){this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}resetDate(){this.setDate(this.date.getFullYear(),this.date.getMonth(),this.date.getDate())}setPrevMonth(){const e=new Date(this.getYear(),this.getMonth()-1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextMonth(){const e=new Date(this.getYear(),this.getMonth()+1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}getDateSelected(){return+en.getLocalPickerDateSelected()}getDay(){return+en.getLocalPickerDay()}getMonth(){return+en.getLocalPickerMonth()}getYear(){return+en.getLocalPickerYear()}getDate(){return new Date(this.getYear(),this.getMonth(),this.getDay())}getToday(){return this.date}getMonthName(){const{labels:t}=e;return t.monthsLong[this.getMonth()]}getDaysInMonth(){return new Date(this.getYear(),this.getMonth()+1,0).getDate()}getMonthArrayStart(e,t){const o=[],n=new Date(e,t,1).getDay();for(let s=0;s<n;s++)o.push(new Date(e,t,0-s));return o}getMonthArrayEnd(e,t){const o=[],n=new Date(e,t+1,0).getDay();for(let s=1;s<7-n;s++)o.push(new Date(e,+t+1,s));return o}getMonthArray(){const e=[];let t=[this.getYear(),this.getMonth()],[o,n]=t;const s=this.getMonthArrayStart(o,n);for(let t=s.length-1;t>=0;t--)e.push(s[t]);[o,n]=t;for(let t=1;t<=this.getDaysInMonth();t++)e.push(new Date(o,n,t));const r=this.getMonthArrayEnd(o,n);for(let t=0;t<r.length;t++)t===r.length-1&&r[t].setHours(23,59,59,999),e.push(r[t]);return e}}const tn=new Zo,on=new en;tn.setDefaults(),on.setDefaults();const nn=tn;r(nn,ut),function(e,t,n){function a(o){Ve(o,e,n,t)}function i(){zo.classList.contains("hide-sidebar")||(t.setDate(e.getYear(),e.getMonth(),e.getDay()),Ce(e,n,t))}function c(){e.setPrevDay(),a("day"),e.setDateSelected(e.getDay()),i()}function d(){e.setNextDay(),a("day"),e.setDateSelected(e.getDay()),i()}function l(){e.setPrevWeek(),a("week"),i()}function u(){e.setNextWeek(),a("week"),i()}function m(){e.setPrevMonth(),a("month"),i()}function g(){e.setNextMonth(),a("month"),i()}function p(){e.setPrevYear(),a("year"),i()}function h(){e.setNextYear(),a("year"),i()}let y=250;function b(){Ft(e,n,t),To.setAttribute("style","top:5%;left:5%;right:5%;bottom:5%;margin:auto;"),To.classList.remove("hide-form"),No.classList.remove("hide-form-overlay"),n.addActiveOverlay("hide-form-overlay")}function f(){Do(n,e)}function v(){if("hide"===e.getSidebarState())Mo.onclick=b,$o.onclick=null,qo.onclick=null,Uo.onmousedown=null,Jo.onmousedown=null,Ro.onclick=null,setTimeout((()=>{Bo.innerText="",Ho.innerText=""}),100),Qo.classList.remove("container__calendars-sb-active"),zo.classList.add("hide-sidebar"),Mo.classList.remove("hide-toggle--form"),Fo.classList.remove("datetime-inactive"),Oo.removeAttribute("tabindex"),Vo.removeAttribute("style");else{Mo.onclick=null,$o.onclick=b,qo.onclick=f,"list"===e.getComponent()&&(Vo.style.width="100%",Vo.style.marginLeft="0"),Qo.classList.add("container__calendars-sb-active"),zo.classList.remove("hide-sidebar"),Mo.classList.add("hide-toggle--form"),Fo.classList.add("datetime-inactive"),Oo.setAttribute("tabindex","-1");const o=n.getResetDatepickerCallback();null!==o&&(o(),n.setResetDatepickerCallback(null)),t.setDate(+e.getYear(),+e.getMonth(),+e.getDay()),t.setDateSelected(+e.getDay()),zo.classList.contains("hide-sidebar")||(lo(e,n,t),vo(n)),i()}}function w(){if(!e.isToday()&&"list"!==e.getComponent()){const t=new Date;e.setDate(t.getFullYear(),t.getMonth(),t.getDate()),a(e.getComponent()),i()}}function S(t){const o="next"===t,s=o?"left":"right",r={day:{element:()=>document.querySelector(".dayview--header-day__number"),action:o?d:c},week:{element:()=>document.querySelector(".weekview--header"),action:o?u:l},month:{element:()=>Ko,action:o?g:m},year:{element:()=>Xo,action:o?h:p}}[e.getComponent()];r&&function(e,t,o){if(n.getAnimationStatus()){e.classList.contains("weekview--header")||(Qo.style.overflowX="hidden",setTimeout((()=>{Qo.style.overflowX="auto"}),200)),e.classList.remove("transition--"+("left"===t?"right":"left"));const n=`transition--${t}`;e.classList.contains(n)?(o(),y+=250):(e.classList.add(n),setTimeout((()=>{e.classList.remove(n)}),y),o(),y=250)}else o()}("function"==typeof r.element?r.element():r.element,s,r.action)}function k(){Po.classList.remove("selection--active"),jo.style.display="none",jo.classList.add("toggle-options"),Wo.classList.add("toggle-options"),Wo.classList.remove("toggle-animate")}function L(t,o){const n=e.getComponent();"week"===t||"day"===t?(Go.onclick=M,Go.classList.remove("hide-cbt")):(Go.onclick=null,Go.classList.add("hide-cbt")),(t!==n||o)&&(k(),e.setComponent(t),a(t),Wo.setAttribute("data-view-option-active",t),(n||"week"===t)&&i(),document.activeElement.blur())}function _(){Po.classList.add("selection--active"),jo.classList.remove("toggle-options"),jo.style.display="block",Wo.classList.remove("toggle-options"),Wo.classList.add("toggle-animate");Wo.onclick=e=>L(e.target.getAttribute("data-view-option")),jo.onclick=k}const x=s((function(o){switch(o.key.toLowerCase()){case"d":case"1":L("day");break;case"w":case"2":L("week");break;case"m":case"3":L("month");break;case"y":case"4":L("year");break;case"l":case"5":L("list");break;case"s":e.toggleSidebarState(),v();break;case"f":b();break;case"v":(e=>{Po.classList.contains("selection--active")?"v"===e.key.toLowerCase()&&k():_()})(o);break;case"p":S("prev");break;case"n":S("next");break;case"t":w();break;case"a":f();break;case"?":case"/":no(n);break;case"0":{const t=e.getColorScheme(),o=["light","dark","contrast"];e.setColorScheme(o[(o.indexOf(t)+1)%3]),r(e,n);break}case"g":Wt(e,n,t);break;case"+":"hide"===e.getSidebarState()&&(e.toggleSidebarState(),v()),Vt(n,{name:"new category",color:n.getDefaultCtg()[1].color},!1,null);break}}),150),C=s((function(s){s.preventDefault();const r=o(s,".menu"),a=o(s,".btn-today"),i=o(s,".prev"),c=o(s,".next"),d=o(s,".datetime-content"),l=o(s,".h-search"),u=o(s,".settings"),m=o(s,".select__modal");if(r)return e.toggleSidebarState(),void v();a?w():i?S("prev"):c?S("next"):d?function(o){Io.classList.remove("hide-datepicker"),Yo.classList.remove("hide-datepicker-overlay"),t.setDate(e.getYear(),e.getMonth(),e.getDay());const s=o.target.getBoundingClientRect(),r=Number.parseInt(s.left),a=Number.parseInt(r/window.innerWidth*100);Io.setAttribute("style",`left:${a}%;top:12px;`),it(e,n,t,"header")}(s):l?Wt(e,n,t):u?f():m&&_()}),150);let[D,A]=["",""];function E(e){n.getShortcutsStatus()&&(n.hasActiveOverlay()||(D=e.key,"Control"!==D?"Control"!==A||"Control"===D?x(e):A="":A="Control"))}function M(){const t=e.getComponent();"week"!==t&&"day"!==t||(document.querySelector(".cv-svg-on").classList.toggle("hide-cbt"),document.querySelector(".cv-svg-off").classList.toggle("hide-cbt"),"day"===t?document.querySelector(".dayview--header").classList.toggle("dvh-collapse"):(document.querySelector(".weekview--header").classList.toggle("wvh-collapse"),document.querySelector(".weekview__grid").classList.toggle("wvh-body-collapse")))}(()=>{L(e.getComponent(),!0),Po.setAttribute("data-value",`${e.getComponent().slice(0,1).toUpperCase()}`),Eo.setAttribute("data-current-day-of-month",(new Date).getDate()),v(),n.setRenderFormCallback(b);n.setRenderSidebarCallback((()=>{e.setSidebarState("open"),v()})),Ao.onclick=s(C,150),document.addEventListener("keydown",E),function(){const t=new Set(["list","year","month","week","day"]),o=()=>{const o=window.location.hash.slice(1);if(t.has(o))e.getComponent()!==o&&L(o);else{const t=e.getComponent();window.location.hash=t}};window.addEventListener("hashchange",o),document.addEventListener("DOMContentLoaded",o)}()})()}(nn,on,ut)})();