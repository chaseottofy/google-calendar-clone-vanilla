/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function e(e,t){let o;return 60===t&&(t=0,e+=1),0==+e?(e=12,o="am"):e<12?o="am":12===e?o="pm":24===e?(o="am",e-=12):(e-=12,o="pm"),0==+t?`${e}${o}`:`${e}:${t}${o}`}function t(t,o){let[n,s]=t,[a,r]=o,[i,c]=[e(n,a),e(s,r)];return i.slice(-2)===c.slice(-2)&&(i=i.slice(0,-2)),`${i} – ${c}`}const o=function(t,o){let n=Math.floor(+t/4),s=15*+t%60,a=Math.floor((t+o)/4),r=15*(t+o)%60,i=e(n,s),c=e(a,r);return i.slice(-2)===c.slice(-2)&&(i=i.slice(0,-2)),`${i} – ${c}`},n={labels:{monthsLong:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShortLower:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],monthsLongLower:["january","february","march","april","may","june","july","august","september","october","november","december"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysLong:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysNarrow:["S","M","T","W","T","F","S"],numbers:["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen"]},colors:{red:{1:"#DF2A79",2:"#A51955",3:"#73113C",4:"#C20000",5:"#9D0000",6:"#690000",7:"#460000"},orange:{1:"#EE756A",2:"#E84334",3:"#E77C2B",4:"#D56A18",5:"#954A11",6:"#6B350C",7:"#402007"},green:{1:"#1E9E98",2:"#1A8A84",3:"#167671",4:"#115855",5:"#0F4E4B",6:"#09312F",7:"#072726"},blue:{1:"#14489A",2:"#125ab8",3:"#5578D7",4:"#2C52BA",5:"#234295",6:"#1B3375",7:"#142555"},purple:{1:"#42338B",2:"#513FAB",3:"#614E7A",4:"#604793",5:"#49356F",6:"#342650",7:"#271D3C"},grey:{1:"#858F93",2:"#4D5458",3:"#272B2C",4:"#202B31",5:"#2C3C44",6:"#384C56",7:"#516C7B"}}};function s(e){return e instanceof Date&&!Number.isNaN(e)?e:new Date(e)}function a(e){return`${(e=s(e)).getFullYear()}-${e.getMonth()}-${e.getDate()}`}function r(e){return[+e.getFullYear(),+e.getMonth()+1,+e.getDate()]}function i(e,t){return[e,t]=[s(e),s(t)],e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function c(e){let t={year:31536e3,day:86400,hour:3600},o=[];if(0===e)return"now";for(let n in t)if(e>=t[n]){let s=Math.floor(e/t[n]);o.push(s+=s>1?" "+n+"s":" "+n),e%=t[n]}return o.length>1?o.join(", ").replace(/,([^,]*)$/," &$1"):o[0]}function l(e,t,o){const{monthsShort:a}=n.labels;[e,t]=[s(e),s(t)];const[r,i,c]=[e.getDate(),a[e.getMonth()],e.getFullYear()],[l,d,u]=[t.getDate(),a[t.getMonth()],t.getFullYear()];let m=c,g=u;return o&&(m=c.toString().slice(2,4),g=u.toString().slice(2,4)),c===u?i===d?r===l?`${i} ${r} ${c}`:`${i} ${r} – ${l}, ${c}`:`${i} ${r} – ${d} ${l}, ${c}`:`${i} ${r}, ${m} – ${d} ${l}, ${g}`}function d(t,o){[t,o]=[new Date(t),new Date(o)];let n=t.getMinutes(),s=o.getMinutes();s=s%15==0?s:s+(15-s%15),n=n%15==0?n:n+(15-n%15);let a=e(t.getHours(),n),r=e(o.getHours(),s);return a.slice(-2)===r.slice(-2)&&(a=a.slice(0,-2)),`${a} – ${r}`}function u(e,t){return[e,t]=[new Date(e),new Date(t)],e.getTime()<t.getTime()}function m(e){return e instanceof Date&&!Number.isNaN(e)}function g(e,t,o){return e.getAttribute(t).split("-").map(((e,t)=>"month"===o&&1===t?parseInt(e)-1:parseInt(e)))}function h(e,t,o){return e=s(e),new Date(e.getFullYear(),e.getMonth(),e.getDate(),parseInt(t),parseInt(o),1,1)}function p(e,t,o){return[h(e=s(e),t[0],o[0]),h(e,t[1],o[1])]}function y(e,t){[e,t]=[s(e),s(t)];const o=e=>{const t=e.getMinutes();return 0===t?"00":t};return{dateObj:[e,t],minutes:[o(e),o(t)],formatted:[a(e),a(t)]}}function v(e,t){return Math.floor(t.getTime()/1e3)-Math.floor(e.getTime()/1e3)}function f(e,o){const{labels:s}=n;let[a,r]=[e.getFullYear(),o.getFullYear()],[i,l]=[e.getMonth(),o.getMonth()],[d,m]=[e.getDate(),o.getDate()],[g,h]=[e.getHours(),o.getHours()],[p,y]=[e.getMinutes(),o.getMinutes()],f=!1,b=new Date;if(u(e,b)&&(f=!0),a===r){if(i===l){if(d===m){let n=function(e){let t={hour:3600,minute:60},o=[];if(0===e)return"now";for(let n in t)if(e>=t[n]){let s=Math.floor(e/t[n]);o.push(s+=s>1?" "+n+"s":" "+n),e%=t[n]}return o.length>1?o.join(", ").replace(/,([^,]*)$/," &$1"):o[0]}(v(f?b:e,o));return{date:`${s.monthsLong[i]} ${d}, ${a} (${t([g,h],[p,y])})`,time:n}}{let t=c(v(f?b:e,o));return{date:`${s.monthsLong[i]} ${d} – ${m}, ${a}`,time:t}}}{let t=c(v(f?b:e,o));return{date:`${s.monthsShort[i]} ${d} – ${s.monthsShort[l]} ${m}, ${r}`,time:t}}}{let t=c(v(f?b:e,o));return{date:`${s.monthsShort[i]} ${d}, ${a} – ${s.monthsShort[l]} ${m}, ${r}`,time:t}}}class b{constructor(){this.colorScheme="dark",this.component="month",this.sidebarState="hide",this.date=new Date,this.gmt=(new Date).getTimezoneOffset()/60,this.dateSelected=1,this.daySelected=this.date.getDate(),this.monthSelected=this.date.getMonth(),this.yearSelected=this.date.getFullYear(),this.month=this.getMonth(),this.monthArray=this.getMonthArray(),this.week=this.getWeek()}setDateDefaults(){null===localStorage.getItem("yearSelected")&&(void 0===this.yearSelected&&(this.yearSelected=this.date.getFullYear()),b.setLocalYear(this.yearSelected)),null===localStorage.getItem("monthSelected")&&(void 0===this.monthSelected&&(this.monthSelected=this.date.getMonth()),b.setLocalMonth(this.monthSelected)),null===localStorage.getItem("daySelected")&&(void 0===this.daySelected&&(this.daySelected=this.date.getDate()),b.setLocalDay(this.daySelected)),null===localStorage.getItem("dateSelected")&&(void 0===this.dateSelected&&(this.dateSelected=1),b.setLocalDateSelected(this.dateSelected))}setSchemaDefaults(){null===localStorage.getItem("colorScheme")&&(void 0===this.colorScheme&&(this.colorScheme="dark"),b.setLocalColorScheme(this.colorScheme)),null===localStorage.getItem("component")&&(void 0===this.component&&(this.component="month"),b.setLocalComponent(this.component)),null===localStorage.getItem("sidebarState")&&(void 0===this.sidebarState&&(this.sidebarState="hide"),b.setLocalSidebarState(this.sidebarState))}setDefaults(){this.setSchemaDefaults(),this.setDateDefaults()}static getLocalDay(){return void 0===+localStorage.getItem("daySelected")?1:+localStorage.getItem("daySelected")}static getLocalMonth(){return void 0===+localStorage.getItem("monthSelected")?1:+localStorage.getItem("monthSelected")}static getLocalYear(){return void 0===+localStorage.getItem("yearSelected")?1:+localStorage.getItem("yearSelected")}static getLocalDateSelected(){return+localStorage.getItem("dateSelected")}static getLocalComponent(){return localStorage.getItem("component")}static getLocalColorScheme(){return localStorage.getItem("colorScheme")}static getLocalSidebarState(){return localStorage.getItem("sidebarState")}static setLocalDay(e){localStorage.setItem("daySelected",e)}static setLocalMonth(e){localStorage.setItem("monthSelected",e)}static setLocalYear(e){localStorage.setItem("yearSelected",e)}static setLocalDateSelected(e){localStorage.setItem("dateSelected",e)}static setLocalComponent(e){localStorage.setItem("component",e)}static setLocalSidebarState(e){localStorage.setItem("sidebarState",e)}static setLocalColorScheme(e){localStorage.setItem("colorScheme",e)}getAllMethodNames(){return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter((e=>"constructor"!==e&&"getStoreStats"!==e))}getColorScheme(){return b.getLocalColorScheme()}setColorScheme(e){this.colorScheme=e,b.setLocalColorScheme(e)}setSidebarState(e){this.sidebarState=e,b.setLocalSidebarState(e)}toggleSidebarState(){this.sidebarState="open"===this.getSidebarState()?"hide":"open",b.setLocalSidebarState(this.sidebarState)}getComponent(){return b.getLocalComponent()||"month"}setComponent(e){this.component=e,b.setLocalComponent(e)}getSidebarState(){return b.getLocalSidebarState()||"hide"}setDay(e){this.daySelected=e,b.setLocalDay(e)}setMonth(e){this.monthSelected=e,b.setLocalMonth(e)}setYear(e){this.yearSelected=e,b.setLocalYear(e)}setDate(e,t,o){this.setYear(e),this.setMonth(t),this.setDay(o)}setDateSelected(e){this.dateSelected=e,b.setLocalDateSelected(e)}setPrevDay(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()-1);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setPrevWeek(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()-7);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setPrevMonth(){const e=new Date(this.getYear(),+this.getMonth()-1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setPrevYear(){this.setYear(this.getYear()-1)}setNextDay(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()+1);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextWeek(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()+7);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextMonth(){const e=new Date(this.getYear(),this.getMonth()+1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextYear(){this.setYear(this.getYear()+1)}getGmt(){return this.gmt}getDateSelected(){return+b.getLocalDateSelected()}getDay(){return+b.getLocalDay()}getMonth(){return+b.getLocalMonth()}getYear(){return+b.getLocalYear()||this.date.getFullYear()}getDate(){return new Date(this.getYear(),this.getMonth(),this.getDay())}getToday(){return this.date}getWeek(){let e=this.getDate();return e.setDate(e.getDate()-e.getDay()),e}getWeekday(){return this.getDate().getDay()}getWeekArray(){let e=this.getWeek(),t=[];for(let o=0;o<7;o++)o<6?t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate()+o)):t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate()+o,23,59,59,999));return t}getWeekRange(){const{labels:e}=n;let t=this.getWeekArray(),[o,s]=[t[0].getMonth(),t[6].getMonth()],[a,r]=[t[0].getDate(),t[6].getDate()];return o===s?`${e.monthsShort[o]} ${a} – ${r}, ${t[0].getFullYear()}`:`${e.monthsShort[o]} ${a} – ${r} ${e.monthsShort[s]}, ${t[1].getFullYear()}`}getWeekNumber(){let e=new Date(Date.UTC(this.getYear(),this.getMonth(),this.getDay()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));let t=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-t)/864e5+1)/7)}getMonthName(){const{labels:e}=n;return e.monthsLong[this.getMonth()]}getDaysInMonth(){return new Date(this.getYear(),this.getMonth()+1,0).getDate()}getMonthArrayStartDay(){return new Date(this.getYear(),this.getMonth(),1).getDay()}getMonthArrayStart(){let e=[],[t,o]=[this.getYear(),this.getMonth()];for(let n=0;n<this.getMonthArrayStartDay();n++)e.push(new Date(t,o,0-n));return e}getMonthArrayEndDay(){return new Date(this.getYear(),this.getMonth()+1,0).getDay()}getMonthArrayEnd(e){let t=[],[o,n]=[this.getYear(),this.getMonth()];if(e){for(let e=1;e<8;e++)t.push(new Date(o,+n+1,e));return t}for(let e=1;e<7-this.getMonthArrayEndDay();e++)t.push(new Date(o,+n+1,e));return t}getMonthArray(){let e=[],t=this.getMonthArrayStart(),o=this.getDaysInMonth(),[n,s]=[this.getYear(),this.getMonth()],a=this.getMonthArrayEnd();for(let o=t.length-1;o>=0;o--)e.push(t[o]);for(let t=1;t<=o;t++)e.push(new Date(n,s,t));e[e.length-1].setHours(23,59,59,999),28===e.length&&a.length<7&&(a=this.getMonthArrayEnd(!0));for(let t=0;t<a.length;t++)t===a.length-1&&a[t].setHours(23,59,59,999),e.push(a[t]);return e}isToday(e){return i(e||this.getDate(),new Date)}}class w{constructor(){this.date=new Date,this.dateSelected=this.date.getDate(),this.daySelected=this.date.getDate(),this.monthSelected=this.date.getMonth(),this.yearSelected=this.date.getFullYear(),this.month=this.getMonth(),this.monthArray=this.getMonthArray()}setDefaults(){null===localStorage.getItem("pickerYearSelected")&&(void 0===this.yearSelected&&(this.yearSelected=this.date.getFullYear()),w.setLocalPickerYear(this.yearSelected)),null===localStorage.getItem("pickerMonthSelected")&&(void 0===this.monthSelected&&(this.monthSelected=this.date.getMonth()),w.setLocalPickerMonth(this.monthSelected)),null===localStorage.getItem("pickerDaySelected")&&(void 0===this.daySelected&&(this.daySelected=this.date.getDate()),w.setLocalPickerDay(this.daySelected)),null===localStorage.getItem("pickerDateSelected")&&(void 0===this.dateSelected&&(this.dateSelected=this.date.getDate()),w.setLocalPickerDateSelected(this.dateSelected))}static getLocalPickerDay(){return+localStorage.getItem("pickerDaySelected")}static getLocalPickerMonth(){return+localStorage.getItem("pickerMonthSelected")}static getLocalPickerYear(){return+localStorage.getItem("pickerYearSelected")}static getLocalPickerDateSelected(){return+localStorage.getItem("pickerDateSelected")}static setLocalPickerDay(e){localStorage.setItem("pickerDaySelected",e)}static setLocalPickerMonth(e){localStorage.setItem("pickerMonthSelected",e)}static setLocalPickerYear(e){localStorage.setItem("pickerYearSelected",e)}static setLocalPickerDateSelected(e){localStorage.setItem("pickerDateSelected",e)}setDay(e){this.daySelected=e,w.setLocalPickerDay(e)}setMonth(e){this.monthSelected=e,w.setLocalPickerMonth(e)}setYear(e){this.yearSelected=e,w.setLocalPickerYear(e)}setDateSelected(e){this.dateSelected=e,w.setLocalPickerDateSelected(e)}setDate(e,t,o){this.setYear(e),this.setMonth(t),this.setDay(o)}setPrevMonth(){const e=new Date(this.getYear(),this.getMonth()-1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextMonth(){const e=new Date(this.getYear(),this.getMonth()+1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}getDateSelected(){return+w.getLocalPickerDateSelected()}getDay(){return+w.getLocalPickerDay()}getMonth(){return+w.getLocalPickerMonth()}getYear(){return+w.getLocalPickerYear()}getDate(){return new Date(this.getYear(),this.getMonth(),this.getDay())}getToday(){return this.date}getMonthName(){const{labels:e}=n;return e.monthsLong[this.getMonth()]}getDaysInMonth(){return new Date(this.getYear(),this.getMonth()+1,0).getDate()}getMonthArrayStartDay(){return new Date(this.getYear(),this.getMonth(),1).getDay()}getMonthArrayStart(){let e=[],[t,o]=[this.getYear(),this.getMonth()];for(let n=0;n<this.getMonthArrayStartDay();n++)e.push(new Date(t,o,0-n));return e}getMonthArrayEndDay(){return new Date(this.getYear(),this.getMonth()+1,0).getDay()}getMonthArrayEnd(){let e=[],[t,o]=[this.getYear(),this.getMonth()];for(let n=1;n<7-this.getMonthArrayEndDay();n++)e.push(new Date(t,+o+1,n));return e}getMonthArray(){let e=[],t=this.getMonthArrayStart();for(let o=t.length-1;o>=0;o--)e.push(t[o]);let[o,n]=[this.getYear(),this.getMonth()];for(let t=1;t<=this.getDaysInMonth();t++)e.push(new Date(o,n,t));let s=this.getMonthArrayEnd();for(let t=0;t<s.length;t++)t===s.length-1&&s[t].setHours(23,59,59,999),e.push(s[t]);return e}}const S=new b,C=new w;S.setDefaults(),C.setDefaults();const L=S;function k(e,t){return e.target.closest(t)}function _(e,t){let o=0,n=0,s=0,a=t;return o="0x"+e[1]+e[2],n="0x"+e[3]+e[4],s="0x"+e[5]+e[6],"rgba("+ +o+","+ +n+","+ +s+","+a+")"}const x=(e,t)=>{let o,n,s;return function(){const a=this,r=arguments;o?(clearTimeout(n),n=setTimeout((function(){Date.now()-s>=t&&(e.apply(a,r),s=Date.now())}),Math.max(t-(Date.now()-s),0))):(e.apply(a,r),s=Date.now(),o=!0)}};function D(e){const t=document.querySelector(".body"),o=document.getElementsByName("color-scheme")[0],n=e.getColorScheme(),s=t.classList.contains("light-mode"),a=t.classList.contains("contrast-mode");(()=>{if("light"===n&&s&&!a||"dark"===n&&!s&&!a||"contrast"===n&&a&&!s)return;"light"===n?(e.setColorScheme("light"),o.setAttribute("content","light"),t.classList.remove("contrast-mode"),t.classList.add("light-mode")):"contrast"===n?(e.setColorScheme("contrast"),o.setAttribute("content","dark"),t.classList.remove("light-mode"),t.classList.add("contrast-mode")):"dark"===n&&(e.setColorScheme("dark"),o.setAttribute("content","dark light"),t.classList.remove("light-mode"),t.classList.remove("contrast-mode"))})()}function A(e,t,o,n,s,a){const[r,i]=[e,t],[c,l]=o,[d,u]=n;let m;s?(m=c-r/2+a/2,e+c+4>=d&&(m=d-r-4)):m=c+r>d?c-r-6:c;let g=l+i>u?u-i-6:l;return m<0&&(m=Math.abs(m)),g<0&&(g=56),[m,g]}class E{constructor(e,t,o,n,s,a){this.category=e,this.completed=t,this.description=o,this.end=n,this.id=Date.now().toString(36)+Math.random().toString(36).substring(2),this.start=s,this.title=a}}class M{constructor(e,t){this.boxes=e,this.boxesTop=t}setAllBoxes(e){this.boxes=e.day,this.boxesTop=e.allDay}addBox(e){this.boxes.push(e)}addBoxTop(e){this.boxesTop.push(e)}getBox(e){return this.boxes.find((t=>t.id===e))}getBoxes(){return this.boxes}getBoxesTop(){return this.boxesTop}getLength(){return this.boxes.length}getBoxesByColumn(e){return this.boxes.filter((t=>+t.coordinates.x===e))}getBoxesByColumnTop(e){return this.boxesTop.filter((t=>+t.coordinates.x===e))}getBoxesTopLengths(){return this.getBoxesTop().reduce(((e,t)=>{let o=new Date(t.start);return e[o.getDay()]?e[o.getDay()]++:e[o.getDay()]=1,e}),{})}getColumnsWithMultipleBoxes(){let e={},t=[];for(const o of this.boxes)e[o.coordinates.x]?(e[o.coordinates.x]++,2===e[o.coordinates.x]&&t.push(o.coordinates.x)):e[o.coordinates.x]=1;return t}getEntriesByTitle(e){return this.boxes.filter((t=>t.title.toLowerCase().includes(e.toLowerCase())))}updateCoordinates(e,t){this.getBox(e).coordinates=t}sortByY(e){return e.sort(((e,t)=>+e.coordinates.y-+t.coordinates.y))}checkForCollision(e){const t=this.getBoxesByColumn(e);let o=[];for(let e=0;e<t.length;e++)for(let n=e+1;n<t.length;n++){const s=t[e],a=t[n];s.coordinates.y<a.coordinates.e&&s.coordinates.e>a.coordinates.y&&(o.includes(s)||o.push(s),o.includes(a)||o.push(a))}return o.sort(((e,t)=>+e.coordinates.y-+t.coordinates.y))}updateStore(e,t,o){const n=this.getBox(t).coordinates;let s=15*+n.y,a=15*+n.e,r=o[+n.x];const i=new Date(r),c=Math.floor(s/60),l=s%60;i.setHours(c),i.setMinutes(l);const d=new Date(r),u=Math.floor(a/60),m=a%60;d.setHours(u),d.setMinutes(m),e.updateEntry(t,{start:i,end:d})}}class ${constructor(e,t){this.boxes=e,this.boxesTop=t}setAllBoxes(e){this.boxes=e.day,this.boxesTop=e.allDay}addBox(e){this.boxes.push(e)}addBoxTop(e){this.boxesTop.push(e)}getBox(e){return this.boxes.find((t=>t.id===e))}getBoxes(){return this.boxes}getBoxesTop(){return this.boxesTop}getAllBoxes(){return[...this.boxes,...this.boxesTop]}getLength(){return this.boxes.length}getBoxesTopLengths(){return this.getBoxesTop().reduce(((e,t)=>{let o=new Date(t.start);return e[o.getDay()]?e[o.getDay()]++:e[o.getDay()]=1,e}),{})}getEntriesByTitle(e){return this.boxes.filter((t=>t.title.toLowerCase().includes(e.toLowerCase())))}updateCoordinates(e,t){this.getBox(e).coordinates=t}getEntriesEndingOnDay(e){return this.boxes.filter((t=>+t.coordinates.e===e))}sortByY(e){return e.sort(((e,t)=>{let o=+e.coordinates.y-+t.coordinates.y;return 0===o?+e.coordinates.e-+t.coordinates.e:o}))}checkForCollision(){const e=this.getBoxes();let t=[];for(let o=0;o<e.length;o++)for(let n=o+1;n<e.length;n++){const s=e[o],a=e[n];s.coordinates.y<a.coordinates.e&&s.coordinates.e>a.coordinates.y&&(t.includes(s)||t.push(s),t.includes(a)||t.push(a))}return t.sort(((e,t)=>+e.coordinates.y-+t.coordinates.y))}updateStore(e,t){const o=this.getBox(t),n=o.coordinates;let s=15*+n.y,a=15*+n.e;const r=new Date(o.start),i=Math.floor(s/60),c=s%60;r.setHours(i),r.setMinutes(c);const l=new Date(o.start);let d=Math.floor(a/60),u=a%60;24===d&&(d=23,u=59),l.setHours(d),l.setMinutes(u),e.updateEntry(t,{start:r,end:l})}}const q={0:{shortcut:"0",action:"change app theme"},1:{shortcut:["1","D"],action:"open day view"},2:{shortcut:["2","W"],action:"open week view"},3:{shortcut:["3","M"],action:"open month view"},4:{shortcut:["4","Y"],action:"open year view"},5:{shortcut:["5","L"],action:"open list view"},6:{shortcut:"v",action:"toggle view options"},7:{shortcut:"t",action:"set date to today"},8:{shortcut:"g",action:"enter date manually"},9:{shortcut:"n",action:"next period"},10:{shortcut:"p",action:"previous period"},11:{shortcut:"s",action:"toggle sidebar"},12:{shortcut:"f",action:"open form"},13:{shortcut:"+",action:"open new category form"},14:{shortcut:"a",action:"open settings"},15:{shortcut:["/","?"],action:"open keyboard shortcuts"},16:{shortcut:"e",action:"(entry options) opens form with entry details"},17:{shortcut:"↑",action:["(datepicker) set date to next month/week","(yearpicker) set year to next year"]},18:{shortcut:"↓",action:["(datepicker) set date to prev month/week","(yearpicker) set year to prev year"]},19:{shortcut:"←",action:["(datepicker) set date to prev day","(monthpicker) set month to prev month"]},20:{shortcut:"→",action:["(datepicker) set date to next day","(monthpicker) set month to next month"]},21:{shortcut:"DELETE",action:"(entry options) delete entry"},22:{shortcut:"ENTER",action:["(datepicker) set date to selected date","(form) submit form"]},23:{shortcut:"ESCAPE",action:"close any active modal/popup/form"}};class T{constructor(){this.store=localStorage.getItem("store")?JSON.parse(localStorage.getItem("store")):[],this.userUpload={},this.ctg=localStorage.getItem("ctg")?JSON.parse(localStorage.getItem("ctg")):{default:{color:n.colors.blue[4],active:!0}},this.activeOverlay=new Set,this.handleRenders={sidebar:{callback:null},datepicker:{reset:null},form:{callback:null},reconfig:{callback:null},categories:{callback:null},calendars:{previous:{reset:null},month:{reset:null,resize:null},week:{reset:null,render:null},day:{reset:null},list:{reset:null}}},this.keyboardShortcuts=q,this.keyboardShortcutsStatus=!0,this.animationStatus=!0}setStoreForTesting(e){this.store=e,T.setStore(this.store)}getStoreStats(){return[this.store.length,this.getAllCtgNames().length]}getAllMethodNames(){return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter((e=>"constructor"!==e&&"getStoreStats"!==e))}static getStore(){return JSON.parse(localStorage.getItem("store"))||[]}static getActiveStore(){return JSON.parse(localStorage.getItem("activeStore"))||[]}static getCtg(){return JSON.parse(localStorage.getItem("ctg"))||[]}static getShortcutsStatus(){return JSON.parse(localStorage.getItem("keyboardShortcutsStatus"))}static getAnimationStatus(){return JSON.parse(localStorage.getItem("animationStatus"))}static setStore(e){localStorage.setItem("store",JSON.stringify(e))}static setActiveStore(e){localStorage.setItem("activeStore",JSON.stringify(e))}static setCtg(e){localStorage.setItem("ctg",JSON.stringify(e))}static setShortcutsStatus(e){localStorage.setItem("keyboardShortcutsStatus",JSON.stringify(e))}static setAnimationStatus(e){localStorage.setItem("animationStatus",JSON.stringify(e))}addEntry(e){this.store.push(e),T.setStore(this.store)}createEntry(...e){this.addEntry(new E(...e)),T.setStore(this.store)}deleteEntry(e){this.store=this.store.filter((t=>t.id!==e)),T.setStore(this.store)}getActiveEntries(){const e=this.getActiveCategories();if(0===e.length)return[];return this.store.filter((t=>e?e.indexOf(t.category)>-1:[]))}getEntry(e){return this.store.find((t=>t.id===e))}getEntries(){return this.store||[]}getEntriesByCtg(e){return this.store.filter((t=>t.category===e))}removeLastEntry(){this.store.pop(),T.setStore(this.store)}getLastEntryId(){return this.store[this.store.length-1].id}compareEntries(e,t){for(let o in e)if("id"!==o&&"coordinates"!==o)if("end"===o||"start"===o){if(new Date(e[o]).getTime()-new Date(t[o]).getTime()!=0)return!1}else if(e[o]!==t[o])return!1;return!0}updateEntry(e,t){let o=this.getEntry(e);o=Object.assign(o,t),T.setStore(this.store)}sortBy(e,t,o){if(0===e.length)return[];const n=["description","title","category"].includes(t),s=(e,t)=>"desc"===o?e-t:t-e;return e.sort(((e,o)=>"start"===t?s(new Date(e.start),new Date(o.start)):"end"===t?s(new Date(e.end),new Date(o.end)):n?s(e[t].localeCompare(o[t])):s(e[t],o[t])))}getFirstAndLastEntry(){const e=this.sortBy(this.getActiveEntries(),"start","desc");return void 0===e?[0,0]:[e[0].start,e[e.length-1].end]}generateCoordinates(e,t){[e,t]=[s(e),s(t)];let o=4*e.getHours()+Math.floor(e.getMinutes()/15),n=4*t.getHours()+Math.floor(t.getMinutes()/15)-o,a=o+n;return i(e,t)?{allDay:!1,x:e.getDay(),y:o,h:n,e:a}:{allDay:!0,x:e.getDay(),x2:t.getDay()}}getDayEntries(e){let t=this.getActiveEntries(),o={allDay:[],day:[]};return 0===t.length||t.filter((t=>{let o=new Date(t.start);const[n,s,a]=[o.getFullYear(),o.getMonth(),o.getDate()];return n===e.getFullYear()&&s===e.getMonth()&&a===e.getDate()})).forEach((e=>{e.coordinates=this.generateCoordinates(new Date(e.start),new Date(e.end)),e.coordinates.allDay?o.allDay.push(e):o.day.push(e)})),o}getDayEntriesArray(e){let t=this.getActiveEntries();return 0===t.length?[]:t.filter((t=>{let o=new Date(t.start);const[n,s,a]=[o.getFullYear(),o.getMonth(),o.getDate()];return n===e.getFullYear()&&s===e.getMonth()&&a===e.getDate()}))}getMonthEntries(e){let t=this.getActiveEntries();return 0===t.length?[]:t.filter((t=>{let o=new Date(t.start);return o>=e[0]&&o<=e[e.length-1]}))}getMonthEntryDates(e){let t=this.getMonthEntries(e),o={};return t.forEach((e=>{let t=new Date(e.start);const[n,s,a]=[t.getFullYear(),t.getMonth(),t.getDate()];let r=`${n}-${s}-${a}`;o[r]||(o[r]=[]),o[r].push(e)})),Object.keys(o)}getGroupedMonthEntries(e){return e.reduce(((e,t)=>{let o=new Date(t.start).getDate();return e[o]||(e[o]=[]),e[o].push(t),e}),{})}getWeekEntries(e){let t=this.getActiveEntries(),[o,n]=[e[0],e[6]],s={allDay:[],day:[]};return 0===t.length||t.filter((e=>{let t=new Date(e.start);return t>=o&&t<=n})).forEach((e=>{e.coordinates=this.generateCoordinates(new Date(e.start),new Date(e.end)),e.coordinates.allDay?s.allDay.push(e):s.day.push(e)})),s}getYearEntries(e){let t=this.getActiveEntries();return 0===t.length?[]:t.filter((t=>new Date(t.start).getFullYear()===e))}getGroupedYearEntries(e){let t={};return e.forEach((e=>{let o=new Date(e.start),n=o.getMonth(),s=o.getDate();t[n]||(t[n]={}),t[n][s]||(t[n][s]=[]),t[n][s].push(e)})),t}addNewCtg(e,t){this.hasCtg(e)||(this.ctg[e]={color:t,active:!0},T.setCtg(this.ctg))}deleteCategory(e){this.hasCtg(e)&&(delete this.ctg[e],T.setCtg(this.ctg))}getDefaultCtg(){return Object.entries(this.ctg)[0]}getFirstActiveCategory(){for(let[e,t]of Object.entries(this.ctg))if(t.active)return e;return"default"}getFirstActiveCategoryKeyPair(){for(let[e,t]of Object.entries(this.ctg))if(t.active)return[e,t.color];const e=this.getDefaultCtg();return[e[0],e[1].color]}getActiveCategories(){const e=Object.keys(this.ctg).filter((e=>this.ctg[e].active));return e.length>0?e:[]}getActiveCategoriesKeyPair(){return Object.entries(this.ctg).filter((e=>e[1].active))}getAllCtg(){return this.ctg}getAllCtgColors(){return Object.values(this.ctg).map((e=>e.color))}getAllCtgNames(){return Object.keys(this.ctg)}getCtgColor(e){return this.ctg[e].color}getCtgLength(e){return this.store.filter((t=>t.category===e)).length}hasCtg(e){let t=!1;for(let o in this.ctg)o.toLowerCase()===e.toLowerCase()&&(t=!0);return t}moveCategoryEntriesToNewCategory(e,t,o){(this.hasCtg(e)||!0===o)&&(this.store.forEach((o=>{o.category===e&&(o.category=t)})),T.setStore(this.store)),this.deleteCategory(e)}removeCategoryAndEntries(e){this.hasCtg(e)&&(this.store=this.store.filter((t=>t.category!==e)),T.setStore(this.store)),this.deleteCategory(e)}setCategoryStatus(e,t){this.hasCtg(e)&&(this.ctg[e].active=t,T.setCtg(this.ctg))}setAllCategoryStatusExcept(e,t){for(let o in this.ctg)this.ctg[o].active=o!==e?t:!t;T.setCtg(this.ctg)}updateCtgColor(e,t){this.hasCtg(e)&&(this.ctg[e].color=t,T.setCtg(this.ctg))}getCtgIndex(e){return Object.keys(this.ctg).indexOf(e)}updateCtg(e,t,o){let n=Object.entries(this.ctg);const s=null!==t,a=n.length;!Number.isNaN(parseFloat(e))&&Number.isFinite(e)&&(e=`category ${e}`);for(let a=0;a<n.length;a++){const r=n[a][0];o===r&&(n[a][0]=e,s&&(n[a][1].color=t))}n.length===a?(this.ctg=Object.fromEntries(n),this.moveCategoryEntriesToNewCategory(o,e,!0),T.setCtg(this.ctg)):console.error("something went wrong with category name/color change")}getShortcuts(){return this.keyboardShortcuts}setShortcutsStatus(e){this.keyboardShortcutsStatus=e,T.setShortcutsStatus(e)}getShortcutsStatus(){const e=T.getShortcutsStatus();return null===e||e}getAnimationStatus(){const e=T.getAnimationStatus();return null===e||e}setAnimationStatus(e){this.animationStatus=e,T.setAnimationStatus(e)}addActiveOverlay(e){this.activeOverlay.add(e)}removeActiveOverlay(e){return 0===this.activeOverlay.size?void 0:1===this.activeOverlay.size?void(this.activeOverlay=new Set):void(this.activeOverlay=new Set([...this.activeOverlay].filter((t=>t!==e))))}getActiveOverlay(){return this.activeOverlay}hasActiveOverlay(){return this.activeOverlay.size>0}validateUserUpload(e){return console.log(e),!0}setUserUpload(e){this.userUpload=e}getUserUpload(){return this.userUpload}setFormRenderHandle(e,t){this.handleRenders.calendars[e].render=t}setFormResetHandle(e,t){this.handleRenders.calendars[e].reset=t}setRenderFormCallback(e){this.handleRenders.form.callback=e}setRenderSidebarCallback(e){this.handleRenders.sidebar.callback=e}setResizeHandle(e,t){this.handleRenders.calendars[e].resize=t}setDataReconfigCallback(e){this.handleRenders.reconfig.callback=e}setResetDatepickerCallback(e){this.handleRenders.datepicker.reset=e}setResetPreviousViewCallback(e){this.handleRenders.calendars.previous.reset=e}setRenderCategoriesCallback(e){this.handleRenders.categories.callback=e}getRenderCategoriesCallback(){return this.handleRenders.categories.callback}getResetPreviousViewCallback(){return this.handleRenders.calendars.previous.reset}getResetDatepickerCallback(){return this.handleRenders.datepicker.reset}getDataReconfigCallback(){return this.handleRenders.reconfig.callback}getResizeHandle(e){return void 0===this.handleRenders.calendars[e]?null:this.handleRenders.calendars[e].resize}getFormRenderHandle(e){return void 0===this.handleRenders.calendars[e]?null:this.handleRenders.calendars[e].render}getFormResetHandle(e){return void 0===this.handleRenders.calendars[e].reset?null:this.handleRenders.calendars[e].reset}getRenderFormCallback(){const e=this.handleRenders.form.callback;return null!==e?e:null}getRenderSidebarCallback(){const e=this.handleRenders.sidebar.callback;return null!==e?e:null}}const Y=new T,I=document.querySelector(".body");function F(e,t){const{labels:o}=n,{weekdaysLong:s,monthsLong:a}=o;let r=new Date;document.querySelector(".btn-today").setAttribute("data-tooltip",`${s[r.getDay()]}, ${a[r.getMonth()]} ${r.getDate()}`);const i=document.querySelector(".datetime-content--title"),c=document.querySelector(".header"),l=document.querySelector(".select__modal"),d=document.querySelector(".prev"),u=document.querySelector(".next"),m=document.querySelector(".h-col-2"),g=document.querySelector(".datetime-content"),h=document.querySelector(".prev-next"),p=(e,t)=>{c.style.borderBottom=e,i.textContent=t,m.classList.remove("datetime-inactive"),m.style.paddingRight="0",g.removeAttribute("style"),h.removeAttribute("style")},y=e=>{"list"!==e&&(d.setAttribute("data-tooltip",`prev ${e}`),u.setAttribute("data-tooltip",`next ${e}`)),l.textContent=e[0].toUpperCase()+e.slice(1),l.setAttribute("data-value",e.slice(0,1).toUpperCase())};switch(t){case"day":p("1px solid transparent",`${e.getMonthName()} ${e.getDay()}, ${e.getYear()}`),y("day");break;case"week":p("1px solid transparent",e.getWeekRange()),y("week");break;case"month":p("1px solid transparent",`${e.getMonthName()} ${e.getYear()}`),y("month");break;case"year":p("1px solid transparent",e.getYear()),y("year");break;case"list":y("list"),c.style.borderBottom="1px solid var(--mediumgrey1)",h.setAttribute("style","pointer-events:none;"),m.classList.add("datetime-inactive")}}const O=document.querySelector(".datepicker-sidebar"),B=document.querySelector(".sbdatepicker__body--dates"),N=document.querySelector(".sbdatepicker-title"),R=document.querySelector(".sb-datepicker-change-date"),H=document.querySelector(".sb-yearpicker-title"),P=document.querySelectorAll(".sb-monthpicker__month");function W(e,t,o){o.setDate(e.getYear(),e.getMonth(),e.getDay());let n=o.getMonthArray(),s=t.getMonthEntryDates(n),r=e.getWeek(),i=!1,c=0,[l,d]=[null,null];function u(){const e=o.getMonthName(),t=o.getYear();N.textContent=`${e} ${t}`}function m(t){B.innerText="";const n=e.getComponent();for(let l=0;l<t.length;l++){const d=document.createElement("div"),u=document.createElement("div");d.classList.add("sbdatepicker__body--dates-cell"),u.classList.add("sbdatepicker__body--datename"),t[l].getMonth()!==o.getMonth()&&u.classList.add("sbdatepicker__body--datename-disabled"),"week"===n&&r.getDate()===t[l].getDate()&&r.getMonth()===t[l].getMonth()&&r.getFullYear()===t[l].getFullYear()&&(i=!0),i?(c++,c<=7&&d.classList.add("sbdatepicker__body--dates-week")):d.classList.remove("sbdatepicker__body--dates-week"),e.isToday(t[l])&&(u.setAttribute("class","sbdatepicker__body--datename"),u.classList.add("sbdatepicker__body--datename-today")),t[l].getDate()===e.getDateSelected()&&t[l].getMonth()===o.getMonth()&&(u.classList.contains("sbdatepicker__body--datename-today")||(u.setAttribute("class","sbdatepicker__body--datename"),u.classList.add("sbdatepicker__body--datename-selected"))),u.textContent=t[l].getDate();const m=a(t[l]);u.setAttribute("data-datepicker-date",m),s.includes(m)?u.classList.contains("sbdatepicker__body--datename-selected")||u.classList.contains("sbdatepicker__body--datename-today")||(u.setAttribute("class","sbdatepicker__body--datename"),u.classList.add("sbdatepicker__body--datename-entries")):u.classList.remove("sbdatepicker__body--datename-entries"),d.appendChild(u),B.appendChild(d)}}function g(){n=o.getMonthArray(),s=t.getMonthEntryDates(n),r=e.getWeek(),c=0,i=!1}function h(s,a,r){e.setDate(s,a,r),e.setDateSelected(r),o.setDate(s,a,r),it(e.getComponent(),e,t,o),g(),m(n),u(),n=[]}function p(t,o){e.setDateSelected(o);document.querySelectorAll(".sbdatepicker__body--datename-selected").forEach((e=>{e.classList.remove("sbdatepicker__body--datename-selected")})),t.target.setAttribute("class","sbdatepicker__body--datename"),t.target.classList.add("sbdatepicker__body--datename-selected")}function y(t){const o=t.target;let[n,s,a]=o.getAttribute("data-datepicker-date").split("-").map((e=>parseInt(e)));const r=e.getComponent();if("list"!==r)return"year"===r?e.getYear()!==n?void h(n,s,a):void p(t,a):"month"===r?e.getMonth()!==s?void h(n,s,a):void p(t,a):"week"===r?t.target.parentElement.classList.contains("sbdatepicker__body--dates-week")?void p(t,a):void h(n,s,a):"day"===r?e.isToday(new Date(n,s,a))?void p(t,a):void h(n,s,a):void 0;p(t,a)}function v(){l=o.getMonth(),d=o.getYear(),R.classList.add("show-sbdpcd"),w(null,!0),b(o.getMonth(),!0)}function f(){l===o.getMonth()&&d===o.getYear()||(g(),m(n),u(),n=[]),R.classList.remove("show-sbdpcd")}function b(e,t){const n=e;(t||n!==o.getMonth())&&(o.setMonth(n),P.forEach(((e,t)=>{t===n?e.classList.add("monthpicker__active-month"):e.classList.remove("monthpicker__active-month")})))}function w(e,t){if(t)return void(H.textContent=o.getYear());const n=parseInt(o.getYear())+e;n!=+o.getYear()&&(o.setYear(n),H.textContent=n)}function S(e){const t=k(e,".sbdatepicker__body--datename"),s=k(e,".sbdatepicker-nav--next"),a=k(e,".sbdatepicker-nav--prev"),r=k(e,".sbdatepicker-title"),i=k(e,".sb-close-change-date"),c=k(e,".sb-yearpicker-next"),l=k(e,".sb-yearpicker-prev"),d=k(e,".sb-monthpicker__month");if(t)y(e);else{if(s)return o.setNextMonth(),g(),m(n),u(),void(n=[]);if(a)return o.setPrevMonth(),g(),m(n),u(),void(n=[]);if(t)y(e);else if(r)v();else if(i)f();else if(c)w(1,!1);else if(l)w(-1,!1);else if(d){b(parseInt(e.target.getAttribute("data-sbdp-month")),!1)}else;}}R.classList.remove("show-sbdpcd"),u(),m(n),O.onclick=S,n=null,s=null}const j=document.querySelector(".calendar__yearview"),z=document.querySelector(".sidebar");function U(e,t,o){function s(t,o,s){const{labels:a}=n,r=e.getToday(),[i,c,l]=[+r.getFullYear(),+r.getMonth(),+r.getDate()],d=new Date(t,o,0),u=d.getDate(),m=new Date(t,o,1),g=new Date(t,o+1,0).getDate(),h=m.getDay(),p=document.createElement("div");p.classList.add("yv-monthcell");const y=document.createElement("div");y.classList.add("yv-monthcell__header");const v=document.createElement("div");v.classList.add("yv-monthcell__header--rowone"),v.textContent=a.monthsLong[o],o===e.getMonth()&&t===e.getYear()&&(v.classList.add("yvmht-current"),p.classList.add("cell-current"));const f=document.createElement("div");f.classList.add("yv-monthcell__header--weekdays"),a.weekdaysNarrow.forEach((e=>{const t=document.createElement("div");t.classList.add("yv-monthcell__header--weekday"),t.textContent=e,f.appendChild(t)}));const b=document.createElement("div");return b.classList.add("yv-monthcell__body"),y.append(v,f),function(){const t=(t,o,n,a,r)=>{const d=document.createElement("div");return d.classList.add("yv-monthcell__body--day-wrapper"),null!==o&&d.classList.add(o),r&&(d.setAttribute("data-yv-date",`${n}-${a}-${t}`),d.textContent=t,t===e.getDateSelected()&&a===e.getMonth()&&n===e.getYear()&&d.classList.add("yvmb-selected"),t===l&&a===c&&n===i&&d.classList.add("yvmb-today"),s[t]&&d.classList.add("yvmb-has-entry")),d};for(let e=u-h;e<u;e++)b.appendChild(t(e+1,"yvmb-prevnext",d.getFullYear(),d.getMonth(),!1));for(let e=0;e<g;e++)b.appendChild(t(e+1,null,m.getFullYear(),m.getMonth(),!0))}(),p.append(y,b),p}function a(n){const s=n.target,[a,r,i]=g(s,"data-yv-date",null);e.setDate(a,r,i),e.setDateSelected(i),e.setComponent("day"),it("day",e,t,o),z.classList.contains("hide-sidebar")||(o.setDate(e.getYear(),e.getMonth(),e.getDay()),W(e,t,o))}function r(e){k(e,".yv-monthcell__body--day-wrapper")&&a(e)}function i(){j.innerText="",j.onmousedown=null}!function(){!function(){j.innerText="";let o=e.getYear(),n=t.getGroupedYearEntries(t.getYearEntries(o));for(let e=0;e<12;e++)n[e]?j.appendChild(s(o,e,n[e])):j.appendChild(s(o,e,[]));n=null,o=null}(),j.onmousedown=r,t.setResetPreviousViewCallback(i);const o=document?.querySelector(".cell-current");o&&setTimeout((()=>{j.scrollTo({top:parseInt(o.offsetTop)-100,behavior:"instant"})}),4)}()}const J=new class{constructor(){this.headerOffset=document.querySelector(".header"),this.form=document.querySelector(".entries__form"),this.formBody=document.querySelector(".entries__form--body"),this.formTitleDescription=document.querySelectorAll(".form-body-single"),this.formStartEndCtg=document.querySelectorAll(".form-body-double"),this.formsubmitbtn=document.querySelector(".form--footer__button-save"),this.formCategoryWrapper=document.querySelector(".form--body__category-modal--wrapper"),this.formCategorySelect=document.querySelector(".form--body__category-modal--wrapper-selection"),this.formCategoryWrapperIcon=document.querySelector(".form--body__category-modal--wrapper__color"),this.formCategoryTitle=document.querySelector(".form--body__category-modal--wrapper__title"),this.formCatgoryIcon=document.querySelector(".form--body__category-icon")}setFormStyle(e,t,o,n){o||(o=!1),n||(n=null);let[s,a]=A(this.form.offsetWidth,this.form.offsetHeight,[e,t],[window.innerWidth,window.innerHeight],o,n);this.form.style.left=`${s}px`,this.form.style.top=`${a}px`,this.form.style.margin="0"}setFormSubmitType(e,t){this.formsubmitbtn.setAttribute("data-form-action",e),this.formsubmitbtn.setAttribute("data-form-entry-id",null===t?t="":t)}configFormTitleDescriptionInput(e,t){this.formTitleDescription.forEach(((o,n)=>{o.firstElementChild.value=[e,t][n]}))}setFormDateInput(e,t,o,s){const{labels:a}=n,[r,i]=[e.firstElementChild,e.lastElementChild],c=`${t.getHours()}:${o}`;i.setAttribute("data-form-time",c),i.textContent=`${0==+t.getHours()||12==+t.getHours()?12:t.getHours()%12}:${o}${t.getHours()<12?"am":"pm"}`,r.setAttribute("data-form-date",s),r.textContent=`${a.monthsShort[t.getMonth()]} ${t.getDate()}, ${t.getFullYear()}`}setFormDatepickerDate(e,t,o){o=new Date(o),e.setDateSelected(o.getDate()),t.setDate(e.getYear(),e.getMonth(),e.getDay()),t.setDateSelected(o.getDate())}configFormDateInputs(e){for(let t=0;t<2;t++)this.setFormDateInput(this.formStartEndCtg[t].lastElementChild,e.dateObj[t],e.minutes[t],e.formatted[t])}configFormCategoryInput(e){const[t,o]=e;this.formCategoryWrapper.setAttribute("data-form-category",t),this.formCategorySelect.style.backgroundColor=o,this.formCategoryWrapperIcon.style.backgroundColor=o,this.formCatgoryIcon.firstChild.setAttribute("fill",o),this.formCategoryTitle.textContent=t}getConfig(e){this.setFormSubmitType(e.submission.type,e.submission.id),this.configFormCategoryInput([e.category.name,e.category.color]),this.configFormDateInputs(e.dates.object),"edit"===e.submission.type&&this.configFormTitleDescriptionInput(e.submission.title,e.submission.description)}},Q=J;class X{constructor(){this.submission={},this.category={},this.dates={}}setSubmission(e,t,o,n){this.submission={type:e,id:t||null,title:o||null,description:n||null}}setCategory(e,t){this.category={name:e,color:t}}setDates(e){this.dates={object:e}}getSetup(){return{submission:this.submission,category:this.category,dates:this.dates}}}const V=document.querySelector(".entry__options--overlay"),K=document.querySelector(".entry__options"),G=document.querySelector(".entry__options--header"),Z=document.querySelector(".entry__options-date"),ee=document.querySelector(".entry__options-time"),te=document.querySelector(".eob-title"),oe=document.querySelector(".eob-description"),ne=document.querySelector(".eob-category--icon"),se=document.querySelector(".eob-category");function ae(e,t,o,n,s){function a(){t.getRenderFormCallback()(),s(),l()}function r(){const s=document.createElement("div");s.classList.add("delete-popup");const a=document.createElement("div");a.classList.add("delete-popup__btns");const r=document.createElement("button");r.classList.add("delete-popup__cancel"),r.textContent="Cancel";const i=document.createElement("button");i.classList.add("delete-popup__confirm"),i.textContent="Delete";const c=document.createElement("p");c.classList.add("delete-popup__text"),c.textContent="Are you sure you want to delete this entry?",a.append(r,i),s.append(c,a),K.append(s);const d=()=>{s.remove()};r.onclick=d,i.onclick=()=>{var s;s=o,t.deleteEntry(s.id),l(),it(e.getComponent(),e,t,n),d();const a=t.getFormResetHandle(e.getComponent());null!==a&&a()}}function c(){const o=t.getFormResetHandle(e.getComponent());l(),o()}function l(){[Z,ee,te,oe,se].forEach((e=>{e.innerText=""})),K.classList.add("entry__options--hidden"),V.classList.add("entry__options--hidden"),t.removeActiveOverlay("entry__options--hidden"),oe.parentElement.removeAttribute("style"),K.onclick=null,V.onclick=null,G.focus(),document.removeEventListener("keydown",d)}function d(e){const t=document?.querySelector(".delete-popup");if("Escape"===e.key){if(t)return void t.remove();c()}"e"===e.key.toLowerCase()&&a(),"Delete"===e.key&&r()}function u(e){const t=k(e,".eoi__edit"),o=k(e,".eoi__delete"),n=k(e,".eoi__close");t?a():o?r():n&&c()}!function(){K.classList.remove("entry__options--hidden"),V.classList.remove("entry__options--hidden"),t.addActiveOverlay("entry__options--hidden");const[e,n]=[new Date(o.start),new Date(o.end)];let s=!1;i(e,new Date)&&(s=!0);const a=f(e,n);if(Z.textContent=a.date,null!==a.time)if(void 0===a.time){let e,t=(new Date).getTime()-n.getTime(),o=Math.floor(t/864e5);if(0===o){let o=Math.floor(t/36e5),n=Math.floor((t-1e3*o*60*60)/6e4);0===o?e=1===n?`ended ${n} minute ago`:`ended ${n} minutes ago`:1===o?e=`ended ${o} hour ago`:o>1&&(e=`ended ${o} hours ago`)}else e=1===o?"ended yesterday":`ended ${o} days ago`;ee.textContent=e}else ee.textContent=s?"ending in "+a.time:a.time;te.textContent=o.title,0===o.description?oe.parentElement.style.display="none":oe.textContent=o.description,ne.setAttribute("fill",t.getCtgColor(o.category)),se.textContent=o.category,K.onclick=u,V.onclick=c,document.addEventListener("keydown",d)}()}const re=class{constructor(e){this.flag=e,this.tops=[20,20],this.heights=[18,18]}updateFlag(){this.flag=window.innerWidth<=530||window.innerHeight<=470}getFlag(){return this.flag}getTop(){const[e,t]=this.tops;return this.flag?e:t}getHeight(){const[e,t]=this.heights;return this.flag?e:t}getPrevTop(e){const[t,o]=this.tops;return e===t?o:t}};const ie=()=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("height","20"),e.setAttribute("width","20"),e.setAttribute("fill","var(--white3)");const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M10 16q-.625 0-1.062-.438Q8.5 15.125 8.5 14.5t.438-1.062Q9.375 13 10 13t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 16 10 16Zm0-4.5q-.625 0-1.062-.438Q8.5 10.625 8.5 10t.438-1.062Q9.375 8.5 10 8.5t1.062.438q.438.437.438 1.062t-.438 1.062q-.437.438-1.062.438ZM10 7q-.625 0-1.062-.438Q8.5 6.125 8.5 5.5t.438-1.062Q9.375 4 10 4t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 7 10 7Z"),e.appendChild(t),e},ce=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","24"),t.setAttribute("width","24"),t.setAttribute("viewBox","0 0 24 24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white3)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M15 4V3H9v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5zm2 15H7V6h10v13z");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M9 8h2v9H9zm4 0h2v9h-2z"),t.append(o,n),t},le=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","20"),t.setAttribute("width","20"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white3)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6.062 15 5 13.938 8.938 10 5 6.062 6.062 5 10 8.938 13.938 5 15 6.062 11.062 10 15 13.938 13.938 15 10 11.062Z"),t.appendChild(o),t},de=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","18px"),t.setAttribute("width","18px"),t.setAttribute("viewBox","0 0 24 24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white2)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M0 0h24v24H0z"),o.setAttribute("fill","none");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"),t.append(o,n),t},ue=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","24"),t.setAttribute("width","24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white4)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6 14q-.825 0-1.412-.588Q4 12.825 4 12t.588-1.413Q5.175 10 6 10t1.412.587Q8 11.175 8 12q0 .825-.588 1.412Q6.825 14 6 14Zm6 0q-.825 0-1.412-.588Q10 12.825 10 12t.588-1.413Q11.175 10 12 10t1.413.587Q14 11.175 14 12q0 .825-.587 1.412Q12.825 14 12 14Zm6 0q-.825 0-1.413-.588Q16 12.825 16 12t.587-1.413Q17.175 10 18 10q.825 0 1.413.587Q20 11.175 20 12q0 .825-.587 1.412Q18.825 14 18 14Z"),t.appendChild(o),t},me=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","18px"),t.setAttribute("width","18px"),t.setAttribute("viewBox","0 0 24 24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white3)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M0 0h24v24H0z"),o.setAttribute("fill","none");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"),t.append(o,n),t},ge={boxClasses:{week:{base:"box",ontop:"box-ontop",active:"box-mv-dragactive",temporary:"temporary-box",prepend:"box-"},day:{base:"dv-box",ontop:"dv-box-ontop",active:"dv-box-mv-dragactive",temporary:"dv-temporary-box",prepend:"dv-box-"}},boxAttributes:{week:{updatecoord:["data-box-id","data-start-time","data-time-intervals"],dataIdx:"box-idx",dataId:"data-box-id",dataCol:"data-box-col",prepend:"data-",prepentwo:"data-wv-"},day:{updatecoord:["data-dv-box-id","data-dv-start-time","data-dv-time-intervals"],dataIdx:"data-dv-box-index",dataId:"data-dv-box-id",prepend:"data-dv-",prepentwo:"data-dv-"}},boxGrid:{week:["0.00","20.00","45.00","15.00","50.00","10.00","50.00","25.00","55.00","55.00","70.00","85.00","5.00","30.00","55.00"],day:["0.00","15.00","30.00","45.00","60.00","75.00","10.00","25.00","40.00","55.00","70.00","85.00","5.00","30.00","55.00"]},styles:{newBox:{left:"0%",height:"12.5px",width:"97%"}}};function he(e,t,o){const n=Number.parseFloat(o[t]);e.style.left=t%4==0?"0%":`${n}%`,e.style.width=`${Number.parseFloat(100-n-3)}%`}function pe(e,t,o){const n=document.querySelector(".sidebar"),s=document.querySelector(".resize-overlay");switch(e){case"dragstart":n.classList.contains("hide-sidebar")||0===t.offsetLeft&&n.classList.add("sidebar--dragged-over"),o.addActiveOverlay("hide-resize-overlay"),s.classList.remove("hide-resize-overlay");break;case"dragend":o.removeActiveOverlay("hide-resize-overlay"),n.classList.remove("sidebar--dragged-over"),s.classList.add("hide-resize-overlay"),document.body.style.cursor="default"}}function ye(e,t,o){let[n,s,a]=ge.boxAttributes[t].updatecoord.map((t=>e.getAttribute(t))),r="week"===t?e.getAttribute("data-box-col"):1;o.updateCoordinates(n,{x:parseInt(r),y:parseInt(s),h:parseInt(a),e:parseInt(s)+parseInt(a)})}function ve(e,t){let o=+e.style.top.split("px")[0];o=o>=0?o/12.5:0;let n=+e.style.height.split("px")[0]/12.5,s=o+n,a=ge.boxAttributes[t].prepend;e.setAttribute(`${a}start-time`,o),e.setAttribute(`${a}time-intervals`,n),e.setAttribute(`${a}end-time`,s)}function fe(e,t,n,s){const a=ge.boxClasses[n].base,r=ge.boxAttributes[n].prepend,i=ge.boxAttributes[n].prependtwo,c=t.coordinates,l=document.createElement("div");l.classList.add(a),l.style.backgroundColor=s,l.style.top=12.5*+c.y+"px",l.style.height=12.5*+c.h+"px",l.style.left="calc((100% - 0px) * 0 + 0px)",l.style.width="calc((100% - 4px) * 1)";const d=document.createElement("div");d.classList.add(`${a}__header`);const u=document.createElement("div");u.classList.add(`${a}-title`),u.textContent=t.title,d.appendChild(u);const m=document.createElement("div");m.classList.add(`${a}__content`);const g=document.createElement("span");g.classList.add(`${a}-time`),m.appendChild(g);const h=document.createElement("div");h.classList.add(`${a}-resize-s`),"true"===e.getAttribute(`${i}top`)?(l.setAttribute(`${i}start`,c.x),l.setAttribute(`${i}end`,c.x2)):(l.setAttribute(`${r}start-time`,c.y),l.setAttribute(`${r}time-intervals`,c.h),l.setAttribute(`${r}end-time`,+c.y+ +c.h),"week"===n?(l.setAttribute("data-box-col",c.x),l.setAttribute("box-idx",1)):l.setAttribute("data-dv-box-index",1),g.textContent=o(c.y,+c.h)),l.setAttribute(`${r}box-id`,t.id),l.setAttribute(`${r}box-category`,t.category),l.append(d,m,h),e.appendChild(l)}function be(e,t,o,n){const s=e.cloneNode(!0);s.classList.add(`${ge.boxClasses[n].temporary}`),o?t.insertBefore(s,e.nextElementSibling):t.appendChild(s)}function we(e,t){const o=ge.styles.newBox;return`top:${e}px; left:${o.left}; height:${o.height}; width:${o.width}; background-color:${t};`}function Se(e,t){t.setAttribute("class",ge.boxClasses[e].base),t.style.left="calc((100% - 0px) * 0 + 0px)",t.style.width="calc((100% - 4px) * 1)"}function Ce(e){const t=ge.boxClasses[e].base,o=document.createElement("div"),n=document.createElement("div");return o.classList.add(`${t}__header`),n.classList.add(`${t}-title`),n.textContent="(no title)",o.appendChild(n),o}function Le(e){let t=Math.floor(e/12.5/4),o=15*Math.floor(e/12.5%4);return[t,o,t,+o+15]}function ke(e){return{height:e.style.height,left:e.style.left,width:e.style.width,class:e.getAttribute("class")}}const _e=function(e,t,o){const{numbers:s}=n.labels,a="day"===t?o.checkForCollision():o.checkForCollision(e),{boxClasses:r,boxAttributes:i,boxGrid:c}=ge,l=r[t],{base:d,ontop:u,prepend:m}=l,{dataIdx:g,dataId:h}=i[t],p=c[t];for(let e=0;e<a.length;e++){const t=document.querySelector(`[${h}="${a[e].id}"]`),o=e%15,n=`${m}${s[o]}`,r=`${d} ${n}`;t.setAttribute("class",0===e?r:`${r} ${u}`),t.setAttribute(g,n),he(t,o,p)}},xe=document.querySelector(".resize-overlay"),De=document.querySelector(".sidebar"),Ae=document.querySelector(".monthview--calendar");function Ee(e,t,o){const a=new re(window.innerWidth<=530||window.innerHeight<=470);function r(){De.classList.contains("hide-sidebar")||(o.setDate(e.getYear(),e.getMonth(),e.getDay()),e.setDateSelected(e.getDay()),W(e,t,o))}function c(e){"hide"===e?(xe.classList.add("hide-resize-overlay"),t.removeActiveOverlay("hide-resize-overlay")):(xe.classList.remove("hide-resize-overlay"),t.addActiveOverlay("hide-resize-overlay"))}function l(){e.setComponent("day"),it("day",e,t,o),r()}function d(e,o,n,s){const r=document.createElement("div");r.classList.add("monthview--box"),r.setAttribute("data-monthview-id",e),r.style.backgroundColor=t.getCtgColor(o),r.style.top=`${n}px`,r.style.height=`${a.getHeight()}px`,r.style.width="100%";const i=document.createElement("div");return i.classList.add("monthview--title"),i.textContent=s,r.appendChild(i),r}function u(t,o,s,r){const c=[+t.getDay(),Math.floor(o/7)],l=document.createElement("div");l.classList.add("monthview--day"),l.setAttribute("data-mv-date",r),l.setAttribute("data-mv-idx",o),l.setAttribute("data-mv-coordinates",c);const u=document.createElement("button");u.classList.add("monthview--dayofmonth");const m=document.createElement("div");m.classList.add("monthview--daycontent"),t.getMonth()===e.getMonth()&&t.getDate()===e.getDateSelected()&&u.classList.add("monthview--dayofmonth-selected"),u.appendChild(function(t,o){const{labels:s}=n,a=`${o.getDate()} ${s.monthsShort[o.getMonth()]}`,r=document.createElement("span");return r.classList.add("monthview--daynumber"),o.getMonth()!==e.getMonth()?(r.textContent=a,r.classList.add("monthview--daynumber-prevnext")):1===o.getDate()?r.textContent=a:e.isToday(o)?(r.textContent=o.getDate(),r.classList.add("monthview--daynumber-today"),t.classList.add("monthview--today")):r.textContent=o.getDate(),r}(l,t));let g=0;void 0!==s&&s.length>0&&((s=s.filter((e=>new Date(e.start).getMonth()===t.getMonth()))).length>=6?(m.appendChild(function(e,t){const o=document.createElement("div");o.classList.add("monthview--daygroup"),o.setAttribute("data-mvgrouped-date",e),o.setAttribute("data-mvgrouped-length",t);const n=document.createElement("div");n.classList.add("monthview--grouped");const s=document.createElement("div");return s.classList.add("monthview--daycontent__grouped-title"),s.textContent=`${t} more...`,n.appendChild(s),o.appendChild(n),o}(r,s.length)),m.classList.add("monthview--daycontent-grouped")):s.forEach(((e,o)=>{i(new Date(e.start),t)&&(o>0&&(g+=a.getTop()),m.appendChild(d(e.id,e.category,g,e.title)))}))),l.append(u,m),Ae.appendChild(l)}function m(){Ae.innerText="",Ae.onmousedown=null,Ae.onclick=null}function h(){Ae.innerText="";let o=e.getMonthArray(),n=t.getMonthEntries(o),a=t.getGroupedMonthEntries(n);o.length<42?Ae.classList.add("five-weeks"):Ae.classList.remove("five-weeks");o.forEach(((e,t)=>{var o;u(e,t,(e=>{const t=a[e.getDate()];return void 0!==t?t:[]})(e),`${(o=s(o=e)).getFullYear()}-${o.getMonth()+1}-${o.getDate()}`)})),o=null,n=null,a=null}function p(e){return e.getAttribute("data-mv-coordinates").split(",").map((e=>parseInt(e)))}function f(e,o){let[n,s,a]=g(e,"data-mv-date","month");const r=o.getAttribute("data-monthview-id");let i=t.getEntry(r),[c,l]=[new Date(i.start),new Date(i.end)],d=v(c,new Date(n,s,a)),u=l.getDate()+Math.floor(d/86400)+1;t.updateEntry(r,{start:new Date(n,s,a,c.getHours(),c.getMinutes()),end:new Date(l.getFullYear(),l.getMonth(),u,l.getHours(),l.getMinutes())})}function b(e){e.classList.remove("box-mv-dragactive"),e.style.top="0px",e.style.left="0px",e.style.width="100%",e.style.height=`${a.getHeight()}px`}function w(e,t){if(0!==e.length&&void 0!==e)for(let o=0;o<e.length;o++)void 0===e[o]||null===e[o]||e[o].classList.contains("monthview--box__form-temp")||(e[o].style.top=o*a.getTop()+"px",t?(e[o].classList.add("monthview--box__drop"),setTimeout((()=>{e[o].classList.remove("monthview--box__drop")}),200)):e[o].setAttribute("class","monthview--box"))}function S(n,s){pe("dragstart",Ae,t);const i=Date.now(),c=s.parentElement,l=c.parentElement;l.classList.add("current-drop-zone");const d=document?.querySelector(".more-modal"),u=c.childElementCount,[m,g]=p(l);!function(e){const t=e.cloneNode(!0);Ae.prepend(t),t.classList.add("box-mv-dragactive"),t.focus()}(s);const h=document?.querySelector(".box-mv-dragactive");h.setAttribute("data-box-mvx",m),h.setAttribute("data-box-mvy",g);const v=l.getBoundingClientRect(),S=parseFloat(v.width.toFixed(2)),C=parseFloat(v.height.toFixed(2)),L=parseInt(Ae.offsetLeft),k=s.getBoundingClientRect(),x=parseFloat(k.width),E=a.getHeight();h.style.top=`${c.offsetTop}px`,h.style.width=`${x}px`,h.style.height=`${E}px`,h.style.left=`${c.offsetLeft}px`,h.classList.add("hide-mv-clone");let M=Ae.classList.contains("five-weeks"),[$,q]=[n.clientX,n.clientY],[T,Y]=[0,0],[I,F]=[m,g],O=!1,B=!1;const N=e=>{T=Math.abs(e.clientX-$),Y=Math.abs(e.clientY-q),(T>1||Y>1)&&(B||(d&&d.remove(),document.body.style.cursor="move",B=!0)),(T>3||Y>3)&&(O||(s.style.opacity="0.5",h.classList.remove("hide-mv-clone")),O=!0);let t=Math.floor((e.clientX-Ae.offsetLeft)/S);if(t<0)return void(t=0);if(t>6)return void(t=6);if(I!==t){let e=t*S+L;h.style.left=`${parseFloat(e.toFixed(2))}px`,I=t}let o=Math.floor((e.clientY-Ae.offsetTop)/C);if(o<0)o=0;else if(M&&o>4)o=4;else if(!M&&o>5)o=5;else{if(F!==o){let e=o*C+Ae.offsetTop+16;h.style.top=`${parseFloat(e.toFixed(2))}px`,F=o}document.querySelector(".current-drop-zone")?.classList.remove("current-drop-zone"),document.querySelector(`[data-mv-coordinates="${t},${o}"]`).classList.add("current-drop-zone")}},R=()=>{const n=document?.querySelector(".current-drop-zone"),a=Date.now()-i,[l,v]=p(n);n.classList.remove("current-drop-zone");const S=n.children[1],C=S?.children;let L=!1;if(null==n)return pe("dragend",Ae,t),s.style.opacity="1",h.remove(),L=!1,document.removeEventListener("mousemove",N),void document.removeEventListener("mouseup",R);l===m&&v===g?(L=!1,s.style.opacity="1",h.remove(),d&&d.remove(),a<200&&function(n,s){const a=n.getAttribute("data-monthview-id"),r=t.getEntry(a),i=r.start,c=t.getCtgColor(r.category),l=_(c,.5);s.classList.add("monthview--daycontent__form-temp"),s.style.backgroundColor=l;const d=s.getBoundingClientRect();let[u,m]=A(360,165,[parseInt(d.left),parseInt(d.top)],[window.innerWidth,window.innerHeight]);t.setFormResetHandle("month",D);const g=new X;g.setSubmission("edit",a,r.title,r.description),g.setCategory(r.category,c),g.setDates(y(i,r.end)),Q.setFormDatepickerDate(e,o,i);ae(e,t,r,o,(()=>Q.getConfig(g.getSetup())));const h=document.querySelector(".entry__options");h.style.top=m+"px",h.style.left=u+"px"}(s,n)):(L=!0,void 0!==C[0]?C[0].classList.contains("monthview--daygroup")?(!function(e){const t=e.getAttribute("data-mvgrouped-length");e.setAttribute("data-mvgrouped-length",+t+1),e.firstChild.firstChild.textContent=`${e.getAttribute("data-mvgrouped-length")} more...`}(C[0]),f(n,h),h.remove(),s.remove()):(b(h),h.classList.remove("hide-mv-clone"),S.insertBefore(h,C[0]),f(n,h),s.remove(),C.length<=5?w(C,!0):function(e,t,o,n){const s=document.createElement("div");s.classList.add("monthview--daygroup"),s.setAttribute("data-mvgrouped-date",e.getAttribute("data-mv-date")),s.setAttribute("data-mvgrouped-length",o.length);const a=document.createElement("div");a.classList.add("monthview--grouped");const r=document.createElement("div");r.classList.add("monthview--daycontent__grouped-title"),r.textContent=`${o.length} more...`,t.innerText="",s.appendChild(a),a.appendChild(r),t.appendChild(s),t.classList.add("monthview--daycontent-grouped"),n.remove()}(n,S,C,h)):(b(h),s.remove(),h.classList.remove("hide-mv-clone"),S.appendChild(h),f(n,h),r())),L&&(1===u?r():w(c.children,!0)),pe("dragend",Ae,t),document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",R)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",R)}function C(e){"Escape"===e.key&&L()}function L(){const e=document?.querySelector(".more-modal");e&&e.remove(),c("hide"),document.removeEventListener("keydown",C)}function x(o){const{labels:s}=n,a=function(e){const[o,n,s]=g(e.target.parentElement.parentElement,"data-mv-date","month");return t.getDayEntriesArray(new Date(o,n,s))}(o);c("show");const r=o.target.parentElement.parentElement,i=document.createElement("div");i.classList.add("more-modal"),i.setAttribute("data-mv-modal",r.getAttribute("data-mv-idx"));let d=28*a.length+64;d>400&&(d=400);const u=r.getBoundingClientRect();let m=parseInt(u.width),[h,p]=A(216,d,[parseInt(u.left),parseInt(u.top)],[window.innerWidth,window.innerHeight],!0,m),y=+window.innerHeight-+p-24;i.setAttribute("style",`top: ${p}px; left: ${h}px; width: 216px; height: ${d}px; min-height: 120px; max-height: ${y}px;`);const v=document.createElement("div");v.classList.add("more-modal-header");const f=document.createElement("div");f.classList.add("more-modal-header-title");const b=function(e){const t=e.split("-");return new Date(t[0],t[1]-1,t[2])}(o.target.parentElement.parentElement.getAttribute("data-mv-date")),w=document.createElement("span");w.classList.add("more-modal-header-title-dow"),w.textContent=s.weekdaysShort[b.getDay()].toUpperCase();const S=document.createElement("span");S.classList.add("more-modal-header-title-dayn"),S.textContent=b.getDate();const k=document.createElement("div");k.classList.add("more-modal-header-close"),k.appendChild(le("var(--white3)")),k.setAttribute("data-tooltip","Close"),f.append(k,w,S),v.appendChild(f),i.append(v,function(e){const o=document.createElement("div");o.classList.add("more-modal-content");for(let n=0;n<e.length;n++){const s=e[n],a=document.createElement("div");a.classList.add("more-modal-entry"),a.style.top=22*n+"px",a.style.width="calc(100% - 16px)",a.style.height="20px",a.setAttribute("data-monthview-id",s.id),a.setAttribute("data-mvhidden-category",s.category),a.style.backgroundColor=t.getCtgColor(s.category);const r=document.createElement("div");r.classList.add("more-modal-entry-title"),r.textContent=s.title,a.appendChild(r),o.appendChild(a)}return o}(a)),Ae.appendChild(i),S.addEventListener("click",(()=>{!function(t){c("hide"),e.setDate(t.getFullYear(),t.getMonth(),t.getDate()),l()}(b)}),{once:!0}),xe.addEventListener("click",(()=>{L()}),{once:!0}),document.addEventListener("keydown",C)}function D(){const e=document.querySelector(".monthview--daycontent__form-temp");e&&(e.removeAttribute("style"),e.classList.remove("monthview--daycontent__form-temp"))}function E(){const e=document?.querySelector(".monthview--box__form-temp");if(!e)return;const t=e.parentElement,o=t.parentElement;o.removeAttribute("style"),o.classList.remove("monthview--daycontent__form-temp"),e.remove(),w(t.children,!1)}function M(n,s){if(n.target.classList.contains("monthview--daycontent")){const n=s.parentElement,a=n.getBoundingClientRect(),[r,i]=function(e){let t=new Date;const[o,n,s]=e;let a=new Date(o,n,s);a.setHours(t.getHours()),a.setMinutes(0);let r=new Date(a);return r.setHours(t.getHours()),r.setMinutes(30),[a,r]}(g(n,"data-mv-date","month"));let c,l;if(0===t.getActiveCategories().length){let e=t.getDefaultCtg();c=e[0],l=e[1].color}else{let e=t.getFirstActiveCategoryKeyPair();c=e[0],l=e[1]}!function(e,t,o,n){const s=d("temp",o,0,"( New Entry )");e.scrollTop=0,s.classList.add("monthview--box__form-temp"),t.classList.add("monthview--daycontent__form-temp"),t.style.backgroundColor=n,e.children.length>0?(e.insertBefore(s,e.children[0]),w(e.children,!1)):e.appendChild(s)}(s,n,c,_(l,.5)),t.setFormResetHandle("month",E);const u=t.getRenderFormCallback(),m=new X;m.setSubmission("create",null,null,null),m.setCategory(c,l),m.setDates(y(r,i)),u(),Q.setFormDatepickerDate(e,o,r),Q.getConfig(m.getSetup()),Q.setFormStyle(parseInt(a.right),parseInt(a.top),!1,null)}}function $(t){const o=k(t,".monthview--box"),n=k(t,".monthview--dayofmonth"),s=k(t,".monthview--daygroup"),r=k(t,".more-modal-entry"),i=k(t,".more-modal-header-close");if(o){if(window.innerHeight<=280)return;S(t,t.target)}else{if(n)return t.stopPropagation(),void function(t){const[o,n,s]=g(t.target.parentElement,"data-mv-date","month");e.setDate(o,n,s),e.setDateSelected(s),l()}(t);if(s)x(t);else if(r){if(window.innerHeight<=300)return;!function(e){const t=document.querySelector(".more-modal"),o=parseInt(t.getAttribute("data-mv-modal")),n=document.querySelector(`[data-mv-idx="${o}"]`),s=e.target.cloneNode(!0);s.setAttribute("class","monthview--box"),s.firstChild.setAttribute("class","monthview--title"),s.style.top=`${a.getTop()}px`,s.style.left="0px",s.style.width="100%",n.lastChild.appendChild(s);const r=n.lastChild.firstChild,i=parseInt(r.getAttribute("data-mvgrouped-length"))-1;i<1?(n.lastChild.classList.remove("monthview--daycontent-grouped"),r.remove(),s.style.top="0px"):(r.setAttribute("data-mvgrouped-length",i),r.firstChild.firstChild.textContent=`${i} more...`),S(e,s),s.focus(),t.style.opacity="0.8"}(t)}else i&&L()}}function q(e){if(k(e,".monthview--daycontent")){if(window.innerHeight<=300)return;M(e,e.target)}else;}h(),Ae.onmousedown=$,Ae.onclick=q,t.setResetPreviousViewCallback(m)}const Me=document.querySelector(".sidebar"),$e=document.querySelector(".resize-overlay"),qe=document.querySelector(".weekview"),Te=document.querySelector(".weekview--calendar"),Ye=document.querySelector(".weekview--header"),Ie=document.querySelectorAll(".weekview--header-day__number"),Fe=document.querySelector(".weekview__grid"),Oe=document.querySelector(".weekview--sidebar"),Be=document.querySelectorAll(".allday--col"),Ne=document.querySelectorAll(".week--col");function Re(t,s,a){const r=t.getWeekArray();let i=s.getWeekEntries(r),c=new M(i.day,i.allDay),d=null;function u(){Ne.forEach((e=>{e.innerText=""})),Be.forEach((e=>{e.innerText=""})),qe.onmousedown=null,Ye.onclick=null,Oe.innerText=""}function m(e,t){const o=document.createElement("div");o.classList.add("allday__cell"),o.classList.add("allday__cell--active");const n=document.createElement("div");n.classList.add("wv-ad--taskicons");const s=document.createElement("div");s.classList.add("wv-ad--taskicon"),s.style.backgroundColor="#6F0C2B",n.appendChild(s);const a=document.createElement("div");a.classList.add("wv-ad--celltitle"),a.textContent=`${t} more`;const r=document.createElement("div");r.classList.add("wv-ad--cellexpand"),r.appendChild(me("var(--white3)")),o.append(n,a,r),e.appendChild(o)}function h(e,o,i,c,d){const{labels:u}=n;let m=u.weekdaysLong[c],g=o.getAttribute("data-wvtop-day");const h=document.createElement("div");h.classList.add("allday-modal");const p=o.getBoundingClientRect();let v;v=i.length<4?parseInt(55*i.length)+60:parseInt(220)+60;let[f,b]=A(240,v,[parseInt(p.left),parseInt(p.top)+24],[window.innerWidth,window.innerHeight],!0,Math.floor((window.innerWidth-36-Fe.offsetLeft)/7));f+250>window.innerWidth?h.style.left=window.innerWidth-246+"px":h.style.left=f+"px",h.style.top=b+"px";const w=document.createElement("div");w.classList.add("allday-modal__header");const S=document.createElement("div");S.classList.add("allday-modal-title"),S.textContent=`${m}, ${u.monthsLong[r[c].getMonth()]} ${g}${function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(g)}`;const C=document.createElement("div");C.classList.add("close-allday-modal"),C.appendChild(le("var(--white4"));const L=document.createElement("div");function _(e){"Escape"===e.key&&x()}function x(){h.remove(),h.onmousedown=null,$e.classList.add("hide-resize-overlay"),$e.onclick=null,document.removeEventListener("keydown",_),s.removeActiveOverlay("allday-modal"),d.firstChild.firstChild.style.backgroundColor="#6F0C2B",d.classList.remove("allday-modal__cell--open")}L.classList.add("allday-modal__content"),i.forEach(((e,t)=>{L.appendChild(function(e,t){const o=document.createElement("div");o.classList.add("allday-modal__cell"),o.setAttribute("data-allday-modal-cell",t),o.setAttribute("data-allday-modal-cell-id",e.id),o.style.backgroundColor=s.getCtgColor(e.category);const n=document.createElement("div");n.classList.add("allday-modal__cell-content");const a=document.createElement("div");a.classList.add("allday-modal__cell-action-icons");const r=document.createElement("div");r.classList.add("allday-modal__celltitle"),r.textContent=e.title;const i=document.createElement("div");i.classList.add("allday-modal__cellend-date"),i.textContent=l(new Date(e.start),new Date(e.end));const c=document.createElement("div");return c.classList.add("allday-modal__cellcategory-title"),c.textContent="category: "+e.category,n.append(r,c,i),a.appendChild(ue("var(--taskcolor")),o.append(n,a),o}(e,t))})),w.append(S,C),h.append(w,L),qe.insertBefore(h,document.querySelector(".weekview__top")),s.addActiveOverlay("allday-modal"),$e.onclick=x,h.onmousedown=function(e){const o=k(e,".close-allday-modal"),n=k(e,".allday-modal__cell-action-icons");o?x():n&&function(e,o,n){const r=e.id,i=e.start,c=s.getCtgColor(e.category),l=n.target.getBoundingClientRect();let[d,u]=A(400,165,[parseInt(l.right),n.clientY+28],[window.innerWidth,window.innerHeight]);s.setFormResetHandle("week",o);const m=new X;m.setSubmission("edit",r,e.title,e.description),m.setCategory(e.category,c),m.setDates(y(i,e.end)),Q.setFormDatepickerDate(t,a,i);ae(t,s,e,a,(()=>Q.getConfig(m.getSetup())));const g=document.querySelector(".entry__options");g.style.top=u+"px",g.style.left=d+"px"}(s.getEntry(e.target.parentElement.getAttribute("data-allday-modal-cell-id")),x,e)},document.addEventListener("keydown",_)}function v(e){return document.querySelector(`[data-column-index="${e}"]`)}function f(){document.querySelector(".temp-week-box")?.remove()}function b(e,n){pe("dragstart",qe,s);const i=n.parentElement,l=i.getAttribute("data-column-index");let d=i.getAttribute("data-column-index"),u=!1;n.setAttribute("data-box-col",d);const m=+n.style.top.split("px")[0],g=+n.style.height.split("px")[0];let h=e.pageY-Fe.offsetTop,p=e.pageY,f=e.pageX,[b,w]=[0,0],S=!1;const C=e=>{b=Math.abs(e.clientX-f),w=Math.abs(e.clientY-p),S||(b>3||w>3)&&(S=!0,document.body.style.cursor="move",n.classList.contains("box-ontop")&&(u=!0,Se("week",n)),n.classList.add("box-dragging"),be(n,i,u,"week"),b=0,w=0);const t=Fe.offsetTop,o=e.pageY-t;let s=o-h,a=12.5*Math.round((s+m)/12.5);if(a<0||o<0)return void(a=0);if(a+g>1188)return;n.style.top=`${a}px`;const r=e.pageX-f>0?"right":"left";let c,l;c=+d-1>=0?parseInt(v(d-1).getBoundingClientRect().right):null,l=+d+1<Ne.length?parseInt(v(+d+1).getBoundingClientRect().left):null,"right"===r&&null!==l&&e.pageX>=l&&(v(+d+1).appendChild(n),f=e.pageX,d=+d+1,n.setAttribute("data-box-col",+d)),"left"===r&&null!==c&&e.pageX<=c&&(v(+d-1).appendChild(n),f=e.pageX,d=+d-1,n.setAttribute("data-box-col",+d))};document.addEventListener("mousemove",C),document.addEventListener("mouseup",(function e(){const i=document.querySelector(".temporary-box");if(n.classList.remove("box-dragging"),u&&n.classList.add("box-ontop"),null===i){const e=()=>{pe("dragend",qe,s),n.classList.remove("wv-box-clicked")};n.classList.add("wv-box-clicked");const o=n.getAttribute("data-box-id"),r=s.getEntry(o),i=r.start,c=n.style.backgroundColor,l=n.getBoundingClientRect();let[d,u]=A(400,165,[parseInt(l.left),parseInt(l.top)+56],[window.innerWidth,window.innerHeight],!1);s.setFormResetHandle("week",e);const m=new X;m.setSubmission("edit",o,r.title,r.description),m.setCategory(r.category,c),m.setDates(y(i,r.end)),Q.setFormDatepickerDate(t,a,i);ae(t,s,r,a,(()=>Q.getConfig(m.getSetup())));const g=document.querySelector(".entry__options");window.innerWidth>580?(g.style.top=+u+"px",g.style.left=d+"px"):g.style.top="64px"}else{i.remove(),ve(n,"week");const e=o(+n.getAttribute("data-start-time"),+n.getAttribute("data-time-intervals"));n.setAttribute("data-time",e),n.children[1].children[0].textContent=e,ye(n,"week",c),c.updateStore(s,n.getAttribute("data-box-id"),r),d!==+l&&(Me.classList.contains("hide-sidebar")||(a.setDate(t.getYear(),t.getMonth(),t.getDay()),W(t,s,a)));let u=+n.getAttribute("data-box-col");c.getBoxesByColumn(u).length>1?_e(u,"week",c):n.setAttribute("box-idx","box-one"),pe("dragend",qe,s)}document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",e)}))}function w(o){pe("dragstart",qe,s),document.body.style.cursor="move";const[n,i]=s.getFirstActiveCategoryKeyPair(),c=parseInt(o.target.getAttribute("data-column-index")),l=document.createElement("div");l.setAttribute("class","box box-dragging temp-week-box");const d=Ce("week"),u=document.createElement("div"),m=document.createElement("span"),g=document.createElement("span");u.classList.add("box__content"),m.classList.add("box-time"),g.classList.add("box-time");const h=+Fe.offsetTop,v=parseInt(Fe.scrollTop),b=o.pageY-Fe.offsetTop;let w=12.5*Math.round((b+Math.abs(v))/12.5);l.setAttribute("style",we(w,i));let S={y:+w/12.5,x:c,h:1,e:2},[C,L,k,_]=Le(w);function x(t){let o=t.pageY-h-b,n=12.5*Math.round(o/12.5);n<=12.5&&(n=12.5),n+w>1188&&(n=1187.5-w),l.style.height=`${n}px`,S.h=+n/12.5,S.e=+S.y+S.h,k=Math.floor((+n+ +w)/12.5/4),_=15*Math.floor((+n+ +w)/12.5%4),m.style.wordBreak="break-word",m.textContent=`${e(C,L)} – `,g.textContent=`${e(k,_)}`}u.append(m,g),l.append(d,u),o.target.appendChild(l),document.addEventListener("mousemove",x),document.addEventListener("mouseup",(function e(){const o=p(new Date(r[c]),[C,k],[L,_]);!function(e,o,n,r,i){s.setFormResetHandle("week",f);const c=s.getRenderFormCallback(),l=new X,[d,u,m,g]=i;l.setSubmission(d,u,m,g),"create"===d&&(e.style.opacity=.9);const[h,p]=n;l.setCategory(h,p);const[v,b]=r;l.setDates(y(v,b)),c(),Q.setFormDatepickerDate(t,a,v),Q.getConfig(l.getSetup())}(l,0,[n,i],o,["create",null,null,null]),pe("dragend",qe,s),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",x)}))}function S(e){const t=k(e,".box-resize-s"),n=k(e,".box"),a=k(e,".week--col"),i=k(e,".allday--col");t?function(e,t){pe("dragstart",qe,s),document.body.style.cursor="move";const n=t.parentElement,a=n.getAttribute("data-column-index");t.setAttribute("data-box-col",a);let i=!1,l=ke(t);t.classList.contains("box-ontop")&&(i=!0,Se("week",t)),t.classList.add("box-resizing");const d=t.offsetTop;be(t,n,i,"week");const u=e=>{const o=Fe.offsetTop;let n=Math.abs(parseInt(Te.getBoundingClientRect().top));n==o?n-=o:Te.getBoundingClientRect().top>0?n=o-n:n+=o;const s=12.5*Math.round((e.pageY-d-o+n)/12.5);s<=12.5?t.style.height="12.5px":s+parseInt(t.style.top)>1188||(t.style.height=`${s}px`)},m=()=>{if(document.querySelector(".temporary-box").remove(),t.classList.remove("box-resizing"),i&&t.classList.add("box-ontop"),t.style.height===l.height)i&&(t.setAttribute("class",l.class),t.style.left=l.left,t.style.width=l.width);else{ve(t,"week");const e=+t.getAttribute("data-start-time"),n=+t.getAttribute("data-time-intervals"),a=o(e,n);t.children[1].children[0].textContent=a,ye(t,"week",c);let i=+t.getAttribute("data-box-col");c.getBoxesByColumn(i).length>1&&_e(i,"week",c),c.updateStore(s,t.getAttribute("data-box-id"),r)}pe("dragend",qe,s),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",m)}(0,e.target.parentElement):n?b(e,e.target):a?w(e,e.target):i&&e.target.childElementCount>0&&function(e,t){const o=t.parentElement;t.classList.add("allday-modal__cell--open"),t.firstChild.firstChild.style.backgroundColor="#01635b";const n=parseInt(o.getAttribute("data-allday-column"));let s=c.getBoxesByColumnTop(n);s.length>0&&(h(0,o,s,n,t),$e.classList.remove("hide-resize-overlay"))}(0,e.target)}function C(){!function(){Ne.forEach((e=>{e.innerText=""})),Be.forEach((e=>{e.innerText=""})),c.getBoxes().forEach((e=>{const t=e.coordinates.y;(null===d||t<d)&&(d=t),fe(Ne[+e.coordinates.x],e,"week",s.getCtgColor(e.category))}));const e=c.getBoxesTopLengths();for(const t in e)m(Be[+t],e[t])}();c.getColumnsWithMultipleBoxes().forEach((e=>_e(e,"week",c)))}function L(e){k(e,".weekview--header-day__number")&&function(e){let[o,n,r]=g(e.target,"data-weekview-date");t.setDate(o,n,r),t.setDateSelected(r),t.setComponent("day"),it("day",t,s,a)}(e)}Oe.innerText="",function(){for(let e=0;e<24;e++){let t,o;0===e?(t="",o=""):(t=e,o="AM"),t>12&&(t-=12),e>=12&&(o="PM");const n=document.createElement("span");n.classList.add("sidegrid-cell"),n.textContent=`${t} ${o}`,Oe.appendChild(n)}}(),function(){let e,o;document.querySelector(".wv-gmt").textContent=`UTC ${t.getGmt()}`;let n=[],s=[];const a=t.getToday();let[i,c,l]=[a.getFullYear(),a.getMonth(),a.getDate()];r.forEach((a=>{let[r,d,u]=[a.getFullYear(),a.getMonth(),a.getDate()];n.push(u),s.push(`${r}-${d}-${u}`),u===t.getDateSelected()&&d===t.getMonth()&&(o=u),u===l&&d===c&&r===i&&(e=u)})),n.forEach(((t,n)=>{t===o?Ie[n].classList.add("wvh--selected"):Ie[n].classList.remove("wvh--selected"),t===e?Ie[n].classList.add("wvh--today"):Ie[n].classList.remove("wvh--today"),Ie[n].textContent=t,Ie[n].setAttribute("data-weekview-date",s[n]),Be[n].setAttribute("data-wvtop-day",t)}))}(),C(),qe.onmousedown=S,Ye.onclick=L,s.setResetPreviousViewCallback(u),null!==d&&setTimeout((()=>{Fe.scrollTo({top:Math.abs(12.5*+d-25),behavior:"instant"})}),4)}const He=document.querySelector(".dayview--header-day__title"),Pe=document.querySelector(".dayview--header-day__number"),We=document.querySelector(".dayview--header-day__info"),je=document.querySelector(".dayview--ontop-container"),ze=document.querySelector(".calendar__dayview"),Ue=document.querySelector(".dayview__grid"),Je=document.querySelector(".dayview--main-grid"),Qe=document.querySelector(".dayview--side-grid");function Xe(t,s,a){let r=null,i=null,c=null;function l(e){let t=0,o=100;for(let n=0;n<e.length;n++){let[s,a]=[e[n].coordinates.y,e[n].coordinates.e];a>t&&(t=a),s<o&&(o=s)}let[n,s]=[Math.floor(o/4),Math.floor(t/4)],[a,r]=[o%4*15,t%4*15],[i,c]=[new Date(e[0].start),new Date(e[0].start)];return i.setHours(n),i.setMinutes(a),c.setHours(s),c.setMinutes(r),d(i,c)}function u(){[He,Pe,We].forEach((e=>{e.innerText=""}));let e=(new Date).getTimezoneOffset()/60;e<0&&(e=`+${Math.abs(e)}`),document.querySelector(".dv-gmt").textContent=`UTC ${t.getGmt()}`;let o=t.getDay();Pe.textContent=o,t.isToday()?(Pe.classList.add("dayview--header-day__number--today"),He.style.color="var(--primary1)"):(Pe.classList.remove("dayview--header-day__number--today"),He.removeAttribute("style")),He.textContent=n.labels.weekdaysShort[t.getWeekday()].toUpperCase(),We.textContent=function(){let e=i.getAllBoxes();if(0===e.length)return"no entries";let o,[n,s]=[0,0];for(let a=0;a<e.length;a++){const[r,i,c]=[new Date(e[a].start),new Date(e[a].end),t.getDate()];r.getDate()===c.getDate()&&s++,i.getDate()===c.getDate()&&(n++,o=e[a])}if(1===s&&1===n)return`1 entry ( ${d(new Date(e[0].start),new Date(e[0].end))} )`;if(s>1&&s===n)return`${s} entries starting & ending today ( ${l(i.boxes)} )`;let a="";return a+=s>0?1===s?`${s} entry starting today`:`${s} entries started`:"no entries started",a+=n>0?1===n?` – ${n} ending ( ${d(new Date(o.start),new Date(o.end))} )`:` – ${n} ending ( ${l(i.boxes)} )`:" – no entries ending today",a}()}function m(){Je.innerText="",je.innerText="",Qe.innerText="",We.innerText="",ze.onmousedown=null,r=null,i=null,c=null}function g(e){s.addActiveOverlay("morepopup");const t=document.createElement("aside");t.classList.add("dv--morepopup__overlay");const o=document.createElement("aside");o.classList.add("dv--morepopup"),o.style.left=`${je.offsetLeft}px`,o.style.top=`${je.offsetTop}px`;const n=document.createElement("div");n.classList.add("dv--morepopup__header");const a=document.createElement("span");a.classList.add("dv--morepopup__title"),a.textContent="Events spanning multiple days";const r=document.createElement("span");r.classList.add("dv--morepopup__close"),r.appendChild(le("var(--white3)")),n.append(a,r);const i=document.createElement("div");i.classList.add("dv--morepopup__body");e.forEach((e=>{const t=(e=>{const t=document.createElement("div");t.classList.add("dv--morepopup__entry"),t.style.backgroundColor=`${s.getCtgColor(e.category)}`,t.setAttribute("data-sdvt-id",e.id);const o=document.createElement("span");o.classList.add("dv--morepopup__entry-title"),o.textContent=e.title;const n=document.createElement("span");n.classList.add("dv--morepopup__entry-category"),n.textContent=e.category;const a=document.createElement("span");return a.classList.add("dv--morepopup__entry-time"),a.textContent=f(new Date(e.start),new Date(e.end)).date,t.append(o,n,a),t})(e);i.appendChild(t)}));const c=()=>{t.remove(),o.remove(),s.removeActiveOverlay("morepopup"),document.removeEventListener("keydown",l),t.onclick=null,r.onclick=null,i.onclick=null},l=e=>{"Escape"!==e.key||c()};o.append(n,i),document.body.prepend(t,o),t.onclick=c,r.onclick=c,i.onclick=function(e){k(e,".dv--morepopup__entry")&&h(e,c)},document.addEventListener("keydown",l)}function h(e,o){const n=e.target,r=n.getAttribute("data-sdvt-id"),i=s.getEntry(r),c=i.start,l=s.getCtgColor(i.category),d=n.getBoundingClientRect();let[u,m]=A(400,165,[parseInt(d.left),parseInt(d.top)+24],[window.innerWidth,window.innerHeight],!1);s.setFormResetHandle("day",o||(()=>{console.log("reset")}));const g=new X;g.setSubmission("edit",r,i.title,i.description),g.setCategory(i.category,l),g.setDates(y(c,i.end)),Q.setFormDatepickerDate(t,a,c);ae(t,s,i,a,(()=>Q.getConfig(g.getSetup())));const h=document.querySelector(".entry__options");h.style.top=+m+"px",h.style.left=+u+"px"}function v(e){if(document.createElement("div").classList.add("dv--ontop__grid"),e.length>6){const t=document.createElement("div");return t.classList.add("dv--ontop__more"),t.textContent=`${e.length} more...`,void je.appendChild(t)}!function(e){const t=document.createElement("div");t.classList.add("dayview--ontop__grid"),e.forEach((e=>{const o=document.createElement("div");o.classList.add("dayview--ontop__grid-item"),o.textContent=e.title,o.style.backgroundColor=s.getCtgColor(e.category),o.setAttribute("data-sdvt-id",e.id),t.appendChild(o)})),je.appendChild(t)}(e)}function b(){document.querySelector(".dayview-temp-box")?.remove()}function w(o){pe("dragstart",Ue,s),document.body.style.cursor="move";const[n,r]=s.getFirstActiveCategoryKeyPair(),i=document.createElement("div");i.setAttribute("class","dv-box dv-box-dragging dayview-temp-box");const c=Ce("day"),l=document.createElement("div"),d=document.createElement("span"),u=document.createElement("span");l.classList.add("dv-box__content"),d.classList.add("dv-box-time"),u.classList.add("dv-box-time");const m=parseInt(Ue.offsetTop),g=parseInt(Ue.scrollTop),h=o.pageY-m;let v=12.5*Math.round((h+Math.abs(g))/12.5);i.setAttribute("style",we(v,r));let f={y:+v/12.5,x:1,h:1,e:2},[w,S,C,L]=Le(v),k=0;function _(t){k+=t.movementY;let o=12.5*Math.round((t.pageY+g-v-m)/12.5);o<=12.5&&(o=12.5),o+v>1188&&(o=1187.5-v),i.style.height=`${o}px`,f.h=+o/12.5,f.e=+f.y+f.h,C=function(e,t){return Math.floor((e+t)/12.5/4)}(o,v),L=function(e,t){return 15*Math.floor((e+t)/12.5%4)}(o,v),d.style.wordBreak="break-word",d.textContent=`${e(w,S)} – `,u.textContent=`${e(C,L)}`}l.append(d,u),i.append(c,l),o.target.appendChild(i),document.addEventListener("mousemove",_),document.addEventListener("mouseup",(function o(){k<=20&&(+f.y>=92?(f.y=92,f.e=95,f.h=3,i.style.height="37.5px",i.style.top="1150px",[w,S]=[23,0],[C,L]=[23,45],d.textContent=`${e(w,S)} – `,u.textContent=`${e(C,L)}`):(f.y=4*w,f.e=+f.y+4,f.h=4,i.style.height="50px",i.style.top=12.5*+f.y+"px",S=0,[C,L]=[w+1,0],d.textContent=`${e(w,S)} – `,u.textContent=`${e(C,L)}`));const c=p(new Date(t.getDate()),[w,C],[S,L]);!function(e,o,n,r){s.setFormResetHandle("day",b);const i=s.getRenderFormCallback(),c=new X,[l,d,u,m]=r;c.setSubmission(l,d,u,m),"create"===l&&(e.style.opacity=.9);const[g,h]=o;c.setCategory(g,h);const[p,v]=n;c.setDates(y(p,v)),i(),Q.setFormDatepickerDate(t,a,p),Q.getConfig(c.getSetup())}(i,[n,r],c,["create",null,null,null]),pe("dragend",Ue,s),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",_)}))}function S(){Je.innerText="",je.innerText="",v(i.getBoxesTop()),i.getBoxes().forEach((e=>{const t=e.coordinates.y;(null===c||t<c)&&(c=t),fe(Je,e,"day",s.getCtgColor(e.category))})),_e(null,"day",i)}function C(e){const n=k(e,".dv-box-resize-s"),r=k(e,".dv-box"),c=k(e,".dayview--main-grid"),l=k(e,".dayview--ontop__grid-item"),d=k(e,".dv--ontop__more");n?function(e,t){pe("dragstart",Ue,s),document.body.style.cursor="move";const n=t.parentElement;let a=!1;const r=ke(t);t.classList.contains("dv-box-ontop")&&(a=!0,Se("day",t)),t.classList.add("dv-box-resizing");const c=t.offsetTop,l=parseInt(Ue.offsetTop);be(t,n,a,"day");let d=parseInt(Ue.scrollTop);const m=e=>{let o=12.5*Math.round((e.pageY+d-c-l)/12.5);o<=12.5?t.style.height="12.5px":o+c>1188||(t.style.height=`${o}px`)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",(function e(){if(document.querySelector(".dv-temporary-box").remove(),t.classList.remove("dv-box-resizing"),a&&t.classList.add("dv-box-ontop"),r.height===t.offsetHeight)!function(e,t){e.setAttribute("class",t.class),e.style.left=t.left,e.style.width=t.width}(t,r);else{ve(t,"day");const e=+t.getAttribute("data-dv-start-time"),n=+t.getAttribute("data-dv-time-intervals"),a=o(e,n);t.setAttribute("data-dv-time",a),t.firstChild.nextSibling.firstElementChild.textContent=a,ye(t,"day",i),i.updateStore(s,t.getAttribute("data-dv-box-id")),i.getBoxes().length>1?_e(null,"day",i):t.setAttribute("data-dv-box-index","box-one")}u(),pe("dragend",Ue,s),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",e)}))}(0,e.target.parentElement):r?function(e,n){pe("dragstart",Ue,s);const r=n.parentElement;let c=!1;const l=+n.style.top.split("px")[0],d=+n.style.height.split("px")[0],m=e.pageY-parseInt(Ue.offsetTop),g=+Ue.getBoundingClientRect().top.toFixed(2);let[h,p]=[e.pageX,e.pageY],[v,f]=[0,0],b=!1;const w=e=>{v=Math.abs(e.clientX-h),f=Math.abs(e.clientY-p),b||(v>3||f>3)&&(b=!0,document.body.style.cursor="move",n.classList.contains("dv-box-ontop")&&(c=!0,Se("day",n)),n.classList.add("dv-box-dragging"),be(n,r,c,"day"),v=0,f=0);const t=e.pageY-g;let o=t-m,s=12.5*Math.round((o+l)/12.5);s<0||t<0?s=0:s+d>1188||(n.style.top=`${s}px`)},S=()=>{const e=document?.querySelector(".dv-temporary-box");if(null===e){const e=()=>{pe("dragend",Ue,s),n.classList.remove("dv-box-clicked")};n.classList.add("dv-box-clicked");const o=n.getAttribute("data-dv-box-id"),r=s.getEntry(o),i=r.start,c=n.style.backgroundColor,l=n.getBoundingClientRect();let[d,u]=A(400,165,[parseInt(l.left)+32,parseInt(l.top)+32],[window.innerWidth,window.innerHeight],!1);s.setFormResetHandle("day",e);const m=new X;m.setSubmission("edit",o,r.title,r.description),m.setCategory(r.category,c),m.setDates(y(i,r.end)),Q.setFormDatepickerDate(t,a,i),ae(t,s,r,a,(()=>Q.getConfig(m.getSetup())));const g=document.querySelector(".entry__options");window.innerWidth>580?(g.style.top=+u+"px",g.style.left=d+"px"):g.style.top="64px"}else{e.remove(),n.classList.remove("dv-box-dragging"),c&&n.classList.add("dv-box-ontop"),ve(n,"day");const t=+n.getAttribute("data-dv-start-time"),a=+n.getAttribute("data-dv-time-intervals"),r=o(t,a);n.setAttribute("data-dv-time",r),n.children[1].children[0].textContent=r,ye(n,"day",i),i.updateStore(s,n.getAttribute("data-dv-box-id")),i.getBoxes().length>1?_e(null,"day",i):n.setAttribute("data-dv-box-index","box-one"),u(),pe("dragend",Ue,s)}document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",S)}(e,e.target):c?w(e,e.target):l?h(e):d&&g(i.getBoxesTop())}Qe.innerText="",function(){for(let e=0;e<24;e++){let t,o;0===e?(t="",o=""):(t=e,o="AM"),t>12&&(t-=12),e>=12&&(o="PM");const n=document.createElement("span");n.classList.add("dv-sidegrid--cell"),n.textContent=`${t} ${o}`,Qe.appendChild(n)}}(),r=s.getDayEntries(t.getDate()),i=new $(r.day,r.allDay),S(),u(),ze.onmousedown=C,s.setResetPreviousViewCallback(m),function(){if(null!==c){let e=12.5*+c;setTimeout((()=>{Ue.scrollTo({top:e,behavior:"instant"})}),4)}else{const e=50*(new Date).getHours();setTimeout((()=>{Ue.scrollTo({top:e-25<=0?0:e-25,behavior:"instant"})}),4)}}()}const Ve=document.querySelector(".datetime-content--title"),Ke=document.querySelector(".listview"),Ge=document.querySelector(".listview__body");function Ze(e,o,s){const{labels:a}=n;let i=a.monthsShort.map((e=>e.toUpperCase())),c=a.weekdaysShort.map((e=>e.toUpperCase())),[d,u,m]=r(new Date);function h(e,t,o,n,s){const a=document.createElement("div");a.classList.add("rowgroup-header");const r=document.createElement("div");r.classList.add("rowgroup--header__datenumber"),r.textContent=o,r.setAttribute("data-rgheader-date",n);const i=document.createElement("div");return i.classList.add("rowgroup--header__monthdow"),i.textContent=`${t}, ${e}`,s&&(r.classList.add("top-datenumber"),i.classList.add("top-monthdow")),a.append(r,i),a}function p(e){const n=o.getCtgColor(e.category),[s,a]=[new Date(e.start),new Date(e.end)];let r;if(v(s,a)>86400){let e=0;s.getFullYear()!==a.getFullYear()&&(e=+a.getFullYear()-2e3),r=`${i[a.getMonth()]} ${a.getDate()} ${e>0?e:""}`}else r=`${t([s.getHours(),a.getHours()],[s.getMinutes(),a.getMinutes()])}`;const c=document.createElement("div");c.classList.add("rowgroup--cell"),c.setAttribute("data-rgcell-id",e.id);const l=document.createElement("div");l.classList.add("rowgroup--cell__color"),l.style.backgroundColor=n;const d=document.createElement("div");d.classList.add("rowgroup--cell__time"),d.textContent=r;const u=document.createElement("div");return u.classList.add("rowgroup--cell__title"),u.textContent=e.title,c.append(l,d,u),c}function f(){const e=document?.querySelector(".rowgroup--cell-active");e&&(e.classList.remove("rowgroup--cell-active"),e.removeAttribute("style"))}function b(t){const n=k(t,".rowgroup--header__datenumber"),a=k(t,".rowgroup--cell");n?function(t){let[n,a,r]=g(t,"data-rgheader-date","month");e.setDate(n,a,r),e.setDateSelected(r),"open"===e.getSidebarState()&&(s.setDate(n,a,r),s.setDateSelected(r)),e.setComponent("day"),it("day",e,o,s)}(t.target):a&&function(t){console.log(t);const n=t.getAttribute("data-rgcell-id");t.classList.add("rowgroup--cell-active");const a=o.getEntry(n),r=a.start,i=o.getCtgColor(a.category);t.style.backgroundColor=_(i,.7);const c=t.getBoundingClientRect(),l=t.offsetHeight,d=parseInt(c.top)+l,u=parseInt(c.left);let m=d+12;d+165>window.innerHeight&&(m=d-165-l-12);let g=u;u+150>window.innerWidth&&(g=window.innerWidth-150),o.setFormResetHandle("list",f);const h=new X;h.setSubmission("edit",n,a.title,a.description),h.setCategory(a.category,i),h.setDates(y(r,a.end)),Q.setFormDatepickerDate(e,s,r),ae(e,o,a,s,(()=>Q.getConfig(h.getSetup())));const p=document.querySelector(".entry__options");p.style.top=m+"px",p.style.left=g+"px"}(a)}function w(){Ge.innerText="",Ke.onclick=null,i=null,c=null}(()=>{Ge.innerText="",o.setResetPreviousViewCallback(w);let t=o.getActiveEntries();if(0!==t.length){let n=o.sortBy(t,"start","desc"),a=n.reduce(((e,t)=>{const o=new Date(t.start),[n,s,a]=r(o),i=`${n}-${s}-${a}`;if(n<d)return e;if(n===d){if(s<u)return e;if(s===u&&a<m)return e}return e[i]||(e[i]=[]),e[i].push(t),e}),{}),g=Object.keys(a);const y=g.length;if(0===y)Ve.textContent="Schedule Clear";else{const t=new Date(g[0].split("-").map((e=>parseInt(e))));e.setDate(t.getFullYear(),t.getMonth(),t.getDate()),e.setDateSelected(t.getDate()),"open"===e.getSidebarState&&(s.setDate(t.getFullYear(),t.getMonth(),t.getDate()),s.setDateSelected(t.getDate())),Ve.textContent=l(g[0],g[y-1],!0)}!function(e){let t=1;for(let[o,n]of Object.entries(e)){const e=new Date(o.split("-").map((e=>parseInt(e,10)))),[s,a,r]=[e.getMonth(),e.getDate(),e.getDay()],[l,d]=[c[r],i[s]],u=h(l,d,a,o,1===t);t=null,n.length>1&&n.sort(((e,t)=>new Date(e.end)-new Date(t.end)));const m=document.createElement("div");m.classList.add("rowgroup-content"),n.forEach((e=>{m.append(p(e))}));const g=document.createElement("div");g.classList.add("listview__rowgroup"),g.append(u,m),Ge.appendChild(g)}}(a),Ke.onclick=b,t=null,n=null,a=null,g=null}else Ve.textContent="No Entries to Display"})()}const et=document.querySelector(".yearview"),tt=document.querySelector(".monthview"),ot=document.querySelector(".weekview"),nt=document.querySelector(".dayview"),st=document.querySelector(".listview");let[at,rt]=[null,null];function it(e,t,o,n){at=rt,rt=e,function(){const e=[et,tt,ot,nt,st],t=o.getResetPreviousViewCallback();null!==at&&null!==t&&at!==rt&&t(),e.forEach((e=>{e.classList.add("hide-view")}))}(),document.title=t.getMonthName(),function(e){switch(e){case"day":t.setComponent(e),F(t,e),Xe(t,o,n),nt.classList.remove("hide-view");break;case"week":t.setComponent(e),F(t,e),Re(t,o,n),ot.classList.remove("hide-view");break;case"month":t.setComponent(e),F(t,e),Ee(t,o,n),tt.classList.remove("hide-view");break;case"year":t.setComponent(e),F(t,e),U(t,o,n),et.classList.remove("hide-view");break;case"list":t.setComponent(e),F(t,e),Ze(t,o,n),st.classList.remove("hide-view");break;default:t.setComponent("month"),F(t,"month"),Ee(t,o,n),tt.classList.remove("hide-view")}}(e)}const ct=document.querySelector(".datepicker"),lt=document.querySelector(".datepicker-overlay"),dt=document.querySelector(".datepicker__body--dates"),ut=document.querySelector(".datepicker-title"),mt=document.querySelector(".datepicker-change-date"),gt=document.querySelector(".prev"),ht=document.querySelector(".next"),pt=document.querySelector(".yearpicker-title"),yt=document.querySelectorAll(".monthpicker__month");function vt(e,t,o,n){let s,r=o.getMonthArray(),c=0,l="form"===n?o.getDateSelected():e.getDateSelected(),[d,m]=[null,null];const h=x((function(e){const t=mt.classList.contains("show-dpcd");switch(e.key){case"ArrowDown":t?S(-1,!1):b();break;case"ArrowUp":t?S(1,!1):f();break;case"ArrowRight":t?C("next"):function(){let e=document.querySelector(".datepicker__body--datename-selected");const t=e.parentElement,n=t?.nextElementSibling?.firstElementChild;if(n&&null!=n){e.classList.remove("datepicker__body--datename-selected"),n.classList.add("datepicker__body--datename-selected");let t=n.getAttribute("data-datepicker-date"),s=parseInt(t.split("-")[2]);return void o.setDateSelected(s)}f(),o.setDateSelected(1),e=document.querySelector(".datepicker__body--datename-selected"),e.classList.remove("datepicker__body--datename-selected"),document.querySelectorAll(".datepicker__body--datename")[0].classList.add("datepicker__body--datename-selected")}();break;case"ArrowLeft":t?C("prev"):function(){let e=document.querySelector(".datepicker__body--datename-selected");const t=e.parentElement,n=t?.previousElementSibling?.firstElementChild;if(n&&null!=n)return e.classList.remove("datepicker__body--datename-selected"),void n.classList.add("datepicker__body--datename-selected");{b();const t=o.getDaysInMonth();o.setDateSelected(+t),e=document.querySelector(".datepicker__body--datename-selected"),e.classList.remove("datepicker__body--datename-selected");let n=document.querySelectorAll(".datepicker__body--datename");n[n.length-1].classList.add("datepicker__body--datename-selected")}}();break;case"Enter":if(mt.classList.contains("show-dpcd"))_();else{const e=document.querySelector(".datepicker__body--datename-selected");if(null!==e&&e){v(null,g(e,"data-datepicker-date"))}else v(null,[o.getYear(),o.getMonth(),28])}break;case"Escape":mt.classList.contains("show-dpcd")?_():D()}}),100);function p(){const e=o.getYear(),t=o.getMonthName();ut.textContent=`${t} ${e}`}function y(n){dt.innerText="";let r=t.getMonthEntryDates(n),d=e.getWeek();for(let t=0;t<n.length;t++){const u=document.createElement("div"),m=document.createElement("div");u.classList.add("datepicker__body--dates-cell"),m.classList.add("datepicker__body--datename"),n[t].getMonth()!==o.getMonth()&&m.classList.add("datepicker__body--datename-disabled"),i(n[t],d)&&"week"===e.getComponent()&&(s=!0),s?(c++,c<=7&&u.classList.add("datepicker__body--dates-week")):u.classList.remove("datepicker__body--dates-week"),n[t].getDate()===l&&n[t].getMonth()===o.getMonth()&&(m.classList.contains("datepicker__body--datename-today")||(m.setAttribute("class","datepicker__body--datename"),m.classList.add("datepicker__body--datename-selected"))),e.isToday(n[t])&&(m.setAttribute("class","datepicker__body--datename"),m.classList.add("datepicker__body--datename-today")),m.innerText=n[t].getDate();const g=a(n[t]);m.setAttribute("data-datepicker-date",g),r.includes(g)?m.classList.contains("datepicker__body--datename-today")||m.classList.contains("datepicker__body--datename-selected")||(m.setAttribute("class","datepicker__body--datename"),m.classList.add("datepicker__body--datename-entries")):m.classList.remove("datepicker__body--datename-entries"),u.appendChild(m),dt.appendChild(u)}d=null,r=[]}function v(s,a){let[r,i,c]=[null,null,null];if(null===s)r=a[0],i=a[1],c=a[2];else{let e=g(s.target,"data-datepicker-date");r=e[0],i=e[1],c=e[2]}"form"===n?(!function(t,n,s){o.setDate(t,n,s),e.setDateSelected(s);const a=o.getDate(),r=document.querySelector(".active-form-date");r.setAttribute("data-form-date",`${t}-${n}-${s}`),r.textContent=`${o.getMonthName().slice(0,3)} ${s}, ${t}`;const i=document?.querySelector(".inactive-form-date"),c=i.getAttribute("data-form-date").split("-").map((e=>parseInt(e))),l=new Date(c[0],c[1],c[2]),d=i.getAttribute("data-form-date-type");(u(l,a)&&"end"===d||u(a,l)&&"start"===d)&&(i.setAttribute("data-form-date",`${t}-${n}-${s}`),i.textContent=`${o.getMonthName().slice(0,3)} ${s}, ${t}`)}(r,i,c),D()):function(n,s,a){e.setDate(n,s,a),e.setDateSelected(a),it(e.getComponent(),e,t,o),o.setDate(n,s,a),D()}(r,i,c)}function f(){o.setNextMonth(),r=o.getMonthArray(),y(r),p()}function b(){o.setPrevMonth(),r=o.getMonthArray(),y(r),p()}function w(e,t){const n=e;(t||n!==o.getMonth())&&(o.setMonth(n),yt.forEach(((e,t)=>{t===n?e.classList.add("monthpicker__active-month"):e.classList.remove("monthpicker__active-month")})))}function S(e,t){if(t)return void(pt.textContent=o.getYear());const n=parseInt(o.getYear())+e;n!=+o.getYear()&&(o.setYear(n),pt.textContent=n)}function C(e){const t=document.querySelector(".monthpicker__active-month");let o=parseInt(t.getAttribute("data-dp-month"));w("next"===e?(o+1)%12:0===o?11:o-1)}function L(){d=o.getMonth(),m=o.getYear(),mt.classList.add("show-dpcd"),S(null,!0),w(o.getMonth(),!0)}function _(){d===o.getMonth()&&m===o.getYear()||(r=o.getMonthArray(),y(r),p()),mt.classList.remove("show-dpcd")}function D(){ct.classList.add("hide-datepicker"),lt.classList.add("hide-datepicker-overlay"),_();const o=t.getActiveOverlay().has("hide-form-overlay");!("list"!==e.getComponent())&&o||(gt.removeAttribute("style"),ht.removeAttribute("style")),"form"===n&&document.querySelector(".active-form-date")?.classList.remove("active-form-date"),dt.innerText="",ct.removeAttribute("tabindex"),c=0,d=null,m=null,r=[],lt.onclick=null,ct.onclick=null,document.removeEventListener("keydown",h)}function A(e){const t=k(e,".datepicker__body--datename"),o=k(e,".datepicker-nav--next"),n=k(e,".datepicker-nav--prev"),s=k(e,".datepicker-title"),a=k(e,".close-change-date"),r=k(e,".yearpicker-next"),i=k(e,".yearpicker-prev"),c=k(e,".monthpicker__month");if(t)v(e);else if(o)f();else if(n)b();else if(s)L();else if(a)_();else if(r)S(1,!1);else if(i)S(-1,!1);else if(c){w(parseInt(e.target.getAttribute("data-dp-month")),!1)}else;}p(),y(r),t.setResetDatepickerCallback(D),lt.onclick=D,ct.onclick=A,document.addEventListener("keydown",h),r=[]}class ft{constructor(e,t){this.catname=e,this.catcolor=t,this.errMsg="",this.prevColorIdx=t,this.originalName=e,this.originalColor=t}setName(e){this.catname=e}setColor(e){this.catcolor=e}setPrevColor(e){this.prevColorIdx=e}getName(){return this.catname}getColor(){return this.catcolor}prevColor(){return this.prevColorIdx}setErrMsg(e){this.errMsg=e}getErrMsg(){return this.errMsg}getOriginalName(){return this.originalName}getOriginalColor(){return this.originalColor}}const bt=document.querySelector(".category__form"),wt=document.querySelector(".category__form-overlay"),St=document.querySelector(".category__form-input"),Ct=document.querySelector(".color-picker__title"),Lt=document.querySelector(".color-picker__options"),kt=document.querySelector(".ctg-input--err");function _t(e,t,o,s){const a=de("var(--taskcolor)"),r=Object.values(n.colors),i=new ft(t.name,t.color);function c(e,t){const o=document.createElement("div");return o.classList.add("color-picker--option"),o.style.backgroundColor=e,o.setAttribute("data-color-hex",e),e===t&&(o.append(a),i.setColor(e)),o}function l(t,n){let s=t.trim().replace(/[^a-zA-Z0-9\s]+|\s{2,}/g," ").trim();(function(e){return!Number.isNaN(parseFloat(e))&&Number.isFinite(e)})(s)&&(s=`category ${s}`);const a=i.getOriginalName();let r=!1;if(s.length<1?(i.setErrMsg("Category name is required"),r=!0):e.hasCtg(s)&&(!o||o&&a!==s)&&(i.setErrMsg("Category already exists"),r=!0),r)return kt.classList.remove("hide-ctg-err"),kt.textContent=i.getErrMsg(),void(kt.onclick=()=>{kt.classList.add("hide-ctg-err"),St.focus()});{if(o){if(a===s&&i.getOriginalColor()===n)return void d();a!==s?e.updateCtg(s,n,i.getName()):e.updateCtgColor(a,n)}else e.addNewCtg(s,n);const t=e.getRenderCategoriesCallback();d(),t()}}function d(){null!==s&&s.removeAttribute("style"),Lt.innerText="",bt.classList.add("hide-ctg-form"),wt.classList.add("hide-ctg-form"),St.value="",kt.classList.add("hide-ctg-err"),e.removeActiveOverlay("hide-ctg-form"),bt.onmousedown=null,wt.onclick=null,document.removeEventListener("keydown",u)}function u(e){const t=e.key.toLowerCase();if("escape"===t)return kt.classList.contains("hide-ctg-err")?void d():(kt.classList.add("hide-ctg-err"),void St.focus());"enter"!==t||l(St.value,i.getColor())}function m(e,t){return e.target.closest(t)}function g(e){const t=m(e,".category__form--cancel"),o=m(e,".color-picker--option"),n=m(e,".category__form--submit");t?d():o?function(e,t){const o=e.target,n=o.getAttribute("data-color-hex");if(n===t)return;document.querySelectorAll(".color-picker--option").forEach((e=>{e.innerText=""})),o.appendChild(a),Ct.style.background=n,i.setColor(n)}(e,i.getColor()):n&&l(St.value,i.getColor())}var h;h=i.getColor(),Lt.innerText="",r.forEach((e=>{for(let t=1;t<8;t++)Lt.append(c(e[t],h))})),function(t){if(e.addActiveOverlay("hide-ctg-form"),wt.classList.remove("hide-ctg-form"),bt.classList.remove("hide-ctg-form"),bt.removeAttribute("style"),null!==s){const e=s.getBoundingClientRect(),t=parseInt(e.right),o=parseInt(e.top),[n,a]=A(280,352,[t-20,o-28],[window.innerWidth,window.innerHeight],!1,null);bt.setAttribute("style",`left:${n}px;top:${a}px;`)}else bt.setAttribute("style","left:5%;top:5%;right:5%;margin:auto;");kt.classList.add("hide-ctg-err"),Ct.style.backgroundColor=i.getColor(),setTimeout((()=>{t?St.value=i.getName():St.placeholder="Create new category",St.focus()}),4)}(o),bt.onmousedown=g,wt.onclick=d,document.addEventListener("keydown",u)}const xt=document.querySelector(".sb__categories"),Dt=document.querySelector(".sb__categories--body"),At=document.querySelector(".sb__categories--body-form"),Et=document.querySelector(".sb__categories--header"),Mt=document.querySelector(".sbch-caret");function $t(e,t,o){const n=t.getDefaultCtg()[0];function s(){it(e.getComponent(),e,t,o)}function a(){W(e,t,o)}function r(){At.innerText="";const e=t.getAllCtg(),o=Object.keys(e);for(let t=0;t<o.length;t++){let[n,s,a]=[o[t],e[o[t]].color,e[o[t]].active];i(n,s,a)}}function i(e,t,o){const s=document.createElement("div");s.classList.add("sbch-form--item");const a=document.createElement("div");a.classList.add("sbch-form--item__col");const r=document.createElement("div");r.classList.add("sbch-form--item__checkbox--wrapper");const i=document.createElement("button");let c;i.classList.add("sbch-form--item__checkbox"),i.setAttribute("data-sbch-checked",`${o}`),i.setAttribute("data-sbch-category",e),o?(i.style.backgroundColor=t,c=de("var(--taskcolor0)")):(i.style.backgroundColor="var(--black1)",c=de("none")),i.style.border=`2px solid ${t}`,i.appendChild(c),r.appendChild(i);const l=document.createElement("span");l.classList.add("sbch-form--item__label"),l.textContent=e,a.append(r,l);const d=document.createElement("div");d.classList.add("sbch-form--item__col--actions");const u=document.createElement("button");u.classList.add("sbch-col--actions__delete-icon"),u.setAttribute("data-sbch-category",e),u.setAttribute("data-sbch-color",t);const m=document.createElement("button");m.classList.add("sbch-col--actions__edit-icon"),m.setAttribute("data-sbch-category",e),m.setAttribute("data-sbch-color",t),e.toLowerCase()===n?m.classList.add("sbch-col--actions__edit-icon--immutable"):(u.appendChild(le("var(--white2)")),d.appendChild(u)),m.appendChild(ie("var(--white2)")),d.appendChild(m),s.append(a,d),At.appendChild(s)}function c(e){const o=k(e,".sbch-col__one"),n=k(e,".sbch-col--actions__edit-icon"),i=k(e,".sbch-col--actions__delete-icon"),c=k(e,".sbch-form--item__col"),l=k(e,".sbch-plus");if(o)return Dt.classList.toggle("toggle-category--modal"),Dt.classList.contains("toggle-category--modal")?Mt.classList.remove("sbch-caret--open"):Mt.classList.add("sbch-caret--open"),Et.style.backgroundColor="var(--black0)",void setTimeout((()=>{Et.style.backgroundColor="var(--black1)"}),200);if(n){const o={name:e.target.getAttribute("data-sbch-category"),color:e.target.getAttribute("data-sbch-color")},n=e.target.parentElement.parentElement;return n.style.borderBottom=`2px solid ${o.color}`,void function(e,o){const[n,i]=o;let[c,l]=A(192,128,[e.clientX,parseInt(i.getBoundingClientRect().top)-8],[window.innerWidth,window.innerHeight],!1,null);const d=document.createElement("div");d.classList.add("popup-ctg-options"),d.style.top=`${l}px`,d.style.left=`${c}px`;const u=document.createElement("div");u.classList.add("popup-ctg-options__overlay"),t.addActiveOverlay("popup-ctg-options__overlay");const m=document.createElement("div");m.classList.add("option__open-ctg-edit"),m.textContent="Edit category (name, color)";const g=document.createElement("div");g.classList.add("option__close-other-ctg"),g.textContent="Display this only";const h=document.createElement("div");function p(e,o){document.querySelector(".popup-ctg-options").remove(),document.querySelector(".popup-ctg-options__overlay").remove(),t.removeActiveOverlay("popup-ctg-options__overlay"),e&&o.removeAttribute("style"),document.removeEventListener("keydown",f)}function y(){a(),s(),r()}function v(){p(!0,i)}function f(e){"Escape"===e.key&&v()}h.classList.add("option__open-other-ctg"),h.textContent="Display all but this",d.append(m,g,h),document.body.prepend(u,d),document.addEventListener("keydown",f),m.onclick=function(){_t(t,n,!0,i),p()},u.onclick=v,g.onclick=function(){t.setAllCategoryStatusExcept(n.name,!1),v(),y()},h.onclick=function(){t.setAllCategoryStatusExcept(n.name,!0),v(),y()}}(e,[o,n])}if(i)!function(e){const o=e.target.getAttribute("data-sbch-category"),n=t.getCtgColor(o),i=n,c=t.getCtgLength(o);let l=!1;const d=document.createElement("aside");d.classList.add("popup-delete-ctg__overlay");const u=document.createElement("aside");u.classList.add("popup-delete-ctg"),0===c&&(l=!0,u.classList.add("popup-delete-ctg__no-entries"));const m=1===c?"entry":"entries",g=document.createElement("div");g.classList.add("popup-delete-ctg__header");const h=document.createElement("div");h.classList.add("popup-delete-ctg__title"),h.style.border=`2px solid ${n}`,h.style.backgroundColor=i,h.textContent=`removing – "${o}"`;const p=document.createElement("div");if(p.classList.add("popup-delete-ctg__stats"),p.textContent=`(${c} total ${m} in this category)`,g.append(h,p),u.appendChild(g),!l){const e=document.createElement("div");e.classList.add("popup-delete-ctg__body");const s=document.createElement("div"),a=t.getAllCtgNames();s.classList.add("popup-delete-ctg__options"),s.classList.add("popup-delete-act"),s.style.backgroundColor=i,s.style.border=`2px solid ${n}`;const r=document.createElement("input");r.setAttribute("type","radio"),r.setAttribute("name","popup-delete-ctg__option"),r.setAttribute("id","ctg-move"),r.setAttribute("checked","true");const l=document.createElement("div"),d=document.createElement("span"),g=document.createElement("select");l.classList.add("popup-delete-ctg__option--move"),d.textContent=`Move "${o}" ${m} to `,g.classList.add("popup-delete-ctg__option--move-select");for(let e=0;e<a.length;e++)if(a[e]!==o){const t=document.createElement("option");t.value=a[e],t.textContent=a[e],g.appendChild(t)}l.append(d,g),s.append(r,l);const h=document.createElement("div");h.classList.add("popup-delete-ctg__options"),h.style.border=`2px solid ${n}`;const p=document.createElement("input");p.setAttribute("type","radio"),p.setAttribute("name","popup-delete-ctg__option"),p.setAttribute("id","ctg-delete");const y=document.createElement("div");y.classList.add("popup-delete-ctg__option--remove");const v=document.createElement("span");v.textContent=`Delete "${o}" and ${c} ${m} (irreversible)`;const f=ce(n),b=e=>{"ctg-delete"===e.target.id||"ctg-move"===e.target.id||e.target.classList.contains("popup-delete-ctg__option--move")||e.target.classList.contains("popup-delete-ctg__option--move-select")||(e.target.closest(".popup-delete-ctg__options").querySelector("input").checked=!0,document.querySelectorAll(".popup-delete-ctg__options").forEach((e=>{e.setAttribute("style",`background-color: transparent; border: 2px solid ${n};`),e.classList.remove("popup-delete-act")})),e.target.closest(".popup-delete-ctg__options").setAttribute("style",`background-color: ${i}; border: 2px solid ${n};`),e.target.closest(".popup-delete-ctg__options").classList.add("popup-delete-act"))};y.append(v,f),h.append(p,y),e.append(s,h),u.appendChild(e),s.onclick=b,h.onclick=b}const y=document.createElement("div");y.classList.add("popup-delete-ctg__footer");const v=document.createElement("button");v.textContent="cancel",v.classList.add("popup-delete-ctg__btn--cancel"),v.style.backgroundColor=i;const f=document.createElement("button");f.classList.add("popup-delete-ctg__btn--proceed"),f.textContent="proceed",y.append(v,f),u.appendChild(y),document.body.append(d,u),t.addActiveOverlay("popup-delete-ctg__overlay");const b=e=>{"Escape"===e.key&&w()},w=()=>{u.remove(),d.remove(),t.removeActiveOverlay("popup-delete-ctg__overlay"),document.removeEventListener("keydown",b)};f.onclick=()=>{if(l)t.deleteCategory(o);else{const e=document?.querySelector("input[name='popup-delete-ctg__option']:checked").id,n=document.querySelector(".popup-delete-ctg__option--move-select").value;"ctg-move"===e?t.moveCategoryEntriesToNewCategory(o,n):"ctg-delete"===e&&t.removeCategoryAndEntries(o)}w(),s(),a(),r()},d.onclick=w,v.onclick=w,document.addEventListener("keydown",b)}(e);else if(c)!function(e){let o=e.target.children[0].children[0],n=o.getAttribute("data-sbch-checked"),r=o.getAttribute("data-sbch-category"),i=t.getCtgColor(r);"true"===n?(o.setAttribute("data-sbch-checked","false"),t.setCategoryStatus(r,!1),o.style.backgroundColor="var(--black1)",o.firstChild.setAttribute("fill","none")):(o.setAttribute("data-sbch-checked","true"),t.setCategoryStatus(r,!0),o.style.backgroundColor=i,o.firstChild.setAttribute("fill","var(--taskcolor0)")),a(),s()}(e);else if(l){_t(t,{name:"new category",color:"#2C52BA"},!1,e.target)}else;}(()=>{r();t.setRenderCategoriesCallback((()=>{r(),s()})),xt.onmousedown=c})()}const qt=document.querySelector(".toast");function Tt(e,t){function o(){qt.classList.remove("show-toast"),qt.innerText="",document.onmousedown=null,document.onkeydown=null,Y.removeActiveOverlay("toast")}!function(){qt.innerText="";const n=document.createElement("div");n.classList.add("toast-message"),n.textContent=e;const s=document.createElement("div");s.classList.add("close-toast-icon-wrapper"),s.appendChild(le("var(--white4)"));const a=document.createElement("div");a.classList.add("undo-toast-wrapper");const r=document.createElement("div");r.classList.add("undo-toast-message"),r.textContent="Undo",a.appendChild(r),qt.append(n,a,s),qt.classList.add("show-toast"),Y.addActiveOverlay("toast"),document.onkeydown=function(e){e.key&&o()},document.onmousedown=function(e){if(!k(e,".toast"))return void o();const n=k(e,".undo-toast-wrapper"),s=k(e,".close-toast-icon-wrapper");if(n)return t(),void o();s&&o()}}()}const Yt=document.querySelector(".sidebar"),It=document.querySelector(".datepicker"),Ft=document.querySelector(".datepicker-overlay"),Ot=document.querySelector(".form-overlay"),Bt=document.querySelector(".form-modal-overlay"),Nt=document.querySelector(".entries__form"),Rt=document.querySelector(".entries__form--header"),Ht=document.querySelector(".entry-form"),Pt=document.querySelector(".entries__form--body"),Wt=document.querySelector(".form--body__title-input"),jt=document.querySelector(".form--body__description-input"),zt=document.querySelector(".form--body-start__date"),Ut=document.querySelector(".form--body-end__date"),Jt=document.querySelector(".form--body-start__time"),Qt=document.querySelector(".form--body-end__time"),Xt=document.querySelector(".form--body__category-modal"),Vt=document.querySelector(".close-options-floating__btn"),Kt=document.querySelector(".form--body__category-icon"),Gt=document.querySelector(".form--body__category-modal--wrapper"),Zt=document.querySelector(".form--body__category-modal--wrapper-selection"),eo=document.querySelector(".form--body__category-modal--wrapper__color"),to=document.querySelector(".form--body__category-modal--wrapper__title"),oo=document.querySelector(".form--footer__button-save");function no(e,t,o){let s,r,i,[c,l,d]=[null,null,null];function h(){const e=document?.querySelector(".timepicker"),t=document?.querySelector(".timepicker-overlay"),o=document?.querySelector(".timepicker-times__container"),n=document?.querySelector(".active-form-time");e&&(e.scrollTo(0,0),e.remove(),t.remove(),t.onclick=null,o.onclick=null),n&&n.classList.remove("active-form-time")}function p(){const{labels:e}=n,t=zt.getAttribute("data-form-date").split("-").map((e=>parseInt(e)));let o=new Date(t[0],t[1],t[2]+1),s=`${o.getFullYear()}-${o.getMonth()}-${o.getDate()}`,a=e.monthsShort[o.getMonth()]+" "+o.getDate()+", "+o.getFullYear();Ut.setAttribute("data-form-date",s),Ut.textContent=a,Qt.setAttribute("data-form-time","00:30"),Qt.textContent="12:30am"}function y(e,t,o,n){const s=document.createElement("div");s.classList.add("timepicker"),s.style.top=`${e.y}px`,s.style.left=`${e.x}px`;const a=document.createElement("div");a.classList.add("timepicker-overlay");const r=document.createElement("div");r.classList.add("timepicker-times__container");let i=[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11],c=["am","am","am","am","am","am","am","am","am","am","am","am","pm","pm","pm","pm","pm","pm","pm","pm","pm","pm","pm","pm"],l=["00","15","30","45"],[d,u]=t.split(":").map((e=>parseInt(e))),m=d>12?"pm":"am",g=zt.getAttribute("data-form-date")===Ut.getAttribute("data-form-date"),y=o&&23===d&&45===u;if(d>12&&(d-=12),null!==n&&g){let[e,t]=n.split(":").map((e=>parseInt(e)));if(y&&23===e&&t>=15)return p(),void h();23===e?45===t?p():(i=[12],c=["pm"],t=t.slice(-1)):(i=i.slice(+e+1,i.length),c=c.slice(+e+1,c.length))}let v,f=0;function b(e){const t=e.target.textContent;let n=e.target.getAttribute("data-tp-time");if(o)Qt.textContent=t,Qt.setAttribute("data-form-time",n);else{Jt.textContent=t,Jt.setAttribute("data-form-time",n);let[e,o]=n.split(":").map((e=>+e)),[s,a]=Qt.getAttribute("data-form-time").split(":").map((e=>parseInt(e)));g&&(23===e&&45===o?p():(e>s||e===s&&o>=a)&&function(){const e=Jt.getAttribute("data-form-time").split(":").map((e=>parseInt(e)));let[t,o]=[e[0]<23?e[0]+1:23,e[0]<23?e[1]:45],n=new Date(0,0,0,t,o),s=n.getHours()>12?"pm":"am",a=`${n.getHours()}:${n.getMinutes()}`,r=`${+n.getHours()%12}:${0==+n.getMinutes()?"00":n.getMinutes()}${s}`;Qt.setAttribute("data-form-time",a),Qt.textContent=r}())}h()}i.forEach(((e,t)=>{l.forEach((n=>{const s=document.createElement("div");let a;s.classList.add("timepicker-time"),"am"===c[t]?a=12==+e?`00:${n}`:`${e}:${n}`:"pm"===c[t]&&(a=12===e?`12:${n}`:`${e+12}:${n}`),s.setAttribute("data-tp-time",a),s.textContent=`${e}:${n}${c[t]}`,f++,o||+e==+d&&+n==+u&&("pm"===m&&"pm"===c[t]||"am"===m&&"am"===c[t])&&(s.classList.add("timepicker-time--selected"),v=f),r.appendChild(s)}))}));s.appendChild(r);const[w,S]=e;s.setAttribute("style",`top:${S}px; left:${w}px;`),document.body.prepend(a,s),a.onclick=h,r.onclick=e=>{k(e,".timepicker-time")&&b(e)},o?s.scrollTo(0,0):v>0?s.scrollTo(0,parseInt(40*v)-40):s.scrollTo(0,0)}function v(n,s){n.preventDefault(),"start"===s?(zt.setAttribute("class","form--body-start__date active-form-date"),Ut.setAttribute("class","form--body-end__date inactive-form-date")):(zt.setAttribute("class","form--body-start__date inactive-form-date"),Ut.setAttribute("class","form--body-end__date active-form-date"));const[a,r,i]=g(n.target,"data-form-date"),c=n.target.getBoundingClientRect(),l=parseInt(c.left),d=parseInt(c.bottom);let u=parseInt(c.top);var m,h,p;"end"===s&&(u-=40),window.innerHeight-216<=d&&(u=window.innerHeight-242),It.setAttribute("style",`top:${u}px;left:${l}px;`),m=a,h=r,p=i,Ft.classList.remove("hide-datepicker-overlay"),It.classList.remove("hide-datepicker"),t.addActiveOverlay("hide-datepicker-overlay"),o.setDate(m,h,p),o.setDateSelected(p),vt(e,t,o,"form")}function f(e){return new Date(...e.split("-").map((e=>parseInt(e))))}function b(e){return e.split(":").map((e=>parseInt(e)))}function w(e,t){return e.setHours(t[0]),e.setMinutes(t[1]),e.setSeconds(0),e}function S(e){if(e.target.classList.contains("form-input-error"))e.preventDefault(),e.target.classList.remove("form-input-error"),e.target.removeAttribute("data-form-error-message"),e.target.firstElementChild.focus();else{if(!e.target.classList.contains("form-input-error__custom-input"))return;e.target.classList.remove("form-input-error__custom-input"),e.target.removeAttribute("data-form-error-message"),e.target.focus()}}function C(){t.removeLastEntry(),it(i,e,t,o)}function L(){const e=document?.querySelectorAll(".form-input-error");e&&e.forEach((e=>{e.classList.remove("form-input-error"),e.removeAttribute("data-form-error-message")}))}function _(){It.classList.contains("hide-datepicker")||(It.classList.add("hide-datepicker"),Ft.classList.add("hide-datepicker-overlay")),L(),Ot.onclick=null,Rt.onmousedown=null,Nt.onclick=null,document.removeEventListener("keydown",I),Nt.classList.add("hide-form"),Ot.classList.add("hide-form-overlay"),t.removeActiveOverlay("hide-datepicker-overlay"),t.removeActiveOverlay("hide-form-overlay"),Ht.reset(),jt.value="",Wt.value="",Gt.classList.contains("category-modal-open")&&M();const e=t.getFormResetHandle(i);null!==e&&(e(),t.setFormResetHandle(i,null))}function D(n,s,a,r){if(e.setDate(n.getFullYear(),n.getMonth(),n.getDate()),e.setDateSelected(n.getDate()),it(i,e,t,o),t.getDayEntriesArray(e.getDate()).length<=1&&(Yt.classList.contains("hide-sidebar")||(e.setDateSelected(d),W(e,t,o))),_(),"create"===s)setTimeout((()=>{Tt("Event created",C)}),4);else{if(!t.compareEntries(r,t.getEntry(a))){const n=()=>{!function(n,s){const a=new Date(s.start);t.updateEntry(n,{category:s.category,completed:s.completed,description:s.description,end:new Date(s.end),id:n,start:a,title:s.title}),e.setDate(a.getFullYear(),a.getMonth(),a.getDate()),e.setDateSelected(a.getDate()),it(i,e,t,o)}(a,r)};setTimeout((()=>{Tt("Event updated",n)}),4)}}}function E(e){e.preventDefault();const o=Wt.value,n=jt.value,[s,a]=function(){let e=f(zt.getAttribute("data-form-date")),t=Jt.getAttribute("data-form-time"),[o,n]=b(t),s=f(Ut.getAttribute("data-form-date")),a=Qt.getAttribute("data-form-time"),[r,i]=b(a);return[w(e,[o,n]),w(s,[r,i])]}(),r=Gt.getAttribute("data-form-category"),i=function(e,o,n,s,a){const r={title:!0,description:!0,startDate:!0,endDate:!0,valid:!0};if("string"==typeof e){const t=e.trim().replace(/[^a-zA-Z0-9\s_-]+|\s{2,}/g," ");t.length>50?(r.title="Title must be Less than 50 characters",r.valid=!1):0===t.length&&(r.title="Title cannot be empty",r.valid=!1)}else r.title="Title cannot be empty";o.length>=200&&(r.description="Description must be less than 200 characters",r.valid=!1),t.hasCtg(n)&&n||Gt.setAttribute("data-form-category","default"),s?m(s)||(r.startDate="Start date is not valid",r.valid=!1):(r.startDate="Start date cannot be empty",r.valid=!1),a?m(a)?u(s,a)||(r.endDate="End date must be after start date",r.valid=!1):(r.endDate="End date is not valid",r.valid=!1):(r.endDate="End date cannot be empty",r.valid=!1);let i,c={};for(let e in r)!0!==r[e]&&(c[e]=r[e],i=!0);return!i||c}(o,n,r,s,a);if(!0===i){if("edit"===oo.getAttribute("data-form-action")){const e=oo.getAttribute("data-form-entry-id"),i=JSON.parse(JSON.stringify(t.getEntry(e)));return t.updateEntry(e,{category:r,completed:!1,description:n,end:a,id:e,start:s,title:o}),void D(s,"edit",e,i)}t.createEntry(r,!1,n,a,s,o),D(s,"create",t.getLastEntryId(),null)}else!function(e){Wt.blur();const t={title:Wt,description:jt,startDate:zt,endDate:Ut},o="data-form-error-message",n="form-input-error",s="form-input-error__custom-input",a="form-error__submit-btn";for(let a in e)if(t[a])if("title"===a||"description"===a)t[a].parentElement.setAttribute(o,e[a]),t[a].parentElement.classList.add(n);else{t[a].setAttribute(o,e[a]),t[a].classList.add(s);const n=t[a].parentElement.parentElement.firstElementChild.firstElementChild;n.style.fill="var(--red2)",setTimeout((()=>{n.style.fill="var(--white3)"}),1e3)}oo.classList.add(a),setTimeout((()=>{oo.classList.remove(a)}),1e3)}(i)}function M(){Vt.style.display="none",Gt.classList.remove("category-modal-open"),Xt.classList.add("hide-form-category-modal"),Zt.classList.remove("hide-form-category-selection"),Bt.classList.add("hide-form-overlay"),Gt.removeAttribute("style"),Xt.innerText=""}function $(e,t){const o=t.length;1!==o&&(Vt.removeAttribute("style"),setTimeout((()=>{Pt.scrollTo({top:Pt.scrollHeight,behavior:"smooth"})}),5),o>=5?Vt.setAttribute("style","top: -100px"):Vt.setAttribute("style",`top: ${20*o*-1}px`),Gt.classList.add("category-modal-open"),Gt.style.height=o<5?32*o+"px":"160px",Zt.classList.add("hide-form-category-selection"),Xt.classList.remove("hide-form-category-modal"),Xt.style.height=32*o+"px",Xt.innerText="",function(e,t){const o=Gt.getAttribute("data-form-category");t.forEach((([t,n])=>{const s=n.color,a=document.createElement("div");a.classList.add("category-modal--category"),a.style.width="200px",a.style.backgroundColor=s,a.setAttribute("data-form-category-title",t),a.setAttribute("data-form-category-color",s);const r=document.createElement("div");r.classList.add("category-modal--category-color"),r.style.backgroundColor=s;const i=document.createElement("div");if(i.classList.add("category-modal--category-title"),i.textContent=t,t===o){const e=de("var(--white4)"),t=document.createElement("div");t.classList.add("category-modal--category-check"),t.appendChild(e),a.append(r,i,t)}else a.append(r,i);e.appendChild(a)}))}(Xt,t),Bt.classList.remove("hide-form-overlay"))}function q(e){const t=e.getBoundingClientRect();let[o,n]=A(180,200,[parseInt(t.left),parseInt(t.top)],[window.innerWidth,window.innerHeight],!1);return[o,n]}function T(e){const t=k(e,".form-header--dragarea"),o=k(e,".form--header__icon-close");if(t){if(window.innerWidth<500||window.innerHeight<500)return;!function(e){const t=document.querySelector(".form--header__icon-close"),o=Nt.getBoundingClientRect(),[n,s]=[parseInt(o.left),parseInt(o.top)];Nt.style.margin="0",Nt.style.opacity="0.8",Nt.style.userSelect="none",Nt.style.top=s+"px",Nt.style.left=n+"px",Nt.style.bottom="0",Nt.style.right="0",t.style.pointerEvents="none",Ht.style.pointerEvents="none";let[a,r]=[e.clientX,e.clientY];const[i,c]=[window.innerHeight,window.innerWidth],l=x((function(e){let[t,o]=[a-e.clientX,r-e.clientY];a=e.clientX,r=e.clientY,Nt.offsetTop<0&&(Nt.style.top="0px"),Nt.offsetLeft<0&&(Nt.style.left="0px"),Nt.offsetLeft+Nt.offsetWidth>c&&(Nt.style.left=c-Nt.offsetWidth+"px"),Nt.offsetTop+Nt.offsetHeight>i&&(Nt.style.top=i-Nt.offsetHeight+"px"),Nt.style.top=Nt.offsetTop-o+"px",Nt.style.left=Nt.offsetLeft-t+"px"}),10);document.addEventListener("mousemove",l),document.addEventListener("mouseup",(function e(){Nt.style.opacity="1",Nt.style.userSelect="all",t.removeAttribute("style"),Ht.removeAttribute("style"),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",e)}))}(e)}else o&&_()}function Y(e){const t=k(e,".form--body-start__date"),o=k(e,".form--body-start__time"),n=k(e,".form--body-end__date"),a=k(e,".form--body-end__time"),r=k(e,".form--body__category-modal"),i=k(e,".form--body__category-modal--wrapper-selection"),c=k(e,".close-options-floating__btn"),l=k(e,".form-modal-overlay"),d=k(e,".form-input-error"),u=k(e,".form-input-error__custom-input"),m=k(e,".form--footer__button-cancel"),g=k(e,".form--footer__button-save");if(t)v(e,"start");else{if(o)return e.target.classList.add("active-form-time"),void y(q(e.target),Jt.getAttribute("data-form-time"),!1,null);if(n)v(e,"end");else{if(a)return e.target.classList.add("active-form-time"),void y(q(e.target),Qt.getAttribute("data-form-time"),!0,Jt.getAttribute("data-form-time"));if(r)Xt.childElementCount>0&&function(e){const t=e.target.getAttribute("data-form-category-title"),o=e.target.getAttribute("data-form-category-color");Gt.setAttribute("data-form-category",t),Kt.firstElementChild.setAttribute("fill",o),Zt.style.backgroundColor=o,eo.style.backgroundColor=o,to.textContent=t,M()}(e);else if(i)$(0,s);else if(c)M();else if(l)M();else if(d)S(e);else{if(!u)return m?(Ht.reset(),L(),F(),void M()):void(g&&E(e));S(e)}}}}function I(e){if(It.classList.contains("hide-datepicker")){const t=document?.querySelector(".timepicker"),o=document?.querySelector(".hide-form-category-modal");"Escape"===e.key&&(null!==t?h():null===o?M():_()),"Enter"===e.key&&(null!==t?h():null===o?M():E(e))}}function F(){s=Object.entries(t.getAllCtg()),r=t.getActiveCategoriesKeyPair(),i=e.getComponent(),c=e.getYear(),l=e.getMonth(),d=e.getDay(),jt.value="",Wt.blur(),Wt.value="",setTimeout((()=>{Wt.focus()}),10),function(){let[e,t]=0===r.length?[s[0][0],s[0][1].color]:[r[0][0],r[0][1].color];Gt.setAttribute("data-form-category",e),Zt.style.backgroundColor=t,to.textContent=e,eo.style.backgroundColor=t,Kt.firstElementChild.setAttribute("fill",t)}(),o.setDate(c,l,d),e.setDateSelected(d);const n=`${e.getMonthName().slice(0,3)} ${d}, ${c}`;zt.textContent=n,zt.setAttribute("data-form-date",a(e.getDate())),Ut.textContent=n,Ut.setAttribute("data-form-date",a(e.getDate()));const u=(new Date).getHours();Jt.setAttribute("data-form-time",`${u}:00`),Qt.setAttribute("data-form-time",`${u}:30`);const m=(e,t)=>`${0==+e||12==+e?12:e%12}:${t}${e<12?"am":"pm"}`;Jt.textContent=m(u,"00"),Qt.textContent=m(u,"30"),oo.setAttribute("data-form-action","create"),oo.setAttribute("data-form-id",""),Rt.onmousedown=T,Ot.onclick=_,Nt.onclick=Y,document.addEventListener("keydown",I)}F()}const so=document.querySelector(".sb__info"),ao=document.querySelector(".sb__info-popup"),ro=document.querySelector(".sb__info-popup-overlay"),io=document.querySelector(".select-popup-info"),co=document.querySelector(".close-sb-info"),lo=document.querySelector(".sbip-title"),uo=document.querySelector(".sbip-content");function mo(e){const t={notes:{title:"Breakdown of project & current status",content:"These are my project notes"},privacy:{title:"Cookies and Data Privacy",content:"This project uses an open source license"},terms:{title:"Code license and terms of use",content:"All data is stored locally meaning no data is sent to a server."}};function o(){e.removeActiveOverlay("hide-sb-info-popup"),ao.classList.add("hide-sb-info-popup"),ro.classList.add("hide-sb-info-popup"),document.removeEventListener("keydown",a),ro.onclick=null,co.onclick=null}function n(e){lo.innerText=t[e].title,uo.innerText=t[e].content}function s(e){n(e.target.value)}function a(e){"Escape"===e.key&&o()}function r(t){const r=["notes","privacy","terms"].indexOf(t);io.selectedIndex=r,e.addActiveOverlay("hide-sb-info-popup"),ao.classList.remove("hide-sb-info-popup"),ro.classList.remove("hide-sb-info-popup"),n(io.value),io.onchange=s,ro.onclick=o,co.onclick=o,document.addEventListener("keydown",a)}so.onmousedown=function(e){const t=k(e,".sb__project-notes"),o=k(e,".sb__privacy"),n=k(e,".sb__terms");t?r("notes"):o?r("privacy"):n&&r("terms")}}const go=document.querySelector(".shortcuts-modal-overlay"),ho=document.querySelector(".shortcuts__modal"),po=document.querySelector(".shortcuts-modal-content"),yo=document.querySelector(".close-shortcuts-modal"),vo=document.querySelector(".keyboard-disabled-sm-two");function fo(e){function t(e,t){const o=document.createElement("div");o.classList.add("sm-item");const n=document.createElement("div");n.classList.add("sm-key");const s=document.createElement("span");if(Array.isArray(e)){const t=document.createElement("span");t.textContent=" or ";const o=document.createElement("span");s.textContent=e[0].toUpperCase(),o.textContent=e[1].toUpperCase(),n.append(s,t,o)}else"ENTER"!=e&&"ESCAPE"!=e&&"DELETE"!=e||s.classList.add("key-full"),s.textContent=e.toUpperCase(),n.appendChild(s);const a=document.createElement("div");if(a.classList.add("sm-description"),Array.isArray(t)){o.classList.add("sm-item--full"),a.classList.add("sm-description--full");const e=document.createElement("span"),n=document.createElement("span");e.textContent=t[0],n.textContent=t[1],a.append(e,n)}else a.textContent=t;return o.append(n,a),o}function o(){po.innerText="",go.classList.add("hide-shortcuts"),ho.classList.add("hide-shortcuts"),e.removeActiveOverlay("hide-shortcuts"),document.removeEventListener("keydown",n)}function n(e){let t=e.key.toLowerCase();"escape"!==t&&"/"!==t&&"?"!==t||o()}function s(e){e?(vo.setAttribute("data-tooltip","Keyboard shortcuts enabled"),vo.firstElementChild.setAttribute("fill","var(--primary1)")):(vo.setAttribute("data-tooltip","Keyboard shortcuts disabled"),vo.firstElementChild.setAttribute("fill","var(--red1)"))}!function(){go.classList.remove("hide-shortcuts"),ho.classList.remove("hide-shortcuts"),e.addActiveOverlay("hide-shortcuts"),s(e.getShortcutsStatus());const a=e.getShortcuts();for(let e=0;e<Object.values(a).length;e++){const o=Object.values(a)[e];po.appendChild(t(o.shortcut,o.action))}go.onclick=o,yo.onclick=o,vo.onclick=function(){const t=!1===e.getShortcutsStatus();s(t),e.setShortcutsStatus(t)},document.addEventListener("keydown",n)}()}const bo=document.querySelector(".sidebar-sub-menu__overlay"),wo=document.querySelector(".sidebar-sub-menu"),So=document.querySelector(".body"),Co=document.querySelectorAll(".theme-radio__input"),Lo=document.querySelector(".smia-toggle-shortcuts-checkbox"),ko=document.querySelector(".smdt-toggle-checkbox"),_o=document.querySelector(".keyboard-disabled-sm");function xo(e,t){const o=["dark","light","contrast"],s="hide-sidebar-sub-menu";function a(e){const t=document.querySelector(".sb-sub-popup-confirm");if("Escape"===e.key){if(t)return t.remove(),void bo.classList.remove("sub-overlay-vis");r(),bo.classList.remove("sub-overlay-vis")}if("a"===e.key.toLowerCase()){if(t)return;r()}}function r(){const t=document.querySelector(".sb-sub-popup-confirm");if(t)return t.remove(),void bo.classList.remove("sub-overlay-vis");e.removeActiveOverlay(s),wo.classList.add(s),bo.classList.add(s),document.removeEventListener("keydown",a),bo.onclick=null}function i(e){e?(_o.setAttribute("data-tooltip","Keyboard shortcuts enabled"),_o.firstElementChild.setAttribute("fill","var(--primary1)")):(_o.setAttribute("data-tooltip","Keyboard shortcuts disabled"),_o.firstElementChild.setAttribute("fill","var(--red1)"))}function c(){const t=document.createElement("input");t.type="file",t.accept="application/json",t.onchange=t=>{const o=t.target.files[0];let n=new FileReader;n.onload=t=>{const o=JSON.parse(t.target.result);e.setUserUpload(o),r()},n.readAsText(o),n=null},document.body.appendChild(t),t.click(),document.body.removeChild(t),r()}function l(){const t=JSON.stringify(localStorage),[o,s]=e.getStoreStats(),a=`ENT_${o}_CAT_${s}_${function(){const{monthsShort:e}=n,t=new Date;return`${e[t.getMonth()].toUpperCase()}${parseInt(t.getDate())}`}()}`,r=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(r),c=document.createElement("a");c.href=i,c.download=a+".json",document.body.appendChild(c),c.click(),URL.revokeObjectURL(i),document.body.removeChild(c)}function d(){bo.classList.remove("sub-overlay-vis");const e=document.querySelector(".sb-sub-popup-confirm");e&&e.remove()}function u(t){if("download"!==t){if("upload"===t){const t=function(){const t=document.createElement("div");t.classList.add("sb-sub-popup-confirm");const[o,n]=e.getStoreStats();let s,[a,r]=[!1,!1];o>0&&(a=`Overwriting ${o} entries`),n>1&&(r=2===n?"1 category.":+n-1+" categories."),s=a&&r?`${a} and ${r}`:a&&!r?`${a}.`:!a&&r?`No entries. Overwriting ${r}`:"Current calendar has no entries or categories.";const i=document.createElement("div");i.classList.add("sb-sub-popup-subtitle"),i.textContent=s;const c=document.createElement("div");c.classList.add("sb-sub-popup-subtitle"),c.textContent="This action is irreversible.";const l=document.createElement("div");l.classList.add("sb-sub-popup-title"),l.textContent='Please ensure you have a valid backup before proceeding. Use the "validate .json" button next to "upload .json" to check that everything is in order.';const d=document.createElement("div");d.classList.add("sb-sub-popup-btns");const u=document.createElement("button");u.classList.add("sb-sub-popup-btn--cancel"),u.textContent="Cancel";const m=document.createElement("button");return m.classList.add("sb-sub-popup-btn--proceed"),m.textContent="Proceed",d.append(u,m),console.log(t),t.append(i,c,l,d),t}();document.body.appendChild(t),bo.classList.add("sub-overlay-vis");const o=t.querySelector(".sb-sub-popup-btn--cancel"),n=t.querySelector(".sb-sub-popup-btn--proceed");o.onclick=d,n.onclick=c}}else l()}function m(e){const t=document.querySelector(".toggle-animations-icon__sm"),o={on:document.querySelector(".tai-on"),off:document.querySelector(".tai-off")};e?(o.on.classList.remove("hide-tai"),o.off.classList.add("hide-tai"),t.setAttribute("data-tooltip","Animations Enabled")):(o.on.classList.add("hide-tai"),o.off.classList.remove("hide-tai"),t.setAttribute("data-tooltip","Animations Disabled"))}function g(t){const o=!1===ko.checked;e.setAnimationStatus(o),m(o),t&&(ko.checked=o),o?So.classList.remove("disable-transitions"):So.classList.add("disable-transitions")}function h(o){const n=k(o,".down-json"),s=k(o,".upload-json"),a=k(o,".theme-option"),c=k(o,".toggle-kb-shortcuts-btn__smia"),l=k(o,".smia-disable-shortcuts__btn"),d=k(o,".keyboard-disabled-sm"),m=k(o,".smdt-toggle"),h=k(o,".toggle-animations-icon__sm"),p=k(o,".close-sub-menu");if(n)u("download");else if(s)u("upload");else{if(!a)return c?(r(),void fo(e)):void(l?function(){const t=!1===Lo.checked;e.setShortcutsStatus(t),i(t)}():d?function(){let t=e.getShortcutsStatus();t=!t,e.setShortcutsStatus(t),i(t),Lo.checked=t}():m?g():h?g(!0):p&&r());!function(e){const o=e.target.firstElementChild,n=o.value;o.checked=!0,n!==t.getColorScheme()&&(t.setColorScheme(n),D(t))}(o)}}!function(){const n=o.indexOf(t.getColorScheme());Co[n].checked=!0;const c=e.getShortcutsStatus();i(c),Lo.checked=c;const l=e.getAnimationStatus();m(l),ko.checked=l,e.addActiveOverlay(s),wo.classList.remove(s),bo.classList.remove(s),document.addEventListener("keydown",a),bo.onclick=r}(),wo.onmousedown=h}const Do=document.querySelector(".go-to-date-overlay"),Ao=document.querySelector(".go-to-date"),Eo=document.querySelector(".go-to-input"),Mo=document.querySelector(".go-to-err"),$o=document.querySelector(".cancel-go-to"),qo=document.querySelector(".submit-go-to");function To(e,t,o){const{labels:s}=n,{monthsShortLower:a,monthsLongLower:r}=s;function i(){Mo.style.display="none",Mo.onmousedown=null}function c(){const n=function(e){let t,o=!1;t=e.includes("/")?e.split("/"):e.split(" "),3!==t.length&&(o=!0);const[n,s,i]=t.map(((t,n)=>{let s=parseInt(t),i=null;return Number.isNaN(s)&&(i=e.length>3?r.indexOf(t.toLowerCase()):a.indexOf(t.toLowerCase())),0===n&&null===i&&(s-=1,-1===s&&(s=0)),-1===i&&(o=!0),2===n&&(s<100?s+=2e3:(s>2100||s>100&&s<1901)&&(o=!0)),null===i?s:i})),c=new Date(i,n,s);return"Invalid Date"===c.toString()&&(o=!0),!o&&c}(Eo.value);if(n instanceof Date){e.setDate(n.getFullYear(),n.getMonth(),n.getDate()),e.setDateSelected(n.getDate()),"hide"!==e.getSidebarState()&&W(e,t,o);let s=e.getComponent();"list"===s&&(s="day"),d(),it(s,e,t,o)}else Mo.style.display="block",Mo.onmousedown=i}function l(e){const t=e.key.toLowerCase();"escape"!==t?"enter"!==t||c():"block"===Mo.style.display?i():d()}function d(){document.removeEventListener("keydown",l),$o.onclick=null,qo.onclick=null,t.removeActiveOverlay("hide-gotodate"),Do.classList.add("hide-gotodate"),Ao.classList.add("hide-gotodate"),Eo.value=""}i(),setTimeout((()=>{Eo.focus(),Eo.value=function(){const[t,o,n]=[e.getYear(),e.getMonth(),e.getDay()];return`${a[o]} ${n} ${t}`}()}),10),Do.classList.remove("hide-gotodate"),Ao.classList.remove("hide-gotodate"),t.addActiveOverlay("hide-gotodate"),document.addEventListener("keydown",l),$o.onclick=d,qo.onclick=c}const Yo=document.querySelector(".body"),Io=document.getElementsByName("color-scheme")[0],Fo=document.querySelector(".h__container"),Oo=document.querySelector(".logo"),Bo=document.querySelector(".toggle-form"),No=document.querySelector(".sb-toggle-form-btn"),Ro=document.querySelector(".sb-data-btn"),Ho=document.querySelector(".form-overlay"),Po=document.querySelector(".entries__form"),Wo=document.querySelector(".datepicker"),jo=document.querySelector(".datepicker-overlay"),zo=document.querySelector(".datetime-wrapper"),Uo=document.querySelector(".datetime-content"),Jo=document.querySelector(".datepicker-sidebar"),Qo=document.querySelector(".sbdatepicker__body--dates"),Xo=document.querySelector(".sb__categories--body-form"),Vo=document.querySelector(".select__modal"),Ko=document.querySelector(".change-view--overlay"),Go=document.querySelector(".change-view--wrapper"),Zo=document.querySelectorAll(".view-option"),en=document.querySelector(".sidebar"),tn=document.querySelector(".sb__info"),on=document.querySelector(".sb__categories"),nn=document.querySelector(".container__calendars"),sn=document.querySelector(".yearview"),an=document.querySelector(".monthview"),rn=document.querySelector(".listview__body"),cn=document.querySelector(".collapse-view");!function(e,t){setTimeout((()=>{I.classList.remove("preload")}),4),D(e),null===t.getAnimationStatus()?I.classList.add("disable-transitions"):I.classList.remove("disable-transitions")}(L,Y),function(e,t,o){function n(){const t=e.getColorScheme();"light"===t?(e.setColorScheme("dark"),Io.setAttribute("content","dark light"),Yo.classList.remove("light-mode"),Yo.classList.remove("contrast-mode")):"dark"===t?(e.setColorScheme("contrast"),Io.setAttribute("content","dark"),Yo.classList.remove("light-mode"),Yo.classList.add("contrast-mode")):(e.setColorScheme("light"),Io.setAttribute("content","light"),Yo.classList.add("light-mode"),Yo.classList.remove("contrast-mode"))}function s(n){it(n,e,o,t)}function a(){en.classList.contains("hide-sidebar")||(t.setDate(e.getYear(),e.getMonth(),e.getDay()),W(e,o,t))}function r(){e.setPrevDay(),s("day"),e.setDateSelected(e.getDay()),a()}function i(){e.setNextDay(),s("day"),e.setDateSelected(e.getDay()),a()}function c(){e.setPrevWeek(),s("week"),a()}function l(){e.setNextWeek(),s("week"),a()}function d(){e.setPrevMonth(),s("month"),a()}function u(){e.setNextMonth(),s("month"),a()}function m(){e.setPrevYear(),s("year"),a()}function g(){e.setNextYear(),s("year"),a()}let h=250;function p(e,t,n){if(o.getAnimationStatus()){e.classList.contains("weekview--header")||(nn.style.overflowX="hidden",setTimeout((()=>{nn.style.overflowX="auto"}),200)),e.classList.remove("transition--"+("left"===t?"right":"left"));const o=`transition--${t}`;e.classList.contains(o)?(n(),h+=250):(e.classList.add(o),setTimeout((()=>{e.classList.remove(o)}),h),n(),h=250)}else n()}function y(){no(e,o,t),Po.setAttribute("style","top:5%;left:5%;right:5%;bottom:5%;margin:auto;"),Po.classList.remove("hide-form"),Ho.classList.remove("hide-form-overlay"),o.addActiveOverlay("hide-form-overlay")}function v(){xo(o,e)}function f(){if("hide"===e.getSidebarState())Bo.onclick=y,No.onclick=null,Ro.onclick=null,tn.onmousedown=null,on.onmousedown=null,Jo.onclick=null,setTimeout((()=>{Qo.innerText="",Xo.innerText=""}),100),nn.classList.remove("container__calendars-sb-active"),en.classList.add("hide-sidebar"),Bo.classList.remove("hide-toggle--form"),zo.classList.remove("datetime-inactive"),Uo.removeAttribute("tabindex"),rn.removeAttribute("style");else{Bo.onclick=null,No.onclick=y,Ro.onclick=v,"list"===e.getComponent()&&(rn.style.width="100%",rn.style.marginLeft="0"),nn.classList.add("container__calendars-sb-active"),en.classList.remove("hide-sidebar"),Bo.classList.add("hide-toggle--form"),zo.classList.add("datetime-inactive"),Uo.setAttribute("tabindex","-1");const n=o.getResetDatepickerCallback();null!==n&&(n(),o.setResetDatepickerCallback(null)),t.setDate(+e.getYear(),+e.getMonth(),+e.getDay()),t.setDateSelected(+e.getDay()),en.classList.contains("hide-sidebar")||($t(e,o,t),mo(o)),a()}}function b(){if(!e.isToday()&&"list"!==e.getComponent()){let t=new Date;e.setDate(t.getFullYear(),t.getMonth(),t.getDate()),s(e.getComponent()),a()}}function w(){switch(e.getComponent()){case"day":p(document.querySelector(".dayview--header-day__number"),"right",r);break;case"week":p(document.querySelector(".weekview--header"),"right",c);break;case"month":p(an,"right",d);break;case"year":p(sn,"right",m)}}function S(){switch(e.getComponent()){case"day":p(document.querySelector(".dayview--header-day__number"),"left",i);break;case"week":p(document.querySelector(".weekview--header"),"left",l);break;case"month":p(an,"left",u);break;case"year":p(sn,"left",g)}}function C(){Vo.classList.remove("selection--active"),Ko.style.display="none",Ko.classList.add("toggle-options"),Go.classList.add("toggle-options"),Go.classList.remove("toggle-animate")}function L(t,o){const n=e.getComponent();"week"===t||"day"===t?(cn.onclick=q,cn.classList.remove("hide-cbt")):(cn.onclick=null,cn.classList.add("hide-cbt")),(t!==n||o)&&(C(),e.setComponent(t),s(t),function(e){const t=["day","week","month","year","list"].indexOf(e);for(let e=0;e<Zo.length;e++)e===t?Zo[e].classList.add("change-view--option__active"):Zo[e].classList.remove("change-view--option__active")}(t),(n||"week"===t)&&a(),document.activeElement.blur())}function _(){Vo.classList.add("selection--active"),Ko.classList.remove("toggle-options"),Ko.style.display="block",Go.classList.remove("toggle-options"),Go.classList.add("toggle-animate");Go.onclick=e=>{L(e.target.getAttribute("data-view-option"))},Ko.onclick=C}const D=x((function(s){switch(s.key.toLowerCase()){case"d":case"1":L("day");break;case"w":case"2":L("week");break;case"m":case"3":L("month");break;case"y":case"4":L("year");break;case"l":case"5":L("list");break;case"s":e.toggleSidebarState(),f();break;case"f":y();break;case"v":(e=>{Vo.classList.contains("selection--active")?"v"===e.key.toLowerCase()&&C():_()})(s);break;case"p":w();break;case"n":S();break;case"t":b();break;case"a":v();break;case"?":case"/":fo(o);break;case"0":n();break;case"g":To(e,o,t);break;case"+":_t(o,{name:"new category",color:"#2C52BA"},!1,null)}}),150),A=x((function(n){n.preventDefault();const s=k(n,".menu"),a=k(n,".btn-today"),r=k(n,".prev"),i=k(n,".next"),c=k(n,".datetime-content"),l=k(n,".h-search"),d=k(n,".settings"),u=k(n,".select__modal");if(s)return e.toggleSidebarState(),void f();a?b():r?w():i?S():c?function(n){Wo.classList.remove("hide-datepicker"),jo.classList.remove("hide-datepicker-overlay"),t.setDate(e.getYear(),e.getMonth(),e.getDay());const s=n.target.getBoundingClientRect(),a=parseInt(s.left),r=parseInt(a/window.innerWidth*100);Wo.setAttribute("style",`left:${r}%;top:12px;`),vt(e,o,t,"header")}(n):l?To(e,o,t):d?v():u&&_()}),150);let[E,M]=["",""];function $(e){o.getShortcutsStatus()&&(o.hasActiveOverlay()||(E=e.key,"Control"!==E?"Control"!==M||"Control"===E?D(e):M="":M="Control"))}function q(){const t=e.getComponent();"week"!==t&&"day"!==t||(document.querySelector(".cv-svg-on").classList.toggle("hide-cbt"),document.querySelector(".cv-svg-off").classList.toggle("hide-cbt"),"day"===t?document.querySelector(".dayview--header").classList.toggle("dvh-collapse"):(document.querySelector(".weekview--header").classList.toggle("wvh-collapse"),document.querySelector(".weekview__grid").classList.toggle("wvh-body-collapse")))}(()=>{L(e.getComponent(),!0),Vo.setAttribute("data-value",`${e.getComponent().slice(0,1).toUpperCase()}`),Oo.setAttribute("data-current-day-of-month",(new Date).getDate()),f(),o.setRenderFormCallback(y);o.setRenderSidebarCallback((()=>{e.setSidebarState("open"),f()})),Fo.onclick=x(A,150),document.addEventListener("keydown",$)})()}(L,C,Y)})();