/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function e(e,t){return e.target.closest(t)}function t(e,t){let o=0,n=0,s=0;const r=t;return o="0x"+e[1]+e[2],n="0x"+e[3]+e[4],s="0x"+e[5]+e[6],"rgba("+ +o+","+ +n+","+ +s+","+r+")"}const o=(e,t)=>{let o,n,s;return function(...r){o?(clearTimeout(n),n=setTimeout((()=>{Date.now()-s>=t&&(e.apply(this,r),s=Date.now())}),Math.max(t-(Date.now()-s),0))):(e.apply(this,r),s=Date.now(),o=!0)}};function n(e){const t=document.querySelector(".body"),o=document.getElementsByName("color-scheme")[0],n=e.getColorScheme(),s=t.classList.contains("light-mode"),r=t.classList.contains("contrast-mode");(()=>{if("light"===n&&s&&!r||"dark"===n&&!s&&!r||"contrast"===n&&r&&!s)return;const a=()=>{e.setColorScheme("dark"),o.setAttribute("content","dark light"),t.classList.remove("light-mode"),t.classList.remove("contrast-mode")};switch(n){case"light":e.setColorScheme("light"),o.setAttribute("content","light"),t.classList.remove("contrast-mode"),t.classList.add("light-mode");break;case"contrast":e.setColorScheme("contrast"),o.setAttribute("content","dark"),t.classList.remove("light-mode"),t.classList.add("contrast-mode");break;default:a()}})()}function s(e,t,o,n,s,r){const[a,i]=[e,t],[c,l]=o,[d,u]=n;let m;s?(m=c-a/2+r/2,e+c+4>=d&&(m=d-a-4)):m=c+a>d?c-a-6:c;let g=l+i>u?u-i-6:l;return m<0&&(m=Math.abs(m)),g<0&&(g=56),[m,g]}const r=document.querySelector(".body");const a={labels:{monthsLong:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShortLower:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],monthsLongLower:["january","february","march","april","may","june","july","august","september","october","november","december"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysLong:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysNarrow:["S","M","T","W","T","F","S"],numbers:["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen"]},colors:{red:{1:"#DF2A79",2:"#A51955",3:"#73113C",4:"#C20000",5:"#9D0000",6:"#690000",7:"#460000"},orange:{1:"#EE756A",2:"#E84334",3:"#E77C2B",4:"#D56A18",5:"#954A11",6:"#6B350C",7:"#402007"},green:{1:"#1E9E98",2:"#1A8A84",3:"#167671",4:"#115855",5:"#0F4E4B",6:"#09312F",7:"#072726"},blue:{1:"#14489A",2:"#125ab8",3:"#5578D7",4:"#2C52BA",5:"#234295",6:"#1B3375",7:"#142555"},purple:{1:"#42338B",2:"#513FAB",3:"#614E7A",4:"#604793",5:"#49356F",6:"#342650",7:"#271D3C"},grey:{1:"#858F93",2:"#4D5458",3:"#272B2C",4:"#202B31",5:"#2C3C44",6:"#384C56",7:"#516C7B"}}};function i(e,t){const{labels:o}=a,{weekdaysLong:n,monthsLong:s}=o,r=new Date;document.querySelector(".btn-today").setAttribute("data-tooltip",`${n[r.getDay()]}, ${s[r.getMonth()]} ${r.getDate()}`);const i=document.querySelector(".datetime-content--title"),c=document.querySelector(".header"),l=document.querySelector(".select__modal"),d=document.querySelector(".prev"),u=document.querySelector(".next"),m=document.querySelector(".h-col-2"),g=document.querySelector(".datetime-content"),p=document.querySelector(".prev-next"),h=(e,t)=>{c.style.borderBottom=e,i.textContent=t,m.classList.remove("datetime-inactive"),m.style.paddingRight="0",g.removeAttribute("style"),p.removeAttribute("style")},y=e=>{"list"!==e&&(d.setAttribute("data-tooltip",`prev ${e}`),u.setAttribute("data-tooltip",`next ${e}`)),l.textContent=e[0].toUpperCase()+e.slice(1),l.setAttribute("data-value",e.slice(0,1).toUpperCase())};switch(t){case"day":h("1px solid transparent",`${e.getMonthName()} ${e.getDay()}, ${e.getYear()}`),y("day");break;case"week":h("1px solid transparent",e.getWeekRange()),y("week");break;case"month":h("1px solid transparent",`${e.getMonthName()} ${e.getYear()}`),y("month");break;case"year":h("1px solid transparent",e.getYear()),y("year");break;case"list":y("list"),c.style.borderBottom="1px solid var(--mediumgrey1)",p.setAttribute("style","pointer-events:none;"),m.classList.add("datetime-inactive")}}class c{constructor(e,t,o,n,s,r){this.category=e,this.completed=t,this.description=o,this.end=n,this.id=Date.now().toString(36)+Math.random().toString(36).slice(2),this.start=s,this.title=r}}class l{constructor(e,t){this.boxes=e,this.boxesTop=t}setAllBoxes(e){this.boxes=e.day,this.boxesTop=e.allDay}addBox(e){this.boxes.push(e)}addBoxTop(e){this.boxesTop.push(e)}getBox(e){return this.boxes.find((t=>t.id===e))}getBoxes(){return this.boxes}getBoxesTop(){return this.boxesTop}getLength(){return this.boxes.length}getBoxesByColumn(e){return this.boxes.filter((t=>+t.coordinates.x===e))}getBoxesByColumnTop(e){return this.boxesTop.filter((t=>+t.coordinates.x===e))}getBoxesTopLengths(){return this.getBoxesTop().reduce(((e,t)=>{const o=new Date(t.start);return e[o.getDay()]?e[o.getDay()]++:e[o.getDay()]=1,e}),{})}getColumnsWithMultipleBoxes(){const e={},t=[];for(const o of this.boxes)e[o.coordinates.x]?(e[o.coordinates.x]++,2===e[o.coordinates.x]&&t.push(o.coordinates.x)):e[o.coordinates.x]=1;return t}getEntriesByTitle(e){return this.boxes.filter((t=>t.title.toLowerCase().includes(e.toLowerCase())))}updateCoordinates(e,t){this.getBox(e).coordinates=t}sortByY(e){return e.sort(((e,t)=>+e.coordinates.y-+t.coordinates.y))}checkForCollision(e){const t=this.getBoxesByColumn(e),o=[];for(let e=0;e<t.length;e++)for(let n=e+1;n<t.length;n++){const s=t[e],r=t[n];s.coordinates.y<r.coordinates.e&&s.coordinates.e>r.coordinates.y&&(o.includes(s)||o.push(s),o.includes(r)||o.push(r))}return o.sort(((e,t)=>+e.coordinates.y-+t.coordinates.y))}updateStore(e,t,o){const n=this.getBox(t).coordinates,s=15*+n.y,r=15*+n.e,a=o[+n.x],i=new Date(a),c=Math.floor(s/60),l=s%60;i.setHours(c),i.setMinutes(l);const d=new Date(a),u=Math.floor(r/60),m=r%60;d.setHours(u),d.setMinutes(m),e.updateEntry(t,{start:i,end:d})}}class d{constructor(e,t){this.boxes=e,this.boxesTop=t}setAllBoxes(e){this.boxes=e.day,this.boxesTop=e.allDay}addBox(e){this.boxes.push(e)}addBoxTop(e){this.boxesTop.push(e)}getBox(e){return this.boxes.find((t=>t.id===e))}getBoxes(){return this.boxes}getBoxesTop(){return this.boxesTop}getAllBoxes(){return[...this.boxes,...this.boxesTop]}getLength(){return this.boxes.length}getBoxesTopLengths(){return this.getBoxesTop().reduce(((e,t)=>{const o=new Date(t.start);return e[o.getDay()]?e[o.getDay()]++:e[o.getDay()]=1,e}),{})}getEntriesByTitle(e){return this.boxes.filter((t=>t.title.toLowerCase().includes(e.toLowerCase())))}updateCoordinates(e,t){this.getBox(e).coordinates=t}getEntriesEndingOnDay(e){return this.boxes.filter((t=>+t.coordinates.e===e))}sortByY(e){return e.sort(((e,t)=>{const o=+e.coordinates.y-+t.coordinates.y;return 0===o?+e.coordinates.e-+t.coordinates.e:o}))}checkForCollision(){const e=this.getBoxes(),t=[];for(let o=0;o<e.length;o++)for(let n=o+1;n<e.length;n++){const s=e[o],r=e[n];s.coordinates.y<r.coordinates.e&&s.coordinates.e>r.coordinates.y&&(t.includes(s)||t.push(s),t.includes(r)||t.push(r))}return t.sort(((e,t)=>+e.coordinates.y-+t.coordinates.y))}updateStore(e,t){const o=this.getBox(t),n=o.coordinates,s=15*+n.y,r=15*+n.e,a=new Date(o.start),i=Math.floor(s/60),c=s%60;a.setHours(i),a.setMinutes(c);const l=new Date(o.start);let d=Math.floor(r/60),u=r%60;24===d&&(d=23,u=59),l.setHours(d),l.setMinutes(u),e.updateEntry(t,{start:a,end:l})}}function u(e,t){let o;return 60===t&&(t=0,e+=1),0==+e?(e=12,o="am"):e<12?o="am":12===e?o="pm":24===e?(o="am",e-=12):(e-=12,o="pm"),0==+t?`${e}${o}`:`${e}:${t}${o}`}function m(e,t){const[o,n]=e,[s,r]=t;let a=u(o,s);const i=u(n,r);return a.slice(-2)===i.slice(-2)&&(a=a.slice(0,-2)),`${a} – ${i}`}const g=function(e,t){const o=Math.floor(+e/4),n=15*+e%60,s=Math.floor((e+t)/4),r=15*(e+t)%60;let a=u(o,n);const i=u(s,r);return a.slice(-2)===i.slice(-2)&&(a=a.slice(0,-2)),`${a} – ${i}`};function p(e){return e instanceof Date&&!Number.isNaN(e)?e:new Date(e)}function h(e){return`${(e=p(e)).getFullYear()}-${e.getMonth()}-${e.getDate()}`}function y(e){return[+e.getFullYear(),+e.getMonth()+1,+e.getDate()]}function b(e,t){return[e,t]=[p(e),p(t)],e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function f(e){const t={year:31536e3,day:86400,hour:3600},o=[];if(0===e)return"now";for(const n in t)if(e>=t[n]){let s=Math.floor(e/t[n]);o.push(s+=s>1?" "+n+"s":" "+n),e%=t[n]}return o.length>1?o.join(", ").replace(/,([^,]*)$/," &$1"):o[0]}function v(e,t,o){const{monthsShort:n}=a.labels;[e,t]=[p(e),p(t)];const[s,r,i]=[e.getDate(),n[e.getMonth()],e.getFullYear()],[c,l,d]=[t.getDate(),n[t.getMonth()],t.getFullYear()];let u=i,m=d;return o&&(u=i.toString().slice(2,4),m=d.toString().slice(2,4)),i===d?r===l?s===c?`${r} ${s} ${i}`:`${r} ${s} – ${c}, ${i}`:`${r} ${s} – ${l} ${c}, ${i}`:`${r} ${s}, ${u} – ${l} ${c}, ${m}`}function w(e,t){[e,t]=[new Date(e),new Date(t)];let o=e.getMinutes(),n=t.getMinutes();n=n%15==0?n:n+(15-n%15),o=o%15==0?o:o+(15-o%15);let s=u(e.getHours(),o);const r=u(t.getHours(),n);return s.slice(-2)===r.slice(-2)&&(s=s.slice(0,-2)),`${s} – ${r}`}function S(e,t){return[e,t]=[new Date(e),new Date(t)],e.getTime()<t.getTime()}function L(e){return e instanceof Date&&!Number.isNaN(e)}function k(e,t,o){return e.getAttribute(t).split("-").map(((e,t)=>"month"===o&&1===t?Number.parseInt(e)-1:Number.parseInt(e)))}function _(e,t,o){return e=p(e),new Date(e.getFullYear(),e.getMonth(),e.getDate(),Number.parseInt(t),Number.parseInt(o),1,1)}function x(e,t,o){return[_(e=p(e),t[0],o[0]),_(e,t[1],o[1])]}function C(e,t){[e,t]=[p(e),p(t)];const o=e=>{const t=e.getMinutes();return 0===t?"00":t};return{dateObj:[e,t],minutes:[o(e),o(t)],formatted:[h(e),h(t)]}}function D(e,t){return Math.floor(t.getTime()/1e3)-Math.floor(e.getTime()/1e3)}function A(e,t){const{labels:o}=a,[n,s]=[e.getFullYear(),t.getFullYear()],[r,i]=[e.getMonth(),t.getMonth()],[c,l]=[e.getDate(),t.getDate()],[d,u]=[e.getHours(),t.getHours()],[g,p]=[e.getMinutes(),t.getMinutes()];let h=!1;const y=new Date;if(S(e,y)&&(h=!0),n===s){if(r===i){if(c===l){const s=function(e){const t={hour:3600,minute:60},o=[];if(0===e)return"now";for(const n in t)if(e>=t[n]){let s=Math.floor(e/t[n]);o.push(s+=s>1?" "+n+"s":" "+n),e%=t[n]}return o.length>1?o.join(", ").replace(/,([^,]*)$/," &$1"):o[0]}(D(h?y:e,t));return{date:`${o.monthsLong[r]} ${c}, ${n} (${m([d,u],[g,p])})`,time:s}}{const s=f(D(h?y:e,t));return{date:`${o.monthsLong[r]} ${c} – ${l}, ${n}`,time:s}}}{const n=f(D(h?y:e,t));return{date:`${o.monthsShort[r]} ${c} – ${o.monthsShort[i]} ${l}, ${s}`,time:n}}}{const a=f(D(h?y:e,t));return{date:`${o.monthsShort[r]} ${c}, ${n} – ${o.monthsShort[i]} ${l}, ${s}`,time:a}}}const E={boxClasses:{week:{base:"box",ontop:"box-ontop",active:"box-mv-dragactive",temporary:"temporary-box",prepend:"box-"},day:{base:"dv-box",ontop:"dv-box-ontop",active:"dv-box-mv-dragactive",temporary:"dv-temporary-box",prepend:"dv-box-"}},boxAttributes:{week:{updatecoord:["data-box-id","data-start-time","data-time-intervals"],dataIdx:"box-idx",dataId:"data-box-id",dataCol:"data-box-col",prepend:"data-",prepentwo:"data-wv-"},day:{updatecoord:["data-dv-box-id","data-dv-start-time","data-dv-time-intervals"],dataIdx:"data-dv-box-index",dataId:"data-dv-box-id",prepend:"data-dv-",prepentwo:"data-dv-"}},boxGrid:{week:["0.00","20.00","45.00","15.00","50.00","10.00","50.00","25.00","55.00","55.00","70.00","85.00","5.00","30.00","55.00"],day:["0.00","15.00","30.00","45.00","60.00","75.00","10.00","25.00","40.00","55.00","70.00","85.00","5.00","30.00","55.00"]},styles:{newBox:{left:"0%",height:"12.5px",width:"97%"}}};function M(e,t,o){const n=Number.parseFloat(o[t]);e.style.left=t%4==0?"0%":`${n}%`,e.style.width=`${Number.parseFloat(100-n-3)}%`}function $(e,t,o){const n=document.querySelector(".sidebar"),s=document.querySelector(".resize-overlay");switch(e){case"dragstart":n.classList.contains("hide-sidebar")||0===t.offsetLeft&&n.classList.add("sidebar--dragged-over"),o.addActiveOverlay("hide-resize-overlay"),s.classList.remove("hide-resize-overlay");break;case"dragend":o.removeActiveOverlay("hide-resize-overlay"),n.classList.remove("sidebar--dragged-over"),s.classList.add("hide-resize-overlay"),document.body.style.cursor="default"}}function q(e,t,o){const[n,s,r]=E.boxAttributes[t].updatecoord.map((t=>e.getAttribute(t))),a="week"===t?e.getAttribute("data-box-col"):1;o.updateCoordinates(n,{x:Number.parseInt(a),y:Number.parseInt(s),h:Number.parseInt(r),e:Number.parseInt(s)+Number.parseInt(r)})}function N(e,t){let o=+e.style.top.split("px")[0];o=o>=0?o/12.5:0;const n=+e.style.height.split("px")[0]/12.5,s=o+n,r=E.boxAttributes[t].prepend;e.setAttribute(`${r}start-time`,o),e.setAttribute(`${r}time-intervals`,n),e.setAttribute(`${r}end-time`,s)}function T(e,t,o,n){const s=E.boxClasses[o].base,r=E.boxAttributes[o].prepend,a=E.boxAttributes[o].prependtwo,i=t.coordinates,c=document.createElement("div");c.classList.add(s),c.style.backgroundColor=n,c.style.top=12.5*+i.y+"px",c.style.height=12.5*+i.h+"px",c.style.left="calc((100% - 0px) * 0 + 0px)",c.style.width="calc((100% - 4px) * 1)";const l=document.createElement("div");l.classList.add(`${s}__header`);const d=document.createElement("div");d.classList.add(`${s}-title`),d.textContent=t.title,l.append(d);const u=document.createElement("div");u.classList.add(`${s}__content`);const m=document.createElement("span");m.classList.add(`${s}-time`),u.append(m);const p=document.createElement("div");p.classList.add(`${s}-resize-s`),"true"===e.getAttribute(`${a}top`)?(c.setAttribute(`${a}start`,i.x),c.setAttribute(`${a}end`,i.x2)):(c.setAttribute(`${r}start-time`,i.y),c.setAttribute(`${r}time-intervals`,i.h),c.setAttribute(`${r}end-time`,+i.y+ +i.h),"week"===o?(c.setAttribute("data-box-col",i.x),c.setAttribute("box-idx",1)):c.setAttribute("data-dv-box-index",1),m.textContent=g(i.y,+i.h)),c.setAttribute(`${r}box-id`,t.id),c.setAttribute(`${r}box-category`,t.category),c.append(l,u,p),e.append(c)}function Y(e,t,o,n){const s=e.cloneNode(!0);s.classList.add(`${E.boxClasses[n].temporary}`),o?t.insertBefore(s,e.nextElementSibling):t.append(s)}function I(e,t){const o=E.styles.newBox;return`top:${e}px; left:${o.left}; height:${o.height}; width:${o.width}; background-color:${t};`}function F(e,t){t.setAttribute("class",E.boxClasses[e].base),t.style.left="calc((100% - 0px) * 0 + 0px)",t.style.width="calc((100% - 4px) * 1)"}function O(e){const t=E.boxClasses[e].base,o=document.createElement("div"),n=document.createElement("div");return o.classList.add(`${t}__header`),n.classList.add(`${t}-title`),n.textContent="(no title)",o.append(n),o}function B(e){const t=Math.floor(e/12.5/4),o=15*Math.floor(e/12.5%4);return[t,o,t,+o+15]}function R(e){return{height:e.style.height,left:e.style.left,width:e.style.width,class:e.getAttribute("class")}}const H=function(e,t,o){const{numbers:n}=a.labels,s="day"===t?o.checkForCollision():o.checkForCollision(e),{boxClasses:r,boxAttributes:i,boxGrid:c}=E,l=r[t],{base:d,ontop:u,prepend:m}=l,{dataIdx:g,dataId:p}=i[t],h=c[t];for(let e=0;e<s.length;e++){const t=document.querySelector(`[${p}="${s[e].id}"]`),o=e%15,r=`${m}${n[o]}`,a=`${d} ${r}`;t.setAttribute("class",0===e?a:`${a} ${u}`),t.setAttribute(g,r),M(t,o,h)}},P=()=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("height","20"),e.setAttribute("width","20"),e.setAttribute("fill","var(--white3)");const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M10 16q-.625 0-1.062-.438Q8.5 15.125 8.5 14.5t.438-1.062Q9.375 13 10 13t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 16 10 16Zm0-4.5q-.625 0-1.062-.438Q8.5 10.625 8.5 10t.438-1.062Q9.375 8.5 10 8.5t1.062.438q.438.437.438 1.062t-.438 1.062q-.437.438-1.062.438ZM10 7q-.625 0-1.062-.438Q8.5 6.125 8.5 5.5t.438-1.062Q9.375 4 10 4t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 7 10 7Z"),e.append(t),e},W=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","24"),t.setAttribute("width","24"),t.setAttribute("viewBox","0 0 24 24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white3)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M15 4V3H9v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5zm2 15H7V6h10v13z");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M9 8h2v9H9zm4 0h2v9h-2z"),t.append(o,n),t},j=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","20"),t.setAttribute("width","20"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white3)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6.062 15 5 13.938 8.938 10 5 6.062 6.062 5 10 8.938 13.938 5 15 6.062 11.062 10 15 13.938 13.938 15 10 11.062Z"),t.append(o),t},z=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","18px"),t.setAttribute("width","18px"),t.setAttribute("viewBox","0 0 24 24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white2)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M0 0h24v24H0z"),o.setAttribute("fill","none");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"),t.append(o,n),t},U=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","24"),t.setAttribute("width","24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white4)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d","M6 14q-.825 0-1.412-.588Q4 12.825 4 12t.588-1.413Q5.175 10 6 10t1.412.587Q8 11.175 8 12q0 .825-.588 1.412Q6.825 14 6 14Zm6 0q-.825 0-1.412-.588Q10 12.825 10 12t.588-1.413Q11.175 10 12 10t1.413.587Q14 11.175 14 12q0 .825-.587 1.412Q12.825 14 12 14Zm6 0q-.825 0-1.413-.588Q16 12.825 16 12t.587-1.413Q17.175 10 18 10q.825 0 1.413.587Q20 11.175 20 12q0 .825-.587 1.412Q18.825 14 18 14Z"),t.append(o),t},J=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","18px"),t.setAttribute("width","18px"),t.setAttribute("viewBox","0 0 24 24"),e?t.setAttribute("fill",e):t.setAttribute("fill","var(--white3)");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M0 0h24v24H0z"),o.setAttribute("fill","none");const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"),t.append(o,n),t};const Q=new class{constructor(){this.headerOffset=document.querySelector(".header"),this.form=document.querySelector(".entries__form"),this.formBody=document.querySelector(".entries__form--body"),this.formTitleDescription=document.querySelectorAll(".form-body-single"),this.formStartEndCtg=document.querySelectorAll(".form-body-double"),this.formsubmitbtn=document.querySelector(".form--footer__button-save"),this.formCategoryWrapper=document.querySelector(".form--body__category-modal--wrapper"),this.formCategorySelect=document.querySelector(".form--body__category-modal--wrapper-selection"),this.formCategoryWrapperIcon=document.querySelector(".form--body__category-modal--wrapper__color"),this.formCategoryTitle=document.querySelector(".form--body__category-modal--wrapper__title"),this.formCatgoryIcon=document.querySelector(".form--body__category-icon")}setFormStyle(e,t,o,n){o||(o=!1),n||(n=null);const[r,a]=s(this.form.offsetWidth,this.form.offsetHeight,[e,t],[window.innerWidth,window.innerHeight],o,n);this.form.style.left=`${r}px`,this.form.style.top=`${a}px`,this.form.style.margin="0"}setFormSubmitType(e,t){this.formsubmitbtn.setAttribute("data-form-action",e),this.formsubmitbtn.setAttribute("data-form-entry-id",null===t?t="":t)}configFormTitleDescriptionInput(e,t){for(const[o,n]of this.formTitleDescription.entries())n.firstElementChild.value=[e,t][o]}setFormDateInput(e,t,o,n){const{labels:s}=a,[r,i]=[e.firstElementChild,e.lastElementChild],c=`${t.getHours()}:${o}`;i.setAttribute("data-form-time",c),i.textContent=`${0==+t.getHours()||12==+t.getHours()?12:t.getHours()%12}:${o}${t.getHours()<12?"am":"pm"}`,r.setAttribute("data-form-date",n),r.textContent=`${s.monthsShort[t.getMonth()]} ${t.getDate()}, ${t.getFullYear()}`}setFormDatepickerDate(e,t,o){o=new Date(o),e.setDateSelected(o.getDate()),t.setDate(e.getYear(),e.getMonth(),e.getDay()),t.setDateSelected(o.getDate())}configFormDateInputs(e){for(let t=0;t<2;t++)this.setFormDateInput(this.formStartEndCtg[t].lastElementChild,e.dateObj[t],e.minutes[t],e.formatted[t])}configFormCategoryInput(e){const[t,o]=e;this.formCategoryWrapper.setAttribute("data-form-category",t),this.formCategorySelect.style.backgroundColor=o,this.formCategoryWrapperIcon.style.backgroundColor=o,this.formCatgoryIcon.firstChild.setAttribute("fill",o),this.formCategoryTitle.textContent=t}getConfig(e){this.setFormSubmitType(e.submission.type,e.submission.id),this.configFormCategoryInput([e.category.name,e.category.color]),this.configFormDateInputs(e.dates.object),"edit"===e.submission.type&&this.configFormTitleDescriptionInput(e.submission.title,e.submission.description)}},X=Q;class V{constructor(){this.submission={},this.category={},this.dates={}}setSubmission(e,t,o,n){this.submission={type:e,id:t||null,title:o||null,description:n||null}}setCategory(e,t){this.category={name:e,color:t}}setDates(e){this.dates={object:e}}getSetup(){return{submission:this.submission,category:this.category,dates:this.dates}}}const K=document.querySelector(".entry__options--overlay"),G=document.querySelector(".entry__options"),Z=document.querySelector(".entry__options--header"),ee=document.querySelector(".entry__options-date"),te=document.querySelector(".entry__options-time"),oe=document.querySelector(".eob-title"),ne=document.querySelector(".eob-description"),se=document.querySelector(".eob-category--icon"),re=document.querySelector(".eob-category");function ae(t,o,n,s,r){function a(){o.getRenderFormCallback()(),r(),l()}function i(){const e=document.createElement("div");e.classList.add("delete-popup");const r=document.createElement("div");r.classList.add("delete-popup__btns");const a=document.createElement("button");a.classList.add("delete-popup__cancel"),a.textContent="Cancel";const i=document.createElement("button");i.classList.add("delete-popup__confirm"),i.textContent="Delete";const c=document.createElement("p");c.classList.add("delete-popup__text"),c.textContent="Are you sure you want to delete this entry?",r.append(a,i),e.append(c,r),G.append(e);const d=()=>{e.remove()};a.onclick=d,i.onclick=()=>{var e;e=n,o.deleteEntry(e.id),l(),Ze(t.getComponent(),t,o,s),d();const r=o.getFormResetHandle(t.getComponent());null!==r&&r()}}function c(){const e=o.getFormResetHandle(t.getComponent());l(),e()}function l(){for(const e of[ee,te,oe,ne,re])e.innerText="";G.classList.add("entry__options--hidden"),K.classList.add("entry__options--hidden"),o.removeActiveOverlay("entry__options--hidden"),ne.parentElement.removeAttribute("style"),G.onclick=null,K.onclick=null,Z.focus(),document.removeEventListener("keydown",d)}function d(e){const t=document?.querySelector(".delete-popup");if("Escape"===e.key){if(t)return void t.remove();c()}"e"===e.key.toLowerCase()&&a(),"Delete"===e.key&&i()}function u(t){const o=e(t,".eoi__edit"),n=e(t,".eoi__delete"),s=e(t,".eoi__close");o?a():n?i():s&&c()}!function(){G.classList.remove("entry__options--hidden"),K.classList.remove("entry__options--hidden"),o.addActiveOverlay("entry__options--hidden");const[e,t]=[new Date(n.start),new Date(n.end)];let s=!1;b(e,new Date)&&(s=!0);const r=A(e,t);if(ee.textContent=r.date,null!==r.time)if(void 0===r.time){const e=(new Date).getTime()-t.getTime(),o=Math.floor(e/864e5);let n;if(0===o){const t=Math.floor(e/36e5),o=Math.floor((e-1e3*t*60*60)/6e4);0===t?n=1===o?`ended ${o} minute ago`:`ended ${o} minutes ago`:1===t?n=`ended ${t} hour ago`:t>1&&(n=`ended ${t} hours ago`)}else n=1===o?"ended yesterday":`ended ${o} days ago`;te.textContent=n}else te.textContent=s?"ending in "+r.time:r.time;oe.textContent=n.title,0===n.description?ne.parentElement.style.display="none":ne.textContent=n.description,se.setAttribute("fill",o.getCtgColor(n.category)),re.textContent=n.category,G.onclick=u,K.onclick=c,document.addEventListener("keydown",d)}()}const ie=document.querySelector(".dayview--header-day__title"),ce=document.querySelector(".dayview--header-day__number"),le=document.querySelector(".dayview--header-day__info"),de=document.querySelector(".dayview--ontop-container"),ue=document.querySelector(".calendar__dayview"),me=document.querySelector(".dayview__grid"),ge=document.querySelector(".dayview--main-grid"),pe=document.querySelector(".dayview--side-grid");function he(t,o,n){let r=null,i=null,c=null;function l(e){let t=0,o=100;for(let n=0;n<e.length;n++){const[s,r]=[e[n].coordinates.y,e[n].coordinates.e];r>t&&(t=r),s<o&&(o=s)}const[n,s]=[Math.floor(o/4),Math.floor(t/4)],[r,a]=[o%4*15,t%4*15],[i,c]=[new Date(e[0].start),new Date(e[0].start)];return i.setHours(n),i.setMinutes(r),c.setHours(s),c.setMinutes(a),w(i,c)}function m(){for(const e of[ie,ce,le])e.innerText="";let e=(new Date).getTimezoneOffset()/60;e<0&&(e=`+${Math.abs(e)}`),document.querySelector(".dv-gmt").textContent=`UTC ${t.getGmt()}`;const o=t.getDay();ce.textContent=o,t.isToday()?(ce.classList.add("dayview--header-day__number--today"),ie.style.color="var(--primary1)"):(ce.classList.remove("dayview--header-day__number--today"),ie.removeAttribute("style")),ie.textContent=a.labels.weekdaysShort[t.getWeekday()].toUpperCase(),le.textContent=function(){const e=i.getAllBoxes();if(0===e.length)return"no entries";let o,[n,s]=[0,0];for(let r=0;r<e.length;r++){const[a,i,c]=[new Date(e[r].start),new Date(e[r].end),t.getDate()];a.getDate()===c.getDate()&&s++,i.getDate()===c.getDate()&&(n++,o=e[r])}if(1===s&&1===n)return`1 entry ( ${w(new Date(e[0].start),new Date(e[0].end))} )`;if(s>1&&s===n)return`${s} entries starting & ending today ( ${l(i.boxes)} )`;let r="";return r+=s>0?1===s?`${s} entry starting today`:`${s} entries started`:"no entries started",r+=n>0?1===n?` – ${n} ending ( ${w(new Date(o.start),new Date(o.end))} )`:` – ${n} ending ( ${l(i.boxes)} )`:" – no entries ending today",r}()}function p(){ge.innerText="",de.innerText="",pe.innerText="",le.innerText="",ue.onmousedown=null,r=null,i=null,c=null}function h(e,r){const a=e.target,i=a.getAttribute("data-sdvt-id"),c=o.getEntry(i),l=c.start,d=o.getCtgColor(c.category),u=a.getBoundingClientRect(),[m,g]=s(400,165,[Number.parseInt(u.left),Number.parseInt(u.top)+24],[window.innerWidth,window.innerHeight],!1);o.setFormResetHandle("day",r||(()=>{console.log("reset")}));const p=new V;p.setSubmission("edit",i,c.title,c.description),p.setCategory(c.category,d),p.setDates(C(l,c.end)),X.setFormDatepickerDate(t,n,l);ae(t,o,c,n,(()=>X.getConfig(p.getSetup())));const h=document.querySelector(".entry__options");h.style.top=+g+"px",h.style.left=+m+"px"}function y(e){if(document.createElement("div").classList.add("dv--ontop__grid"),e.length>6){const t=document.createElement("div");return t.classList.add("dv--ontop__more"),t.textContent=`${e.length} more...`,void de.append(t)}!function(e){const t=document.createElement("div");t.classList.add("dayview--ontop__grid");for(const n of e){const e=document.createElement("div");e.classList.add("dayview--ontop__grid-item"),e.textContent=n.title,e.style.backgroundColor=o.getCtgColor(n.category),e.setAttribute("data-sdvt-id",n.id),t.append(e)}de.append(t)}(e)}function b(){document.querySelector(".dayview-temp-box")?.remove()}function f(e){$("dragstart",me,o),document.body.style.cursor="move";const[s,r]=o.getFirstActiveCategoryKeyPair(),a=document.createElement("div");a.setAttribute("class","dv-box dv-box-dragging dayview-temp-box");const i=O("day"),c=document.createElement("div"),l=document.createElement("span"),d=document.createElement("span");c.classList.add("dv-box__content"),l.classList.add("dv-box-time"),d.classList.add("dv-box-time");const m=Number.parseInt(me.offsetTop),g=Number.parseInt(me.scrollTop),p=e.pageY-m,h=12.5*Math.round((p+Math.abs(g))/12.5);a.setAttribute("style",I(h,r));const y={y:+h/12.5,x:1,h:1,e:2};let[f,v,w,S]=B(h),L=0;function k(e){L+=e.movementY;let t=12.5*Math.round((e.pageY+g-h-m)/12.5);t<=12.5&&(t=12.5),t+h>1188&&(t=1187.5-h),a.style.height=`${t}px`,y.h=+t/12.5,y.e=+y.y+y.h,w=function(e,t){return Math.floor((e+t)/12.5/4)}(t,h),S=function(e,t){return 15*Math.floor((e+t)/12.5%4)}(t,h),l.style.wordBreak="break-word",l.textContent=`${u(f,v)} – `,d.textContent=`${u(w,S)}`}c.append(l,d),a.append(i,c),e.target.append(a),document.addEventListener("mousemove",k),document.addEventListener("mouseup",(function e(){L<=20&&(+y.y>=92?(y.y=92,y.e=95,y.h=3,a.style.height="37.5px",a.style.top="1150px",[f,v]=[23,0],[w,S]=[23,45],l.textContent=`${u(f,v)} – `,d.textContent=`${u(w,S)}`):(y.y=4*f,y.e=+y.y+4,y.h=4,a.style.height="50px",a.style.top=12.5*+y.y+"px",v=0,[w,S]=[f+1,0],l.textContent=`${u(f,v)} – `,d.textContent=`${u(w,S)}`));const i=x(new Date(t.getDate()),[f,w],[v,S]);!function(e,s,r,a){o.setFormResetHandle("day",b);const i=o.getRenderFormCallback(),c=new V,[l,d,u,m]=a;c.setSubmission(l,d,u,m),"create"===l&&(e.style.opacity=.9);const[g,p]=s;c.setCategory(g,p);const[h,y]=r;c.setDates(C(h,y)),i(),X.setFormDatepickerDate(t,n,h),X.getConfig(c.getSetup())}(a,[s,r],i,["create",null,null,null]),$("dragend",me,o),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",k)}))}function v(){!function(){ge.innerText="",de.innerText="",y(i.getBoxesTop());for(const e of i.getBoxes()){const t=e.coordinates.y;(null===c||t<c)&&(c=t),T(ge,e,"day",o.getCtgColor(e.category))}}(),H(null,"day",i)}function S(r){const a=e(r,".dv-box-resize-s"),c=e(r,".dv-box"),l=e(r,".dayview--main-grid"),d=e(r,".dayview--ontop__grid-item"),u=e(r,".dv--ontop__more");a?function(e,t){$("dragstart",me,o),document.body.style.cursor="move";const n=t.parentElement;let s=!1;const r=R(t);t.classList.contains("dv-box-ontop")&&(s=!0,F("day",t)),t.classList.add("dv-box-resizing");const a=t.offsetTop,c=Number.parseInt(me.offsetTop);Y(t,n,s,"day");const l=Number.parseInt(me.scrollTop),d=e=>{const o=12.5*Math.round((e.pageY+l-a-c)/12.5);o<=12.5?t.style.height="12.5px":o+a>1188||(t.style.height=`${o}px`)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",(function e(){if(document.querySelector(".dv-temporary-box").remove(),t.classList.remove("dv-box-resizing"),s&&t.classList.add("dv-box-ontop"),r.height===t.offsetHeight)!function(e,t){e.setAttribute("class",t.class),e.style.left=t.left,e.style.width=t.width}(t,r);else{N(t,"day");const e=+t.getAttribute("data-dv-start-time"),n=+t.getAttribute("data-dv-time-intervals"),s=g(e,n);t.setAttribute("data-dv-time",s),t.firstChild.nextSibling.firstElementChild.textContent=s,q(t,"day",i),i.updateStore(o,t.getAttribute("data-dv-box-id")),i.getBoxes().length>1?H(null,"day",i):t.setAttribute("data-dv-box-index","box-one")}m(),$("dragend",me,o),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e)}))}(0,r.target.parentElement):c?function(e,r){$("dragstart",me,o);const a=r.parentElement;let c=!1;const l=+r.style.top.split("px")[0],d=+r.style.height.split("px")[0],u=e.pageY-Number.parseInt(me.offsetTop),p=+me.getBoundingClientRect().top.toFixed(2),[h,y]=[e.pageX,e.pageY];let[b,f]=[0,0],v=!1;const w=e=>{b=Math.abs(e.clientX-h),f=Math.abs(e.clientY-y),v||(b>3||f>3)&&(v=!0,document.body.style.cursor="move",r.classList.contains("dv-box-ontop")&&(c=!0,F("day",r)),r.classList.add("dv-box-dragging"),Y(r,a,c,"day"),b=0,f=0);const t=e.pageY-p,o=t-u;let n=12.5*Math.round((o+l)/12.5);n<0||t<0?n=0:n+d>1188||(r.style.top=`${n}px`)},S=()=>{const e=document?.querySelector(".dv-temporary-box");if(null===e){const e=()=>{$("dragend",me,o),r.classList.remove("dv-box-clicked")};r.classList.add("dv-box-clicked");const a=r.getAttribute("data-dv-box-id"),i=o.getEntry(a),c=i.start,l=r.style.backgroundColor,d=r.getBoundingClientRect(),[u,m]=s(400,165,[Number.parseInt(d.left)+32,Number.parseInt(d.top)+32],[window.innerWidth,window.innerHeight],!1);o.setFormResetHandle("day",e);const g=new V;g.setSubmission("edit",a,i.title,i.description),g.setCategory(i.category,l),g.setDates(C(c,i.end)),X.setFormDatepickerDate(t,n,c),ae(t,o,i,n,(()=>X.getConfig(g.getSetup())));const p=document.querySelector(".entry__options");window.innerWidth>580?(p.style.top=+m+"px",p.style.left=u+"px"):p.style.top="64px"}else{e.remove(),r.classList.remove("dv-box-dragging"),c&&r.classList.add("dv-box-ontop"),N(r,"day");const t=+r.getAttribute("data-dv-start-time"),n=+r.getAttribute("data-dv-time-intervals"),s=g(t,n);r.setAttribute("data-dv-time",s),r.children[1].children[0].textContent=s,q(r,"day",i),i.updateStore(o,r.getAttribute("data-dv-box-id")),i.getBoxes().length>1?H(null,"day",i):r.setAttribute("data-dv-box-index","box-one"),m(),$("dragend",me,o)}document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",S)}(r,r.target):l?f(r,r.target):d?h(r):u&&function(t){o.addActiveOverlay("morepopup");const n=document.createElement("aside");n.classList.add("dv--morepopup__overlay");const s=document.createElement("aside");s.classList.add("dv--morepopup"),s.style.left=`${de.offsetLeft}px`,s.style.top=`${de.offsetTop}px`;const r=document.createElement("div");r.classList.add("dv--morepopup__header");const a=document.createElement("span");a.classList.add("dv--morepopup__title"),a.textContent="Events spanning multiple days";const i=document.createElement("span");i.classList.add("dv--morepopup__close"),i.append(j("var(--white3)")),r.append(a,i);const c=document.createElement("div");c.classList.add("dv--morepopup__body");const l=e=>{const t=document.createElement("div");t.classList.add("dv--morepopup__entry"),t.style.backgroundColor=`${o.getCtgColor(e.category)}`,t.setAttribute("data-sdvt-id",e.id);const n=document.createElement("span");n.classList.add("dv--morepopup__entry-title"),n.textContent=e.title;const s=document.createElement("span");s.classList.add("dv--morepopup__entry-category"),s.textContent=e.category;const r=document.createElement("span");return r.classList.add("dv--morepopup__entry-time"),r.textContent=A(new Date(e.start),new Date(e.end)).date,t.append(n,s,r),t};for(const e of t){const t=l(e);c.append(t)}const d=()=>{n.remove(),s.remove(),o.removeActiveOverlay("morepopup"),document.removeEventListener("keydown",u),n.onclick=null,i.onclick=null,c.onclick=null},u=e=>{"Escape"!==e.key||d()};s.append(r,c),document.body.prepend(n,s),n.onclick=d,i.onclick=d,c.onclick=function(t){e(t,".dv--morepopup__entry")&&h(t,d)},document.addEventListener("keydown",u)}(i.getBoxesTop())}pe.innerText="",function(){for(let e=0;e<24;e++){let t,o;0===e?(t="",o=""):(t=e,o="AM"),t>12&&(t-=12),e>=12&&(o="PM");const n=document.createElement("span");n.classList.add("dv-sidegrid--cell"),n.textContent=`${t} ${o}`,pe.append(n)}}(),r=o.getDayEntries(t.getDate()),i=new d(r.day,r.allDay),v(),m(),ue.onmousedown=S,o.setResetPreviousViewCallback(p),function(){if(null!==c){const e=12.5*+c;setTimeout((()=>{me.scrollTo({top:e,behavior:"instant"})}),4)}else{const e=50*(new Date).getHours();setTimeout((()=>{me.scrollTo({top:e-25<=0?0:e-25,behavior:"instant"})}),4)}}()}const ye=document.querySelector(".datetime-content--title"),be=document.querySelector(".listview"),fe=document.querySelector(".listview__body");function ve(o,n,s){const{labels:r}=a;let i=r.monthsShort.map((e=>e.toUpperCase())),c=r.weekdaysShort.map((e=>e.toUpperCase()));const[l,d,u]=y(new Date);function g(e,t,o,n,s){const r=document.createElement("div");r.classList.add("rowgroup-header");const a=document.createElement("div");a.classList.add("rowgroup--header__datenumber"),a.textContent=o,a.setAttribute("data-rgheader-date",n);const i=document.createElement("div");return i.classList.add("rowgroup--header__monthdow"),i.textContent=`${t}, ${e}`,s&&(a.classList.add("top-datenumber"),i.classList.add("top-monthdow")),r.append(a,i),r}function p(e){const t=n.getCtgColor(e.category),[o,s]=[new Date(e.start),new Date(e.end)];let r;if(D(o,s)>86400){let e=0;o.getFullYear()!==s.getFullYear()&&(e=+s.getFullYear()-2e3),r=`${i[s.getMonth()]} ${s.getDate()} ${e>0?e:""}`}else r=`${m([o.getHours(),s.getHours()],[o.getMinutes(),s.getMinutes()])}`;const a=document.createElement("div");a.classList.add("rowgroup--cell"),a.setAttribute("data-rgcell-id",e.id);const c=document.createElement("div");c.classList.add("rowgroup--cell__color"),c.style.backgroundColor=t;const l=document.createElement("div");l.classList.add("rowgroup--cell__time"),l.textContent=r;const d=document.createElement("div");return d.classList.add("rowgroup--cell__title"),d.textContent=e.title,a.append(c,l,d),a}function h(){const e=document?.querySelector(".rowgroup--cell-active");e&&(e.classList.remove("rowgroup--cell-active"),e.removeAttribute("style"))}function b(r){const a=e(r,".rowgroup--header__datenumber"),i=e(r,".rowgroup--cell");a?function(e){const[t,r,a]=k(e,"data-rgheader-date","month");o.setDate(t,r,a),o.setDateSelected(a),"open"===o.getSidebarState()&&(s.setDate(t,r,a),s.setDateSelected(a)),o.setComponent("day"),Ze("day",o,n,s)}(r.target):i&&function(e){console.log(e);const r=e.getAttribute("data-rgcell-id");e.classList.add("rowgroup--cell-active");const a=n.getEntry(r),i=a.start,c=n.getCtgColor(a.category);e.style.backgroundColor=t(c,.7);const l=e.getBoundingClientRect(),d=e.offsetHeight,u=Number.parseInt(l.top)+d,m=Number.parseInt(l.left);let g=u+12;u+165>window.innerHeight&&(g=u-165-d-12);let p=m;m+150>window.innerWidth&&(p=window.innerWidth-150),n.setFormResetHandle("list",h);const y=new V;y.setSubmission("edit",r,a.title,a.description),y.setCategory(a.category,c),y.setDates(C(i,a.end)),X.setFormDatepickerDate(o,s,i),ae(o,n,a,s,(()=>X.getConfig(y.getSetup())));const b=document.querySelector(".entry__options");b.style.top=g+"px",b.style.left=p+"px"}(i)}function f(){fe.innerText="",be.onclick=null,i=null,c=null}(()=>{fe.innerText="",n.setResetPreviousViewCallback(f);let e=n.getActiveEntries();if(console.log(e),0===e.length)ye.textContent="No Entries to Display";else{let t=n.sortBy(e,"start","desc");console.log(t);let r=t.reduce(((e,t)=>{const o=new Date(t.start),[n,s,r]=y(o),a=`${n}-${s}-${r}`;if(n<l)return e;if(n===l){if(s<d)return e;if(s===d&&r<u)return e}return e[a]||(e[a]=[]),e[a].push(t),e}),{}),a=Object.keys(r);const m=a.length;if(0===m)ye.textContent="Schedule Clear";else{const e=new Date(a[0].split("-").map((e=>Number.parseInt(e))));o.setDate(e.getFullYear(),e.getMonth(),e.getDate()),o.setDateSelected(e.getDate()),"open"===o.getSidebarState&&(s.setDate(e.getFullYear(),e.getMonth(),e.getDate()),s.setDateSelected(e.getDate())),ye.textContent=v(a[0],a[m-1],!0)}!function(e){let t=1;for(const[o,n]of Object.entries(e)){const e=new Date(o.split("-").map((e=>Number.parseInt(e,10)))),[s,r,a]=[e.getMonth(),e.getDate(),e.getDay()],[l,d]=[c[a],i[s]],u=g(l,d,r,o,1===t);t=null,n.length>1&&n.sort(((e,t)=>new Date(e.end)-new Date(t.end)));const m=document.createElement("div");m.classList.add("rowgroup-content");for(const e of n)m.append(p(e));const h=document.createElement("div");h.classList.add("listview__rowgroup"),h.append(u,m),fe.append(h)}}(r),be.onclick=b,e=null,t=null,r=null,a=null}})()}const we=class{constructor(e){this.flag=e,this.tops=[20,20],this.heights=[18,18]}updateFlag(){this.flag=window.innerWidth<=530||window.innerHeight<=470}getFlag(){return this.flag}getTop(){const[e,t]=this.tops;return this.flag?e:t}getHeight(){const[e,t]=this.heights;return this.flag?e:t}getPrevTop(e){const[t,o]=this.tops;return e===t?o:t}},Se=document.querySelector(".datepicker-sidebar"),Le=document.querySelector(".sbdatepicker__body--dates"),ke=document.querySelector(".sbdatepicker-title"),_e=document.querySelector(".sb-datepicker-change-date"),xe=document.querySelector(".sb-yearpicker-title"),Ce=document.querySelectorAll(".sb-monthpicker__month");function De(t,o,n){n.setDate(t.getYear(),t.getMonth(),t.getDay());let s=n.getMonthArray(),r=o.getMonthEntryDates(s),a=t.getWeek(),i=!1,c=0,[l,d]=[null,null];function u(){const e=n.getMonthName(),t=n.getYear();ke.textContent=`${e} ${t}`}function m(e){Le.innerText="";const o=t.getComponent();for(let s=0;s<e.length;s++){const l=document.createElement("div"),d=document.createElement("div");l.classList.add("sbdatepicker__body--dates-cell"),d.classList.add("sbdatepicker__body--datename"),e[s].getMonth()!==n.getMonth()&&d.classList.add("sbdatepicker__body--datename-disabled"),"week"===o&&a.getDate()===e[s].getDate()&&a.getMonth()===e[s].getMonth()&&a.getFullYear()===e[s].getFullYear()&&(i=!0),i?(c++,c<=7&&l.classList.add("sbdatepicker__body--dates-week")):l.classList.remove("sbdatepicker__body--dates-week"),t.isToday(e[s])&&(d.setAttribute("class","sbdatepicker__body--datename"),d.classList.add("sbdatepicker__body--datename-today")),e[s].getDate()===t.getDateSelected()&&e[s].getMonth()===n.getMonth()&&(d.classList.contains("sbdatepicker__body--datename-today")||(d.setAttribute("class","sbdatepicker__body--datename"),d.classList.add("sbdatepicker__body--datename-selected"))),d.textContent=e[s].getDate();const u=h(e[s]);d.setAttribute("data-datepicker-date",u),r.includes(u)?d.classList.contains("sbdatepicker__body--datename-selected")||d.classList.contains("sbdatepicker__body--datename-today")||(d.setAttribute("class","sbdatepicker__body--datename"),d.classList.add("sbdatepicker__body--datename-entries")):d.classList.remove("sbdatepicker__body--datename-entries"),l.append(d),Le.append(l)}}function g(){s=n.getMonthArray(),r=o.getMonthEntryDates(s),a=t.getWeek(),c=0,i=!1}function p(e,r,a){t.setDate(e,r,a),t.setDateSelected(a),n.setDate(e,r,a),Ze(t.getComponent(),t,o,n),g(),m(s),u(),s=[]}function y(e,o){t.setDateSelected(o);const n=document.querySelectorAll(".sbdatepicker__body--datename-selected");for(const e of n)e.classList.remove("sbdatepicker__body--datename-selected");e.target.setAttribute("class","sbdatepicker__body--datename"),e.target.classList.add("sbdatepicker__body--datename-selected")}function b(e){const o=e.target,[n,s,r]=o.getAttribute("data-datepicker-date").split("-").map((e=>Number.parseInt(e))),a=t.getComponent();if("list"!==a)return"year"===a?t.getYear()!==n?void p(n,s,r):void y(e,r):"month"===a?t.getMonth()!==s?void p(n,s,r):void y(e,r):"week"===a?e.target.parentElement.classList.contains("sbdatepicker__body--dates-week")?void y(e,r):void p(n,s,r):"day"===a?t.isToday(new Date(n,s,r))?void y(e,r):void p(n,s,r):void 0;y(e,r)}function f(){l=n.getMonth(),d=n.getYear(),_e.classList.add("show-sbdpcd"),S(null,!0),w(n.getMonth(),!0)}function v(){l===n.getMonth()&&d===n.getYear()||(g(),m(s),u(),s=[]),_e.classList.remove("show-sbdpcd")}function w(e,t){const o=e;if(t||o!==n.getMonth()){n.setMonth(o);for(const[e,t]of Ce.entries())e===o?t.classList.add("monthpicker__active-month"):t.classList.remove("monthpicker__active-month")}}function S(e,t){if(t)return void(xe.textContent=n.getYear());const o=Number.parseInt(n.getYear())+e;o!=+n.getYear()&&(n.setYear(o),xe.textContent=o)}function L(t){const o=e(t,".sbdatepicker__body--datename"),r=e(t,".sbdatepicker-nav--next"),a=e(t,".sbdatepicker-nav--prev"),i=e(t,".sbdatepicker-title"),c=e(t,".sb-close-change-date"),l=e(t,".sb-yearpicker-next"),d=e(t,".sb-yearpicker-prev"),p=e(t,".sb-monthpicker__month");if(o)b(t);else{if(r)return n.setNextMonth(),g(),m(s),u(),void(s=[]);if(a)return n.setPrevMonth(),g(),m(s),u(),void(s=[]);if(o)b(t);else if(i)f();else if(c)v();else if(l)S(1,!1);else if(d)S(-1,!1);else if(p){w(Number.parseInt(t.target.getAttribute("data-sbdp-month")),!1)}else;}}_e.classList.remove("show-sbdpcd"),u(),m(s),Se.onclick=L,s=null,r=null}const Ae=document.querySelector(".resize-overlay"),Ee=document.querySelector(".sidebar"),Me=document.querySelector(".monthview--calendar");function $e(o,n,r){const i=new we(window.innerWidth<=530||window.innerHeight<=470);function c(){Ee.classList.contains("hide-sidebar")||(r.setDate(o.getYear(),o.getMonth(),o.getDay()),o.setDateSelected(o.getDay()),De(o,n,r))}function l(e){"hide"===e?(Ae.classList.add("hide-resize-overlay"),n.removeActiveOverlay("hide-resize-overlay")):(Ae.classList.remove("hide-resize-overlay"),n.addActiveOverlay("hide-resize-overlay"))}function d(){o.setComponent("day"),Ze("day",o,n,r),c()}function u(e,t,o,s){const r=document.createElement("div");r.classList.add("monthview--box"),r.setAttribute("data-monthview-id",e),r.style.backgroundColor=n.getCtgColor(t),r.style.top=`${o}px`,r.style.height=`${i.getHeight()}px`,r.style.width="100%";const a=document.createElement("div");return a.classList.add("monthview--title"),a.textContent=s,r.append(a),r}function m(e,t,n,s){const r=[+e.getDay(),Math.floor(t/7)],c=document.createElement("div");c.classList.add("monthview--day"),c.setAttribute("data-mv-date",s),c.setAttribute("data-mv-idx",t),c.setAttribute("data-mv-coordinates",r);const l=document.createElement("button");l.classList.add("monthview--dayofmonth");const d=document.createElement("div");d.classList.add("monthview--daycontent"),e.getMonth()===o.getMonth()&&e.getDate()===o.getDateSelected()&&l.classList.add("monthview--dayofmonth-selected"),l.append(function(e,t){const{labels:n}=a,s=`${t.getDate()} ${n.monthsShort[t.getMonth()]}`,r=document.createElement("span");return r.classList.add("monthview--daynumber"),t.getMonth()!==o.getMonth()?(r.textContent=s,r.classList.add("monthview--daynumber-prevnext")):1===t.getDate()?r.textContent=s:o.isToday(t)?(r.textContent=t.getDate(),r.classList.add("monthview--daynumber-today"),e.classList.add("monthview--today")):r.textContent=t.getDate(),r}(c,e));let m=0;if(void 0!==n&&n.length>0)if((n=n.filter((t=>new Date(t.start).getMonth()===e.getMonth()))).length>=6)d.append(function(e,t){const o=document.createElement("div");o.classList.add("monthview--daygroup"),o.setAttribute("data-mvgrouped-date",e),o.setAttribute("data-mvgrouped-length",t);const n=document.createElement("div");n.classList.add("monthview--grouped");const s=document.createElement("div");return s.classList.add("monthview--daycontent__grouped-title"),s.textContent=`${t} more...`,n.append(s),o.append(n),o}(s,n.length)),d.classList.add("monthview--daycontent-grouped");else for(const[t,o]of n.entries())b(new Date(o.start),e)&&(t>0&&(m+=i.getTop()),d.append(u(o.id,o.category,m,o.title)));c.append(l,d),Me.append(c)}function g(){Me.innerText="",Me.onmousedown=null,Me.onclick=null}function h(e){return e.getAttribute("data-mv-coordinates").split(",").map((e=>Number.parseInt(e)))}function y(e,t){const[o,s,r]=k(e,"data-mv-date","month"),a=t.getAttribute("data-monthview-id"),i=n.getEntry(a),[c,l]=[new Date(i.start),new Date(i.end)],d=D(c,new Date(o,s,r)),u=l.getDate()+Math.floor(d/86400)+1;n.updateEntry(a,{start:new Date(o,s,r,c.getHours(),c.getMinutes()),end:new Date(l.getFullYear(),l.getMonth(),u,l.getHours(),l.getMinutes())})}function f(e){e.classList.remove("box-mv-dragactive"),e.style.top="0px",e.style.left="0px",e.style.width="100%",e.style.height=`${i.getHeight()}px`}function v(e,t){if(0!==e.length&&void 0!==e)for(let o=0;o<e.length;o++)void 0===e[o]||null===e[o]||e[o].classList.contains("monthview--box__form-temp")||(e[o].style.top=o*i.getTop()+"px",t?(e[o].classList.add("monthview--box__drop"),setTimeout((()=>{e[o].classList.remove("monthview--box__drop")}),200)):e[o].setAttribute("class","monthview--box"))}function w(e,a){$("dragstart",Me,n);const l=Date.now(),d=a.parentElement,u=d.parentElement;u.classList.add("current-drop-zone");const m=document?.querySelector(".more-modal"),g=d.childElementCount,[p,b]=h(u);!function(e){const t=e.cloneNode(!0);Me.prepend(t),t.classList.add("box-mv-dragactive"),t.focus()}(a);const w=document?.querySelector(".box-mv-dragactive");w.setAttribute("data-box-mvx",p),w.setAttribute("data-box-mvy",b);const S=u.getBoundingClientRect(),L=Number.parseFloat(S.width.toFixed(2)),k=Number.parseFloat(S.height.toFixed(2)),_=Number.parseInt(Me.offsetLeft),D=a.getBoundingClientRect(),A=Number.parseFloat(D.width),E=i.getHeight();w.style.top=`${d.offsetTop}px`,w.style.width=`${A}px`,w.style.height=`${E}px`,w.style.left=`${d.offsetLeft}px`,w.classList.add("hide-mv-clone");const M=Me.classList.contains("five-weeks"),[q,N]=[e.clientX,e.clientY];let[T,Y]=[0,0],[I,F]=[p,b],O=!1,B=!1;const R=e=>{T=Math.abs(e.clientX-q),Y=Math.abs(e.clientY-N),(T>1||Y>1)&&(B||(m&&m.remove(),document.body.style.cursor="move",B=!0)),(T>3||Y>3)&&(O||(a.style.opacity="0.5",w.classList.remove("hide-mv-clone")),O=!0);let t=Math.floor((e.clientX-Me.offsetLeft)/L);if(t<0)return void(t=0);if(t>6)return void(t=6);if(I!==t){const e=t*L+_;w.style.left=`${Number.parseFloat(e.toFixed(2))}px`,I=t}let o=Math.floor((e.clientY-Me.offsetTop)/k);if(o<0)o=0;else if(M&&o>4)o=4;else if(!M&&o>5)o=5;else{if(F!==o){const e=o*k+Me.offsetTop+16;w.style.top=`${Number.parseFloat(e.toFixed(2))}px`,F=o}document.querySelector(".current-drop-zone")?.classList.remove("current-drop-zone"),document.querySelector(`[data-mv-coordinates="${t},${o}"]`).classList.add("current-drop-zone")}},H=()=>{const e=document?.querySelector(".current-drop-zone"),i=Date.now()-l,[u,S]=h(e);e.classList.remove("current-drop-zone");const L=e.children[1],k=L?.children;let _=!1;if(null==e)return $("dragend",Me,n),a.style.opacity="1",w.remove(),_=!1,document.removeEventListener("mousemove",R),void document.removeEventListener("mouseup",H);u===p&&S===b?(_=!1,a.style.opacity="1",w.remove(),m&&m.remove(),i<200&&function(e,a){const i=e.getAttribute("data-monthview-id"),c=n.getEntry(i),l=c.start,d=n.getCtgColor(c.category),u=t(d,.5);a.classList.add("monthview--daycontent__form-temp"),a.style.backgroundColor=u;const m=a.getBoundingClientRect(),[g,p]=s(360,165,[Number.parseInt(m.left),Number.parseInt(m.top)],[window.innerWidth,window.innerHeight]);n.setFormResetHandle("month",x);const h=new V;h.setSubmission("edit",i,c.title,c.description),h.setCategory(c.category,d),h.setDates(C(l,c.end)),X.setFormDatepickerDate(o,r,l);ae(o,n,c,r,(()=>X.getConfig(h.getSetup())));const y=document.querySelector(".entry__options");y.style.top=p+"px",y.style.left=g+"px"}(a,e)):(_=!0,void 0!==k[0]?k[0].classList.contains("monthview--daygroup")?(!function(e){const t=e.getAttribute("data-mvgrouped-length");e.setAttribute("data-mvgrouped-length",+t+1),e.firstChild.firstChild.textContent=`${e.getAttribute("data-mvgrouped-length")} more...`}(k[0]),y(e,w),w.remove(),a.remove()):(f(w),w.classList.remove("hide-mv-clone"),L.insertBefore(w,k[0]),y(e,w),a.remove(),k.length<=5?v(k,!0):function(e,t,o,n){const s=document.createElement("div");s.classList.add("monthview--daygroup"),s.setAttribute("data-mvgrouped-date",e.getAttribute("data-mv-date")),s.setAttribute("data-mvgrouped-length",o.length);const r=document.createElement("div");r.classList.add("monthview--grouped");const a=document.createElement("div");a.classList.add("monthview--daycontent__grouped-title"),a.textContent=`${o.length} more...`,t.innerText="",s.append(r),r.append(a),t.append(s),t.classList.add("monthview--daycontent-grouped"),n.remove()}(e,L,k,w)):(f(w),a.remove(),w.classList.remove("hide-mv-clone"),L.append(w),y(e,w),c())),_&&(1===g?c():v(d.children,!0)),$("dragend",Me,n),document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",H)};document.addEventListener("mousemove",R),document.addEventListener("mouseup",H)}function S(e){"Escape"===e.key&&L()}function L(){const e=document?.querySelector(".more-modal");e&&e.remove(),l("hide"),document.removeEventListener("keydown",S)}function _(e){const{labels:t}=a,r=function(e){const[t,o,s]=k(e.target.parentElement.parentElement,"data-mv-date","month");return n.getDayEntriesArray(new Date(t,o,s))}(e);l("show");const i=e.target.parentElement.parentElement,c=document.createElement("div");c.classList.add("more-modal"),c.setAttribute("data-mv-modal",i.getAttribute("data-mv-idx"));let u=28*r.length+64;u>400&&(u=400);const m=i.getBoundingClientRect(),g=Number.parseInt(m.width),[p,h]=s(216,u,[Number.parseInt(m.left),Number.parseInt(m.top)],[window.innerWidth,window.innerHeight],!0,g),y=+window.innerHeight-+h-24;c.setAttribute("style",`top: ${h}px; left: ${p}px; width: 216px; height: ${u}px; min-height: 120px; max-height: ${y}px;`);const b=document.createElement("div");b.classList.add("more-modal-header");const f=document.createElement("div");f.classList.add("more-modal-header-title");const v=function(e){const t=e.split("-");return new Date(t[0],t[1]-1,t[2])}(e.target.parentElement.parentElement.getAttribute("data-mv-date")),w=document.createElement("span");w.classList.add("more-modal-header-title-dow"),w.textContent=t.weekdaysShort[v.getDay()].toUpperCase();const _=document.createElement("span");_.classList.add("more-modal-header-title-dayn"),_.textContent=v.getDate();const x=document.createElement("div");x.classList.add("more-modal-header-close"),x.append(j("var(--white3)")),x.setAttribute("data-tooltip","Close"),f.append(x,w,_),b.append(f),c.append(b,function(e){const t=document.createElement("div");t.classList.add("more-modal-content");for(let o=0;o<e.length;o++){const s=e[o],r=document.createElement("div");r.classList.add("more-modal-entry"),r.style.top=22*o+"px",r.style.width="calc(100% - 16px)",r.style.height="20px",r.setAttribute("data-monthview-id",s.id),r.setAttribute("data-mvhidden-category",s.category),r.style.backgroundColor=n.getCtgColor(s.category);const a=document.createElement("div");a.classList.add("more-modal-entry-title"),a.textContent=s.title,r.append(a),t.append(r)}return t}(r)),Me.append(c),_.addEventListener("click",(()=>{!function(e){l("hide"),o.setDate(e.getFullYear(),e.getMonth(),e.getDate()),d()}(v)}),{once:!0}),Ae.addEventListener("click",(()=>{L()}),{once:!0}),document.addEventListener("keydown",S)}function x(){const e=document.querySelector(".monthview--daycontent__form-temp");e&&(e.removeAttribute("style"),e.classList.remove("monthview--daycontent__form-temp"))}function A(){const e=document?.querySelector(".monthview--box__form-temp");if(!e)return;const t=e.parentElement,o=t.parentElement;o.removeAttribute("style"),o.classList.remove("monthview--daycontent__form-temp"),e.remove(),v(t.children,!1)}function E(e,s){if(e.target.classList.contains("monthview--daycontent")){const e=s.parentElement,a=e.getBoundingClientRect(),[i,c]=function(e){const t=new Date,[o,n,s]=e,r=new Date(o,n,s);r.setHours(t.getHours()),r.setMinutes(0);const a=new Date(r);return a.setHours(t.getHours()),a.setMinutes(30),[r,a]}(k(e,"data-mv-date","month"));let l,d;if(0===n.getActiveCategories().length){const e=n.getDefaultCtg();l=e[0],d=e[1].color}else{const e=n.getFirstActiveCategoryKeyPair();l=e[0],d=e[1]}!function(e,t,o,n){const s=u("temp",o,0,"( New Entry )");e.scrollTop=0,s.classList.add("monthview--box__form-temp"),t.classList.add("monthview--daycontent__form-temp"),t.style.backgroundColor=n,e.children.length>0?(e.insertBefore(s,e.children[0]),v(e.children,!1)):e.append(s)}(s,e,l,t(d,.5)),n.setFormResetHandle("month",A);const m=n.getRenderFormCallback(),g=new V;g.setSubmission("create",null,null,null),g.setCategory(l,d),g.setDates(C(i,c)),m(),X.setFormDatepickerDate(o,r,i),X.getConfig(g.getSetup()),X.setFormStyle(Number.parseInt(a.right),Number.parseInt(a.top),!1,null)}}function M(t){const n=e(t,".monthview--box"),s=e(t,".monthview--dayofmonth"),r=e(t,".monthview--daygroup"),a=e(t,".more-modal-entry"),c=e(t,".more-modal-header-close");if(n){if(window.innerHeight<=280)return;w(t,t.target)}else{if(s)return t.stopPropagation(),void function(e){const[t,n,s]=k(e.target.parentElement,"data-mv-date","month");o.setDate(t,n,s),o.setDateSelected(s),d()}(t);if(r)_(t);else if(a){if(window.innerHeight<=300)return;!function(e){const t=document.querySelector(".more-modal"),o=Number.parseInt(t.getAttribute("data-mv-modal")),n=document.querySelector(`[data-mv-idx="${o}"]`),s=e.target.cloneNode(!0);s.setAttribute("class","monthview--box"),s.firstChild.setAttribute("class","monthview--title"),s.style.top=`${i.getTop()}px`,s.style.left="0px",s.style.width="100%",n.lastChild.append(s);const r=n.lastChild.firstChild,a=Number.parseInt(r.getAttribute("data-mvgrouped-length"))-1;a<1?(n.lastChild.classList.remove("monthview--daycontent-grouped"),r.remove(),s.style.top="0px"):(r.setAttribute("data-mvgrouped-length",a),r.firstChild.firstChild.textContent=`${a} more...`),w(e,s),s.focus(),t.style.opacity="0.8"}(t)}else c&&L()}}function q(t){if(e(t,".monthview--daycontent")){if(window.innerHeight<=300)return;E(t,t.target)}else;}!function(){Me.innerText="";let e=o.getMonthArray(),t=n.getMonthEntries(e),s=n.getGroupedMonthEntries(t);e.length<42?Me.classList.add("five-weeks"):Me.classList.remove("five-weeks");const r=e=>{const t=s[e.getDate()];return void 0!==t?t:[]};for(const[t,o]of e.entries())m(o,t,r(o),`${(a=p(a=o)).getFullYear()}-${a.getMonth()+1}-${a.getDate()}`);var a;e=null,t=null,s=null}(),Me.onmousedown=M,Me.onclick=q,n.setResetPreviousViewCallback(g)}const qe=document.querySelector(".sidebar"),Ne=document.querySelector(".resize-overlay"),Te=document.querySelector(".weekview"),Ye=document.querySelector(".weekview--calendar"),Ie=document.querySelector(".weekview--header"),Fe=document.querySelectorAll(".weekview--header-day__number"),Oe=document.querySelector(".weekview__grid"),Be=document.querySelector(".weekview--sidebar"),Re=document.querySelectorAll(".allday--col"),He=document.querySelectorAll(".week--col");function Pe(t,o,n){const r=t.getWeekArray(),i=o.getWeekEntries(r),c=new l(i.day,i.allDay);let d=null;function m(){for(const e of He)e.innerText="";for(const e of Re)e.innerText="";Te.onmousedown=null,Ie.onclick=null,Be.innerText=""}function p(e,t){const o=document.createElement("div");o.classList.add("allday__cell"),o.classList.add("allday__cell--active");const n=document.createElement("div");n.classList.add("wv-ad--taskicons");const s=document.createElement("div");s.classList.add("wv-ad--taskicon"),s.style.backgroundColor="#6F0C2B",n.append(s);const r=document.createElement("div");r.classList.add("wv-ad--celltitle"),r.textContent=`${t} more`;const a=document.createElement("div");a.classList.add("wv-ad--cellexpand"),a.append(J("var(--white3)")),o.append(n,r,a),e.append(o)}function h(e,t){const n=document.createElement("div");n.classList.add("allday-modal__cell"),n.setAttribute("data-allday-modal-cell",t),n.setAttribute("data-allday-modal-cell-id",e.id),n.style.backgroundColor=o.getCtgColor(e.category);const s=document.createElement("div");s.classList.add("allday-modal__cell-content");const r=document.createElement("div");r.classList.add("allday-modal__cell-action-icons");const a=document.createElement("div");a.classList.add("allday-modal__celltitle"),a.textContent=e.title;const i=document.createElement("div");i.classList.add("allday-modal__cellend-date"),i.textContent=v(new Date(e.start),new Date(e.end));const c=document.createElement("div");return c.classList.add("allday-modal__cellcategory-title"),c.textContent="category: "+e.category,s.append(a,c,i),r.append(U("var(--taskcolor")),n.append(s,r),n}function y(i,c,l,d,u){const{labels:m}=a,g=m.weekdaysLong[d],p=c.getAttribute("data-wvtop-day"),y=document.createElement("div");y.classList.add("allday-modal");const b=c.getBoundingClientRect();let f;f=l.length<4?Number.parseInt(55*l.length)+60:Number.parseInt(220)+60;const[v,w]=s(240,f,[Number.parseInt(b.left),Number.parseInt(b.top)+24],[window.innerWidth,window.innerHeight],!0,Math.floor((window.innerWidth-36-Oe.offsetLeft)/7));v+250>window.innerWidth?y.style.left=window.innerWidth-246+"px":y.style.left=v+"px",y.style.top=w+"px";const S=document.createElement("div");S.classList.add("allday-modal__header");const L=document.createElement("div");L.classList.add("allday-modal-title"),L.textContent=`${g}, ${m.monthsLong[r[d].getMonth()]} ${p}${function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(p)}`;const k=document.createElement("div");k.classList.add("close-allday-modal"),k.append(j("var(--white4"));const _=document.createElement("div");function x(e){"Escape"===e.key&&D()}function D(){y.remove(),y.onmousedown=null,Ne.classList.add("hide-resize-overlay"),Ne.onclick=null,document.removeEventListener("keydown",x),o.removeActiveOverlay("allday-modal"),u.firstChild.firstChild.style.backgroundColor="#6F0C2B",u.classList.remove("allday-modal__cell--open")}_.classList.add("allday-modal__content");for(const[e,t]of l.entries())_.append(h(t,e));S.append(L,k),y.append(S,_),Te.insertBefore(y,document.querySelector(".weekview__top")),o.addActiveOverlay("allday-modal"),Ne.onclick=D,y.onmousedown=function(r){const a=e(r,".close-allday-modal"),i=e(r,".allday-modal__cell-action-icons");a?D():i&&function(e,r,a){const i=e.id,c=e.start,l=o.getCtgColor(e.category),d=a.target.getBoundingClientRect(),[u,m]=s(400,165,[Number.parseInt(d.right),a.clientY+28],[window.innerWidth,window.innerHeight]);o.setFormResetHandle("week",r);const g=new V;g.setSubmission("edit",i,e.title,e.description),g.setCategory(e.category,l),g.setDates(C(c,e.end)),X.setFormDatepickerDate(t,n,c);ae(t,o,e,n,(()=>X.getConfig(g.getSetup())));const p=document.querySelector(".entry__options");p.style.top=m+"px",p.style.left=u+"px"}(o.getEntry(r.target.parentElement.getAttribute("data-allday-modal-cell-id")),D,r)},document.addEventListener("keydown",x)}function b(e){return document.querySelector(`[data-column-index="${e}"]`)}function f(){document.querySelector(".temp-week-box")?.remove()}function w(e,a){$("dragstart",Te,o);const i=a.parentElement,l=i.getAttribute("data-column-index");let d=i.getAttribute("data-column-index"),u=!1;a.setAttribute("data-box-col",d);const m=+a.style.top.split("px")[0],p=+a.style.height.split("px")[0],h=e.pageY-Oe.offsetTop,y=e.pageY;let f=e.pageX,[v,w]=[0,0],S=!1;const L=e=>{v=Math.abs(e.clientX-f),w=Math.abs(e.clientY-y),S||(v>3||w>3)&&(S=!0,document.body.style.cursor="move",a.classList.contains("box-ontop")&&(u=!0,F("week",a)),a.classList.add("box-dragging"),Y(a,i,u,"week"),v=0,w=0);const t=Oe.offsetTop,o=e.pageY-t,n=o-h;let s=12.5*Math.round((n+m)/12.5);if(s<0||o<0)return void(s=0);if(s+p>1188)return;a.style.top=`${s}px`;const r=e.pageX-f>0?"right":"left";let c,l;c=+d-1>=0?Number.parseInt(b(d-1).getBoundingClientRect().right):null,l=+d+1<He.length?Number.parseInt(b(+d+1).getBoundingClientRect().left):null,"right"===r&&null!==l&&e.pageX>=l&&(b(+d+1).append(a),f=e.pageX,d=+d+1,a.setAttribute("data-box-col",+d)),"left"===r&&null!==c&&e.pageX<=c&&(b(+d-1).append(a),f=e.pageX,d=+d-1,a.setAttribute("data-box-col",+d))};document.addEventListener("mousemove",L),document.addEventListener("mouseup",(function e(){const i=document.querySelector(".temporary-box");if(a.classList.remove("box-dragging"),u&&a.classList.add("box-ontop"),null===i){const e=()=>{$("dragend",Te,o),a.classList.remove("wv-box-clicked")};a.classList.add("wv-box-clicked");const r=a.getAttribute("data-box-id"),i=o.getEntry(r),c=i.start,l=a.style.backgroundColor,d=a.getBoundingClientRect(),[u,m]=s(400,165,[Number.parseInt(d.left),Number.parseInt(d.top)+56],[window.innerWidth,window.innerHeight],!1);o.setFormResetHandle("week",e);const g=new V;g.setSubmission("edit",r,i.title,i.description),g.setCategory(i.category,l),g.setDates(C(c,i.end)),X.setFormDatepickerDate(t,n,c);ae(t,o,i,n,(()=>X.getConfig(g.getSetup())));const p=document.querySelector(".entry__options");window.innerWidth>580?(p.style.top=+m+"px",p.style.left=u+"px"):p.style.top="64px"}else{i.remove(),N(a,"week");const e=g(+a.getAttribute("data-start-time"),+a.getAttribute("data-time-intervals"));a.setAttribute("data-time",e),a.children[1].children[0].textContent=e,q(a,"week",c),c.updateStore(o,a.getAttribute("data-box-id"),r),d!==+l&&(qe.classList.contains("hide-sidebar")||(n.setDate(t.getYear(),t.getMonth(),t.getDay()),De(t,o,n)));const s=+a.getAttribute("data-box-col");c.getBoxesByColumn(s).length>1?H(s,"week",c):a.setAttribute("box-idx","box-one"),$("dragend",Te,o)}document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",e)}))}function S(e){$("dragstart",Te,o),document.body.style.cursor="move";const[s,a]=o.getFirstActiveCategoryKeyPair(),i=Number.parseInt(e.target.getAttribute("data-column-index")),c=document.createElement("div");c.setAttribute("class","box box-dragging temp-week-box");const l=O("week"),d=document.createElement("div"),m=document.createElement("span"),g=document.createElement("span");d.classList.add("box__content"),m.classList.add("box-time"),g.classList.add("box-time");const p=+Oe.offsetTop,h=Number.parseInt(Oe.scrollTop),y=e.pageY-Oe.offsetTop,b=12.5*Math.round((y+Math.abs(h))/12.5);c.setAttribute("style",I(b,a));const v={y:+b/12.5,x:i,h:1,e:2};let[w,S,L,k]=B(b);function _(e){const t=e.pageY-p-y;let o=12.5*Math.round(t/12.5);o<=12.5&&(o=12.5),o+b>1188&&(o=1187.5-b),c.style.height=`${o}px`,v.h=+o/12.5,v.e=+v.y+v.h,L=Math.floor((+o+ +b)/12.5/4),k=15*Math.floor((+o+ +b)/12.5%4),m.style.wordBreak="break-word",m.textContent=`${u(w,S)} – `,g.textContent=`${u(L,k)}`}d.append(m,g),c.append(l,d),e.target.append(c),document.addEventListener("mousemove",_),document.addEventListener("mouseup",(function e(){const l=x(new Date(r[i]),[w,L],[S,k]);!function(e,s,r,a,i){o.setFormResetHandle("week",f);const c=o.getRenderFormCallback(),l=new V,[d,u,m,g]=i;l.setSubmission(d,u,m,g),"create"===d&&(e.style.opacity=.9);const[p,h]=r;l.setCategory(p,h);const[y,b]=a;l.setDates(C(y,b)),c(),X.setFormDatepickerDate(t,n,y),X.getConfig(l.getSetup())}(c,0,[s,a],l,["create",null,null,null]),$("dragend",Te,o),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",_)}))}function L(t){const n=e(t,".box-resize-s"),s=e(t,".box"),a=e(t,".week--col"),i=e(t,".allday--col");n?function(e,t){$("dragstart",Te,o),document.body.style.cursor="move";const n=t.parentElement,s=n.getAttribute("data-column-index");t.setAttribute("data-box-col",s);let a=!1;const i=R(t);t.classList.contains("box-ontop")&&(a=!0,F("week",t)),t.classList.add("box-resizing");const l=t.offsetTop;Y(t,n,a,"week");const d=e=>{const o=Oe.offsetTop;let n=Math.abs(Number.parseInt(Ye.getBoundingClientRect().top));n==o?n-=o:Ye.getBoundingClientRect().top>0?n=o-n:n+=o;const s=12.5*Math.round((e.pageY-l-o+n)/12.5);s<=12.5?t.style.height="12.5px":s+Number.parseInt(t.style.top)>1188||(t.style.height=`${s}px`)},u=()=>{if(document.querySelector(".temporary-box").remove(),t.classList.remove("box-resizing"),a&&t.classList.add("box-ontop"),t.style.height===i.height)a&&(t.setAttribute("class",i.class),t.style.left=i.left,t.style.width=i.width);else{N(t,"week");const e=+t.getAttribute("data-start-time"),n=+t.getAttribute("data-time-intervals"),s=g(e,n);t.children[1].children[0].textContent=s,q(t,"week",c);const a=+t.getAttribute("data-box-col");c.getBoxesByColumn(a).length>1&&H(a,"week",c),c.updateStore(o,t.getAttribute("data-box-id"),r)}$("dragend",Te,o),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)}(0,t.target.parentElement):s?w(t,t.target):a?S(t,t.target):i&&t.target.childElementCount>0&&function(e,t){const o=t.parentElement;t.classList.add("allday-modal__cell--open"),t.firstChild.firstChild.style.backgroundColor="#01635b";const n=Number.parseInt(o.getAttribute("data-allday-column")),s=c.getBoxesByColumnTop(n);s.length>0&&(y(0,o,s,n,t),Ne.classList.remove("hide-resize-overlay"))}(0,t.target)}function _(){!function(){for(const e of He)e.innerText="";for(const e of Re)e.innerText="";for(const e of c.getBoxes()){const t=e.coordinates.y;(null===d||t<d)&&(d=t),T(He[+e.coordinates.x],e,"week",o.getCtgColor(e.category))}const e=c.getBoxesTopLengths();for(const t in e)p(Re[+t],e[t])}();const e=c.getColumnsWithMultipleBoxes();for(const t of e)H(t,"week",c)}function D(s){e(s,".weekview--header-day__number")&&function(e){const[s,r,a]=k(e.target,"data-weekview-date");t.setDate(s,r,a),t.setDateSelected(a),t.setComponent("day"),Ze("day",t,o,n)}(s)}Be.innerText="",function(){for(let e=0;e<24;e++){let t,o;0===e?(t="",o=""):(t=e,o="AM"),t>12&&(t-=12),e>=12&&(o="PM");const n=document.createElement("span");n.classList.add("sidegrid-cell"),n.textContent=`${t} ${o}`,Be.append(n)}}(),function(){let e,o;document.querySelector(".wv-gmt").textContent=`UTC ${t.getGmt()}`;const n=[],s=[],a=t.getToday(),[i,c,l]=[a.getFullYear(),a.getMonth(),a.getDate()];for(const a of r){const[r,d,u]=[a.getFullYear(),a.getMonth(),a.getDate()];n.push(u),s.push(`${r}-${d}-${u}`),u===t.getDateSelected()&&d===t.getMonth()&&(o=u),u===l&&d===c&&r===i&&(e=u)}for(const[t,r]of n.entries())r===o?Fe[t].classList.add("wvh--selected"):Fe[t].classList.remove("wvh--selected"),r===e?Fe[t].classList.add("wvh--today"):Fe[t].classList.remove("wvh--today"),Fe[t].textContent=r,Fe[t].setAttribute("data-weekview-date",s[t]),Re[t].setAttribute("data-wvtop-day",r)}(),_(),Te.onmousedown=L,Ie.onclick=D,o.setResetPreviousViewCallback(m),null!==d&&setTimeout((()=>{Oe.scrollTo({top:Math.abs(12.5*+d-25),behavior:"instant"})}),4)}const We=document.querySelector(".calendar__yearview"),je=document.querySelector(".sidebar");function ze(t,o,n){function s(e,o,n){const{labels:s}=a,r=t.getToday(),[i,c,l]=[+r.getFullYear(),+r.getMonth(),+r.getDate()],d=new Date(e,o,0),u=d.getDate(),m=new Date(e,o,1),g=new Date(e,o+1,0).getDate(),p=m.getDay(),h=document.createElement("div");h.classList.add("yv-monthcell");const y=document.createElement("div");y.classList.add("yv-monthcell__header");const b=document.createElement("div");b.classList.add("yv-monthcell__header--rowone"),b.textContent=s.monthsLong[o],o===t.getMonth()&&e===t.getYear()&&(b.classList.add("yvmht-current"),h.classList.add("cell-current"));const f=document.createElement("div");f.classList.add("yv-monthcell__header--weekdays");for(const e of s.weekdaysNarrow){const t=document.createElement("div");t.classList.add("yv-monthcell__header--weekday"),t.textContent=e,f.append(t)}const v=document.createElement("div");return v.classList.add("yv-monthcell__body"),y.append(b,f),function(){const e=(e,o,s,r,a)=>{const d=document.createElement("div");return d.classList.add("yv-monthcell__body--day-wrapper"),null!==o&&d.classList.add(o),a&&(d.setAttribute("data-yv-date",`${s}-${r}-${e}`),d.textContent=e,e===t.getDateSelected()&&r===t.getMonth()&&s===t.getYear()&&d.classList.add("yvmb-selected"),e===l&&r===c&&s===i&&d.classList.add("yvmb-today"),n[e]&&d.classList.add("yvmb-has-entry")),d};for(let t=u-p;t<u;t++)v.append(e(t+1,"yvmb-prevnext",d.getFullYear(),d.getMonth(),!1));for(let t=0;t<g;t++)v.append(e(t+1,null,m.getFullYear(),m.getMonth(),!0))}(),h.append(y,v),h}function r(e){const s=e.target,[r,a,i]=k(s,"data-yv-date",null);t.setDate(r,a,i),t.setDateSelected(i),t.setComponent("day"),Ze("day",t,o,n),je.classList.contains("hide-sidebar")||(n.setDate(t.getYear(),t.getMonth(),t.getDay()),De(t,o,n))}function i(t){e(t,".yv-monthcell__body--day-wrapper")&&r(t)}function c(){We.innerText="",We.onmousedown=null}!function(){!function(){We.innerText="";let e=t.getYear(),n=o.getGroupedYearEntries(o.getYearEntries(e));for(let t=0;t<12;t++)n[t]?We.append(s(e,t,n[t])):We.append(s(e,t,[]));n=null,e=null}(),We.onmousedown=i,o.setResetPreviousViewCallback(c);const e=document?.querySelector(".cell-current");e&&setTimeout((()=>{We.scrollTo({top:Number.parseInt(e.offsetTop)-100,behavior:"instant"})}),4)}()}const Ue=document.querySelector(".yearview"),Je=document.querySelector(".monthview"),Qe=document.querySelector(".weekview"),Xe=document.querySelector(".dayview"),Ve=document.querySelector(".listview");let[Ke,Ge]=[null,null];function Ze(e,t,o,n){Ke=Ge,Ge=e,function(){const e=[Ue,Je,Qe,Xe,Ve],t=o.getResetPreviousViewCallback();null!==Ke&&null!==t&&Ke!==Ge&&t();for(const t of e)t.classList.add("hide-view")}(),document.title=t.getMonthName(),function(e){switch(e){case"day":t.setComponent(e),i(t,e),he(t,o,n),Xe.classList.remove("hide-view");break;case"week":t.setComponent(e),i(t,e),Pe(t,o,n),Qe.classList.remove("hide-view");break;case"month":t.setComponent(e),i(t,e),$e(t,o,n),Je.classList.remove("hide-view");break;case"year":t.setComponent(e),i(t,e),ze(t,o,n),Ue.classList.remove("hide-view");break;case"list":t.setComponent(e),i(t,e),ve(t,o,n),Ve.classList.remove("hide-view");break;default:t.setComponent("month"),i(t,"month"),$e(t,o,n),Je.classList.remove("hide-view")}}(e)}const et=document.querySelector(".datepicker"),tt=document.querySelector(".datepicker-overlay"),ot=document.querySelector(".datepicker__body--dates"),nt=document.querySelector(".datepicker-title"),st=document.querySelector(".datepicker-change-date"),rt=document.querySelector(".prev"),at=document.querySelector(".next"),it=document.querySelector(".yearpicker-title"),ct=document.querySelectorAll(".monthpicker__month");function lt(t,n,s,r){let a,i=s.getMonthArray(),c=0;const l="form"===r?s.getDateSelected():t.getDateSelected();let[d,u]=[null,null];const m=o((function(e){const t=st.classList.contains("show-dpcd");switch(e.key){case"ArrowDown":t?L(-1,!1):v();break;case"ArrowUp":t?L(1,!1):f();break;case"ArrowRight":t?_("next"):function(){let e=document.querySelector(".datepicker__body--datename-selected");const t=e.parentElement,o=t?.nextElementSibling?.firstElementChild;if(o&&null!=o){e.classList.remove("datepicker__body--datename-selected"),o.classList.add("datepicker__body--datename-selected");const t=o.getAttribute("data-datepicker-date"),n=Number.parseInt(t.split("-")[2]);return void s.setDateSelected(n)}f(),s.setDateSelected(1),e=document.querySelector(".datepicker__body--datename-selected"),e.classList.remove("datepicker__body--datename-selected");document.querySelectorAll(".datepicker__body--datename")[0].classList.add("datepicker__body--datename-selected")}();break;case"ArrowLeft":t?_("prev"):function(){let e=document.querySelector(".datepicker__body--datename-selected");const t=e.parentElement,o=t?.previousElementSibling?.firstElementChild;if(o&&null!=o)return e.classList.remove("datepicker__body--datename-selected"),void o.classList.add("datepicker__body--datename-selected");{v();const t=s.getDaysInMonth();s.setDateSelected(+t),e=document.querySelector(".datepicker__body--datename-selected"),e.classList.remove("datepicker__body--datename-selected");document.querySelectorAll(".datepicker__body--datename").at(-1).classList.add("datepicker__body--datename-selected")}}();break;case"Enter":if(st.classList.contains("show-dpcd"))C();else{const e=document.querySelector(".datepicker__body--datename-selected");if(null!==e&&e){y(null,k(e,"data-datepicker-date"))}else y(null,[s.getYear(),s.getMonth(),28])}break;case"Escape":st.classList.contains("show-dpcd")?C():D()}}),100);function g(){const e=s.getYear(),t=s.getMonthName();nt.textContent=`${t} ${e}`}function p(e){ot.innerText="";let o=n.getMonthEntryDates(e),r=t.getWeek();for(let n=0;n<e.length;n++){const i=document.createElement("div"),d=document.createElement("div");i.classList.add("datepicker__body--dates-cell"),d.classList.add("datepicker__body--datename"),e[n].getMonth()!==s.getMonth()&&d.classList.add("datepicker__body--datename-disabled"),b(e[n],r)&&"week"===t.getComponent()&&(a=!0),a?(c++,c<=7&&i.classList.add("datepicker__body--dates-week")):i.classList.remove("datepicker__body--dates-week"),e[n].getDate()===l&&e[n].getMonth()===s.getMonth()&&(d.classList.contains("datepicker__body--datename-today")||(d.setAttribute("class","datepicker__body--datename"),d.classList.add("datepicker__body--datename-selected"))),t.isToday(e[n])&&(d.setAttribute("class","datepicker__body--datename"),d.classList.add("datepicker__body--datename-today")),d.innerText=e[n].getDate();const u=h(e[n]);d.setAttribute("data-datepicker-date",u),o.includes(u)?d.classList.contains("datepicker__body--datename-today")||d.classList.contains("datepicker__body--datename-selected")||(d.setAttribute("class","datepicker__body--datename"),d.classList.add("datepicker__body--datename-entries")):d.classList.remove("datepicker__body--datename-entries"),i.append(d),ot.append(i)}r=null,o=[]}function y(e,o){let[a,i,c]=[null,null,null];if(null===e)a=o[0],i=o[1],c=o[2];else{const t=k(e.target,"data-datepicker-date");a=t[0],i=t[1],c=t[2]}"form"===r?(!function(e,o,n){s.setDate(e,o,n),t.setDateSelected(n);const r=s.getDate(),a=document.querySelector(".active-form-date");a.setAttribute("data-form-date",`${e}-${o}-${n}`),a.textContent=`${s.getMonthName().slice(0,3)} ${n}, ${e}`;const i=document?.querySelector(".inactive-form-date"),c=i.getAttribute("data-form-date").split("-").map((e=>Number.parseInt(e))),l=new Date(c[0],c[1],c[2]),d=i.getAttribute("data-form-date-type");(S(l,r)&&"end"===d||S(r,l)&&"start"===d)&&(i.setAttribute("data-form-date",`${e}-${o}-${n}`),i.textContent=`${s.getMonthName().slice(0,3)} ${n}, ${e}`)}(a,i,c),D()):function(e,o,r){t.setDate(e,o,r),t.setDateSelected(r),Ze(t.getComponent(),t,n,s),s.setDate(e,o,r),D()}(a,i,c)}function f(){s.setNextMonth(),i=s.getMonthArray(),p(i),g()}function v(){s.setPrevMonth(),i=s.getMonthArray(),p(i),g()}function w(e,t){const o=e;if(t||o!==s.getMonth()){s.setMonth(o);for(const[e,t]of ct.entries())e===o?t.classList.add("monthpicker__active-month"):t.classList.remove("monthpicker__active-month")}}function L(e,t){if(t)return void(it.textContent=s.getYear());const o=Number.parseInt(s.getYear())+e;o!=+s.getYear()&&(s.setYear(o),it.textContent=o)}function _(e){const t=document.querySelector(".monthpicker__active-month"),o=Number.parseInt(t.getAttribute("data-dp-month"));w("next"===e?(o+1)%12:0===o?11:o-1)}function x(){d=s.getMonth(),u=s.getYear(),st.classList.add("show-dpcd"),L(null,!0),w(s.getMonth(),!0)}function C(){d===s.getMonth()&&u===s.getYear()||(i=s.getMonthArray(),p(i),g()),st.classList.remove("show-dpcd")}function D(){et.classList.add("hide-datepicker"),tt.classList.add("hide-datepicker-overlay"),C();const e=n.getActiveOverlay().has("hide-form-overlay");!("list"!==t.getComponent())&&e||(rt.removeAttribute("style"),at.removeAttribute("style")),"form"===r&&document.querySelector(".active-form-date")?.classList.remove("active-form-date"),ot.innerText="",et.removeAttribute("tabindex"),c=0,d=null,u=null,i=[],tt.onclick=null,et.onclick=null,document.removeEventListener("keydown",m)}function A(t){const o=e(t,".datepicker__body--datename"),n=e(t,".datepicker-nav--next"),s=e(t,".datepicker-nav--prev"),r=e(t,".datepicker-title"),a=e(t,".close-change-date"),i=e(t,".yearpicker-next"),c=e(t,".yearpicker-prev"),l=e(t,".monthpicker__month");if(o)y(t);else if(n)f();else if(s)v();else if(r)x();else if(a)C();else if(i)L(1,!1);else if(c)L(-1,!1);else if(l){w(Number.parseInt(t.target.getAttribute("data-dp-month")),!1)}else;}g(),p(i),n.setResetDatepickerCallback(D),tt.onclick=D,et.onclick=A,document.addEventListener("keydown",m),i=[]}const dt={0:{shortcut:"0",action:"change app theme"},1:{shortcut:["1","D"],action:"open day view"},2:{shortcut:["2","W"],action:"open week view"},3:{shortcut:["3","M"],action:"open month view"},4:{shortcut:["4","Y"],action:"open year view"},5:{shortcut:["5","L"],action:"open list view"},6:{shortcut:"v",action:"toggle view options"},7:{shortcut:"t",action:"set date to today"},8:{shortcut:"g",action:"enter date manually"},9:{shortcut:"n",action:"next period"},10:{shortcut:"p",action:"previous period"},11:{shortcut:"s",action:"toggle sidebar"},12:{shortcut:"f",action:"open form"},13:{shortcut:"+",action:"open new category form"},14:{shortcut:"a",action:"open settings"},15:{shortcut:["/","?"],action:"open keyboard shortcuts"},16:{shortcut:"e",action:"(entry options) opens form with entry details"},17:{shortcut:"↑",action:["(datepicker) set date to next month/week","(yearpicker) set year to next year"]},18:{shortcut:"↓",action:["(datepicker) set date to prev month/week","(yearpicker) set year to prev year"]},19:{shortcut:"←",action:["(datepicker) set date to prev day","(monthpicker) set month to prev month"]},20:{shortcut:"→",action:["(datepicker) set date to next day","(monthpicker) set month to next month"]},21:{shortcut:"DELETE",action:"(entry options) delete entry"},22:{shortcut:"ENTER",action:["(datepicker) set date to selected date","(form) submit form"]},23:{shortcut:"ESCAPE",action:"close any active modal/popup/form"}};const ut=function(e,t){function o(e,t){const[o,n,s]=function(e){const t=Number.parseInt(e.slice(1,3),16)/255,o=Number.parseInt(e.slice(3,5),16)/255,n=Number.parseInt(e.slice(5,7),16)/255,s=Math.max(t,o,n),r=Math.min(t,o,n);let a=0,i=0;const c=(s+r)/2;if(s!==r){const e=s-r;switch(i=c>.5?e/(2-s-r):e/(s+r),s){case t:a=(o-n)/e+(o<n?6:0);break;case o:a=(n-t)/e+2;break;case n:a=(t-o)/e+4}a/=6}return[360*a,100*i,100*c]}(e);return function(e,t,o){const n=o/100,s=t*Math.min(n,1-n)/100,r=t=>{const o=(t+e/30)%12,r=n-s*Math.max(Math.min(o-3,9-o,1),-1);return Math.round(255*r).toString(16).padStart(2,"0")};return`#${r(0)}${r(8)}${r(4)}`}((o+t)%360,n,s)}const n=structuredClone(e);for(const e in n)for(const s in n[e])n[e][s]=o(n[e][s],t);return n};const mt=new class{constructor(){this.isLocalStorageAvailable=this.checkLocalStorageAvailability(),this.memoryStorage=new Map}checkLocalStorageAvailability(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch{return!1}}setItem(e,t){this.isLocalStorageAvailable?localStorage.setItem(e,t):this.memoryStorage.set(e,t)}getItem(e){return this.isLocalStorageAvailable?localStorage.getItem(e):this.memoryStorage.get(e)||null}removeItem(e){this.isLocalStorageAvailable?localStorage.removeItem(e):this.memoryStorage.delete(e)}clear(){this.isLocalStorageAvailable?localStorage.clear():this.memoryStorage.clear()}key(e){return this.isLocalStorageAvailable?localStorage.key(e):[...this.memoryStorage.keys()][e]||null}get length(){return this.isLocalStorageAvailable?localStorage.length:this.memoryStorage.size}};class gt{constructor(){this.store=mt.getItem("store")?JSON.parse(mt.getItem("store")):[],this.userUpload={},this.colors=ut(a.colors,340),this.ctg=mt.getItem("ctg")?JSON.parse(mt.getItem("ctg")):{default:{color:this.colors.blue[4],active:!0}},this.activeOverlay=new Set,this.handleRenders={sidebar:{callback:null},datepicker:{reset:null},form:{callback:null},reconfig:{callback:null},categories:{callback:null},calendars:{previous:{reset:null},month:{reset:null,resize:null},week:{reset:null,render:null},day:{reset:null},list:{reset:null}}},this.keyboardShortcuts=dt,this.keyboardShortcutsStatus=!0,this.animationStatus=!0}initStore(){console.log(typeof Storage)}setStoreForTesting(e){this.store=e,gt.setStore(this.store)}getStoreStats(){return[this.store.length,this.getAllCtgNames().length]}getAllMethodNames(){return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter((e=>"constructor"!==e&&"getStoreStats"!==e))}static getStore(){return JSON.parse(mt.getItem("store"))||[]}static getActiveStore(){return JSON.parse(mt.getItem("activeStore"))||[]}static getCtg(){return JSON.parse(mt.getItem("ctg"))||[]}static getShortcutsStatus(){return JSON.parse(mt.getItem("keyboardShortcutsStatus"))}static getAnimationStatus(){return JSON.parse(mt.getItem("animationStatus"))}static setStore(e){mt.setItem("store",JSON.stringify(e))}static setActiveStore(e){mt.setItem("activeStore",JSON.stringify(e))}static setCtg(e){mt.setItem("ctg",JSON.stringify(e))}static setShortcutsStatus(e){mt.setItem("keyboardShortcutsStatus",JSON.stringify(e))}static setAnimationStatus(e){mt.setItem("animationStatus",JSON.stringify(e))}getColors(){return this.colors}addEntry(e){this.store.push(e),gt.setStore(this.store)}createEntry(...e){this.addEntry(new c(...e)),gt.setStore(this.store)}deleteEntry(e){this.store=this.store.filter((t=>t.id!==e)),gt.setStore(this.store)}getActiveEntries(){const e=this.getActiveCategories();if(0===e.length)return[];return this.store.filter((t=>e?e.includes(t.category):[]))}getEntry(e){return this.store.find((t=>t.id===e))}getEntries(){return this.store||[]}getEntriesByCtg(e){return this.store.filter((t=>t.category===e))}removeLastEntry(){this.store.pop(),gt.setStore(this.store)}getLastEntryId(){return this.store.at(-1).id}compareEntries(e,t){for(const o in e)if("id"!==o&&"coordinates"!==o)if("end"===o||"start"===o){if(new Date(e[o]).getTime()-new Date(t[o]).getTime()!=0)return!1}else if(e[o]!==t[o])return!1;return!0}updateEntry(e,t){let o=this.getEntry(e);o=Object.assign(o,t),gt.setStore(this.store)}sortBy(e,t,o){if(0===e.length)return[];const n=["description","title","category"].includes(t),s=(e,t)=>"desc"===o?e-t:t-e;return e.sort(((e,o)=>"start"===t?s(new Date(e.start),new Date(o.start)):"end"===t?s(new Date(e.end),new Date(o.end)):n?s(e[t].localeCompare(o[t])):s(e[t],o[t])))}getFirstAndLastEntry(){const e=this.sortBy(this.getActiveEntries(),"start","desc");return void 0===e?[0,0]:[e[0].start,e.at(-1).end]}generateCoordinates(e,t){[e,t]=[p(e),p(t)];const o=4*e.getHours()+Math.floor(e.getMinutes()/15),n=4*t.getHours()+Math.floor(t.getMinutes()/15)-o,s=o+n;return b(e,t)?{allDay:!1,x:e.getDay(),y:o,h:n,e:s}:{allDay:!0,x:e.getDay(),x2:t.getDay()}}getDayEntries(e){const t=this.getActiveEntries(),o={allDay:[],day:[]};if(0===t.length)return o;const n=t.filter((t=>{const o=new Date(t.start),[n,s,r]=[o.getFullYear(),o.getMonth(),o.getDate()];return n===e.getFullYear()&&s===e.getMonth()&&r===e.getDate()}));for(const e of n)e.coordinates=this.generateCoordinates(new Date(e.start),new Date(e.end)),e.coordinates.allDay?o.allDay.push(e):o.day.push(e);return o}getDayEntriesArray(e){const t=this.getActiveEntries();return 0===t.length?[]:t.filter((t=>{const o=new Date(t.start),[n,s,r]=[o.getFullYear(),o.getMonth(),o.getDate()];return n===e.getFullYear()&&s===e.getMonth()&&r===e.getDate()}))}getMonthEntries(e){const t=this.getActiveEntries();return 0===t.length?[]:t.filter((t=>{const o=new Date(t.start);return o>=e[0]&&o<=e.at(-1)}))}getMonthEntryDates(e){const t=this.getMonthEntries(e),o={};for(const e of t){const t=new Date(e.start),[n,s,r]=[t.getFullYear(),t.getMonth(),t.getDate()],a=`${n}-${s}-${r}`;o[a]||(o[a]=[]),o[a].push(e)}return Object.keys(o)}getGroupedMonthEntries(e){return e.reduce(((e,t)=>{const o=new Date(t.start).getDate();return e[o]||(e[o]=[]),e[o].push(t),e}),{})}getWeekEntries(e){const t=this.getActiveEntries(),[o,n]=[e[0],e[6]],s={allDay:[],day:[]};if(0===t.length)return s;const r=t.filter((e=>{const t=new Date(e.start);return t>=o&&t<=n}));for(const e of r)e.coordinates=this.generateCoordinates(new Date(e.start),new Date(e.end)),e.coordinates.allDay?s.allDay.push(e):s.day.push(e);return s}getYearEntries(e){const t=this.getActiveEntries();return 0===t.length?[]:t.filter((t=>new Date(t.start).getFullYear()===e))}getGroupedYearEntries(e){const t={};for(const o of e){const e=new Date(o.start),n=e.getMonth(),s=e.getDate();t[n]||(t[n]={}),t[n][s]||(t[n][s]=[]),t[n][s].push(o)}return t}addNewCtg(e,t){this.hasCtg(e)||(this.ctg[e]={color:t,active:!0},gt.setCtg(this.ctg))}deleteCategory(e){this.hasCtg(e)&&(delete this.ctg[e],gt.setCtg(this.ctg))}getDefaultCtg(){return Object.entries(this.ctg)[0]}getFirstActiveCategory(){for(const[e,t]of Object.entries(this.ctg))if(t.active)return e;return"default"}getFirstActiveCategoryKeyPair(){for(const[e,t]of Object.entries(this.ctg))if(t.active)return[e,t.color];const e=this.getDefaultCtg();return[e[0],e[1].color]}getActiveCategories(){const e=Object.keys(this.ctg).filter((e=>this.ctg[e].active));return e.length>0?e:[]}getActiveCategoriesKeyPair(){return Object.entries(this.ctg).filter((e=>e[1].active))}getAllCtg(){return this.ctg}getAllCtgColors(){return Object.values(this.ctg).map((e=>e.color))}getAllCtgNames(){return Object.keys(this.ctg)}getCtgColor(e){return this.ctg[e].color}getCtgLength(e){return this.store.filter((t=>t.category===e)).length}hasCtg(e){let t=!1;for(const o in this.ctg)o.toLowerCase()===e.toLowerCase()&&(t=!0);return t}moveCategoryEntriesToNewCategory(e,t,o){if(this.hasCtg(e)||!0===o){for(const o of this.store)o.category===e&&(o.category=t);gt.setStore(this.store)}this.deleteCategory(e)}removeCategoryAndEntries(e){this.hasCtg(e)&&(this.store=this.store.filter((t=>t.category!==e)),gt.setStore(this.store)),this.deleteCategory(e)}setCategoryStatus(e,t){this.hasCtg(e)&&(this.ctg[e].active=t,gt.setCtg(this.ctg))}setAllCategoryStatusExcept(e,t){for(const o in this.ctg)this.ctg[o].active=o!==e?t:!t;gt.setCtg(this.ctg)}updateCtgColor(e,t){this.hasCtg(e)&&(this.ctg[e].color=t,gt.setCtg(this.ctg))}getCtgIndex(e){return Object.keys(this.ctg).indexOf(e)}updateCtg(e,t,o){const n=Object.entries(this.ctg),s=null!==t,r=n.length;!Number.isNaN(Number.parseFloat(e))&&Number.isFinite(e)&&(e=`category ${e}`);for(let r=0;r<n.length;r++){const a=n[r][0];o===a&&(n[r][0]=e,s&&(n[r][1].color=t))}n.length===r?(this.ctg=Object.fromEntries(n),this.moveCategoryEntriesToNewCategory(o,e,!0),gt.setCtg(this.ctg)):console.error("something went wrong with category name/color change")}getShortcuts(){return this.keyboardShortcuts}setShortcutsStatus(e){this.keyboardShortcutsStatus=e,gt.setShortcutsStatus(e)}getShortcutsStatus(){const e=gt.getShortcutsStatus();return null===e||e}getAnimationStatus(){const e=gt.getAnimationStatus();return null===e||e}setAnimationStatus(e){this.animationStatus=e,gt.setAnimationStatus(e)}addActiveOverlay(e){this.activeOverlay.add(e)}removeActiveOverlay(e){return 0===this.activeOverlay.size?void 0:1===this.activeOverlay.size?void(this.activeOverlay=new Set):void(this.activeOverlay=new Set([...this.activeOverlay].filter((t=>t!==e))))}getActiveOverlay(){return this.activeOverlay}hasActiveOverlay(){return this.activeOverlay.size>0}validateUserUpload(e){return console.log(e),!0}setUserUpload(e){this.userUpload=e}getUserUpload(){return this.userUpload}setFormRenderHandle(e,t){this.handleRenders.calendars[e].render=t}setFormResetHandle(e,t){this.handleRenders.calendars[e].reset=t}setRenderFormCallback(e){this.handleRenders.form.callback=e}setRenderSidebarCallback(e){this.handleRenders.sidebar.callback=e}setResizeHandle(e,t){this.handleRenders.calendars[e].resize=t}setDataReconfigCallback(e){this.handleRenders.reconfig.callback=e}setResetDatepickerCallback(e){this.handleRenders.datepicker.reset=e}setResetPreviousViewCallback(e){this.handleRenders.calendars.previous.reset=e}setRenderCategoriesCallback(e){this.handleRenders.categories.callback=e}getRenderCategoriesCallback(){return this.handleRenders.categories.callback}getResetPreviousViewCallback(){return this.handleRenders.calendars.previous.reset}getResetDatepickerCallback(){return this.handleRenders.datepicker.reset}getDataReconfigCallback(){return this.handleRenders.reconfig.callback}getResizeHandle(e){return void 0===this.handleRenders.calendars[e]?null:this.handleRenders.calendars[e].resize}getFormRenderHandle(e){return void 0===this.handleRenders.calendars[e]?null:this.handleRenders.calendars[e].render}getFormResetHandle(e){return void 0===this.handleRenders.calendars[e].reset?null:this.handleRenders.calendars[e].reset}getRenderFormCallback(){const e=this.handleRenders.form.callback;return null!==e?e:null}getRenderSidebarCallback(){const e=this.handleRenders.sidebar.callback;return null!==e?e:null}}const pt=new gt,ht=document.querySelector(".toast");function yt(t,o){function n(){ht.classList.remove("show-toast"),ht.innerText="",document.onmousedown=null,document.onkeydown=null,pt.removeActiveOverlay("toast")}!function(){ht.innerText="";const s=document.createElement("div");s.classList.add("toast-message"),s.textContent=t;const r=document.createElement("div");r.classList.add("close-toast-icon-wrapper"),r.append(j("var(--white4)"));const a=document.createElement("div");a.classList.add("undo-toast-wrapper");const i=document.createElement("div");i.classList.add("undo-toast-message"),i.textContent="Undo",a.append(i),ht.append(s,a,r),ht.classList.add("show-toast"),pt.addActiveOverlay("toast"),document.onkeydown=function(e){e.key&&n()},document.onmousedown=function(t){if(!e(t,".toast"))return void n();const s=e(t,".undo-toast-wrapper"),r=e(t,".close-toast-icon-wrapper");if(s)return o(),void n();r&&n()}}()}const bt=document.querySelector(".sidebar"),ft=document.querySelector(".datepicker"),vt=document.querySelector(".datepicker-overlay"),wt=document.querySelector(".form-overlay"),St=document.querySelector(".form-modal-overlay"),Lt=document.querySelector(".entries__form"),kt=document.querySelector(".entries__form--header"),_t=document.querySelector(".entry-form"),xt=document.querySelector(".entries__form--body"),Ct=document.querySelector(".form--body__title-input"),Dt=document.querySelector(".form--body__description-input"),At=document.querySelector(".form--body-start__date"),Et=document.querySelector(".form--body-end__date"),Mt=document.querySelector(".form--body-start__time"),$t=document.querySelector(".form--body-end__time"),qt=document.querySelector(".form--body__category-modal"),Nt=document.querySelector(".close-options-floating__btn"),Tt=document.querySelector(".form--body__category-icon"),Yt=document.querySelector(".form--body__category-modal--wrapper"),It=document.querySelector(".form--body__category-modal--wrapper-selection"),Ft=document.querySelector(".form--body__category-modal--wrapper__color"),Ot=document.querySelector(".form--body__category-modal--wrapper__title"),Bt=document.querySelector(".form--footer__button-save");function Rt(t,n,r){let i,c,l,[d,u,m]=[null,null,null];function g(){const e=document?.querySelector(".timepicker"),t=document?.querySelector(".timepicker-overlay"),o=document?.querySelector(".timepicker-times__container"),n=document?.querySelector(".active-form-time");e&&(e.scrollTo(0,0),e.remove(),t.remove(),t.onclick=null,o.onclick=null),n&&n.classList.remove("active-form-time")}function p(){const{labels:e}=a,t=At.getAttribute("data-form-date").split("-").map((e=>Number.parseInt(e))),o=new Date(t[0],t[1],t[2]+1),n=`${o.getFullYear()}-${o.getMonth()}-${o.getDate()}`,s=e.monthsShort[o.getMonth()]+" "+o.getDate()+", "+o.getFullYear();Et.setAttribute("data-form-date",n),Et.textContent=s,$t.setAttribute("data-form-time","00:30"),$t.textContent="12:30am"}function y(t,o,n,s){const r=document.createElement("div");r.classList.add("timepicker"),r.style.top=`${t.y}px`,r.style.left=`${t.x}px`;const a=document.createElement("div");a.classList.add("timepicker-overlay");const i=document.createElement("div");i.classList.add("timepicker-times__container"),console.log({coords:t,currentTime:o,end:n,endLimit:s});let c=[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11],l=["am","am","am","am","am","am","am","am","am","am","am","am","pm","pm","pm","pm","pm","pm","pm","pm","pm","pm","pm","pm"];const d=["00","15","30","45"];let[u,m]=o.split(":").map((e=>Number.parseInt(e)));const h=u>12?"pm":"am",y=At.getAttribute("data-form-date")===Et.getAttribute("data-form-date"),b=n&&23===u&&45===m;if(u>12&&(u-=12),null!==s&&y){let[e,t]=s.split(":").map((e=>Number.parseInt(e)));if(b&&23===e&&t>=15)return p(),void g();23===e?45===t?p():(c=[12],l=["pm"],t=t.slice(-1)):(c=c.slice(+e+1),l=l.slice(+e+1))}let f,v=0;for(const[e,t]of c.entries())for(const o of d){const s=document.createElement("div");let r;s.classList.add("timepicker-time"),"am"===l[e]?r=12==+t?`00:${o}`:`${t}:${o}`:"pm"===l[e]&&(r=12===t?`12:${o}`:`${t+12}:${o}`),s.setAttribute("data-tp-time",r),s.textContent=`${t}:${o}${l[e]}`,v++,n||+t==+u&&+o==+m&&("pm"===h&&"pm"===l[e]||"am"===h&&"am"===l[e])&&(s.classList.add("timepicker-time--selected"),f=v),i.append(s)}function w(e){const t=e.target.textContent,o=e.target.getAttribute("data-tp-time");if(n)$t.textContent=t,$t.setAttribute("data-form-time",o);else{Mt.textContent=t,Mt.setAttribute("data-form-time",o);const[e,n]=o.split(":").map((e=>+e)),[s,r]=$t.getAttribute("data-form-time").split(":").map((e=>Number.parseInt(e)));y&&(23===e&&45===n?p():(e>s||e===s&&n>=r)&&function(){const e=Mt.getAttribute("data-form-time").split(":").map((e=>Number.parseInt(e))),[t,o]=[e[0]<23?e[0]+1:23,e[0]<23?e[1]:45],n=new Date(0,0,0,t,o),s=n.getHours()>12?"pm":"am",r=`${n.getHours()}:${n.getMinutes()}`,a=`${+n.getHours()%12}:${0==+n.getMinutes()?"00":n.getMinutes()}${s}`;$t.setAttribute("data-form-time",r),$t.textContent=a}())}g()}r.append(i);const[S,L]=t;r.setAttribute("style",`top:${L}px; left:${S}px;`),document.body.prepend(a,r),a.onclick=g,i.onclick=t=>{e(t,".timepicker-time")&&w(t)},n?r.scrollTo(0,0):f>0?r.scrollTo(0,Number.parseInt(40*f)-40):r.scrollTo(0,0)}function b(e,o){e.preventDefault(),"start"===o?(At.setAttribute("class","form--body-start__date active-form-date"),Et.setAttribute("class","form--body-end__date inactive-form-date")):(At.setAttribute("class","form--body-start__date inactive-form-date"),Et.setAttribute("class","form--body-end__date active-form-date"));const[s,a,i]=k(e.target,"data-form-date"),c=e.target.getBoundingClientRect(),l=Number.parseInt(c.left),d=Number.parseInt(c.bottom);let u=Number.parseInt(c.top);var m,g,p;"end"===o&&(u-=40),window.innerHeight-216<=d&&(u=window.innerHeight-242),ft.setAttribute("style",`top:${u}px;left:${l}px;`),m=s,g=a,p=i,vt.classList.remove("hide-datepicker-overlay"),ft.classList.remove("hide-datepicker"),n.addActiveOverlay("hide-datepicker-overlay"),r.setDate(m,g,p),r.setDateSelected(p),lt(t,n,r,"form")}function f(e){return new Date(...e.split("-").map((e=>Number.parseInt(e))))}function v(e){return e.split(":").map((e=>Number.parseInt(e)))}function w(e,t){return e.setHours(t[0]),e.setMinutes(t[1]),e.setSeconds(0),e}function _(e){if(e.target.classList.contains("form-input-error"))e.preventDefault(),e.target.classList.remove("form-input-error"),e.target.removeAttribute("data-form-error-message"),e.target.firstElementChild.focus();else{if(!e.target.classList.contains("form-input-error__custom-input"))return;e.target.classList.remove("form-input-error__custom-input"),e.target.removeAttribute("data-form-error-message"),e.target.focus()}}function x(){n.removeLastEntry(),Ze(l,t,n,r)}function C(){const e=document?.querySelectorAll(".form-input-error");if(e)for(const t of e)t.classList.remove("form-input-error"),t.removeAttribute("data-form-error-message")}function D(){ft.classList.contains("hide-datepicker")||(ft.classList.add("hide-datepicker"),vt.classList.add("hide-datepicker-overlay")),C(),wt.onclick=null,kt.onmousedown=null,Lt.onclick=null,document.removeEventListener("keydown",Y),Lt.classList.add("hide-form"),wt.classList.add("hide-form-overlay"),n.removeActiveOverlay("hide-datepicker-overlay"),n.removeActiveOverlay("hide-form-overlay"),_t.reset(),Dt.value="",Ct.value="",Yt.classList.contains("category-modal-open")&&M();const e=n.getFormResetHandle(l);null!==e&&(e(),n.setFormResetHandle(l,null))}function A(e,o,s,a){if(t.setDate(e.getFullYear(),e.getMonth(),e.getDate()),t.setDateSelected(e.getDate()),Ze(l,t,n,r),n.getDayEntriesArray(t.getDate()).length<=1&&(bt.classList.contains("hide-sidebar")||(t.setDateSelected(m),De(t,n,r))),D(),"create"===o)setTimeout((()=>{yt("Event created",x)}),4);else{if(!n.compareEntries(a,n.getEntry(s))){const e=()=>{!function(e,o){const s=new Date(o.start);n.updateEntry(e,{category:o.category,completed:o.completed,description:o.description,end:new Date(o.end),id:e,start:s,title:o.title}),t.setDate(s.getFullYear(),s.getMonth(),s.getDate()),t.setDateSelected(s.getDate()),Ze(l,t,n,r)}(s,a)};setTimeout((()=>{yt("Event updated",e)}),4)}}}function E(e){e.preventDefault();const t=Ct.value,o=Dt.value,[s,r]=function(){const e=f(At.getAttribute("data-form-date")),t=Mt.getAttribute("data-form-time"),[o,n]=v(t),s=f(Et.getAttribute("data-form-date")),r=$t.getAttribute("data-form-time"),[a,i]=v(r);return[w(e,[o,n]),w(s,[a,i])]}(),a=Yt.getAttribute("data-form-category"),i=function(e,t,o,s,r){const a={title:!0,description:!0,startDate:!0,endDate:!0,valid:!0};if("string"==typeof e){const t=e.trim().replaceAll(/[^\s\w-]+|\s{2,}/g," ");t.length>50?(a.title="Title must be Less than 50 characters",a.valid=!1):0===t.length&&(a.title="Title cannot be empty",a.valid=!1)}else a.title="Title cannot be empty";t.length>=200&&(a.description="Description must be less than 200 characters",a.valid=!1),n.hasCtg(o)&&o||Yt.setAttribute("data-form-category","default"),s?L(s)||(a.startDate="Start date is not valid",a.valid=!1):(a.startDate="Start date cannot be empty",a.valid=!1),r?L(r)?S(s,r)||(a.endDate="End date must be after start date",a.valid=!1):(a.endDate="End date is not valid",a.valid=!1):(a.endDate="End date cannot be empty",a.valid=!1);const i={};let c;for(const e in a)!0!==a[e]&&(i[e]=a[e],c=!0);return!c||i}(t,o,a,s,r);if(!0===i){if("edit"===Bt.getAttribute("data-form-action")){const e=Bt.getAttribute("data-form-entry-id"),i=structuredClone(n.getEntry(e));return n.updateEntry(e,{category:a,completed:!1,description:o,end:r,id:e,start:s,title:t}),void A(s,"edit",e,i)}n.createEntry(a,!1,o,r,s,t),A(s,"create",n.getLastEntryId(),null)}else!function(e){Ct.blur();const t={title:Ct,description:Dt,startDate:At,endDate:Et},o="data-form-error-message",n="form-input-error",s="form-input-error__custom-input",r="form-error__submit-btn";for(const r in e)if(t[r])if("title"===r||"description"===r)t[r].parentElement.setAttribute(o,e[r]),t[r].parentElement.classList.add(n);else{t[r].setAttribute(o,e[r]),t[r].classList.add(s);const n=t[r].parentElement.parentElement.firstElementChild.firstElementChild;n.style.fill="var(--red2)",setTimeout((()=>{n.style.fill="var(--white3)"}),1e3)}Bt.classList.add(r),setTimeout((()=>{Bt.classList.remove(r)}),1e3)}(i)}function M(){Nt.style.display="none",Yt.classList.remove("category-modal-open"),qt.classList.add("hide-form-category-modal"),It.classList.remove("hide-form-category-selection"),St.classList.add("hide-form-overlay"),Yt.removeAttribute("style"),qt.innerText=""}function $(e,t){const o=t.length;1!==o&&(Nt.removeAttribute("style"),setTimeout((()=>{xt.scrollTo({top:xt.scrollHeight,behavior:"smooth"})}),5),o>=5?Nt.setAttribute("style","top: -100px"):Nt.setAttribute("style",`top: ${20*o*-1}px`),Yt.classList.add("category-modal-open"),Yt.style.height=o<5?32*o+"px":"160px",It.classList.add("hide-form-category-selection"),qt.classList.remove("hide-form-category-modal"),qt.style.height=32*o+"px",qt.innerText="",function(e,t){const o=Yt.getAttribute("data-form-category");for(const[n,s]of t){const t=s.color,r=document.createElement("div");r.classList.add("category-modal--category"),r.style.width="200px",r.style.backgroundColor=t,r.setAttribute("data-form-category-title",n),r.setAttribute("data-form-category-color",t);const a=document.createElement("div");a.classList.add("category-modal--category-color"),a.style.backgroundColor=t;const i=document.createElement("div");if(i.classList.add("category-modal--category-title"),i.textContent=n,n===o){const e=z("var(--white4)"),t=document.createElement("div");t.classList.add("category-modal--category-check"),t.append(e),r.append(a,i,t)}else r.append(a,i);e.append(r)}}(qt,t),St.classList.remove("hide-form-overlay"))}function q(e){const t=e.getBoundingClientRect(),[o,n]=s(180,200,[Number.parseInt(t.left),Number.parseInt(t.top)],[window.innerWidth,window.innerHeight],!1);return[o,n]}function N(t){const n=e(t,".form-header--dragarea"),s=e(t,".form--header__icon-close");if(n){if(window.innerWidth<500||window.innerHeight<500)return;!function(e){const t=document.querySelector(".form--header__icon-close"),n=Lt.getBoundingClientRect(),[s,r]=[Number.parseInt(n.left),Number.parseInt(n.top)];Lt.style.margin="0",Lt.style.opacity="0.8",Lt.style.userSelect="none",Lt.style.top=r+"px",Lt.style.left=s+"px",Lt.style.bottom="0",Lt.style.right="0",t.style.pointerEvents="none",_t.style.pointerEvents="none";let[a,i]=[e.clientX,e.clientY];const[c,l]=[window.innerHeight,window.innerWidth],d=o((function(e){const[t,o]=[a-e.clientX,i-e.clientY];a=e.clientX,i=e.clientY,Lt.offsetTop<0&&(Lt.style.top="0px"),Lt.offsetLeft<0&&(Lt.style.left="0px"),Lt.offsetLeft+Lt.offsetWidth>l&&(Lt.style.left=l-Lt.offsetWidth+"px"),Lt.offsetTop+Lt.offsetHeight>c&&(Lt.style.top=c-Lt.offsetHeight+"px"),Lt.style.top=Lt.offsetTop-o+"px",Lt.style.left=Lt.offsetLeft-t+"px"}),10);document.addEventListener("mousemove",d),document.addEventListener("mouseup",(function e(){Lt.style.opacity="1",Lt.style.userSelect="all",t.removeAttribute("style"),_t.removeAttribute("style"),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e)}))}(t)}else s&&D()}function T(t){const o=e(t,".form--body-start__date"),n=e(t,".form--body-start__time"),s=e(t,".form--body-end__date"),r=e(t,".form--body-end__time"),a=e(t,".form--body__category-modal"),c=e(t,".form--body__category-modal--wrapper-selection"),l=e(t,".close-options-floating__btn"),d=e(t,".form-modal-overlay"),u=e(t,".form-input-error"),m=e(t,".form-input-error__custom-input"),g=e(t,".form--footer__button-cancel"),p=e(t,".form--footer__button-save");if(o)b(t,"start");else{if(n)return t.target.classList.add("active-form-time"),void y(q(t.target),Mt.getAttribute("data-form-time"),!1,null);if(s)b(t,"end");else{if(r)return t.target.classList.add("active-form-time"),void y(q(t.target),$t.getAttribute("data-form-time"),!0,Mt.getAttribute("data-form-time"));if(a)qt.childElementCount>0&&function(e){const t=e.target.getAttribute("data-form-category-title"),o=e.target.getAttribute("data-form-category-color");Yt.setAttribute("data-form-category",t),Tt.firstElementChild.setAttribute("fill",o),It.style.backgroundColor=o,Ft.style.backgroundColor=o,Ot.textContent=t,M()}(t);else if(c)$(0,i);else if(l)M();else if(d)M();else if(u)_(t);else{if(!m)return g?(_t.reset(),C(),I(),void M()):void(p&&E(t));_(t)}}}}function Y(e){if(ft.classList.contains("hide-datepicker")){const t=document?.querySelector(".timepicker"),o=document?.querySelector(".hide-form-category-modal");"Escape"===e.key&&(null!==t?g():null===o?M():D()),"Enter"===e.key&&(null!==t?g():null===o?M():E(e))}}function I(){i=Object.entries(n.getAllCtg()),c=n.getActiveCategoriesKeyPair(),l=t.getComponent(),d=t.getYear(),u=t.getMonth(),m=t.getDay(),Dt.value="",Ct.blur(),Ct.value="",setTimeout((()=>{Ct.focus()}),10),function(){const[e,t]=0===c.length?[i[0][0],i[0][1].color]:[c[0][0],c[0][1].color];Yt.setAttribute("data-form-category",e),It.style.backgroundColor=t,Ot.textContent=e,Ft.style.backgroundColor=t,Tt.firstElementChild.setAttribute("fill",t)}(),r.setDate(d,u,m),t.setDateSelected(m);const e=`${t.getMonthName().slice(0,3)} ${m}, ${d}`;At.textContent=e,At.setAttribute("data-form-date",h(t.getDate())),Et.textContent=e,Et.setAttribute("data-form-date",h(t.getDate()));const o=(new Date).getHours();Mt.setAttribute("data-form-time",`${o}:00`),$t.setAttribute("data-form-time",`${o}:30`);const s=(e,t)=>`${0==+e||12==+e?12:e%12}:${t}${e<12?"am":"pm"}`;Mt.textContent=s(o,"00"),$t.textContent=s(o,"30"),Bt.setAttribute("data-form-action","create"),Bt.setAttribute("data-form-id",""),kt.onmousedown=N,wt.onclick=D,Lt.onclick=T,document.addEventListener("keydown",Y)}I()}const Ht=document.querySelector(".go-to-date-overlay"),Pt=document.querySelector(".go-to-date"),Wt=document.querySelector(".go-to-input"),jt=document.querySelector(".go-to-err"),zt=document.querySelector(".cancel-go-to"),Ut=document.querySelector(".submit-go-to");function Jt(e,t,o){const{labels:n}=a,{monthsShortLower:s}=n;function r(){jt.style.display="none",jt.onmousedown=null}function i(){const n=function(e){const t=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/),o=e.match(/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+(\d{1,2})\s+(\d{4})$/i);let n,r,a;if(t)[,n,r,a]=t,n=Number.parseInt(n,10)-1,r=Number.parseInt(r,10),a=Number.parseInt(a,10);else{if(!o)return!1;{const[,e,t,i]=o;n=s.indexOf(e.toLowerCase()),r=Number.parseInt(t,10),a=Number.parseInt(i,10)}}const i=new Date(a,n,r);return i.getFullYear()===a&&i.getMonth()===n&&i.getDate()===r&&i}(Wt.value.toLowerCase());if(n instanceof Date){e.setDate(n.getFullYear(),n.getMonth(),n.getDate()),e.setDateSelected(n.getDate()),"hide"!==e.getSidebarState()&&De(e,t,o);let s=e.getComponent();"list"===s&&(s="day"),l(),Ze(s,e,t,o)}else jt.style.display="block",jt.onmousedown=r}function c(e){const t=e.key.toLowerCase();"escape"!==t?"enter"!==t||i():"block"===jt.style.display?r():l()}function l(){document.removeEventListener("keydown",c),zt.onclick=null,Ut.onclick=null,t.removeActiveOverlay("hide-gotodate"),Ht.classList.add("hide-gotodate"),Pt.classList.add("hide-gotodate"),Wt.value=""}r(),setTimeout((()=>{Wt.focus(),Wt.value=function(){const[t,o,n]=[e.getYear(),e.getMonth(),e.getDay()];return`${s[o]} ${n} ${t}`}()}),10),Ht.classList.remove("hide-gotodate"),Pt.classList.remove("hide-gotodate"),t.addActiveOverlay("hide-gotodate"),document.addEventListener("keydown",c),zt.onclick=l,Ut.onclick=i}const Qt=class{constructor(e,t){this.catname=e,this.catcolor=t,this.errMsg="",this.prevColorIdx=t,this.originalName=e,this.originalColor=t}setName(e){this.catname=e}setColor(e){this.catcolor=e}setPrevColor(e){this.prevColorIdx=e}getName(){return this.catname}getColor(){return this.catcolor}prevColor(){return this.prevColorIdx}setErrMsg(e){this.errMsg=e}getErrMsg(){return this.errMsg}getOriginalName(){return this.originalName}getOriginalColor(){return this.originalColor}},Xt=document.querySelector(".category__form"),Vt=document.querySelector(".category__form-overlay"),Kt=document.querySelector(".category__form-input"),Gt=document.querySelector(".color-picker__title"),Zt=document.querySelector(".color-picker__options"),eo=document.querySelector(".ctg-input--err");function to(e,t,o,n){const r=e.getColors(),a=Object.values(r),i=z("var(--taskcolor)"),c=new Qt(t.name,t.color);function l(e,t){const o=document.createElement("div");return o.classList.add("color-picker--option"),o.style.backgroundColor=e,o.setAttribute("data-color-hex",e),e===t&&(o.append(i),c.setColor(e)),o}function d(t,n){let s=t.trim().replaceAll(/[^\d\sA-Za-z]+|\s{2,}/g," ").trim();(function(e){return!Number.isNaN(Number.parseFloat(e))&&Number.isFinite(e)})(s)&&(s=`category ${s}`);const r=c.getOriginalName();let a=!1;if(0===s.length?(c.setErrMsg("Category name is required"),a=!0):e.hasCtg(s)&&(!o||o&&r!==s)&&(c.setErrMsg("Category already exists"),a=!0),a)return eo.classList.remove("hide-ctg-err"),eo.textContent=c.getErrMsg(),void(eo.onclick=()=>{eo.classList.add("hide-ctg-err"),Kt.focus()});{if(o){if(r===s&&c.getOriginalColor()===n)return void u();r!==s?e.updateCtg(s,n,c.getName()):e.updateCtgColor(r,n)}else e.addNewCtg(s,n);const t=e.getRenderCategoriesCallback();u(),t()}}function u(){null!==n&&n.removeAttribute("style"),Zt.innerText="",Xt.classList.add("hide-ctg-form"),Vt.classList.add("hide-ctg-form"),Kt.value="",eo.classList.add("hide-ctg-err"),e.removeActiveOverlay("hide-ctg-form"),Xt.onmousedown=null,Vt.onclick=null,document.removeEventListener("keydown",m)}function m(e){const t=e.key.toLowerCase();if("escape"===t)return eo.classList.contains("hide-ctg-err")?void u():(eo.classList.add("hide-ctg-err"),void Kt.focus());"enter"!==t||d(Kt.value,c.getColor())}function g(e,t){return e.target.closest(t)}function p(e){const t=g(e,".category__form--cancel"),o=g(e,".color-picker--option"),n=g(e,".category__form--submit");t?u():o?function(e,t){const o=e.target,n=o.getAttribute("data-color-hex");if(n===t)return;const s=document.querySelectorAll(".color-picker--option");for(const e of s)e.innerText="";o.append(i),Gt.style.backgroundColor=n,c.setColor(n)}(e,c.getColor()):n&&d(Kt.value,c.getColor())}!function(e){Zt.innerText="";for(const t of a)for(let o=1;o<8;o++)Zt.append(l(t[o],e))}(c.getColor()),function(t){if(e.addActiveOverlay("hide-ctg-form"),Vt.classList.remove("hide-ctg-form"),Xt.classList.remove("hide-ctg-form"),Xt.removeAttribute("style"),null!==n){const e=n.getBoundingClientRect(),t=Number.parseInt(e.right),o=Number.parseInt(e.top),[r,a]=s(280,352,[t-20,o-28],[window.innerWidth,window.innerHeight],!1,null);Xt.setAttribute("style",`left:${r}px;top:${a}px;`)}else Xt.setAttribute("style","left:5%;top:5%;right:5%;margin:auto;");eo.classList.add("hide-ctg-err"),Gt.style.backgroundColor=c.getColor(),setTimeout((()=>{t?Kt.value=c.getName():Kt.placeholder="Create new category",Kt.focus()}),4)}(o),Xt.onmousedown=p,Vt.onclick=u,document.addEventListener("keydown",m)}const oo=document.querySelector(".shortcuts-modal-overlay"),no=document.querySelector(".shortcuts__modal"),so=document.querySelector(".shortcuts-modal-content"),ro=document.querySelector(".close-shortcuts-modal"),ao=document.querySelector(".keyboard-disabled-sm-two");function io(e){function t(e,t){const o=document.createElement("div");o.classList.add("sm-item");const n=document.createElement("div");n.classList.add("sm-key");const s=document.createElement("span");if(Array.isArray(e)){const t=document.createElement("span");t.textContent=" or ";const o=document.createElement("span");s.textContent=e[0].toUpperCase(),o.textContent=e[1].toUpperCase(),n.append(s,t,o)}else"ENTER"!=e&&"ESCAPE"!=e&&"DELETE"!=e||s.classList.add("key-full"),s.textContent=e.toUpperCase(),n.append(s);const r=document.createElement("div");if(r.classList.add("sm-description"),Array.isArray(t)){o.classList.add("sm-item--full"),r.classList.add("sm-description--full");const e=document.createElement("span"),n=document.createElement("span");e.textContent=t[0],n.textContent=t[1],r.append(e,n)}else r.textContent=t;return o.append(n,r),o}function o(){so.innerText="",oo.classList.add("hide-shortcuts"),no.classList.add("hide-shortcuts"),e.removeActiveOverlay("hide-shortcuts"),document.removeEventListener("keydown",n)}function n(e){const t=e.key.toLowerCase();"escape"!==t&&"/"!==t&&"?"!==t||o()}function s(e){e?(ao.setAttribute("data-tooltip","Keyboard shortcuts enabled"),ao.firstElementChild.setAttribute("fill","var(--primary1)")):(ao.setAttribute("data-tooltip","Keyboard shortcuts disabled"),ao.firstElementChild.setAttribute("fill","var(--red1)"))}!function(){oo.classList.remove("hide-shortcuts"),no.classList.remove("hide-shortcuts"),e.addActiveOverlay("hide-shortcuts"),s(e.getShortcutsStatus());const r=e.getShortcuts();for(let e=0;e<Object.values(r).length;e++){const o=Object.values(r)[e];so.append(t(o.shortcut,o.action))}oo.onclick=o,ro.onclick=o,ao.onclick=function(){const t=!1===e.getShortcutsStatus();s(t),e.setShortcutsStatus(t)},document.addEventListener("keydown",n)}()}const co=document.querySelector(".sb__categories"),lo=document.querySelector(".sb__categories--body"),uo=document.querySelector(".sb__categories--body-form"),mo=document.querySelector(".sb__categories--header"),go=document.querySelector(".sbch-caret");function po(t,o,n){const r=o.getDefaultCtg()[0];function a(){Ze(t.getComponent(),t,o,n)}function i(){De(t,o,n)}function c(){uo.innerText="";const e=o.getAllCtg(),t=Object.keys(e);for(let o=0;o<t.length;o++){const[n,s,r]=[t[o],e[t[o]].color,e[t[o]].active];l(n,s,r)}}function l(e,t,o){const n=document.createElement("div");n.classList.add("sbch-form--item");const s=document.createElement("div");s.classList.add("sbch-form--item__col");const a=document.createElement("div");a.classList.add("sbch-form--item__checkbox--wrapper");const i=document.createElement("button");let c;i.classList.add("sbch-form--item__checkbox"),i.setAttribute("data-sbch-checked",`${o}`),i.setAttribute("data-sbch-category",e),o?(i.style.backgroundColor=t,c=z("var(--taskcolor0)")):(i.style.backgroundColor="var(--black1)",c=z("none")),i.style.border=`2px solid ${t}`,i.append(c),a.append(i);const l=document.createElement("span");l.classList.add("sbch-form--item__label"),l.textContent=e,s.append(a,l);const d=document.createElement("div");d.classList.add("sbch-form--item__col--actions");const u=document.createElement("button");u.classList.add("sbch-col--actions__delete-icon"),u.setAttribute("data-sbch-category",e),u.setAttribute("data-sbch-color",t);const m=document.createElement("button");m.classList.add("sbch-col--actions__edit-icon"),m.setAttribute("data-sbch-category",e),m.setAttribute("data-sbch-color",t),e.toLowerCase()===r?m.classList.add("sbch-col--actions__edit-icon--immutable"):(u.append(j("var(--white2)")),d.append(u)),m.append(P("var(--white2)")),d.append(m),n.append(s,d),uo.append(n)}function d(t){const n=e(t,".sbch-col__one"),r=e(t,".sbch-col--actions__edit-icon"),l=e(t,".sbch-col--actions__delete-icon"),d=e(t,".sbch-form--item__col"),u=e(t,".sbch-plus");if(n)return lo.classList.toggle("toggle-category--modal"),lo.classList.contains("toggle-category--modal")?go.classList.remove("sbch-caret--open"):go.classList.add("sbch-caret--open"),mo.style.backgroundColor="var(--black0)",void setTimeout((()=>{mo.style.backgroundColor="var(--black1)"}),200);if(r){const e={name:t.target.getAttribute("data-sbch-category"),color:t.target.getAttribute("data-sbch-color")},n=t.target.parentElement.parentElement;return n.style.borderBottom=`2px solid ${e.color}`,void function(e,t){const[n,r]=t,l=[e.clientX,Number.parseInt(r.getBoundingClientRect().top)-8],[d,u]=s(192,128,l,[window.innerWidth,window.innerHeight],!1,null),m=document.createElement("div");m.classList.add("popup-ctg-options"),m.style.top=`${u}px`,m.style.left=`${d}px`;const g=document.createElement("div");g.classList.add("popup-ctg-options__overlay"),o.addActiveOverlay("popup-ctg-options__overlay");const p=document.createElement("div");p.classList.add("option__open-ctg-edit"),p.textContent="Edit category (name, color)";const h=document.createElement("div");h.classList.add("option__close-other-ctg"),h.textContent="Display this only";const y=document.createElement("div");function b(e,t){document.querySelector(".popup-ctg-options").remove(),document.querySelector(".popup-ctg-options__overlay").remove(),o.removeActiveOverlay("popup-ctg-options__overlay"),e&&t.removeAttribute("style"),document.removeEventListener("keydown",w)}function f(){i(),a(),c()}function v(){b(!0,r)}function w(e){"Escape"===e.key&&v()}y.classList.add("option__open-other-ctg"),y.textContent="Display all but this",m.append(p,h,y),document.body.prepend(g,m),document.addEventListener("keydown",w),p.onclick=function(){to(o,n,!0,r),b()},g.onclick=v,h.onclick=function(){o.setAllCategoryStatusExcept(n.name,!1),v(),f()},y.onclick=function(){o.setAllCategoryStatusExcept(n.name,!0),v(),f()}}(t,[e,n])}if(l)!function(e){const t=e.target.getAttribute("data-sbch-category"),n=o.getCtgColor(t),s=n,r=o.getCtgLength(t);let l=!1;const d=document.createElement("aside");d.classList.add("popup-delete-ctg__overlay");const u=document.createElement("aside");u.classList.add("popup-delete-ctg"),0===r&&(l=!0,u.classList.add("popup-delete-ctg__no-entries"));const m=1===r?"entry":"entries",g=document.createElement("div");g.classList.add("popup-delete-ctg__header");const p=document.createElement("div");p.classList.add("popup-delete-ctg__title"),p.style.border=`2px solid ${n}`,p.style.backgroundColor=s,p.textContent=`removing – "${t}"`;const h=document.createElement("div");if(h.classList.add("popup-delete-ctg__stats"),h.textContent=`(${r} total ${m} in this category)`,g.append(p,h),u.append(g),!l){const e=document.createElement("div");e.classList.add("popup-delete-ctg__body");const a=document.createElement("div"),i=o.getAllCtgNames();a.classList.add("popup-delete-ctg__options"),a.classList.add("popup-delete-act"),a.style.backgroundColor=s,a.style.border=`2px solid ${n}`;const c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("name","popup-delete-ctg__option"),c.setAttribute("id","ctg-move"),c.setAttribute("checked","true");const l=document.createElement("div"),d=document.createElement("span"),g=document.createElement("select");l.classList.add("popup-delete-ctg__option--move"),d.textContent=`Move "${t}" ${m} to `,g.classList.add("popup-delete-ctg__option--move-select");for(let e=0;e<i.length;e++)if(i[e]!==t){const t=document.createElement("option");t.value=i[e],t.textContent=i[e],g.append(t)}l.append(d,g),a.append(c,l);const p=document.createElement("div");p.classList.add("popup-delete-ctg__options"),p.style.border=`2px solid ${n}`;const h=document.createElement("input");h.setAttribute("type","radio"),h.setAttribute("name","popup-delete-ctg__option"),h.setAttribute("id","ctg-delete");const y=document.createElement("div");y.classList.add("popup-delete-ctg__option--remove");const b=document.createElement("span");b.textContent=`Delete "${t}" and ${r} ${m} (irreversible)`;const f=W(n),v=e=>{if("ctg-delete"!==e.target.id&&"ctg-move"!==e.target.id&&!e.target.classList.contains("popup-delete-ctg__option--move")&&!e.target.classList.contains("popup-delete-ctg__option--move-select")){e.target.closest(".popup-delete-ctg__options").querySelector("input").checked=!0;for(const e of document.querySelectorAll(".popup-delete-ctg__options"))e.setAttribute("style",`background-color: transparent; border: 2px solid ${n};`),e.classList.remove("popup-delete-act");e.target.closest(".popup-delete-ctg__options").setAttribute("style",`background-color: ${s}; border: 2px solid ${n};`),e.target.closest(".popup-delete-ctg__options").classList.add("popup-delete-act")}};y.append(b,f),p.append(h,y),e.append(a,p),u.append(e),a.onclick=v,p.onclick=v}const y=document.createElement("div");y.classList.add("popup-delete-ctg__footer");const b=document.createElement("button");b.textContent="cancel",b.classList.add("popup-delete-ctg__btn--cancel"),b.style.backgroundColor=s;const f=document.createElement("button");f.classList.add("popup-delete-ctg__btn--proceed"),f.textContent="proceed",y.append(b,f),u.append(y),document.body.append(d,u),o.addActiveOverlay("popup-delete-ctg__overlay");const v=e=>{"Escape"===e.key&&w()},w=()=>{u.remove(),d.remove(),o.removeActiveOverlay("popup-delete-ctg__overlay"),document.removeEventListener("keydown",v)};f.onclick=()=>{if(l)o.deleteCategory(t);else{const e=document?.querySelector("input[name='popup-delete-ctg__option']:checked").id,n=document.querySelector(".popup-delete-ctg__option--move-select").value;"ctg-move"===e?o.moveCategoryEntriesToNewCategory(t,n):"ctg-delete"===e&&o.removeCategoryAndEntries(t)}w(),a(),i(),c()},d.onclick=w,b.onclick=w,document.addEventListener("keydown",v)}(t);else if(d)!function(e){const t=e.target.children[0].children[0],n=t.getAttribute("data-sbch-checked"),s=t.getAttribute("data-sbch-category"),r=o.getCtgColor(s);"true"===n?(t.setAttribute("data-sbch-checked","false"),o.setCategoryStatus(s,!1),t.style.backgroundColor="var(--black1)",t.firstChild.setAttribute("fill","none")):(t.setAttribute("data-sbch-checked","true"),o.setCategoryStatus(s,!0),t.style.backgroundColor=r,t.firstChild.setAttribute("fill","var(--taskcolor0)")),i(),a()}(t);else if(u){const e={name:"new category",color:o.getDefaultCtg()[1].color};to(o,e,!1,t.target)}else;}(()=>{c();o.setRenderCategoriesCallback((()=>{c(),a()})),co.onmousedown=d})()}const ho=function(e){return new Promise((t=>{if(navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)navigator.clipboard.writeText(e).then((()=>t(e))).catch((()=>t("")));else if(window.isSecureContext){const o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",o.setAttribute("readonly",""),document.body.append(o),o.focus(),o.select();try{const n=document.execCommand("copy");o.remove(),t(n?e:"")}catch{o.remove(),t("")}}else t("")}))},yo=document.querySelector(".sb__info"),bo=document.querySelector(".sb__info-popup"),fo=document.querySelector(".sb__info-popup-overlay"),vo=document.querySelector(".select-popup-info"),wo=document.querySelector(".close-sb-info"),So=document.querySelector(".sbip-title"),Lo=document.querySelector(".sbip-content");function ko(t){const o={notes:{title:"Breakdown of project & current status",content:"These are my project notes"},privacy:{title:"Cookies and Data Privacy",content:"This project uses an open source license"},terms:{title:"Code license and terms of use",content:"All data is stored locally meaning no data is sent to a server."}};function n(){t.removeActiveOverlay("hide-sb-info-popup"),bo.classList.add("hide-sb-info-popup"),fo.classList.add("hide-sb-info-popup"),document.removeEventListener("keydown",a),fo.onclick=null,wo.onclick=null}function s(e){So.innerText=o[e].title,Lo.innerText=o[e].content}function r(e){s(e.target.value)}function a(e){"Escape"===e.key&&n()}function i(e){const o=["notes","privacy","terms"].indexOf(e);vo.selectedIndex=o,t.addActiveOverlay("hide-sb-info-popup"),bo.classList.remove("hide-sb-info-popup"),fo.classList.remove("hide-sb-info-popup"),s(vo.value),vo.onchange=r,fo.onclick=n,wo.onclick=n,document.addEventListener("keydown",a)}yo.onmousedown=function(t){const o=e(t,".sb__project-notes"),n=e(t,".sb__privacy"),s=e(t,".sb__terms"),r=e(t,".sbl-email");o?i("notes"):n?i("privacy"):s?i("terms"):r&&ho("ottofy@zohomail.com")}}const _o=document.querySelector(".sidebar-sub-menu__overlay"),xo=document.querySelector(".sidebar-sub-menu"),Co=document.querySelector(".body"),Do=document.querySelectorAll(".theme-radio__input"),Ao=document.querySelector(".smia-toggle-shortcuts-checkbox"),Eo=document.querySelector(".smdt-toggle-checkbox"),Mo=document.querySelector(".keyboard-disabled-sm");function $o(t,o){const s=["dark","light","contrast"],r="hide-sidebar-sub-menu";function i(e){const t=document.querySelector(".sb-sub-popup-confirm");if("Escape"===e.key){if(t)return t.remove(),void _o.classList.remove("sub-overlay-vis");c(),_o.classList.remove("sub-overlay-vis")}if("a"===e.key.toLowerCase()){if(t)return;c()}}function c(){const e=document.querySelector(".sb-sub-popup-confirm");if(e)return e.remove(),void _o.classList.remove("sub-overlay-vis");t.removeActiveOverlay(r),xo.classList.add(r),_o.classList.add(r),document.removeEventListener("keydown",i),_o.onclick=null}function l(e){e?(Mo.setAttribute("data-tooltip","Keyboard shortcuts enabled"),Mo.firstElementChild.setAttribute("fill","var(--primary1)")):(Mo.setAttribute("data-tooltip","Keyboard shortcuts disabled"),Mo.firstElementChild.setAttribute("fill","var(--red1)"))}function d(){const e=JSON.stringify(mt),[o,n]=t.getStoreStats(),s=`ENT_${o}_CAT_${n}_${function(){const{monthsShort:e}=a,t=new Date;return`${e[t.getMonth()].toUpperCase()}${Number.parseInt(t.getDate())}`}()}`,r=new Blob([e],{type:"application/json"}),i=URL.createObjectURL(r),c=document.createElement("a");c.href=i,c.download=s+".json",document.body.append(c),c.click(),URL.revokeObjectURL(i),c.remove()}function u(){_o.classList.remove("sub-overlay-vis");const e=document.querySelector(".sb-sub-popup-confirm");e&&e.remove()}function m(e){if("download"===e)d();else{const e=function(){const e=document.createElement("div");e.classList.add("sb-sub-popup-confirm");const[o,n]=t.getStoreStats();let s,[r,a]=[!1,!1];o>0&&(r=`Overwriting ${o} entries`),n>1&&(a=2===n?"1 category.":+n-1+" categories."),s=r&&a?`${r} and ${a}`:r&&!a?`${r}.`:!r&&a?`No entries. Overwriting ${a}`:"Current calendar has no entries or categories.";const i=document.createElement("div");i.classList.add("sb-sub-popup-subtitle"),i.textContent=s;const c=document.createElement("div");c.classList.add("sb-sub-popup-subtitle"),c.textContent="This action is irreversible.";const l=document.createElement("div");l.classList.add("sb-sub-popup-title"),l.textContent='Please ensure you have a valid backup before proceeding. Use the "validate .json" button next to "upload .json" to check that everything is in order.';const d=document.createElement("div");d.classList.add("sb-sub-popup-btns");const u=document.createElement("button");u.classList.add("sb-sub-popup-btn--cancel"),u.textContent="Cancel";const m=document.createElement("button");return m.classList.add("sb-sub-popup-btn--proceed"),m.textContent="Proceed",d.append(u,m),console.log(e),e.append(i,c,l,d),e}();document.body.append(e),_o.classList.add("sub-overlay-vis");const o=e.querySelector(".sb-sub-popup-btn--cancel"),n=e.querySelector(".sb-sub-popup-btn--proceed");o.onclick=u,n.onclick=()=>async function(e,t){return new Promise(((o,n)=>{const s=document.createElement("input");s.type="file",s.accept="application/json",s.onchange=async r=>{try{const n=r.target.files[0];if(!n)throw new Error("No file selected");const s=await n.text(),a=JSON.parse(s);e.setUserUpload(a),t(),o(a)}catch(e){console.error("Error processing file:",e),n(e)}finally{s.remove(),t()}},document.body.append(s),s.click()}))}(t,c).then((e=>{console.log("JSON upload successful:",e)})).catch((e=>{console.error("JSON upload failed:",e)}))}}function g(e){const t=document.querySelector(".toggle-animations-icon__sm"),o={on:document.querySelector(".tai-on"),off:document.querySelector(".tai-off")};e?(o.on.classList.remove("hide-tai"),o.off.classList.add("hide-tai"),t.setAttribute("data-tooltip","Animations Enabled")):(o.on.classList.add("hide-tai"),o.off.classList.remove("hide-tai"),t.setAttribute("data-tooltip","Animations Disabled"))}function p(e){const o=!1===Eo.checked;t.setAnimationStatus(o),g(o),e&&(Eo.checked=o),o?Co.classList.remove("disable-transitions"):Co.classList.add("disable-transitions")}function h(s){const r=e(s,".down-json"),a=e(s,".upload-json"),i=e(s,".theme-option"),d=e(s,".toggle-kb-shortcuts-btn__smia"),u=e(s,".smia-disable-shortcuts__btn"),g=e(s,".keyboard-disabled-sm"),h=e(s,".smdt-toggle"),y=e(s,".toggle-animations-icon__sm"),b=e(s,".close-sub-menu");if(r)m("download");else if(a)m("upload");else{if(!i)return d?(c(),void io(t)):void(u?function(){const e=!1===Ao.checked;t.setShortcutsStatus(e),l(e)}():g?function(){let e=t.getShortcutsStatus();e=!e,t.setShortcutsStatus(e),l(e),Ao.checked=e}():h?p():y?p(!0):b&&c());!function(e){const t=e.target.firstElementChild,s=t.value;t.checked=!0,s!==o.getColorScheme()&&(o.setColorScheme(s),n(o))}(s)}}!function(){const e=s.indexOf(o.getColorScheme());Do[e].checked=!0;const n=t.getShortcutsStatus();l(n),Ao.checked=n;const a=t.getAnimationStatus();g(a),Eo.checked=a,t.addActiveOverlay(r),xo.classList.remove(r),_o.classList.remove(r),document.addEventListener("keydown",i),_o.onclick=c}(),xo.onmousedown=h}const qo=document.querySelector(".body"),No=document.getElementsByName("color-scheme")[0],To=document.querySelector(".h__container"),Yo=document.querySelector(".logo"),Io=document.querySelector(".toggle-form"),Fo=document.querySelector(".sb-toggle-form-btn"),Oo=document.querySelector(".sb-data-btn"),Bo=document.querySelector(".form-overlay"),Ro=document.querySelector(".entries__form"),Ho=document.querySelector(".datepicker"),Po=document.querySelector(".datepicker-overlay"),Wo=document.querySelector(".datetime-wrapper"),jo=document.querySelector(".datetime-content"),zo=document.querySelector(".datepicker-sidebar"),Uo=document.querySelector(".sbdatepicker__body--dates"),Jo=document.querySelector(".sb__categories--body-form"),Qo=document.querySelector(".select__modal"),Xo=document.querySelector(".change-view--overlay"),Vo=document.querySelector(".change-view--wrapper"),Ko=document.querySelectorAll(".view-option"),Go=document.querySelector(".sidebar"),Zo=document.querySelector(".sb__info"),en=document.querySelector(".sb__categories"),tn=document.querySelector(".container__calendars"),on=document.querySelector(".yearview"),nn=document.querySelector(".monthview"),sn=document.querySelector(".listview__body"),rn=document.querySelector(".collapse-view");class an{constructor(){this.colorScheme="dark",this.component="month",this.sidebarState="hide",this.date=new Date,this.gmt=(new Date).getTimezoneOffset()/60,this.dateSelected=1,this.daySelected=this.date.getDate(),this.monthSelected=this.date.getMonth(),this.yearSelected=this.date.getFullYear(),this.month=this.getMonth(),this.monthArray=this.getMonthArray(),this.week=this.getWeek()}setDefaults(){const e={yearSelected:[this.date.getFullYear(),an.setLocalYear],monthSelected:[this.date.getMonth(),an.setLocalMonth],daySelected:[this.date.getDate(),an.setLocalDay],dateSelected:[1,an.setLocalDateSelected],colorScheme:["dark",an.setLocalColorScheme],component:["month",an.setLocalComponent],sidebarState:["hide",an.setLocalSidebarState]};for(const[t,o]of Object.entries(e))if(null===mt.getItem(t)){const[e,n]=o;void 0===this[t]&&(this[t]=e),n(this[t])}}static getLocalDay(){return void 0===+mt.getItem("daySelected")?1:+mt.getItem("daySelected")}static getLocalMonth(){return void 0===+mt.getItem("monthSelected")?1:+mt.getItem("monthSelected")}static getLocalYear(){return void 0===+mt.getItem("yearSelected")?1:+mt.getItem("yearSelected")}static getLocalDateSelected(){return+mt.getItem("dateSelected")}static getLocalComponent(){return mt.getItem("component")}static getLocalColorScheme(){return mt.getItem("colorScheme")}static getLocalSidebarState(){return mt.getItem("sidebarState")}static setLocalDay(e){mt.setItem("daySelected",e)}static setLocalMonth(e){mt.setItem("monthSelected",e)}static setLocalYear(e){mt.setItem("yearSelected",e)}static setLocalDateSelected(e){mt.setItem("dateSelected",e)}static setLocalComponent(e){mt.setItem("component",e)}static setLocalSidebarState(e){mt.setItem("sidebarState",e)}static setLocalColorScheme(e){mt.setItem("colorScheme",e)}getAllMethodNames(){return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter((e=>"constructor"!==e&&"getStoreStats"!==e))}getColorScheme(){return an.getLocalColorScheme()}setColorScheme(e){this.colorScheme=e,an.setLocalColorScheme(e)}setSidebarState(e){this.sidebarState=e,an.setLocalSidebarState(e)}toggleSidebarState(){this.sidebarState="open"===this.getSidebarState()?"hide":"open",an.setLocalSidebarState(this.sidebarState)}getComponent(){return an.getLocalComponent()||"month"}setComponent(e){this.component=e,an.setLocalComponent(e)}getSidebarState(){return an.getLocalSidebarState()||"hide"}setDay(e){this.daySelected=e,an.setLocalDay(e)}setMonth(e){this.monthSelected=e,an.setLocalMonth(e)}setYear(e){this.yearSelected=e,an.setLocalYear(e)}setDate(e,t,o){this.setYear(e),this.setMonth(t),this.setDay(o)}setDateSelected(e){this.dateSelected=e,an.setLocalDateSelected(e)}setPrevDay(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()-1);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setPrevWeek(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()-7);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setPrevMonth(){const e=new Date(this.getYear(),+this.getMonth()-1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setPrevYear(){this.setYear(this.getYear()-1)}setNextDay(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()+1);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextWeek(){const e=new Date(this.getYear(),this.getMonth(),this.getDay()+7);this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextMonth(){const e=new Date(this.getYear(),this.getMonth()+1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextYear(){this.setYear(this.getYear()+1)}getGmt(){return this.gmt}getDateSelected(){return+an.getLocalDateSelected()}getDay(){return+an.getLocalDay()}getMonth(){return+an.getLocalMonth()}getYear(){return+an.getLocalYear()||this.date.getFullYear()}getDate(){return new Date(this.getYear(),this.getMonth(),this.getDay())}getToday(){return this.date}getWeek(){const e=this.getDate();return e.setDate(e.getDate()-e.getDay()),e}getWeekday(){return this.getDate().getDay()}getWeekArray(){const e=this.getWeek(),t=[];for(let o=0;o<7;o++)o<6?t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate()+o)):t.push(new Date(e.getFullYear(),e.getMonth(),e.getDate()+o,23,59,59,999));return t}getWeekRange(){const{labels:e}=a,t=this.getWeekArray(),[o,n]=[t[0].getMonth(),t[6].getMonth()],[s,r]=[t[0].getDate(),t[6].getDate()];return o===n?`${e.monthsShort[o]} ${s} – ${r}, ${t[0].getFullYear()}`:`${e.monthsShort[o]} ${s} – ${r} ${e.monthsShort[n]}, ${t[1].getFullYear()}`}getWeekNumber(){const e=new Date(Date.UTC(this.getYear(),this.getMonth(),this.getDay()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const t=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-t)/864e5+1)/7)}getMonthName(){const{labels:e}=a;return e.monthsLong[this.getMonth()]}getDaysInMonth(){return new Date(this.getYear(),this.getMonth()+1,0).getDate()}getMonthArrayStartDay(){return new Date(this.getYear(),this.getMonth(),1).getDay()}getMonthArrayStart(){const e=[],[t,o]=[this.getYear(),this.getMonth()];for(let n=0;n<this.getMonthArrayStartDay();n++)e.push(new Date(t,o,0-n));return e}getMonthArrayEndDay(){return new Date(this.getYear(),this.getMonth()+1,0).getDay()}getMonthArrayEnd(e){const t=[],[o,n]=[this.getYear(),this.getMonth()];if(e){for(let e=1;e<8;e++)t.push(new Date(o,+n+1,e));return t}for(let e=1;e<7-this.getMonthArrayEndDay();e++)t.push(new Date(o,+n+1,e));return t}getMonthArray(){const e=[],t=this.getMonthArrayStart(),o=this.getDaysInMonth(),[n,s]=[this.getYear(),this.getMonth()];let r=this.getMonthArrayEnd();for(let o=t.length-1;o>=0;o--)e.push(t[o]);for(let t=1;t<=o;t++)e.push(new Date(n,s,t));e.at(-1).setHours(23,59,59,999),28===e.length&&r.length<7&&(r=this.getMonthArrayEnd(!0));for(let t=0;t<r.length;t++)t===r.length-1&&r[t].setHours(23,59,59,999),e.push(r[t]);return e}isToday(e){return b(e||this.getDate(),new Date)}}class cn{constructor(){this.date=new Date,this.dateSelected=this.date.getDate(),this.daySelected=this.date.getDate(),this.monthSelected=this.date.getMonth(),this.yearSelected=this.date.getFullYear(),this.month=this.getMonth(),this.monthArray=this.getMonthArray()}setDefaults(){const e={pickerYearSelected:[this.yearSelected,this.date.getFullYear(),cn.setLocalPickerYear],pickerMonthSelected:[this.monthSelected,this.date.getMonth(),cn.setLocalPickerMonth],pickerDaySelected:[this.daySelected,this.date.getDate(),cn.setLocalPickerDay],pickerDateSelected:[this.dateSelected,this.date.getDate(),cn.setLocalPickerDateSelected]};for(const[t,o]of Object.entries(e))if(null===mt.getItem(t)){const[e,t,n]=o;void 0===this[e]&&(this[e]=t),n(e)}}static getLocalPickerDay(){return+mt.getItem("pickerDaySelected")}static getLocalPickerMonth(){return+mt.getItem("pickerMonthSelected")}static getLocalPickerYear(){return+mt.getItem("pickerYearSelected")}static getLocalPickerDateSelected(){return+mt.getItem("pickerDateSelected")}static setLocalPickerDay(e){mt.setItem("pickerDaySelected",e)}static setLocalPickerMonth(e){mt.setItem("pickerMonthSelected",e)}static setLocalPickerYear(e){mt.setItem("pickerYearSelected",e)}static setLocalPickerDateSelected(e){mt.setItem("pickerDateSelected",e)}setDay(e){this.daySelected=e,cn.setLocalPickerDay(e)}setMonth(e){this.monthSelected=e,cn.setLocalPickerMonth(e)}setYear(e){this.yearSelected=e,cn.setLocalPickerYear(e)}setDateSelected(e){this.dateSelected=e,cn.setLocalPickerDateSelected(e)}setDate(e,t,o){this.setYear(e),this.setMonth(t),this.setDay(o)}setPrevMonth(){const e=new Date(this.getYear(),this.getMonth()-1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}setNextMonth(){const e=new Date(this.getYear(),this.getMonth()+1,this.getDay());this.setDate(e.getFullYear(),e.getMonth(),e.getDate())}getDateSelected(){return+cn.getLocalPickerDateSelected()}getDay(){return+cn.getLocalPickerDay()}getMonth(){return+cn.getLocalPickerMonth()}getYear(){return+cn.getLocalPickerYear()}getDate(){return new Date(this.getYear(),this.getMonth(),this.getDay())}getToday(){return this.date}getMonthName(){const{labels:e}=a;return e.monthsLong[this.getMonth()]}getDaysInMonth(){return new Date(this.getYear(),this.getMonth()+1,0).getDate()}getMonthArrayStartDay(){return new Date(this.getYear(),this.getMonth(),1).getDay()}getMonthArrayStart(){const e=[],[t,o]=[this.getYear(),this.getMonth()];for(let n=0;n<this.getMonthArrayStartDay();n++)e.push(new Date(t,o,0-n));return e}getMonthArrayEndDay(){return new Date(this.getYear(),this.getMonth()+1,0).getDay()}getMonthArrayEnd(){const e=[],[t,o]=[this.getYear(),this.getMonth()];for(let n=1;n<7-this.getMonthArrayEndDay();n++)e.push(new Date(t,+o+1,n));return e}getMonthArray(){const e=[],t=this.getMonthArrayStart();for(let o=t.length-1;o>=0;o--)e.push(t[o]);const[o,n]=[this.getYear(),this.getMonth()];for(let t=1;t<=this.getDaysInMonth();t++)e.push(new Date(o,n,t));const s=this.getMonthArrayEnd();for(let t=0;t<s.length;t++)t===s.length-1&&s[t].setHours(23,59,59,999),e.push(s[t]);return e}}const ln=new an,dn=new cn;ln.setDefaults(),dn.setDefaults();const un=ln;!function(e,t){setTimeout((()=>{r.classList.remove("preload")}),4),n(e),null===t.getAnimationStatus()?r.classList.add("disable-transitions"):r.classList.remove("disable-transitions")}(un,pt),function(t,n,s){function r(){const e=t.getColorScheme();"light"===e?(t.setColorScheme("dark"),No.setAttribute("content","dark light"),qo.classList.remove("light-mode"),qo.classList.remove("contrast-mode")):"dark"===e?(t.setColorScheme("contrast"),No.setAttribute("content","dark"),qo.classList.remove("light-mode"),qo.classList.add("contrast-mode")):(t.setColorScheme("light"),No.setAttribute("content","light"),qo.classList.add("light-mode"),qo.classList.remove("contrast-mode"))}function a(e){Ze(e,t,s,n)}function i(){Go.classList.contains("hide-sidebar")||(n.setDate(t.getYear(),t.getMonth(),t.getDay()),De(t,s,n))}function c(){t.setPrevDay(),a("day"),t.setDateSelected(t.getDay()),i()}function l(){t.setNextDay(),a("day"),t.setDateSelected(t.getDay()),i()}function d(){t.setPrevWeek(),a("week"),i()}function u(){t.setNextWeek(),a("week"),i()}function m(){t.setPrevMonth(),a("month"),i()}function g(){t.setNextMonth(),a("month"),i()}function p(){t.setPrevYear(),a("year"),i()}function h(){t.setNextYear(),a("year"),i()}let y=250;function b(e,t,o){if(s.getAnimationStatus()){e.classList.contains("weekview--header")||(tn.style.overflowX="hidden",setTimeout((()=>{tn.style.overflowX="auto"}),200)),e.classList.remove("transition--"+("left"===t?"right":"left"));const n=`transition--${t}`;e.classList.contains(n)?(o(),y+=250):(e.classList.add(n),setTimeout((()=>{e.classList.remove(n)}),y),o(),y=250)}else o()}function f(){Rt(t,s,n),Ro.setAttribute("style","top:5%;left:5%;right:5%;bottom:5%;margin:auto;"),Ro.classList.remove("hide-form"),Bo.classList.remove("hide-form-overlay"),s.addActiveOverlay("hide-form-overlay")}function v(){$o(s,t)}function w(){if("hide"===t.getSidebarState())Io.onclick=f,Fo.onclick=null,Oo.onclick=null,Zo.onmousedown=null,en.onmousedown=null,zo.onclick=null,setTimeout((()=>{Uo.innerText="",Jo.innerText=""}),100),tn.classList.remove("container__calendars-sb-active"),Go.classList.add("hide-sidebar"),Io.classList.remove("hide-toggle--form"),Wo.classList.remove("datetime-inactive"),jo.removeAttribute("tabindex"),sn.removeAttribute("style");else{Io.onclick=null,Fo.onclick=f,Oo.onclick=v,"list"===t.getComponent()&&(sn.style.width="100%",sn.style.marginLeft="0"),tn.classList.add("container__calendars-sb-active"),Go.classList.remove("hide-sidebar"),Io.classList.add("hide-toggle--form"),Wo.classList.add("datetime-inactive"),jo.setAttribute("tabindex","-1");const e=s.getResetDatepickerCallback();null!==e&&(e(),s.setResetDatepickerCallback(null)),n.setDate(+t.getYear(),+t.getMonth(),+t.getDay()),n.setDateSelected(+t.getDay()),Go.classList.contains("hide-sidebar")||(po(t,s,n),ko(s)),i()}}function S(){if(!t.isToday()&&"list"!==t.getComponent()){const e=new Date;t.setDate(e.getFullYear(),e.getMonth(),e.getDate()),a(t.getComponent()),i()}}function L(){switch(t.getComponent()){case"day":b(document.querySelector(".dayview--header-day__number"),"right",c);break;case"week":b(document.querySelector(".weekview--header"),"right",d);break;case"month":b(nn,"right",m);break;case"year":b(on,"right",p)}}function k(){switch(t.getComponent()){case"day":b(document.querySelector(".dayview--header-day__number"),"left",l);break;case"week":b(document.querySelector(".weekview--header"),"left",u);break;case"month":b(nn,"left",g);break;case"year":b(on,"left",h)}}function _(){Qo.classList.remove("selection--active"),Xo.style.display="none",Xo.classList.add("toggle-options"),Vo.classList.add("toggle-options"),Vo.classList.remove("toggle-animate")}function x(e,o){const n=t.getComponent();"week"===e||"day"===e?(rn.onclick=q,rn.classList.remove("hide-cbt")):(rn.onclick=null,rn.classList.add("hide-cbt")),(e!==n||o)&&(_(),t.setComponent(e),a(e),function(e){const t=["day","week","month","year","list"].indexOf(e);for(let e=0;e<Ko.length;e++)e===t?Ko[e].classList.add("change-view--option__active"):Ko[e].classList.remove("change-view--option__active")}(e),(n||"week"===e)&&i(),document.activeElement.blur())}function C(){Qo.classList.add("selection--active"),Xo.classList.remove("toggle-options"),Xo.style.display="block",Vo.classList.remove("toggle-options"),Vo.classList.add("toggle-animate");Vo.onclick=e=>{x(e.target.getAttribute("data-view-option"))},Xo.onclick=_}const D=o((function(e){switch(e.key.toLowerCase()){case"d":case"1":x("day");break;case"w":case"2":x("week");break;case"m":case"3":x("month");break;case"y":case"4":x("year");break;case"l":case"5":x("list");break;case"s":t.toggleSidebarState(),w();break;case"f":f();break;case"v":(e=>{Qo.classList.contains("selection--active")?"v"===e.key.toLowerCase()&&_():C()})(e);break;case"p":L();break;case"n":k();break;case"t":S();break;case"a":v();break;case"?":case"/":io(s);break;case"0":r();break;case"g":Jt(t,s,n);break;case"+":"hide"===t.getSidebarState()&&(t.toggleSidebarState(),w()),to(s,{name:"new category",color:s.getDefaultCtg()[1].color},!1,null);break}}),150),A=o((function(o){o.preventDefault();const r=e(o,".menu"),a=e(o,".btn-today"),i=e(o,".prev"),c=e(o,".next"),l=e(o,".datetime-content"),d=e(o,".h-search"),u=e(o,".settings"),m=e(o,".select__modal");if(r)return t.toggleSidebarState(),void w();a?S():i?L():c?k():l?function(e){Ho.classList.remove("hide-datepicker"),Po.classList.remove("hide-datepicker-overlay"),n.setDate(t.getYear(),t.getMonth(),t.getDay());const o=e.target.getBoundingClientRect(),r=Number.parseInt(o.left),a=Number.parseInt(r/window.innerWidth*100);Ho.setAttribute("style",`left:${a}%;top:12px;`),lt(t,s,n,"header")}(o):d?Jt(t,s,n):u?v():m&&C()}),150);let[E,M]=["",""];function $(e){s.getShortcutsStatus()&&(s.hasActiveOverlay()||(E=e.key,"Control"!==E?"Control"!==M||"Control"===E?D(e):M="":M="Control"))}function q(){const e=t.getComponent();"week"!==e&&"day"!==e||(document.querySelector(".cv-svg-on").classList.toggle("hide-cbt"),document.querySelector(".cv-svg-off").classList.toggle("hide-cbt"),"day"===e?document.querySelector(".dayview--header").classList.toggle("dvh-collapse"):(document.querySelector(".weekview--header").classList.toggle("wvh-collapse"),document.querySelector(".weekview__grid").classList.toggle("wvh-body-collapse")))}(()=>{x(t.getComponent(),!0),Qo.setAttribute("data-value",`${t.getComponent().slice(0,1).toUpperCase()}`),Yo.setAttribute("data-current-day-of-month",(new Date).getDate()),w(),s.setRenderFormCallback(f);s.setRenderSidebarCallback((()=>{t.setSidebarState("open"),w()})),To.onclick=o(A,150),document.addEventListener("keydown",$)})()}(un,dn,pt)})();