/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/styles/aside/changeViewModule.css":
/*!***********************************************!*\
  !*** ./src/styles/aside/changeViewModule.css ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/editCategoryForm.css":
/*!***********************************************!*\
  !*** ./src/styles/aside/editCategoryForm.css ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/entryOptions.css":
/*!*******************************************!*\
  !*** ./src/styles/aside/entryOptions.css ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/form.css":
/*!***********************************!*\
  !*** ./src/styles/aside/form.css ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/goto.css":
/*!***********************************!*\
  !*** ./src/styles/aside/goto.css ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/info.css":
/*!***********************************!*\
  !*** ./src/styles/aside/info.css ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/popup.css":
/*!************************************!*\
  !*** ./src/styles/aside/popup.css ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/shortcuts.css":
/*!****************************************!*\
  !*** ./src/styles/aside/shortcuts.css ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/sidebarSubMenu.css":
/*!*********************************************!*\
  !*** ./src/styles/aside/sidebarSubMenu.css ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/timepicker.css":
/*!*****************************************!*\
  !*** ./src/styles/aside/timepicker.css ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/toast.css":
/*!************************************!*\
  !*** ./src/styles/aside/toast.css ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/aside/toggleForm.css":
/*!*****************************************!*\
  !*** ./src/styles/aside/toggleForm.css ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/containers.css":
/*!***********************************!*\
  !*** ./src/styles/containers.css ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/datepicker.css":
/*!***********************************!*\
  !*** ./src/styles/datepicker.css ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/dayview.css":
/*!********************************!*\
  !*** ./src/styles/dayview.css ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/header.css":
/*!*******************************!*\
  !*** ./src/styles/header.css ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/listview.css":
/*!*********************************!*\
  !*** ./src/styles/listview.css ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/monthview.css":
/*!**********************************!*\
  !*** ./src/styles/monthview.css ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/root.css":
/*!*****************************!*\
  !*** ./src/styles/root.css ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/sbdatepicker.css":
/*!*************************************!*\
  !*** ./src/styles/sbdatepicker.css ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/sidebar.css":
/*!********************************!*\
  !*** ./src/styles/sidebar.css ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/weekview.css":
/*!*********************************!*\
  !*** ./src/styles/weekview.css ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/styles/yearview.css":
/*!*********************************!*\
  !*** ./src/styles/yearview.css ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/components/forms/entryForm.js":
/*!*******************************************!*\
  !*** ./src/components/forms/entryForm.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setEntryForm)
/* harmony export */ });
/* harmony import */ var _config_setViews__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config/setViews */ "./src/config/setViews.js");
/* harmony import */ var _menus_datepicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../menus/datepicker */ "./src/components/menus/datepicker.js");
/* harmony import */ var _menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../menus/sidebarDatepicker */ "./src/components/menus/sidebarDatepicker.js");
/* harmony import */ var _utilities_svgs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utilities/svgs */ "./src/utilities/svgs.js");
/* harmony import */ var _toastPopups_toast__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../toastPopups/toast */ "./src/components/toastPopups/toast.js");
/* harmony import */ var _toastPopups_toastCallbacks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../toastPopups/toastCallbacks */ "./src/components/toastPopups/toastCallbacks.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");
// render methods




// svgs


// popups



// helpers


// date / time helpers



// main app sidebar
const sidebar = document.querySelector(".sidebar")
// main app datepicker / overlay
const datepicker = document.querySelector(".datepicker")
const datepickeroverlay = document.querySelector(".datepicker-overlay")

// form wrappers / overlay
const formOverlay = document.querySelector(".form-overlay")
const formModalOverlay = document.querySelector(".form-modal-overlay")
const entriesFormWrapper = document.querySelector(".entries__form")
const entriesForm = document.querySelector(".entry-form")

// title / description inputs
const titleInput = document.querySelector(".form--body__title-input")
const descriptionInput = document.querySelector(".form--body__description-input")

// start date / time
// end date / time
const startDateInput = document.querySelector(".form--body-start__date")
const endDateInput = document.querySelector(".form--body-end__date")
const startTimeInput = document.querySelector(".form--body-start__time")
const endTimeInput = document.querySelector(".form--body-end__time")
const starthourInput = document.querySelector(".form--body-start__hour")

// category modal
const categoryModal = document.querySelector(".form--body__category-modal")
const closeCategoryModalBtn = document.querySelector(".close-options-floating__btn")
const categoryModalIcon = document.querySelector(".form--body__category-icon")
const categoryModalWrapper = document.querySelector(".form--body__category-modal--wrapper")
const selectedCategoryWrapper = document.querySelector(".form--body__category-modal--wrapper-selection")
const selectedCategoryColor = document.querySelector(".form--body__category-modal--wrapper__color")
const selectedCategoryTitle = document.querySelector(".form--body__category-modal--wrapper__title")

// reset / save btns
const formSubmitButton = document.querySelector(".form--footer__button-save");
// const formClearButton = document.querySelector(".form--footer__button-cancel");

function setEntryForm(context, store, datepickerContext) {

  let categories;
  let activeCategories;
  let currentComponent;
  let [year, month, day] = [null, null, null]



  function createTimepicker(coords, range, end) {
    const timepicker = document.createElement("div")
    timepicker.classList.add("timepicker")
    timepicker.style.top = `${coords.y}px`
    timepicker.style.left = `${coords.x}px`
    const timepickerOverlay = document.createElement("div")
    timepickerOverlay.classList.add("timepicker-overlay")
    const timepickerTimesContainer = document.createElement("div")
    timepickerTimesContainer.classList.add("timepicker-times__container")

    const hours = ["12", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11"];
    const minutes = ["00", "15", "30", "45"];
    const [am, pm] = ['am', 'pm'];

    const createTimesTemp = (md, flag) => {
      hours.forEach((hour) => {
        minutes.forEach((min) => {
          const timepickerTime = document.createElement("div")
          timepickerTime.classList.add("timepicker-time")
          timepickerTime.textContent = `${hour}:${min} ${md}`
          let attr;
          md === "pm" ? attr = `${hour + 12}:${min}` : attr = `${hour}:${min}`
          timepickerTime.setAttribute("data-tp-time", attr)
          timepickerTimesContainer.appendChild(timepickerTime)
        })
      })
    }

    if (end) {
      createTimesTemp(am, false)
      createTimesTemp(pm, true)
    } else {
      createTimesTemp(am, false)
      createTimesTemp(pm, true)
    }

    const closetimepicker = () => {
      store.removeActiveOverlay("timepicker-overlay");
      timepickerOverlay.remove()
      timepicker.remove()
    }

    const setnewtime = (e) => {
      const newtime = e.target.getAttribute("data-tp-time")
      if (newtime) {
        if (end) {
          endTimeInput.value = newtime
          endTimeInput.setAttribute("data-form-time", newtime);
        } else {
          startTimeInput.textContent = newtime;
          startTimeInput.setAttribute("data-form-time", newtime);
        }
      }
    }

    const delegateNewTime = (e) => {
      if ((0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".timepicker-time")) {
        setnewtime(e)
      }
    }

    store.addActiveOverlay("timepicker-overlay");
    timepickerTimesContainer.onclick = delegateNewTime;
    timepickerOverlay.onclick = closetimepicker;
    timepicker.appendChild(timepickerTimesContainer)
    document.body.appendChild(timepickerOverlay);
    document.body.appendChild(timepicker)
  }

  function renderSidebarDatepickerForm() {
    if (!sidebar.classList.contains("hide-sidebar")) {
      // datepickerContext.setDate(year, month, day)
      context.setDateSelected(day)
      ;(0,_menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_2__["default"])(context, store, datepickerContext)
    }
  }

  function getDefaultCategory() {
    if (activeCategories.length === 0) {
      return [categories[0][0], categories[0][1].color]
    } else {
      return [activeCategories[0][0], activeCategories[0][1].color]
    }
  }

  function setInitialFormCategory() {
    let [categoryTitle, categoryColor] = getDefaultCategory();
    categoryModalWrapper.setAttribute("data-form-category", categoryTitle)

    selectedCategoryWrapper.style.backgroundColor = categoryColor
    selectedCategoryTitle.textContent = categoryTitle
    selectedCategoryColor.style.backgroundColor = categoryColor
    categoryModalIcon.firstElementChild.setAttribute("fill", categoryColor)
  }

  function setFormInitialValues() {
    // variable setup
    categories = Object.entries(store.getAllCtg())
    activeCategories = store.getActiveCategoriesKeyPair()
    currentComponent = context.getComponent()
    year = context.getYear()
    month = context.getMonth()
    day = context.getDay()
    // ****************************************** //
    // title / description
    descriptionInput.value = "";
    let tempval = titleInput.value;
    setTimeout(() => {
      titleInput.value = "";
      titleInput.focus();
      titleInput.value = tempval;
    }, 10)
    // ****************************************** //
    // category setup 
    setInitialFormCategory()
    // ****************************************** // 

    // date picker setup
    datepickerContext.setDate(year, month, day)
    context.setDateSelected(day)
    // ****************************************** // 

    // date inputs setup
    const dateSelected = `${context.getMonthName().slice(0, 3)} ${day}, ${year}`
    let temphours = new Date().getHours()

    // DATES : START/END
    startDateInput.textContent = dateSelected
    startDateInput.setAttribute("data-form-date", (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_7__.getDateForStore)(context.getDate()))
    endDateInput.textContent = dateSelected
    endDateInput.setAttribute("data-form-date", (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_7__.getDateForStore)(context.getDate()))

    // TIME : START/END 
    startTimeInput.setAttribute("data-form-time", `${temphours}:00`)
    endTimeInput.setAttribute("data-form-time", `${temphours}:30`)

    // ****************************************** // 
    // submit button setup 
    formSubmitButton.setAttribute("data-form-action", "create")
    formSubmitButton.setAttribute("data-form-id", "")
    // ****************************************** // 


    // approve form event delegation
    entriesFormWrapper.onmousedown = delegateEntryFormEvents
    formOverlay.onmousedown = handleOverlayClose
    document.addEventListener("keydown", delegateFormKeyDown)
    // ****************************************** // 
  }

  function getDatePicker(year, month, day) {
    datepickeroverlay.classList.remove("hide-datepicker-overlay")
    datepicker.classList.remove("hide-datepicker")
    store.addActiveOverlay("hide-datepicker-overlay")
    datepickerContext.setDate(year, month, day)
    datepickerContext.setDateSelected(day)
    ;(0,_menus_datepicker__WEBPACK_IMPORTED_MODULE_1__["default"])(context, store, datepickerContext, "form")
  }

  function handleOverlayClose(e) {
    if (e.target.classList.contains("form-overlay")) {
      handleFormClose(e)
    }
  }

  function handleSetDate(e, type) {
    if (type === "start") {
      startDateInput.setAttribute("class", "form--body-start__date active-form-date");
      endDateInput.setAttribute("class", "form--body-end__date inactive-form-date");
    } else {
      startDateInput.setAttribute("class", "form--body-start__date inactive-form-date");
      endDateInput.setAttribute("class", "form--body-end__date active-form-date");
    }

    const [y, m, d] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_7__.getDateFromAttribute)(e.target, "data-form-date");
    const rect = e.target.getBoundingClientRect();
    const datepickerLeft = parseInt(rect.left);
    const bott = parseInt(rect.bottom);
    let datepickerTop = parseInt(rect.top);

    if (type === "end") {
      datepickerTop -= 40;
    }

    if (window.innerHeight - 216 < bott) {
      datepickerTop = window.innerHeight - 216;
    }

    datepicker.setAttribute("style", `top:${datepickerTop}px;left:${datepickerLeft}px;`)
    getDatePicker(y, m, d)
  }

  function getDateFormatViaAttr(dateAttr) {
    const [year, month, day] = dateAttr.split("-").map(x => parseInt(x))
    return new Date(year, month, day)
  }

  function getTimeFormatViaAttr(timeAttr) {
    return timeAttr.split(":").map(x => parseInt(x))
  }

  function getDateTimeFormatted(dateAttr, timeAttr) {
    dateAttr.setHours(timeAttr[0])
    dateAttr.setMinutes(timeAttr[1])
    dateAttr.setSeconds(0)
    return dateAttr
  }

  function configDatesForStore() {
    let startDateAttr = startDateInput.getAttribute("data-form-date")
    let startDate = getDateFormatViaAttr(startDateAttr)
    let startTimeAttr = startTimeInput.getAttribute("data-form-time") || "12:00"
    let [starthour, startminute] = getTimeFormatViaAttr(startTimeAttr)

    let endDateAttr = endDateInput.getAttribute("data-form-date")
    let endDate = getDateFormatViaAttr(endDateAttr)
    let endTimeAttr = endTimeInput.getAttribute("data-form-time") || "12:30"
    let [endhour, endminute] = getTimeFormatViaAttr(endTimeAttr)

    console.log(starthour, endhour)
    if (starthour >= endhour) {
      if (starthour < 23) {
        endhour += 1
      } else {
        startminute = 0;
        endhour = 23;
        endminute = 30;
      }
    }

    return [
      getDateTimeFormatted(startDate, [starthour, startminute]),
      getDateTimeFormatted(endDate, [endhour, endminute])
    ]
  }

  function checkFormValidity(title, description, category, startDate, endDate) {
    // all inputs are valid by default 
    // if any input becomes invalid, only the error message for that input will be returned through a error object defined below
    const status = {
      title: true,
      description: true,
      startDate: true,
      endDate: true,
      valid: true,
    }
    /* ************************ */
    /*  TITLE VALIDATION CHECK */
    if (typeof title === "string") {
      const titlecheck = title.trim().replace(/[^a-zA-Z0-9\s_-]+|\s{2,}/g, ' ');
      if (titlecheck.length > 50) {
        status.title = "Title must be Less than 50 characters";
        status.valid = false;
      } else if (titlecheck.length === 0) {
        status.title = "Title cannot be empty";
        status.valid = false;
      }
    } else {
      status.title = "Title cannot be empty";
    }
    /* ***************************** */
    /*  DESCRIPTION VALIDATION CHECK */
    if (description.length >= 200) {
      status.description = "Description must be less than 200 characters";
      status.valid = false;
    }
    /* ************************** */
    /*  CATEGORY VALIDATION CHECK */
    if (!store.hasCtg(category) || !category) {
      categoryModalWrapper.setAttribute("data-form-category", "default");
    }
    /* **************************** */
    /*  START DATE VALIDATION CHECK */
    if (!startDate) {
      status.startDate = "Start date cannot be empty";
      status.valid = false;
    } else if (!(0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_7__.isDate)(startDate)) {
      status.startDate = "Start date is not valid";
      status.valid = false;
    }
    /* **************************** */
    /*  END DATE VALIDATION CHECK */
    if (!endDate) {
      status.endDate = "End date cannot be empty";
      status.valid = false;
    } else if (!(0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_7__.isDate)(endDate)) {
      status.endDate = "End date is not valid";
      status.valid = false;
    } else if (!(0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_7__.isBeforeDate)(startDate, endDate)) {
      status.endDate = "End date must be after start date";
      status.valid = false;
    }
    /* ************* */
    /*  congregate any errors  */
    let errors = {};
    let hasErrors;
    for (let key in status) {
      if (status[key] !== true) {
        errors[key] = status[key];
        hasErrors = true;
      }
    }


    if (hasErrors) {
      return errors;
    } else {
      return true;
    }
  }

  function removeErrorMessages(e) {
    if (e.target.classList.contains("form-input-error")) {
      e.preventDefault()
      e.target.classList.remove("form-input-error")
      e.target.removeAttribute("data-form-error-message")
      e.target.firstElementChild.focus()
    } else if (e.target.classList.contains("form-input-error__custom-input")) {
      e.target.classList.remove("form-input-error__custom-input")
      e.target.removeAttribute("data-form-error-message")
      e.target.focus()
    } else {
      return;
    }
  }

  /**
   * 
   * @param {object} errorMessages object key represents the input name and the value represents the string error message
   * 
   * Use object key to get the input HTML element class name and append the error message as a data attribute to the input element using the err object.
   * 
   * Set the submit button to disabled until all errors are resolved
   * 
   */
  function handleFormErrors(errorMessages) {
    titleInput.blur()
    console.log(errorMessages)

    const components = {
      title: titleInput,
      description: descriptionInput,
      startDate: startDateInput,
      endDate: endDateInput,
    }
    const err = {
      inputAttr: "data-form-error-message",
      inputClass: "form-input-error",
      svgClass: "form-input-error__custom-input",
      submitbtn: "form-error__submit-btn"
    }

    for (let key in errorMessages) {
      if (components[key]) {
        if (key === "title" || key === "description") {
          components[key].parentElement.setAttribute(err.inputAttr, errorMessages[key]);
          components[key].parentElement.classList.add(err.inputClass)
        } else {
          components[key].setAttribute(err.inputAttr, errorMessages[key])
          components[key].classList.add(err.svgClass)
          const svg = components[key].parentElement.parentElement.firstElementChild.firstElementChild
          svg.style.fill = "var(--red2)";
          setTimeout(() => { svg.style.fill = "var(--white3)" }, 1000)
        }
      }
    }

    formSubmitButton.classList.add(err.submitbtn)
    setTimeout(() => { formSubmitButton.classList.remove(err.submitbtn) }, 1000)
  }

  function removeLastFormEntry() {
    store.removeLastEntry()
    ;(0,_config_setViews__WEBPACK_IMPORTED_MODULE_0__["default"])(currentComponent, context, store, datepickerContext);
  }

  function handleFormClose(e) {
    if (!datepicker.classList.contains("hide-datepicker")) {
      datepicker.classList.add("hide-datepicker")
      datepickeroverlay.classList.add("hide-datepicker-overlay")
    }

    entriesFormWrapper.classList.add("hide-form");
    formOverlay.classList.add("hide-form-overlay");
    store.removeActiveOverlay("hide-datepicker-overlay")
    store.removeActiveOverlay("hide-form-overlay")
    entriesForm.reset();
    descriptionInput.value = "";
    titleInput.value = "";
    if (categoryModalWrapper.classList.contains("category-modal-open")) {
      closeCategoryModal()
    }
    document.removeEventListener("keydown", delegateFormKeyDown)

    const resetCurrentView = store.getFormResetHandle(currentComponent)
    if (resetCurrentView !== null) {
      resetCurrentView()
      store.setFormResetHandle(currentComponent, null)
    } else {
      return;
    }
  }

  function handleSubmissionRender(start) {
    context.setDate(start.getFullYear(), start.getMonth(), start.getDate())
    context.setDateSelected(start.getDate())

    ;(0,_config_setViews__WEBPACK_IMPORTED_MODULE_0__["default"])(currentComponent, context, store, datepickerContext);

    if (store.getDayEntriesArray(context.getDate()).length <= 1) {
      renderSidebarDatepickerForm()
    }
    handleFormClose()
    ;(0,_toastPopups_toast__WEBPACK_IMPORTED_MODULE_4__["default"])("Saving", 1000, null, null, null, removeLastFormEntry)
  }

  function handleFormSubmission(e) {
    e.preventDefault()
    const title = titleInput.value
    const description = descriptionInput.value;
    const [startDate, endDate] = configDatesForStore()
    const category = categoryModalWrapper.getAttribute("data-form-category")

    // if errors exist, validityStatus will represent an object with keys that match the input names, and values that represent the error messages as strings;
    // note that two types of submissions are possible: edit and create
    const validityStatus = checkFormValidity(
      title, description, category, startDate, endDate,
    )

    if (validityStatus !== true) {
      handleFormErrors(validityStatus)
      return;
    } else {
      // submission : edit
      if (formSubmitButton.getAttribute("data-form-action") === "edit") {
        store.updateEntry(
          formSubmitButton.getAttribute("data-form-entry-id"),
          {
            category: category,
            completed: false,
            description: description,
            end: endDate,
            id: formSubmitButton.getAttribute("data-form-entry-id"),
            start: startDate,
            title: title,
          }
        )
        handleSubmissionRender(startDate)
        return;
      } else {
        // submission : create
        store.createEntry(
          category, false, description, endDate, startDate, title
        )
        handleSubmissionRender(startDate)
      }
    }
  }

  function handleCategorySelection(e) {
    const title = e.target.getAttribute("data-form-category-title")
    const color = e.target.getAttribute("data-form-category-color")
    categoryModalWrapper.setAttribute("data-form-category", title)
    categoryModalIcon.firstElementChild.setAttribute("fill", color)

    selectedCategoryWrapper.style.backgroundColor = color
    selectedCategoryColor.style.backgroundColor = color
    selectedCategoryTitle.textContent = title
    closeCategoryModal()
  }

  function closeCategoryModal() {
    closeCategoryModalBtn.style.display = "none";
    categoryModalWrapper.classList.remove("category-modal-open")
    categoryModal.classList.add("hide-form-category-modal")
    selectedCategoryWrapper.classList.remove("hide-form-category-selection")
    formModalOverlay.classList.add("hide-form-overlay")
    categoryModalWrapper.removeAttribute("style")
  }

  function createCategoryOptions(parent, categories) {
    const currentCategory = categoryModalWrapper.getAttribute("data-form-category")


    categories.forEach(([key, value]) => {
      const color = value.color;
      const categoryWrapper = document.createElement("div")
      categoryWrapper.classList.add("category-modal--category")
      categoryWrapper.style.width = "200px"

      categoryWrapper.style.backgroundColor = color;
      categoryWrapper.setAttribute("data-form-category-title", key);
      categoryWrapper.setAttribute("data-form-category-color", color);

      const categoryDisplayColor = document.createElement("div")
      categoryDisplayColor.classList.add("category-modal--category-color")
      categoryDisplayColor.style.backgroundColor = color;

      const categoryTitle = document.createElement("div");
      categoryTitle.classList.add("category-modal--category-title");
      categoryTitle.textContent = key;

      if (key === currentCategory) {
        const checkIcon = (0,_utilities_svgs__WEBPACK_IMPORTED_MODULE_3__.createCheckIcon)("var(--white4)");
        const checkIconWrapper = document.createElement("div");
        checkIconWrapper.classList.add("category-modal--category-check");
        checkIconWrapper.appendChild(checkIcon);

        categoryWrapper.append(
          categoryDisplayColor,
          categoryTitle,
          checkIconWrapper
        );

      } else {
        categoryWrapper.append(categoryDisplayColor, categoryTitle)
      }
      parent.appendChild(categoryWrapper)
    })
  }

  function openCategoryModal(e, categories) {
    const length = categories.length;
    if (length === 1) return;

    closeCategoryModalBtn.removeAttribute("style");

    if (length >= 5) {
      closeCategoryModalBtn.setAttribute("style", `top: -100px`)
    } else {
      closeCategoryModalBtn.setAttribute("style", `top: ${(length * 20) * -1}px`)
    }

    categoryModalWrapper.classList.add("category-modal-open")
    if (length < 5) {
      categoryModalWrapper.style.height = `${length * 32}px`;
    } else {
      categoryModalWrapper.style.height = "160px";
    }

    selectedCategoryWrapper.classList.add("hide-form-category-selection");
    categoryModal.classList.remove("hide-form-category-modal");
    categoryModal.innerText = "";
    categoryModal.style.height = `${length * 32}px`;
    createCategoryOptions(categoryModal, categories)

    if (categoryModal.childElementCount > 0) {
      categoryModal.onclick = delegateCategorySelection;
    }
    formModalOverlay.classList.remove("hide-form-overlay");
    formModalOverlay.onclick = closeCategoryModal;
    closeCategoryModalBtn.onclick = closeCategoryModal;
  }

  function dragFormAnywhere(e) {
    const target = e.target;
    const wrapper = entriesFormWrapper;
    if (wrapper.style.margin === "auto") {
      wrapper.setAttribute("style", `left:${+wrapper.offsetLeft}px;top:${+wrapper.offsetTop}px;margin:0;max-width:450px;height:420px;`)
    }

    wrapper.style.opacity = "0.8";
    wrapper.style.userSelect = "none";
    let [leftBefore, topBefore] = [e.clientX, e.clientY];
    const [winH, winW] = [window.innerHeight, window.innerWidth];

    function mousemove(e) {
      let [leftAfter, topAfter] = [
        leftBefore - e.clientX, topBefore - e.clientY
      ];

      leftBefore = e.clientX;
      topBefore = e.clientY;

      if ((wrapper.offsetHeight + wrapper.offsetTop) > winH) {
        wrapper.style.top = winH - wrapper.offsetHeight + "px";
      }

      wrapper.style.top = wrapper.offsetTop - topAfter + "px";
      wrapper.style.left = wrapper.offsetLeft - leftAfter + "px";
    }

    function mouseup() {
      wrapper.style.opacity = "1";
      wrapper.style.userSelect = "all";
      document.removeEventListener("mousemove", mousemove);
      document.removeEventListener("mouseup", mouseup);
    }
    document.addEventListener("mousemove", mousemove);
    document.addEventListener("mouseup", mouseup);
  }

  function delegateCategorySelection(e) {
    if ((0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".category-modal--category")) {
      handleCategorySelection(e);
    }
  }

  function delegateEntryFormEvents(e) {
    // header
    const dragHeader = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form-header--dragarea");
    const closeicon = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form--header__icon-close");

    // form inputs
    const startdate = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form--body-start__date");
    const starttime = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form--body-start__time");
    const enddate = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form--body-end__date");
    const endtime = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form--body-end__time");
    const category = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form--body__category-modal--wrapper-selection");

    // error msg : <input> / <textarea>
    const inputError = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form-input-error");

    // error msg : custom inputs (date / time)
    const customInputError = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form-input-error__custom-input");

    // form footer buttons
    const clearbtn = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form--footer__button-cancel");
    const submitbtn = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_6__.getClosest)(e, ".form--footer__button-save");

    if (dragHeader) {
      dragFormAnywhere(e);
      return;
    }

    if (closeicon) {
      handleFormClose(e);
      return;
    }

    if (startdate) {
      handleSetDate(e, "start");
      return;
    }

    if (starttime) {
      const target = e.target
      const [x, y] = [
        target.offsetLeft,
        target.offsetTop + 36,
      ]
      createTimepicker([x, y], null, true)
      return;
    }

    if (enddate) {
      handleSetDate(e, "end");
      return;
    }

    if (endtime) {
      const target = e.target
      const [x, y] = [
        target.offsetLeft,
        target.offsetTop + 36,
      ]
      createTimepicker([x, y], null, true)
      return;
    }

    if (category) {
      openCategoryModal(e, categories);
      return;
    }

    if (inputError) {
      removeErrorMessages(e);
      return;
    }

    if (customInputError) {
      removeErrorMessages(e);
      return;
    }

    if (clearbtn) {
      entriesForm.reset();
      setFormInitialValues();
      closeCategoryModal();
      return;
    }

    if (submitbtn) {
      handleFormSubmission(e);
      return;
    }
  }

  function delegateFormKeyDown(e) {
    if (!datepicker.classList.contains("hide-datepicker")) {
      return;
    } else {

      if (e.key === "Escape") {
        handleFormClose(e);
      }

      if (e.key === "Enter") {
        handleFormSubmission(e);
      }
    }
  }


  titleInput.blur()
  setFormInitialValues()
}

/***/ }),

/***/ "./src/components/forms/formUtils.js":
/*!*******************************************!*\
  !*** ./src/components/forms/formUtils.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../locales/en */ "./src/locales/en.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");


class FormConfig {
  constructor() {
    this.monthNames = _locales_en__WEBPACK_IMPORTED_MODULE_0__["default"].labels.monthsShort;
    this.headerOffset = document.querySelector(".header");
    this.form = document.querySelector(".entries__form");
    this.formBody = document.querySelector(".entries__form--body");
    this.formTitleDescription = document.querySelectorAll(".form-body-single");
    this.formStartEndCtg = document.querySelectorAll(".form-body-double");
    this.formsubmitbtn = document.querySelector(".form--footer__button-save");
    this.formCategoryWrapper = document.querySelector(".form--body__category-modal--wrapper");
    this.formCategorySelect = document.querySelector(".form--body__category-modal--wrapper-selection");
    this.formCategoryWrapperIcon = document.querySelector(".form--body__category-modal--wrapper__color");
    this.formCategoryTitle = document.querySelector(".form--body__category-modal--wrapper__title");
  }

  setFormStyle([...args]) {
    const [top, left, bottom, right, margin, mWidth] = args;
    this.form.style.top = `${top}px`;
    this.form.style.left = `${left}px`;
    this.form.style.bottom = `${bottom}px`;
    this.form.style.right = `${right}px`;
    this.form.style.margin = `${typeof margin === "string" ? margin : margin + "px"}`;
    this.form.style.maxWidth = `${mWidth}px`;

    if (mWidth < 450) {
      this.formBody.classList.add("form-body-xs");
      this.formTitleDescription.forEach((el) => {
        el.classList.add("form-body-single-xs");
      });
      this.formStartEndCtg.forEach((el) => {
        el.classList.add("form-body-double-xs");
        el.firstElementChild.classList.add("hide-form-body-icon");
      });
    }
  }

  setFormSubmitType(type, id) {
    this.formsubmitbtn.setAttribute("data-form-action", type);
    this.formsubmitbtn.setAttribute(
      "data-form-entry-id",
      id === null ? id = "" : id
    );
  }

  configFormPosition(cell, coordinates, top) {
    console.log(coordinates)
    // console.log(coordinates)
    // const [x, y] = coordinates;
    // const cellWidth = cell.offsetWidth;
    // const cellHeight = cell.offsetHeight;
    // const cellTop = cell.offsetTop;
    // const cellLeft = cell.offsetLeft;
    // const windowWidth = window.innerWidth;

    // let setTop = top + this.headerOffset.offsetHeight;
    // let setMaxWidth = 380;
    // let [setLeft, setBottom, setRight, setMargin] = [0, 0, 0, 0];
    // console.log(cell, coordinates, top)

    // this.setFormStyle([setTop, setLeft, setBottom, setRight, setMargin, setMaxWidth]);
  }

  configFormTitleDescriptionInput(title, description) {
    this.formTitleDescription.forEach((input, idx) => {
      input.firstElementChild.value = [title, description][idx]
    })
  }

  /**
   * 
   * @param {HTML} input 
   * @param {object} date 
   * @param {number} minutes 
   * @param {string} dateFormatted 
   * @desc
   * Set the date & time for the form input fields
   * Set attributes for date/time inputs
   * Format date/time for display
   */
  setFormDateInput(input, date, minutes, dateFormatted) {
    const [dateinput, timeinput] = [
      input.firstElementChild,
      input.lastElementChild
    ]

    const timeformatted = `${date.getHours()}:${minutes}`
    timeinput.setAttribute(
      "data-form-time",
      timeformatted
    );

    // darn yankee time
    timeinput.textContent = `${+date.getHours() === 0 || +date.getHours() === 12 ? 12 : date.getHours() % 12}:${minutes}${date.getHours() < 12 ? "am" : "pm"}`;

    dateinput.setAttribute("data-form-date", dateFormatted)
    dateinput.textContent = `${this.monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`
  }

  setFormDatepickerDate(context, datepickerContext, start) {
    start = new Date(start);
    context.setDateSelected(start.getDate());
    datepickerContext.setDate(
      context.getYear(),
      context.getMonth(),
      context.getDay(),
    );
    datepickerContext.setDateSelected(start.getDate());
  }


  /**
   * 
   * @param {object} dates 
   * @desc
   * Iterate through object containing the data below to both the start date/time & end date/time form inputs
   * 
   * DateObject: [Date(start), Date(end)]
   * 
   * Minutes: [start minutes, end minutes]
   * 
   * DateString [start date, end date]
   * 
   */
  configFormDateInputs(dates) {
    for (let i = 0; i < 2; i++) {
      this.setFormDateInput(
        this.formStartEndCtg[i].lastElementChild,
        dates.dateObj[i],
        dates.minutes[i],
        dates.formatted[i],
      );
    }
  }

  configFormCategoryInput(categoryData) {
    const [title, color, offsetColor] = categoryData;
    this.formCategoryWrapper.setAttribute("data-form-category", title)
    this.formCategorySelect.style.backgroundColor = offsetColor;
    this.formCategoryWrapperIcon.style.backgroundColor = color;
    this.formCategoryTitle.textContent = title;
  }

  getConfig(data) {
    this.setFormSubmitType(
      data.submission.type,
      data.submission.id
    );

    this.configFormCategoryInput([
      data.category.name,
      data.category.color,
      data.category.offsetColor
    ]);

    this.configFormPosition(
      data.position.cell,
      data.position.coordinates,
      data.position.offsetTop
    );

    this.configFormDateInputs(
      data.dates.object
    );

    if (data.submission.type === "edit") {
      this.configFormTitleDescriptionInput(
        data.submission.title,
        data.submission.description
      )
    }
  }
}

const fullFormConfig = new FormConfig()
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (fullFormConfig);

/***/ }),

/***/ "./src/components/forms/goto.js":
/*!**************************************!*\
  !*** ./src/components/forms/goto.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ createGoTo)
/* harmony export */ });
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../locales/en */ "./src/locales/en.js");
/* harmony import */ var _config_setViews__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/setViews */ "./src/config/setViews.js");
/* harmony import */ var _menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../menus/sidebarDatepicker */ "./src/components/menus/sidebarDatepicker.js");



const monthsArray = _locales_en__WEBPACK_IMPORTED_MODULE_0__["default"].labels.monthsShortLower;
const monthsArrayLong = _locales_en__WEBPACK_IMPORTED_MODULE_0__["default"].labels.monthsLongLower;
const gotoOverlay = document.querySelector(".go-to-date-overlay");
const goto = document.querySelector(".go-to-date")
const gotoInput = document.querySelector(".go-to-input")
const inputErrMessage = document.querySelector(".go-to-err");
const cancelGoto = document.querySelector(".cancel-go-to")
const submitGoto = document.querySelector(".submit-go-to")
function createGoTo(context, store, datepickerContext) {
  function validateDate(date) {
    let arr;
    let haserr = false;

    // accepts two formats: DD/MM/YYYY or jan 1 2021
    if (date.includes("/")) {
      arr = date.split("/");
    } else {
      arr = date.split(" ");
    }

    if (arr.length !== 3) {
      haserr = true;
    } 

    // convert string year/month/day to int
    // convert 'jan' to 0 || 'january' to 0
    const [month, day, year] = arr.map((date, idx) => {
      let dateInt = parseInt(date);
      let tempMonth = null; // in case of month string


      if (isNaN(dateInt)) {
        if (date.length > 3) {
          tempMonth = monthsArrayLong.indexOf(date.toLowerCase());
        } else {
          tempMonth = monthsArray.indexOf(date.toLowerCase());
        }
      }

      if (idx === 0 && tempMonth === null) {
        dateInt -= 1;
        if (dateInt === -1) {
          dateInt = 0;
        }
      }

      if (tempMonth === -1) {
        haserr = true;
      }

      // check if year is valid
      // if user inputs value less than 100, assume they mean 2000s
      // do not allow year greater than 2100 or less than 1901
      if (idx === 2) {
        if (dateInt < 100) {
          dateInt += 2000;
        } else if (dateInt > 2100) {
          haserr = true;
        } else if (dateInt > 100 && dateInt < 1901) {
          haserr = true;
        }
      } 

      return tempMonth === null ? dateInt : tempMonth;
    })


    // form date object and check if valid
    const dateObj = new Date(year, month, day);
    if (dateObj.toString() === "Invalid Date") {
      haserr = true;
    }

    return haserr ? false : dateObj;
  }

  function removeError() {
    inputErrMessage.style.display = "none";
    inputErrMessage.onmousedown = null;
  }

  function handleError() {
    inputErrMessage.style.display = "block";
    inputErrMessage.onmousedown = removeError;
  }

  function handleGoTo() {
    const newdate = validateDate(gotoInput.value);
    if (newdate instanceof Date) {
      context.setDate(
        newdate.getFullYear(),
        newdate.getMonth(),
        newdate.getDate()
      )

      context.setDateSelected(newdate.getDate())
      if (context.getSidebarState() !== "hide") {
        (0,_menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_2__["default"])(context, store, datepickerContext)
      }
      
      let component = context.getComponent();
      if (component === 'list') {
        component = 'day';
      }
      
      closeGoTo();
      (0,_config_setViews__WEBPACK_IMPORTED_MODULE_1__["default"])(component, context, store, datepickerContext);
    } else {
      handleError();
    }
  }

  function closeGoToOnEscape(e) {
    const key = e.key.toLowerCase();
    if (key === "escape") {
      if (inputErrMessage.style.display === "block") {
        removeError();
      } else {
        closeGoTo();
      }
      return;
    }

    if (key === "enter") {
      handleGoTo();
      return;
    }
  }

  function closeGoTo() {
    document.removeEventListener("keydown", closeGoToOnEscape);
    store.removeActiveOverlay("hide-gotodate");
    gotoOverlay.classList.add("hide-gotodate");
    goto.classList.add("hide-gotodate");
    gotoInput.value = "";
  }

  function formatStart() {
    const [year, month, day] = [
      context.getYear(),
      context.getMonth(),
      context.getDay(),
    ];
    return `${monthsArray[month]} ${day} ${year}`;
  }

  function openGoTo() {
    // prevent keyboard shortcut from being registering in input field onload
    removeError()
    setTimeout(() => {
      gotoInput.focus()
      gotoInput.value = formatStart()
    }, 10) // 10ms is within browser threshold
    gotoOverlay.classList.remove("hide-gotodate");
    goto.classList.remove("hide-gotodate");
    store.addActiveOverlay("hide-gotodate");
    document.addEventListener("keydown", closeGoToOnEscape);
    cancelGoto.onclick = closeGoTo;
    submitGoto.onclick = handleGoTo;
  }

  openGoTo()
}

/***/ }),

/***/ "./src/components/forms/setForm.js":
/*!*****************************************!*\
  !*** ./src/components/forms/setForm.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FormSetup)
/* harmony export */ });
class FormSetup {
  constructor() {
    this.submission;
    this.category;
    this.position;
    this.dates;
  }

  /**
   * 
   * @param {string} type ("edit" / "create")
   * @param {string} id (entry ID || null)
   * @param {string} title || null
   * @param {string} description || nulll
   */
  setSubmission(type, id, title, description) {
    this.submission = {
      type: type,
      id: id || null,
      title: title || null,
      description: description || null,
    }
  }

  /**
   * 
   * @param {string} name (store category name)
   * @param {string} color (store category color)
   * @param {string} offsetColor (category color rgba 0.5)
   */
  setCategory(name, color, offsetColor) {
    this.category = {
      name: name,
      color: color,
      offsetColor: offsetColor,
    }
  }

  /**
   * 
   * @param {number} cell 
   * @param {[number, number]} coordinates (x, y) of grid
   * @param {number} offsetTop (e.pageY - scrollTop of grid)
   */
  setPosition(cell, coordinates, offsetTop) {
    this.position = {
      cell: cell,
      coordinates: coordinates,
      offsetTop: offsetTop,
    }
  }

  /**
   * 
   * @param {object} 
   * : {Dates: [new Date(start), new Date(end)]}
   * : {Dates: [start("YYYY-MM-DD"), end("YYYY-MM-DD")]}
   * : {Minutes: [number, number]}
   */
  setDates(object) {
    this.dates = { object: object }
  }

  getSetup() {
    return {
      submission: this.submission,
      category: this.category,
      position: this.position,
      dates: this.dates,
    }
  }
}

/***/ }),

/***/ "./src/components/menus/datepicker.js":
/*!********************************************!*\
  !*** ./src/components/menus/datepicker.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setDatepicker)
/* harmony export */ });
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");
/* harmony import */ var _config_setViews__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config/setViews */ "./src/config/setViews.js");




const datepicker = document.querySelector(".datepicker");
const datepickeroverlay = document.querySelector(".datepicker-overlay")
const datepickerBody = document.querySelector(".datepicker__body--dates");
const datepickerTitle = document.querySelector(".datepicker-title");
// prev and next buttons aside from main app header datewrapper
const headerPrevBtn = document.querySelector(".prev")
const headerNextBtn = document.querySelector(".next")


function setDatepicker(context, store, datepickerContext, type) {
  let montharray = datepickerContext.getMonthArray();
  let count = 0;
  let hasweek;

  function setDatepickerHeader() {
    const y = datepickerContext.getYear()
    const m = datepickerContext.getMonthName()
    datepickerTitle.textContent = `${m} ${y}`
  }

  function createCells(montharray) {
    let groupedEntries = store.getMonthEntryDates(montharray)
    let currentWeekStart = context.getWeek();

    datepickerBody.innerText = "";
    for (let i = 0; i < montharray.length; i++) {
      const cell = document.createElement("div");
      const datename = document.createElement("div");
      cell.classList.add("datepicker__body--dates-cell");
      datename.classList.add("datepicker__body--datename");

      if (montharray[i].getMonth() !== datepickerContext.getMonth()) {
        datename.classList.add("datepicker__body--datename-disabled");
      }

      if ((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_1__.compareDates)(montharray[i], currentWeekStart) && context.getComponent() === "week") {
        hasweek = true;
      }

      if (hasweek) {
        count++
        if (count <= 7) {
          cell.classList.add("datepicker__body--dates-week")
        }
      } else {
        cell.classList.remove("datepicker__body--dates-week")
      }

      if (montharray[i].getDate() === context.getDateSelected() && montharray[i].getMonth() === datepickerContext.getMonth()) {
        if (!datename.classList.contains("datepicker__body--datename-today")) {
          datename.setAttribute("class", "datepicker__body--datename")
          datename.classList.add("datepicker__body--datename-selected");
        }
      }

      if (context.isToday(montharray[i])) {
        datename.setAttribute("class", "datepicker__body--datename")
        datename.classList.add("datepicker__body--datename-today");
      }

      datename.innerText = montharray[i].getDate();
      const formattedDate = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_1__.getDateForStore)(montharray[i])

      datename.setAttribute("data-datepicker-date", formattedDate);
      if (groupedEntries.includes(formattedDate)) {
        if (!datename.classList.contains("datepicker__body--datename-today") && !datename.classList.contains("datepicker__body--datename-selected")) {
          datename.setAttribute("class", "datepicker__body--datename")
          datename.classList.add("datepicker__body--datename-entries")
        }
      } else {
        datename.classList.remove("datepicker__body--datename-entries")
      }

      cell.appendChild(datename)
      datepickerBody.appendChild(cell);
    }

    currentWeekStart = null;
    groupedEntries = []
  }

  function closeDatepicker() {
    datepicker.classList.add("hide-datepicker");
    datepickeroverlay.classList.add("hide-datepicker-overlay")
    const formOpen = store.getActiveOverlay().has("hide-form-overlay");
    const listOpen = context.getComponent() !== "list";
    if (listOpen || !formOpen) {
      headerPrevBtn.removeAttribute("style");
      headerNextBtn.removeAttribute("style");
    }
    montharray = []

    if (type === "form") {
      document.querySelector(".active-form-date")?.classList.remove("active-form-date")
    }

    document.removeEventListener("keydown", handleKeydownNav)
  }

  function renderpicker(y, m, d) {
    context.setDate(y, m, d)
    context.setDateSelected(d)
    ;(0,_config_setViews__WEBPACK_IMPORTED_MODULE_2__["default"])(context.getComponent(), context, store, datepickerContext);
    datepickerContext.setDate(y, m, d)
    closeDatepicker()
  }

  function handleFormDate(y, m, d) {
    datepickerContext.setDate(y, m, d)
    context.setDateSelected(d)
    const datepickerDate = datepickerContext.getDate()

    const activeFormDate = document.querySelector(".active-form-date")
    activeFormDate.setAttribute("data-form-date", `${y}-${m}-${d}`)
    activeFormDate.textContent = `${datepickerContext.getMonthName().slice(0, 3)} ${d}, ${y}`

    const inactiveFormDate = document?.querySelector(".inactive-form-date")
    const inactiveValue = inactiveFormDate.getAttribute("data-form-date").split("-").map(x => parseInt(x))
    const inactiveDate = new Date(inactiveValue[0], inactiveValue[1], inactiveValue[2])
    const inactiveDateType = inactiveFormDate.getAttribute("data-form-date-type")

    /**
     * FORM DATEPICKER CONDITIONS
     * 1. if user selects start date that is after end date
     *   -- set end date to start date
     * 2. if user selects end date that is before start date
     *  -- set start date to end date
     */
    if (((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_1__.isBeforeDate)(inactiveDate, datepickerDate) && inactiveDateType === "end") || ((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_1__.isBeforeDate)(datepickerDate, inactiveDate) && inactiveDateType === "start")) {
      inactiveFormDate.setAttribute("data-form-date", `${y}-${m}-${d}`)
      inactiveFormDate.textContent = `${datepickerContext.getMonthName().slice(0, 3)} ${d}, ${y}`
    }
  }

  function setNewDate(e) {
    const [y, m, d] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_1__.getDateFromAttribute)(e.target, "data-datepicker-date")
    if (type === "form") {
      handleFormDate(y, m, d)
      closeDatepicker()
    } else {
      renderpicker(y, m, d)
    }
  }

  function renderNextMonth() {
    datepickerContext.setNextMonth()
    montharray = datepickerContext.getMonthArray()
    createCells(montharray)
    setDatepickerHeader()
  }

  function renderPrevMonth() {
    datepickerContext.setPrevMonth()
    montharray = datepickerContext.getMonthArray()
    createCells(montharray)
    setDatepickerHeader()
  }

  function setSelectedToNextDay() {
    console.log(datepickerContext.getDateSelected())
  }

  function delegateDatepickerEvents(e) {
    const datenumber = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".datepicker__body--datename")
    const navnext = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".datepicker-nav--next")
    const navprev = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".datepicker-nav--prev")

    if (datenumber) {
      setNewDate(e)
      return;
    }

    if (navnext) {
      renderNextMonth()
      return;
    }

    if (navprev) {
      renderPrevMonth()
      return;
    }
  }

  function handleKeydownNav(e) {
    switch (e.key) {
      case "ArrowDown":
        renderPrevMonth();
        break;
      case "ArrowUp":
        renderNextMonth();
        break;
      case "ArrowRight":
        setSelectedToNextDay();
        break;
      case "Escape":
        closeDatepicker();
        break;
      default:
        break;
    }
  }

  const initDatepicker = () => {
    datepickeroverlay.addEventListener("click", e => {
      closeDatepicker()
    }, { once: true })
    setDatepickerHeader();
    createCells(montharray);
    datepicker.onmousedown = delegateDatepickerEvents;
    document.addEventListener("keydown", handleKeydownNav);
    montharray = [];
    store.setResetDatepickerCallback(closeDatepicker)
  }
  initDatepicker()
}


/***/ }),

/***/ "./src/components/menus/editCategory.js":
/*!**********************************************!*\
  !*** ./src/components/menus/editCategory.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ createCategoryForm)
/* harmony export */ });
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../locales/en */ "./src/locales/en.js");
/* harmony import */ var _utilities_svgs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utilities/svgs */ "./src/utilities/svgs.js");


const checkIcon = (0,_utilities_svgs__WEBPACK_IMPORTED_MODULE_1__.createCheckIcon)('var(--taskcolor');
const colors = Object.values(_locales_en__WEBPACK_IMPORTED_MODULE_0__["default"].colors)

class CatFormHelper {
  constructor(catname, catcolor) {
    this.catname = catname;
    this.catcolor = catcolor;
    this.errMsg = '';
    this.prevColorIdx = catcolor;
    this.originalName = catname;
    this.originalColor = catcolor;
  }
  setName(name) {this.catname = name;}
  setColor(color) {this.catcolor = color;}
  setPrevColor(color) {this.prevColorIdx = color;}
  getName() {return this.catname;}
  getColor() {return this.catcolor;}
  prevColor() {return this.prevColorIdx;}
  setErrMsg(msg) {this.errMsg = msg;}
  getErrMsg() {return this.errMsg;}
  getOriginalName() {return this.originalName;}
  getOriginalColor() {return this.originalColor;}
}

const ctgform = document.querySelector(".category__form")
const ctgformoverlay = document.querySelector(".category__form-overlay")
const ctgformBody = document.querySelector(".category__form--body")
const ctgformInput = document.querySelector(".category__form-input")
const colorPickerTitle = document.querySelector(".color-picker__title")
const colorPickerOptions = document.querySelector(".color-picker__options");
const ctgErrMsg = document.querySelector(".ctg-input--err")

function createCategoryForm(store, selectedCategory, editing, resetParent) {

  const formhelper = new CatFormHelper(
    selectedCategory.name,
    selectedCategory.color
  );

  function createColorOption(color, selected) {
    const colorOption = document.createElement("div");
    colorOption.classList.add("color-picker--option");
    colorOption.style.backgroundColor = color;
    colorOption.setAttribute("data-color-hex", color)

    if (color === selected) {
      colorOption.append(checkIcon);
      formhelper.setColor(color);
    }

    return colorOption;
  }

  function createPickerOptions(currentColor) {
    colorPickerOptions.innerText = "";
    colors.forEach((color) => {
      for (let i = 1; i < 8; i++) {
        colorPickerOptions.append(
          createColorOption(color[i], currentColor)
        )
      }
    })
  }

  function handleColorSelection(e, current) {
    const target = e.target;
    const color = target.getAttribute("data-color-hex");

    if (color === current) return;

    const colorOptions = document.querySelectorAll(".color-picker--option");
    colorOptions.forEach((option) => {
      option.innerText = "";
    })
    target.appendChild(checkIcon);
    colorPickerTitle.style.background = color;
    formhelper.setColor(color);
  }

  function handleInputErr() {
    const removeInputErr = () => {
      ctgErrMsg.classList.add("hide-ctg-err");
      ctgformInput.focus();
    }
    ctgErrMsg.textContent = formhelper.getErrMsg();
    ctgErrMsg.onclick = removeInputErr;
  }

  function validateNewCategory(categoryName, color) {
    const trimName = categoryName.trim().replace(/[^a-zA-Z0-9\s_-]+|\s{2,}/g, ' ');
    const origName = formhelper.getOriginalName();
    // const [origNameIdx, newNameIdx] = [
    //   store.getCategoryIndex(origName)
    // ]

    let errormsg = false;
    if (trimName.length < 1) {
      formhelper.setErrMsg("Category name is required");
      errormsg = true;
    } else if (store.hasCtg(trimName)) {
      if (!editing || (editing && origName !== trimName)) {
        formhelper.setErrMsg("Category already exists");
        errormsg = true;
      }
    }


    if (errormsg) {
      ctgErrMsg.classList.remove("hide-ctg-err");
      handleInputErr(errormsg);
      return;
    } else {
      if (editing) {
        if (origName === trimName && formhelper.getOriginalColor() === color) {
          closeCategoryForm();
          return;
        } else {
          if (origName !== trimName){
            store.updateCtg(trimName, color, formhelper.getName());
          } else {
            store.updateCtgColor(origName, color);
          }
        }
      } else {
        store.addNewCtg(trimName, color);
      }

      const fullrenderCtg = store.getRenderCategoriesCallback();
      closeCategoryForm();
      fullrenderCtg();
    }
  }

  function closeCategoryForm() {
    if (resetParent !== null) {
      resetParent.removeAttribute("style");
    }

    ctgform.classList.add("hide-ctg-form");
    ctgformoverlay.classList.add("hide-ctg-form");
    ctgformInput.value = "";
    ctgErrMsg.classList.add("hide-ctg-err");
    store.removeActiveOverlay('hide-ctg-form');
    document.removeEventListener("keydown", closeCategoryFormOnEsc);
  }

  function closeCategoryFormOnEsc(e) {
    const val = e.key.toLowerCase()
    if (val === "escape") {
      if (!ctgErrMsg.classList.contains("hide-ctg-err")) {
        ctgErrMsg.classList.add("hide-ctg-err");
        ctgformInput.focus();
        return;
      } else {
        closeCategoryForm();
        return;
      }
    }
    if (val === "enter") {
      validateNewCategory(ctgformInput.value, formhelper.getColor());
      return;
    }
  }

  function openCtgForm(editing) {
    store.addActiveOverlay("hide-ctg-form");
    ctgformoverlay.classList.remove("hide-ctg-form");
    ctgform.classList.remove("hide-ctg-form");
    ctgErrMsg.classList.add("hide-ctg-err");
    colorPickerTitle.style.backgroundColor = formhelper.getColor();
    setTimeout(() => {
      if (editing) {
        ctgformInput.value = formhelper.getName();
      } else {
        ctgformInput.placeholder = "Enter Category Name";
      }
      ctgformInput.focus();
    }, 10)
  }

  function gc(e, element) {
    return e.target.closest(element)
  }

  function delegateCtgForm(e) {
    const cancelctgBtn = gc(e, ".category__form--cancel");
    const colorOption = gc(e, ".color-picker--option");
    const submitctgBtn = gc(e, ".category__form--submit");

    if (cancelctgBtn) {
      closeCategoryForm(e);
      return;
    }

    if (colorOption) {
      handleColorSelection(e, formhelper.getColor());
      return;
    }

    if (submitctgBtn) {
      validateNewCategory(ctgformInput.value, formhelper.getColor());
      return;
    }
  }

  const initCtgForm = () => {
    createPickerOptions(formhelper.getColor());
    openCtgForm(editing);
    ctgform.onmousedown = delegateCtgForm;
    ctgformoverlay.onclick = closeCategoryForm;
    document.addEventListener("keydown", closeCategoryFormOnEsc);
  }

  initCtgForm();
}

/***/ }),

/***/ "./src/components/menus/entryOptions.js":
/*!**********************************************!*\
  !*** ./src/components/menus/entryOptions.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ getEntryOptionModal)
/* harmony export */ });
/* harmony import */ var _config_setViews__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config/setViews */ "./src/config/setViews.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _toastPopups_toast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../toastPopups/toast */ "./src/components/toastPopups/toast.js");
/* harmony import */ var _toastPopups_toastCallbacks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../toastPopups/toastCallbacks */ "./src/components/toastPopups/toastCallbacks.js");
/* harmony import */ var _utilities_timeutils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utilities/timeutils */ "./src/utilities/timeutils.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");








const entryOptionsOverlay = document.querySelector(".entry__options--overlay");
const entryOptionsWrapper = document.querySelector('.entry__options');
const entryOptionsDateHeader = document.querySelector('.entry__options-date');
const entryOptionsTimeHeader = document.querySelector('.entry__options-time');
const entryOptionTitle = document.querySelector(".eob-title")
const entryOptionDescription = document.querySelector('.eob-description');
const entryOptionCategoryIcon = document.querySelector(".eob-category--icon")
const entryOptionCategory = document.querySelector('.eob-category');

const reset = [
  entryOptionsDateHeader,
  entryOptionsTimeHeader,
  entryOptionTitle,
  entryOptionDescription,
  entryOptionCategory,
]

function getEntryOptionModal(context, store, entry,datepickerContext, finishSetup) {
  function openEditForm() {
    const openForm = store.getRenderFormCallback()
    openForm();
    finishSetup();
    closeEntryOptions();
  }

  function proceedDelete(entry) {
    store.deleteEntry(entry.id);
    closeEntryOptions();
    (0,_config_setViews__WEBPACK_IMPORTED_MODULE_0__["default"])(context.getComponent(), context, store, datepickerContext);
  }

  function openDeleteWarning() {
    const deletepopup = document.createElement("div");
    deletepopup.classList.add("delete-popup");

    const deletebtns = document.createElement("div");
    deletebtns.classList.add("delete-popup__btns");

    const deletepopupCancel = document.createElement("button");
    deletepopupCancel.classList.add("delete-popup__cancel");
    deletepopupCancel.textContent = "Cancel";

    const deletepopupConfirm = document.createElement("button");
    deletepopupConfirm.classList.add("delete-popup__confirm");
    deletepopupConfirm.textContent = "Delete";

    const deletepopupText = document.createElement("p");
    deletepopupText.classList.add("delete-popup__text");
    deletepopupText.textContent = "Are you sure you want to delete this entry?";

    deletebtns.append(deletepopupCancel, deletepopupConfirm)
    deletepopup.append(deletepopupText, deletebtns);
    entryOptionsWrapper.append(deletepopup);

    const removeDeletePopup = () => {deletepopup.remove();}
    const submitDelete = () => {
      proceedDelete(entry);
      removeDeletePopup();
    }

    deletepopupCancel.onclick = removeDeletePopup
    deletepopupConfirm.onclick = submitDelete
  }

  function formNegated() {
    // The form is responsible for resetting the current view
    // If the form is not toggled open from this modal,
    // reset it manually on close
    const resetCurrentView = store.getFormResetHandle(context.getComponent())
    closeEntryOptions()    
    resetCurrentView();
  }

  function closeEntryOptions() {
    // Close the modal and remove event listeners
    // Only ever called directly if the form is toggled open
    entryOptionsWrapper.classList.add("entry__options--hidden");
    entryOptionsOverlay.classList.add("entry__options--hidden");
    store.removeActiveOverlay("entry__options--hidden")
    entryOptionDescription.parentElement.removeAttribute("style");
    document.removeEventListener("keydown", handleEntryOptionKD);
  }

  function setEntryDefaults() {
    reset.forEach(el => el.textContent = "")
    entryOptionsWrapper.classList.remove("entry__options--hidden");
    entryOptionsOverlay.classList.remove("entry__options--hidden");
    store.addActiveOverlay("entry__options--hidden")

    const [start, end] = [new Date(entry.start), new Date(entry.end)]
    
    const getDateTime = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__.formatEntryOptionsDate)(start, end);
    entryOptionsDateHeader.textContent = getDateTime.date;
    console.log(getDateTime)
    if (getDateTime.time !== null) {
      if (getDateTime.time === undefined) {
        let tempdate = new Date()
        let daysSince = tempdate.getTime() - end.getTime()
        daysSince = Math.floor(daysSince / (1000 * 60 * 60 * 24))
        entryOptionsTimeHeader.textContent = `ended ${daysSince} days ago`
      } else {
        entryOptionsTimeHeader.textContent = "ends in " + getDateTime.time;
      }
    }
    
    entryOptionTitle.textContent = entry.title;

    entry.description.length === 0 ? entryOptionDescription.parentElement.style.display = "none" : entryOptionDescription.textContent = entry.description;

    entryOptionCategoryIcon.setAttribute("fill", store.getCtgColor(entry.category))
    entryOptionCategory.textContent = entry.category;

    entryOptionsWrapper.onmousedown = delegateEntryOptions;
    entryOptionsOverlay.onmousedown = formNegated
    document.addEventListener("keydown", handleEntryOptionKD)
  }

  function handleEntryOptionKD(e) {
    const deletepopup = document?.querySelector(".delete-popup")
    if (e.key === "Escape") { 
      if (deletepopup) {
        deletepopup.remove();
        return;
      } else {
        formNegated();
      }
    }
  }

  function delegateEntryOptions(e) {
    const editBtn = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_1__.getClosest)(e, ".eoi__edit")
    const deleteBtn = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_1__.getClosest)(e, ".eoi__delete")
    const closeBtn = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_1__.getClosest)(e, ".eoi__close")

    if (editBtn) {
      openEditForm();
      return;
    }

    if (deleteBtn) {
      openDeleteWarning();
      return;
    }

    if (closeBtn) {
      formNegated();
      return;
    }

  }

  setEntryDefaults()
}

/***/ }),

/***/ "./src/components/menus/header.js":
/*!****************************************!*\
  !*** ./src/components/menus/header.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setHeader)
/* harmony export */ });
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../locales/en */ "./src/locales/en.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");


function setHeader(context, component, store) {
  let temp = new Date()
  const btntoday = document.querySelector(".btn-today")
  btntoday.setAttribute("data-tooltip", `${_locales_en__WEBPACK_IMPORTED_MODULE_0__["default"].labels.weekdaysLong[temp.getDay()]}, ${_locales_en__WEBPACK_IMPORTED_MODULE_0__["default"].labels.monthsLong[temp.getMonth()]} ${temp.getDate()}`)
  
  const dateTimeTitle = document.querySelector(".datetime-content--title")
  const header = document.querySelector(".header")
  const selectElement = document.querySelector(".select__modal")
  const btnprev = document.querySelector('.prev');
  const btnnext = document.querySelector('.next');
  const datetimeWrapper = document.querySelector(".h-col-2");
  const datetimeContent = document.querySelector(".datetime-content")

  const configHeader = (borderstyle, componentTitle) => {
    dateTimeTitle.textContent = componentTitle;
    datetimeWrapper.classList.remove("datetime-inactive");
    header.style.borderBottom = borderstyle;
    datetimeWrapper.style.paddingRight = "0";
    datetimeContent.removeAttribute("style")
  }

  const configListHeader = (componentTitle) => {
    dateTimeTitle.textContent = componentTitle;
    header.style.borderBottom = "1px solid var(--mediumgrey1)"
    datetimeWrapper.classList.add("datetime-inactive");
  }

  const setHeaderAttributes = (view) => {
    if (view !== "list") {
      btnprev.setAttribute("data-tooltip", `prev ${view}`);
      btnnext.setAttribute("data-tooltip", `next ${view}`);
    }
    selectElement.textContent = view[0].toUpperCase() + view.slice(1);
    selectElement.setAttribute("data-value", view.slice(0, 1).toUpperCase());
  }

  switch (component) {
    case "day":
      configHeader("1px solid transparent", `${context.getMonthName()} ${context.getDay()}, ${context.getYear()}`);
      setHeaderAttributes("day");
      break;
    case "week":
      configHeader("1px solid transparent", context.getWeekRange());
      setHeaderAttributes("week");
      break;
    case "month":
      configHeader("var(--bordergrey)", `${context.getMonthName()} ${context.getYear()}`);
      setHeaderAttributes("month");
      break;
    case "year":
      configHeader("1px solid transparent", context.getYear());
      setHeaderAttributes("year");
      break;
    case "list":
      // !Important : text content is set in list.js after data is fetched
      setHeaderAttributes("list");
      header.style.borderBottom = "1px solid var(--mediumgrey1)"
      // datetimeWrapper.classList.add("datetime-inactive");
      break;
    default:
      break;
  }
}


/***/ }),

/***/ "./src/components/menus/shortcutsModal.js":
/*!************************************************!*\
  !*** ./src/components/menus/shortcutsModal.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ handleShortCutsModal)
/* harmony export */ });
const shortcutsModalOverlay = document.querySelector(".shortcuts-modal-overlay")
const shortcutsModal = document.querySelector(".shortcuts__modal")
const shortcutsModalContent = document.querySelector(".shortcuts-modal-content")
const shortcutsModalClose = document.querySelector(".close-shortcuts-modal")
const notifyShortcutsStatus = document.querySelector(".keyboard-disabled-sm-two")
function handleShortCutsModal(store) {

  function createShortcut(key, description) {
    const shortcut = document.createElement("div");
    shortcut.classList.add("sm-item");

    const shortcutKey = document.createElement("div");
    shortcutKey.classList.add("sm-key");
    
    const keyone = document.createElement("span")
    if (Array.isArray(key)) {
      const or = document.createElement("span")
      or.textContent = " or "
      const keytwo = document.createElement("span")
      keyone.textContent = key[0]
      keytwo.textContent = key[1]
      shortcutKey.append(keyone, or, keytwo)
    } else {
      keyone.textContent = key;
      shortcutKey.appendChild(keyone);
    }


    const shortcutDescription = document.createElement("div");
    shortcutDescription.classList.add("sm-description");
    shortcutDescription.textContent = description;
    shortcut.append(shortcutKey, shortcutDescription);
    return shortcut;
  }

  // close the modal and remove the event listener
  function handleShortcutsModalClose() {
    shortcutsModalOverlay.classList.add("hide-shortcuts")
    shortcutsModal.classList.add("hide-shortcuts")
    store.removeActiveOverlay("hide-shortcuts")
    document.removeEventListener("keydown", closeShortcutsOnKeydown)
  }

  // provide the ability to close the shortcuts modal with "escape" or with the keys that open it
  function closeShortcutsOnKeydown(e) {
    let inp = e.key.toLowerCase();
    if (inp === "escape" || inp === "/" || inp === "?") {
      handleShortcutsModalClose();
    }
  }

  function setStatusIcon(status) {
    if (status) {
      notifyShortcutsStatus.setAttribute("data-tooltip", "Keyboard shortcuts enabled")
      notifyShortcutsStatus.firstElementChild.setAttribute("fill", "var(--primary1)")
  
    } else {
      notifyShortcutsStatus.setAttribute("data-tooltip", "Keyboard shortcuts disabled")
      notifyShortcutsStatus.firstElementChild.setAttribute("fill", "var(--red1)")
    }
  }

  
  function handleShortcutsModalOpen() {
    shortcutsModalContent.innerText = "";
    shortcutsModalOverlay.classList.remove("hide-shortcuts")
    shortcutsModal.classList.remove("hide-shortcuts")
    store.addActiveOverlay("hide-shortcuts")
    
    const status = store.getShortcutsStatus()
    setStatusIcon(status)

    const shortcuts = store.getShortcuts();
    for (let i = 0; i < Object.values(shortcuts).length; i++) {
      const value = Object.values(shortcuts)[i]
      shortcutsModalContent.appendChild(createShortcut(
        value.shortcut,
        value.action,
      ));
    }


    function toggleShortcutsStatus() {
      const status = store.getShortcutsStatus() === false ? true : false;
      setStatusIcon(status);
      store.setShortcutsStatus(status);
    }

    shortcutsModalOverlay.onclick = handleShortcutsModalClose;
    shortcutsModalClose.onclick = handleShortcutsModalClose;
    notifyShortcutsStatus.onclick = toggleShortcutsStatus;
    document.addEventListener("keydown", closeShortcutsOnKeydown);
  }

  handleShortcutsModalOpen()
}

/***/ }),

/***/ "./src/components/menus/sidebarCategories.js":
/*!***************************************************!*\
  !*** ./src/components/menus/sidebarCategories.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ handleSidebarCategories)
/* harmony export */ });
/* harmony import */ var _config_setViews__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config/setViews */ "./src/config/setViews.js");
/* harmony import */ var _menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../menus/sidebarDatepicker */ "./src/components/menus/sidebarDatepicker.js");
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../locales/en */ "./src/locales/en.js");
/* harmony import */ var _utilities_svgs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utilities/svgs */ "./src/utilities/svgs.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _editCategory__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./editCategory */ "./src/components/menus/editCategory.js");










const sidebar = document.querySelector(".sidebar")
const sidebarColTwo = document.querySelector(".sb__categories")
const cWrapper = document.querySelector(".sb__categories--body")
const categoriesContainer = document.querySelector(".sb__categories--body-form")
const sidebarScrollContainer = document.querySelector(".sidebar-content__wrapper")
const categoriesHeader = document.querySelector(".sb__categories--header")
const categoryHeaderCaret = document.querySelector(".sbch-caret")
// renders via menu click -- see ./renderViews.js
function handleSidebarCategories(context, store, datepickerContext) {
  const defaultCtg = store.getDefaultCtg()[0]

  function updateComponent() {
    ;(0,_config_setViews__WEBPACK_IMPORTED_MODULE_0__["default"])(context.getComponent(), context, store, datepickerContext)
  }

  function renderSidebarDatepickerCtg() {
    (0,_menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_1__["default"])(context, store, datepickerContext)
  }

  function renderCategories() {
    categoriesContainer.innerText = ""
    const ctg = store.getAllCtg();
    const keys = Object.keys(ctg);
    for (let i = 0; i < keys.length; i++) {
      let [ctgname, color, status] = [
        keys[i],
        ctg[keys[i]].color,
        ctg[keys[i]].active
      ]
      createCategoryListItem(ctgname, color, status)
    }
  }

  /**
   * 
   * @param {string} ctgname - category name
   * @param {string} ctgcolor - hex color
   * @param {Boolean} status - checked or not
   */
  function createCategoryListItem(ctgname, ctgcolor, status) {
    const row = document.createElement('div');
    row.classList.add('sbch-form--item');
    const colone = document.createElement('div');
    colone.classList.add('sbch-form--item__col');
    const checkboxWrapper = document.createElement('div');
    checkboxWrapper.classList.add('sbch-form--item__checkbox--wrapper');
    const checkbox = document.createElement('div');
    checkbox.classList.add('sbch-form--item__checkbox');
    checkbox.setAttribute("data-sbch-checked", `${status}`);
    checkbox.setAttribute("data-sbch-category", ctgname);
    let checkIcon;

    if (status) {
      checkbox.style.backgroundColor = ctgcolor;
      checkIcon = (0,_utilities_svgs__WEBPACK_IMPORTED_MODULE_3__.createCheckIcon)("var(--taskcolor0)")
    } else {
      checkbox.style.backgroundColor = "var(--black1)";
      checkIcon = (0,_utilities_svgs__WEBPACK_IMPORTED_MODULE_3__.createCheckIcon)("none")
    }

    checkbox.style.border = `1px solid ${ctgcolor}`;
    checkbox.appendChild(checkIcon)
    checkboxWrapper.appendChild(checkbox)

    const label = document.createElement('span');
    label.classList.add('sbch-form--item__label');
    label.textContent = ctgname;
    colone.append(checkboxWrapper, label);

    const coltwo = document.createElement('div');
    coltwo.classList.add('sbch-form--item__col--actions');
    const deleteicon = document.createElement('div');
    deleteicon.classList.add('sbch-col--actions__delete-icon');
    deleteicon.setAttribute("data-sbch-category", ctgname)
    deleteicon.setAttribute("data-sbch-color", ctgcolor)
    const editicon = document.createElement('div');
    editicon.classList.add("sbch-col--actions__edit-icon")
    editicon.setAttribute("data-sbch-category", ctgname)
    editicon.setAttribute("data-sbch-color", ctgcolor)

    // must have at least one category, so default cannot be deleted
    if (ctgname.toLowerCase() === defaultCtg) {
      editicon.classList.add("sbch-col--actions__edit-icon--immutable")
    } else {
      deleteicon.appendChild((0,_utilities_svgs__WEBPACK_IMPORTED_MODULE_3__.createCloseIcon)("var(--white2)"))
      coltwo.appendChild(deleteicon)
    }

    
    editicon.appendChild((0,_utilities_svgs__WEBPACK_IMPORTED_MODULE_3__.createEditIcon)("var(--white2)"))
    coltwo.appendChild(editicon)
    row.append(colone, coltwo)
    categoriesContainer.appendChild(row)
  }

  function handleCategoryModalToggle() {
    cWrapper.classList.toggle("toggle-category--modal")
    if (!cWrapper.classList.contains("toggle-category--modal")) {
      categoryHeaderCaret.classList.add("sbch-caret--open")
    } else {
      categoryHeaderCaret.classList.remove("sbch-caret--open")
    }
    categoriesHeader.style.backgroundColor = "var(--black0)"
    setTimeout(() => {
      categoriesHeader.style.backgroundColor = "var(--black1)"
    }, 200)
  }

  function createDeleteCategoryPopup(e) {
    const ctgname = e.target.getAttribute("data-sbch-category")
    const ctgcolor = store.getCtgColor(ctgname)
    const offsetColor = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.hextorgba)(ctgcolor, 0.8)
    const categoryLength = store.getCtgLength(ctgname)
    let noEntries = false;

    // POPUP OVERLAY
    const popupBoxOverlay = document.createElement("aside");
    popupBoxOverlay.classList.add("popup-delete-ctg__overlay");


    // POPUP BOX
    const popupBox = document.createElement("aside");
    popupBox.classList.add("popup-delete-ctg");
    if (categoryLength === 0) {
      noEntries = true;
      popupBox.classList.add("popup-delete-ctg__no-entries")
    }
    const ord = categoryLength === 1 ? "entry" : "entries";

    /* **************************** */
    // POPUP HEADER
    const popupHeader = document.createElement("div");
    popupHeader.classList.add("popup-delete-ctg__header");

    const popupTitle = document.createElement("div");
    popupTitle.classList.add("popup-delete-ctg__title");
    popupTitle.style.border = `2px solid ${ctgcolor}`;
    popupTitle.style.backgroundColor = offsetColor;
    popupTitle.textContent = `removing  "${ctgname}"`;

    const popupCategoryStats = document.createElement("div");
    popupCategoryStats.classList.add("popup-delete-ctg__stats");
    popupCategoryStats.textContent = `(${categoryLength} total ${ord} in this category)`;
    /* **************************** */
    popupHeader.append(popupTitle, popupCategoryStats);
    popupBox.appendChild(popupHeader)


    // category has entries -- provide options to move entries to another category or delete them
    // const setChecked = (inp) => {
    //   inp.checked = true;
    // }
    if (!noEntries) {
      // POPUP BODY
      const popupBody = document.createElement("div");
      popupBody.classList.add("popup-delete-ctg__body");

      // OPTION ONE : MOVE ENTRIES TO ANOTHER CATEGORY
      const optionsWrapperOne = document.createElement("div");
      const categoryNames = store.getAllCtgNames();
      optionsWrapperOne.classList.add("popup-delete-ctg__options");
      optionsWrapperOne.style.backgroundColor = offsetColor;
      optionsWrapperOne.style.border = `2px solid ${ctgcolor}`
      const optionMoveRadio = document.createElement("input");
      optionMoveRadio.setAttribute("type", "radio");
      optionMoveRadio.setAttribute("name", "popup-delete-ctg__option");
      optionMoveRadio.setAttribute("id", "ctg-move");
      optionMoveRadio.setAttribute("checked", "true")

      const optionMove = document.createElement("div");
      const optionMoveTitle = document.createElement("span");
      const optionMoveSelect = document.createElement("select");
      optionMove.classList.add("popup-delete-ctg__option--move");
      optionMoveTitle.textContent = `Move "${ctgname}" ${ord} to another category`;
      optionMoveSelect.classList.add("popup-delete-ctg__option--move-select");
      for (let i = 0; i < categoryNames.length; i++) {
        if (categoryNames[i] === ctgname) continue;
        const option = document.createElement("option");
        option.value = categoryNames[i];
        option.textContent = categoryNames[i];
        optionMoveSelect.appendChild(option);
      }
      optionMove.append(optionMoveTitle, optionMoveSelect);
      optionsWrapperOne.append(optionMoveRadio, optionMove);
      

      /* ************ */
      // OPTION TWO : REMOVE CATEGORY AND ENTRIES
      const optionsWrapperTwo = document.createElement("div");
      optionsWrapperTwo.classList.add("popup-delete-ctg__options");
      optionsWrapperTwo.style.border = `2px solid ${ctgcolor}`

      const optionRemoveRadio = document.createElement("input");
      optionRemoveRadio.setAttribute("type", "radio");
      optionRemoveRadio.setAttribute("name", "popup-delete-ctg__option");
      optionRemoveRadio.setAttribute("id", "ctg-delete");

      const optionRemove = document.createElement("div");
      optionRemove.classList.add("popup-delete-ctg__option--remove");
      const optionRemoveTitle = document.createElement("span");

      optionRemoveTitle.textContent = `Delete "${ctgname}" and ${categoryLength} ${ord} (irreversible)`;
      const optionRemoveIcon = (0,_utilities_svgs__WEBPACK_IMPORTED_MODULE_3__.createTrashIcon)(ctgcolor);
      const handleWrapperClick = (e) => {
        if (e.target.id === "ctg-delete" || e.target.id === "ctg-move" || e.target.classList.contains("popup-delete-ctg__option--move")) {
          return;
        } else {
          // optionRemoveRadio.checked = true;
          e.target.closest(".popup-delete-ctg__options").querySelector("input").checked = true;
        }
      }

      optionRemove.append(optionRemoveTitle, optionRemoveIcon)
      optionsWrapperTwo.append(optionRemoveRadio, optionRemove);
      
      popupBody.append(optionsWrapperOne, optionsWrapperTwo);
      popupBox.appendChild(popupBody)
      optionsWrapperOne.onclick = handleWrapperClick;
      optionsWrapperTwo.onclick = handleWrapperClick;
    }


    /* **************************** */
    // POPUP FOOTER
    const popupFooter = document.createElement("div");
    popupFooter.classList.add("popup-delete-ctg__footer");
    const btncancel = document.createElement("button");
    btncancel.textContent = "cancel"
    btncancel.classList.add("popup-delete-ctg__btn--cancel");
    btncancel.style.backgroundColor = offsetColor;
    const btnproceed = document.createElement("button");
    btnproceed.classList.add("popup-delete-ctg__btn--proceed");
    btnproceed.textContent = "proceed"
    /* **************************** */
    popupFooter.append(btncancel, btnproceed);
    popupBox.appendChild(popupFooter)
    document.body.append(popupBoxOverlay, popupBox);

    // EVENT LISTENERS
    store.addActiveOverlay("popup-delete-ctg__overlay")
    const closeDeletePopupOnEscape = (e) => {
      if (e.key === "Escape") closeDeletePopup()
    }

    const closeDeletePopup = () => {
      popupBox.remove()
      popupBoxOverlay.remove()
      store.removeActiveOverlay("popup-delete-ctg__overlay")
      document.removeEventListener("keydown", closeDeletePopupOnEscape)
    }

    const proceedDeletePopup = () => {
      if (!noEntries) {
        const selectedOption = document?.querySelector("input[name='popup-delete-ctg__option']:checked").id
        const selectedCategory = document.querySelector(".popup-delete-ctg__option--move-select").value
        if (selectedOption === "ctg-move") {
          store.moveCategoryEntriesToNewCategory(
            ctgname, selectedCategory
          );
        } else if (selectedOption === "ctg-delete") {
          store.removeCategoryAndEntries(ctgname)
        }
      } else {
        store.deleteCategory(ctgname)
      }

      closeDeletePopup()
      updateComponent()
      renderSidebarDatepickerCtg()
      renderCategories()
    }

    btnproceed.onclick = proceedDeletePopup
    popupBoxOverlay.onclick = closeDeletePopup
    btncancel.onclick = closeDeletePopup
    document.addEventListener("keydown", closeDeletePopupOnEscape)
  }

  function handleCategorySelection(e) {
    let checkbox = e.target.children[0].children[0]
    let status = checkbox.getAttribute("data-sbch-checked")
    let cat = checkbox.getAttribute("data-sbch-category")
    let color = store.getCtgColor(cat)
    if (status === "true") {
      checkbox.setAttribute("data-sbch-checked", "false")
      store.setCategoryStatus(cat, false)
      checkbox.style.backgroundColor = "var(--black0)"
      checkbox.firstChild.setAttribute("fill", "none")
    } else {
      checkbox.setAttribute("data-sbch-checked", "true")
      store.setCategoryStatus(cat, true)
      checkbox.style.backgroundColor = color
      checkbox.firstChild.setAttribute("fill", "var(--taskcolor0)")
    }
    renderSidebarDatepickerCtg()
    updateComponent()
  }

  function delegateCategoryEvents(e) {
    const ctgtoggleModal = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".sbch-col__one")
    const editctgBtn = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".sbch-col--actions__edit-icon")
    const deletectgBtn = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".sbch-col--actions__delete-icon")
    const ctgChck = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".sbch-form--item__col")
    const ctgPlus = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".sbch-plus")

    if (ctgtoggleModal) {
      handleCategoryModalToggle()
      return;
    }

    if (editctgBtn) {
      const targetcat = {
        name: e.target.getAttribute("data-sbch-category"),
        color: e.target.getAttribute("data-sbch-color"),
      }
      const targetparent = e.target.parentElement.parentElement
      targetparent.style.borderBottom = `2px solid ${targetcat.color}`
      ;(0,_editCategory__WEBPACK_IMPORTED_MODULE_5__["default"])(
        store, 
        targetcat, 
        true,
        e.target.parentElement.parentElement
      );
      return;
    }

    if (deletectgBtn) {
      createDeleteCategoryPopup(e)
      return;
    }

    // toggle category checkbox and display entries
    if (ctgChck) {
      handleCategorySelection(e)
      return;
    }

    // create popup with category creation form
    if (ctgPlus) {
      const targetcat = {
        name: "new category",
        color: "#2C52BA",
      }
      ;(0,_editCategory__WEBPACK_IMPORTED_MODULE_5__["default"])(store, targetcat, false, null);
      return;
    }
  }

  renderCategories()
  const fullCtgRender = () => {
    renderCategories();
    updateComponent();
  }
  store.setRenderCategoriesCallback(fullCtgRender)
  sidebarColTwo.onmousedown = delegateCategoryEvents
}

/***/ }),

/***/ "./src/components/menus/sidebarDatepicker.js":
/*!***************************************************!*\
  !*** ./src/components/menus/sidebarDatepicker.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setSidebarDatepicker)
/* harmony export */ });
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");
/* harmony import */ var _config_setViews__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/setViews */ "./src/config/setViews.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");





const datepicker = document.querySelector(".datepicker-sidebar");
const datepickerBody = document.querySelector(".sbdatepicker__body--dates");
const datepickerTitle = document.querySelector(".sbdatepicker-title");
function setSidebarDatepicker(context, store, datepickerContext) {

  datepickerContext.setDate(
    context.getYear(), 
    context.getMonth(), 
    context.getDay()
  );

  let montharray = datepickerContext.getMonthArray();
  let groupedEntries = store.getMonthEntryDates(montharray);
  let currentWeekStart = context.getWeek();
  let hasweek = false;
  let count = 0;

  function setDatepickerHeader() {
    const month = datepickerContext.getMonthName()
    const year = datepickerContext.getYear()
    datepickerTitle.textContent = `${month} ${year}`
  }

  function createCells(montharray) {
    datepickerBody.innerText = "";
    const component = context.getComponent();

    for (let i = 0; i < montharray.length; i++) {
      const cell = document.createElement("div");
      const datename = document.createElement("div");
      cell.classList.add("sbdatepicker__body--dates-cell");
      datename.classList.add("sbdatepicker__body--datename");

      if (montharray[i].getMonth() !== datepickerContext.getMonth()) {
        datename.classList.add("sbdatepicker__body--datename-disabled");
      }

      if (component === "week") {
        if (currentWeekStart.getDate() === montharray[i].getDate()) {
          if (currentWeekStart.getMonth() === montharray[i].getMonth()) {
            if (currentWeekStart.getFullYear() === montharray[i].getFullYear()) {
            hasweek = true;
            } 
          }
        } 
      } 

      if (hasweek) {
        count++
        if (count <= 7) {
          cell.classList.add("sbdatepicker__body--dates-week")
        }
      } else {
        cell.classList.remove("sbdatepicker__body--dates-week")
      }

      if (context.isToday(montharray[i])) {
        datename.setAttribute("class", "sbdatepicker__body--datename")
        datename.classList.add("sbdatepicker__body--datename-today");
      }

      if (montharray[i].getDate() === context.getDateSelected() && montharray[i].getMonth() === datepickerContext.getMonth()) {
        if (!datename.classList.contains("sbdatepicker__body--datename-today")) {
          datename.setAttribute("class", "sbdatepicker__body--datename")
          datename.classList.add("sbdatepicker__body--datename-selected");
        }
      }

      datename.textContent = montharray[i].getDate();
      const formattedDate = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_0__.getDateForStore)(montharray[i])
      datename.setAttribute("data-datepicker-date", formattedDate);
      if (groupedEntries.includes(formattedDate)) {
        if (!datename.classList.contains("sbdatepicker__body--datename-selected") && !datename.classList.contains("sbdatepicker__body--datename-today")) {
          datename.setAttribute("class", "sbdatepicker__body--datename")
          datename.classList.add("sbdatepicker__body--datename-entries")
        }
      } else {
        datename.classList.remove("sbdatepicker__body--datename-entries")
      }

      cell.appendChild(datename)
      datepickerBody.appendChild(cell);
    }
  }

  function resetpickerData() {
    montharray = datepickerContext.getMonthArray()
    groupedEntries = store.getMonthEntryDates(montharray)
    currentWeekStart = context.getWeek()
    count = 0;
    hasweek = false;
  }  

  function renderpicker(y, m, d) {
    context.setDate(y, m, d)
    context.setDateSelected(d)
    datepickerContext.setDate(y, m, d)
    ;(0,_config_setViews__WEBPACK_IMPORTED_MODULE_1__["default"])(
      context.getComponent(),
      context,
      store,
      datepickerContext,
    );

    resetpickerData()
    createCells(montharray)
    setDatepickerHeader()
    montharray = []
  }

  function renderSelectedDay(e, d) {
    context.setDateSelected(d)
    const selected = document.querySelectorAll(".sbdatepicker__body--datename-selected")
    selected.forEach((x) => {
      x.classList.remove("sbdatepicker__body--datename-selected")
    })
    e.target.setAttribute("class", "sbdatepicker__body--datename")
    e.target.classList.add("sbdatepicker__body--datename-selected")
  }

  function renderprevMonth() {
    datepickerContext.setPrevMonth();
    resetpickerData()
    createCells(montharray);
    setDatepickerHeader();
    montharray = [];
  }

  function rendernextMonth() {
    datepickerContext.setNextMonth();
    resetpickerData()
    createCells(montharray);
    setDatepickerHeader();
    montharray = [];
  }

  function setNewDate(e) {
    const target = e.target;
    let [y, m, d] = target.getAttribute("data-datepicker-date").split('-').map(x => parseInt(x));

    const component = context.getComponent()

    if (component === "list") {
      renderSelectedDay(e, d);
      return;
    }

    if (component === "year") {
      if (context.getYear() !== y) {
        renderpicker(y, m, d);
        return;
      } else {
        renderSelectedDay(e, d);
        return;
      }
    }

    if (component === "month") {
      if (context.getMonth() !== m) {
        renderpicker(y, m, d);
        return;
      } else {
        renderSelectedDay(e, d);
        return;
      }
    }

    if (component === "week") {
      if (e.target.parentElement.classList.contains("sbdatepicker__body--dates-week")) {
        renderSelectedDay(e, d);
        return;
      } else {
        renderpicker(y, m, d);
      }
      return;
    }

    if (component === "day") {
      if (context.isToday(new Date(y, m, d))) {
        renderSelectedDay(e, d);
        return;
      } else {
        renderpicker(y, m, d);
        return;
      }
    }
  }

  function delegateDatepickerEvents(e) {
    const datenumber = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_2__.getClosest)(e, ".sbdatepicker__body--datename")
    const navnext = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_2__.getClosest)(e, ".sbdatepicker-nav--next")
    const navprev = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_2__.getClosest)(e, ".sbdatepicker-nav--prev")

    if (datenumber) {
      setNewDate(e)
      return;
    }

    if (navnext) {
      rendernextMonth()
      return;
    }

    if (navprev) {
      renderprevMonth()
      return;
    }
  }

  setDatepickerHeader();
  createCells(montharray);
  datepicker.onmousedown = delegateDatepickerEvents;
  montharray = [];
}

/***/ }),

/***/ "./src/components/menus/sidebarFooter.js":
/*!***********************************************!*\
  !*** ./src/components/menus/sidebarFooter.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ handleSidebarFooter)
/* harmony export */ });
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");


const sidebarFooter = document.querySelector(".sb__info")

// popup containing : project notes, privacy policy, & terms of use
const sbInfoPopup = document.querySelector(".sb__info-popup")
const sbInfoPopupOverlay = document.querySelector(".sb__info-popup-overlay")
const selectInfo = document.querySelector(".select-popup-info")
const closePopupButton = document.querySelector(".close-sb-info")
const infopopupTitle = document.querySelector(".sbip-title")
const infopopupBody = document.querySelector(".sbip-content")


function handleSidebarFooter(store) {

  const infoContent = {
    notes: {
      title: "Breakdown of project & current status",
      content: "These are my project notes",
    },
    privacy: {
      title: "Cookies and Data Privacy",
      content: "This project uses an open source license",
    },
    terms: {
      title: "Code license and terms of use",
      content: "All data is stored locally meaning no data is sent to a server."
    },
  }

  function closeInfoPopup() {
    store.removeActiveOverlay("hide-sb-info-popup")
    sbInfoPopup.classList.add("hide-sb-info-popup")
    sbInfoPopupOverlay.classList.add("hide-sb-info-popup")
    document.removeEventListener("keydown", closeInfoPopupOnEscape)
  }

  function setInfoContent(selection) {
    infopopupTitle.innerText = infoContent[selection].title;
    infopopupBody.innerText = infoContent[selection].content;
  }

  function handleSelectInfoChange(e) {
    const selection = e.target.value;
    setInfoContent(selection)
  }

  function closeInfoPopupOnEscape(e) {
    if (e.key === "Escape") {
      closeInfoPopup()
    }
  }

  function setUpInfoPopup() {
    setInfoContent(selectInfo.value)
    selectInfo.onchange = handleSelectInfoChange
    sbInfoPopupOverlay.onclick = closeInfoPopup
    closePopupButton.onclick = closeInfoPopup
    document.addEventListener("keydown", closeInfoPopupOnEscape)
  }

  function openInfoPopup(selection) {
    const selections = ['notes', 'privacy', 'terms']
    const idx = selections.indexOf(selection)
    selectInfo.selectedIndex = idx;

    store.addActiveOverlay("hide-sb-info-popup")
    sbInfoPopup.classList.remove("hide-sb-info-popup")
    sbInfoPopupOverlay.classList.remove("hide-sb-info-popup")
    setUpInfoPopup()
  }

  function delegateSidebarFooterEvents(e) {
    const projectNotes = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".sb__project-notes");
    const privacy = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".sb__privacy");
    const terms = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".sb__terms");

    if (projectNotes) {
      openInfoPopup("notes")
      return;
    }

    if (privacy) {
      openInfoPopup("privacy")
      return;
    }

    if (terms) {
      openInfoPopup("terms")
      return;
    }
  }

  sidebarFooter.onmousedown = delegateSidebarFooterEvents
}

/***/ }),

/***/ "./src/components/menus/sidebarSubMenu.js":
/*!************************************************!*\
  !*** ./src/components/menus/sidebarSubMenu.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ getSidebarSubMenu)
/* harmony export */ });
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");
/* harmony import */ var _shortcutsModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shortcutsModal */ "./src/components/menus/shortcutsModal.js");






const sidebarSubMenuOverlay = document.querySelector('.sidebar-sub-menu__overlay');
const sidebarSubMenu = document.querySelector('.sidebar-sub-menu');
const closeSubMenuBtn = document.querySelector('.close-sub-menu');
const closemenu = "hide-sidebar-sub-menu";
const appBody = document.querySelector(".body");

// dark, light, contrast
const themeRadioBtns = document.querySelectorAll(".theme-radio__input");
const themeRadioOptions = ["dark", "light", "contrast"];

// keyboard shortcut toggle on/off | open modal
const shortcutSwitch = document.querySelector(".smia-toggle-shortcuts-checkbox")
const shortcutTitle = document.querySelector(".smia-set-status-title")
const notifyDisabledShortcutsIcon = document.querySelector(".keyboard-disabled-sm")

function getSidebarSubMenu(store, context) {


  function closeSubOnEscape(e) {
    const popup = document.querySelector(".sb-sub-popup-confirm");
    if (e.key === "Escape") {
      if (popup) {
        popup.remove()
        sidebarSubMenuOverlay.classList.remove("sub-overlay-vis")
        return;
      } else {
        closeSubMenu()
        sidebarSubMenuOverlay.classList.remove("sub-overlay-vis")
      }
    }
    if (e.key.toLowerCase() === "a") {
      if (popup) {
        return;
      } else {
        closeSubMenu()
      }
    }
  }

  function createUploadConfirmationPopup() {
    const popup = document.createElement("div");
    popup.classList.add("sb-sub-popup-confirm");
    const [totalEntries, totalCategories] = store.getStoreStats()
    

    // let totals;
    let [hasEntries, hasCategories] = [false, false]
    let titleEntries;
    if (totalEntries > 0) {
      hasEntries = `Overwriting ${totalEntries} entries`;
    }
    if (totalCategories > 1) {
      if (totalCategories === 2) {
        hasCategories = "1 category."
      } else {
        hasCategories = `${+totalCategories - 1} categories.`;
      }
    }

    if (hasEntries && hasCategories) {
      titleEntries = `${hasEntries} and ${hasCategories}`
    } else if (hasEntries && !hasCategories) {
      titleEntries = `${hasEntries}.`
    } else if (!hasEntries && hasCategories) {
      titleEntries = `No entries. Overwriting ${hasCategories}`
    } else {
      titleEntries = "Current calendar has no entries or categories."
    }


    const subtitle = document.createElement("div")
    subtitle.classList.add("sb-sub-popup-subtitle")
    subtitle.textContent = titleEntries;
    const subtitle2 = document.createElement("div")
    subtitle2.classList.add("sb-sub-popup-subtitle")
    subtitle2.textContent = 'This action is irreversible.'
    const subtitle3 = document.createElement("div")
    subtitle3.classList.add("sb-sub-popup-title")
    subtitle3.textContent = 'Please ensure you have a valid backup before proceeding. Use the "validate .json" button next to "upload .json" to check that everything is in order.'
    
    const btns = document.createElement("div");
    btns.classList.add("sb-sub-popup-btns");
    const cancelBtn = document.createElement("button");
    cancelBtn.classList.add("sb-sub-popup-btn--cancel");
    cancelBtn.textContent = "Cancel";
    const proceedBtn = document.createElement("button");
    proceedBtn.classList.add("sb-sub-popup-btn--proceed")
    proceedBtn.textContent = "Proceed";

    btns.append(cancelBtn, proceedBtn);
    popup.append(
      subtitle, 
      subtitle2, 
      subtitle3, 
      btns
    );
    return popup
  }

  function closeSubMenu() {
    const popup = document.querySelector(".sb-sub-popup-confirm");
    if (popup) {
      popup.remove()
      sidebarSubMenuOverlay.classList.remove("sub-overlay-vis")
      return;
    } else {
      store.removeActiveOverlay(closemenu)
      sidebarSubMenu.classList.add(closemenu)
      sidebarSubMenuOverlay.classList.add(closemenu);
      document.removeEventListener("keydown", closeSubOnEscape);
    }
  }

  function setStatusIcon(status) {
    if (status) {
      notifyDisabledShortcutsIcon.setAttribute("data-tooltip", "Keyboard shortcuts enabled")
      notifyDisabledShortcutsIcon.firstElementChild.setAttribute("fill", "var(--primary1)")
    } else {
      notifyDisabledShortcutsIcon.setAttribute("data-tooltip", "Keyboard shortcuts disabled")
      notifyDisabledShortcutsIcon.firstElementChild.setAttribute("fill", "var(--red1)")
    }
  }

  function openSubMenu() {
    // configure current active status of theme radio btns
    const themeIdx = themeRadioOptions.indexOf(context.getColorScheme())
    themeRadioBtns[themeIdx].checked = true;

    const shortcutStatus = store.getShortcutsStatus()
    setStatusIcon(shortcutStatus)
    if (shortcutStatus) {
      shortcutSwitch.checked = true;
    } else {
      shortcutSwitch.checked = false;
    }

    store.addActiveOverlay(closemenu)
    sidebarSubMenu.classList.remove(closemenu)
    sidebarSubMenuOverlay.classList.remove(closemenu);
    document.addEventListener("keydown", closeSubOnEscape);
    sidebarSubMenuOverlay.onclick = closeSubMenu;
    closeSubMenuBtn.onclick = closeSubMenu;
  }

  function getJSONUpload(e) {
    const file = document.createElement("input");
    file.type = "file";
    file.accept = "application/json";
    file.onchange = (e) => {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.onload = (e) => {
        const json = JSON.parse(e.target.result);
        store.setUserUpload(json)
        closeSubMenu();
      };
      reader.readAsText(file);
    };
    document.body.appendChild(file);
    file.click();
    document.body.removeChild(file);
    closeSubMenu();
    return;
  }

  function getJSONDownload() {
    const json = JSON.stringify(localStorage)
    const [totalEntries, totalCategories] = store.getStoreStats()
    const filename = `ENT_${totalEntries}_CAT_${totalCategories}_${(0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_1__.createTimestamp)()}`;
    const blob = new Blob([json], { type: "application/json" });
    const href = URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.href = href;
    link.download = filename + ".json";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }

  function removePopup() {
    sidebarSubMenuOverlay.classList.remove("sub-overlay-vis")
    const popup = document.querySelector(".sb-sub-popup-confirm");
    if (popup) {
      popup.remove()
    }
  }

  function handleCalendarJSON(action) {
    if (action === "download") {
      getJSONDownload()
      return;
    }

    if (action === "upload") {
      // create popup to warn user that they are about to overwrite all calendar data
      const popup = createUploadConfirmationPopup();
      document.body.appendChild(popup);
      sidebarSubMenuOverlay.classList.add("sub-overlay-vis");
      // cancel will close popup but keep open sidebar sub menu
      // "Escape" key will also close popup but keep open sidebar sub menu
      // "a" key will be temporarily disabled while popup is open
      const cancelBtn = popup.querySelector(".sb-sub-popup-btn--cancel");
      const proceedBtn = popup.querySelector(".sb-sub-popup-btn--proceed");
      cancelBtn.onclick = removePopup;
      proceedBtn.onclick = getJSONUpload;

      // if user clicks proceed, create blob to open user's local file system
      // const handleProceed = (e) => {
      //   cancelBtn.classList.add("hide-cancel-btn");
      //   let proceedBtnText = "Waiting for file upload";
      //   setTimeout(() => {
      //     console.log("waiting for file upload");
      //     proceedBtnText += ".";
      //     proceedBtn.textContent = proceedBtnText;
      //     if (proceedBtnText.length > 20) {
      //       proceedBtnText = "Waiting for file upload";
      //     }
      //   }, 2000);
      //   getJSONUpload(e);
      // }


      // check if user has cancelled out of their file explorer
      // const checkForUpload = setInterval(() => {
      //   const userUpload = store.getUserUpload()
      //   if (userUpload) {
      //     clearInterval(checkForUpload);
      //     popup.remove();
      //     sidebarSubMenuOverlay.classList.remove("sub-overlay-vis");
      //     store.clearUserUpload()
      //     return;
      //   } else {
      //   }
      // })
    }
  }

  function handleThemeChange(e) {
    const target = e.target;
    const targetinput = target.firstElementChild;
    const value = targetinput.value
    targetinput.checked = true;
    const currentTheme = context.getColorScheme()
    if (value === currentTheme) {
      return;
    }
    context.setColorScheme(value);
    (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.setTheme)(context);
  }

  function openKbShortcutMenu() {
    closeSubMenu()
    ;(0,_shortcutsModal__WEBPACK_IMPORTED_MODULE_2__["default"])(store)
  }

  function toggleShortcuts() {
    const status = shortcutSwitch.checked ? false : true;
    store.setShortcutsStatus(status)
    setStatusIcon(status)
  }

  function toggleShortcutsIcon() {
    let status = store.getShortcutsStatus()

    status = !status
    store.setShortcutsStatus(status)
    setStatusIcon(status)
    shortcutSwitch.checked = status ? true : false;
  }

  function delegateSubMenuEvents(e) {
    const downloadjsonBtn = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".down-json");
    const uploadjsonBtn = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".upload-json");
    const themebtn = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".theme-option");
    const kbShortcutMenu = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".toggle-kb-shortcuts-btn__smia")
    const shortcutSwitch = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".smia-disable-shortcuts__btn")
    const shortcutSwitchNotifyIcon = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.getClosest)(e, ".keyboard-disabled-sm")


    if (downloadjsonBtn) {
      handleCalendarJSON("download");
      return;
    }

    if (uploadjsonBtn) {
      handleCalendarJSON("upload");
      return;
    }

    if (themebtn) {
      handleThemeChange(e);
      return;
    }

    if (kbShortcutMenu) {
      openKbShortcutMenu();
      return;
    }

    if (shortcutSwitch) {
      toggleShortcuts();
      return;
    }

    if (shortcutSwitchNotifyIcon) {
      toggleShortcutsIcon();
      return;
    }
  }

  function setSidebarSubMenu() {
    openSubMenu();
    sidebarSubMenu.onmousedown = delegateSubMenuEvents;
  }
  setSidebarSubMenu()
}

/***/ }),

/***/ "./src/components/toastPopups/toast.js":
/*!*********************************************!*\
  !*** ./src/components/toastPopups/toast.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ createToast)
/* harmony export */ });
/* harmony import */ var _utilities_svgs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utilities/svgs */ "./src/utilities/svgs.js");


const body = document.querySelector(".body");
const toastoverlay = document.querySelector(".toast-overlay")

function createToast(message, timeout, callback, callbackTwo, removeCallback, undoCallback) {
  function closetoast() {
    toastoverlay.classList.add("hide-toast-overlay")
    document.querySelector(".toast")?.remove()
    if (removeCallback) {
      removeCallback()
    }
  }
  function undo() {
    undoCallback()
    closetoast()
  }

  function initToast() {
    toastoverlay.classList.remove("hide-toast-overlay")
    const toast = document.createElement("aside");
    toast.classList.add("toast");

    const toastMessage = document.createElement("div");
    toastMessage.classList.add("toast-message");
    toastMessage.textContent = message;
    
    const closeIconWrapper = document.createElement("div")
    closeIconWrapper.classList.add("close-toast-icon-wrapper")
    closeIconWrapper.appendChild((0,_utilities_svgs__WEBPACK_IMPORTED_MODULE_0__.createCloseIcon)("var(--white4)"))
    closeIconWrapper.onclick = closetoast
    
    if (undoCallback) {
      const undoToastWrapper = document.createElement("div")
      undoToastWrapper.classList.add("undo-toast-wrapper")

      const undoToastMessage = document.createElement("div")
      undoToastMessage.classList.add("undo-toast-message")
      undoToastMessage.textContent = "Undo"

      undoToastWrapper.appendChild(undoToastMessage);
      toast.append(toastMessage, undoToastWrapper, closeIconWrapper);

      undoToastWrapper.onclick = undo

    } else {
      toast.append(toastMessage, closeIconWrapper);
    }

    body.insertBefore(toast, body.firstChild)

    if (callback) {
      callback()
    }

    if (callbackTwo) {
      callbackTwo()
    }
  }

  initToast()
  toastoverlay.onclick = closetoast

  if (!timeout) {
    timeout = 1000
  } 
  setTimeout(() => {
    closetoast()
  }, timeout)
}

/***/ }),

/***/ "./src/components/toastPopups/toastCallbacks.js":
/*!******************************************************!*\
  !*** ./src/components/toastPopups/toastCallbacks.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ toastCallbackSaving),
/* harmony export */   "removeToastNoCategorySelected": () => (/* binding */ removeToastNoCategorySelected),
/* harmony export */   "taostDeleteEntryWarning": () => (/* binding */ taostDeleteEntryWarning),
/* harmony export */   "toastNoCategorySelected": () => (/* binding */ toastNoCategorySelected)
/* harmony export */ });
const overlay = document.querySelector(".toast-overlay")
const sbform = document.querySelector(".sb__categories--body-form")


function toastCallbackSaving() {
  const toastmessage = document.querySelector(".toast-message");
  toastmessage.textContent = "Saved";
  // overlay.classList.remove("hide-toast-overlay");
}

function removeToast() {
  document.querySelector(".toast")?.remove()
  overlay.classList.add("hide-toast-overlay")
}

function toastNoCategorySelected() {
  overlay.classList.add("toast-overlay--allow__sidebar")
  sbform.classList.add("sb__categories--body-form-hint")
  sbform.addEventListener("mouseover", removeToastNoCategorySelected)
}

function removeToastNoCategorySelected() {
  removeToast()
  overlay.classList.remove("toast-overlay--allow__sidebar")
  sbform.classList.remove("sb__categories--body-form-hint")
  sbform.removeEventListener("mouseover", removeToastNoCategorySelected)
}

function taostDeleteEntryWarning() {

}



/***/ }),

/***/ "./src/components/views/dayview.js":
/*!*****************************************!*\
  !*** ./src/components/views/dayview.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setDayView)
/* harmony export */ });
/* harmony import */ var _forms_formUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../forms/formUtils */ "./src/components/forms/formUtils.js");
/* harmony import */ var _forms_setForm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../forms/setForm */ "./src/components/forms/setForm.js");
/* harmony import */ var _factory_entries__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../factory/entries */ "./src/factory/entries.js");
/* harmony import */ var _menus_entryOptions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../menus/entryOptions */ "./src/components/menus/entryOptions.js");
/* harmony import */ var _utilities_timeutils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utilities/timeutils */ "./src/utilities/timeutils.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");
/* harmony import */ var _utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utilities/dragutils */ "./src/utilities/dragutils.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _toastPopups_toast__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../toastPopups/toast */ "./src/components/toastPopups/toast.js");
/* harmony import */ var _toastPopups_toastCallbacks__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../toastPopups/toastCallbacks */ "./src/components/toastPopups/toastCallbacks.js");
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../locales/en */ "./src/locales/en.js");
// import setViews from "../../config/setViews"
// import setSidebarDatepicker from "../../components/menus/sidebarDatepicker";





















// main app header
const header = document.querySelector(".header")

// day view header (row 1)
const dvHeader = document.querySelector(".dayview--header")
const dvHeaderDayNumber = document.querySelector(".dayview--header-day__title")
const dvHeaderDayOfWeek = document.querySelector(".dayview--header-day__number")
const dvHeaderInfo = document.querySelector(".dayview--header-day__info")

// day view on top container (row 2)
const dvOnTop = document.querySelector('.dayview--ontop-container');

// main grid wrapper (row 3) (scroll wrapper) (offsettop)
const dvGrid = document.querySelector(".dayview__grid")
const dvSideGrid = document.querySelector(".dayview--side-grid")
const dvMainGrid = document.querySelector(".dayview--main-grid")

function setDayView(context, store, datepickerContext) {
  let entries = store.getDayEntries(context.getDate())
  let boxes = new _factory_entries__WEBPACK_IMPORTED_MODULE_2__.Day(
    entries.day,
    entries.allDay
  );

  function getDayviewHeaderEntryCount() {
    let allboxes = boxes.getAllBoxes();
    if (allboxes.length === 0) { return "no entries"; } 
    let [endingToday, startingToday] = [0, 0];

    for (let i = 0; i < allboxes.length; i++) {
      const [start, end, current] = [
        new Date(allboxes[i].start), 
        new Date(allboxes[i].end),
        context.getDate(),
      ]
      if (start.getDate() === current.getDate()) { startingToday++; }
      if (end.getDate() === current.getDate()) { endingToday++; }
    }

    if (startingToday === 1 && endingToday === 1) {
      return `1 entry from ${(0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__.formatStartEndTime)(
        new Date(allboxes[0].start), 
        new Date(allboxes[0].end)
      )}`
    }

    if (startingToday > 1 && (startingToday === endingToday)) {
      return `${startingToday} entries starting & ending today`;
    }
    
    let fulltitle = ""
    if (startingToday > 0) {
      if (startingToday === 1) {
        fulltitle += `${startingToday} entry starting today`
      } else {
        fulltitle += `${startingToday} entries started`
      }
    } else {
      fulltitle += `no entries started`
    }

    if (endingToday > 0) {
      if (endingToday === 1) {
        fulltitle += `  ${endingToday} ending`
      } else {
        fulltitle += `  ${endingToday} ending`
      }
    } else {
      fulltitle += `  no entries ending today`
    }

    return fulltitle;
  }

  function configHeader() {
    [dvHeaderDayNumber, dvHeaderDayOfWeek, dvHeaderInfo].forEach((el) => {
      el.innerText = "";
    })

    dvHeaderDayOfWeek.textContent = context.getDay()
    dvHeaderDayNumber.textContent = _locales_en__WEBPACK_IMPORTED_MODULE_10__["default"].labels.weekdaysShort[context.getWeekday()].toUpperCase() + " :";
    dvHeaderInfo.textContent = getDayviewHeaderEntryCount();
  }

  function renderBoxes() {
    dvMainGrid.innerText = ""
    boxes.getBoxes().forEach((entry) => {
      ;(0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.createBox)(
        dvMainGrid,                         // column
        entry,                              // entry object
        "day",                              // current view 
        store.getCtgColor(entry.category)   // background color
      )
    })
  }

  /** RESIZE NORTH/SOUTH */
  function resizeBoxNSDay(e, box) {
    (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.setStylingForEvent)("dragstart", dvGrid, store)
    document.body.style.cursor = "move";
    const col = box.parentElement

    let boxhasOnTop = false;
    const boxorig = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.getOriginalBoxObject)(box)
    if (box.classList.contains("dv-box-ontop")) {
      boxhasOnTop = true;
      (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.resetStyleOnClick)("day", box)
    }

    box.classList.add("dv-box-resizing")
    const boxTop = box.offsetTop
    const headerOffset = 72 + header.offsetHeight
    ;(0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.createTemporaryBox)(box, col, boxhasOnTop, "day")

    let amountScrolled = parseInt(dvGrid.scrollTop)
    const mousemove = (e) => {
      let newHeight = Math.round(((e.pageY + amountScrolled) - boxTop - headerOffset) / 12.5) * 12.5;

      if (newHeight <= 12.5) {
        box.style.height = "12.5px";
        return;
      } else if ((newHeight + boxTop) > 1188) {
        return;
      } else {
        box.style.height = `${newHeight}px`;
      }
    }

    function mouseup() {
      document.querySelector(".dv-temporary-box").remove();
      box.classList.remove("dv-box-resizing");
      if (boxhasOnTop) {box.classList.add("dv-box-ontop");}

      if (boxorig.height === box.offsetHeight) {
        (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.resetOriginalBox)(box, boxorig);
      } else {
        (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.setBoxTimeAttributes)(box, "day")
        const start = +box.getAttribute("data-dv-start-time")
        const length = +box.getAttribute("data-dv-time-intervals")
        const time = (0,_utilities_timeutils__WEBPACK_IMPORTED_MODULE_4__["default"])(start, length)
        box.setAttribute("data-dv-time", time)
        box.firstChild.nextSibling.firstElementChild.textContent = time

        ;(0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.updateBoxCoordinates)(box, "day", boxes)
        boxes.updateStore(store, box.getAttribute("data-dv-box-id"))
        // check if new position overlaps with other boxes and handle
        if (boxes.getBoxes().length > 1) {
          (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__["default"])(null, "day", boxes)
        } else {
          box.setAttribute("data-dv-box-index", "box-one")
        }
      }


      configHeader()
      ;(0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.setStylingForEvent)("dragend", dvGrid, store);
      document.removeEventListener("mousemove", mousemove)
      document.removeEventListener("mouseup", mouseup)
    }
    document.addEventListener("mousemove", mousemove)
    document.addEventListener("mouseup", mouseup)
  }


  /** DRAG NORTH/ SOUTH, EAST/ WEST */
  function dragEngineDay(e, box) {
    (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.setStylingForEvent)("dragstart", dvGrid, store)
    const col = box.parentElement

    let boxhasOnTop = false;
    const boxorig = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.getOriginalBoxObject)(box);
    if (box.classList.contains("dv-box-ontop")) {
      boxhasOnTop = true;
      (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.resetStyleOnClick)("day", box);
    }

    box.classList.add("dv-box-dragging")
    ;(0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.createTemporaryBox)(box, col, boxhasOnTop, "day")

    const startTop = +box.style.top.split("px")[0]
    const boxHeight = +box.style.height.split("px")[0]
    const startCursorY = e.pageY - dvGrid.offsetTop
    const headerOffset = 72 + header.offsetHeight
    let movedY = 0;

    /** DRAG NORTH SOUTH */
    const mousemove = (e) => {
      const currentCursorY = e.pageY - headerOffset
      let newOffsetY = currentCursorY - startCursorY
      let newTop = Math.round((newOffsetY + startTop) / 12.5) * 12.5
      if (newTop < 0 || currentCursorY < 0) {
        newTop = 0
        return;
      } else if (newTop + boxHeight > 1188) {
        return;
      }
      box.style.top = `${newTop}px`
      movedY = newOffsetY
    }

    const mouseup = () => {
      document.querySelector(".dv-temporary-box").remove()
      box.classList.remove("dv-box-dragging")
      if (boxhasOnTop) { box.classList.add("dv-box-ontop") }

      // if box did not move, no render needed
      // click event to open form
      if (Math.abs(movedY) <= 6) {
        // @function setReset() is provided to the form via the store
        // it will call once the form is either submitted or cancelled
        const setReset = () => {
          (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.resetOriginalBox)(box, boxorig);
          document.querySelector(".dayview-temp-box")?.remove()
          configHeader()
          ;(0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.setStylingForEvent)("dragend", dvGrid, store)
        }
        store.setFormResetHandle("day", setReset)

        const id = box.getAttribute("data-dv-box-id");
        const tempEntry = store.getEntry(id);
        const color = box.style.backgroundColor;
        let offsetColor = color;
        // let offsetColor = `${color.slice(0,3)}a(${color.slice(4, color.length - 1)}, 0.4)`;

        const dates = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.calcDateOnClick)(
          new Date(tempEntry.start),
          +box.getAttribute("data-dv-start-time"),
          +box.getAttribute("data-dv-time-intervals"),
        );

        openDayviewForm(
          box,
          [1, 3],
          [tempEntry.category, color, offsetColor],
          dates,
          ["edit", id, tempEntry.title, tempEntry.description],
        );
        // ******************
      } else {
        (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.setBoxTimeAttributes)(box, "day")
        const start = +box.getAttribute("data-dv-start-time")
        const length = +box.getAttribute("data-dv-time-intervals")
        const time = (0,_utilities_timeutils__WEBPACK_IMPORTED_MODULE_4__["default"])(start, length)
        box.setAttribute("data-dv-time", time)

        box.children[1].children[0].textContent = time;
        (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.updateBoxCoordinates)(box, "day", boxes)
        boxes.updateStore(
          store,
          box.getAttribute("data-dv-box-id")
        )
        // check if new position overlaps with other boxes and handle
        if (boxes.getBoxes().length > 1) {
          (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__["default"])(null, "day", boxes)
        } else {
          box.setAttribute("data-dv-box-index", "box-one")
        }


        configHeader()
      }
      
      (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.setStylingForEvent)("dragend", dvGrid, store)
      document.removeEventListener("mousemove", mousemove)
      document.removeEventListener("mouseup", mouseup)
    }
    document.addEventListener("mousemove", mousemove)
    document.addEventListener("mouseup", mouseup)
  }


  function handleDayviewClose() {
    document.querySelector(".dayview-temp-box")?.remove()
  }


  function openDayviewForm(box, coords, category, dates, type) {
    // store.setFormResetHandle("week", handleWeekviewFormClose);
    store.setFormResetHandle("day", handleDayviewClose);

    const openForm = store.getRenderFormCallback();
    const setup = new _forms_setForm__WEBPACK_IMPORTED_MODULE_1__["default"]();

    const [submitType, id, title, description] = type;
    setup.setSubmission(submitType, id, title, description);
    if (submitType === "create") { box.style.opacity = 0.9; }

    const [categoryName, color, offsetColor] = category;
    setup.setCategory(
      categoryName,
      color,
      offsetColor,
    );

    setup.setPosition(
      1,
      coords,
      parseInt(box.style.top)
    );

    const [start, end] = dates
    setup.setDates((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__.getFormDateObject)(start, end));

    openForm();
    _forms_formUtils__WEBPACK_IMPORTED_MODULE_0__["default"].setFormDatepickerDate(context, datepickerContext, start);

    _forms_formUtils__WEBPACK_IMPORTED_MODULE_0__["default"].getConfig(setup.getSetup());
  }


  /** CREATE BOX ON DRAG */
  /** Drag down empty column to create box */
  function createBoxOnDragDay(e) {
    (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.setStylingForEvent)("dragstart", dvGrid, store)
    document.body.style.cursor = "move";
    const [tempcategory, color] = store.getFirstActiveCategoryKeyPair()

    const box = document.createElement('div');
    box.setAttribute("class", "dv-box dv-box-dragging dayview-temp-box");

    // boxheader is static - create from template
    const boxheader = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.createTempBoxHeader)("day")


    const boxcontent = document.createElement('div');
    const boxtime = document.createElement('span');
    const boxtimeend = document.createElement('span');
    boxcontent.classList.add('dv-box__content');
    boxtime.classList.add('dv-box-time');
    boxtimeend.classList.add('dv-box-time');

    const headerOffset = 72 + header.offsetHeight;
    const scrolled = parseInt(dvGrid.scrollTop);
    const startCursorY = e.pageY - headerOffset;

    let y = Math.round((startCursorY + Math.abs(scrolled)) / 12.5) * 12.5;
    box.setAttribute("style", (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.getBoxDefaultStyle)(y, color))
    
    let coords = { y: +y / 12.5, x: 1, h: 1, e: 2 }
    let [starthour, startmin, endhour, endmin] = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.startEndDefault)(y);
    
    function mousemove(e) {
      let newHeight = Math.round(((e.pageY + scrolled) - y - headerOffset) / 12.5) * 12.5
      if (newHeight <= 12.5) {newHeight = 12.5;}
      if ((newHeight + y) > 1188) {newHeight = 1187.5 - y;}

      box.style.height = `${newHeight}px`
      coords.h = +newHeight / 12.5
      coords.e = +coords.y + coords.h

      endhour = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.calcNewHourFromCoords)(newHeight, y)
      endmin = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.calcNewMinuteFromCoords)(newHeight, y)

      boxtime.style.wordBreak = "break-word"
      boxtime.textContent = `${(0,_utilities_timeutils__WEBPACK_IMPORTED_MODULE_4__.formatTime)(starthour, startmin)}  `
      boxtimeend.textContent = `${(0,_utilities_timeutils__WEBPACK_IMPORTED_MODULE_4__.formatTime)(endhour, endmin)}`
    }

    // append content to temporary box
    boxcontent.append(boxtime, boxtimeend);
    box.append(boxheader, boxcontent)
    e.target.appendChild(box)

    function mouseup() {
      const datesData = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__.getTempDates)(
        new Date(context.getDate()),
        [starthour, endhour],
        [startmin, endmin],
      )

      openDayviewForm(
        box,
        [e.clientX, e.clientY],
        [tempcategory, color, color],
        datesData,
        ["create", null, null, null],
      )

      ;(0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__.setStylingForEvent)("dragend", dvGrid, store)
      document.removeEventListener("mouseup", mouseup)
      document.removeEventListener("mousemove", mousemove)
    }
    document.addEventListener("mousemove", mousemove)
    document.addEventListener("mouseup", mouseup)
  }

  function renderBoxesForGrid() {
    renderBoxes()
    ;(0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_6__["default"])(null, "day", boxes)
  }

  function delegateDayView(e) {
    if ((0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_7__.getClosest)(e, ".dv-box-resize-s")) {
      resizeBoxNSDay(e, e.target.parentElement);
      return;
    }
    
    if ((0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_7__.getClosest)(e, ".dv-box")) {
      dragEngineDay(e, e.target);
      return;
    }

    if ((0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_7__.getClosest)(e, ".dayview--main-grid")) {
      createBoxOnDragDay(e, e.target);
      return;
    }
  }

  const initDayView = () => {
    renderBoxesForGrid();
    configHeader();
    dvGrid.onmousedown = delegateDayView;
  }
  initDayView();
}




// function setBoxWidth(box) {
//   switch (box.getAttribute("data-dv-box-index")) {
//     case "dv-box-one":
//       box.style.left = 'calc((100% - 0px) * 0 + 0px)';
//       box.style.width = "calc((100% - 0px) * 1)"
//       break;
//     case "dv-box-two":
//       box.style.left = "calc((100% - 0px) * 0.1 + 0px)"
//       box.style.width = "calc((100% - 0px) * 0.9)";
//       break;
//     case "dv-box-three":
//       box.style.left = "calc((100% - 0px) * 0.15 + 0px)"
//       box.style.width = "calc((100% - 0px) * 0.85)";
//       break;
//     case "dv-box-four":
//       box.style.left = "calc((100% - 0px) * 0.35 + 0px)"
//       box.style.width = "calc((100% - 0px) * 0.65)"
//       break;
//     case "dv-box-five":
//       box.style.left = "calc((100% - 0px) * 0 + 0px)"
//       box.style.width = "calc((100% - 0px) * 0.34)"
//       break;
//     case "dv-box-six":
//       box.style.left = "calc((100% - 0px) * 0.05 + 0px)"
//       box.style.width = "calc((100% - 0px) * 0.4)"
//       break;
//     case "dv-box-seven":
//       box.style.left = "calc((100% - 0px) * 0.1 + 0px)"
//       box.style.width = "calc((100% - 0px) * 0.38)"
//       break;
//     case "dv-box-eight":
//       box.style.left = "calc((100% - 0px) * 0.1)"
//       box.style.width = "calc((100% - 4px) * 0.4)"
//       break;
//     case "dv-box-nine":
//       box.style.left = "calc((100% - 0px) * 0.3)"
//       box.style.width = "calc((100% - 4px) * 0.7)"
//       break;
//     default:
//       break;
//   }
// }

// function handleOverlap() {
//   // console.log(ho(null, "day",boxes.checkForCollision()))
//   const collisions = boxes.checkForCollision()
//   if (collisions.length > 0) {
//     let boxnumarr = [
//       'dv-box-one',
//       'dv-box-two',
//       'dv-box-three',
//       'dv-box-four',
//       'dv-box-five',
//       'dv-box-six',
//       'dv-box-seven',
//       'dv-box-eight',
//       'dv-box-nine'
//     ]
//     for (let i = 0; i < collisions.length; i++) {
//       const box = document.querySelector(`[data-dv-box-id="${collisions[i].id}"]`)
//       if (i === 0) {
//         box.setAttribute("class", "dv-box box-one")
//         box.setAttribute("data-dv-box-index", "dv-box-one")
//       } else {
//         box.setAttribute("class", `dv-box dv-box-ontop ${boxnumarr[i]}`)
//         box.setAttribute("data-dv-box-index", boxnumarr[i])
//       }
//       setBoxWidth(box)
//     }
//   }
// }




  // function getScript(totalEntries, idx, endDate, endTime) {
//   const scripts = [
//     `1 entry ending on ${endDate}`,
//     `1 entry ending at ${endTime}`,
//     `${totalEntries} total entries ending on ${endDate}`, 
//     `${totalEntries} total entries - last ending on ${endDate}`, 
//     `${totalEntries} total entries - last ending at ${endTime}`,
//     `${totalEntries} entry ending today at ${endTime}`,
//   ];
//   return scripts[idx]
// }

// console.log(boxes.getAllBoxes().filter((box) => {
//   return box.end.getDate() === context.getDate() && box.end.getMonth() === context.getMonth() && box.end.getFullYear() === context.getYear()
// }))
// console.log(boxes.getEntriesEndingOnDay(context.getDay()))

// if (totalEntries > 0) {

//   // no day entries
//   if (dayLen === 0) {
//     if (alldayLen > 1) {
//       // multiple all day entries 
//       console.log(boxes)

//     } else {
//       // one all day entry
//       fulltitle = getScript(
//         1, 0, formatDateForDisplay(boxes.getBoxesTop()[0].end), null,
//       )
//     }
//     // multiple day & all day
//   } else if (dayLen > 0 && alldayLen > 0) {


//     // only day entries
//   } else {
//     // & multiple day entries
//     if (dayLen > 1) {
//       temp = boxes.getBoxes()[dayLen - 1].end
//       fulltitle = getScript(
//         totalEntries,
//         4,
//         null,
//         formatTime(temp.getHours(), temp.getMinutes()),
//       )
//     } else {
//       temp = boxes.getBoxes()[dayLen - 1].end
//       fulltitle = getScript(
//         1, 5, null, formatTime(temp.getHours(), temp.getMinutes())
//       )
//     }
//   }
// }

/***/ }),

/***/ "./src/components/views/listview.js":
/*!******************************************!*\
  !*** ./src/components/views/listview.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setListView)
/* harmony export */ });
/* harmony import */ var _menus_entryOptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../menus/entryOptions */ "./src/components/menus/entryOptions.js");
/* harmony import */ var _config_setViews__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/setViews */ "./src/config/setViews.js");
/* harmony import */ var _forms_setForm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../forms/setForm */ "./src/components/forms/setForm.js");
/* harmony import */ var _forms_formUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../forms/formUtils */ "./src/components/forms/formUtils.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");
/* harmony import */ var _utilities_timeutils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utilities/timeutils */ "./src/utilities/timeutils.js");
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../locales/en */ "./src/locales/en.js");









const monthNames = _locales_en__WEBPACK_IMPORTED_MODULE_7__["default"].labels.monthsShort.map(x => x.toUpperCase())
const weekDayNames = _locales_en__WEBPACK_IMPORTED_MODULE_7__["default"].labels.weekdaysShort.map(x => x.toUpperCase())

const dateTimeTitle = document.querySelector(".datetime-content--title");
const listview = document.querySelector('.listview');
const listviewBody = document.querySelector('.listview__body');

function setListView(context, store, datepickerContext) {
  let today = new Date();
  let [todayYear, todayMonth, todayDay] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__.getdatearray)(today)
  /*************************************** */
  /* CREATE ROW GROUPS*/
  function createRowGroups(entries) {
    let count = 0;
    for (let [key, value] of Object.entries(entries)) {
      count++
      const tempdate = new Date(Date.parse(key))
      const [year, month, day, dow] = [
        tempdate.getFullYear(),
        tempdate.getMonth(),
        tempdate.getDate(),
        tempdate.getDay()
      ]

      const [wn, mn] = [weekDayNames[dow], monthNames[month]];
      const rgheader = createRowGroupHeader(wn, mn, day, key, count === 1 ? true : false);

      const rgContent = document.createElement("div");
      rgContent.classList.add("rowgroup-content");

      value.sort((a, b) => {
        return new Date(a.end) - new Date(b.end)
      })

      value.forEach((entry, idx) => {
        rgContent.append(createRowGroupCell(entry))
      })

      const rg = document.createElement('div');
      rg.classList.add('listview__rowgroup');
      rg.append(rgheader, rgContent);
      listviewBody.appendChild(rg);

    }
  }

  function createRowGroupHeader(weekname, monthname, day, date, settop) {
    const rgHeader = document.createElement('div');
    rgHeader.classList.add('rowgroup-header');
    const rgHeaderDateNumber = document.createElement('div');

    rgHeaderDateNumber.classList.add('rowgroup--header__datenumber');
    rgHeaderDateNumber.textContent = day;
    rgHeaderDateNumber.setAttribute("data-rgheader-date", date)
    const rgHeaderDate = document.createElement('div');
    rgHeaderDate.classList.add('rowgroup--header__monthdow');
    rgHeaderDate.textContent = `${monthname}, ${weekname}`;
    if (settop) {
      rgHeaderDateNumber.classList.add("top-datenumber")
      rgHeaderDate.classList.add("top-monthdow")

    }
    rgHeader.append(rgHeaderDateNumber, rgHeaderDate);
    return rgHeader;
  }

  function createRowGroupCell(entry) {
    const color = store.getCtgColor(entry.category);
    const [start, end] = [new Date(entry.start), new Date(entry.end)]
    let datetitle;
    if ((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__.longerThanDay)(start, end)) {
      let tempyear;
      if (start.getFullYear() !== end.getFullYear()) {
        tempyear = +end.getFullYear() - 2000;
      }

      datetitle = `${monthNames[end.getMonth()]} ${end.getDate()} ${tempyear ? tempyear : ""}`
    } else {
      datetitle = `${(0,_utilities_timeutils__WEBPACK_IMPORTED_MODULE_6__.formatStartEndTimes)(
        [start.getHours(), end.getHours()],
        [start.getMinutes(), end.getMinutes()]
      )}`
    }

    const rgCell = document.createElement('div');
    rgCell.classList.add('rowgroup--cell');
    rgCell.setAttribute('data-rgcell-id', entry.id);
    const rgCellColor = document.createElement("div");
    rgCellColor.classList.add("rowgroup--cell__color");
    rgCellColor.style.backgroundColor = color;
    const rgCellTime = document.createElement("div");
    rgCellTime.classList.add("rowgroup--cell__time");
    rgCellTime.textContent = datetitle;
    const rgCellTitle = document.createElement("div");
    rgCellTitle.classList.add("rowgroup--cell__title");
    rgCellTitle.textContent = entry.title;
    rgCell.append(rgCellColor, rgCellTime, rgCellTitle);
    return rgCell;
  }
  /*************************************** */


  /*************************************** */
  // EVENTS
  function resetCellActive() {
    const activeCell = document?.querySelector(".rowgroup--cell-active");
    if (activeCell) {
      activeCell.classList.remove("rowgroup--cell-active");
      activeCell.removeAttribute("style");
    }
  }

  function getRgContextMenu(cell) {
    const id = cell.getAttribute("data-rgcell-id");
    cell.classList.add("rowgroup--cell-active");
    const entry = store.getEntry(id);
    const start = entry.start;
    const color = store.getCtgColor(entry.category);
    cell.style.backgroundColor = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.hextorgba)(color, 0.2);

    const rect = cell.getBoundingClientRect();
    const height = cell.offsetHeight;
    const rectTop = parseInt(rect.top) + height;
    const rectLeft = parseInt(rect.left);
    const modalHeight = 165;

    let y = rectTop + 12;
    if (rectTop + modalHeight > window.innerHeight) {
      y = rectTop - modalHeight - height - 12;
    }

    console.log(rectTop, window.innerHeight)

    let x = rectLeft;
    if (rectLeft + 150 > window.innerWidth) {
      x = window.innerWidth - 150;
    }

    // *** config & open form ***
    store.setFormResetHandle("list", resetCellActive);

    const setup = new _forms_setForm__WEBPACK_IMPORTED_MODULE_2__["default"]();
    setup.setSubmission("edit", id, entry.title, entry.description);
    setup.setCategory(entry.category, color, color);
    setup.setPosition(x, [x, y], y);
    setup.setDates((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__.getFormDateObject)(start, entry.end));
    _forms_formUtils__WEBPACK_IMPORTED_MODULE_3__["default"].setFormDatepickerDate(context, datepickerContext, start);

    const finishSetup = () => _forms_formUtils__WEBPACK_IMPORTED_MODULE_3__["default"].getConfig(setup.getSetup());
    (0,_menus_entryOptions__WEBPACK_IMPORTED_MODULE_0__["default"])(context, store, entry, datepickerContext, finishSetup);
    const modal = document.querySelector(".entry__options")
    modal.style.top = y + "px";
    modal.style.left = x + "px";
  }

  // SWITCH TO DAY VIEW
  function setDayViewLV(target) {
    let [year, month, day] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__.getDateFromAttribute)(target, 'data-rgheader-date', "month");
    context.setDate(year, month, day);
    context.setDateSelected(day);
    if (context.getSidebarState() === "open") {
      datepickerContext.setDate(year, month, day);
      datepickerContext.setDateSelected(day);
    }
    context.setComponent("day")
    ;(0,_config_setViews__WEBPACK_IMPORTED_MODULE_1__["default"])("day", context, store, datepickerContext)
  }
  /*************************************** */


  /*************************************** */
  // DELEGATION
  function delegateListview(e) {
    const headerNum = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".rowgroup--header__datenumber");
    const rgCell = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".rowgroup--cell");

    if (headerNum) {
      setDayViewLV(e.target);
      return;
    }

    if (rgCell) {
      // console.log(rgCell)
      // rgCell.classList.toggle("rowgroup--cell-active")
      getRgContextMenu(rgCell)
      return;
    }
  }

  const initListView = () => {
    listviewBody.innerText = "";

    const activeEnt = store.getActiveEntries();
    if (activeEnt.length === 0) {
      dateTimeTitle.textContent = "No Entries to Display";
      return;
    } else {
      // update : 1.02 -- (1/16/23)
      // The following logic is in its first stage and will be optimized when I come up with a better solution.
      // I'm debating on whether to use a load more system or an infinite scroll system.
      const entries = store.sortBy(activeEnt, "start", "desc");

      const groupedEntries = entries.reduce((acc, curr) => {
        const date = new Date(curr.start)
        const [year, month, day] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__.getdatearray)(date)
        const datestring = `${year}-${month}-${day}` // for parse&group

        if (year < todayYear) {
          return acc;
        } else if (year === todayYear) {
          if (month < todayMonth) {
            return acc;
          } else if (month === todayMonth && day < todayDay) {
            return acc;
          }
        }

        if (!acc[datestring]) { acc[datestring] = [] }
        acc[datestring].push(curr)
        return acc;
      }, {})

      // set the header title to the first date with entries that is not in the past and the last date with entries
      // if no entries are in the future, set the header title to "Schedule Clear";
      const keys = Object.keys(groupedEntries)
      const length = keys.length;
      if (length === 0) {
        dateTimeTitle.textContent = "Schedule Clear"
      } else {
        // true will slice the year at last two digits if two years are displayed at the same time;

        const earliestDate = new Date(Date.parse(keys[0]))

        context.setDate(
          earliestDate.getFullYear(),
          earliestDate.getMonth(),
          earliestDate.getDate()
        );

        context.setDateSelected(earliestDate.getDate());

        if (context.getSidebarState === "open") {
          datepickerContext.setDate(
            earliestDate.getFullYear(),
            earliestDate.getMonth(),
            earliestDate.getDate()
          )
          datepickerContext.setDateSelected(earliestDate.getDate());
        }

        dateTimeTitle.textContent = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_5__.formatStartEndDate)(
          keys[0],
          keys[length - 1],
          true
        );
      }
      createRowGroups(groupedEntries);
      listview.onclick = delegateListview;
    }
  }
  initListView();
}

/***/ }),

/***/ "./src/components/views/monthview.js":
/*!*******************************************!*\
  !*** ./src/components/views/monthview.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setMonthView)
/* harmony export */ });
/* harmony import */ var _config_setViews__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config/setViews */ "./src/config/setViews.js");
/* harmony import */ var _menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../menus/sidebarDatepicker */ "./src/components/menus/sidebarDatepicker.js");
/* harmony import */ var _forms_formUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../forms/formUtils */ "./src/components/forms/formUtils.js");
/* harmony import */ var _forms_setForm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../forms/setForm */ "./src/components/forms/setForm.js");
/* harmony import */ var _menus_entryOptions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../menus/entryOptions */ "./src/components/menus/entryOptions.js");
/* harmony import */ var _factory_queries__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../factory/queries */ "./src/factory/queries.js");
/* harmony import */ var _toastPopups_toast__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../toastPopups/toast */ "./src/components/toastPopups/toast.js");
/* harmony import */ var _toastPopups_toastCallbacks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../toastPopups/toastCallbacks */ "./src/components/toastPopups/toastCallbacks.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../utilities/dragutils */ "./src/utilities/dragutils.js");
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../locales/en */ "./src/locales/en.js");
// rendering






// Box query


// popup messages / actions



// date utilities


// general utilities


// drag&drop / resize utilities


// naming

const monthNames = _locales_en__WEBPACK_IMPORTED_MODULE_11__["default"].labels.monthsShort



const resizeoverlay = document.querySelector(".resize-overlay")
const sidebar = document.querySelector(".sidebar")
const monthWrapper = document.querySelector(".monthview--calendar")

function setMonthView(context, store, datepickerContext) {
  const montharray = context.getMonthArray()
  const monthentries = store.getMonthEntries(montharray)
  let groupedEntries = store.getGroupedMonthEntries(monthentries)

  const boxquery = new _factory_queries__WEBPACK_IMPORTED_MODULE_5__["default"](
    window.innerWidth <= 530 || window.innerHeight <= 470
  );

  function renderSidebarDatepickerMonth() {
    if (!sidebar.classList.contains("hide-sidebar")) {
      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay())
      context.setDateSelected(context.getDay())
      ;(0,_menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_1__["default"])(context, store, datepickerContext)
    }
  }

  function handleOverlay(type) {
    if (type === "hide") {
      resizeoverlay.classList.add("hide-resize-overlay");
      store.removeActiveOverlay("hide-resize-overlay");
    } else {
      resizeoverlay.classList.remove("hide-resize-overlay");
      store.addActiveOverlay("hide-resize-overlay");
    }
  }

  function setDayViewViaMonth() {
    context.setComponent("day")
    ;(0,_config_setViews__WEBPACK_IMPORTED_MODULE_0__["default"])("day", context, store, datepickerContext)
    renderSidebarDatepickerMonth()
  }

  function renderDayViewViaModal(parentDate) {
    handleOverlay("hide")
    context.setDate(
      parentDate.getFullYear(),
      parentDate.getMonth(),
      parentDate.getDate()
    );
    setDayViewViaMonth();
  }

  function createBox(id, category, top, title) {
    const box = document.createElement("div")
    box.classList.add("monthview--box")
    box.setAttribute("data-monthview-id", id)
    box.style.backgroundColor = store.getCtgColor(category)
    box.style.top = `${top}px`
    box.style.height = `${boxquery.getHeight()}px`
    box.style.width = "100%";

    const boxtitle = document.createElement("div")
    boxtitle.classList.add("monthview--title")
    boxtitle.textContent = title
    box.appendChild(boxtitle)
    return box
  }

  function createGroupedCell(cellDate, count) {
    const groupedBxs = document.createElement('div');
    groupedBxs.classList.add('monthview--daygroup');
    groupedBxs.setAttribute("data-mvgrouped-date", cellDate)
    groupedBxs.setAttribute("data-mvgrouped-length", count)
    const groupedDiv = document.createElement("div")
    groupedDiv.classList.add("monthview--grouped")
    const groupedTitle = document.createElement("div")
    groupedTitle.classList.add("monthview--daycontent__grouped-title")
    groupedTitle.textContent = count + " " + "more..."

    groupedDiv.appendChild(groupedTitle)
    groupedBxs.appendChild(groupedDiv)
    return groupedBxs;
  }

  function createCellHeader(cell, day) {
    const daynumberAndMonth = day.getDate() + " " + monthNames[day.getMonth()]
    const daynumber = document.createElement('span');
    daynumber.classList.add("monthview--daynumber")
    /**
     * case 1: cell does not represent current month
     * case 2: cell represents first day of current month
     * case 3: cell represents today
     * case 4: cell represents days within current month
    **/
    if (day.getMonth() !== context.getMonth()) {
      daynumber.textContent = daynumberAndMonth;
      daynumber.classList.add("monthview--daynumber-prevnext");
    } else if (day.getDate() === 1) {
      daynumber.textContent = daynumberAndMonth;
    } else if (context.isToday(day)) {
      daynumber.textContent = day.getDate();
      daynumber.classList.add("monthview--daynumber-today");
      cell.classList.add("monthview--today");
    } else {
      daynumber.textContent = day.getDate()
    }
    return daynumber;
  }

  function createCell(day, idx, entry, cellDate) {
    const cellCoordinates = [
      +day.getDay(),        // (x): day of week
      Math.floor((idx) / 7) // (y): week of month
    ]

    const cell = document.createElement("div");
    cell.classList.add("monthview--day");
    cell.setAttribute("data-mv-date", cellDate)
    cell.setAttribute("data-mv-idx", idx)
    cell.setAttribute("data-mv-coordinates", cellCoordinates)

    const dayofmonth = document.createElement('div');
    const cellContent = document.createElement('div');
    dayofmonth.classList.add('monthview--dayofmonth');
    cellContent.classList.add('monthview--daycontent');

    if (day.getMonth() === context.getMonth() && day.getDate() === context.getDateSelected()) {
      dayofmonth.classList.add("monthview--dayofmonth-selected")
    }
    dayofmonth.appendChild(createCellHeader(cell, day))


    let toptotal = 0; // box.style.top = (box index) * boxquery.getTop()


    if (entry !== undefined && entry.length > 0) {

      // handle instances where entries have same day but different month
      entry = entry.filter((el) => new Date(el.start).getMonth() === day.getMonth())

      if (entry.length >= 6) {
        // automatically group if there are more than 6 entries on a day
        cellContent.appendChild(createGroupedCell(cellDate, entry.length))
        cellContent.classList.add("monthview--daycontent-grouped")

      } else {

        // not grouped (less than 6 entries)
        entry.forEach((el, idx) => {
          if ((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.compareDates)(new Date(el.start), day)) {
            if (idx > 0) {
              toptotal += boxquery.getTop()
            }
            cellContent.appendChild(createBox(
              el.id,        // entry id
              el.category,  // backgroundColor
              toptotal,     // style.top
              el.title      // entry title
            ))
          }
        })
      }
    }

    cell.append(dayofmonth, cellContent);
    monthWrapper.appendChild(cell);
  }

  function populateCells() {
    monthWrapper.innerText = "";
    montharray.length < 42
      ? monthWrapper.classList.add("five-weeks")
      : monthWrapper.classList.remove("five-weeks");

    const dayHasEntry = (day) => {
      const dayEntries = groupedEntries[day.getDate()];
      return dayEntries !== undefined ? dayEntries : [];
    }

    montharray.forEach((day, idx) => {
      createCell(day, idx, dayHasEntry(day), (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.getDateFormatted)(day))
    });

    groupedEntries = [];
  }

  function getCoordinatesFromCell(cell) {
    return cell.getAttribute("data-mv-coordinates").split(",").map((x) => {
      return parseInt(x);
    })
  }

  function configureForStorage(newCell, clone) {
    let [year, month, day] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.getDateFromAttribute)(newCell, "data-mv-date", "month");
    const id = clone.getAttribute("data-monthview-id");
    let tempEntry = store.getEntry(id);

    let [start, end] = [new Date(tempEntry.start), new Date(tempEntry.end)];
    let tempdate = new Date(year, month, day);
    let diff = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.getDurationSeconds)(start, tempdate);
    let endDay = end.getDate() + Math.floor(diff / 86400) + 1;

    store.updateEntry(id, {
      start: new Date(
        year, month, day, start.getHours(), start.getMinutes()
      ),
      end: new Date(
        end.getFullYear(), end.getMonth(), endDay, end.getHours(), end.getMinutes()
      ),
    });
  }

  function createTemporaryBox(box) {
    const clone = box.cloneNode(true);
    monthWrapper.appendChild(clone);
    clone.classList.add("box-mv-dragactive");
    clone.focus();
  }

  function configGroupedCellOnDrop(groupedCell) {
    const count = groupedCell.getAttribute("data-mvgrouped-length");
    groupedCell.setAttribute("data-mvgrouped-length", +count + 1);
    groupedCell.firstChild.firstChild.textContent = `${groupedCell.getAttribute("data-mvgrouped-length")} more...`;
  }

  function configClonedBoxForDrop(clone) {
    clone.classList.remove("box-mv-dragactive");
    clone.style.top = "0px";
    clone.style.left = "0px";
    clone.style.width = "100%";
    clone.style.height = `${boxquery.getHeight()}px`;
  }

  function resetCellOnDrop(bxs, transition) {
    if (bxs.length === 0 || bxs === undefined) return;
    for (let i = 0; i < bxs.length; i++) {

      if (bxs[i] !== undefined && bxs[i] !== null && !bxs[i].classList.contains("monthview--box__form-temp")) {
        bxs[i].style.top = `${i * boxquery.getTop()}px`;

        if (transition) {
          bxs[i].classList.add("monthview--box__drop");
          setTimeout(() => {
            bxs[i].classList.remove("monthview--box__drop")
          }, 200);

        } else {
          bxs[i].setAttribute("class", "monthview--box");
        }
      }
    }
  }

  function createGroupedCellOnDrop(cell, content, boxes, clone) {
    const newGroupedCell = document.createElement('div');
    newGroupedCell.classList.add('monthview--daygroup');
    newGroupedCell.setAttribute("data-mvgrouped-date", cell.getAttribute("data-mv-date"));
    newGroupedCell.setAttribute("data-mvgrouped-length", boxes.length);

    const groupedDiv = document.createElement("div");
    groupedDiv.classList.add("monthview--grouped");
    const groupedTitle = document.createElement("div");
    groupedTitle.classList.add("monthview--daycontent__grouped-title");
    groupedTitle.textContent = boxes.length + " " + "more...";

    // reset cell content to empty then append grouped cell
    content.innerText = "";
    newGroupedCell.appendChild(groupedDiv);
    groupedDiv.appendChild(groupedTitle);
    content.appendChild(newGroupedCell);
    content.classList.add("monthview--daycontent-grouped")
    clone.remove();
  }

  // the month view drag and drop system differs from the week & day views
  // see readme for more info (section : drag engine)
  function dragEngineMonth(e, box) {
    (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setStylingForEvent)("dragstart", monthWrapper, store);
    const startDragTime = Date.now()
    const parent = box.parentElement;
    const cell = parent.parentElement;
    cell.classList.add("current-drop-zone");

    const originalCellLength = parent.childElementCount;
    const [cellX, cellY] = getCoordinatesFromCell(cell);

    // create cloned box with class box-mv-dragactive
    createTemporaryBox(box);
    const clone = document?.querySelector(".box-mv-dragactive");
    clone.setAttribute("data-box-mvx", cellX);
    clone.setAttribute("data-box-mvy", cellY);

    const cellRect = cell.getBoundingClientRect();
    const cellWidth = parseFloat(cellRect.width.toFixed(2))
    const cellHeight = parseFloat(cellRect.height.toFixed(2));
    const wrapperLeft = parseInt(monthWrapper.offsetLeft)
    const boxRect = box.getBoundingClientRect();
    const boxWidth = parseFloat(boxRect.width);
    const boxHeight = boxquery.getHeight()

    clone.style.top = `${parent.offsetTop}px`;
    clone.style.width = `${boxWidth}px`;
    clone.style.height = `${boxHeight}px`;
    clone.style.left = `${parent.offsetLeft}px`
    clone.style.display = "none"

    let hasFiveWeeks = monthWrapper.classList.contains("five-weeks");
    let [startcursorx, startcursory] = [e.clientX, e.clientY];
    let [movedX, movedY] = [0, 0];
    let [lastX, lastY] = [cellX, cellY];
    let gaveStyles = false; 
    let changeCursor = false;
    


    const mousemove = e => {
      movedX = Math.abs(e.clientX - startcursorx);
      movedY = Math.abs(e.clientY - startcursory);
      // Do not apply styles until user has moved the box at least 5px from starting position.
      if (movedX > 1 || movedY > 1) {
        if (!changeCursor) {
          document.body.style.cursor = "move";
          changeCursor = true;
        }
      }
      if (movedX > 3 || movedY > 3) {
        if (!gaveStyles) {
          // document.body.style.cursor = "move";
          box.style.opacity = "0.5";
          clone.style.display = "block"
        }
        gaveStyles = true;
      }

      // *********************
      // DRAG EAST / WEST
      let newX = Math.floor((e.clientX - monthWrapper.offsetLeft) / cellWidth);
      // min : first column
      if (newX < 0) {
        newX = 0;
        return;
      }
      // max : last column
      if (newX > 6) {
        newX = 6;
        return;
      }

      // update new left position once
      if (lastX !== newX) {
        let multX = (newX * cellWidth) + wrapperLeft
        clone.style.left = `${parseFloat(multX.toFixed(2))}px`;
        lastX = newX;
      }


      // *********************
      // DRAG NORTH / SOUTH
      let newY = Math.floor((e.clientY - monthWrapper.offsetTop) / cellHeight);
      // min : first row
      if (newY < 0) {
        newY = 0;
        return;
      }
      // max : last row (5 weeks)
      if (hasFiveWeeks && newY > 4) {
        newY = 4;
        return;
      }
      // max : last row (6 weeks)
      if (!hasFiveWeeks && newY > 5) {
        newY = 5;
        return;
      }

      // ensure new top position is only calculated if the cursor has moved
      // vertically across a cell border
      if (lastY !== newY) {
        let multY = (newY * cellHeight) + monthWrapper.offsetTop + 16
        clone.style.top = `${parseFloat(multY.toFixed(2))}px`;
        lastY = newY;
      }

      // *********************
      // .current-drop-zone
      // Provides a callable reference to the
      // final drop zone initiated on mouseup. 
      document.querySelector(".current-drop-zone")?.classList.remove("current-drop-zone");
      document.querySelector(`[data-mv-coordinates="${newX},${newY}"]`).classList.add("current-drop-zone");
    }

    const mouseup = () => {
      const newCell = document?.querySelector(".current-drop-zone");
      const endDragTime = Date.now()
      const timeDiff = endDragTime - startDragTime
      const [newCellX, newCellY] = getCoordinatesFromCell(newCell);
      newCell.classList.remove("current-drop-zone");
      const newCellContent = newCell.children[1];
      const boxes = newCellContent?.children;
      let boxmoved = false;


      // newcell not found 
      if (newCell === undefined || newCell === null) {
        (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setStylingForEvent)("dragend", monthWrapper, store);
        box.style.opacity = "1";
        clone.remove();
        boxmoved = false;
        document.removeEventListener("mousemove", mousemove);
        document.removeEventListener("mouseup", mouseup);
        return;
      }

      // handle case where box is not moved
      // treat as click event if quick enough
      if (newCellX === cellX && newCellY === cellY) {
        boxmoved = false;
        box.style.opacity = "1";
        clone.remove();
        if (timeDiff < 200) {
          openFormOnClickMV(box, newCell);
        } 

        // box was moved
      } else {
        //    case 1 : cell has 6 or more items (more than 6 items)
        //    case 2 : cell is not empty and not group (1-5 items)
        //    case 3 : cell is now a group (6 items)
        //    case 4 : cell is empty
        // cases 1-4 : run update after to update styling
        // (click)     case 5 : box not moved 
        // movedX / movedY : cursor distance, i.e. (dragstart to dragend)
        boxmoved = true;
        if (boxes[0] !== undefined) {

          // grouped cell
          if (boxes[0].classList.contains("monthview--daygroup")) {
            // (case 1)
            configGroupedCellOnDrop(boxes[0]);
            configureForStorage(newCell, clone);
            clone.remove();
            box.remove();

          } else {
            // ***********************
            // setup for cases 2 & 3 (not grouped/not empty)
            configClonedBoxForDrop(clone);
            newCellContent.insertBefore(clone, boxes[0]);
            configureForStorage(newCell, clone);
            box.remove();
            // ***********************
            if (boxes.length <= 5) {
              // (case 2)
              resetCellOnDrop(boxes, true);
            } else {
              // (case 3)
              createGroupedCellOnDrop(newCell, newCellContent, boxes, clone);
            }
          }
        } else {
          // (case 4)
          configClonedBoxForDrop(clone);
          box.remove();
          newCellContent.appendChild(clone);
          configureForStorage(newCell, clone);
          renderSidebarDatepickerMonth();
        }
      }


      if (boxmoved) {
        // & original cell empty 
        if (originalCellLength === 1) {
          renderSidebarDatepickerMonth();
        } else {
          // & original cell not empty --- re calculate styling
          resetCellOnDrop(parent.children, true);
        }
      }
      /*******************/
      (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setStylingForEvent)("dragend", monthWrapper, store);
      document.removeEventListener("mousemove", mousemove);
      document.removeEventListener("mouseup", mouseup);
    }
    document.addEventListener("mousemove", mousemove);
    document.addEventListener("mouseup", mouseup);
  }

  function getMoreModalEntries(e) {
    const [y, m, d] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.getDateFromAttribute)(
      e.target.parentElement.parentElement, "data-mv-date", "month"
    );
    return store.getDayEntriesArray(new Date(y, m, d));
  }

  function closeMoreModalOnEscape(e) {
    if (e.key === "Escape") {
      closeMoreModal()
    }
  }

  function closeMoreModal() {
    const mm = document?.querySelector(".more-modal");
    if (mm) {
      mm.remove();
    }
    handleOverlay("hide");
    document.removeEventListener("keydown", closeMoreModalOnEscape);
  }

  function createMoreModalBox(moreModalEntries) {
    const modalContent = document.createElement("div");
    modalContent.classList.add("more-modal-content");
    for (let i = 0; i < moreModalEntries.length; i++) {
      const entry = moreModalEntries[i];

      const modalEntry = document.createElement("div");
      modalEntry.classList.add("more-modal-entry");
      modalEntry.style.top = `${i * 22}px`;

      modalEntry.style.width = `calc(100% - 4px)`;
      modalEntry.style.height = "20px";
      modalEntry.setAttribute("data-monthview-id", entry.id);
      modalEntry.setAttribute("data-mvhidden-category", entry.category);
      modalEntry.style.backgroundColor = store.getCtgColor(entry.category);

      const modalEntryTitle = document.createElement("div");
      modalEntryTitle.classList.add("more-modal-entry-title");
      modalEntryTitle.textContent = entry.title;

      modalEntry.appendChild(modalEntryTitle);
      modalContent.appendChild(modalEntry);
    }
    return modalContent;
  }
  // if more than four tasks exist in a cell, group them on next reload
  function createMoreModal(e) {
    const moreModalEntries = getMoreModalEntries(e);
    handleOverlay("show");
    // parent : month cell
    const parent = e.target.parentElement.parentElement;
    const modal = document.createElement("div");
    modal.classList.add("more-modal");
    modal.setAttribute("data-mv-modal", parent.getAttribute("data-mv-idx"));

    const r = parent.getBoundingClientRect();
    const [
      parentTop, parentLeft,
      parentBottom, parentWidth, parentHeight
    ] = [r.top, r.left, r.bottom, r.width, r.height].map((x) => {
      return Math.round(x)
    });
    const [pX, pY] = getCoordinatesFromCell(parent);
    if (pX === 6) {
      modal.style.right = `0`;
    } else if (pX === 0) {
      modal.style.left = `0`;
    } else {
      modal.style.left = `${parentLeft - parseInt(parentWidth * 0.25)}px`
    }

    modal.style.top = "10%";
    modal.style.bottom = "10%";
    modal.style.margin = "auto 0";
    modal.style.minWidth = "160px";
    modal.style.width = `${parentWidth + parseInt(parentWidth * 0.5)}px`;
    modal.style.maxHeight = "300px";
    modal.style.height = "40%";
    modal.style.minHeight = "120px";

    const modalHeader = document.createElement("div");
    modalHeader.classList.add("more-modal-header");
    const modalHeaderTitle = document.createElement("div");
    modalHeaderTitle.classList.add("more-modal-header-title");
    const parentDate = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.createDateFromFormattedString)(e.target.parentElement.parentElement.getAttribute("data-mv-date"));

    // dayn: daynumber (1, 2, 3, etc)
    const dowspan = document.createElement("span");
    dowspan.classList.add("more-modal-header-title-dow");
    dowspan.textContent = _locales_en__WEBPACK_IMPORTED_MODULE_11__["default"].labels.weekdaysShort[parentDate.getDay()].toUpperCase();

    const daynspan = document.createElement("span");
    daynspan.classList.add("more-modal-header-title-dayn");
    daynspan.textContent = parentDate.getDate();

    const modalHeaderClose = document.createElement("div");
    modalHeaderClose.classList.add("more-modal-header-close");
    modalHeaderClose.textContent = "X";
    modalHeaderClose.setAttribute("data-tooltip", "Close");

    modalHeaderTitle.append(modalHeaderClose, dowspan, daynspan);
    modalHeader.appendChild(modalHeaderTitle);
    modal.append(modalHeader, createMoreModalBox(moreModalEntries)) //entries
    monthWrapper.appendChild(modal);

    // open day view (number click)
    daynspan.addEventListener("click", () => {
      renderDayViewViaModal(parentDate);
    }, { once: true });

    // click away from modal to close
    resizeoverlay.addEventListener("click", (e) => {
      closeMoreModal();
    }, { once: true });

    document.addEventListener("keydown", closeMoreModalOnEscape);
  }

  function dragOutOfModal(e) {
    const targetModal = e.target.closest(".more-modal");
    const targetCellIdx = parseInt(targetModal.getAttribute("data-mv-modal"));
    const targetCell = document.querySelector(`[data-mv-idx="${targetCellIdx}"]`);

    const cloned = e.target.cloneNode(true);
    cloned.setAttribute("class", "monthview--box");
    cloned.firstChild.setAttribute("class", "monthview--title");
    cloned.style.top = `${boxquery.getTop()}px`;
    cloned.style.left = "0px";
    cloned.style.width = "100%";
    targetCell.lastChild.appendChild(cloned);

    // update title of more modal to reflect one less entry
    const moreModal = targetCell.lastChild.firstChild;
    const newLength = parseInt(moreModal.getAttribute("data-mvgrouped-length")) - 1;

    if (newLength < 1) {
      targetCell.lastChild.classList.remove("monthview--daycontent-grouped")
      moreModal.remove();
      cloned.style.top = "0px";
    } else {
      moreModal.setAttribute("data-mvgrouped-length", newLength);
      moreModal.firstChild.firstChild.textContent = `${newLength} more...`;
    }

    // instantiate drag engine on cloned element and destroy the more modal instance
    dragEngineMonth(e, cloned);
    cloned.focus();
    targetModal.remove();
  }

  function openDayView(e) {
    const [year, month, day] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.getDateFromAttribute)(
      e.target.parentElement, "data-mv-date", "month"
    );
    context.setDate(year, month, day);
    context.setDateSelected(day);
    setDayViewViaMonth();
  }

  function handleMonthviewEditFormClose() {
    const tempcell = document.querySelector(".monthview--daycontent__form-temp");
    if (!tempcell) return;

    tempcell.removeAttribute("style");
    tempcell.classList.remove("monthview--daycontent__form-temp");
  }

  // reset cell to original state if form is closed without any action
  function handleMonthviewFormClose() {
    const tempbox = document?.querySelector(".monthview--box__form-temp")
    if (!tempbox) return;
    const cellContent = tempbox.parentElement;
    const cell = cellContent.parentElement;
    cell.removeAttribute("style");
    cell.classList.remove("monthview--daycontent__form-temp");
    tempbox.remove();
    resetCellOnDrop(cellContent.children, false);
  }

  function openFormOnClickMV(box, cell) {
    const id = box.getAttribute("data-monthview-id");
    const entry = store.getEntry(id);
    const start = entry.start;
    const color = store.getCtgColor(entry.category);
    const offsetColor = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_9__.hextorgba)(color, 0.5);
    cell.classList.add("monthview--daycontent__form-temp");
    cell.style.backgroundColor = offsetColor;
    const [x, y] = getCoordinatesFromCell(cell);
    
    let offX = cell.offsetLeft;
    let offY = cell.offsetTop;
    let offH = cell.offsetHeight;
    let offW = cell.offsetWidth;

    if (x >= 3) {
      offX -= (offW * (x - 2));
    }
    if (y >= 2) {
      offY -= (offH * 2);
    } else {
      offY += offH;
    }

    // *** config & open form ***
    store.setFormResetHandle("month", handleMonthviewEditFormClose);

    const setup = new _forms_setForm__WEBPACK_IMPORTED_MODULE_3__["default"]();
    setup.setSubmission("edit", id, entry.title, entry.description);
    setup.setCategory(entry.category, color, color);
    setup.setPosition(x, [x, y], parseInt(monthWrapper.offsetTop) - 16);
    setup.setDates((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.getFormDateObject)(start, entry.end));

    _forms_formUtils__WEBPACK_IMPORTED_MODULE_2__["default"].setFormDatepickerDate(context, datepickerContext, start);

    // Entry option modal will either trigger or release the above setup
    // provide callback to finish setup and open form
    const finishSetup = () => _forms_formUtils__WEBPACK_IMPORTED_MODULE_2__["default"].getConfig(setup.getSetup());
    (0,_menus_entryOptions__WEBPACK_IMPORTED_MODULE_4__["default"])(context, store, entry, datepickerContext, finishSetup);
    const modal = document.querySelector(".entry__options")
    modal.style.top = offY + "px";
    modal.style.left = offX + "px";
    // *******************
  }

  function configNewBoxInsertion(cellWrapper, cell, category, color) {
    const tempBox = createBox(
      'temp',          // box.id
      category,        // box.style.backgroundColor 
      0,               // box.style.top
      "( New Entry )"  // box title
    );
    cellWrapper.scrollTop = 0;
    tempBox.classList.add("monthview--box__form-temp");
    cell.classList.add("monthview--daycontent__form-temp");
    cell.style.backgroundColor = color;
    if (cellWrapper.children.length > 0) {
      cellWrapper.insertBefore(tempBox, cellWrapper.children[0]);
      resetCellOnDrop(cellWrapper.children, false);
    } else {
      cellWrapper.appendChild(tempBox);
    }
  }

  function createEntryOnEmptyTarget(e, cellWrapper) {
    if (e.target.classList.contains("monthview--daycontent")) {
      // if no categories are selected, open sidebar and highlight category box
      const categoryBox = document.querySelector(".sb__categories--body")
      if (store.getActiveCategories() === undefined) {
        categoryBox.classList.remove("toggle-category--modal")
        ;(0,_toastPopups_toast__WEBPACK_IMPORTED_MODULE_6__["default"])(
          "No categories selected",
          3000,
          sidebar.classList.contains("hide-sidebar") ? store.getRenderSidebarCallback() : null,
          _toastPopups_toastCallbacks__WEBPACK_IMPORTED_MODULE_7__.toastNoCategorySelected,
          _toastPopups_toastCallbacks__WEBPACK_IMPORTED_MODULE_7__.removeToastNoCategorySelected,
          null,
        )
        return;
      } else {

        // get first active category & create temp box with its color
        const cell = cellWrapper.parentElement;
        const [start, end] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.generateTempStartEnd)(
          (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.getDateFromAttribute)(cell, "data-mv-date", "month")
        );
        const [tempctg, color] = store.getFirstActiveCategoryKeyPair();
        const offsetcolor = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_9__.hextorgba)(color, 0.5);
        const [x, y] = getCoordinatesFromCell(cell);

        configNewBoxInsertion(cellWrapper, cell, tempctg, offsetcolor)
        store.setFormResetHandle("month", handleMonthviewFormClose);
        const openForm = store.getRenderFormCallback();
        const setup = new _forms_setForm__WEBPACK_IMPORTED_MODULE_3__["default"]();

        setup.setSubmission("create", null, null, null);
        setup.setCategory(tempctg, color, color);
        setup.setPosition(x, [x, y], parseInt(monthWrapper.offsetTop) - 16)
        setup.setDates((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_8__.getFormDateObject)(start, end))

        openForm()
        _forms_formUtils__WEBPACK_IMPORTED_MODULE_2__["default"].setFormDatepickerDate(context, datepickerContext, start)
        _forms_formUtils__WEBPACK_IMPORTED_MODULE_2__["default"].getConfig(setup.getSetup())
      }
    }
  }

  function delegateMonthEvents(e) {
    // delegates via monthview--box (monthWrapper) onmousedown
    const monthviewBox = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_9__.getClosest)(e, ".monthview--box")
    const monthviewBoxHeader = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_9__.getClosest)(e, ".monthview--dayofmonth")
    const groupedBox = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_9__.getClosest)(e, ".monthview--daygroup")
    const groupedBoxItem = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_9__.getClosest)(e, ".more-modal-entry")
    const closeGroupedBox = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_9__.getClosest)(e, ".more-modal-header-close")

    // target : any box (task/event) within a day
    // execute : drag and drop
    if (monthviewBox) {
      if (window.innerHeight <= 300) return;
      dragEngineMonth(e, e.target)
      return;
    }

    // target : cell day number
    // execute : open day view of that day 
    if (monthviewBoxHeader) {
      openDayView(e)
      return;
    }

    // target : grouped box (more...)
    // execute : create popup modal with all grouped entries of that day
    if (groupedBox) {
      createMoreModal(e)
      return;
    }

    // target : entry within more modal 
    // execute : drag box (e.target) out of the more modal for reassignment, (same day works as well)
    if (groupedBoxItem) {
      dragOutOfModal(e)
      return;
    }

    // target : close btn within more modal
    if (closeGroupedBox) {
      closeMoreModal()
      return;
    }
  }

  function delegateNewBox(e) {
    // delegates via monthview--daycontent (cellWrapper) onclick
    // note that this is the same parent element that delegates mouse down events
    // second delegation is needed to prevent the scrollbars that exist within the cells (days) from triggering the creation of a new entry on cell click
    const emptyBoxClick = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_9__.getClosest)(e, ".monthview--daycontent")
    if (emptyBoxClick) {
      if (window.innerHeight <= 300) return;
      createEntryOnEmptyTarget(e, e.target)
      return;
    }
  }

  // event listener is added & removed @ ./setViews.js
  function getMonthviewResize() {
    let lastquery = boxquery.getFlag()
    boxquery.updateFlag()
    // run once per query change
    if (lastquery === boxquery.getFlag()) return;
    const boxes = document.querySelectorAll(".monthview--box");
    const querytop = boxquery.getTop();
    const queryHeight = boxquery.getHeight();
    const prevtop = boxquery.getPrevTop(querytop);
    boxes.forEach(box => {
      // always set height 
      box.style.height = `${queryHeight}px`
      let currenttop = parseInt(box.style.top)
      if (currenttop === 0) {
        return;
      } else {
        // get previous query top to find index of curren top then calc
        let idx = currenttop / prevtop;
        box.style.top = `${idx * querytop}px`;
      }
    })
  }

  const initMonth = () => {
    // see readme @ -- monthview.events -- for more info on setup
    populateCells()
    monthWrapper.onmousedown = delegateMonthEvents
    monthWrapper.onclick = delegateNewBox
    // const handlewindowResize = debounce(getMonthviewResize, 100)
    // store.setResizeHandle("month", handlewindowResize)
    store.setResizeHandle("month", getMonthviewResize)
  }

  initMonth()
}

/***/ }),

/***/ "./src/components/views/weekview.js":
/*!******************************************!*\
  !*** ./src/components/views/weekview.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setWeekView)
/* harmony export */ });
/* harmony import */ var _config_setViews__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config/setViews */ "./src/config/setViews.js");
/* harmony import */ var _menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../menus/sidebarDatepicker */ "./src/components/menus/sidebarDatepicker.js");
/* harmony import */ var _forms_formUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../forms/formUtils */ "./src/components/forms/formUtils.js");
/* harmony import */ var _forms_setForm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../forms/setForm */ "./src/components/forms/setForm.js");
/* harmony import */ var _menus_entryOptions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../menus/entryOptions */ "./src/components/menus/entryOptions.js");
/* harmony import */ var _factory_entries__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../factory/entries */ "./src/factory/entries.js");
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../locales/en */ "./src/locales/en.js");
/* harmony import */ var _utilities_timeutils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utilities/timeutils */ "./src/utilities/timeutils.js");
/* harmony import */ var _utilities_svgs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utilities/svgs */ "./src/utilities/svgs.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");
/* harmony import */ var _utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../utilities/dragutils */ "./src/utilities/dragutils.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _toastPopups_toast__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../toastPopups/toast */ "./src/components/toastPopups/toast.js");
/* harmony import */ var _toastPopups_toastCallbacks__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../toastPopups/toastCallbacks */ "./src/components/toastPopups/toastCallbacks.js");























// main app sidebar
const sidebar = document.querySelector('.sidebar');

// calendar overlay
const resizeoverlay = document.querySelector(".resize-overlay")

// weekview main grid wrapper & children
const containerCalendars = document.querySelector(".container__calendars")
const main = document.querySelector(".weekview")
const container = document.querySelector(".weekview--calendar")
const weekviewHeader = document.querySelector(".weekview--header")
const weekviewHeaderDayNumber = document.querySelectorAll(".weekview--header-day__number")
const weekviewHeaderTitle = document.querySelectorAll('.weekview--header-day__title');
const weekviewHeaderDay = document.querySelectorAll(".weekview--header-day")
const weekviewGrid = document.querySelector(".weekview__grid")
const cols = document.querySelectorAll(".week--col")

// weekview top grid & children
const alldaymodule = document.querySelector(".weekview--allday-module")
const topCols = document.querySelectorAll(".allday--col")

function setWeekView(context, store, datepickerContext) {
  const weekArray = context.getWeekArray()
  let entries = store.getWeekEntries(weekArray)
  let boxes = new _factory_entries__WEBPACK_IMPORTED_MODULE_5__.Week(entries.day, entries.allDay);

  function configureDaysOfWeek() {
    let hasToday;
    let hasSelected;
    let dayNumbers = []
    let ymd = []
    const today = context.getToday()
    let [ty, tm, td] = [today.getFullYear(), today.getMonth(), today.getDate()]

    weekArray.forEach((day, idx) => {
      let [y, m, d] = [
        day.getFullYear(),
        day.getMonth(),
        day.getDate(),
      ];

      dayNumbers.push(d);
      ymd.push(`${y}-${m}-${d}`)

      if (d === context.getDateSelected() && m === context.getMonth()) {
        hasSelected = d;
      }

      if (d === td && m === tm && y === ty) {
        hasToday = d;
      }
    })

    dayNumbers.forEach((num, idx) => {
      if (num === hasSelected) {
        weekviewHeaderDay[idx].classList.add("wvh--selected")
      } else {
        weekviewHeaderDay[idx].classList.remove("wvh--selected")
      }

      weekviewHeaderDayNumber[idx].textContent = num
      if (num === hasToday) {
        weekviewHeaderDay[idx].classList.add("wvh--today")
      } else {
        weekviewHeaderDay[idx].classList.remove("wvh--today")
      }

      weekviewHeaderDay[idx].setAttribute("data-weekview-date", ymd[idx]);
      topCols[idx].setAttribute("data-wvtop-day", num)
    })


    function setDayView(e) {
      let [yr, mo, da] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_9__.getDateFromAttribute)(e.target, "data-weekview-date")
      context.setDate(yr, mo, da)
      context.setDateSelected(da)
      context.setComponent("day")
      ;(0,_config_setViews__WEBPACK_IMPORTED_MODULE_0__["default"])("day", context, store, datepickerContext)
    }
    weekviewHeader.onmousedown = setDayView
  }

  function renderSidebarDatepickerWeek() {
    if (!sidebar.classList.contains("hide-sidebar")) {
      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay())
      ;(0,_menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_1__["default"])(context, store, datepickerContext)
    }
  }

  function renderBoxes() {
    cols.forEach(col => { col.innerText = "" })
    topCols.forEach(col => { col.innerText = "" })

    boxes.getBoxes().forEach((entry) => {
      const col = cols[+entry.coordinates.x];
      (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.createBox)(col, entry, "week", store.getCtgColor(entry.category))
    })

    const boxt = boxes.getBoxesTopLengths()
    for (const k in boxt) {
      const col = topCols[+k]
      createBoxesTop(col, boxt[k])
    }
  }

  function createBoxesTop(col, len) {
    const cell = document.createElement("div")
    cell.classList.add("allday__cell");
    cell.classList.add("allday__cell--active");

    const taskicons = document.createElement("div");
    taskicons.classList.add("wv-ad--taskicons");

    const icon = document.createElement("div");
    icon.classList.add("wv-ad--taskicon");
    icon.style.backgroundColor = "#6F0C2B";
    taskicons.appendChild(icon);

    const celltitle = document.createElement("div");
    celltitle.classList.add("wv-ad--celltitle");
    celltitle.textContent = `${len} more`;
    cell.append(taskicons, celltitle);
    col.appendChild(cell);
  }

  function createAllDayModalCell(entry, idx, col, handleCloseCallback) {
    const cell = document.createElement("div")
    cell.classList.add("allday-modal__cell")
    cell.setAttribute("data-allday-modal-cell", idx)
    cell.setAttribute("data-allday-modal-cell-id", entry.id)
    cell.style.backgroundColor = store.getCtgColor(entry.category)

    const cellcontent = document.createElement("div")
    cellcontent.classList.add("allday-modal__cell-content")

    const cellIcons = document.createElement("div")
    cellIcons.classList.add("allday-modal__cell-action-icons")

    const celltitle = document.createElement("div")
    celltitle.classList.add("allday-modal__celltitle")
    celltitle.textContent = entry.title;

    const cellendDate = document.createElement("div")
    cellendDate.classList.add("allday-modal__cellend-date")
    cellendDate.textContent = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_9__.formatStartEndDate)(
      new Date(entry.start), new Date(entry.end)
    );

    const cellcategoryTitle = document.createElement("div")
    cellcategoryTitle.classList.add("allday-modal__cellcategory-title")
    cellcategoryTitle.textContent = "category: " + entry.category;

    const getContextMenuViaMeatball = (e) => {
      getWeekViewContextMenu(col, entry, handleCloseCallback, e);
    }

    cellcontent.append(celltitle, cellcategoryTitle, cellendDate);
    cellIcons.appendChild((0,_utilities_svgs__WEBPACK_IMPORTED_MODULE_8__.createMeatballVertIcon)("var(--white4"));
    cell.append(cellcontent, cellIcons);
    cellIcons.onclick = getContextMenuViaMeatball;
    return cell;
  }

  function createAllDayModal(e, col, entries, idx, cell) {
    let dayofweek = _locales_en__WEBPACK_IMPORTED_MODULE_6__["default"].labels.weekdaysLong[idx]
    let daynumber = col.getAttribute("data-wvtop-day")
    const modal = document.createElement("div")
    modal.classList.add("allday-modal")

    let x;
    const colLeft = col.offsetLeft;
    if (colLeft + 240 + 32 > window.innerWidth) {
      x = window.innerWidth - 268;
    } else {
      x = colLeft + 32;
    }
    if (idx < 3) {
      modal.style.left = (col.offsetLeft + 32) + "px"
    } else {
      modal.style.left = (col.offsetLeft + 32) - 160 + "px"
    }
    modal.style.left = x + "px"
    modal.style.top = +weekviewGrid.offsetTop + "px"

    const modalheader = document.createElement("div")
    modalheader.classList.add("allday-modal__header")

    const modaltitle = document.createElement("div")
    modaltitle.classList.add("allday-modal-title")
    modaltitle.textContent = `${dayofweek} ${daynumber}, ${_locales_en__WEBPACK_IMPORTED_MODULE_6__["default"].labels.monthsLong[weekArray[idx].getMonth()]}`

    const closeAlldayModalBtn = document.createElement("div");
    closeAlldayModalBtn.classList.add("close-allday-modal");
    closeAlldayModalBtn.appendChild((0,_utilities_svgs__WEBPACK_IMPORTED_MODULE_8__.createCloseIcon)("var(--white4"));

    const modalcontent = document.createElement("div")
    modalcontent.classList.add("allday-modal__content")


    const closealldayonEsc = (e) => {
      if (e.key === "Escape") {
        closealldaymodal()
      }
    }
    const closealldaymodal = () => {
      modal.remove()
      resizeoverlay.classList.add("hide-resize-overlay")
      cell.firstChild.firstChild.style.backgroundColor = "#6F0C2B"
      document.removeEventListener("keydown", closealldayonEsc)
      store.removeActiveOverlay("allday-modal")
      cell.classList.remove("allday-modal__cell--open")
    }

    entries.forEach((entry, idx) => {
      const cell = createAllDayModalCell(entry, idx, col, closealldaymodal)
      modalcontent.appendChild(cell)
    })

    modalheader.append(modaltitle, closeAlldayModalBtn)
    modal.append(modalheader, modalcontent)
    main.insertBefore(modal, document.querySelector(".weekview__top"))

    resizeoverlay.onclick = closealldaymodal
    closeAlldayModalBtn.onclick = closealldaymodal
    document.addEventListener("keydown", closealldayonEsc)
    store.addActiveOverlay("allday-modal")
  }

  function openAllDayModal(e, cell) {
    const col = cell.parentElement
    // console.log(cell)
    cell.classList.add("allday-modal__cell--open")
    cell.firstChild.firstChild.style.backgroundColor = "#01635b"
    const colidx = parseInt(col.getAttribute("data-allday-column"))
    let colentries = boxes.getBoxesByColumnTop(colidx)
    if (colentries.length > 0) {
      createAllDayModal(e, col, colentries, colidx, cell)
      resizeoverlay.classList.remove("hide-resize-overlay")
    }
  }

  function getcol(idx) {
    return document.querySelector(`[data-column-index="${idx}"]`)
  }

  function handleWeekviewFormClose() {
    document.querySelector(".temp-week-box")?.remove()
  }

  function openWeekviewForm(box, coords, category, dates, type) {
    store.setFormResetHandle("week", handleWeekviewFormClose);

    const openForm = store.getRenderFormCallback();
    const setup = new _forms_setForm__WEBPACK_IMPORTED_MODULE_3__["default"]();

    const [submitType, id, title, description] = type;
    setup.setSubmission(submitType, id, title, description);
    if (submitType === "create") { box.style.opacity = 0.9; }

    const [categoryName, color, offsetColor] = category;
    setup.setCategory(
      categoryName,
      color,
      offsetColor,
    );

    setup.setPosition(
      +coords.x,
      [+coords.x, 3],
      parseInt((coords.y * 12.5) - weekviewGrid.scrollTop)
    );

    const [start, end] = dates
    setup.setDates((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_9__.getFormDateObject)(start, end));

    openForm();
    _forms_formUtils__WEBPACK_IMPORTED_MODULE_2__["default"].setFormDatepickerDate(context, datepickerContext, start);
    _forms_formUtils__WEBPACK_IMPORTED_MODULE_2__["default"].getConfig(setup.getSetup());
  }



  // ***********************
  // CONTEXT MENU SETUP

  function getWeekViewContextMenu(cell, entry, handleCloseCallback, e) {
    const id = entry.id;
    const start = entry.start;
    const color = store.getCtgColor(entry.category);
    const col = +cell.getAttribute("data-box-col")
    const rect = cols[col].getBoundingClientRect()

    let [x, y] = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_11__.placePopup)(
      360,
      165,
      [parseInt(rect.left), e.clientY],
      [window.innerWidth, window.innerHeight]
    )

    store.setFormResetHandle("week", handleCloseCallback);
    const setup = new _forms_setForm__WEBPACK_IMPORTED_MODULE_3__["default"]();
    setup.setSubmission("edit", id, entry.title, entry.description);
    setup.setCategory(entry.category, color, color);
    setup.setPosition(x, [x, y], y);
    setup.setDates((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_9__.getFormDateObject)(start, entry.end));
    console.log((0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_9__.getFormDateObject)(start, entry.end))
    _forms_formUtils__WEBPACK_IMPORTED_MODULE_2__["default"].setFormDatepickerDate(context, datepickerContext, start);

    const finishSetup = () => _forms_formUtils__WEBPACK_IMPORTED_MODULE_2__["default"].getConfig(setup.getSetup());

    (0,_menus_entryOptions__WEBPACK_IMPORTED_MODULE_4__["default"])(context, store, entry, datepickerContext, finishSetup);

    const modal = document.querySelector(".entry__options")
    if (window.innerWidth > 580) {
      modal.style.top = y + "px";
      modal.style.left = x + "px";
    } else {
      modal.style.top = "64px";
    }
  }

  // ***********************



  /** DRAG NORTH, SOUTH, EAST, WEST */
  function dragEngineWeek(e, box) {
    (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setStylingForEvent)("dragstart", main, store)
    const col = box.parentElement
    const originalColumn = col.getAttribute("data-column-index")
    let currentColumn = col.getAttribute("data-column-index")

    let boxhasOnTop = false;
    const boxorig = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.getOriginalBoxObject)(box)
    if (box.classList.contains("box-ontop")) {
      boxhasOnTop = true;
      (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.resetStyleOnClick)("week", box);
    }

    box.classList.add("box-dragging")
    box.setAttribute("data-box-col", currentColumn)
    // show original position while dragging
    ;(0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.createTemporaryBox)(box, col, boxhasOnTop, "week")

    const startTop = +box.style.top.split("px")[0]
    const boxHeight = +box.style.height.split("px")[0]
    let startCursorY = e.pageY - weekviewGrid.offsetTop
    let tempstartY = e.pageY;
    let startCursorX = e.pageX;
    let [movedX, movedY] = [0, 0];
    let [sX, sY] = [0, 0];
    let hasStyles = false;

    /** DRAG NORTH SOUTH */
    const mousemove = (e) => {
      sX = Math.abs(e.clientX - startCursorX);
      sY = Math.abs(e.clientY - tempstartY);
      if (!hasStyles) {
        if (sX > 3 || sY > 3) {
          document.body.style.cursor = "move";
          hasStyles = true;
          sX = 0;
          sY = 0;
        }
      }

      const headerOffset = weekviewGrid.offsetTop
      const currentCursorY = e.pageY - headerOffset
      let newOffsetY = currentCursorY - startCursorY
      let newTop = Math.round((newOffsetY + startTop) / 12.5) * 12.5

      if (newTop < 0 || currentCursorY < 0) {
        newTop = 0
        return;
      } else if (newTop + boxHeight > 1188) {
        return;
      }

      box.style.top = `${newTop}px`
      /** DRAG EAST/WEST */
      const direction = e.pageX - startCursorX > 0 ? "right" : "left"
      const currentCursorX = e.pageX
      let newOffsetX = startCursorX - currentCursorX
      let leftColX;
      let rightColX;

      if (+currentColumn - 1 >= 0) {
        leftColX = parseInt(getcol(currentColumn - 1).getBoundingClientRect().right)
      } else {
        leftColX = null
      }

      if (+currentColumn + 1 < cols.length) {
        rightColX = parseInt(getcol(+currentColumn + 1).getBoundingClientRect().left)
      } else {
        rightColX = null;
      }

      if (direction === "right" && rightColX !== null) {
        if (e.pageX >= rightColX) {
          getcol(+currentColumn + 1).appendChild(box)
          startCursorX = e.pageX
          currentColumn = +currentColumn + 1
          box.setAttribute("data-box-col", +currentColumn)
        }
      }

      if (direction === "left" && leftColX !== null) {
        if (e.pageX <= leftColX) {
          getcol(+currentColumn - 1).appendChild(box)
          startCursorX = e.pageX
          currentColumn = +currentColumn - 1
          box.setAttribute("data-box-col", +currentColumn)
        }
      }

      movedY = newOffsetY
      movedX = newOffsetX
      // if (movedY >)
    }

    function mouseup() {
      document.querySelector(".temporary-box").remove();
      box.classList.remove("box-dragging");
      if (boxhasOnTop) { box.classList.add("box-ontop") }

      if (Math.abs(movedX) <= 6 && Math.abs(movedY) <= 6) {
        (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.resetOriginalBox)(box, boxorig);
        getWeekViewContextMenu(
          box,
          store.getEntry(box.getAttribute("data-box-id")),
          handleWeekviewFormClose,
          e
        );


      } else {
        (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setBoxTimeAttributes)(box, "week");
        const time = (0,_utilities_timeutils__WEBPACK_IMPORTED_MODULE_7__["default"])(
          +box.getAttribute("data-start-time"),
          +box.getAttribute("data-time-intervals")
        );

        box.setAttribute("data-time", time);
        box.children[1].children[0].textContent = time;

        (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.updateBoxCoordinates)(box, "week", boxes);
        boxes.updateStore(
          store,
          box.getAttribute("data-box-id"),
          weekArray
        );
        // if box is moved to a new column, update sidebar datepicker
        if (currentColumn !== +originalColumn) {
          renderSidebarDatepickerWeek()
        };
        // check if new position overlaps with other boxes and handle
        let droppedCol = +box.getAttribute("data-box-col");
        if (boxes.getBoxesByColumn(droppedCol).length > 1) {
          (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__["default"])(droppedCol, "week", boxes)
        } else {
          box.setAttribute("box-idx", "box-one")
        }
      }

      (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setStylingForEvent)("dragend", main, store)
      document.removeEventListener("mousemove", mousemove)
      document.removeEventListener("mouseup", mouseup)
    }
    document.addEventListener("mousemove", mousemove)
    document.addEventListener("mouseup", mouseup)
  }



  /** RESIZE NORTH/SOUTH 
   * resizing will never trigger form
  */
  function resizeBoxNS(e, box) {
    (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setStylingForEvent)("dragstart", main, store);
    document.body.style.cursor = "move";

    const col = box.parentElement;
    const currentColumn = col.getAttribute("data-column-index");
    box.setAttribute("data-box-col", currentColumn);

    let boxhasOnTop = false;
    let boxorig = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.getOriginalBoxObject)(box);
    if (box.classList.contains("box-ontop")) {
      boxhasOnTop = true;
      (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.resetStyleOnClick)("week", box);
    }

    box.classList.add("box-resizing")
    const boxTop = box.offsetTop;
    (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.createTemporaryBox)(box, col, boxhasOnTop, "week");

    const mousemove = (e) => {
      const headerOffset = weekviewGrid.offsetTop;
      let amountScrolled = Math.abs(parseInt(container.getBoundingClientRect().top));
      if (amountScrolled == headerOffset) {
        amountScrolled -= headerOffset;
      } else if (container.getBoundingClientRect().top > 0) {
        amountScrolled = headerOffset - amountScrolled;
      } else {
        amountScrolled += headerOffset;
      }



      // console.log(window.innerHeight, e.pageY)

      // if (window.innerHeight < e.pageY) {
      //   main.scrollBy(0, Math.abs(window.innerHeight - e.pageY));
      // }

      const newHeight = Math.round(((e.pageY - boxTop - headerOffset) + amountScrolled) / 12.5) * 12.5;

      if (newHeight <= 12.5) {
        box.style.height = '12.5px';
        return;
      } else if (newHeight + parseInt(box.style.top) > 1188) {
        return;
      } else {
        box.style.height = `${newHeight}px`;
      }
    }

    const mouseup = (e) => {
      document.querySelector(".temporary-box").remove();
      box.classList.remove("box-resizing");
      if (boxhasOnTop) { box.classList.add("box-ontop") }

      if (box.style.height === boxorig.height) {
        if (boxhasOnTop) {
          box.setAttribute("class", boxorig.class);
          box.style.left = boxorig.left;
          box.style.width = boxorig.width;
        }
      } else {
        (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setBoxTimeAttributes)(box, "week");
        const start = +box.getAttribute("data-start-time");
        const length = +box.getAttribute("data-time-intervals");
        const time = (0,_utilities_timeutils__WEBPACK_IMPORTED_MODULE_7__["default"])(start, length);
        box.children[1].children[0].textContent = time;
        (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.updateBoxCoordinates)(box, "week", boxes);

        let droppedCol = +box.getAttribute("data-box-col");
        if (boxes.getBoxesByColumn(droppedCol).length > 1) {
          (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__["default"])(droppedCol, "week", boxes);
        }

        boxes.updateStore(
          store,
          box.getAttribute("data-box-id"),
          weekArray,
        );
      }

      (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setStylingForEvent)("dragend", main, store);
      document.removeEventListener("mousemove", mousemove);
      document.removeEventListener("mouseup", mouseup);
    }
    document.addEventListener("mousemove", mousemove);
    document.addEventListener("mouseup", mouseup);
  }

  function renderNewBox(newStartDate, newEndDate) {
    // render after new entry is created
    entries = store.getWeekEntries(weekArray)
    boxes = new _factory_entries__WEBPACK_IMPORTED_MODULE_5__.Week(
      entries.day,
      entries.allDay
    );

    if (store.getBoxesByColumn().length === 0) {
      // no need to check for collisions
      renderBoxes();
      renderSidebarDatepickerWeek();
    } else {
      renderDataForGrid();
    }
  }

  // console.log()

  /** Drag down empty column to create box */
  function createBoxOnDrag(e) {
    (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setStylingForEvent)("dragstart", main, store);
    document.body.style.cursor = "move";
    const [tempcategory, color] = store.getFirstActiveCategoryKeyPair();
    const colIdx = parseInt(e.target.getAttribute("data-column-index"));

    const box = document.createElement('div');
    box.setAttribute("class", "box box-dragging temp-week-box");

    // boxheader is static - create from template
    const boxheader = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.createTempBoxHeader)("week");
    const boxcontent = document.createElement('div');
    const boxtime = document.createElement('span');
    const boxtimeend = document.createElement('span');
    boxcontent.classList.add('box__content');
    boxtime.classList.add('box-time');
    boxtimeend.classList.add('box-time');


    const headerOffset = +weekviewGrid.offsetTop;
    const scrolled = parseInt(weekviewGrid.scrollTop);
    const startCursorY = e.pageY - weekviewGrid.offsetTop;

    let y = Math.round((startCursorY + Math.abs(scrolled)) / 12.5) * 12.5;
    box.setAttribute("style", (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.getBoxDefaultStyle)(y, color));

    let coords = { y: +y / 12.5, x: colIdx, h: 1, e: 2 }
    let [starthour, startmin, endhour, endmin] = (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.startEndDefault)(y);

    function mousemove(e) {
      const currentCursorY = e.pageY - headerOffset;
      let newOffsetY = currentCursorY - startCursorY;
      let newHeight = Math.round((newOffsetY) / 12.5) * 12.5;

      if (newHeight <= 12.5) { newHeight = 12.5 }
      if (newHeight + y > 1188) { newHeight = 1187.5 - y }
      box.style.height = `${newHeight}px`;

      coords.h = +newHeight / 12.5;
      coords.e = +coords.y + coords.h;

      endhour = Math.floor(((+newHeight + +y) / 12.5) / 4);
      endmin = Math.floor(((+newHeight + +y) / 12.5) % 4) * 15
      boxtime.style.wordBreak = "break-word";
      boxtime.textContent = `${(0,_utilities_timeutils__WEBPACK_IMPORTED_MODULE_7__.formatTime)(starthour, startmin)}  `;
      boxtimeend.textContent = `${(0,_utilities_timeutils__WEBPACK_IMPORTED_MODULE_7__.formatTime)(endhour, endmin)}`;
    }

    boxcontent.append(boxtime, boxtimeend);
    box.append(boxheader, boxcontent);
    e.target.appendChild(box);

    function mouseup() {
      const datesData = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_9__.getTempDates)(
        new Date(weekArray[colIdx]),
        [starthour, endhour],
        [startmin, endmin],
      );
      console.log(starthour, endhour)
      console.log(startmin, endmin)

      openWeekviewForm(
        box,
        coords,
        [tempcategory, color, color],
        datesData,
        ["create", null, null, null],
      );

      (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__.setStylingForEvent)("dragend", main, store);
      document.removeEventListener("mouseup", mouseup);
      document.removeEventListener("mousemove", mousemove);
    }
    document.addEventListener("mousemove", mousemove);
    document.addEventListener("mouseup", mouseup);
  }

  /** delegate via grid */
  function delegateGridEvents(e) {
    if ((0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_11__.getClosest)(e, ".box-resize-s")) {
      resizeBoxNS(e, e.target.parentElement);
      return;
    }

    if ((0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_11__.getClosest)(e, ".box")) {
      dragEngineWeek(e, e.target);
      return;
    }

    if ((0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_11__.getClosest)(e, ".week--col")) {
      createBoxOnDrag(e, e.target);
      return;
    }
  }

  function delegateGridTop(e) {
    if ((0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_11__.getClosest)(e, ".allday--col")) {
      openAllDayModal(e, e.target);
      return;
    }
  }

  function renderDataForGrid() {
    renderBoxes();
    const colsToCheck = boxes.getColumnsWithMultipleBoxes();
    colsToCheck.forEach(col => (0,_utilities_dragutils__WEBPACK_IMPORTED_MODULE_10__["default"])(col, "week", boxes));
  }

  const initWeek = () => {
    configureDaysOfWeek();
    renderDataForGrid();
    container.onmousedown = delegateGridEvents;
    alldaymodule.onmousedown = delegateGridTop;
  }
  initWeek();

  // console.log(containerCalendars.offsetWidth)
  // console.log(window.innerWidth);
  // console.log(main);
}

/***/ }),

/***/ "./src/components/views/yearview.js":
/*!******************************************!*\
  !*** ./src/components/views/yearview.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setYearView)
/* harmony export */ });
/* harmony import */ var _config_setViews__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config/setViews */ "./src/config/setViews.js");
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../locales/en */ "./src/locales/en.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utilities/dateutils */ "./src/utilities/dateutils.js");
/* harmony import */ var _components_menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/menus/sidebarDatepicker */ "./src/components/menus/sidebarDatepicker.js");





const monthnames = _locales_en__WEBPACK_IMPORTED_MODULE_1__["default"].labels.monthsLong
const weekDayNames = _locales_en__WEBPACK_IMPORTED_MODULE_1__["default"].labels.weekdaysNarrow
const yearviewGrid = document.querySelector(".calendar__yearview");
const sidebar = document.querySelector(".sidebar");


function setYearView(context, store, datepickerContext) {
  const year = context.getYear();
  const today = context.getToday();
  const [ty, tm, td] = [today.getFullYear(), today.getMonth(), today.getDate()];
  const entries = store.getGroupedYearEntries(store.getYearEntries(year));

  function renderMonthCells() {
    yearviewGrid.innerText = ""
    for (let i = 0; i < 12; i++) {
      if (entries[i]) {
        yearviewGrid.appendChild(createMonthCell(i, entries[i]));
      } else {
        yearviewGrid.appendChild(createMonthCell(i, []));
      }
    }
  }

  function renderSidebarDatepicker() {
    if (!sidebar.classList.contains("hide-sidebar")) {
      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay())
      ;(0,_components_menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_4__["default"])(context, store, datepickerContext)
    }
  }

  function createMonthCell(month, entries) {
    const prevmonth = new Date(year, month, 0)
    const daysInPrevMonth = prevmonth.getDate()
    const nextmonth = new Date(year, month + 2, 0)
    const currentMonth = new Date(year, month, 1)
    const daysInMonth = new Date(year, month + 1, 0).getDate()
    const firstDayOfMonth = currentMonth.getDay()

    const cellWrapper = document.createElement("div")
    cellWrapper.classList.add("yv-monthcell")

    const cellHeader = document.createElement("div")
    cellHeader.classList.add("yv-monthcell__header")

    const cellHeaderRowOne = document.createElement("div")
    cellHeaderRowOne.classList.add("yv-monthcell__header--rowone")

    const cellHeaderTitle = document.createElement("span")
    cellHeaderTitle.textContent = monthnames[month]

    if (month === context.getMonth() && year === context.getYear()) {
      cellHeaderTitle.classList.add("yvmht-current")
      cellWrapper.classList.add("cell-current")
    }

    cellHeaderTitle.classList.add("yv-monthcell__header--title")
    cellHeaderRowOne.append(cellHeaderTitle)

    // cell header row two
    const cellHeaderWeekDayNames = document.createElement("div")
    cellHeaderWeekDayNames.classList.add("yv-monthcell__header--weekdays")

    weekDayNames.forEach((el) => {
      const weekday = document.createElement("div")
      weekday.classList.add("yv-monthcell__header--weekday")
      weekday.textContent = el
      cellHeaderWeekDayNames.appendChild(weekday)
    })

    cellHeader.append(cellHeaderRowOne,cellHeaderWeekDayNames)

    const cellBody = document.createElement("div")
    cellBody.classList.add("yv-monthcell__body")

    function populateMonths() {
      let count = 0;
      let prevmonthstart = daysInPrevMonth - firstDayOfMonth

      const createcell = (day, classname, year, month, current) => {
        const daywrapper = document.createElement("div")
        daywrapper.classList.add("yv-monthcell__body--day-wrapper")
        
        const daynumber = document.createElement("div")
        daynumber.setAttribute("class", classname);
        daynumber.setAttribute("data-yv-date", `${year}-${month}-${day}`);
        daynumber.textContent = day;
        
        if (current) {
          // check if day is selected
          if (day === context.getDateSelected() && month === context.getMonth() && year === context.getYear()) {
            daynumber.classList.add("yvmb-selected")
          }

          // check if day is today
          if (day === td && month === tm && year === ty) {
            daynumber.classList.add("yvmb-today")
          }

          // check if day has entry
          if (entries[day]) {
            daynumber.classList.add("yvmb-has-entry")
          }
        }
        
        daywrapper.appendChild(daynumber)
        return daywrapper
      }


      for (let i = prevmonthstart; i < daysInPrevMonth; i++) {

        cellBody.appendChild(createcell(
          i + 1, 
          "yv-monthcell__body--day yvmb-prevnext",
          prevmonth.getFullYear(),
          prevmonth.getMonth(),
          false,
        ))
        count++
      }

      for (let i = 0; i < daysInMonth; i++) {
        cellBody.appendChild(createcell(
          i + 1, 
          "yv-monthcell__body--day",
          currentMonth.getFullYear(),
          currentMonth.getMonth(),
          true,
        ))
        count++
      }

      let i = 0
      while (count < 42) {
        i++
        cellBody.appendChild(createcell(
          i, 
          "yv-monthcell__body--day yvmb-prevnext",
          nextmonth.getFullYear(),
          nextmonth.getMonth(),
          false,
        ))
        count++
      }
    }
    
    populateMonths()
    cellWrapper.append(cellHeader, cellBody)
    return cellWrapper
  }

  function handleDaySelection(e) {
    const target = e.target;
    const [year, month, day] = (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_3__.getDateFromAttribute)(target, "data-yv-date", null);
    context.setDate(year, month, day);
    context.setDateSelected(day);
    context.setComponent("day");
    (0,_config_setViews__WEBPACK_IMPORTED_MODULE_0__["default"])("day", context, store, datepickerContext);
    renderSidebarDatepicker();
  }

  function delegateYearEvents(e) {
    if ((0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_2__.getClosest)(e, ".yv-monthcell__body--day")) {
      handleDaySelection(e);
    }
  }

  renderMonthCells();
  yearviewGrid.onmousedown = delegateYearEvents;
}

/***/ }),

/***/ "./src/config/appDefaults.js":
/*!***********************************!*\
  !*** ./src/config/appDefaults.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "checkLocalStorageAllowed": () => (/* binding */ checkLocalStorageAllowed),
/* harmony export */   "default": () => (/* binding */ setAppDefaults)
/* harmony export */ });
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities/helpers */ "./src/utilities/helpers.js");
// import setHeader from "../components/menus/header"

const appBody = document.querySelector(".body");
function setAppDefaults(context, store) {
  const disableTransitionsOnLoad = () => {
    setTimeout(() => {
      appBody.classList.remove("preload")
    }, 10)
  }
  disableTransitionsOnLoad()
  ;(0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.setTheme)(context)
}

function checkLocalStorageAllowed() {
  try {
    localStorage.setItem("test", "test");
    localStorage.removeItem("test");
    return true;
  } catch (e) {
    return false;
  }
}



/***/ }),

/***/ "./src/config/renderViews.js":
/*!***********************************!*\
  !*** ./src/config/renderViews.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ renderViews)
/* harmony export */ });
/* harmony import */ var _setViews__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setViews */ "./src/config/setViews.js");
/* harmony import */ var _components_menus_datepicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/menus/datepicker */ "./src/components/menus/datepicker.js");
/* harmony import */ var _components_menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/menus/sidebarDatepicker */ "./src/components/menus/sidebarDatepicker.js");
/* harmony import */ var _components_menus_sidebarCategories__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/menus/sidebarCategories */ "./src/components/menus/sidebarCategories.js");
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities/helpers */ "./src/utilities/helpers.js");
/* harmony import */ var _components_forms_entryForm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/forms/entryForm */ "./src/components/forms/entryForm.js");
/* harmony import */ var _components_menus_sidebarFooter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/menus/sidebarFooter */ "./src/components/menus/sidebarFooter.js");
/* harmony import */ var _components_menus_shortcutsModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/menus/shortcutsModal */ "./src/components/menus/shortcutsModal.js");
/* harmony import */ var _components_menus_sidebarSubMenu__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/menus/sidebarSubMenu */ "./src/components/menus/sidebarSubMenu.js");
/* harmony import */ var _components_forms_goto__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/forms/goto */ "./src/components/forms/goto.js");
/* harmony import */ var _components_menus_editCategory__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/menus/editCategory */ "./src/components/menus/editCategory.js");












const appBody = document.querySelector(".body");
const colorSchemeMeta = document.getElementsByName("color-scheme")[0];

const header = document.querySelector(".h__container");
const headerLogo = document.querySelector(".logo")

const toggleForm = document.querySelector(".toggle-form")
const sbToggleForm = document.querySelector(".sb-toggle-form-btn")
const sbToggleSubBtn = document.querySelector(".sb-data-btn")
const sbToggleThemeBtn = document.querySelector(".sb-theme-btn")
const formOverlay = document.querySelector(".form-overlay")
const form = document.querySelector(".entries__form")

const headerPrevBtn = document.querySelector(".prev")
const headerNextBtn = document.querySelector(".next")

const datepicker = document.querySelector(".datepicker")
const datepickeroverlay = document.querySelector(".datepicker-overlay")
const dateTimeWrapper = document.querySelector(".datetime-wrapper")

const selectElement = document.querySelector(".select__modal")
const selectOverlay = document.querySelector(".change-view--overlay")
const optionswrapper = document.querySelector(".change-view--wrapper")
const options = document.querySelectorAll(".view-option")

const sidebar = document.querySelector(".sidebar");

const viewsContainer = document.querySelector(".container__calendars")
const yearwrapper = document.querySelector(".yearview")
const monthwrapper = document.querySelector(".monthview")
const weekwrapper = document.querySelector(".weekview")
const listviewBody = document.querySelector(".listview__body");

function renderViews(context, datepickerContext, store) {
  function setColorScheme() {
    const darkicon = document.querySelector(".sbti-one")
    const lighticon = document.querySelector(".sbti-two")
    const contrasticon = document.querySelector(".sbti-three")

    const setlight = () => {
      context.setColorScheme("light")
      colorSchemeMeta.setAttribute("content", "light");
      appBody.classList.add("light-mode");
      appBody.classList.remove("contrast-mode")
      darkicon.classList.add("sb-theme-icon-hide")
      contrasticon.classList.add("sb-theme-icon-hide")
      lighticon.classList.remove("sb-theme-icon-hide")
    }

    const setdark = () => {
      context.setColorScheme("dark")
      colorSchemeMeta.setAttribute("content", "dark light");
      appBody.classList.remove("light-mode");
      appBody.classList.remove("contrast-mode")
      darkicon.classList.remove("sb-theme-icon-hide")
      contrasticon.classList.add("sb-theme-icon-hide")
      lighticon.classList.add("sb-theme-icon-hide")
    }

    const setcontrast = () => {
      context.setColorScheme("contrast")
      colorSchemeMeta.setAttribute("content", "dark");
      appBody.classList.remove("light-mode");
      appBody.classList.add("contrast-mode")
      contrasticon.classList.remove("sb-theme-icon-hide")
      darkicon.classList.add("sb-theme-icon-hide")
      lighticon.classList.add("sb-theme-icon-hide")
    }

    const currentScheme = context.getColorScheme()
    if (currentScheme === "light") {
      setdark()
    } else if (currentScheme === "dark") {
      setcontrast()
    } else {
      setlight()
    }
  }

  function fullRender(component) {
    (0,_setViews__WEBPACK_IMPORTED_MODULE_0__["default"])(component, context, store, datepickerContext);
  }

  function setInitialAttributes() {
    selectElement.setAttribute("data-value", `${context.getComponent().slice(0, 1).toUpperCase()}`)

    headerLogo.setAttribute("data-current-day-of-month", new Date().getDate())
  }

  function renderSidebarDatepicker() {
    if (!sidebar.classList.contains("hide-sidebar")) {
      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay())
      ;(0,_components_menus_sidebarDatepicker__WEBPACK_IMPORTED_MODULE_2__["default"])(context, store, datepickerContext)
    }
  }

  function renderSidebarCategories() {
    if (!sidebar.classList.contains("hide-sidebar")) {
      (0,_components_menus_sidebarCategories__WEBPACK_IMPORTED_MODULE_3__["default"])(context, store, datepickerContext)
      ;(0,_components_menus_sidebarFooter__WEBPACK_IMPORTED_MODULE_6__["default"])(store)
    }
  }

  function getPreviousDay() {
    context.setPrevDay()
    fullRender("day")
    context.setDateSelected(context.getDay())
    renderSidebarDatepicker()
  }

  function getNextDay() {
    context.setNextDay()
    fullRender("day")
    context.setDateSelected(context.getDay())
    renderSidebarDatepicker()
  }

  function getPreviousWeek() {
    context.setPrevWeek()
    fullRender("week")
    renderSidebarDatepicker()
  }

  function getNextWeek() {
    context.setNextWeek()
    fullRender("week")
    renderSidebarDatepicker()
  }

  function getPreviousMonth() {
    context.setPrevMonth()
    fullRender("month")
    renderSidebarDatepicker()
  }

  function getNextMonth() {
    context.setNextMonth()
    fullRender("month")
    renderSidebarDatepicker()
  }

  function getPreviousYear() {
    context.setPrevYear()
    fullRender("year")
    renderSidebarDatepicker()
    return;
  }

  function getNextYear() {
    context.setNextYear()
    fullRender("year")
    renderSidebarDatepicker()
    return;
  }

  /**
   * handleTransition
   * @desc  The main purpose of this function is to handle situations where a user is holding down a hotkey to navigate through previous and next periods. Rather than having the swipe fire every single time, it will wait until after the user has stopped holding down the hotkey.
   * Same goes for swipe gestures/prev & next button clicks.
   * 
   * @param {HTMLElement} view (current calendar view to be transitioned)
   * @param {String} keyframeDirection (direction of the keyframe animation) prev/next period
   * @param {Function} callback (load next and previous periods)
   */
  let tm = 250; // define timeout out of scope so that it can be 
  function handleTransition(view, keyframeDirection, callback) {
    const removeslide = (dir) => {
      dir === "left" ? view.classList.remove("transition--right") : view.classList.remove("transition--left");
    }

    // weekview is the only view that has a horizontal scrollbar, for the other views, hide this scrollbar when transitioning
    if (!view.classList.contains("weekview")) {
      viewsContainer.style.overflowX = "hidden";
      setTimeout(() => {
        viewsContainer.style.overflowX = "auto";
      }, 200);
    }

    removeslide(keyframeDirection)
    const slide = `transition--${keyframeDirection}`
    if (view.classList.contains(slide)) {
      // prevent transition from firing too often
      callback()
      tm += 250
    } else {
      view.classList.add(slide)
      setTimeout(() => {
        view.classList.remove(slide)
      }, tm)
      callback()
      tm = 250;
    }
  }

  // define a means for opening the form then provide it to the store so that it can be accessed by other components
  function handleForm() {
    (0,_components_forms_entryForm__WEBPACK_IMPORTED_MODULE_5__["default"])(context, store, datepickerContext)

    form.setAttribute("style", "top:5%;left:5%;right:5%;bottom:5%;margin:auto;")
    form.classList.remove("hide-form")
    formOverlay.classList.remove("hide-form-overlay")
    store.addActiveOverlay("hide-form-overlay")

    function closeform(e) {
      if (e.target === formOverlay) {
        form.classList.add("hide-form");
        formOverlay.classList.add("hide-form-overlay");
        store.removeActiveOverlay("hide-form-overlay");
        formOverlay.onclick = null;
        // formOverlay.removeEventListener("click", closeform)
      }
    }
    formOverlay.onclick = closeform
    // formOverlay.addEventListener("click", closeform)
  }

  // the submenu (meatball? menu) adjacent to "create" button in sidebar
  // opens instance of settings menu
  function handleToggleSubmenu() {
    (0,_components_menus_sidebarSubMenu__WEBPACK_IMPORTED_MODULE_8__["default"])(store, context)
  }

  // open / close sidebar
  // triggers via "s" keypress or by clicking on the hamburger menu icon
  // will also trigger in instances where the user tries to create a new entry on a blank day but no categories are selected.
  function handleBtnMainMenu() {
    const currentSidebarState = context.getSidebarState()
    if (currentSidebarState === "hide") {
      toggleForm.classList.remove("hide-toggle--form")
      viewsContainer.classList.remove("container__calendars-sb-active")
      sidebar.classList.add("hide-sidebar");
      dateTimeWrapper.classList.remove("datetime-inactive");
      listviewBody.removeAttribute("style");
      // listviewBody.style.width = "100%";
    } else {
      // if a callback has been provided to the store (from the datepicker), this means that the header datepicker is open and needs to be closed to prevent two calendars that share the same date state from coinciding.
      // this can only happen if datepicker is open and user presses "s" on their keyboard to open sidebar
      const resetdatepicker = store.getResetDatepickerCallback()
      if (resetdatepicker !== null) {
        resetdatepicker()
        store.setResetDatepickerCallback(null)
      }
      listviewBody.style.width = "100%";
      listviewBody.style.marginLeft = "0";
      toggleForm.classList.add("hide-toggle--form")
      viewsContainer.classList.add("container__calendars-sb-active")
      dateTimeWrapper.classList.add("datetime-inactive");
      sidebar.classList.remove("hide-sidebar");
      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());
      datepickerContext.setDateSelected(context.getDay())

      renderSidebarCategories();
      renderSidebarDatepicker();
      sbToggleSubBtn.onclick = handleToggleSubmenu
      sbToggleThemeBtn.onclick = setColorScheme;
    }
  }

  function handleBtnToday() {
    if (!context.isToday() && context.getComponent() !== "list") {
      let tempdate = new Date();
      context.setDate(
        tempdate.getFullYear(),
        tempdate.getMonth(),
        tempdate.getDate(),
      )

      fullRender(context.getComponent())
      renderSidebarDatepicker()
    }
  }

  function handleBtnPrev() {
    switch (context.getComponent()) {
      case "day":
        // transition day header rather than entire view (too jarring)
        handleTransition(document.querySelector(".dayview--header-day"), "right", getPreviousDay)
        break;
      case "week":
        handleTransition(weekwrapper, "right", getPreviousWeek)
        break;
      case "month":
        handleTransition(monthwrapper, "right", getPreviousMonth)
        break;
      case "year":
        handleTransition(yearwrapper, "right", getPreviousYear)
        break;
      default:
        break;
    }
  }

  function handleBtnNext() {
    switch (context.getComponent()) {
      case "day":
        // transition day header rather than entire view (too jarring)
        handleTransition(document.querySelector(".dayview--header-day"), "left", getNextDay)
        break;
      case "week":
        handleTransition(weekwrapper, "left", getNextWeek)
        // handleTransition(document.querySelector(".weekview--calendar"), "left", getNextWeek)
        break;
      case "month":
        handleTransition(monthwrapper, "left", getNextMonth)
        break;
      case "year":
        handleTransition(yearwrapper, "left", getNextYear)
        break;
      default:
        break;
    }
  }

  function handleDatePickerBtn(e) {
    datepicker.classList.remove("hide-datepicker")
    datepickeroverlay.classList.remove("hide-datepicker-overlay")
    datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay())
    headerPrevBtn.style.display = "none";
    headerNextBtn.style.display = "none";



    const newDatepickerLeft = parseInt(e.target.getBoundingClientRect().left) - 22
    const perc = parseInt((newDatepickerLeft / window.innerWidth) * 100)
    datepicker.setAttribute("style", `left:${perc}%;top:12px;`)
    ;(0,_components_menus_datepicker__WEBPACK_IMPORTED_MODULE_1__["default"])(context, store, datepickerContext, "header")
  }

  function setOptionStyle(option) {
    const views = ['day', 'week', 'month', 'year', 'list']
    const activeIndex = views.indexOf(option)
    for (let i = 0; i < options.length; i++) {
      if (i === activeIndex) {
        options[i].classList.add("change-view--option__active")
      } else {
        options[i].classList.remove("change-view--option__active")
      }
    }
  }

  function closeOptionsModal() {
    selectElement.classList.remove("selection--active")
    selectOverlay.style.display = "none";
    selectOverlay.classList.add("toggle-options")
    optionswrapper.classList.add("toggle-options")
    optionswrapper.classList.remove("toggle-animate")
  }

  function renderOption(option, initialRender) {
    const comp = context.getComponent()
    if (option === comp && !initialRender) return;
    closeOptionsModal()
    context.setComponent(option)
    fullRender(option)
    setOptionStyle(option)
    // week datepicker is the only one that has any stylistic difference
    if (comp || option === "week") {
      renderSidebarDatepicker()
    }
    document.activeElement.blur()

    // handleTransition(option, keyframeDirection, callback)
  }

  function handleSelect(e) {
    selectElement.classList.add("selection--active")
    selectOverlay.classList.remove("toggle-options")
    selectOverlay.style.display = "block";
    optionswrapper.classList.remove("toggle-options")
    optionswrapper.classList.add("toggle-animate")
    const setOption = (e) => {
      const option = e.target.getAttribute("data-view-option");
      renderOption(option);
    }
    optionswrapper.onclick = setOption
    selectOverlay.onclick = closeOptionsModal
  }

  // EVENT DELEGATION : HEADER ELEMENTS
  function delegateHeaderEvents(e) {
    e.preventDefault();
    const btnMainMenu = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".menu");
    const btnToday = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".btn-today");
    const btnPrev = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".prev");
    const btnNext = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".next");
    const dateTime = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".datetime-content");
    const settings = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".settings");
    const select = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.getClosest)(e, ".select__modal");

    if (btnMainMenu) {
      context.toggleSidebarState();
      handleBtnMainMenu();
      return;
    }

    if (btnToday) {
      handleBtnToday();
      return;
    }

    if (btnPrev) {
      handleBtnPrev();
      return;
    }

    if (btnNext) {
      handleBtnNext();
      return;
    }

    if (dateTime) {
      handleDatePickerBtn(e);
      return;
    }

    if (settings) {
      handleToggleSubmenu(e);
      return;
    }

    if (select) {
      handleSelect(e);
      return;
    }
  }

  /* configure keyboard shortcuts */
  /* 2022-01-14
  * Google calendar has recently updated their app wide throttling from a global value of around 150 to the minimum of 4ms(might be 10) for period changes and (250-300) for view changes. 
  * For now, I'm keeping the throttle at 150ms. 
  */
  function delegateGlobalKeyDown(e) {
    const toggleChangeview = (e) => {
      if (selectElement.classList.contains("selection--active")) {
        if (e.key.toLowerCase() === "v") {
          closeOptionsModal()
        }
      } else {
        handleSelect();
      }
    }

    const getNextPrevMonth = (direction) => {
      let comp = context.getComponent()
      if (comp === "week" || comp === "day") {
        if (direction === "next") {
          context.setNextMonth()
          fullRender(comp)
          renderSidebarDatepicker()
        } else {
          context.setPrevMonth()
          fullRender(comp)
          renderSidebarDatepicker()
        }
      } else {
        return;
      }
    }

    switch (e.key.toLowerCase()) {
      // switch to day view
      case "d":
        renderOption("day");
        break;
      case "1":
        renderOption("day");
        break;

      // switch to week view
      case "w":
        renderOption("week");
        break;
      case "2":
        renderOption("week");
        break;

      // switch to month view
      case "m":
        renderOption("month");
        break;
      case "3":
        renderOption("month");
        break;

      // switch to year view
      case "y":
        renderOption("year");
        break;
      case "4":
        renderOption("year");
        break;

      // switch to list view
      case "l":
        renderOption("list");
        break;
      case "5":
        renderOption("list");
        break;

      // toggle sidebar open/close
      case "s":
        context.toggleSidebarState();
        handleBtnMainMenu();
        break;

      // toggle form open (close with escape)
      case "f":
        handleForm();
        break;

      // open "views" menu
      case "v":
        toggleChangeview(e);
        break;

      // (day/week) next month
      case "p":
        handleBtnPrev();
        break;

      // (day/week) prev month
      case "n":
        handleBtnNext();
        break;

      // set date to today
      case "t":
        handleBtnToday();
        break;

      // open submenu
      case "a":
        handleToggleSubmenu();
        break;

      // open keyboard shortcuts modal
      case "?":
        (0,_components_menus_shortcutsModal__WEBPACK_IMPORTED_MODULE_7__["default"])(store);
        break;
      case "/":
        (0,_components_menus_shortcutsModal__WEBPACK_IMPORTED_MODULE_7__["default"])(store);
        break;

      // toggle between light/dark mode
      case "0":
        setColorScheme()
        break;

      // opens search modal
      case "g":
        (0,_components_forms_goto__WEBPACK_IMPORTED_MODULE_9__["default"])(context, store, datepickerContext);
        break;

      case "+":
        const targetcat = {
          name: "new category",
          color: "#2C52BA",
        }
        ;(0,_components_menus_editCategory__WEBPACK_IMPORTED_MODULE_10__["default"])(store, targetcat, false, null);
      default:
        break;
    }
  }

  const getKeyPressThrottled = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_4__.throttle)(delegateGlobalKeyDown, 150)
  // shortcuts defined within this function are global and will work anywhere within the application (except for modal/popup/form windows)

  // If a modal/popup is open, all keyboard shortcuts defined within this function will be disabled until the modal/popup is closed.
  // Note that Each modal/popup has its own keydown close event on escape thats defined within the scope of its own function,
  // once it is closed, the event listener is removed from the DOM.
  let [lk, lk2] = ['', ''];
  function handleGlobalKeydown(e) {
    if (!store.getShortcutsStatus()) return;
    if (store.hasActiveOverlay()) return;

    // prevent ctrl + key shortcuts from triggering at all
    lk = e.key
    if (lk === "Control") {
      lk2 = "Control"
      return;
    }

    if (lk2 === "Control" && lk !== "Control") {
      lk2 = ""
      return;
    }
    getKeyPressThrottled(e)
  }

  const appinit = () => {
    /*************************/
    // render initial view and set initial attributes
    renderOption(context.getComponent(), true);
    setInitialAttributes();
    handleBtnMainMenu();
    /*************************/
    // supply callbacks to store for opening form and sidebar
    store.setRenderFormCallback(handleForm);
    const ensureSidebarIsOpen = () => {
      context.setSidebarState("open")
      handleBtnMainMenu()
    }
    store.setRenderSidebarCallback(ensureSidebarIsOpen);
    /*************************/
    // establish delegation
    toggleForm.onclick = handleForm;
    sbToggleForm.onclick = handleForm;
    header.onmousedown = delegateHeaderEvents;
    document.addEventListener("keydown", handleGlobalKeydown);
  }
  // store.setShortcutsStatus(true)
  appinit();
}

/***/ }),

/***/ "./src/config/setViews.js":
/*!********************************!*\
  !*** ./src/config/setViews.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setViews)
/* harmony export */ });
/* harmony import */ var _components_menus_header__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/menus/header */ "./src/components/menus/header.js");
/* harmony import */ var _components_views_yearview__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/views/yearview */ "./src/components/views/yearview.js");
/* harmony import */ var _components_views_monthview__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/views/monthview */ "./src/components/views/monthview.js");
/* harmony import */ var _components_views_weekview__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/views/weekview */ "./src/components/views/weekview.js");
/* harmony import */ var _components_views_dayview__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/views/dayview */ "./src/components/views/dayview.js");
/* harmony import */ var _components_views_listview__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/views/listview */ "./src/components/views/listview.js");






// import setListView from "../components/views/listview"

const yearComponent = document.querySelector(".yearview")
const monthComponent = document.querySelector(".monthview")
const weekComponent = document.querySelector(".weekview")
const dayComponent = document.querySelector(".dayview")
const listComponent = document.querySelector(".listview")
const listComponentBody = document.querySelector('.listview__body');

/**
 * 
 * @param {string} component 
 * @param {object} context 
 * @param {object} store 
 * @param {object} datepickerContext 
 * @desc  hides all views and renders @component passed in
 * 
 */

let previousview = "month";
let [prev1, prev2] = [null, null];
function setViews(component, context, store, datepickerContext) {
  prev1 = prev2;
  prev2 = component;

  function hideViews() {
    const views = [
      yearComponent, 
      monthComponent, 
      weekComponent, 
      dayComponent,
      listComponent
    ];

    if (prev1 === "list") {
      listComponentBody.innerText = "";
    }
    // only the month view relies on a resize listener
    // more info provided @readme > monthview > box queries
    views.forEach((view) => {
      view.classList.add("hide-view")
      if (view !== monthComponent) {
        window.removeEventListener("resize", store.getResizeHandle("month"))
      }
    })
  }

  function initView(component) {
    switch (component) {
      case "day":
        context.setComponent(component);
        (0,_components_menus_header__WEBPACK_IMPORTED_MODULE_0__["default"])(context, component);
        (0,_components_views_dayview__WEBPACK_IMPORTED_MODULE_4__["default"])(context, store, datepickerContext);
        dayComponent.classList.remove("hide-view");
        break;
      case "week":
        context.setComponent(component);
        (0,_components_menus_header__WEBPACK_IMPORTED_MODULE_0__["default"])(context, component);
        (0,_components_views_weekview__WEBPACK_IMPORTED_MODULE_3__["default"])(context, store, datepickerContext);
        weekComponent.classList.remove("hide-view");
        break;
      case "month":
        context.setComponent(component);
        (0,_components_menus_header__WEBPACK_IMPORTED_MODULE_0__["default"])(context, component);
        (0,_components_views_monthview__WEBPACK_IMPORTED_MODULE_2__["default"])(context, store, datepickerContext);
        monthComponent.classList.remove("hide-view");
        window.addEventListener("resize", store.getResizeHandle("month"))
        break;
      case "year":
        context.setComponent(component);
        (0,_components_menus_header__WEBPACK_IMPORTED_MODULE_0__["default"])(context, component);
        (0,_components_views_yearview__WEBPACK_IMPORTED_MODULE_1__["default"])(context, store, datepickerContext);
        yearComponent.classList.remove("hide-view");
        break;
      case "list":
        context.setComponent(component);
        (0,_components_menus_header__WEBPACK_IMPORTED_MODULE_0__["default"])(context, component, store);
        (0,_components_views_listview__WEBPACK_IMPORTED_MODULE_5__["default"])(context, store, datepickerContext);
        listComponent.classList.remove("hide-view");
        break;
      default:
        context.setComponent("month");
        (0,_components_menus_header__WEBPACK_IMPORTED_MODULE_0__["default"])(context, "month");
        (0,_components_views_monthview__WEBPACK_IMPORTED_MODULE_2__["default"])(context, store, datepickerContext);
        monthComponent.classList.remove("hide-view");
        break;
    }
  }

  hideViews();
  document.title = context.getMonthName();
  initView(component);
}

/***/ }),

/***/ "./src/context/appContext.js":
/*!***********************************!*\
  !*** ./src/context/appContext.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "datepickerContext": () => (/* binding */ datepickerContext),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities/dateutils */ "./src/utilities/dateutils.js");
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../locales/en */ "./src/locales/en.js");


const labels = _locales_en__WEBPACK_IMPORTED_MODULE_1__["default"].labels;

class Context {
  constructor() {
    this.colorScheme = "dark";
    this.component = "month";
    this.sidebarState = "hide";
    this.date = new Date();

    this.dateSelected = 1;
    this.daySelected = this.date.getDate();
    this.monthSelected = this.date.getMonth();
    this.yearSelected = this.date.getFullYear();

    this.month = this.getMonth();
    this.monthArray = this.getMonthArray();
    this.week = this.getWeek();
  }

  setDateDefaults() {
    if (localStorage.getItem("yearSelected") === null) {
      if (this.yearSelected === undefined) {
        this.yearSelected = this.date.getFullYear();
      }
      Context.setLocalYear(this.yearSelected);
    }

    if (localStorage.getItem("monthSelected") === null) {
      if (this.monthSelected === undefined) {
        this.monthSelected = this.date.getMonth();
      }
      Context.setLocalMonth(this.monthSelected);
    }

    if (localStorage.getItem("daySelected") === null) {
      if (this.daySelected === undefined) {
        this.daySelected = this.date.getDate();
      }
      Context.setLocalDay(this.daySelected);
    }

    if (localStorage.getItem("dateSelected") === null) {
      if (this.dateSelected === undefined) {
        this.dateSelected = 1;
      }
      Context.setLocalDateSelected(this.dateSelected);
    }
  }

  setSchemaDefaults() {
    if (localStorage.getItem("colorScheme") === null) {
      if (this.colorScheme === undefined) {
        this.colorScheme = "dark";
      }
      Context.setLocalColorScheme(this.colorScheme);
    }

    if (localStorage.getItem("component") === null) {
      if (this.component === undefined) {
        this.component = "month";
      }
      Context.setLocalComponent(this.component);
    }

    if (localStorage.getItem("sidebarState") === null) {
      if (this.sidebarState === undefined) {
        this.sidebarState = "hide";
      }
      Context.setLocalSidebarState(this.sidebarState);
    }
  }

  setDefaults() {
    this.setSchemaDefaults();
    this.setDateDefaults();
  }

  /* **************************************** */
  /* LOCAL STATE MANAGEMENT */
  static getLocalDay() {
    return +localStorage.getItem("daySelected") === undefined ? 1 : +localStorage.getItem("daySelected");
  }

  static getLocalMonth() {
    return +localStorage.getItem("monthSelected") === undefined ? 1 : +localStorage.getItem("monthSelected");
  }

  static getLocalYear() {
    return +localStorage.getItem("yearSelected") === undefined ? 1 : +localStorage.getItem("yearSelected");
  }

  static getLocalDateSelected() {
    return +localStorage.getItem("dateSelected");
  }

  static getLocalComponent() {
    return localStorage.getItem("component");
  }

  static getLocalColorScheme() {
    return localStorage.getItem("colorScheme");
  }

  static getLocalSidebarState() {
    return localStorage.getItem("sidebarState");
  }

  static setLocalDay(day) {
    localStorage.setItem("daySelected", day);
  }

  static setLocalMonth(month) {
    localStorage.setItem("monthSelected", month);
  }

  static setLocalYear(year) {
    localStorage.setItem("yearSelected", year);
  }

  static setLocalDateSelected(date) {
    localStorage.setItem("dateSelected", date);
  }

  static setLocalComponent(component) {
    localStorage.setItem("component", component);
  }

  static setLocalSidebarState(state) {
    localStorage.setItem("sidebarState", state);
  }

  static setLocalColorScheme(colorScheme) {
    localStorage.setItem("colorScheme", colorScheme);
  }
  /* **************************************** */


  /* **************************************** */
  /* APPLICATION THEME (DARK/LIGHT) */
  getColorScheme() {
    return Context.getLocalColorScheme();
  }
  setColorScheme(colorScheme) {
    this.colorScheme = colorScheme;
    Context.setLocalColorScheme(colorScheme);
  }
  setSidebarState(state) {
    this.sidebarState = state;
    Context.setLocalSidebarState(state);
  }
  toggleSidebarState() {
    this.sidebarState = this.getSidebarState() === "open" ? "hide" : "open";
    Context.setLocalSidebarState(this.sidebarState);
  }
  /* **************************************** */


  /* **************************************** */
  /* APPLICATION CURRENT COMPONENT */
  getComponent() {
    return Context.getLocalComponent() || "month";
  }
  setComponent(component) {
    this.component = component;
    Context.setLocalComponent(component);
  }
  getSidebarState() {
    return Context.getLocalSidebarState() || "hide";
  }
  /* **************************************** */



  /* **************************************** */
  /* APPLICATION DATE HANDLING */
  // set the current date for the following
  /* DAY, MONTH, YEAR, DATE, DAY_SELECTED */
  setDay(day) {
    this.daySelected = day;
    Context.setLocalDay(day);
  }

  setMonth(month) {
    this.monthSelected = month;
    Context.setLocalMonth(month);
  }

  setYear(year) {
    this.yearSelected = year;
    Context.setLocalYear(year);
  }

  setDate(year, month, day) {
    this.setYear(year);
    this.setMonth(month);
    this.setDay(day);
  }

  setDateSelected(date) {
    this.dateSelected = date;
    Context.setLocalDateSelected(date);
  }
  /* ************** */
  // Take current date and set it to previous day/week/month/year
  /* PREVIOUS : DAY, WEEK, MONTH, YEAR */
  setPrevDay() {
    const prevDay = new Date(this.getYear(), this.getMonth(), this.getDay() - 1);
    this.setDate(prevDay.getFullYear(), prevDay.getMonth(), prevDay.getDate());
  }

  setPrevWeek() {
    const prevWeek = new Date(this.getYear(), this.getMonth(), this.getDay() - 7);
    this.setDate(prevWeek.getFullYear(), prevWeek.getMonth(), prevWeek.getDate());
  }

  setPrevMonth() {
    const prevMonth = new Date(this.getYear(), this.getMonth() - 1, this.getDay());
    this.setDate(prevMonth.getFullYear(), prevMonth.getMonth(), prevMonth.getDate());
  }

  setPrevYear() {
    this.setYear(this.getYear() - 1);
  }
  /* ************** */

  // Take current date and set it to next day/week/month/year
  /* NEXT : DAY, WEEK, MONTH, YEAR */
  setNextDay() {
    const nextDay = new Date(this.getYear(), this.getMonth(), this.getDay() + 1);
    this.setDate(nextDay.getFullYear(), nextDay.getMonth(), nextDay.getDate());
  }

  setNextWeek() {
    const nextWeek = new Date(this.getYear(), this.getMonth(), this.getDay() + 7);
    this.setDate(nextWeek.getFullYear(), nextWeek.getMonth(), nextWeek.getDate());
  }

  setNextMonth() {
    const nextMonth = new Date(this.getYear(), this.getMonth() + 1, this.getDay());
    this.setDate(nextMonth.getFullYear(), nextMonth.getMonth(), nextMonth.getDate());
  }

  setNextYear() {
    this.setYear(this.getYear() + 1);
  }
  /* ************** */


  /* ************** */
  /* GETTERS */
  getDateSelected() {
    return +Context.getLocalDateSelected() || this.date.getDate();
    // return this.dateSelected;
  }

  getDay() {
    return +Context.getLocalDay() || this.date.getDate();
    // return +this.daySelected;
  }

  getMonth() {
    return +Context.getLocalMonth() || this.date.getMonth();
    // return this.monthSelected;
  }

  getYear() {
    return +Context.getLocalYear() || this.date.getFullYear();
    // return this.yearSelected;
  }

  getDate() {
    return new Date(this.getYear(), this.getMonth(), this.getDay());
  }

  getToday() {
    return this.date;
  }

  getWeek() {
    let tempdate = this.getDate();
    tempdate.setDate(tempdate.getDate() - tempdate.getDay());
    return tempdate;
  }

  getWeekday() {
    return this.getDate().getDay();
  }

  getWeekArray() {
    let week = this.getWeek();
    let weekArray = [];
    for (let i = 0; i < 7; i++) {
      if (i < 6) {
        weekArray.push(new Date(week.getFullYear(), week.getMonth(), week.getDate() + i));
      } else {
        weekArray.push(new Date(week.getFullYear(), week.getMonth(), week.getDate() + i, 23, 59, 59, 999))
      }
    }
    return weekArray;
  }

  getWeekRange() {
    let weekArray = this.getWeekArray();
    let [m1, m2] = [weekArray[0].getMonth(), weekArray[6].getMonth()]
    let [d1, d2] = [weekArray[0].getDate(), weekArray[6].getDate()]

    if (m1 === m2) {
      return `${labels.monthsShort[m1]} ${d1}  ${d2}, ${weekArray[0].getFullYear()}`;
    } else {
      return `${labels.monthsShort[m1]} ${d1}  ${d2} ${labels.monthsShort[m2]}, ${weekArray[1].getFullYear()}`;
    }
  }

  getWeekNumber() {
    // fuction to get the week number for a date 1 - 52
    let d = new Date(Date.UTC(this.getYear(), this.getMonth(), this.getDay()));
    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
    let yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
    return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
  }

  getMonthName() {
    return labels.monthsLong[this.getMonth()];
  }

  getDaysInMonth() {
    return new Date(this.getYear(), this.getMonth() + 1, 0).getDate();
  }

  getMonthArrayStartDay() {
    return new Date(this.getYear(), this.getMonth(), 1).getDay();
  }

  getMonthArrayStart() {
    let monthArrayStart = [];
    let [year, month] = [this.getYear(), this.getMonth()]
    for (let i = 0; i < this.getMonthArrayStartDay(); i++) {
      monthArrayStart.push(new Date(year, month, 0 - i));
    }
    return monthArrayStart;
  }

  getMonthArrayEndDay() {
    return new Date(this.getYear(), this.getMonth() + 1, 0).getDay();
  }

  getMonthArrayEnd(handleFourWeeks) {
    let monthArrayEnd = [];
    let [year, month] = [this.getYear(), this.getMonth()]

    if (handleFourWeeks) {
      for (let i = 1; i < 8; i++) {
        monthArrayEnd.push(new Date(year, +month + 1, i));
      }
      return monthArrayEnd;
    } else {
      for (let i = 1; i < 7 - this.getMonthArrayEndDay(); i++) {
        monthArrayEnd.push(new Date(year, +month + 1, i));
      }
      return monthArrayEnd;
    }
  }

  getMonthArray() {
    let monthArray = [];
    let start = this.getMonthArrayStart();
    let daysInMonth = this.getDaysInMonth();
    let [year, month] = [this.getYear(), this.getMonth()];
    let end = this.getMonthArrayEnd();
    let tempend;

    for (let i = start.length - 1; i >= 0; i--) {
      monthArray.push(start[i]);
    }

    for (let i = 1; i <= daysInMonth; i++) {
      monthArray.push(new Date(year, month, i));
    }
    monthArray[monthArray.length - 1].setHours(23, 59, 59, 999);



    if (monthArray.length === 28 && end.length < 7) {
      end = this.getMonthArrayEnd(true);
    }

    for (let i = 0; i < end.length; i++) {
      if (i === end.length - 1) {
        end[i].setHours(23, 59, 59, 999);
      }
      monthArray.push(end[i]);
    }
    return monthArray;
  }

  isToday(testDate) {
    if (!testDate) {
      return (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_0__.compareDates)(this.getDate(), new Date());
    } else {
      return (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_0__.compareDates)(testDate, new Date());
    }
  }
}

/**
  * DatepickerContext
  * @class
  * @classdesc date context for datepicker -- 
  * slimmed down version of @Context class 
  * @property {Date} date - today's date
  * @property {Date} dateSelected - selected date
  * @property {number} daySelected - selected day
  * @property {number} monthSelected - selected month
  * @property {number} yearSelected - selected year
  * @property {number} month - current month
  * @property {Array} monthArray - current month array
  * 
 */
class DatepickerContext {
  constructor() {
    this.date = new Date();
    this.dateSelected = this.date.getDate();
    this.daySelected = this.date.getDate();
    this.monthSelected = this.date.getMonth();
    this.yearSelected = this.date.getFullYear();
    this.month = this.getMonth();
    this.monthArray = this.getMonthArray();
  }

  setDefaults() {
    if (localStorage.getItem("pickerYearSelected") === null) {
      if (this.yearSelected === undefined) {
        this.yearSelected = this.date.getFullYear();
      }
      DatepickerContext.setLocalPickerYear(this.yearSelected);
    }

    if (localStorage.getItem("pickerMonthSelected") === null) {
      if (this.monthSelected === undefined) {
        this.monthSelected = this.date.getMonth();
      }
      DatepickerContext.setLocalPickerMonth(this.monthSelected);
    }

    if (localStorage.getItem("pickerDaySelected") === null) {
      if (this.daySelected === undefined) {
        this.daySelected = this.date.getDate();
      }
      DatepickerContext.setLocalPickerDay(this.daySelected);
    }

    if (localStorage.getItem("pickerDateSelected") === null) {
      if (this.dateSelected === undefined) {
        this.dateSelected = this.date.getDate();
      }
      DatepickerContext.setLocalPickerDateSelected(this.dateSelected);
    }
  }

  /* **************************************** */
  /* LOCAL STATE MANAGEMENT */
  static getLocalPickerDay() {
    return +localStorage.getItem("pickerDaySelected");
  }

  static getLocalPickerMonth() {
    return +localStorage.getItem("pickerMonthSelected");
  }

  static getLocalPickerYear() {
    return +localStorage.getItem("pickerYearSelected");
  }

  static getLocalPickerDateSelected() {
    return +localStorage.getItem("pickerDateSelected");
  }

  static setLocalPickerDay(day) {
    localStorage.setItem("pickerDaySelected", day);
  }

  static setLocalPickerMonth(month) {
    localStorage.setItem("pickerMonthSelected", month);
  }

  static setLocalPickerYear(year) {
    localStorage.setItem("pickerYearSelected", year);
  }

  static setLocalPickerDateSelected(date) {
    localStorage.setItem("pickerDateSelected", date);
  }
  /* **************************************** */
  /* DAY, MONTH, YEAR, DATE, DAY_SELECTED */
  setDay(day) {
    this.daySelected = day;
    DatepickerContext.setLocalPickerDay(day);
  }

  setMonth(month) {
    this.monthSelected = month;
    DatepickerContext.setLocalPickerMonth(month);
  }

  setYear(year) {
    this.yearSelected = year;
    DatepickerContext.setLocalPickerYear(year);
  }

  setDateSelected(date) {
    this.dateSelected = date;
    DatepickerContext.setLocalPickerDateSelected(date);
  }

  setDate(year, month, day) {
    this.setYear(year);
    this.setMonth(month);
    this.setDay(day);
  }
  /* ************** */
  setPrevMonth() {
    const prevMonth = new Date(this.getYear(), this.getMonth() - 1, this.getDay());
    this.setDate(prevMonth.getFullYear(), prevMonth.getMonth(), prevMonth.getDate());
  }

  setNextMonth() {
    const nextMonth = new Date(this.getYear(), this.getMonth() + 1, this.getDay());
    this.setDate(nextMonth.getFullYear(), nextMonth.getMonth(), nextMonth.getDate());
  }
  /* ************** */
  getDateSelected() {
    return DatepickerContext.getLocalPickerDateSelected() || this.date.getDate();
  }

  getDay() {
    return DatepickerContext.getLocalPickerDay() || this.date.getDate();
  }

  getMonth() {
    return DatepickerContext.getLocalPickerMonth() || this.date.getMonth();
  }

  getYear() {
    return DatepickerContext.getLocalPickerYear() || this.date.getFullYear();
  }

  getDate() {
    return new Date(this.getYear(), this.getMonth(), this.getDay());
  }

  getToday() {
    return this.date;
  }

  getMonthName() {
    return labels.monthsLong[this.getMonth()];
  }

  getDaysInMonth() {
    return new Date(this.getYear(), this.getMonth() + 1, 0).getDate();
  }

  getMonthArrayStartDay() {
    return new Date(this.getYear(), this.getMonth(), 1).getDay();
  }

  getMonthArrayStart() {
    let monthArrayStart = [];
    let [year, month] = [this.getYear(), this.getMonth()]
    for (let i = 0; i < this.getMonthArrayStartDay(); i++) {
      monthArrayStart.push(new Date(year, month, 0 - i));
    }
    return monthArrayStart;
  }

  getMonthArrayEndDay() {
    return new Date(this.getYear(), this.getMonth() + 1, 0).getDay();
  }

  getMonthArrayEnd() {
    let monthArrayEnd = [];
    let [year, month] = [this.getYear(), this.getMonth()]
    for (let i = 1; i < 7 - this.getMonthArrayEndDay(); i++) {
      monthArrayEnd.push(new Date(year, +month + 1, i));
    }
    return monthArrayEnd;
  }

  getMonthArray() {
    let monthArray = [];

    let start = this.getMonthArrayStart();
    for (let i = start.length - 1; i >= 0; i--) {
      monthArray.push(start[i]);
    }

    let [year, month] = [this.getYear(), this.getMonth()];
    for (let i = 1; i <= this.getDaysInMonth(); i++) {
      monthArray.push(new Date(year, month, i));
    }

    let end = this.getMonthArrayEnd();
    for (let i = 0; i < end.length; i++) {
      if (i === end.length - 1) {
        end[i].setHours(23, 59, 59, 999);
      }
      monthArray.push(end[i]);
    }
    return monthArray;
  }
}

const context = new Context();
context.setDefaults();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (context);

const datepickerContext = new DatepickerContext();
datepickerContext.setDefaults();


/***/ }),

/***/ "./src/context/constants.js":
/*!**********************************!*\
  !*** ./src/context/constants.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const localStoreKeyNames = [
  "activeCtg",
  "dateSelected",
  "pickerDaySelected",
  "pickerMonthSelected",
  "sidebarState",
  "refresh",
  "component",
  "yearSelected",
  "ctg",
  "monthSelected",
  "daySelected",
  "pickerDateSelected",
  "pickerYearSelected",
  "store",
  "colorScheme",
  "keyboardShortcutsStatus",
]

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (localStoreKeyNames);

/***/ }),

/***/ "./src/context/store.js":
/*!******************************!*\
  !*** ./src/context/store.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _factory_entries__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../factory/entries */ "./src/factory/entries.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants */ "./src/context/constants.js");
/* harmony import */ var _utilities_dateutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utilities/dateutils */ "./src/utilities/dateutils.js");
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../locales/en */ "./src/locales/en.js");
/* harmony import */ var _locales_kbDefault__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../locales/kbDefault */ "./src/locales/kbDefault.js");
/* harmony import */ var _testdata_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../testdata.json */ "./src/testdata.json");






const colors = _locales_en__WEBPACK_IMPORTED_MODULE_3__["default"].colors
/*
  ***************************************
  // ENTRY MANAGEMENT
  "addEntry",
  "createEntry",
  "deleteEntry",
  "getActiveEntries",
  "getEntry",
  "getEntries",
  "removeLastEntry",
  "updateEntry",
  "searchBy",
  "sortBy",
  "getFirstAndLastEntry",
  "generateCoordinates",
  "getDayEntries",
  "getDayEntriesArray",
  "getMonthEntries",
  "getMonthEntryDates",
  "getGroupedMonthEntries",
  "getWeekEntries",
  "getYearEntries",
  "getGroupedYearEntries",
  ***************************************


  ***************************************
  // CATEGORY MANAGEMENT
  "addNewCtg",
  "deleteCategory",
  "getDefaultCtg",
  "getFirstActiveCategory",
  "getFirstActiveCategoryKeyPair",
  "getActiveCategories",
  "getActiveCategoriesKeyPair",
  "getAllCtg",
  "getAllCtgColors",
  "getAllCtgNames",
  "getCategoryStatus",
  "getCtgColor",
  "getCtgLength",
  "hasCtg",
  "moveCategoryEntriesToNewCategory",
  "removeCategoryAndEntries",
  "setCategoryStatus",
  "updateCtgColor",
  ***************************************


  ***************************************
  // KEYBOARD SHORTCUT MANAGEMENT
  "getShortcuts",
  "setShortCut",
  "setShortcutsStatus",
  "getShortcutsStatus",
  ***************************************


  ***************************************
  // POPUP/TOAST/NOTIFICATION MANAGEMENT
  "addActiveOverlay",
  "removeActiveOverlay",
  "getActiveOverlay",
  "hasActiveOverlay",
  ***************************************


  ***************************************
  // USER UPLOAD/DOWNLOAD MANAGEMNET
  "validateUserUpload",
  "setUserUpload",
  "setDataReconfigCallback",
  "getUserUpload",
  "getDataReconfigCallback",
  ***************************************


  ***************************************
  // FORM MANAGEMENT 
  "setFormRenderHandle",
  "getFormRenderHandle",

  "setFormResetHandle",
  "getFormResetHandle",

  "setRenderFormCallback",
  "getRenderFormCallback",
  ***************************************


  ***************************************
  // SIDEBAR MANAGEMENT
  "setRenderSidebarCallback",
  "getRenderSidebarCallback"
  ***************************************


  ***************************************
  // DATEPICKER MANAGEMENT
  "setResetDatepickerCallback",
  "getResetDatepickerCallback",
  ***************************************


  ***************************************
  // CALENDAR MANAGEMENT
  "setResizeHandle",
  "getResizeHandle",
  ***************************************
]
*/
// Store is passed to all calendar views in the following order : 
// ./index > ./renderViews > ./setViews > component

class Store {
  constructor() {
    this.store = localStorage.getItem("store") 
    ? JSON.parse(localStorage.getItem("store")) : _testdata_json__WEBPACK_IMPORTED_MODULE_5__;

    this.userUpload;

    this.ctg = localStorage.getItem("ctg") ? JSON.parse(localStorage.getItem("ctg")) : {
      "default": {color: colors.blue[4], active: true},
      "misc": {color: colors.grey[2], active: true},
      "school": {color: colors.grey[4], active: true},
    }

    this.activeCtg = ["default", "misc", "school"];

    this.activeOverlay = new Set();

    this.handleRenders = {
      sidebar: {
        callback: null
      },
      datepicker: {
        reset: null
      },
      form: {
        callback: null
      },
      reconfig: {
        callback: null
      },
      categories: {
        callback: null
      },
      calendars: {
        "month": {
          reset: null,
          resize: null,
        },
        "week": {
          reset: null, 
          render: null,
        },
        "day": {
          reset: null
        },
        "list": {
          reset: null
        }
      },
    }

    this.keyboardShortcuts = _locales_kbDefault__WEBPACK_IMPORTED_MODULE_4__["default"];
    this.keyboardShortcutsStatus = true;
  }

  setStoreForTesting(store) {
    this.store = store;
    Store.setStore(this.store);
  }

  getStoreStats() {
    return [this.store.length, this.getAllCtgNames().length] 
  }

  getAllMethodNames() {
    return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter((method) => {
      return method !== "constructor" && method !== "getStoreStats"
    })
  }

  /* ************************* */
  /* LOCAL STORAGE MANAGEMENT */
  static getStore() {
    return JSON.parse(localStorage.getItem("store")) || [];
  }
  
  static getActiveStore() {
    return JSON.parse(localStorage.getItem("activeStore")) || [];
  }

  static getCtg() {
    return JSON.parse(localStorage.getItem("ctg")) || [];
  }

  static getShortcutsStatus() {
    return JSON.parse(localStorage.getItem("keyboardShortcutsStatus"));
  }

  // *******************
  static setStore(store) {
    localStorage.setItem("store", JSON.stringify(store));
  }

  static setActiveStore(activeStore) {
    localStorage.setItem("activeStore", JSON.stringify(activeStore));
  }

  static setCtg(ctg) {
    localStorage.setItem("ctg", JSON.stringify(ctg));
  }

  static setShortcutsStatus(status) {
    localStorage.setItem("keyboardShortcutsStatus", JSON.stringify(status))
  }
  /* ************************* */




  /* ************** */
  /* essential crud (entries) - create, read, update, delete */
  addEntry(entry) {
    this.store.push(entry);
    Store.setStore(this.store);
  }

  createEntry(...args) {
    this.addEntry(new _factory_entries__WEBPACK_IMPORTED_MODULE_0__["default"](...args));
    Store.setStore(this.store);
  }

  deleteEntry(id) {
    this.store = this.store.filter(entry => entry.id !== id)
    Store.setStore(this.store);
  }

  getActiveEntries() {
    const active = this.getActiveCategories()
    if (!active) return [];
    const activeEntries = this.store.filter((entry) => {
      return active ? active.indexOf(entry.category) > -1 : [];
    })
    return activeEntries
  }
  
  getEntry(id) {
    return this.store.find(entry => entry.id === id);
  }

  getEntries() {
    return this.store || [];
  }

  getEntriesByCtg(ctg) {
    return this.store.filter((entry) => {
      return entry.category === ctg;
    })
  }

  removeLastEntry() {
    this.store.pop();
    Store.setStore(this.store);
  }

  updateEntry(id, data) {
    let entry = this.getEntry(id)
    entry = Object.assign(entry, data)
    Store.setStore(this.store);
  }
  /* ************ */




  /* **************************** */
  /* (ENTRIES) FILTER/SORT/PARTITION/ */
  searchBy(entries, searchtype, value) {
    if (entries.length === 0) return;
    return entries.filter((entry) => {
      return entry[searchtype].toLowerCase().slice(0, value.length) === value
    })
  }
  
  sortBy(entries, type, direction) {
    if (entries.length === 0) return;
  
    if (direction === "desc") {
      return entries.sort((a, b) => {
        if (type === "start") {
          return new Date(a.start) - new Date(b.start)
        } else if (type === "end") {
          return new Date(a.end) - new Date(b.end)
        } else if (type === "description" || type === "title" || type === "category") {
          return a[type].localeCompare(b[type])
        } else {
          return a[type] - b[type]
        }
      })
  
    } else {
      return entries.sort((a, b) => {
        if (type === "start") {
          return new Date(b.start) - new Date(a.start)
        } else if (type === "end") {
          return new Date(b.end) - new Date(a.end)
        } else if (type === "description" || type === "title" || type === "category") {
          return b[type].localeCompare(a[type])
        } else {
          return b[type] - a[type]
        }
      })
    }
  }

  /**
   * 
   * @returns {Array} [
   *    start date/time of earliest entry,  {string}
   *    end date/time of last entry         {string}
   * ]
   */
  getFirstAndLastEntry() {
    let sorted = this.sortBy(this.getActiveEntries(), "start", "desc")
    if (sorted === undefined) {
      return [0, 0]
    } else {
      return [sorted[0].start, sorted[sorted.length - 1].end]
    }
  }
  /* **************************** */



  /* *************************************** */
  /* SEGMENT ENTRIES FOR SPECIFIC VIEWS (YEAR/MONTH/...ect)*/

  // @generateCoordinates -- (only used in week and day view)
  // generates coordinates based on start and end times for a given entry
  // if an entry spans beyond a day, it will render at the top of the grid in 
  // a static (immobile) position. 
  generateCoordinates(start, end) {
    [start, end] = [(0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_2__.testDate)(start), (0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_2__.testDate)(end)];

    let startMin = start.getHours() * 4 + Math.floor(start.getMinutes() / 15);
    let endMin = end.getHours() * 4 + Math.floor(end.getMinutes() / 15);
    let height = endMin - startMin;
    let total = startMin + height;

    if (!(0,_utilities_dateutils__WEBPACK_IMPORTED_MODULE_2__.compareDates)(start, end)) {
      return {
        allDay: true,
        x: start.getDay(),
        x2: end.getDay(),
      }
    } else {
      return {
        allDay: false,
        x: start.getDay(),
        y: startMin,
        h: height,
        e: total
      }
    }
  }

  getDayEntries(day) {
    let activeEntries = this.getActiveEntries();
    let boxes = {
      allDay: [], // entries that start on one day and end on another
      day: []     // entries that start and end on same day
    }

    if (activeEntries.length === 0) return boxes;

    let dayEntries = activeEntries.filter((entry) => {
      let entryDate = new Date(entry.start);
      const [y, m, d] = [
        entryDate.getFullYear(),
        entryDate.getMonth(),
        entryDate.getDate(),
      ];
      return y === day.getFullYear() && m === day.getMonth() && d === day.getDate();
    })

    dayEntries.forEach((entry) => {
      entry.coordinates = this.generateCoordinates(
        new Date(entry.start), new Date(entry.end)
      );

      if (entry.coordinates.allDay) {
        boxes.allDay.push(entry)
      } else {
        boxes.day.push(entry)
      }
    })
    return boxes
  }

  getDayEntriesArray(targetDate) {
    let activeEntries = this.getActiveEntries();
    if (activeEntries.length === 0) return [];

    return activeEntries.filter((entry) => {
      let entryDate = new Date(entry.start);
      const [y, m, d] = [
        entryDate.getFullYear(),
        entryDate.getMonth(),
        entryDate.getDate()
      ];
      return y === targetDate.getFullYear() && m === targetDate.getMonth() && d === targetDate.getDate();
    })
  }

  getMonthEntries(montharr) {
    let activeEntries = this.getActiveEntries()
    if (activeEntries.length === 0) return []

    return activeEntries.filter((entry) => {
      let entryDate = new Date(entry.start)
      // console.log(entryDate)
      return entryDate >= montharr[0] && entryDate <= montharr[montharr.length - 1]
    })
  }
  
  getMonthEntryDates(montharr) {
    let entries = this.getMonthEntries(montharr)
    let grouped = {}
    entries.forEach((entry) => {
      let entryDate = new Date(entry.start)
      const [y, m, d] = [entryDate.getFullYear(), entryDate.getMonth(), entryDate.getDate()]
      let key = `${y}-${m}-${d}`
      if (!grouped[key]) {
        grouped[key] = []
      }
      grouped[key].push(entry)
    })
    return Object.keys(grouped)
  }

  getGroupedMonthEntries(entries) {
    return entries.reduce((acc, entry) => {
      let tempDate = new Date(entry.start)
      let day = tempDate.getDate()
      if (!acc[day]) {
        acc[day] = []
      }
      acc[day].push(entry)
      return acc;
    }, {})
  }

  getWeekEntries(week) {
    let activeEntries = this.getActiveEntries()
    let [start, end] = [week[0], week[6]]
    let boxes = {
      allDay: [], // entries that start on one day and end on another
      day: []     // entries that start and end on same day
    }

    if (activeEntries.length === 0) return boxes;
    let entries = activeEntries.filter((entry) => {
      let entryDate = new Date(entry.start)
      return entryDate >= start && entryDate <= end
    })

    entries.forEach((entry) => {
      entry.coordinates = this.generateCoordinates(
        new Date(entry.start), 
        new Date(entry.end)
      )

      if (entry.coordinates.allDay) {
        boxes.allDay.push(entry)
      } else {
        boxes.day.push(entry)
      }
    })
    
    return boxes
  }

  getYearEntries(year) {
    let activeEntries = this.getActiveEntries()
    if (activeEntries.length === 0) return []
    return activeEntries.filter(entry => new Date(entry.start).getFullYear() === year)
  }

  getGroupedYearEntries(yearentries) {
    let grouped = {}
    yearentries.forEach(entry => {
      let entryDate = new Date(entry.start)
      let month = entryDate.getMonth()
      let day = entryDate.getDate()

      if (!grouped[month]) {
        grouped[month] = {}
      }

      if (!grouped[month][day]) {
        grouped[month][day] = []
      }

      grouped[month][day].push(entry)
    })

    return grouped;
  }

  
  /* ************************************* */



  /* ********************* */
  /*  CATEGORY MANAGEMENT */
  addNewCtg(categoryName, color) {
    if (!this.hasCtg(categoryName)) {
      this.ctg[categoryName] = {
        color: color,
        active: true,
      }
      Store.setCtg(this.ctg);
    }
  }

  deleteCategory(category) {
    if (this.hasCtg(category)) {
      delete this.ctg[category];
      Store.setCtg(this.ctg);
    }
  }

  getDefaultCtg() {
    return Object.entries(this.ctg)[0];
  }

  getFirstActiveCategory() {
    for (let [key, value] of Object.entries(this.ctg)) {
      if (value.active) {
        return key;
      }
    }
    return "default";
  }

  getFirstActiveCategoryKeyPair() {
    for (let [key, value] of Object.entries(this.ctg)) {
      if (value.active) {
        return [key, value.color];
      }
    }
    const backup = this.getDefaultCtg()
    return [backup[0], backup[1].color]
  }

  getActiveCategories() {
    let active = Object.keys(this.ctg).filter(key => this.ctg[key].active);
    if (active.length > 0) {
      return active;
    } else {
      active = [];
    }
  }

  getActiveCategoriesKeyPair() {
    return Object.entries(this.ctg).filter(key => key[1].active);
  }

  getAllCtg() {
    return this.ctg;
  }
  
  getAllCtgColors() {
    return Object.values(this.ctg).map(ctg => ctg.color);
  }

  getAllCtgNames() {
    return Object.keys(this.ctg);
  }

  getCategoryStatus(category) {
    if (this.ctg.hasOwnProperty(category)) {
      return this.ctg[category].active;
    }
  }

  getCtgColor(ctg) {
    return this.ctg[ctg].color;
  }

  getCtgLength(category) {
    return this.store.filter(entry => entry.category === category).length
  }

  hasCtg(categoryName) {
    let hasctg = false;
    for (let key in this.ctg) {
      if (key.toLowerCase() === categoryName.toLowerCase()) {
        hasctg = true;
      }
    }
    return hasctg;
  }

  /**
   * 
   * @param {string} category 
   * @param {string} newCategory 
   */
  moveCategoryEntriesToNewCategory(category, newCategory, newName) {
    if (this.hasCtg(category) || newName === true) {
      this.store.forEach(entry => {
        if (entry.category === category) {
          entry.category = newCategory;
        }
      })
      Store.setStore(this.store)
    }
    this.deleteCategory(category)
    console.log(this.getEntriesByCtg('test'))
  }
  
  removeCategoryAndEntries(category) {
    if (this.hasCtg(category)) {
      this.store = this.store.filter(entry => entry.category !== category);
      Store.setStore(this.store)
    }
    this.deleteCategory(category)
  }

  setCategoryStatus(category, status) {
    if (this.hasCtg(category)) {
      this.ctg[category].active = status;
      Store.setCtg(this.ctg)
    }
  }

  /**
   * 
   * @param {string} categoryName 
   * @param {string} color 
   * @desc updates the color of a category
   */
  updateCtgColor(categoryName, color) {
    console.log("ran new color")
    if (this.hasCtg(categoryName)) {
      this.ctg[categoryName].color = color;
      Store.setCtg(this.ctg)
    }
  }

  getCtgIndex(category) {
    return Object.keys(this.ctg).indexOf(category);
  }

  /**
   * 
   * @param {string} newName 
   * @param {string} newColor 
   * @param {string} oldName 
   * @returns new category object
   * @desc note that 'value' @ [key, value] is necessary to segment the object, even if it is not directly referenced
   */
  updateCtg(newName, newColor, oldName) {
    console.log('ran update everything')
    let entries = Object.entries(this.ctg);
    let hasColor = newColor !== null;
    let count = 0;
    let length = entries.length;

    for (let [key, value] of entries) {
      count++
      if (count === 1) {
        if (oldName === key) {
          entries[0][0] = newName
          if (hasColor) {
            entries[0][1].color = newColor
          }
        }
      } else {
        if (oldName === key) {
          entries[count - 1][0] = newName;
          if (hasColor) {
            entries[count - 1][1].color = newColor;
          }
        }
      }
    }
    if (entries.length !== length) {
      console.error("something went wrong with category name/color change")
      return;
    } else {
      this.ctg = Object.fromEntries(entries);
      this.moveCategoryEntriesToNewCategory(
        oldName, 
        newName, 
        true
      )
      Store.setCtg(this.ctg)
    }
  }
  /* ********************* */



  /* ***************************** */
  /*  KEYBOARD SHORTCUT MANAGEMENT */
  getShortcuts() {
    return this.keyboardShortcuts
  }

  setShortCut(shortcut) {
    const keys = Object.keys(this.getShortcuts())
    let idx = keys.indexOf(shortcut)
    if (idx > -1) {
      return `Shortcut (${shortcut}) is already in use`
    } else {
      return;   
    }
  }

  setShortcutsStatus(status) {
    this.keyboardShortcutsStatus = status
    Store.setShortcutsStatus(status)
  }

  getShortcutsStatus() {
    const status = Store.getShortcutsStatus()
    return status !== null ? status : true;
  }
  /* ***************************** */


  /* ******************** */
  /*  OVERLAY MANAGEMENT */
  // see readme @ --overlay management-- for more info
  addActiveOverlay(overlay) {
    this.activeOverlay.add(overlay);
  }

  removeActiveOverlay(overlay) {
    const len = this.activeOverlay.size
    if (len === 0) {
      return;
    } else if (this.activeOverlay.size === 1) {
      this.activeOverlay = new Set();
      return;
    } else {
      this.activeOverlay = new Set([...this.activeOverlay].filter((o) => o !== overlay));
      return;
    }
  }

  getActiveOverlay() {
    return this.activeOverlay;
  }

  hasActiveOverlay() {
    return this.activeOverlay.size > 0;
  }
  /* ******************** */




  /* ************************ */
  /*  JSON UPLOAD & DOWNLOAD */
  validateUserUpload(userUpload) {
    const keys = Object.keys(userUpload);
    let message = {};
    console.log(userUpload)
    if (keys.length > _constants__WEBPACK_IMPORTED_MODULE_1__["default"].length) {
      message.err1 = "invalid number of keys (too many)"
    }
    
    for (let i = 0; i < keys.length; i++) {
      if (!_constants__WEBPACK_IMPORTED_MODULE_1__["default"].includes(keys[i])) {
        let errname = "err" + Object.keys(message).length;
        message[errname] = "invalid key: " + keys[i]
      }
    }

    if (Object.keys(message).length > 0) {
      return message;
    } else {
      return true;
    }
  }

  setUserUpload(userUpload) {
    const validation = this.validateUserUpload(userUpload);
    console.log(validation)
    let validated;
    if (validation === true) {
      localStorage.clear()
      validated = true;
      for (const [key, value] of Object.entries(userUpload)) {
        localStorage.setItem(key, value)
        console.log(key)
      }
    } else {
      return validation;
    }
    if (validated) {
      const refresh = localStorage.getItem("refresh");
      if (refresh === null) {
        window.location.reload();
        window.localStorage.setItem("refresh", "1");
      }
    }
  }
  
  getUserUpload() {
    return this.userUpload;
  }
  /* ************************ */



  /* ******************************************* */
  /*  STATE MANAGEMENT : RENDERING / RESET / RESIZE */
  setFormRenderHandle(type, callback) {
    this.handleRenders.calendars[type].render = callback;
  }
  
  setFormResetHandle(type, callback) {
    this.handleRenders.calendars[type].reset = callback;
  }
  
  setRenderFormCallback(callback) {
    this.handleRenders.form.callback = callback;
  }
  
  setRenderSidebarCallback(callback) {
    this.handleRenders.sidebar.callback = callback;
  }

  setResizeHandle(type, callback) {
    this.handleRenders.calendars[type].resize = callback;
  }

  setDataReconfigCallback(callback) {
    this.handleRenders.reconfig.callback = callback;
  }

  setResetDatepickerCallback(callback) {
    this.handleRenders.datepicker.reset = callback;
  }

  setRenderCategoriesCallback(callback) {
    this.handleRenders.categories.callback = callback;
  }

  getRenderCategoriesCallback() {
    return this.handleRenders.categories.callback;
  }

  getResetDatepickerCallback() {
    return this.handleRenders.datepicker.reset;
  }

  getDataReconfigCallback() {
    return this.handleRenders.reconfig.callback;
  }

  getResizeHandle(type) {
    if (this.handleRenders.calendars[type] === undefined) {
      return null;
    } else {
      return this.handleRenders.calendars[type].resize;
    }
  }

  getFormRenderHandle(type) {
    if (this.handleRenders.calendars[type] === undefined) {
      return null;
    } else {
      return this.handleRenders.calendars[type].render;
    }
  }
  
  getFormResetHandle(type) {
    if (this.handleRenders.calendars[type] === undefined) {
      return null;
    } else {
      return this.handleRenders.calendars[type].reset;
    }
  }

  getRenderFormCallback() {
    const callback = this.handleRenders.form.callback
    if (callback !== null) {
      return callback;
    } else {
      return null;
    }
  }

  getRenderSidebarCallback() {
    const callback = this.handleRenders.sidebar.callback;
    if (callback !== null) {
      return callback;
    } else {
      return null;
    }
  }
  /* ************************************ */
}

// single
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new Store());

/***/ }),

/***/ "./src/factory/entries.js":
/*!********************************!*\
  !*** ./src/factory/entries.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CoordinateEntry": () => (/* binding */ CoordinateEntry),
/* harmony export */   "Day": () => (/* binding */ Day),
/* harmony export */   "Week": () => (/* binding */ Week),
/* harmony export */   "default": () => (/* binding */ Entry)
/* harmony export */ });
/* harmony import */ var _utilities_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities/helpers */ "./src/utilities/helpers.js");


/**
 * @class Entry
 * @param {String} id - Unique identifier
 * @param {String} title
 * @param {String} description
 * @param {Date} start
 * @param {Date} end
 * @param {String} category
 * @param {Boolean} completed
 */
class Entry {
  constructor(category, completed, description, end, start, title) {
    this.category = category;
    this.completed = completed;
    this.description = description;
    this.end = end;
    this.id = (0,_utilities_helpers__WEBPACK_IMPORTED_MODULE_0__.generateId)();
    this.start = start;
    this.title = title;
  }
}

class CoordinateEntry {
  constructor(category, completed, coordinates, description, id, title) {
    this.category = category;
    this.completed = completed || false;
    this.coordinates = coordinates || {};
    this.description = description;
    this.id = id;
    this.title = title;
  }
}

/**
 * @class Week
 * 
 * @param {Array} dayEntries
 * @description Array of entries that span a single day.
 * 
 * @param {Array} allDayEntries
 * @description Array of entries that span multiple days.
 */
class Week {
  constructor(dayEntries, allDayEntries) {
    this.boxes = dayEntries;
    this.boxesTop = allDayEntries;
  }

  setAllBoxes(tempEntries) {
    this.boxes = tempEntries.day
    this.boxesTop = tempEntries.allDay
  }

  addBox(box) {
    this.boxes.push(box);
  }

  addBoxTop(box) {
    this.boxesTop.push(box)
  }

  getBox(id) {
    return this.boxes.find(box => box.id === id);
  }

  getBoxes() {
    return this.boxes;
  }

  getBoxesTop() {
    return this.boxesTop;
  }

  getLength() {
    return this.boxes.length;
  }

  getBoxesByColumn(col) {
    return this.boxes.filter(box => +box.coordinates.x == col);
  }

  getBoxesByColumnTop(col) {
    return this.boxesTop.filter(box => +box.coordinates.x == col);
  }

  getBoxesTopByDay(day) {
    return this.boxesTop.filter(box => +box.coordinates.y == day);
  }

  getBoxesTopLengths() {
    return this.getBoxesTop().reduce((a, c) => {
      let start = new Date(c.start)
      if (a[start.getDay()]) {
        a[start.getDay()]++
      }
      else {
        a[start.getDay()] = 1
      }
      return a
    }, {})
  }

  getColumnsWithMultipleBoxes() {
    let temp = {}
    let columns = []
    for (const box of this.boxes) {
      if (temp[box.coordinates.x]) {
        temp[box.coordinates.x]++
        if (temp[box.coordinates.x] === 2) {
          columns.push(box.coordinates.x)
        }
      } else {
        temp[box.coordinates.x] = 1
      }
    }
    return columns
  }

  getEntriesByTitle(title) {
    return this.boxes.filter(box => box.title.toLowerCase().includes(title.toLowerCase()));
  }

  updateCoordinates(id, coordinates) {
    this.getBox(id).coordinates = coordinates;
  }

  sortByY(bxs) {
    return bxs.sort((a, b) => +a.coordinates.y - +b.coordinates.y)
  }

  checkForCollision(col) {
    const bxs = this.getBoxesByColumn(col)
    const arr = []
    let collisions = new Set()

    for (const box of bxs) {
      arr.push([box.coordinates.y, box.coordinates.e])
    }

    for (let i = 0; i < arr.length; i++) {
      for (let j = i + 1; j < arr.length; j++) {
        if (arr[i][1] > arr[j][0] && arr[i][0] < arr[j][1]) {
          collisions.add(bxs[i])
          collisions.add(bxs[j])
        }
      }
    }
    return this.sortByY([...collisions])
  }

  updateStore(store, id, weekArray) {
    const boxEntry = this.getBox(id)
    const coords = boxEntry.coordinates
    let boxstart = +coords.y * 15
    let boxend = +coords.e * 15
    let day = weekArray[+coords.x]

    const startDate = new Date(day)
    const starthours = Math.floor(boxstart / 60)
    const startminutes = boxstart % 60
    startDate.setHours(starthours)
    startDate.setMinutes(startminutes)

    const endDate = new Date(day)
    const endhours = Math.floor(boxend / 60)
    const endminutes = boxend % 60
    endDate.setHours(endhours)
    endDate.setMinutes(endminutes)

    store.updateEntry(id, {
      start: startDate,
      end: endDate,
    })
  }
}


/**
 * @class Week
 * 
 * @param {Array} dayEntries
 * @description Array of entries that span a single day.
 * 
 * @param {Array} allDayEntries
 * @description Array of entries that span multiple days.
 */
class Day {
  constructor(dayEntries, allDayEntries) {
    this.boxes = dayEntries;
    this.boxesTop = allDayEntries;
  }

  setAllBoxes(tempEntries) {
    this.boxes = tempEntries.day
    this.boxesTop = tempEntries.allDay
  }

  addBox(box) {
    this.boxes.push(box);
  }

  addBoxTop(box) {
    this.boxesTop.push(box)
  }

  getBox(id) {
    return this.boxes.find(box => box.id === id);
  }

  getBoxes() {
    return this.boxes;
  }

  getBoxesTop() {
    return this.boxesTop;
  }

  getAllBoxes() {
    return [...this.boxes, ...this.boxesTop]
  }

  getLength() {
    return this.boxes.length;
  }

  getBoxesTopLengths() {
    return this.getBoxesTop().reduce((a, c) => {
      let start = new Date(c.start)
      if (a[start.getDay()]) {
        a[start.getDay()]++
      }
      else {
        a[start.getDay()] = 1
      }
      return a
    }, {})
  }

  getEntriesByTitle(title) {
    return this.boxes.filter(box => box.title.toLowerCase().includes(title.toLowerCase()));
  }

  updateCoordinates(id, coordinates) {
    this.getBox(id).coordinates = coordinates;
  }

  getEntriesEndingOnDay(day) {
    return this.boxes.filter(box => +box.coordinates.e === day);
  }

  sortByY(bxs) {
    return bxs.sort((a, b) => +a.coordinates.y - +b.coordinates.y)
  }

  checkForCollision() {
    const bxs = this.getBoxes()
    const arr = []
    let collisions = new Set()

    for (const box of bxs) {
      arr.push([box.coordinates.y, box.coordinates.e])
    }

    for (let i = 0; i < arr.length; i++) {
      for (let j = i + 1; j < arr.length; j++) {
        if (arr[i][1] > arr[j][0] && arr[i][0] < arr[j][1]) {
          collisions.add(bxs[i])
          collisions.add(bxs[j])
        }
      }
    }
    return this.sortByY([...collisions])
  }

  updateStore(store, id) {
    const boxEntry = this.getBox(id)
    const coords = boxEntry.coordinates
    let boxstart = +coords.y * 15
    let boxend = +coords.e * 15

    const startDate = new Date(boxEntry.start)
    const starthours = Math.floor(boxstart / 60)
    const startminutes = boxstart % 60
    startDate.setHours(starthours)
    startDate.setMinutes(startminutes)

    const endDate = new Date(boxEntry.start)
    let endhours = Math.floor(boxend / 60)
    let endminutes = boxend % 60
    if (endhours === 24) {
      endhours = 23
      endminutes = 59
    }

    endDate.setHours(endhours)
    endDate.setMinutes(endminutes)

    store.updateEntry(id, {
      start: startDate,
      end: endDate,
    })
  }
}



/***/ }),

/***/ "./src/factory/queries.js":
/*!********************************!*\
  !*** ./src/factory/queries.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
class MonthBoxQuery {
  constructor(flag) {
    this.flag = flag;
    this.tops = [16, 20];
    this.heights = [14, 18];
  }

  updateFlag() {
    this.flag = window.innerWidth <= 530 || window.innerHeight <= 470;
  }

  getFlag() {
    return this.flag;
  }

  getTop() {
    const [a, b] = this.tops;
    return this.flag ? a : b;
  }

  getHeight() {
    const [a, b] = this.heights;
    return this.flag ? a : b;
  }

  getPrevTop(top) {
    const [a, b] = this.tops;
    return top === a ? b : a;
  }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MonthBoxQuery);

/***/ }),

/***/ "./src/locales/en.js":
/*!***************************!*\
  !*** ./src/locales/en.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  labels: {
    monthsLong: [
      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'
    ],
    monthsShortLower: [
      'jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'
    ],
    monthsLongLower: [
      'january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'
    ],
    monthsShort: [
      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'
    ],
    weekdaysLong: [
      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'
    ],
    weekdaysShort: [
      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'
    ],
    weekdaysNarrow: [
      'S', 'M', 'T', 'W', 'T', 'F', 'S'
    ],

  },

  /*
    - the following are colors for calendar categories
    - they are optimized for dark modes 

  */
  colors: {
    red: {
      1: '#DF2A79',
      2: '#A51955',
      3: '#73113C',
      4: '#C20000',
      5: '#9D0000',
      6: '#690000',
      7: '#460000',
    },

    orange: { 
      1: '#EE756A',
      2: '#E84334',
      3: '#E77C2B',
      4: '#D56A18',
      5: '#954A11',
      6: '#6B350C',
      7: '#402007',
    },
    
    green: {
      1: '#1E9E98',
      2: '#1A8A84',
      3: '#167671',
      4: '#115855',
      5: '#0F4E4B',
      6: '#09312F',
      7: '#072726',
    },
    
    blue: { 
      1: '#14489A',
      2: '#125ab8',
      3: '#5578D7',
      4: '#2C52BA',
      5: '#234295',
      6: '#1B3375',
      7: '#142555',
    },

    purple: {
      1: '#42338B',
      2: '#513FAB',
      3: '#614E7A',
      4: '#604793',
      5: '#49356F',
      6: '#342650',
      7: '#271D3C',
    },

    grey: {
      1: '#858F93',
      2: '#4D5458',
      3: '#272B2C',
      4: '#202B31',
      5: '#2C3C44',
      6: '#384C56',
      7: '#516C7B',
    },
  },
});

/***/ }),

/***/ "./src/locales/kbDefault.js":
/*!**********************************!*\
  !*** ./src/locales/kbDefault.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  0: { shortcut: '0', action: "change app theme" },
  1: { shortcut: ['d', '1'], action: 'open day view' },
  2: { shortcut: ['w', '2'], action: 'open week view' },
  3: { shortcut: ['m', '3'], action: 'open month view' },
  4: { shortcut: ['y', '4'], action: 'open year view' },
  5: { shortcut: ['l', '5'], action: 'open list view' },
  6: { shortcut: 'v', action: 'toggle view options' },
  7: { shortcut: 't', action: 'set date to today' },
  8: { shortcut: "g", action: 'enter date manually' },
  9: { shortcut: "n", action: 'next period' },
  10: {shortcut: "p", action: 'previous period.'},
  11: { shortcut: 's', action: 'toggle sidebar' },
  12: { shortcut: 'f', action: 'open form' },
  13: { shortcut: '+', action: 'open new category form' },
  14: { shortcut: 'a', action: 'open settings' },
  15: { shortcut: ['/', '?'], action: 'open keyboard shortcuts' },
  16: { shortcut: "esc", action: 'return to calendar' },
});

/***/ }),

/***/ "./src/utilities/dateutils.js":
/*!************************************!*\
  !*** ./src/utilities/dateutils.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "compareDates": () => (/* binding */ compareDates),
/* harmony export */   "createDateFromFormattedString": () => (/* binding */ createDateFromFormattedString),
/* harmony export */   "createTimestamp": () => (/* binding */ createTimestamp),
/* harmony export */   "default": () => (/* binding */ createDate),
/* harmony export */   "formatDateForDisplay": () => (/* binding */ formatDateForDisplay),
/* harmony export */   "formatDuration": () => (/* binding */ formatDuration),
/* harmony export */   "formatEntryOptionsDate": () => (/* binding */ formatEntryOptionsDate),
/* harmony export */   "formatStartEndDate": () => (/* binding */ formatStartEndDate),
/* harmony export */   "formatStartEndTime": () => (/* binding */ formatStartEndTime),
/* harmony export */   "generateTempStartEnd": () => (/* binding */ generateTempStartEnd),
/* harmony export */   "getDateForStore": () => (/* binding */ getDateForStore),
/* harmony export */   "getDateFormatted": () => (/* binding */ getDateFormatted),
/* harmony export */   "getDateFromAttribute": () => (/* binding */ getDateFromAttribute),
/* harmony export */   "getDateTimeFormatted": () => (/* binding */ getDateTimeFormatted),
/* harmony export */   "getDuration": () => (/* binding */ getDuration),
/* harmony export */   "getDurationSeconds": () => (/* binding */ getDurationSeconds),
/* harmony export */   "getFormDateObject": () => (/* binding */ getFormDateObject),
/* harmony export */   "getTempDates": () => (/* binding */ getTempDates),
/* harmony export */   "getTimeFromAttribute": () => (/* binding */ getTimeFromAttribute),
/* harmony export */   "getdatearray": () => (/* binding */ getdatearray),
/* harmony export */   "isBeforeDate": () => (/* binding */ isBeforeDate),
/* harmony export */   "isDate": () => (/* binding */ isDate),
/* harmony export */   "longerThanDay": () => (/* binding */ longerThanDay),
/* harmony export */   "sortDates": () => (/* binding */ sortDates),
/* harmony export */   "testDate": () => (/* binding */ testDate)
/* harmony export */ });
/* harmony import */ var _timeutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timeutils */ "./src/utilities/timeutils.js");
/* harmony import */ var _locales_en__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../locales/en */ "./src/locales/en.js");


const labels = _locales_en__WEBPACK_IMPORTED_MODULE_1__["default"].labels;
const monthNames = labels.monthsShort

function createDate(year, month, day) {
  const pad = (num) => { return num < 10 ? `0${num}` : num; }
  Date.prototype.toCustomISO = function () {
    return this.getFullYear() +
      '-' + pad(this.getMonth() + 1) +
      '-' + pad(this.getDate()) +
      'T' + pad(this.getHours()) +
      ':' + pad(this.getMinutes()) +
      ':' + pad(this.getSeconds()) +
      '.' + (this.getMilliseconds() / 1000).toFixed(3).slice(2, 5) +
      'Z';
  }
  if (!year && !month && !day) {
    return new Date().toCustomISO()
  } else {
    return new Date(year, month, day, 0, 0, 0, 0).toCustomISO().slice(0, 10)
  }
}

function testDate(date) {
  return date instanceof Date && !isNaN(date) ? date : new Date(date)
}

function getDateFormatted(date) {
  date = testDate(date)
  return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`
}

function getDateForStore(date) {
  date = testDate(date)
  return `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`
}

function getdatearray(date) {
  return [+date.getFullYear(), +date.getMonth() + 1, +date.getDate()]

}

function formatDateForDisplay(date) {
  date = testDate(date)
  const month = _locales_en__WEBPACK_IMPORTED_MODULE_1__["default"].labels.monthsShort[date.getMonth()]
  const day = date.getDate()
  let hours = date.getHours()
  let minutes = date.getMinutes()
  hours = hours < 10 ? `0${hours}` : hours
  minutes = minutes < 10 ? `0${minutes}` : minutes
  let hm = `${hours}:${minutes}`
  return `${month} ${day} ${date.getFullYear()}, (${hm}) `
}

function compareDates(date1, date2) {
  [date1, date2] = [testDate(date1), testDate(date2)]
  return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate()
}

function formatDuration(seconds) {
  let time = { year: 31536000, day: 86400, hour: 3600 },
    res = [];
  if (seconds === 0) return 'now';
  for (let key in time) {
    if (seconds >= time[key]) {
      let val = Math.floor(seconds / time[key]); 
      res.push(val += val > 1 ? ' ' + key + 's' : ' ' + key);
      seconds = seconds % time[key];
    }
  }
  return res.length > 1 ? res.join(', ').replace(/,([^,]*)$/, ' &' + '$1') : res[0]
}

function formatDurationHourMin(seconds) {
  let time = { hour: 3600, minute: 60},
    res = [];
  if (seconds === 0) return 'now';
  for (let key in time) {
    if (seconds >= time[key]) {
      let val = Math.floor(seconds / time[key]);
      res.push(val += val > 1 ? ' ' + key + 's' : ' ' + key);
      seconds = seconds % time[key];
    }
  }
  return res.length > 1 ? res.join(', ').replace(/,([^,]*)$/, ' &' + '$1') : res[0]
}

function formatStartEndDate(start, end, flag) {
  [start, end] = [testDate(start), testDate(end)]

  const [startday, startmonth, startyear] = [
    start.getDate(),
    monthNames[start.getMonth()],
    start.getFullYear()
  ]

  const [endday, endmonth, endyear] = [
    end.getDate(),
    monthNames[end.getMonth()],
    end.getFullYear()
  ]

  let tempstartyear = startyear;
  let tempendyear = endyear;
  if (flag) {
    tempstartyear = startyear.toString().slice(2, 4);
    tempendyear = endyear.toString().slice(2, 4);
  }

  if (startyear === endyear) {
    if (startmonth === endmonth) {
      if (startday === endday) {
        // same : day, month, year
        return `${startmonth} ${startday} ${startyear}`
      } else {
        // same : month, year
        return `${startmonth} ${startday}  ${endday}, ${startyear}`
      }
    } else {
      // same : year
      return `${startmonth} ${startday}  ${endmonth} ${endday}, ${startyear}`
    }
  } else {
    // same : nothing
    return `${startmonth} ${startday}, ${tempstartyear}  ${endmonth} ${endday}, ${tempendyear}`
  }
}

function formatStartEndTime(start, end) {
  [start, end] = [new Date(start), new Date(end)]

  let startmin = start.getMinutes()
  let endmin = end.getMinutes()
  endmin = endmin % 15 === 0 ? endmin : endmin + (15 - (endmin % 15))
  startmin = startmin % 15 === 0 ? startmin : startmin + (15 - (startmin % 15))
  let starttime = (0,_timeutils__WEBPACK_IMPORTED_MODULE_0__.formatTime)(start.getHours(), startmin)
  let endtime = (0,_timeutils__WEBPACK_IMPORTED_MODULE_0__.formatTime)(end.getHours(), endmin)
  if (starttime.slice(-2) === endtime.slice(-2)) {
    starttime = starttime.slice(0, -2)
  }

  return `${starttime}  ${endtime}`
}

function getDuration(start, end) {
  [start, end] = [new Date(start), new Date(end)]
  const duration = formatDuration((Math.floor(end.getTime() / 1000)) - (Math.floor(start.getTime() / 1000)))
  if (duration === undefined) {
    return "completed"
  } else {
    return duration
  }
}

function createDateFromFormattedString(dateString) {
  const dateArray = dateString.split("-")
  return new Date(dateArray[0], dateArray[1] - 1, dateArray[2])
}

function isBeforeDate(date1, date2) {
  [date1, date2] = [new Date(date1), new Date(date2)]
  return date1.getTime() < date2.getTime()
}

function isDate(value) {
  return value instanceof Date && !isNaN(value);
}

function getDateFromAttribute(target, attribute, view) {
  return target.getAttribute(attribute).split("-").map((x, i) => {
    if (view === "month") {
      return i === 1 ? parseInt(x) - 1 : parseInt(x)
    } else {
      return parseInt(x)
    }
  })
}

function getTimeFromAttribute(target, attribute) {
  return target.getAttribute(attribute).split(":").map((x) => {
    return parseInt(x);
  })
}

function getDateTimeFormatted(date, hour, minute) {
  date = testDate(date)
  return new Date(
    date.getFullYear(),
    date.getMonth(),
    date.getDate(),
    parseInt(hour),
    parseInt(minute),
    1,
    1,
  )
}

function getTempDates(tempdate, hours, minutes) {
  tempdate = testDate(tempdate);
  return [
    getDateTimeFormatted(tempdate, hours[0], minutes[0]),
    getDateTimeFormatted(tempdate, hours[1], minutes[1]),
  ];
}

function generateTempStartEnd(data) {
  let tempdate = new Date()

  const [year, month, day] = data
  let startDate = new Date(year, month, day)
  startDate.setHours(tempdate.getHours())
  startDate.setMinutes(0)

  let endDate = new Date(startDate)
  endDate.setHours(tempdate.getHours())
  endDate.setMinutes(30)

  return [startDate, endDate];
}

function getFormDateObject(start, end) {
  [start, end] = [testDate(start), testDate(end)]

  const setmin = min => min === 0 ? "00" : min;
  return {
    dateObj: [start, end],
    minutes: [setmin(start.getMinutes()), setmin(end.getMinutes())],
    formatted: [getDateForStore(start), getDateForStore(end)],
  }
}

function sortDates(dates, dir) {
  return dates.sort((a, b) => {
    let [date1, date2] = [new Date(a), new Date(b)];
    if (dir === "asc") {
      return date1 - date2;
    } else {
      return date2 - date1;
    }
  })
}

function getDurationSeconds(date1, date2) {
  return (Math.floor(date2.getTime() / 1000)) - (Math.floor(date1.getTime() / 1000))
}

function formatEntryOptionsDate(date1, date2) {
  let [y1, y2] = [date1.getFullYear(), date2.getFullYear()];
  let [m1, m2] = [date1.getMonth(), date2.getMonth()];
  let [d1, d2] = [date1.getDate(), date2.getDate()];
  let [h1, h2] = [date1.getHours(), date2.getHours()];
  let [min1, min2] = [date1.getMinutes(), date2.getMinutes()]

  let useTempDate = false;
  let tempdateone = new Date();
  if (isBeforeDate(date1, tempdateone)) {
    // console.log(true)
    useTempDate = true;
  }
  // if same day, month, & year -- return time as start-end
  // otherwise, return time as duration between start & end
  if (y1 === y2) {
    if (m1 === m2) {
      if (d1 === d2) {
        // === year, month, day

        let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2)
        let durationTime = formatDurationHourMin(duration);
        return {
          date: `${labels.monthsLong[m1]} ${d1}, ${y1} (${(0,_timeutils__WEBPACK_IMPORTED_MODULE_0__.formatStartEndTimes)([h1, h2], [min1, min2])})`,
          time: durationTime,
        }
      } else {
        // === year, month
        let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2)
        let durationTime = formatDuration(duration);
        return {
          date: `${labels.monthsLong[m1]} ${d1}  ${d2}, ${y1}`,
          time: durationTime,
        }
      }
    } else {
      // === year
      let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2)
      let durationTime = formatDuration(duration);
      return {
        date: `${labels.monthsShort[m1]} ${d1}  ${labels.monthsShort[m2]} ${d2}, ${y2}`,
        time: durationTime,
      }
    }
  } else {
    // different year --- return full date
    let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2)
    let durationTime = formatDuration(duration);


    return {
      date: `${labels.monthsShort[m1]} ${d1}, ${y1}  ${labels.monthsShort[m2]} ${d2}, ${y2}`,
      time: formatDuration(duration),
    }
  }
}

function createTimestamp() {
  const date = new Date();
  const year = date.getFullYear().toString().slice(-2);
  const month = monthNames[date.getMonth()].toUpperCase();
  const day = parseInt(date.getDate());
  return `${month}${day}`
}

function longerThanDay(date1, date2) {
  return getDurationSeconds(date1, date2) > 86400;
}



/***/ }),

/***/ "./src/utilities/dragutils.js":
/*!************************************!*\
  !*** ./src/utilities/dragutils.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "calcDateOnClick": () => (/* binding */ calcDateOnClick),
/* harmony export */   "calcNewHourFromCoords": () => (/* binding */ calcNewHourFromCoords),
/* harmony export */   "calcNewMinuteFromCoords": () => (/* binding */ calcNewMinuteFromCoords),
/* harmony export */   "createBox": () => (/* binding */ createBox),
/* harmony export */   "createTempBoxHeader": () => (/* binding */ createTempBoxHeader),
/* harmony export */   "createTemporaryBox": () => (/* binding */ createTemporaryBox),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "getBoxDefaultStyle": () => (/* binding */ getBoxDefaultStyle),
/* harmony export */   "getOriginalBoxObject": () => (/* binding */ getOriginalBoxObject),
/* harmony export */   "resetOriginalBox": () => (/* binding */ resetOriginalBox),
/* harmony export */   "resetStyleOnClick": () => (/* binding */ resetStyleOnClick),
/* harmony export */   "setBoxTimeAttributes": () => (/* binding */ setBoxTimeAttributes),
/* harmony export */   "setStylingForEvent": () => (/* binding */ setStylingForEvent),
/* harmony export */   "startEndDefault": () => (/* binding */ startEndDefault),
/* harmony export */   "updateBoxCoordinates": () => (/* binding */ updateBoxCoordinates)
/* harmony export */ });
/* harmony import */ var _timeutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timeutils */ "./src/utilities/timeutils.js");


/**
 * For a full explanation see readme @grid-engines
 * 
 * The weekiew & dayview drag/resize systems are 90% similar with the only difference of course being some additional calculations to drag between days in the weekview.
 * 
 * 
 * All drag / resize events throughout each view follow these steps;
 * -- capture :
 * document.onmousedown captures the position of cursor & defines variables for start/end points
 * 
 * -- relay :
 * document.onmousemove relays the new position to start/end point variables, which in turn relay a new set of styling rules to the element target (entry) 
 * 
 * -- render :
 * document.onmouseup intitiates all render logic
 * 
 * 
 * 
 */


const identifiers = {
  boxnumarr: {
    week: [
      'box-one', 'box-two', 'box-three',
      'box-four', 'box-five', 'box-six',
      'box-seven', 'box-eight', 'box-nine',
      'box-ten',
    ],
    day: [
      'dv-box-one', 'dv-box-two', 'dv-box-three',
      'dv-box-four', 'dv-box-five', 'dv-box-six',
      'dv-box-seven', 'dv-box-eight', 'dv-box-nine',
    ],
  },

  boxClasses: {
    week: {
      base: "box",
      ontop: "box-ontop",
      active: "box-mv-dragactive",
      temporary: "temporary-box",
      prepend: "box-",

    },
    day: {
      base: "dv-box",
      ontop: "dv-box-ontop",
      active: "dv-box-mv-dragactive",
      temporary: "dv-temporary-box",
      prepend: "dv-box-",
    },
  },

  boxAttributes: {
    week: {
      updatecoord: [
        "data-box-id",
        "data-start-time",
        "data-time-intervals"
      ],
      dataIdx: "box-idx",
      dataId: "data-box-id",
      dataCol: "data-box-col",
      prepend: "data-",
      prepentwo: "data-wv-"
    },
    day: {
      updatecoord: [
        "data-dv-box-id",
        "data-dv-start-time",
        "data-dv-time-intervals",
      ],
      dataIdx: "data-dv-box-index",
      dataId: "data-dv-box-id",
      prepend: "data-dv-",
      prepentwo: "data-dv-"
    },
  },

  styles: {
    newBox: {
      left: "calc((100% - 0px) * 0 + 0px)",
      height: "12.5px",
      width: "calc((100% - 4px) * 1)",
    }
  }
}

function calcNewLeft(index) {
  let base = 0.1;
  let add = 0.05;

  if (index === 0) {
    return 0;
  }

  if (index >= 1 && index <= 5) {
    return (index * add) + base;
  }
}

function setBoxWidth(box, prepend, dataidx) {
  const attr = box.getAttribute(dataidx);

  switch (attr) {
    case `${prepend}one`:
      box.style.left = 'calc((100% - 0px) * 0 + 0px)';
      box.style.width = "calc((100% - 4px) * 1)"
      break;
    case `${prepend}two`:
      box.style.left = "calc((100% - 0px) * 0.1 + 0px)"
      box.style.width = "calc((100% - 4px) * 0.9)";
      break;
    case `${prepend}three`:
      box.style.left = "calc((100% - 0px) * 0.15 + 0px)"
      box.style.width = "calc((100% - 4px) * 0.85)";
      break;
    case `${prepend}four`:
      box.style.left = "calc((100% - 0px) * 0.35 + 0px)"
      box.style.width = "calc((100% - 4px) * 0.65)"
      break;
    case `${prepend}five`:
      box.style.left = "calc((100% - 0px) * 0 + 0px)"
      box.style.width = "calc((100% - 4px) * 0.34)"
      break;
    case `${prepend}six`:
      box.style.left = "calc((100% - 0px) * 0.05 + 0px)"
      box.style.width = "calc((100% - 4px) * 0.4)"
      break;
    case `${prepend}seven`:
      box.style.left = "calc((100% - 0px) * 0.1 + 0px)"
      box.style.width = "calc((100% - 4px) * 0.38)"
      break;
    case `${prepend}eight`:
      box.style.left = "calc((100% - 0px) * 0.1)"
      box.style.width = "calc((100% - 4px) * 0.4)"
      break;
    case `${prepend}nine`:
      box.style.left = "calc((100% - 0px) * 0.3)"
      box.style.width = "calc((100% - 4px) * 0.7)"
      break;
    default:
      break;
  }
}

function handleOverlap(col, view, boxes) {
  const collisions = view === "day" ? boxes.checkForCollision() : boxes.checkForCollision(col);

  const identifyBox = identifiers.boxnumarr[view]

  const [baseClass, classPrepend] = [
    identifiers.boxClasses[view],
    identifiers.boxClasses[view].prepend,
  ]

  const [boxIdxAttr, boxIdAttr] = [
    identifiers.boxAttributes[view].dataIdx,
    identifiers.boxAttributes[view].dataId,
  ]

  for (let i = 0; i < collisions.length; i++) {
    const box = document.querySelector(`[${boxIdAttr}="${collisions[i].id}"]`)
    if (i === 0) {
      box.setAttribute("class", `${baseClass.base} ${identifyBox[i]}`)
      box.setAttribute(boxIdxAttr, identifyBox[i])
    } else {
      box.setAttribute("class", `${baseClass.base} ${baseClass.ontop} ${identifyBox[i]}`)
      box.setAttribute(boxIdxAttr, identifyBox[i])
    }
    setBoxWidth(box, classPrepend, boxIdxAttr)
  }
}

function setStylingForEvent(clause, wrapper, store) {
  const sidebar = document.querySelector(".sidebar")
  const resizeoverlay = document.querySelector(".resize-overlay")

  switch (clause) {
    case "dragstart":
      // console.log(wrapper.offsetLeft)

      if (!sidebar.classList.contains("hide-sidebar")) {
        if (wrapper.offsetLeft === 0) {
          sidebar.classList.add("sidebar--dragged-over")
        }
      }

      store.addActiveOverlay("hide-resize-overlay");
      resizeoverlay.classList.remove("hide-resize-overlay");
      break;
    case "dragend":
      store.removeActiveOverlay("hide-resize-overlay")
      sidebar.classList.remove("sidebar--dragged-over")
      resizeoverlay.classList.add("hide-resize-overlay")
      document.body.style.cursor = "default"
      break;
    default:
      break;
  }
}

function updateBoxCoordinates(box, view, boxes) {
  let [id, y, h] = identifiers.boxAttributes[view].updatecoord.map((x) => {
    return box.getAttribute(x)
  })
  let x = view === "week" ? box.getAttribute("data-box-col") : 1;
  boxes.updateCoordinates(id, {
    x: parseInt(x),
    y: parseInt(y),
    h: parseInt(h),
    e: parseInt(y) + parseInt(h),
  })
}

function setBoxTimeAttributes(box, view) {
  let start = +box.style.top.split("px")[0]
  start = start >= 0 ? start / 12.5 : 0
  let length = +box.style.height.split("px")[0] / 12.5
  let end = start + length
  let prepend = identifiers.boxAttributes[view].prepend
  box.setAttribute(`${prepend}start-time`, start)
  box.setAttribute(`${prepend}time-intervals`, length)
  box.setAttribute(`${prepend}end-time`, end)
}

function createBox(col, entry, view, color) {
  const baseClass = identifiers.boxClasses[view].base;
  const attrPrepend = identifiers.boxAttributes[view].prepend;
  const attrPrependTwo = identifiers.boxAttributes[view].prependtwo;
  const coord = entry.coordinates
  
  const box = document.createElement('div');
  box.classList.add(baseClass);
  box.style.backgroundColor = color;
  box.style.top = `${+coord.y * 12.5}px`;
  box.style.height = `${+coord.h * 12.5}px`;
  box.style.left = 'calc((100% - 0px) * 0 + 0px)';
  box.style.width = "calc((100% - 4px) * 1)"

  const boxheader = document.createElement('div');
  boxheader.classList.add(`${baseClass}__header`);
  const entryTitle = document.createElement('div');
  entryTitle.classList.add(`${baseClass}-title`);
  entryTitle.textContent = entry.title;
  boxheader.appendChild(entryTitle);

  const boxcontent = document.createElement('div');
  boxcontent.classList.add(`${baseClass}__content`);
  const entryTime = document.createElement('span');
  entryTime.classList.add(`${baseClass}-time`)
  boxcontent.appendChild(entryTime);

  const resizehandleS = document.createElement('div');
  resizehandleS.classList.add(`${baseClass}-resize-s`)

  if (col.getAttribute(`${attrPrependTwo}top`) === "true") {
    box.setAttribute(`${attrPrependTwo}start`, coord.x)
    box.setAttribute(`${attrPrependTwo}end`, coord.x2)
  } else {
    box.setAttribute(`${attrPrepend}start-time`, coord.y)
    box.setAttribute(`${attrPrepend}time-intervals`, coord.h)
    box.setAttribute(`${attrPrepend}end-time`, +coord.y + +coord.h)
    if (view === "week") {
      box.setAttribute("data-box-col", coord.x)
      box.setAttribute("box-idx", 1)
    } else {
      box.setAttribute("data-dv-box-index", 1)
    }
    entryTime.textContent = (0,_timeutils__WEBPACK_IMPORTED_MODULE_0__["default"])(coord.y, +coord.h)
  }

  box.setAttribute(`${attrPrepend}box-id`, entry.id)
  box.setAttribute(`${attrPrepend}box-category`, entry.category)
  box.append(boxheader, boxcontent, resizehandleS)
  col.appendChild(box);
}

function createTemporaryBox(box, col, hasSibling, view) {
  const clone = box.cloneNode(true)
  clone.classList.add(`${identifiers.boxClasses[view].temporary}`)
  if (hasSibling) {
    col.insertBefore(clone, box.nextElementSibling)
  } else {
    col.appendChild(clone)
  }
}

function getBoxDefaultStyle(y, backgroundColor) {
  const style = identifiers.styles.newBox
  return `top:${y}px; left:${style.left}; height:${style.height}; width:${style.width}; background-color:${backgroundColor};`
}

function resetStyleOnClick(view, box) {
  box.setAttribute("class", identifiers.boxClasses[view].base)
  box.style.left = 'calc((100% - 0px) * 0 + 0px)';
  box.style.width = "calc((100% - 4px) * 1)"
}

function createTempBoxHeader(view) {
  const baseClass = identifiers.boxClasses[view].base
  const boxheader = document.createElement('div');
  const boxtitle = document.createElement('div');
  boxheader.classList.add(`${baseClass}__header`);
  boxtitle.classList.add(`${baseClass}-title`);
  boxtitle.textContent = "(no title)";
  boxheader.appendChild(boxtitle)
  return boxheader
}

function startEndDefault(y) {
  let tempstarthour = Math.floor((y / 12.5) / 4);
  let tempstartmin = Math.floor((y / 12.5) % 4) * 15;
  return [
    tempstarthour,        // start hour
    tempstartmin,         // start minute
    tempstarthour,        // end hour
    +tempstartmin + 15    // end minute
  ];
}

function calcNewHourFromCoords(h, y) {
  return Math.floor(((h + y) / 12.5) / 4)
}

function calcNewMinuteFromCoords(h, y) {
  return Math.floor(((h + y) / 12.5) % 4) * 15
}

function calcDateOnClick(date, start, length) {
  let [startDate, endDate] = [new Date(date), new Date(date)];
  startDate.setHours(Math.floor(+start / 4));
  startDate.setMinutes((+start * 15) % 60);
  endDate.setHours(Math.floor((start + length) / 4));
  endDate.setMinutes(((start + length) * 15) % 60);
  return [startDate, endDate];
}

function getOriginalBoxObject(box) {
  return { 
    height: box.style.height,
    left: box.style.left,
    width: box.style.width,
    class: box.getAttribute("class"),
  }
}

function resetOriginalBox(box, boxorig) {
  box.setAttribute("class", boxorig.class)
  box.style.left = boxorig.left;
  box.style.width = boxorig.width;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handleOverlap);


/***/ }),

/***/ "./src/utilities/helpers.js":
/*!**********************************!*\
  !*** ./src/utilities/helpers.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "generateId": () => (/* binding */ generateId),
/* harmony export */   "getClosest": () => (/* binding */ getClosest),
/* harmony export */   "hextorgba": () => (/* binding */ hextorgba),
/* harmony export */   "placePopup": () => (/* binding */ placePopup),
/* harmony export */   "setTheme": () => (/* binding */ setTheme),
/* harmony export */   "throttle": () => (/* binding */ throttle)
/* harmony export */ });
/**
 * 
 * @param {callback} func 
 * @param {number} limit 
 * @returns strict debounce 
 */
function debounce(func, limit) {
  let timeoutId;
  return function (...args) {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => func.apply(this, args), limit)
  }
}
/**
 * 
 * @param {*} e 
 * @param {*} element 
 * 
 * With the exception of popup modals, all events in the app
 * are delegated from their parent element.
 */
function getClosest(e, element) {
  return e.target.closest(element)
}

function hextorgba(hex, alpha) {
  let r = 0, g = 0, b = 0, a = alpha;
  r = "0x" + hex[1] + hex[2];
  g = "0x" + hex[3] + hex[4];
  b = "0x" + hex[5] + hex[6];
  return "rgba(" + +r + "," + +g + "," + +b + "," + a + ")";
}

function generateId() {
  return Date.now().toString(36) + Math.random().toString(36).substring(2)
}

const throttle = (fn, wait) => {
  let inThrottle, lastFn, lastTime;
  return function() {
    const context = this,
      args = arguments;
    if (!inThrottle) {
      fn.apply(context, args);
      lastTime = Date.now();
      inThrottle = true;
    } else {
      clearTimeout(lastFn);
      lastFn = setTimeout(function() {
        if (Date.now() - lastTime >= wait) {
          fn.apply(context, args);
          lastTime = Date.now();
        }
      }, Math.max(wait - (Date.now() - lastTime), 0));
    }
  };
};

function setTheme(context) {
  const appBody = document.querySelector(".body");
  const colorSchemeMeta = document.getElementsByName("color-scheme")[0];
  const currentScheme = context.getColorScheme();
  const hasLightMode = appBody.classList.contains("light-mode");
  const hasContrastMode = appBody.classList.contains("contrast-mode");

  const setColorSchema = () => {
    if (currentScheme === "light" && hasLightMode && !hasContrastMode) {
      return;
    } else if (currentScheme === "dark" && !hasLightMode && !hasContrastMode) {
      return;
    } else if (currentScheme === "contrast" && hasContrastMode && !hasLightMode) {
      return;
    }

    const darkicon = document.querySelector(".sbti-one")
    const lighticon = document.querySelector(".sbti-two")
    const contrasticon = document.querySelector(".sbti-three")

    const setlight = () => {
      context.setColorScheme("light")
      colorSchemeMeta.setAttribute("content", "light");

      appBody.classList.remove("contrast-mode")
      appBody.classList.add("light-mode");

      lighticon.classList.remove("sb-theme-icon-hide")
      darkicon.classList.add("sb-theme-icon-hide")
      contrasticon.classList.add("sb-theme-icon-hide")
    }

    const setdark = () => {
      context.setColorScheme("dark")
      colorSchemeMeta.setAttribute("content", "dark light");

      appBody.classList.remove("light-mode");
      appBody.classList.remove("contrast-mode")

      darkicon.classList.remove("sb-theme-icon-hide")
      contrasticon.classList.add("sb-theme-icon-hide")
      lighticon.classList.add("sb-theme-icon-hide")
    }

    const setcontrast = () => {
      context.setColorScheme("contrast")
      colorSchemeMeta.setAttribute("content", "dark");

      appBody.classList.remove("light-mode");
      appBody.classList.add("contrast-mode")

      contrasticon.classList.remove("sb-theme-icon-hide")
      darkicon.classList.add("sb-theme-icon-hide")
      lighticon.classList.add("sb-theme-icon-hide")
    }


    if (currentScheme === "light") {
      setlight()
      return;
    } 

    if (currentScheme === "contrast") {
      setcontrast()
      return;
    }

    if (currentScheme === "dark") {
      setdark()
      return;
    }
  }
  setColorSchema()
}


/**
 * 
 * @param {number} popupWidth 
 * @param {number} popupHeight 
 * @param {array} coords [x: e.clientX, y: e.clientY]
 * @param {array} windowCoords [x: window.innerWidth, y: window.innerHeight]
 * @returns [left position, top position];
 */
function placePopup(popupWidth, popupHeight, coords, windowCoords) {
  const [popupW, popupH] = [popupWidth, popupHeight];
  const [x, y] = coords;
  const [winW, winH] = windowCoords;

  let popupX = x + popupW > winW ? x - popupW - 6 : x;
  let popupY = y + popupH > winH ? winH - popupH - 6 : y;

  if (popupX < 0) popupX = winW - popupW - 24;
  if (popupY < 0) popupY = winH - popupH - 24;

  return [popupX, popupY];
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (debounce);
 

/***/ }),

/***/ "./src/utilities/svgs.js":
/*!*******************************!*\
  !*** ./src/utilities/svgs.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createCaretDownIcon": () => (/* binding */ createCaretDownIcon),
/* harmony export */   "createCaretRightIcon": () => (/* binding */ createCaretRightIcon),
/* harmony export */   "createCaretUpIcon": () => (/* binding */ createCaretUpIcon),
/* harmony export */   "createCategoryIcon": () => (/* binding */ createCategoryIcon),
/* harmony export */   "createCheckBoxIcon": () => (/* binding */ createCheckBoxIcon),
/* harmony export */   "createCheckIcon": () => (/* binding */ createCheckIcon),
/* harmony export */   "createCloseIcon": () => (/* binding */ createCloseIcon),
/* harmony export */   "createEditIcon": () => (/* binding */ createEditIcon),
/* harmony export */   "createMeatballVertIcon": () => (/* binding */ createMeatballVertIcon),
/* harmony export */   "createPencilIcon": () => (/* binding */ createPencilIcon),
/* harmony export */   "createSortPlaceholderIcon": () => (/* binding */ createSortPlaceholderIcon),
/* harmony export */   "createStatusIcon": () => (/* binding */ createStatusIcon),
/* harmony export */   "createTrashIcon": () => (/* binding */ createTrashIcon),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
let n = 40;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (n);

const createSortPlaceholderIcon = () => {
  const iconwrapper = document.createElement("span")
  iconwrapper.classList.add("lvhi-sort--placeholder")
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "20");
  icon.setAttribute("width", "20");
  icon.style.transform = "scale(0.7) rotate(90deg)"
  const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path.setAttribute("d", "M8.5 15 3 10l5.5-5Zm-1-2.25v-5.5L4.5 10Zm4 2.25V5l5.5 5Z");
  icon.appendChild(path);
  iconwrapper.appendChild(icon)
  return iconwrapper;
}

const createStatusIcon = () => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "24");
  icon.setAttribute("width", "24");
  icon.setAttribute("viewBox", "0 0 24 24");
  icon.setAttribute("fill", "var(--white3)")
  icon.classList.add("lvhi-status--icon")
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "M0 0h24v24H0z")
  pathone.setAttribute("fill", "none")
  const pathtwo = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathtwo.setAttribute("d", "M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z");
  icon.append(pathone, pathtwo)
  return icon
}

const createCategoryIcon = () => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "24");
  icon.setAttribute("width", "24");
  icon.setAttribute("viewBox", "0 0 24 24");
  icon.setAttribute("fill", "var(--white3)");
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "M0 0h24v24H0z")
  pathone.setAttribute("fill", "none")
  const pathtwo = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathtwo.setAttribute("d", "M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z");
  icon.classList.add("lvhi-category--icon")
  icon.append(pathone, pathtwo);
  return icon;
}

const createEditIcon = () => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "20");
  icon.setAttribute("width", "20");
  icon.setAttribute("fill", "var(--white3)")
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "M10 16q-.625 0-1.062-.438Q8.5 15.125 8.5 14.5t.438-1.062Q9.375 13 10 13t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 16 10 16Zm0-4.5q-.625 0-1.062-.438Q8.5 10.625 8.5 10t.438-1.062Q9.375 8.5 10 8.5t1.062.438q.438.437.438 1.062t-.438 1.062q-.437.438-1.062.438ZM10 7q-.625 0-1.062-.438Q8.5 6.125 8.5 5.5t.438-1.062Q9.375 4 10 4t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 7 10 7Z")
  icon.appendChild(pathone)
  return icon;
}

const createPencilIcon = (fill) => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "20");
  icon.setAttribute("width", "20");
  icon.setAttribute("viewBox", "0 0 24 24")
  if (!fill) {
    icon.setAttribute("fill", "var(--white3)")
  } else {
    icon.setAttribute("fill", fill)
  }
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "M20.41 4.94l-1.35-1.35c-.78-.78-2.05-.78-2.83 0L3 16.82V21h4.18L20.41 7.77c.79-.78.79-2.05 0-2.83zm-14 14.12L5 19v-1.36l9.82-9.82 1.41 1.41-9.82 9.83z");
  icon.appendChild(pathone)
  return icon;
}

const createTrashIcon = (fill) => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "24");
  icon.setAttribute("width", "24");
  icon.setAttribute("viewBox", "0 0 24 24");
  if (!fill) {
    icon.setAttribute("fill", "var(--white3)")
  } else {
    icon.setAttribute("fill", fill)
  }
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "M15 4V3H9v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5zm2 15H7V6h10v13z")
  const pathtwo = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathtwo.setAttribute("d", "M9 8h2v9H9zm4 0h2v9h-2z")
  icon.append(pathone, pathtwo)
  return icon;
}

const createCloseIcon = (fill) => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "20");
  icon.setAttribute("width", "20");
  if (!fill) {
    icon.setAttribute("fill", "var(--white3)")
  } else {
    icon.setAttribute("fill", fill)
  }
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "M6.062 15 5 13.938 8.938 10 5 6.062 6.062 5 10 8.938 13.938 5 15 6.062 11.062 10 15 13.938 13.938 15 10 11.062Z")
  icon.appendChild(pathone)
  return icon;
}

const createCaretDownIcon = (fill) => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "18");
  icon.setAttribute("width", "18");
  icon.setAttribute("viewBox", "0 0 24 24");
  if (!fill) {
    icon.setAttribute("fill", "var(--white3)")
  } else {
    icon.setAttribute("fill", fill)
  }

  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "M0 0h24v24H0z");
  pathone.setAttribute("fill", "none");
  const pathtwo = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathtwo.setAttribute("d", "M7 10l5 5 5-5z");
  icon.append(pathone, pathtwo)
  return icon;
}

const createCaretUpIcon = (fill) => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "18");
  icon.setAttribute("width", "18");
  icon.setAttribute("viewBox", "0 0 24 24");
  if (!fill) {
    icon.setAttribute("fill", "var(--white3)")
  } else {
    icon.setAttribute("fill", fill)
  }
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "M0 0h24v24H0V0z");
  pathone.setAttribute("fill", "none");
  const pathtwo = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathtwo.setAttribute("d", "M7 14l5-5 5 5H7z");
  icon.append(pathone, pathtwo)
  return icon;
}

const createCaretRightIcon = (fill) => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "20");
  icon.setAttribute("width", "20");
  if (!fill) {
    icon.setAttribute("fill", "var(--white3)")
  } else {
    icon.setAttribute("fill", fill)
  }
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "m6 18.167-1.583-1.584L11 10 4.417 3.417 6 1.833 14.167 10Z");
  icon.appendChild(pathone)
  return icon;  
}

const createCheckIcon = (fill) => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "20");
  icon.setAttribute("width", "20");
  if (!fill) {
    icon.setAttribute("fill", "var(--white2)")
  } else {
    icon.setAttribute("fill", fill)
  }
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "m8.229 14.062-3.521-3.541L5.75 9.479l2.479 2.459 6.021-6L15.292 7Z")
  icon.appendChild(pathone)
  return icon;
}

const createCheckBoxIcon = (fill) => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "24");
  icon.setAttribute("width", "24");
  if (!fill) {
    icon.setAttribute("fill", "var(--white2)")
  } else {
    icon.setAttribute("fill", fill)
  }
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "m10.6 16.2 7.05-7.05-1.4-1.4-5.65 5.65-2.85-2.85-1.4 1.4ZM5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h14q.825 0 1.413.587Q21 4.175 21 5v14q0 .825-.587 1.413Q19.825 21 19 21Zm0-2h14V5H5v14ZM5 5v14V5Z")
  icon.appendChild(pathone)
  return icon;
}

const createMeatballVertIcon = (fill) => {
  const icon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  icon.setAttribute("height", "24");
  icon.setAttribute("width", "24");
  if (!fill) {
    icon.setAttribute("fill", "var(--white4)")
  } else {
    icon.setAttribute("fill", fill)
  }
  const pathone = document.createElementNS("http://www.w3.org/2000/svg", "path");
  pathone.setAttribute("d", "M6 14q-.825 0-1.412-.588Q4 12.825 4 12t.588-1.413Q5.175 10 6 10t1.412.587Q8 11.175 8 12q0 .825-.588 1.412Q6.825 14 6 14Zm6 0q-.825 0-1.412-.588Q10 12.825 10 12t.588-1.413Q11.175 10 12 10t1.413.587Q14 11.175 14 12q0 .825-.587 1.412Q12.825 14 12 14Zm6 0q-.825 0-1.413-.588Q16 12.825 16 12t.587-1.413Q17.175 10 18 10q.825 0 1.413.587Q20 11.175 20 12q0 .825-.587 1.412Q18.825 14 18 14Z")
  icon.appendChild(pathone)
  return icon;
}




/***/ }),

/***/ "./src/utilities/timeutils.js":
/*!************************************!*\
  !*** ./src/utilities/timeutils.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "configMinutesForStore": () => (/* binding */ configMinutesForStore),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "formatStartEndTimes": () => (/* binding */ formatStartEndTimes),
/* harmony export */   "formatTime": () => (/* binding */ formatTime)
/* harmony export */ });
function formatTime(hours, minutes) {
  let md;
  if (minutes === 60) {
    minutes = 0;
    hours += 1;
  }
  if (+hours === 0) {
    hours = 12;
    md = "am";
  } else if (hours < 12) {
    md = "am";
  } else if (hours === 12) {
    md = "pm";
  } else if (hours === 24) {
    md = "am";
    hours -= 12;
  } else {
    hours -= 12;
    md = "pm";
  }

  if (+minutes === 0) {
    return `${hours}${md}`;
  } else {
    return `${hours}:${minutes}${md}`;
  }
}

function formatStartEndTimes(hours, minutes) {
  let [startHours, endHours] = hours;
  let [startMinutes, endMinutes] = minutes;

  let [start, end] = [
    formatTime(startHours, startMinutes),
    formatTime(endHours, endMinutes),
  ];

  if (start.slice(-2) === end.slice(-2)) { 
    start = start.slice(0, -2);
  }

  return `${start}  ${end}`;
}

function configMinutesForStore(minutes) {
  return minutes === 0 ? "00" : minutes;
}

function calcTime(start, length) {
  let startHours = Math.floor(+start / 4);
  let startMinutes = (+start * 15) % 60;

  let endHours = Math.floor((start + length) / 4);
  let endMinutes = ((start + length) * 15) % 60;

  let startingtime = formatTime(startHours, startMinutes);
  let endingtime = formatTime(endHours, endMinutes);

  if (startingtime.slice(-2) == endingtime.slice(-2)) {
    startingtime = startingtime.slice(0, -2);
  }

  const boxtime = `${startingtime}  ${endingtime}`;
  return boxtime;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (calcTime);


/***/ }),

/***/ "./src/testdata.json":
/*!***************************!*\
  !*** ./src/testdata.json ***!
  \***************************/
/***/ ((module) => {

module.exports = JSON.parse('[{"category":"misc","completed":true,"description":"random body","end":"2023-04-15T20:15:00.000Z","id":"lcyzz1b7xjg52g9oqr","start":"2023-04-15T15:15:00.000Z","title":"quaerat"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-11T19:15:00.000Z","id":"lcyzz1b7407g7llfyvn","start":"2023-04-11T17:15:00.000Z","title":"cupiditate"},{"category":"misc","completed":true,"description":"random body","end":"2023-01-16T21:15:00.000Z","id":"lcyzz1b7xtffrq8x4v","start":"2023-01-16T18:15:00.000Z","title":"cupiditate"},{"category":"default","completed":true,"description":"random body","end":"2023-02-25T20:45:00.000Z","id":"lcyzz1b79kor7hmrctm","start":"2023-02-25T17:45:00.000Z","title":"numquam"},{"category":"school","completed":true,"description":"random body","end":"2023-03-16T19:30:00.000Z","id":"lcyzz1b71k84n5phpwk","start":"2023-03-16T16:30:00.000Z","title":"aut"},{"category":"school","completed":true,"description":"random body","end":"2023-01-14T22:15:00.000Z","id":"lcyzz1b7nwkxf09f71n","start":"2023-01-14T18:15:00.000Z","title":"amet"},{"category":"default","completed":true,"description":"random body","end":"2023-02-09T21:30:00.000Z","id":"lcyzz1b7la0c9e75p5","start":"2023-02-09T16:30:00.000Z","title":"cupiditate"},{"category":"school","completed":true,"description":"random body","end":"2023-03-02T22:00:00.000Z","id":"lcyzz1b7gzwvc1dsfr","start":"2023-03-02T18:00:00.000Z","title":"sequi"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-25T22:45:00.000Z","id":"lcyzz1b75xkzv4chxnv","start":"2023-02-25T18:45:00.000Z","title":"ut"},{"category":"default","completed":true,"description":"random body","end":"2023-03-21T21:15:00.000Z","id":"lcyzz1b789qc02795fr","start":"2023-03-21T16:15:00.000Z","title":"sequi"},{"category":"default","completed":true,"description":"random body","end":"2023-01-05T20:45:00.000Z","id":"lcyzz1b7i0lnwlp3vf9","start":"2023-01-05T18:45:00.000Z","title":"sequi"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-05T22:00:00.000Z","id":"lcyzz1b767n4tsdgyfa","start":"2023-02-05T17:00:00.000Z","title":"velit"},{"category":"default","completed":true,"description":"random body","end":"2023-01-28T20:30:00.000Z","id":"lcyzz1b7w60bn9jabu","start":"2023-01-28T18:30:00.000Z","title":"aut"},{"category":"misc","completed":true,"description":"random body","end":"2023-03-01T22:15:00.000Z","id":"lcyzz1b7uu2pbffmxi9","start":"2023-03-01T16:15:00.000Z","title":"velit"},{"category":"misc","completed":true,"description":"random body","end":"2023-03-08T20:15:00.000Z","id":"lcyzz1b7q5nh9aiix6i","start":"2023-03-08T18:15:00.000Z","title":"ut"},{"category":"school","completed":true,"description":"random body","end":"2023-03-19T21:45:00.000Z","id":"lcyzz1b7py9dapvhdj","start":"2023-03-19T17:45:00.000Z","title":"velit"},{"category":"misc","completed":true,"description":"random body","end":"2023-01-23T22:15:00.000Z","id":"lcyzz1b7w4cxu8q6m19","start":"2023-01-23T18:15:00.000Z","title":"amet"},{"category":"misc","completed":true,"description":"random body","end":"2023-01-24T21:45:00.000Z","id":"lcyzz1b79fdbr3s7j1","start":"2023-01-24T17:45:00.000Z","title":"numquam"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-20T21:00:00.000Z","id":"lcyzz1b70cqbpwyhzod","start":"2023-04-20T17:00:00.000Z","title":"sequi"},{"category":"default","completed":true,"description":"random body","end":"2023-03-27T19:45:00.000Z","id":"lcyzz1b7ltydi5300gb","start":"2023-03-27T14:45:00.000Z","title":"aut"},{"category":"school","completed":true,"description":"random body","end":"2023-01-04T22:15:00.000Z","id":"lcyzz1b74nqhz7ggtds","start":"2023-01-04T17:15:00.000Z","title":"quaerat"},{"category":"misc","completed":true,"description":"random body","end":"2023-03-11T21:00:00.000Z","id":"lcyzz1b7hqw154flvl","start":"2023-03-11T16:00:00.000Z","title":"numquam"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-14T20:30:00.000Z","id":"lcyzz1b7jxw0rgf5p7l","start":"2023-02-14T15:30:00.000Z","title":"quaerat"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-12T22:00:00.000Z","id":"lcyzz1b7suc6pbfpfj","start":"2023-02-12T17:00:00.000Z","title":"sequi"},{"category":"default","completed":true,"description":"random body","end":"2023-02-04T21:30:00.000Z","id":"lcyzz1b7bqwgb51pl4g","start":"2023-02-04T17:30:00.000Z","title":"numquam"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-22T21:15:00.000Z","id":"lcyzz1b7er3ijvxs17n","start":"2023-02-22T15:15:00.000Z","title":"sequi"},{"category":"misc","completed":true,"description":"random body","end":"2023-03-19T19:30:00.000Z","id":"lcyzz1b7ydgl5w630wl","start":"2023-03-19T14:30:00.000Z","title":"sequi"},{"category":"misc","completed":true,"description":"random body","end":"2023-03-04T19:00:00.000Z","id":"lcyzz1b7em75utmslq","start":"2023-03-04T16:00:00.000Z","title":"cupiditate"},{"category":"default","completed":true,"description":"random body","end":"2023-01-05T22:45:00.000Z","id":"lcyzz1b7elkzuui9j15","start":"2023-01-05T17:45:00.000Z","title":"aut"},{"category":"school","completed":true,"description":"random body","end":"2023-01-06T19:45:00.000Z","id":"lcyzz1b8jb0e8up08qk","start":"2023-01-06T18:45:00.000Z","title":"ut"},{"category":"default","completed":true,"description":"random body","end":"2023-03-18T21:15:00.000Z","id":"lcyzz1b81rm6tgjli87","start":"2023-03-18T17:15:00.000Z","title":"quaerat"},{"category":"school","completed":true,"description":"random body","end":"2023-03-09T20:15:00.000Z","id":"lcyzz1b8944638sdqow","start":"2023-03-09T15:15:00.000Z","title":"aut"},{"category":"default","completed":true,"description":"random body","end":"2023-01-01T20:15:00.000Z","id":"lcyzz1b811u9k1n81j7c","start":"2023-01-01T17:15:00.000Z","title":"velit"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-01T19:15:00.000Z","id":"lcyzz1b8iwnoaer7h4","start":"2023-02-01T15:15:00.000Z","title":"velit"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-12T20:30:00.000Z","id":"lcyzz1b8kwqbt7l8uqq","start":"2023-04-12T16:30:00.000Z","title":"amet"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-05T21:00:00.000Z","id":"lcyzz1b8xgrfhnibxm","start":"2023-04-05T17:00:00.000Z","title":"quaerat"},{"category":"default","completed":true,"description":"random body","end":"2023-01-04T20:30:00.000Z","id":"lcyzz1b8sx988lxtqbj","start":"2023-01-04T18:30:00.000Z","title":"sequi"},{"category":"misc","completed":true,"description":"random body","end":"2023-03-05T21:00:00.000Z","id":"lcyzz1b8a39jfb85p34","start":"2023-03-05T15:00:00.000Z","title":"sequi"},{"category":"school","completed":true,"description":"random body","end":"2023-01-27T20:15:00.000Z","id":"lcyzz1b80h18szgwu7eg","start":"2023-01-27T15:15:00.000Z","title":"amet"},{"category":"default","completed":true,"description":"random body","end":"2023-03-03T19:00:00.000Z","id":"lcyzz1b8jbsw14dm4qh","start":"2023-03-03T15:00:00.000Z","title":"cupiditate"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-15T19:00:00.000Z","id":"lcyzz1b8tiamqxlnn7b","start":"2023-02-15T18:00:00.000Z","title":"cupiditate"},{"category":"school","completed":true,"description":"random body","end":"2023-01-15T19:15:00.000Z","id":"lcyzz1b8ixa8qpwp32b","start":"2023-01-15T17:15:00.000Z","title":"veniam"},{"category":"school","completed":true,"description":"random body","end":"2023-03-10T22:00:00.000Z","id":"lcyzz1b83bw8wpp03n1","start":"2023-03-10T15:00:00.000Z","title":"aut"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-04T20:00:00.000Z","id":"lcyzz1b8p16xdz25yzd","start":"2023-04-04T15:00:00.000Z","title":"veniam"},{"category":"misc","completed":true,"description":"random body","end":"2023-03-18T21:30:00.000Z","id":"lcyzz1b8mwtcbxttn0f","start":"2023-03-18T14:30:00.000Z","title":"ut"},{"category":"default","completed":true,"description":"random body","end":"2023-03-01T20:15:00.000Z","id":"lcyzz1b8e60f3909m1","start":"2023-03-01T15:15:00.000Z","title":"numquam"},{"category":"default","completed":true,"description":"random body","end":"2023-03-24T18:15:00.000Z","id":"lcyzz1b8kp93ioso7cm","start":"2023-03-24T17:15:00.000Z","title":"veniam"},{"category":"default","completed":true,"description":"random body","end":"2023-04-18T20:00:00.000Z","id":"lcyzz1b85ofx41z4mdq","start":"2023-04-18T15:00:00.000Z","title":"cupiditate"},{"category":"default","completed":true,"description":"random body","end":"2023-03-10T22:30:00.000Z","id":"lcyzz1b8u9ib2hwj64i","start":"2023-03-10T15:30:00.000Z","title":"quaerat"},{"category":"school","completed":true,"description":"random body","end":"2023-04-14T20:00:00.000Z","id":"lcyzz1b827hdjhysoxp","start":"2023-04-14T16:00:00.000Z","title":"quaerat"},{"category":"school","completed":true,"description":"random body","end":"2023-01-12T19:15:00.000Z","id":"lcyzz1b8uoe7uwrgom","start":"2023-01-12T16:15:00.000Z","title":"ut"},{"category":"misc","completed":true,"description":"random body","end":"2023-01-10T22:30:00.000Z","id":"lcyzz1b8gwja7vshfao","start":"2023-01-10T17:30:00.000Z","title":"cupiditate"},{"category":"default","completed":true,"description":"random body","end":"2023-04-01T18:45:00.000Z","id":"lcyzz1b817w0g6nf6gi","start":"2023-04-01T17:45:00.000Z","title":"cupiditate"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-13T19:30:00.000Z","id":"lcyzz1b8ovp6ugqqkb","start":"2023-02-13T17:30:00.000Z","title":"quaerat"},{"category":"school","completed":true,"description":"random body","end":"2023-02-25T19:30:00.000Z","id":"lcyzz1b8js5ux3ohvn","start":"2023-02-25T15:30:00.000Z","title":"ut"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-28T20:30:00.000Z","id":"lcyzz1b8tn32a56oya","start":"2023-02-28T17:30:00.000Z","title":"sequi"},{"category":"default","completed":true,"description":"random body","end":"2023-04-18T20:45:00.000Z","id":"lcyzz1b8hgzvgsru4gd","start":"2023-04-18T15:45:00.000Z","title":"amet"},{"category":"default","completed":true,"description":"random body","end":"2023-02-01T21:45:00.000Z","id":"lcyzz1b80zh2ih2no7hh","start":"2023-02-01T16:45:00.000Z","title":"quaerat"},{"category":"school","completed":true,"description":"random body","end":"2023-04-29T20:30:00.000Z","id":"lcyzz1b8vf4836e4zt","start":"2023-04-29T17:30:00.000Z","title":"numquam"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-26T22:15:00.000Z","id":"lcyzz1b80esjk0zdfv4k","start":"2023-02-26T17:15:00.000Z","title":"numquam"},{"category":"default","completed":true,"description":"random body","end":"2023-04-26T19:30:00.000Z","id":"lcyzz1b8qxk4ph55g6k","start":"2023-04-26T17:30:00.000Z","title":"ut"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-05T21:00:00.000Z","id":"lcyzz1b8funzwgb5wov","start":"2023-02-05T16:00:00.000Z","title":"numquam"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-09T22:30:00.000Z","id":"lcyzz1b80s862yx55zem","start":"2023-02-09T16:30:00.000Z","title":"numquam"},{"category":"school","completed":true,"description":"random body","end":"2023-01-06T21:15:00.000Z","id":"lcyzz1b84uik5hvhex4","start":"2023-01-06T16:15:00.000Z","title":"cupiditate"},{"category":"misc","completed":true,"description":"random body","end":"2023-03-12T19:00:00.000Z","id":"lcyzz1b8z2zq0cjen6n","start":"2023-03-12T15:00:00.000Z","title":"ut"},{"category":"school","completed":true,"description":"random body","end":"2023-02-14T20:45:00.000Z","id":"lcyzz1b84wx8fdjossv","start":"2023-02-14T17:45:00.000Z","title":"ut"},{"category":"school","completed":true,"description":"random body","end":"2023-04-27T18:30:00.000Z","id":"lcyzz1b8aw9ujxrmlgd","start":"2023-04-27T16:30:00.000Z","title":"veniam"},{"category":"default","completed":true,"description":"random body","end":"2023-02-03T19:45:00.000Z","id":"lcyzz1b8qdxefp21ddk","start":"2023-02-03T17:45:00.000Z","title":"ut"},{"category":"misc","completed":true,"description":"random body","end":"2023-03-05T19:30:00.000Z","id":"lcyzz1b87g3ccxbqaav","start":"2023-03-05T18:30:00.000Z","title":"ut"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-14T19:00:00.000Z","id":"lcyzz1b82nu4n6th2pj","start":"2023-04-14T15:00:00.000Z","title":"numquam"},{"category":"school","completed":true,"description":"random body","end":"2023-02-27T20:15:00.000Z","id":"lcyzz1b8n4o3kp5hoag","start":"2023-02-27T16:15:00.000Z","title":"veniam"},{"category":"default","completed":true,"description":"random body","end":"2023-04-28T20:30:00.000Z","id":"lcyzz1b8mn1l6zpmeu","start":"2023-04-28T15:30:00.000Z","title":"numquam"},{"category":"misc","completed":true,"description":"random body","end":"2023-01-15T22:30:00.000Z","id":"lcyzz1b8kb805gbvib","start":"2023-01-15T15:30:00.000Z","title":"cupiditate"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-16T21:15:00.000Z","id":"lcyzz1b8idclct2pcn","start":"2023-04-16T15:15:00.000Z","title":"ut"},{"category":"misc","completed":true,"description":"random body","end":"2023-01-12T20:00:00.000Z","id":"lcyzz1b8xyvee6qfjdt","start":"2023-01-12T18:00:00.000Z","title":"veniam"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-24T20:15:00.000Z","id":"lcyzz1b8iza0u2z8ta9","start":"2023-04-24T14:15:00.000Z","title":"amet"},{"category":"default","completed":true,"description":"random body","end":"2023-03-06T21:30:00.000Z","id":"lcyzz1b80edqilz9sl1s","start":"2023-03-06T16:30:00.000Z","title":"velit"},{"category":"default","completed":true,"description":"random body","end":"2023-03-28T21:00:00.000Z","id":"lcyzz1b8wr2qjtbt0hh","start":"2023-03-28T16:00:00.000Z","title":"numquam"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-10T19:30:00.000Z","id":"lcyzz1b8u04mxgxyxq","start":"2023-04-10T14:30:00.000Z","title":"velit"},{"category":"default","completed":true,"description":"random body","end":"2023-01-28T20:00:00.000Z","id":"lcyzz1b8z3kgiina9in","start":"2023-01-28T17:00:00.000Z","title":"velit"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-15T20:15:00.000Z","id":"lcyzz1b8tb7ankosvff","start":"2023-02-15T16:15:00.000Z","title":"veniam"},{"category":"default","completed":true,"description":"random body","end":"2023-02-02T22:15:00.000Z","id":"lcyzz1b8ygsv2ptyq6r","start":"2023-02-02T18:15:00.000Z","title":"quaerat"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-14T19:30:00.000Z","id":"lcyzz1b8vntxdf9lbx","start":"2023-02-14T16:30:00.000Z","title":"veniam"},{"category":"school","completed":true,"description":"random body","end":"2023-04-01T21:30:00.000Z","id":"lcyzz1b853wjfcgbrpw","start":"2023-04-01T17:30:00.000Z","title":"aut"},{"category":"default","completed":true,"description":"random body","end":"2023-01-31T19:00:00.000Z","id":"lcyzz1b80kz82u429wzd","start":"2023-01-31T17:00:00.000Z","title":"amet"},{"category":"misc","completed":true,"description":"random body","end":"2023-01-03T21:15:00.000Z","id":"lcyzz1b8dos82soa5vh","start":"2023-01-03T17:15:00.000Z","title":"quaerat"},{"category":"default","completed":true,"description":"random body","end":"2023-03-07T19:15:00.000Z","id":"lcyzz1b8kn7cvh91q0m","start":"2023-03-07T16:15:00.000Z","title":"quaerat"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-02T19:15:00.000Z","id":"lcyzz1b8w0y9p8mck9","start":"2023-04-02T17:15:00.000Z","title":"aut"},{"category":"default","completed":true,"description":"random body","end":"2023-03-12T18:15:00.000Z","id":"lcyzz1b86kzh4wmy8o","start":"2023-03-12T16:15:00.000Z","title":"aut"},{"category":"misc","completed":true,"description":"random body","end":"2023-04-12T20:30:00.000Z","id":"lcyzz1b88o12io1qctc","start":"2023-04-12T16:30:00.000Z","title":"aut"},{"category":"default","completed":true,"description":"random body","end":"2023-03-25T21:30:00.000Z","id":"lcyzz1b89mx9ijwsx7","start":"2023-03-25T17:30:00.000Z","title":"cupiditate"},{"category":"school","completed":true,"description":"random body","end":"2023-01-08T19:30:00.000Z","id":"lcyzz1b8litv2bbkrv","start":"2023-01-08T17:30:00.000Z","title":"quaerat"},{"category":"default","completed":true,"description":"random body","end":"2023-04-29T19:45:00.000Z","id":"lcyzz1b8idg7gmnjwi","start":"2023-04-29T15:45:00.000Z","title":"numquam"},{"category":"default","completed":true,"description":"random body","end":"2023-03-08T21:00:00.000Z","id":"lcyzz1b8lg81ocaz1ii","start":"2023-03-08T16:00:00.000Z","title":"numquam"},{"category":"school","completed":true,"description":"random body","end":"2023-04-24T20:30:00.000Z","id":"lcyzz1b80305v16m33b8","start":"2023-04-24T14:30:00.000Z","title":"sequi"},{"category":"default","completed":true,"description":"random body","end":"2023-02-01T19:15:00.000Z","id":"lcyzz1b8r24ytr1tg49","start":"2023-02-01T18:15:00.000Z","title":"quaerat"},{"category":"default","completed":true,"description":"random body","end":"2023-02-27T21:00:00.000Z","id":"lcyzz1b8k8c76lxdd0i","start":"2023-02-27T16:00:00.000Z","title":"velit"},{"category":"default","completed":true,"description":"random body","end":"2023-03-13T19:45:00.000Z","id":"lcyzz1b8gpy4rdrcvgt","start":"2023-03-13T14:45:00.000Z","title":"velit"},{"category":"misc","completed":true,"description":"random body","end":"2023-02-09T19:45:00.000Z","id":"lcyzz1b8rklmd4gcl4m","start":"2023-02-09T16:45:00.000Z","title":"sequi"},{"category":"misc","completed":true,"description":"random body","end":"2023-01-01T22:45:00.000Z","id":"lcyzz1b8q84d5wezdu8","start":"2023-01-01T18:45:00.000Z","title":"numquam"}]');

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _context_appContext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./context/appContext */ "./src/context/appContext.js");
/* harmony import */ var _context_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context/store */ "./src/context/store.js");
/* harmony import */ var _config_appDefaults__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config/appDefaults */ "./src/config/appDefaults.js");
/* harmony import */ var _config_renderViews__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config/renderViews */ "./src/config/renderViews.js");
/* harmony import */ var _styles_root_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./styles/root.css */ "./src/styles/root.css");
/* harmony import */ var _styles_header_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./styles/header.css */ "./src/styles/header.css");
/* harmony import */ var _styles_containers_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./styles/containers.css */ "./src/styles/containers.css");
/* harmony import */ var _styles_yearview_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./styles/yearview.css */ "./src/styles/yearview.css");
/* harmony import */ var _styles_monthview_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./styles/monthview.css */ "./src/styles/monthview.css");
/* harmony import */ var _styles_weekview_css__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./styles/weekview.css */ "./src/styles/weekview.css");
/* harmony import */ var _styles_dayview_css__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./styles/dayview.css */ "./src/styles/dayview.css");
/* harmony import */ var _styles_listview_css__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./styles/listview.css */ "./src/styles/listview.css");
/* harmony import */ var _styles_sidebar_css__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./styles/sidebar.css */ "./src/styles/sidebar.css");
/* harmony import */ var _styles_sbdatepicker_css__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./styles/sbdatepicker.css */ "./src/styles/sbdatepicker.css");
/* harmony import */ var _styles_aside_toast_css__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./styles/aside/toast.css */ "./src/styles/aside/toast.css");
/* harmony import */ var _styles_aside_goto_css__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./styles/aside/goto.css */ "./src/styles/aside/goto.css");
/* harmony import */ var _styles_aside_toggleForm_css__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./styles/aside/toggleForm.css */ "./src/styles/aside/toggleForm.css");
/* harmony import */ var _styles_aside_sidebarSubMenu_css__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./styles/aside/sidebarSubMenu.css */ "./src/styles/aside/sidebarSubMenu.css");
/* harmony import */ var _styles_aside_changeViewModule_css__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./styles/aside/changeViewModule.css */ "./src/styles/aside/changeViewModule.css");
/* harmony import */ var _styles_aside_editCategoryForm_css__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./styles/aside/editCategoryForm.css */ "./src/styles/aside/editCategoryForm.css");
/* harmony import */ var _styles_aside_form_css__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./styles/aside/form.css */ "./src/styles/aside/form.css");
/* harmony import */ var _styles_aside_timepicker_css__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./styles/aside/timepicker.css */ "./src/styles/aside/timepicker.css");
/* harmony import */ var _styles_datepicker_css__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./styles/datepicker.css */ "./src/styles/datepicker.css");
/* harmony import */ var _styles_aside_popup_css__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./styles/aside/popup.css */ "./src/styles/aside/popup.css");
/* harmony import */ var _styles_aside_entryOptions_css__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./styles/aside/entryOptions.css */ "./src/styles/aside/entryOptions.css");
/* harmony import */ var _styles_aside_info_css__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./styles/aside/info.css */ "./src/styles/aside/info.css");
/* harmony import */ var _styles_aside_shortcuts_css__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./styles/aside/shortcuts.css */ "./src/styles/aside/shortcuts.css");




/*!*************************************!*\
// (CSS) 
/*!*************************************!*/
// css variables and reset


// <main>








// </main>
// popup / modals













/*!*************************************!*/
// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
// NOTES;
// * finish settings
// * finish privacy,terms,notes

// FIX;
// * clicking on item in more modal and then escaping out of form causes error
// * validate .json files
// * top modal for day and week view
// * set min width for week view
// * set toast to be removed on window focus
// * time picker form

// localStorage.clear()
(0,_config_appDefaults__WEBPACK_IMPORTED_MODULE_2__["default"])(_context_appContext__WEBPACK_IMPORTED_MODULE_0__["default"], _context_store__WEBPACK_IMPORTED_MODULE_1__["default"]);
(0,_config_renderViews__WEBPACK_IMPORTED_MODULE_3__["default"])(_context_appContext__WEBPACK_IMPORTED_MODULE_0__["default"], _context_appContext__WEBPACK_IMPORTED_MODULE_0__.datepickerContext, _context_store__WEBPACK_IMPORTED_MODULE_1__["default"]);
})();

/******/ })()
;
//# sourceMappingURL=bundle.js.map