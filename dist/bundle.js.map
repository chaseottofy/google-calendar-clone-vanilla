{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://google-calendar-clone-vanilla/./src/components/forms/entryForm.js","webpack://google-calendar-clone-vanilla/./src/components/forms/formUtils.js","webpack://google-calendar-clone-vanilla/./src/components/forms/goto.js","webpack://google-calendar-clone-vanilla/./src/components/forms/setForm.js","webpack://google-calendar-clone-vanilla/./src/components/menus/datepicker.js","webpack://google-calendar-clone-vanilla/./src/components/menus/editCategory.js","webpack://google-calendar-clone-vanilla/./src/components/menus/entryOptions.js","webpack://google-calendar-clone-vanilla/./src/components/menus/header.js","webpack://google-calendar-clone-vanilla/./src/components/menus/shortcutsModal.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarCategories.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarDatepicker.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarFooter.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarSubMenu.js","webpack://google-calendar-clone-vanilla/./src/components/toastPopups/toast.js","webpack://google-calendar-clone-vanilla/./src/components/views/dayview.js","webpack://google-calendar-clone-vanilla/./src/components/views/listview.js","webpack://google-calendar-clone-vanilla/./src/components/views/monthview.js","webpack://google-calendar-clone-vanilla/./src/components/views/weekview.js","webpack://google-calendar-clone-vanilla/./src/components/views/yearview.js","webpack://google-calendar-clone-vanilla/./src/config/appDefaults.js","webpack://google-calendar-clone-vanilla/./src/config/renderViews.js","webpack://google-calendar-clone-vanilla/./src/config/setViews.js","webpack://google-calendar-clone-vanilla/./src/context/appContext.js","webpack://google-calendar-clone-vanilla/./src/context/constants.js","webpack://google-calendar-clone-vanilla/./src/context/store.js","webpack://google-calendar-clone-vanilla/./src/factory/entries.js","webpack://google-calendar-clone-vanilla/./src/factory/queries.js","webpack://google-calendar-clone-vanilla/./src/locales/en.js","webpack://google-calendar-clone-vanilla/./src/locales/kbDefault.js","webpack://google-calendar-clone-vanilla/./src/utilities/dateutils.js","webpack://google-calendar-clone-vanilla/./src/utilities/dragutils.js","webpack://google-calendar-clone-vanilla/./src/utilities/helpers.js","webpack://google-calendar-clone-vanilla/./src/utilities/svgs.js","webpack://google-calendar-clone-vanilla/./src/utilities/timeutils.js","webpack://google-calendar-clone-vanilla/webpack/bootstrap","webpack://google-calendar-clone-vanilla/webpack/runtime/define property getters","webpack://google-calendar-clone-vanilla/webpack/runtime/hasOwnProperty shorthand","webpack://google-calendar-clone-vanilla/webpack/runtime/make namespace object","webpack://google-calendar-clone-vanilla/./src/index.js"],"sourcesContent":["// render methods\r\nimport setViews from \"../../config/setViews\";\r\nimport setDatepicker from \"../menus/datepicker\";\r\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\r\nimport locales from \"../../locales/en\";\r\n\r\n// svgs\r\nimport { createCheckIcon } from \"../../utilities/svgs\";\r\n\r\n// popups confirmation\r\nimport createToast from \"../toastPopups/toast\";\r\n\r\n// event helpers\r\nimport {\r\n  getClosest,\r\n  placePopup,\r\n  throttle\r\n} from \"../../utilities/helpers\";\r\n\r\n// date / time helpers\r\nimport {\r\n  getDateForStore,\r\n  isBeforeDate,\r\n  isDate,\r\n  getDateFromAttribute,\r\n} from \"../../utilities/dateutils\";\r\n\r\n// main app sidebar\r\nconst sidebar = document.querySelector(\".sidebar\");\r\n// main app datepicker / overlay\r\nconst datepicker = document.querySelector(\".datepicker\");\r\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\");\r\n\r\n// form wrappers / overlay\r\nconst formOverlay = document.querySelector(\".form-overlay\");\r\nconst formModalOverlay = document.querySelector(\".form-modal-overlay\");\r\nconst entriesFormWrapper = document.querySelector(\".entries__form\");\r\nconst entriesForm = document.querySelector(\".entry-form\");\r\nconst entriesFormBody = document.querySelector(\".entries__form--body\");\r\n\r\n// title / description inputs\r\nconst titleInput = document.querySelector(\".form--body__title-input\");\r\nconst descriptionInput = document.querySelector(\".form--body__description-input\");\r\n\r\n// start date / time\r\n// end date / time\r\nconst startDateInput = document.querySelector(\".form--body-start__date\");\r\nconst endDateInput = document.querySelector(\".form--body-end__date\");\r\n\r\nconst startTimeInput = document.querySelector(\".form--body-start__time\");\r\nconst endTimeInput = document.querySelector(\".form--body-end__time\");\r\n\r\n// category modal\r\nconst categoryModal = document.querySelector(\".form--body__category-modal\");\r\nconst closeCategoryModalBtn = document.querySelector(\".close-options-floating__btn\");\r\nconst categoryModalIcon = document.querySelector(\".form--body__category-icon\");\r\nconst categoryModalWrapper = document.querySelector(\".form--body__category-modal--wrapper\");\r\nconst selectedCategoryWrapper = document.querySelector(\".form--body__category-modal--wrapper-selection\");\r\nconst selectedCategoryColor = document.querySelector(\".form--body__category-modal--wrapper__color\");\r\nconst selectedCategoryTitle = document.querySelector(\".form--body__category-modal--wrapper__title\");\r\n\r\n// reset / save btns\r\nconst formSubmitButton = document.querySelector(\".form--footer__button-save\");\r\n\r\n\r\n/**\r\n * list of methods -- I plan on cleaning the form up\r\n * \r\n * closetimepicker\r\n * setEndDateToNextDay\r\n * setEndDateToNextHour\r\n * createTimepicker\r\n * renderSidebarDatepickerForm\r\n * getDefaultCategory\r\n * setInitialFormCategory\r\n * setFormInitialValues\r\n * getDatePicker\r\n * handleOverlayClose\r\n * handleSetDate\r\n * getDateFormatViaAttr\r\n * getTimeFormatViaAttr\r\n * getDateTimeFormatted\r\n * configDatesForStore\r\n * checkFormValidity\r\n * removeErrorMessages\r\n * handleFormErrors\r\n * removeLastFormEntry\r\n * handleFormClose\r\n * handleSubmissionRender\r\n * handleFormSubmission\r\n * handleCategorySelection\r\n * closeCategoryModal\r\n * createCategoryOptions\r\n * openCategoryModal\r\n * dragFormAnywhere\r\n * delegateCategorySelection\r\n * handleTimepickerSetup\r\n * delegateEntryFormEvents\r\n * delegateFormKeyDown\r\n */\r\n\r\nexport default function setEntryForm(context, store, datepickerContext) {\r\n  let categories;\r\n  let activeCategories;\r\n  let currentComponent;\r\n  let [year, month, day] = [null, null, null];\r\n\r\n\r\n\r\n  function closetimepicker() {\r\n    const timep = document?.querySelector(\".timepicker\");\r\n    const timepoverlay = document?.querySelector(\".timepicker-overlay\");\r\n    const timepcontainer = document?.querySelector(\".timepicker-times__container\");\r\n    const activeTimeElement = document?.querySelector(\".active-form-time\");\r\n    if (timep) {\r\n      timep.scrollTo(0, 0);\r\n      timep.remove();\r\n      timepoverlay.remove();\r\n      timepoverlay.onclick = null;\r\n      timepcontainer.onclick = null;\r\n    }\r\n\r\n    if (activeTimeElement) {\r\n      activeTimeElement.classList.remove(\"active-form-time\");\r\n    }\r\n  }\r\n\r\n  function setEndDateToNextDay() {\r\n    const startCurrentDate = startDateInput.getAttribute(\"data-form-date\").split(\"-\").map(x => parseInt(x));\r\n    let nextDay = new Date(\r\n      startCurrentDate[0],\r\n      startCurrentDate[1],\r\n      startCurrentDate[2] + 1\r\n    );\r\n    let nextDayString = `${nextDay.getFullYear()}-${nextDay.getMonth()}-${nextDay.getDate()}`;\r\n    let nextDayTitle = locales.labels.monthsShort[nextDay.getMonth()] + \" \" + nextDay.getDate() + \", \" + nextDay.getFullYear();\r\n\r\n    endDateInput.setAttribute(\"data-form-date\", nextDayString);\r\n    endDateInput.textContent = nextDayTitle;\r\n    endTimeInput.setAttribute(\"data-form-time\", \"00:30\");\r\n    endTimeInput.textContent = \"12:30am\";\r\n  }\r\n\r\n  function setEndDateToNextHour() {\r\n    const startCurrentTime = startTimeInput.getAttribute(\"data-form-time\").split(\":\").map(x => parseInt(x));\r\n\r\n    let [newh, newm] = [\r\n      startCurrentTime[0] < 23 ? startCurrentTime[0] + 1 : 23,\r\n      startCurrentTime[0] < 23 ? startCurrentTime[1] : 45\r\n    ];\r\n\r\n    let nextHour = new Date(0, 0, 0, newh, newm);\r\n    let md = nextHour.getHours() > 12 ? \"pm\" : \"am\";\r\n\r\n    let nextHourString = `${nextHour.getHours()}:${nextHour.getMinutes()}`;\r\n    let nextHourTitle = `${+nextHour.getHours() % 12}:${+nextHour.getMinutes() == 0 ? \"00\" : nextHour.getMinutes()}${md}`;\r\n\r\n    endTimeInput.setAttribute(\"data-form-time\", nextHourString);\r\n    endTimeInput.textContent = nextHourTitle;\r\n  }\r\n\r\n  function createTimepicker(coords, currentTime, end, endLimit) {\r\n    const timepicker = document.createElement(\"div\");\r\n    timepicker.classList.add(\"timepicker\");\r\n    timepicker.style.top = `${coords.y}px`;\r\n    timepicker.style.left = `${coords.x}px`;\r\n\r\n    const timepickerOverlay = document.createElement(\"div\");\r\n    timepickerOverlay.classList.add(\"timepicker-overlay\");\r\n\r\n    const timepickerTimesContainer = document.createElement(\"div\");\r\n    timepickerTimesContainer.classList.add(\"timepicker-times__container\");\r\n\r\n    let hours = [\r\n      12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,\r\n      12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,\r\n    ];\r\n    let md = [\r\n      'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am',\r\n      'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm',\r\n    ];\r\n\r\n    let minutes = [\"00\", \"15\", \"30\", \"45\"];\r\n\r\n    let [currenthour, currentmin] = currentTime.split(\":\").map((x) => {\r\n      return parseInt(x);\r\n    });\r\n\r\n    let currentmd = currenthour > 12 ? \"pm\" : \"am\";\r\n\r\n    let isSameDay = startDateInput.getAttribute(\"data-form-date\") === endDateInput.getAttribute(\"data-form-date\");\r\n    let shouldTestReset = false;\r\n\r\n    if (end && currenthour === 23 && currentmin === 45) {\r\n      shouldTestReset = true;\r\n    }\r\n\r\n    currenthour > 12 ? currenthour -= 12 : currenthour;\r\n\r\n    if (endLimit !== null && isSameDay) {\r\n      let [h, m] = endLimit.split(\":\").map(x => parseInt(x));\r\n      if (shouldTestReset) {\r\n        if (h === 23 && m >= 15) {\r\n          setEndDateToNextDay();\r\n          closetimepicker();\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (h === 23) {\r\n        if (m === 45) {\r\n          setEndDateToNextDay();\r\n        } else {\r\n          hours = [12];\r\n          md = ['pm'];\r\n          m = m.slice(-1);\r\n        }\r\n      } else {\r\n        hours = hours.slice(+h + 1, hours.length);\r\n        md = md.slice(+h + 1, md.length);\r\n      }\r\n    }\r\n\r\n    let count = 0;\r\n    let si;\r\n    hours.forEach((hour, houridx) => {\r\n      minutes.forEach(min => {\r\n        const timepickerTime = document.createElement(\"div\");\r\n        timepickerTime.classList.add(\"timepicker-time\");\r\n        let attr;\r\n        if (md[houridx] === \"am\") {\r\n          if (+hour === 12) {\r\n            attr = `00:${min}`;\r\n          } else {\r\n            attr = `${hour}:${min}`;\r\n          }\r\n        } else if (md[houridx] === \"pm\") {\r\n          if (hour === 12) {\r\n            attr = `12:${min}`;\r\n          } else {\r\n            attr = `${hour + 12}:${min}`;\r\n          }\r\n        }\r\n\r\n        timepickerTime.setAttribute(\"data-tp-time\", attr);\r\n        timepickerTime.textContent = `${hour}:${min}${md[houridx]}`;\r\n        count++;\r\n\r\n        if (!end) {\r\n          if (+hour == +currenthour && +min == +currentmin) {\r\n            if (currentmd === \"pm\" && md[houridx] === \"pm\") {\r\n              timepickerTime.classList.add(\"timepicker-time--selected\");\r\n              si = count;\r\n            } else if (currentmd === \"am\" && md[houridx] === \"am\") {\r\n              timepickerTime.classList.add(\"timepicker-time--selected\");\r\n              si = count;\r\n            }\r\n          }\r\n        }\r\n\r\n        timepickerTimesContainer.appendChild(timepickerTime);\r\n      });\r\n    });\r\n\r\n\r\n    function setnewtime(e) {\r\n      const time = e.target.textContent;\r\n      let attr = e.target.getAttribute(\"data-tp-time\");\r\n\r\n      if (!end) {\r\n        startTimeInput.textContent = time;\r\n        startTimeInput.setAttribute(\"data-form-time\", attr);\r\n\r\n        let [testhour, testminute] = attr.split(\":\").map(x => +x);\r\n        let [endTestHour, endTestMinute] = endTimeInput.getAttribute(\"data-form-time\").split(\":\").map(x => parseInt(x));\r\n\r\n        if (isSameDay) {\r\n          if (testhour === 23 && testminute === 45) {\r\n            setEndDateToNextDay();\r\n          } else {\r\n            if (testhour > endTestHour || (testhour === endTestHour && testminute >= endTestMinute)) {\r\n              setEndDateToNextHour();\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        endTimeInput.textContent = time;\r\n        endTimeInput.setAttribute(\"data-form-time\", attr);\r\n      }\r\n      closetimepicker();\r\n    }\r\n\r\n    const delegateNewTime = (e) => {\r\n      if (getClosest(e, \".timepicker-time\")) {\r\n        setnewtime(e);\r\n        return;\r\n      }\r\n    };\r\n\r\n    timepicker.appendChild(timepickerTimesContainer);\r\n    const [x, y] = coords;\r\n    timepicker.setAttribute(\"style\", `top:${y}px; left:${x}px;`);\r\n    document.body.prepend(timepickerOverlay, timepicker);\r\n    timepickerOverlay.onclick = closetimepicker;\r\n    timepickerTimesContainer.onclick = delegateNewTime;\r\n    if (!end) {\r\n      if (si > 0) {\r\n        timepicker.scrollTo(0, parseInt(si * 40) - 40);\r\n      } else {\r\n        timepicker.scrollTo(0, 0);\r\n      }\r\n    } else {\r\n      timepicker.scrollTo(0, 0);\r\n    }\r\n  }\r\n\r\n  function renderSidebarDatepickerForm() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      context.setDateSelected(day);\r\n      setSidebarDatepicker(context, store, datepickerContext);\r\n    }\r\n  }\r\n\r\n  function getDatePicker(year, month, day) {\r\n    datepickeroverlay.classList.remove(\"hide-datepicker-overlay\");\r\n    datepicker.classList.remove(\"hide-datepicker\");\r\n    store.addActiveOverlay(\"hide-datepicker-overlay\");\r\n    datepickerContext.setDate(year, month, day);\r\n    datepickerContext.setDateSelected(day);\r\n    setDatepicker(context, store, datepickerContext, \"form\");\r\n  }\r\n\r\n  function handleSetDate(e, type) {\r\n    if (type === \"start\") {\r\n      startDateInput.setAttribute(\"class\", \"form--body-start__date active-form-date\");\r\n      endDateInput.setAttribute(\"class\", \"form--body-end__date inactive-form-date\");\r\n    } else {\r\n      startDateInput.setAttribute(\"class\", \"form--body-start__date inactive-form-date\");\r\n      endDateInput.setAttribute(\"class\", \"form--body-end__date active-form-date\");\r\n    }\r\n\r\n    const [y, m, d] = getDateFromAttribute(e.target, \"data-form-date\");\r\n    const rect = e.target.getBoundingClientRect();\r\n    const datepickerLeft = parseInt(rect.left);\r\n    const bott = parseInt(rect.bottom);\r\n    let datepickerTop = parseInt(rect.top);\r\n\r\n    if (type === \"end\") {\r\n      datepickerTop -= 40;\r\n    }\r\n\r\n    if (window.innerHeight - 216 <= bott) {\r\n      datepickerTop = window.innerHeight - 242;\r\n    }\r\n\r\n    datepicker.setAttribute(\"style\", `top:${datepickerTop}px;left:${datepickerLeft}px;`);\r\n    getDatePicker(y, m, d);\r\n  }\r\n\r\n  function getDateFormatViaAttr(dateAttr) {\r\n    const [year, month, day] = dateAttr.split(\"-\").map(x => parseInt(x));\r\n    return new Date(year, month, day);\r\n  }\r\n\r\n  function getTimeFormatViaAttr(timeAttr) {\r\n    return timeAttr.split(\":\").map(x => parseInt(x));\r\n  }\r\n\r\n  function getDateTimeFormatted(dateAttr, timeAttr) {\r\n    dateAttr.setHours(timeAttr[0]);\r\n    dateAttr.setMinutes(timeAttr[1]);\r\n    dateAttr.setSeconds(0);\r\n    return dateAttr;\r\n  }\r\n\r\n  function configDatesForStore() {\r\n    let startDateAttr = startDateInput.getAttribute(\"data-form-date\");\r\n    let startDate = getDateFormatViaAttr(startDateAttr);\r\n    let startTimeAttr = startTimeInput.getAttribute(\"data-form-time\");\r\n    let [starthour, startminute] = getTimeFormatViaAttr(startTimeAttr);\r\n\r\n    let endDateAttr = endDateInput.getAttribute(\"data-form-date\");\r\n    let endDate = getDateFormatViaAttr(endDateAttr);\r\n    let endTimeAttr = endTimeInput.getAttribute(\"data-form-time\");\r\n    let [endhour, endminute] = getTimeFormatViaAttr(endTimeAttr);\r\n\r\n    return [\r\n      getDateTimeFormatted(startDate, [starthour, startminute]),\r\n      getDateTimeFormatted(endDate, [endhour, endminute])\r\n    ];\r\n  }\r\n\r\n  function checkFormValidity(title, description, category, startDate, endDate) {\r\n    // all inputs are valid by default \r\n    // if any input becomes invalid, only the error message for that input will be returned through a error object defined below\r\n    const status = {\r\n      title: true,\r\n      description: true,\r\n      startDate: true,\r\n      endDate: true,\r\n      valid: true,\r\n    };\r\n    /* ************************ */\r\n    /*  TITLE VALIDATION CHECK */\r\n    if (typeof title === \"string\") {\r\n      const titlecheck = title.trim().replace(/[^a-zA-Z0-9\\s_-]+|\\s{2,}/g, ' ');\r\n      if (titlecheck.length > 50) {\r\n        status.title = \"Title must be Less than 50 characters\";\r\n        status.valid = false;\r\n      } else if (titlecheck.length === 0) {\r\n        status.title = \"Title cannot be empty\";\r\n        status.valid = false;\r\n      }\r\n    } else {\r\n      status.title = \"Title cannot be empty\";\r\n    }\r\n    /* ***************************** */\r\n    /*  DESCRIPTION VALIDATION CHECK */\r\n    if (description.length >= 200) {\r\n      status.description = \"Description must be less than 200 characters\";\r\n      status.valid = false;\r\n    }\r\n    /* ************************** */\r\n    /*  CATEGORY VALIDATION CHECK */\r\n    if (!store.hasCtg(category) || !category) {\r\n      categoryModalWrapper.setAttribute(\"data-form-category\", \"default\");\r\n    }\r\n    /* **************************** */\r\n    /*  START DATE VALIDATION CHECK */\r\n    if (!startDate) {\r\n      status.startDate = \"Start date cannot be empty\";\r\n      status.valid = false;\r\n    } else if (!isDate(startDate)) {\r\n      status.startDate = \"Start date is not valid\";\r\n      status.valid = false;\r\n    }\r\n    /* **************************** */\r\n    /*  END DATE VALIDATION CHECK */\r\n    if (!endDate) {\r\n      status.endDate = \"End date cannot be empty\";\r\n      status.valid = false;\r\n    } else if (!isDate(endDate)) {\r\n      status.endDate = \"End date is not valid\";\r\n      status.valid = false;\r\n    } else if (!isBeforeDate(startDate, endDate)) {\r\n      status.endDate = \"End date must be after start date\";\r\n      status.valid = false;\r\n    }\r\n    /* ************* */\r\n    /*  congregate any errors  */\r\n    let errors = {};\r\n    let hasErrors;\r\n    for (let key in status) {\r\n      if (status[key] !== true) {\r\n        errors[key] = status[key];\r\n        hasErrors = true;\r\n      }\r\n    }\r\n\r\n    if (hasErrors) {\r\n      return errors;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  function removeErrorMessages(e) {\r\n    if (e.target.classList.contains(\"form-input-error\")) {\r\n      e.preventDefault();\r\n      e.target.classList.remove(\"form-input-error\");\r\n      e.target.removeAttribute(\"data-form-error-message\");\r\n      e.target.firstElementChild.focus();\r\n    } else if (e.target.classList.contains(\"form-input-error__custom-input\")) {\r\n      e.target.classList.remove(\"form-input-error__custom-input\");\r\n      e.target.removeAttribute(\"data-form-error-message\");\r\n      e.target.focus();\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {object} errorMessages object key represents the input name and the value represents the string error message\r\n   * \r\n   * Use object key to get the input HTML element class name and append the error message as a data attribute to the input element using the err object.\r\n   * \r\n   * Set the submit button to disabled until all errors are resolved\r\n   * \r\n   */\r\n  function handleFormErrors(errorMessages) {\r\n    titleInput.blur();\r\n\r\n    const components = {\r\n      title: titleInput,\r\n      description: descriptionInput,\r\n      startDate: startDateInput,\r\n      endDate: endDateInput,\r\n    };\r\n    const err = {\r\n      inputAttr: \"data-form-error-message\",\r\n      inputClass: \"form-input-error\",\r\n      svgClass: \"form-input-error__custom-input\",\r\n      submitbtn: \"form-error__submit-btn\"\r\n    };\r\n\r\n    for (let key in errorMessages) {\r\n      if (components[key]) {\r\n        if (key === \"title\" || key === \"description\") {\r\n          components[key].parentElement.setAttribute(err.inputAttr, errorMessages[key]);\r\n          components[key].parentElement.classList.add(err.inputClass);\r\n        } else {\r\n          components[key].setAttribute(err.inputAttr, errorMessages[key]);\r\n          components[key].classList.add(err.svgClass);\r\n          const svg = components[key].parentElement.parentElement.firstElementChild.firstElementChild;\r\n          svg.style.fill = \"var(--red2)\";\r\n          setTimeout(() => { svg.style.fill = \"var(--white3)\"; }, 1000);\r\n        }\r\n      }\r\n    }\r\n\r\n    formSubmitButton.classList.add(err.submitbtn);\r\n    setTimeout(() => { formSubmitButton.classList.remove(err.submitbtn); }, 1000);\r\n  }\r\n\r\n  function removeLastFormEntry() {\r\n    store.removeLastEntry();\r\n    setViews(currentComponent, context, store, datepickerContext);\r\n  }\r\n\r\n  function undoLastFormEdit(id, entryBefore) {\r\n    const start = new Date(entryBefore.start);\r\n    store.updateEntry(\r\n      id,\r\n      {\r\n        category: entryBefore.category,\r\n        completed: entryBefore.completed,\r\n        description: entryBefore.description,\r\n        end: new Date(entryBefore.end),\r\n        id: id,\r\n        start: start,\r\n        title: entryBefore.title,\r\n      }\r\n    );\r\n\r\n    context.setDate(start.getFullYear(), start.getMonth(), start.getDate());\r\n    context.setDateSelected(start.getDate());\r\n    setViews(currentComponent, context, store, datepickerContext);\r\n  }\r\n\r\n  function clearAllErrors() {\r\n    const inputErrElements = document?.querySelectorAll(\".form-input-error\");\r\n    if (inputErrElements) {\r\n      inputErrElements.forEach((el) => {\r\n        el.classList.remove(\"form-input-error\");\r\n        el.removeAttribute(\"data-form-error-message\");\r\n      });\r\n    }\r\n  }\r\n\r\n  function handleFormClose(e) {\r\n    if (!datepicker.classList.contains(\"hide-datepicker\")) {\r\n      datepicker.classList.add(\"hide-datepicker\");\r\n      datepickeroverlay.classList.add(\"hide-datepicker-overlay\");\r\n    }\r\n\r\n    clearAllErrors();\r\n\r\n    formOverlay.onmousedown = null;\r\n    entriesFormWrapper.onmousedown = null;\r\n    document.removeEventListener(\"keydown\", delegateFormKeyDown);\r\n    entriesFormWrapper.classList.add(\"hide-form\");\r\n    formOverlay.classList.add(\"hide-form-overlay\");\r\n    store.removeActiveOverlay(\"hide-datepicker-overlay\");\r\n    store.removeActiveOverlay(\"hide-form-overlay\");\r\n    entriesForm.reset();\r\n    descriptionInput.value = \"\";\r\n    titleInput.value = \"\";\r\n\r\n    if (categoryModalWrapper.classList.contains(\"category-modal-open\")) {\r\n      closeCategoryModal();\r\n    }\r\n\r\n    const resetCurrentView = store.getFormResetHandle(currentComponent);\r\n    if (resetCurrentView !== null) {\r\n      resetCurrentView();\r\n      store.setFormResetHandle(currentComponent, null);\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  function handleSubmissionRender(start, type, id, entryBefore) {\r\n    context.setDate(start.getFullYear(), start.getMonth(), start.getDate());\r\n    context.setDateSelected(start.getDate());\r\n    setViews(currentComponent, context, store, datepickerContext);\r\n\r\n    if (store.getDayEntriesArray(context.getDate()).length <= 1) {\r\n      renderSidebarDatepickerForm();\r\n    }\r\n\r\n    handleFormClose();\r\n\r\n    // if the submission type is create, pass a callback function to allow user to remove the last entry if they wish\r\n    if (type === \"create\") {\r\n      setTimeout(() => {\r\n        createToast(\"Event created\", removeLastFormEntry);\r\n      }, 4);\r\n    } else {\r\n      // if the submission type is edit, pass a callback function to allow user to undo the last edit if they wish\r\n\r\n      // determine whether the entry was edited or not\r\n      const shouldCreateToast = store.compareEntries(\r\n        entryBefore,\r\n        store.getEntry(id)\r\n      );\r\n\r\n      if (!shouldCreateToast) {\r\n        const handleUndoLastEdit = () => {\r\n          undoLastFormEdit(id, entryBefore);\r\n        };\r\n        setTimeout(() => {\r\n          createToast(\"Event updated\", handleUndoLastEdit);\r\n        }, 4);\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleFormSubmission(e) {\r\n    e.preventDefault();\r\n    const title = titleInput.value;\r\n    const description = descriptionInput.value;\r\n    const [startDate, endDate] = configDatesForStore();\r\n    const category = categoryModalWrapper.getAttribute(\"data-form-category\");\r\n\r\n    // if errors exist, validityStatus will represent an object with keys that match the input names, and values that represent the error messages as strings;\r\n    // note that two types of submissions are possible: edit and create\r\n    const validityStatus = checkFormValidity(\r\n      title, description, category, startDate, endDate,\r\n    );\r\n\r\n    if (validityStatus !== true) {\r\n      handleFormErrors(validityStatus);\r\n      return;\r\n    } else {\r\n      // submission : edit\r\n      if (formSubmitButton.getAttribute(\"data-form-action\") === \"edit\") {\r\n        const id = formSubmitButton.getAttribute(\"data-form-entry-id\");\r\n        const entryBefore = JSON.parse(JSON.stringify(store.getEntry(id)));\r\n\r\n        store.updateEntry(\r\n          id,\r\n          {\r\n            category: category,\r\n            completed: false,\r\n            description: description,\r\n            end: endDate,\r\n            id: id,\r\n            start: startDate,\r\n            title: title,\r\n          }\r\n        );\r\n\r\n        handleSubmissionRender(\r\n          startDate, 'edit', id, entryBefore\r\n        );\r\n        return;\r\n      } else {\r\n        // submission : create\r\n        store.createEntry(\r\n          category, false, description, endDate, startDate, title\r\n        );\r\n        handleSubmissionRender(\r\n          startDate, 'create', store.getLastEntryId(), null\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleCategorySelection(e) {\r\n    const title = e.target.getAttribute(\"data-form-category-title\");\r\n    const color = e.target.getAttribute(\"data-form-category-color\");\r\n    categoryModalWrapper.setAttribute(\"data-form-category\", title);\r\n    categoryModalIcon.firstElementChild.setAttribute(\"fill\", color);\r\n\r\n    selectedCategoryWrapper.style.backgroundColor = color;\r\n    selectedCategoryColor.style.backgroundColor = color;\r\n    selectedCategoryTitle.textContent = title;\r\n    closeCategoryModal();\r\n  }\r\n\r\n  function closeCategoryModal() {\r\n    closeCategoryModalBtn.style.display = \"none\";\r\n    categoryModalWrapper.classList.remove(\"category-modal-open\");\r\n    categoryModal.classList.add(\"hide-form-category-modal\");\r\n    selectedCategoryWrapper.classList.remove(\"hide-form-category-selection\");\r\n    formModalOverlay.classList.add(\"hide-form-overlay\");\r\n    categoryModalWrapper.removeAttribute(\"style\");\r\n    categoryModal.innerText = \"\";\r\n  }\r\n\r\n  function createCategoryOptions(parent, categories) {\r\n    const currentCategory = categoryModalWrapper.getAttribute(\"data-form-category\");\r\n\r\n    categories.forEach(([key, value]) => {\r\n      const color = value.color;\r\n      const categoryWrapper = document.createElement(\"div\");\r\n      categoryWrapper.classList.add(\"category-modal--category\");\r\n      categoryWrapper.style.width = \"200px\";\r\n\r\n      categoryWrapper.style.backgroundColor = color;\r\n      categoryWrapper.setAttribute(\"data-form-category-title\", key);\r\n      categoryWrapper.setAttribute(\"data-form-category-color\", color);\r\n\r\n      const categoryDisplayColor = document.createElement(\"div\");\r\n      categoryDisplayColor.classList.add(\"category-modal--category-color\");\r\n      categoryDisplayColor.style.backgroundColor = color;\r\n\r\n      const categoryTitle = document.createElement(\"div\");\r\n      categoryTitle.classList.add(\"category-modal--category-title\");\r\n      categoryTitle.textContent = key;\r\n\r\n      if (key === currentCategory) {\r\n        const checkIcon = createCheckIcon(\"var(--white4)\");\r\n        const checkIconWrapper = document.createElement(\"div\");\r\n        checkIconWrapper.classList.add(\"category-modal--category-check\");\r\n        checkIconWrapper.appendChild(checkIcon);\r\n\r\n        categoryWrapper.append(\r\n          categoryDisplayColor,\r\n          categoryTitle,\r\n          checkIconWrapper\r\n        );\r\n\r\n      } else {\r\n        categoryWrapper.append(categoryDisplayColor, categoryTitle);\r\n      }\r\n\r\n      parent.appendChild(categoryWrapper);\r\n    });\r\n  }\r\n\r\n  function openCategoryModal(e, categories) {\r\n    const length = categories.length;\r\n    if (length === 1) return;\r\n\r\n    closeCategoryModalBtn.removeAttribute(\"style\");\r\n    setTimeout(() => {\r\n      entriesFormBody.scrollTo({\r\n        top: entriesFormBody.scrollHeight,\r\n        behavior: \"smooth\"\r\n      });\r\n    }, 5);\r\n\r\n    if (length >= 5) {\r\n      closeCategoryModalBtn.setAttribute(\"style\", `top: -100px`);\r\n    } else {\r\n      closeCategoryModalBtn.setAttribute(\"style\", `top: ${(length * 20) * -1}px`);\r\n    }\r\n\r\n    categoryModalWrapper.classList.add(\"category-modal-open\");\r\n    if (length < 5) {\r\n      categoryModalWrapper.style.height = `${length * 32}px`;\r\n    } else {\r\n      categoryModalWrapper.style.height = \"160px\";\r\n    }\r\n\r\n    selectedCategoryWrapper.classList.add(\"hide-form-category-selection\");\r\n    categoryModal.classList.remove(\"hide-form-category-modal\");\r\n    categoryModal.style.height = `${length * 32}px`;\r\n    categoryModal.innerText = \"\";\r\n    createCategoryOptions(categoryModal, categories);\r\n    formModalOverlay.classList.remove(\"hide-form-overlay\");\r\n  }\r\n\r\n  function dragFormAnywhere(e) {\r\n    const closeBtn = document.querySelector(\".form--header__icon-close\");\r\n    const rect = entriesFormWrapper.getBoundingClientRect();\r\n\r\n    // get current left / top form position\r\n    const [currleft, currtop] = [\r\n      parseInt(rect.left),\r\n      parseInt(rect.top),\r\n    ];\r\n\r\n\r\n    entriesFormWrapper.style.margin = \"0\";\r\n    entriesFormWrapper.style.opacity = \"0.8\";\r\n    entriesFormWrapper.style.userSelect = \"none\";\r\n    entriesFormWrapper.style.top = currtop + \"px\";\r\n    entriesFormWrapper.style.left = currleft + \"px\";\r\n    entriesFormWrapper.style.bottom = \"0\";\r\n    entriesFormWrapper.style.right = \"0\";\r\n    closeBtn.style.pointerEvents = \"none\";\r\n    entriesForm.style.pointerEvents = \"none\";\r\n\r\n    let [leftBefore, topBefore] = [e.clientX, e.clientY];\r\n    const [winH, winW] = [window.innerHeight, window.innerWidth];\r\n\r\n    function mousemove(e) {\r\n      let [leftAfter, topAfter] = [\r\n        leftBefore - e.clientX, topBefore - e.clientY\r\n      ];\r\n\r\n      leftBefore = e.clientX;\r\n      topBefore = e.clientY;\r\n\r\n      if (entriesFormWrapper.offsetTop < 0) {\r\n        entriesFormWrapper.style.top = \"0px\";\r\n      }\r\n\r\n      if (entriesFormWrapper.offsetLeft < 0) {\r\n        entriesFormWrapper.style.left = \"0px\";\r\n      }\r\n\r\n      if ((entriesFormWrapper.offsetLeft + entriesFormWrapper.offsetWidth) > winW) {\r\n        entriesFormWrapper.style.left = winW - entriesFormWrapper.offsetWidth + \"px\";\r\n      }\r\n\r\n      if ((entriesFormWrapper.offsetTop + entriesFormWrapper.offsetHeight) > winH) {\r\n        entriesFormWrapper.style.top = winH - entriesFormWrapper.offsetHeight + \"px\";\r\n      }\r\n\r\n      entriesFormWrapper.style.top = entriesFormWrapper.offsetTop - topAfter + \"px\";\r\n      entriesFormWrapper.style.left = entriesFormWrapper.offsetLeft - leftAfter + \"px\";\r\n    }\r\n\r\n    const throttlemove = throttle(mousemove, 10);\r\n\r\n    function mouseup() {\r\n      entriesFormWrapper.style.opacity = \"1\";\r\n      entriesFormWrapper.style.userSelect = \"all\";\r\n      closeBtn.removeAttribute(\"style\");\r\n      entriesForm.removeAttribute(\"style\");\r\n      document.removeEventListener(\"mousemove\", throttlemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    }\r\n\r\n    document.addEventListener(\"mousemove\", throttlemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  function handleTimepickerSetup(target) {\r\n    const rect = target.getBoundingClientRect();\r\n    let [x, y] = placePopup(\r\n      180,\r\n      200,\r\n      [parseInt(rect.left), parseInt(rect.top)],\r\n      [window.innerWidth, window.innerHeight],\r\n      false,\r\n    );\r\n    return [x, y];\r\n  }\r\n\r\n  function delegateEntryFormEvents(e) {\r\n    // header\r\n    const dragHeader = getClosest(e, \".form-header--dragarea\");\r\n    const closeicon = getClosest(e, \".form--header__icon-close\");\r\n\r\n    // date / time inputs\r\n    const startdate = getClosest(e, \".form--body-start__date\");\r\n    const starttime = getClosest(e, \".form--body-start__time\");\r\n    const enddate = getClosest(e, \".form--body-end__date\");\r\n    const endtime = getClosest(e, \".form--body-end__time\");\r\n\r\n    // category selection\r\n    const getCategoryModal = getClosest(e, \".form--body__category-modal\");\r\n    const category = getClosest(e, \".form--body__category-modal--wrapper-selection\");\r\n    const getcloseCategoryModalBtn = getClosest(e, \".close-options-floating__btn\");\r\n    const getCategoryModalOverlay = getClosest(e, \".form-modal-overlay\");\r\n\r\n    // error msg : <input> / <textarea>\r\n    const inputError = getClosest(e, \".form-input-error\");\r\n\r\n    // error msg : custom inputs (date / time)\r\n    const customInputError = getClosest(e, \".form-input-error__custom-input\");\r\n\r\n    // form footer buttons\r\n    const resetbtn = getClosest(e, \".form--footer__button-cancel\");\r\n    const submitbtn = getClosest(e, \".form--footer__button-save\");\r\n\r\n    if (dragHeader) {\r\n      if (window.innerWidth < 500 || window.innerHeight < 500) {\r\n        return;\r\n      } else\r\n        dragFormAnywhere(e);\r\n      return;\r\n    }\r\n\r\n    if (closeicon) {\r\n      handleFormClose(e);\r\n      return;\r\n    }\r\n\r\n    if (startdate) {\r\n      handleSetDate(e, \"start\");\r\n      return;\r\n    }\r\n\r\n    if (starttime) {\r\n      e.target.classList.add(\"active-form-time\");\r\n      createTimepicker(\r\n        handleTimepickerSetup(e.target),\r\n        startTimeInput.getAttribute(\"data-form-time\"),\r\n        false,\r\n        null\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (enddate) {\r\n      handleSetDate(e, \"end\");\r\n      return;\r\n    }\r\n\r\n    if (endtime) {\r\n      e.target.classList.add(\"active-form-time\");\r\n      createTimepicker(\r\n        handleTimepickerSetup(e.target),\r\n        endTimeInput.getAttribute(\"data-form-time\"),\r\n        true,\r\n        startTimeInput.getAttribute(\"data-form-time\"),\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (getCategoryModal) {\r\n      if (categoryModal.childElementCount > 0) {\r\n        handleCategorySelection(e);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (category) {\r\n      openCategoryModal(e, categories);\r\n      return;\r\n    }\r\n\r\n    if (getcloseCategoryModalBtn) {\r\n      closeCategoryModal();\r\n      return;\r\n    }\r\n\r\n    if (getCategoryModalOverlay) {\r\n      closeCategoryModal();\r\n      return;\r\n    }\r\n\r\n    if (inputError) {\r\n      removeErrorMessages(e);\r\n      return;\r\n    }\r\n\r\n    if (customInputError) {\r\n      removeErrorMessages(e);\r\n      return;\r\n    }\r\n\r\n    if (resetbtn) {\r\n      entriesForm.reset();\r\n      clearAllErrors();\r\n      setFormInitialValues();\r\n      closeCategoryModal();\r\n      return;\r\n    }\r\n\r\n    if (submitbtn) {\r\n      handleFormSubmission(e);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function delegateFormKeyDown(e) {\r\n    if (!datepicker.classList.contains(\"hide-datepicker\")) {\r\n      return;\r\n    } else {\r\n      const timep = document?.querySelector(\".timepicker\");\r\n      const catsAct = document?.querySelector(\".hide-form-category-modal\");\r\n\r\n      if (e.key === \"Escape\") {\r\n        if (timep !== null) {\r\n          closetimepicker();\r\n        } else if (catsAct === null) {\r\n          closeCategoryModal();\r\n        } else {\r\n          handleFormClose(e);\r\n        }\r\n      }\r\n\r\n      if (e.key === \"Enter\") {\r\n        handleFormSubmission(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  function setFormInitialValues() {\r\n    // variable setup\r\n    categories = Object.entries(store.getAllCtg());\r\n    activeCategories = store.getActiveCategoriesKeyPair();\r\n    currentComponent = context.getComponent();\r\n    year = context.getYear();\r\n    month = context.getMonth();\r\n    day = context.getDay();\r\n\r\n    // ****************************************** //\r\n    // title / description\r\n    descriptionInput.value = \"\";\r\n    titleInput.blur();\r\n    titleInput.value = \"\";\r\n    setTimeout(() => {\r\n      titleInput.focus();\r\n    }, 10);\r\n\r\n    // ****************************************** //\r\n    // category setup \r\n    setInitialFormCategory();\r\n\r\n    // ****************************************** // \r\n    // date picker setup\r\n    datepickerContext.setDate(year, month, day);\r\n    context.setDateSelected(day);\r\n\r\n    // ****************************************** // \r\n    // date inputs setup\r\n    const dateSelected = `${context.getMonthName().slice(0, 3)} ${day}, ${year}`;\r\n    // DATES : START/END\r\n    startDateInput.textContent = dateSelected;\r\n    startDateInput.setAttribute(\"data-form-date\", getDateForStore(context.getDate()));\r\n    endDateInput.textContent = dateSelected;\r\n    endDateInput.setAttribute(\"data-form-date\", getDateForStore(context.getDate()));\r\n\r\n    // TIME : START/END \r\n    const temphours = new Date().getHours();\r\n    startTimeInput.setAttribute(\"data-form-time\", `${temphours}:00`);\r\n    endTimeInput.setAttribute(\"data-form-time\", `${temphours}:30`);\r\n    const getTimeAndMd = (hour, min) => {\r\n      return `${+hour === 0 || +hour === 12 ? 12 : hour % 12}:${min}${hour < 12 ? \"am\" : \"pm\"}`;\r\n    };\r\n    startTimeInput.textContent = getTimeAndMd(temphours, \"00\");\r\n    endTimeInput.textContent = getTimeAndMd(temphours, \"30\");\r\n\r\n    // ****************************************** // \r\n    // submit button setup \r\n    formSubmitButton.setAttribute(\"data-form-action\", \"create\");\r\n    formSubmitButton.setAttribute(\"data-form-id\", \"\");\r\n\r\n    // ****************************************** // \r\n    // approve form event delegation\r\n    formOverlay.onmousedown = handleFormClose;\r\n    entriesFormWrapper.onmousedown = delegateEntryFormEvents;\r\n    document.addEventListener(\"keydown\", delegateFormKeyDown);\r\n    // ****************************************** // \r\n  }\r\n\r\n  function getDefaultCategory() {\r\n    if (activeCategories.length === 0) {\r\n      return [categories[0][0], categories[0][1].color];\r\n    } else {\r\n      return [activeCategories[0][0], activeCategories[0][1].color];\r\n    }\r\n  }\r\n\r\n  function setInitialFormCategory() {\r\n    let [categoryTitle, categoryColor] = getDefaultCategory();\r\n    categoryModalWrapper.setAttribute(\"data-form-category\", categoryTitle);\r\n\r\n    selectedCategoryWrapper.style.backgroundColor = categoryColor;\r\n    selectedCategoryTitle.textContent = categoryTitle;\r\n    selectedCategoryColor.style.backgroundColor = categoryColor;\r\n    categoryModalIcon.firstElementChild.setAttribute(\"fill\", categoryColor);\r\n  }\r\n\r\n  setFormInitialValues();\r\n}","import locales from \"../../locales/en\";\r\nimport { placePopup } from \"../../utilities/helpers\";\r\nclass FormConfig {\r\n  constructor () {\r\n    this.monthNames = locales.labels.monthsShort;\r\n    this.headerOffset = document.querySelector(\".header\");\r\n    this.form = document.querySelector(\".entries__form\");\r\n    this.formBody = document.querySelector(\".entries__form--body\");\r\n    this.formTitleDescription = document.querySelectorAll(\".form-body-single\");\r\n    this.formStartEndCtg = document.querySelectorAll(\".form-body-double\");\r\n    this.formsubmitbtn = document.querySelector(\".form--footer__button-save\");\r\n    this.formCategoryWrapper = document.querySelector(\".form--body__category-modal--wrapper\");\r\n    this.formCategorySelect = document.querySelector(\".form--body__category-modal--wrapper-selection\");\r\n    this.formCategoryWrapperIcon = document.querySelector(\".form--body__category-modal--wrapper__color\");\r\n    this.formCategoryTitle = document.querySelector(\".form--body__category-modal--wrapper__title\");\r\n    this.formCatgoryIcon = document.querySelector(\".form--body__category-icon\");\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {number} eX element left\r\n   * @param {number} eY element top\r\n   * @param {boolean} shouldCenter (optional) should the form be centered to the element\r\n   * @param {number} centerOffset (optional) offset from the center of the element\r\n   */\r\n  setFormStyle(eX, eY, shouldCenter, centerOffset) {\r\n    if (!shouldCenter) {\r\n      shouldCenter = false;\r\n    }\r\n    if (!centerOffset) {\r\n      centerOffset = null;\r\n    }\r\n    let [x, y] = placePopup(\r\n      this.form.offsetWidth,\r\n      this.form.offsetHeight,\r\n      [eX, eY],\r\n      [window.innerWidth, window.innerHeight],\r\n      shouldCenter,\r\n      centerOffset\r\n    );\r\n    this.form.style.left = `${x}px`;\r\n    this.form.style.top = `${y}px`;\r\n    this.form.style.margin = \"0\";\r\n  }\r\n\r\n  setFormSubmitType(type, id) {\r\n    this.formsubmitbtn.setAttribute(\"data-form-action\", type);\r\n    this.formsubmitbtn.setAttribute(\r\n      \"data-form-entry-id\",\r\n      id === null ? id = \"\" : id\r\n    );\r\n  }\r\n\r\n  configFormTitleDescriptionInput(title, description) {\r\n    this.formTitleDescription.forEach((input, idx) => {\r\n      input.firstElementChild.value = [title, description][idx];\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {HTML} input \r\n   * @param {object} date \r\n   * @param {number} minutes \r\n   * @param {string} dateFormatted \r\n   * @desc\r\n   * Set the date & time for the form input fields\r\n   * Set attributes for date/time inputs\r\n   * Format date/time for display\r\n   */\r\n  setFormDateInput(input, date, minutes, dateFormatted) {\r\n    const [dateinput, timeinput] = [\r\n      input.firstElementChild,\r\n      input.lastElementChild\r\n    ];\r\n\r\n    const timeformatted = `${date.getHours()}:${minutes}`;\r\n    timeinput.setAttribute(\r\n      \"data-form-time\",\r\n      timeformatted\r\n    );\r\n\r\n    // darn yankee time\r\n    timeinput.textContent = `${+date.getHours() === 0 || +date.getHours() === 12 ? 12 : date.getHours() % 12}:${minutes}${date.getHours() < 12 ? \"am\" : \"pm\"}`;\r\n\r\n    dateinput.setAttribute(\"data-form-date\", dateFormatted);\r\n    dateinput.textContent = `${this.monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;\r\n  }\r\n\r\n  setFormDatepickerDate(context, datepickerContext, start) {\r\n    start = new Date(start);\r\n    context.setDateSelected(start.getDate());\r\n    datepickerContext.setDate(\r\n      context.getYear(),\r\n      context.getMonth(),\r\n      context.getDay(),\r\n    );\r\n    datepickerContext.setDateSelected(start.getDate());\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {object} dates \r\n   * @desc\r\n   * Iterate through object containing the data below to both the start date/time & end date/time form inputs\r\n   * \r\n   * DateObject: [Date(start), Date(end)]\r\n   * \r\n   * Minutes: [start minutes, end minutes]\r\n   * \r\n   * DateString [start date, end date]\r\n   * \r\n   */\r\n  configFormDateInputs(dates) {\r\n    for (let i = 0; i < 2; i++) {\r\n      this.setFormDateInput(\r\n        this.formStartEndCtg[i].lastElementChild,\r\n        dates.dateObj[i],\r\n        dates.minutes[i],\r\n        dates.formatted[i],\r\n      );\r\n    }\r\n  }\r\n\r\n  configFormCategoryInput(categoryData) {\r\n    const [title, color] = categoryData;\r\n    this.formCategoryWrapper.setAttribute(\"data-form-category\", title);\r\n    this.formCategorySelect.style.backgroundColor = color;\r\n    this.formCategoryWrapperIcon.style.backgroundColor = color;\r\n    this.formCatgoryIcon.firstChild.setAttribute(\"fill\", color);\r\n    this.formCategoryTitle.textContent = title;\r\n  }\r\n\r\n  getConfig(data) {\r\n    this.setFormSubmitType(\r\n      data.submission.type,\r\n      data.submission.id\r\n    );\r\n\r\n    this.configFormCategoryInput([\r\n      data.category.name,\r\n      data.category.color,\r\n    ]);\r\n\r\n    this.configFormDateInputs(\r\n      data.dates.object\r\n    );\r\n\r\n    if (data.submission.type === \"edit\") {\r\n      this.configFormTitleDescriptionInput(\r\n        data.submission.title,\r\n        data.submission.description\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst fullFormConfig = new FormConfig();\r\nexport default fullFormConfig;","import locales from \"../../locales/en\";\r\nimport setViews from \"../../config/setViews\";\r\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\r\nconst monthsArray = locales.labels.monthsShortLower;\r\nconst monthsArrayLong = locales.labels.monthsLongLower;\r\nconst gotoOverlay = document.querySelector(\".go-to-date-overlay\");\r\nconst goto = document.querySelector(\".go-to-date\");\r\nconst gotoInput = document.querySelector(\".go-to-input\");\r\nconst inputErrMessage = document.querySelector(\".go-to-err\");\r\nconst cancelGoto = document.querySelector(\".cancel-go-to\");\r\nconst submitGoto = document.querySelector(\".submit-go-to\");\r\nexport default function createGoTo(context, store, datepickerContext) {\r\n  function validateDate(date) {\r\n    let arr;\r\n    let haserr = false;\r\n\r\n    // accepts two formats: DD/MM/YYYY or jan 1 2021\r\n    if (date.includes(\"/\")) {\r\n      arr = date.split(\"/\");\r\n    } else {\r\n      arr = date.split(\" \");\r\n    }\r\n\r\n    if (arr.length !== 3) {\r\n      haserr = true;\r\n    }\r\n\r\n    // convert string year/month/day to int\r\n    // convert 'jan' to 0 || 'january' to 0\r\n    const [month, day, year] = arr.map((date, idx) => {\r\n      let dateInt = parseInt(date);\r\n      let tempMonth = null; // in case of month string\r\n\r\n\r\n      if (isNaN(dateInt)) {\r\n        if (date.length > 3) {\r\n          tempMonth = monthsArrayLong.indexOf(date.toLowerCase());\r\n        } else {\r\n          tempMonth = monthsArray.indexOf(date.toLowerCase());\r\n        }\r\n      }\r\n\r\n      if (idx === 0 && tempMonth === null) {\r\n        dateInt -= 1;\r\n        if (dateInt === -1) {\r\n          dateInt = 0;\r\n        }\r\n      }\r\n\r\n      if (tempMonth === -1) {\r\n        haserr = true;\r\n      }\r\n\r\n      // check if year is valid\r\n      // if user inputs value less than 100, assume they mean 2000s\r\n      // do not allow year greater than 2100 or less than 1901\r\n      if (idx === 2) {\r\n        if (dateInt < 100) {\r\n          dateInt += 2000;\r\n        } else if (dateInt > 2100) {\r\n          haserr = true;\r\n        } else if (dateInt > 100 && dateInt < 1901) {\r\n          haserr = true;\r\n        }\r\n      }\r\n\r\n      return tempMonth === null ? dateInt : tempMonth;\r\n    });\r\n\r\n\r\n    // form date object and check if valid\r\n    const dateObj = new Date(year, month, day);\r\n    if (dateObj.toString() === \"Invalid Date\") {\r\n      haserr = true;\r\n    }\r\n\r\n    return haserr ? false : dateObj;\r\n  }\r\n\r\n  function removeError() {\r\n    inputErrMessage.style.display = \"none\";\r\n    inputErrMessage.onmousedown = null;\r\n  }\r\n\r\n  function handleError() {\r\n    inputErrMessage.style.display = \"block\";\r\n    inputErrMessage.onmousedown = removeError;\r\n  }\r\n\r\n  function handleGoTo() {\r\n    const newdate = validateDate(gotoInput.value);\r\n    if (newdate instanceof Date) {\r\n      context.setDate(\r\n        newdate.getFullYear(),\r\n        newdate.getMonth(),\r\n        newdate.getDate()\r\n      );\r\n\r\n      context.setDateSelected(newdate.getDate());\r\n      if (context.getSidebarState() !== \"hide\") {\r\n        setSidebarDatepicker(context, store, datepickerContext);\r\n      }\r\n\r\n      let component = context.getComponent();\r\n      if (component === 'list') {\r\n        component = 'day';\r\n      }\r\n\r\n      closeGoTo();\r\n      setViews(component, context, store, datepickerContext);\r\n    } else {\r\n      handleError();\r\n    }\r\n  }\r\n\r\n  function closeGoToOnEscape(e) {\r\n    const key = e.key.toLowerCase();\r\n    if (key === \"escape\") {\r\n      if (inputErrMessage.style.display === \"block\") {\r\n        removeError();\r\n      } else {\r\n        closeGoTo();\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (key === \"enter\") {\r\n      handleGoTo();\r\n      return;\r\n    }\r\n  }\r\n\r\n  function closeGoTo() {\r\n    document.removeEventListener(\"keydown\", closeGoToOnEscape);\r\n    cancelGoto.onclick = null;\r\n    submitGoto.onclick = null;\r\n    store.removeActiveOverlay(\"hide-gotodate\");\r\n    gotoOverlay.classList.add(\"hide-gotodate\");\r\n    goto.classList.add(\"hide-gotodate\");\r\n    gotoInput.value = \"\";\r\n  }\r\n\r\n  function formatStart() {\r\n    const [year, month, day] = [\r\n      context.getYear(),\r\n      context.getMonth(),\r\n      context.getDay(),\r\n    ];\r\n    return `${monthsArray[month]} ${day} ${year}`;\r\n  }\r\n\r\n  function openGoTo() {\r\n    // prevent keyboard shortcut from being registering in input field onload\r\n    removeError();\r\n    setTimeout(() => {\r\n      gotoInput.focus();\r\n      gotoInput.value = formatStart();\r\n    }, 10); // 10ms is within browser threshold\r\n    gotoOverlay.classList.remove(\"hide-gotodate\");\r\n    goto.classList.remove(\"hide-gotodate\");\r\n    store.addActiveOverlay(\"hide-gotodate\");\r\n    document.addEventListener(\"keydown\", closeGoToOnEscape);\r\n    cancelGoto.onclick = closeGoTo;\r\n    submitGoto.onclick = handleGoTo;\r\n  }\r\n\r\n  openGoTo();\r\n}","export default class FormSetup {\r\n  constructor () {\r\n    this.submission;\r\n    this.category;\r\n    this.dates;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} type (\"edit\" / \"create\")\r\n   * @param {string} id (entry ID || null)\r\n   * @param {string} title || null\r\n   * @param {string} description || nulll\r\n   */\r\n  setSubmission(type, id, title, description) {\r\n    this.submission = {\r\n      type: type,\r\n      id: id || null,\r\n      title: title || null,\r\n      description: description || null,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} name (store category name)\r\n   * @param {string} color (store category color)\r\n   * @param {string} offsetColor (category color rgba 0.5)\r\n   */\r\n  setCategory(name, color) {\r\n    this.category = {\r\n      name: name,\r\n      color: color,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {object} \r\n   * : {Dates: [new Date(start), new Date(end)]}\r\n   * : {Dates: [start(\"YYYY-MM-DD\"), end(\"YYYY-MM-DD\")]}\r\n   * : {Minutes: [number, number]}\r\n   */\r\n  setDates(object) {\r\n    this.dates = { object: object };\r\n  }\r\n\r\n  getSetup() {\r\n    return {\r\n      submission: this.submission,\r\n      category: this.category,\r\n      dates: this.dates,\r\n    };\r\n  }\r\n}","import { getClosest, throttle } from \"../../utilities/helpers\";\r\nimport {\r\n  getDateForStore,\r\n  compareDates,\r\n  getDateFromAttribute,\r\n  isBeforeDate\r\n} from \"../../utilities/dateutils\";\r\nimport setViews from \"../../config/setViews\";\r\n\r\nconst datepicker = document.querySelector(\".datepicker\");\r\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\");\r\nconst datepickerBody = document.querySelector(\".datepicker__body--dates\");\r\nconst datepickerTitle = document.querySelector(\".datepicker-title\");\r\nconst datepickerChangeDate = document.querySelector(\".datepicker-change-date\");\r\n\r\n// prev and next buttons aside from main app header datewrapper\r\nconst headerPrevBtn = document.querySelector(\".prev\");\r\nconst headerNextBtn = document.querySelector(\".next\");\r\n\r\nconst yearpickerTitle = document.querySelector(\".yearpicker-title\");\r\nconst monthpickerMonths = document.querySelectorAll(\".monthpicker__month\");\r\n\r\nexport default function setDatepicker(context, store, datepickerContext, type) {\r\n  let montharray = datepickerContext.getMonthArray();\r\n  let count = 0;\r\n  let hasweek;\r\n  let testDateSelected = type === \"form\" ? datepickerContext.getDateSelected() : context.getDateSelected();\r\n  let [checkmonth, checkyear] = [null, null];\r\n  const datepickerKeypressThrottle = throttle(handleKeydownNav, 100);\r\n\r\n  function setDatepickerHeader() {\r\n    const y = datepickerContext.getYear();\r\n    const m = datepickerContext.getMonthName();\r\n    datepickerTitle.textContent = `${m} ${y}`;\r\n  }\r\n\r\n  function createCells(montharray) {\r\n    datepickerBody.innerText = \"\";\r\n    let groupedEntries = store.getMonthEntryDates(montharray);\r\n    let currentWeekStart = context.getWeek();\r\n    let isDaySelected = false;\r\n\r\n    for (let i = 0; i < montharray.length; i++) {\r\n      const cell = document.createElement(\"div\");\r\n      const datename = document.createElement(\"div\");\r\n      cell.classList.add(\"datepicker__body--dates-cell\");\r\n      datename.classList.add(\"datepicker__body--datename\");\r\n\r\n      if (montharray[i].getMonth() !== datepickerContext.getMonth()) {\r\n        datename.classList.add(\"datepicker__body--datename-disabled\");\r\n      }\r\n\r\n      if (compareDates(montharray[i], currentWeekStart) && context.getComponent() === \"week\") {\r\n        hasweek = true;\r\n      }\r\n\r\n      if (hasweek) {\r\n        count++;\r\n        if (count <= 7) {\r\n          cell.classList.add(\"datepicker__body--dates-week\");\r\n        }\r\n      } else {\r\n        cell.classList.remove(\"datepicker__body--dates-week\");\r\n      }\r\n\r\n      if (montharray[i].getDate() === testDateSelected && montharray[i].getMonth() === datepickerContext.getMonth()) {\r\n        if (!datename.classList.contains(\"datepicker__body--datename-today\")) {\r\n          datename.setAttribute(\"class\", \"datepicker__body--datename\");\r\n          datename.classList.add(\"datepicker__body--datename-selected\");\r\n        }\r\n      }\r\n\r\n      if (context.isToday(montharray[i])) {\r\n        datename.setAttribute(\"class\", \"datepicker__body--datename\");\r\n        datename.classList.add(\"datepicker__body--datename-today\");\r\n      }\r\n\r\n      datename.innerText = montharray[i].getDate();\r\n      const formattedDate = getDateForStore(montharray[i]);\r\n\r\n      datename.setAttribute(\"data-datepicker-date\", formattedDate);\r\n      if (groupedEntries.includes(formattedDate)) {\r\n        if (!datename.classList.contains(\"datepicker__body--datename-today\") && !datename.classList.contains(\"datepicker__body--datename-selected\")) {\r\n          datename.setAttribute(\"class\", \"datepicker__body--datename\");\r\n          datename.classList.add(\"datepicker__body--datename-entries\");\r\n        }\r\n      } else {\r\n        datename.classList.remove(\"datepicker__body--datename-entries\");\r\n      }\r\n\r\n      cell.appendChild(datename);\r\n      datepickerBody.appendChild(cell);\r\n    }\r\n\r\n    currentWeekStart = null;\r\n    groupedEntries = [];\r\n  }\r\n\r\n  function renderpicker(y, m, d) {\r\n    context.setDate(y, m, d);\r\n    context.setDateSelected(d);\r\n    setViews(context.getComponent(), context, store, datepickerContext);\r\n    datepickerContext.setDate(y, m, d);\r\n    closeDatepicker();\r\n  }\r\n\r\n  function handleFormDate(y, m, d) {\r\n    datepickerContext.setDate(y, m, d);\r\n    context.setDateSelected(d);\r\n    const datepickerDate = datepickerContext.getDate();\r\n\r\n    const activeFormDate = document.querySelector(\".active-form-date\");\r\n    activeFormDate.setAttribute(\"data-form-date\", `${y}-${m}-${d}`);\r\n    activeFormDate.textContent = `${datepickerContext.getMonthName().slice(0, 3)} ${d}, ${y}`;\r\n\r\n    const inactiveFormDate = document?.querySelector(\".inactive-form-date\");\r\n    const inactiveValue = inactiveFormDate.getAttribute(\"data-form-date\").split(\"-\").map(x => parseInt(x));\r\n    const inactiveDate = new Date(inactiveValue[0], inactiveValue[1], inactiveValue[2]);\r\n    const inactiveDateType = inactiveFormDate.getAttribute(\"data-form-date-type\");\r\n\r\n    /**\r\n     * FORM DATEPICKER CONDITIONS\r\n     * 1. if user selects start date that is after end date\r\n     *   -- set end date to start date\r\n     * 2. if user selects end date that is before start date\r\n     *  -- set start date to end date\r\n     */\r\n    if ((isBeforeDate(inactiveDate, datepickerDate) && inactiveDateType === \"end\") || (isBeforeDate(datepickerDate, inactiveDate) && inactiveDateType === \"start\")) {\r\n      inactiveFormDate.setAttribute(\"data-form-date\", `${y}-${m}-${d}`);\r\n      inactiveFormDate.textContent = `${datepickerContext.getMonthName().slice(0, 3)} ${d}, ${y}`;\r\n    }\r\n  }\r\n\r\n  function setNewDate(e, data) {\r\n    let [y, m, d] = [null, null, null];\r\n    if (e === null) {\r\n      y = data[0];\r\n      m = data[1];\r\n      d = data[2];\r\n    } else {\r\n      let temp = getDateFromAttribute(e.target, \"data-datepicker-date\");\r\n      y = temp[0];\r\n      m = temp[1];\r\n      d = temp[2];\r\n    }\r\n    if (type === \"form\") {\r\n      handleFormDate(y, m, d);\r\n      closeDatepicker();\r\n    } else {\r\n      renderpicker(y, m, d);\r\n    }\r\n  }\r\n\r\n  function setCheckMonthYear() {\r\n    checkmonth = datepickerContext.getMonth();\r\n    checkyear = datepickerContext.getYear();\r\n  }\r\n\r\n  function getMonthYearCheck() {\r\n    return checkmonth === datepickerContext.getMonth() && checkyear === datepickerContext.getYear();\r\n  }\r\n\r\n  function renderNextMonth() {\r\n    datepickerContext.setNextMonth();\r\n    montharray = datepickerContext.getMonthArray();\r\n    createCells(montharray);\r\n    setDatepickerHeader();\r\n  }\r\n\r\n  function renderPrevMonth() {\r\n    datepickerContext.setPrevMonth();\r\n    montharray = datepickerContext.getMonthArray();\r\n    createCells(montharray);\r\n    setDatepickerHeader();\r\n  }\r\n\r\n  function setSelectedToNextDay() {\r\n    let curr = document.querySelector(\".datepicker__body--datename-selected\");\r\n    const parent = curr.parentElement;\r\n    const next = parent?.nextElementSibling?.firstElementChild;\r\n\r\n    if (!next || next === undefined || next === null) {\r\n      renderNextMonth();\r\n      datepickerContext.setDateSelected(1);\r\n      curr = document.querySelector(\".datepicker__body--datename-selected\");\r\n      curr.classList.remove(\"datepicker__body--datename-selected\");\r\n      let frst = document.querySelectorAll(\".datepicker__body--datename\");\r\n      frst[0].classList.add(\"datepicker__body--datename-selected\");\r\n      return;\r\n    } else {\r\n      curr.classList.remove(\"datepicker__body--datename-selected\");\r\n      next.classList.add(\"datepicker__body--datename-selected\");\r\n      let attr = next.getAttribute(\"data-datepicker-date\");\r\n      let newDateSelected = parseInt(attr.split(\"-\")[2]);\r\n      datepickerContext.setDateSelected(newDateSelected);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function setSelectedToPrevDay() {\r\n    let curr = document.querySelector(\".datepicker__body--datename-selected\");\r\n    const parent = curr.parentElement;\r\n    const prev = parent?.previousElementSibling?.firstElementChild;\r\n\r\n    if (!prev || prev === undefined || prev === null) {\r\n      renderPrevMonth();\r\n      const lastday = datepickerContext.getDaysInMonth();\r\n      datepickerContext.setDateSelected(+lastday);\r\n      curr = document.querySelector(\".datepicker__body--datename-selected\");\r\n      curr.classList.remove(\"datepicker__body--datename-selected\");\r\n      let last = document.querySelectorAll(\".datepicker__body--datename\");\r\n      last[last.length - 1].classList.add(\"datepicker__body--datename-selected\");\r\n      return;\r\n    } else {\r\n      curr.classList.remove(\"datepicker__body--datename-selected\");\r\n      prev.classList.add(\"datepicker__body--datename-selected\");\r\n      return;\r\n    }\r\n  }\r\n\r\n  function monthpickerSetMonth(val, init) {\r\n    const newmonth = val;\r\n\r\n    if (!init && newmonth === datepickerContext.getMonth()) return;\r\n    datepickerContext.setMonth(newmonth);\r\n    monthpickerMonths.forEach((month, idx) => {\r\n      if (idx === newmonth) {\r\n        month.classList.add(\"monthpicker__active-month\");\r\n      } else {\r\n        month.classList.remove(\"monthpicker__active-month\");\r\n      }\r\n    });\r\n  }\r\n\r\n  function yearpickerSetYear(increment, init) {\r\n    if (init) {\r\n      yearpickerTitle.textContent = datepickerContext.getYear();\r\n      return;\r\n    }\r\n\r\n    const newyear = parseInt(datepickerContext.getYear()) + increment;\r\n    if (newyear == +datepickerContext.getYear()) return;\r\n    datepickerContext.setYear(newyear);\r\n    yearpickerTitle.textContent = newyear;\r\n  }\r\n\r\n  function handleMonthpicker(dir) {\r\n    const target = document.querySelector(\".monthpicker__active-month\");\r\n    let attr = parseInt(target.getAttribute(\"data-dp-month\"));\r\n    if (dir === \"next\") {\r\n      monthpickerSetMonth((attr + 1) % 12);\r\n    } else {\r\n      if (attr === 0) {\r\n        monthpickerSetMonth(11);\r\n      } else {\r\n        monthpickerSetMonth(attr - 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  function openChangeDateModal() {\r\n    setCheckMonthYear();\r\n    datepickerChangeDate.classList.add(\"show-dpcd\");\r\n    yearpickerSetYear(null, true);\r\n    monthpickerSetMonth(datepickerContext.getMonth(), true);\r\n  }\r\n\r\n  function closeChangeDateModal() {\r\n    // check if date has changed;\r\n    if (!getMonthYearCheck()) {\r\n      montharray = datepickerContext.getMonthArray();\r\n      createCells(montharray);\r\n      setDatepickerHeader();\r\n    }\r\n    datepickerChangeDate.classList.remove(\"show-dpcd\");\r\n  }\r\n\r\n  function closeDatepicker() {\r\n    datepicker.classList.add(\"hide-datepicker\");\r\n    datepickeroverlay.classList.add(\"hide-datepicker-overlay\");\r\n    closeChangeDateModal();\r\n    const formOpen = store.getActiveOverlay().has(\"hide-form-overlay\");\r\n    const listOpen = context.getComponent() !== \"list\";\r\n    if (listOpen || !formOpen) {\r\n      headerPrevBtn.removeAttribute(\"style\");\r\n      headerNextBtn.removeAttribute(\"style\");\r\n    }\r\n\r\n    if (type === \"form\") {\r\n      document.querySelector(\".active-form-date\")?.classList.remove(\"active-form-date\");\r\n    }\r\n\r\n    datepickerBody.innerText = \"\";\r\n    datepicker.removeAttribute(\"tabindex\");\r\n    count = 0;\r\n    checkmonth = null;\r\n    checkyear = null;\r\n    montharray = [];\r\n\r\n    datepickeroverlay.onclick = null;\r\n    datepicker.onmousedown = null;\r\n    document.removeEventListener(\"keydown\", datepickerKeypressThrottle);\r\n  }\r\n\r\n  function delegateDatepickerEvents(e) {\r\n    const datenumber = getClosest(e, \".datepicker__body--datename\");\r\n    const navnext = getClosest(e, \".datepicker-nav--next\");\r\n    const navprev = getClosest(e, \".datepicker-nav--prev\");\r\n    const title = getClosest(e, \".datepicker-title\");\r\n    const closeChangeDateBtn = getClosest(e, \".close-change-date\");\r\n    const ypNext = getClosest(e, \".yearpicker-next\");\r\n    const ypPrev = getClosest(e, \".yearpicker-prev\");\r\n    const mpMonth = getClosest(e, \".monthpicker__month\");\r\n\r\n    if (datenumber) {\r\n      setNewDate(e);\r\n      return;\r\n    }\r\n\r\n    if (navnext) {\r\n      renderNextMonth();\r\n      return;\r\n    }\r\n\r\n    if (navprev) {\r\n      renderPrevMonth();\r\n      return;\r\n    }\r\n\r\n    if (title) {\r\n      openChangeDateModal();\r\n      return;\r\n    }\r\n\r\n    if (closeChangeDateBtn) {\r\n      closeChangeDateModal();\r\n      return;\r\n    }\r\n\r\n    if (ypNext) {\r\n      yearpickerSetYear(1, false);\r\n      return;\r\n    }\r\n\r\n    if (ypPrev) {\r\n      yearpickerSetYear(-1, false);\r\n      return;\r\n    }\r\n\r\n    if (mpMonth) {\r\n      const newmonth = parseInt(e.target.getAttribute(\"data-dp-month\"));\r\n      monthpickerSetMonth(newmonth, false);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function handleKeydownNav(e) {\r\n    // functionality will change depending on whether the change date modal is open -- use flag to check\r\n    const flag = datepickerChangeDate.classList.contains(\"show-dpcd\");\r\n    switch (e.key) {\r\n\r\n      case \"ArrowDown\":\r\n        flag ? yearpickerSetYear(-1, false) : renderPrevMonth();\r\n        break;\r\n\r\n      case \"ArrowUp\":\r\n        flag ? yearpickerSetYear(1, false) : renderNextMonth();\r\n        break;\r\n\r\n      case \"ArrowRight\":\r\n        flag ? handleMonthpicker(\"next\") : setSelectedToNextDay();\r\n        break;\r\n\r\n      case \"ArrowLeft\":\r\n        flag ? handleMonthpicker(\"prev\") : setSelectedToPrevDay();\r\n        break;\r\n\r\n      case \"Enter\":\r\n        if (datepickerChangeDate.classList.contains(\"show-dpcd\")) {\r\n          closeChangeDateModal();\r\n        } else {\r\n          const target = document.querySelector(\".datepicker__body--datename-selected\");\r\n          if (target === null || !target) {\r\n            // the last selected day in the previous month was longer than the days in the current month\r\n            setNewDate(null, [\r\n              datepickerContext.getYear(),\r\n              datepickerContext.getMonth(),\r\n              28\r\n            ]);\r\n          } else {\r\n            let attr = getDateFromAttribute(target, \"data-datepicker-date\");\r\n            setNewDate(null, attr);\r\n          }\r\n        }\r\n        break;\r\n\r\n      case \"Tab\":\r\n        e.preventDefault();\r\n        datepicker.setAttribute(\"tabindex\", \"1\");\r\n        datepicker.focus();\r\n\r\n        if (flag) {\r\n          closeChangeDateModal();\r\n        } else {\r\n          openChangeDateModal();\r\n        }\r\n        break;\r\n\r\n      case \"Escape\":\r\n        if (datepickerChangeDate.classList.contains(\"show-dpcd\")) {\r\n          closeChangeDateModal();\r\n        } else {\r\n          closeDatepicker();\r\n        }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  function initDatepicker() {\r\n    setDatepickerHeader();\r\n    createCells(montharray);\r\n    store.setResetDatepickerCallback(closeDatepicker);\r\n    datepickeroverlay.onclick = closeDatepicker;\r\n    datepicker.onmousedown = delegateDatepickerEvents;\r\n    document.addEventListener(\"keydown\", datepickerKeypressThrottle);\r\n    montharray = [];\r\n  };\r\n\r\n  initDatepicker();\r\n}\r\n","import locales from \"../../locales/en\";\r\nimport { createCheckIcon } from \"../../utilities/svgs\";\r\nimport { isNumeric, placePopup } from \"../../utilities/helpers\";\r\nconst checkIcon = createCheckIcon('var(--taskcolor');\r\nconst colors = Object.values(locales.colors);\r\n\r\nclass CatFormHelper {\r\n  constructor (catname, catcolor) {\r\n    this.catname = catname;\r\n    this.catcolor = catcolor;\r\n    this.errMsg = '';\r\n    this.prevColorIdx = catcolor;\r\n    this.originalName = catname;\r\n    this.originalColor = catcolor;\r\n  }\r\n  setName(name) { this.catname = name; }\r\n  setColor(color) { this.catcolor = color; }\r\n  setPrevColor(color) { this.prevColorIdx = color; }\r\n  getName() { return this.catname; }\r\n  getColor() { return this.catcolor; }\r\n  prevColor() { return this.prevColorIdx; }\r\n  setErrMsg(msg) { this.errMsg = msg; }\r\n  getErrMsg() { return this.errMsg; }\r\n  getOriginalName() { return this.originalName; }\r\n  getOriginalColor() { return this.originalColor; }\r\n}\r\n\r\nconst ctgform = document.querySelector(\".category__form\");\r\nconst ctgformoverlay = document.querySelector(\".category__form-overlay\");\r\nconst ctgformInput = document.querySelector(\".category__form-input\");\r\nconst colorPickerTitle = document.querySelector(\".color-picker__title\");\r\nconst colorPickerOptions = document.querySelector(\".color-picker__options\");\r\nconst ctgErrMsg = document.querySelector(\".ctg-input--err\");\r\n\r\nexport default function createCategoryForm(store, selectedCategory, editing, resetParent) {\r\n\r\n  const formhelper = new CatFormHelper(\r\n    selectedCategory.name,\r\n    selectedCategory.color\r\n  );\r\n\r\n  function createColorOption(color, selected) {\r\n    const colorOption = document.createElement(\"div\");\r\n    colorOption.classList.add(\"color-picker--option\");\r\n    colorOption.style.backgroundColor = color;\r\n    colorOption.setAttribute(\"data-color-hex\", color);\r\n\r\n    if (color === selected) {\r\n      colorOption.append(checkIcon);\r\n      formhelper.setColor(color);\r\n    }\r\n\r\n    return colorOption;\r\n  }\r\n\r\n  function createPickerOptions(currentColor) {\r\n    colorPickerOptions.innerText = \"\";\r\n    colors.forEach((color) => {\r\n      for (let i = 1; i < 8; i++) {\r\n        colorPickerOptions.append(\r\n          createColorOption(color[i], currentColor)\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  function handleColorSelection(e, current) {\r\n    const target = e.target;\r\n    const color = target.getAttribute(\"data-color-hex\");\r\n\r\n    if (color === current) return;\r\n\r\n    const colorOptions = document.querySelectorAll(\".color-picker--option\");\r\n    colorOptions.forEach((option) => {\r\n      option.innerText = \"\";\r\n    });\r\n    target.appendChild(checkIcon);\r\n    colorPickerTitle.style.background = color;\r\n    formhelper.setColor(color);\r\n  }\r\n\r\n  function handleInputErr() {\r\n    const removeInputErr = () => {\r\n      ctgErrMsg.classList.add(\"hide-ctg-err\");\r\n      ctgformInput.focus();\r\n    };\r\n    ctgErrMsg.textContent = formhelper.getErrMsg();\r\n    ctgErrMsg.onclick = removeInputErr;\r\n  }\r\n\r\n  function validateNewCategory(categoryName, color) {\r\n    let trimName = categoryName.trim().replace(/[^a-zA-Z0-9\\s]+|\\s{2,}/g, ' ').trim();\r\n\r\n    if (isNumeric(trimName)) {\r\n      trimName = `category ${trimName}`;\r\n    }\r\n\r\n    const origName = formhelper.getOriginalName();\r\n\r\n    let errormsg = false;\r\n    if (trimName.length < 1) {\r\n      formhelper.setErrMsg(\"Category name is required\");\r\n      errormsg = true;\r\n    } else if (store.hasCtg(trimName)) {\r\n      if (!editing || (editing && origName !== trimName)) {\r\n        formhelper.setErrMsg(\"Category already exists\");\r\n        errormsg = true;\r\n      }\r\n    }\r\n\r\n    if (errormsg) {\r\n      ctgErrMsg.classList.remove(\"hide-ctg-err\");\r\n      handleInputErr(errormsg);\r\n      return;\r\n    } else {\r\n      if (editing) {\r\n        if (origName === trimName && formhelper.getOriginalColor() === color) {\r\n          closeCategoryForm();\r\n          return;\r\n        } else {\r\n          if (origName !== trimName) {\r\n            store.updateCtg(trimName, color, formhelper.getName());\r\n          } else {\r\n            store.updateCtgColor(origName, color);\r\n          }\r\n        }\r\n      } else {\r\n        store.addNewCtg(trimName, color);\r\n      }\r\n\r\n      const fullrenderCtg = store.getRenderCategoriesCallback();\r\n      closeCategoryForm();\r\n      fullrenderCtg();\r\n    }\r\n  }\r\n\r\n  function closeCategoryForm() {\r\n    if (resetParent !== null) {\r\n      resetParent.removeAttribute(\"style\");\r\n    }\r\n    colorPickerOptions.innerText = \"\";\r\n    ctgform.classList.add(\"hide-ctg-form\");\r\n    ctgformoverlay.classList.add(\"hide-ctg-form\");\r\n    ctgformInput.value = \"\";\r\n    ctgErrMsg.classList.add(\"hide-ctg-err\");\r\n    store.removeActiveOverlay('hide-ctg-form');\r\n    ctgform.onmousedown = null;\r\n    ctgformoverlay.onclick = null;\r\n    document.removeEventListener(\"keydown\", closeCategoryFormOnEsc);\r\n  }\r\n\r\n  function closeCategoryFormOnEsc(e) {\r\n    const val = e.key.toLowerCase();\r\n    if (val === \"escape\") {\r\n      if (!ctgErrMsg.classList.contains(\"hide-ctg-err\")) {\r\n        ctgErrMsg.classList.add(\"hide-ctg-err\");\r\n        ctgformInput.focus();\r\n        return;\r\n      } else {\r\n        closeCategoryForm();\r\n        return;\r\n      }\r\n    }\r\n    if (val === \"enter\") {\r\n      validateNewCategory(ctgformInput.value, formhelper.getColor());\r\n      return;\r\n    }\r\n  }\r\n\r\n  function openCtgForm(editing) {\r\n    store.addActiveOverlay(\"hide-ctg-form\");\r\n    ctgformoverlay.classList.remove(\"hide-ctg-form\");\r\n    ctgform.classList.remove(\"hide-ctg-form\");\r\n    ctgform.removeAttribute(\"style\");\r\n\r\n    if (resetParent !== null) {\r\n      const rect = resetParent.getBoundingClientRect();\r\n      const getright = parseInt(rect.right);\r\n      const gettop = parseInt(rect.top);\r\n      const [x, y] = placePopup(\r\n        280,\r\n        352,\r\n        [getright - 20, gettop - 28],\r\n        [window.innerWidth, window.innerHeight],\r\n        false,\r\n        null\r\n      );\r\n      ctgform.setAttribute(\"style\", `left:${x}px;top:${y}px;`);\r\n    } else {\r\n      ctgform.setAttribute(\"style\", \"left:5%;top:5%;right:5%;margin:auto;\");\r\n    }\r\n\r\n    ctgErrMsg.classList.add(\"hide-ctg-err\");\r\n    colorPickerTitle.style.backgroundColor = formhelper.getColor();\r\n    setTimeout(() => {\r\n      if (editing) {\r\n        ctgformInput.value = formhelper.getName();\r\n      } else {\r\n        ctgformInput.placeholder = \"Create new category\";\r\n      }\r\n      ctgformInput.focus();\r\n    }, 4);\r\n  }\r\n\r\n  function gc(e, element) {\r\n    return e.target.closest(element);\r\n  }\r\n\r\n  function delegateCtgForm(e) {\r\n    const cancelctgBtn = gc(e, \".category__form--cancel\");\r\n    const colorOption = gc(e, \".color-picker--option\");\r\n    const submitctgBtn = gc(e, \".category__form--submit\");\r\n\r\n    if (cancelctgBtn) {\r\n      closeCategoryForm(e);\r\n      return;\r\n    }\r\n\r\n    if (colorOption) {\r\n      handleColorSelection(e, formhelper.getColor());\r\n      return;\r\n    }\r\n\r\n    if (submitctgBtn) {\r\n      validateNewCategory(ctgformInput.value, formhelper.getColor());\r\n      return;\r\n    }\r\n  }\r\n\r\n  const initCtgForm = () => {\r\n    console.log('ran')\r\n    createPickerOptions(formhelper.getColor());\r\n    openCtgForm(editing);\r\n    ctgform.onmousedown = delegateCtgForm;\r\n    ctgformoverlay.onclick = closeCategoryForm;\r\n    document.addEventListener(\"keydown\", closeCategoryFormOnEsc);\r\n  };\r\n\r\n  initCtgForm();\r\n}","import setViews from \"../../config/setViews\";\r\nimport { getClosest } from \"../../utilities/helpers\";\r\n\r\nimport {\r\n  formatEntryOptionsDate,\r\n  compareDates,\r\n} from \"../../utilities/dateutils\";\r\n\r\nconst entryOptionsOverlay = document.querySelector(\".entry__options--overlay\");\r\nconst entryOptionsWrapper = document.querySelector('.entry__options');\r\nconst entryOptionsDateHeader = document.querySelector('.entry__options-date');\r\nconst entryOptionsTimeHeader = document.querySelector('.entry__options-time');\r\nconst entryOptionTitle = document.querySelector(\".eob-title\");\r\nconst entryOptionDescription = document.querySelector('.eob-description');\r\nconst entryOptionCategoryIcon = document.querySelector(\".eob-category--icon\");\r\nconst entryOptionCategory = document.querySelector('.eob-category');\r\n\r\nexport default function getEntryOptionModal(context, store, entry, datepickerContext, finishSetup) {\r\n\r\n  function openEditForm() {\r\n    const openForm = store.getRenderFormCallback();\r\n    openForm();\r\n    finishSetup();\r\n    closeEntryOptions();\r\n  }\r\n\r\n  function proceedDelete(entry) {\r\n    store.deleteEntry(entry.id);\r\n    closeEntryOptions();\r\n    setViews(context.getComponent(), context, store, datepickerContext);\r\n  }\r\n\r\n  function openDeleteWarning() {\r\n    const deletepopup = document.createElement(\"div\");\r\n    deletepopup.classList.add(\"delete-popup\");\r\n\r\n    const deletebtns = document.createElement(\"div\");\r\n    deletebtns.classList.add(\"delete-popup__btns\");\r\n\r\n    const deletepopupCancel = document.createElement(\"button\");\r\n    deletepopupCancel.classList.add(\"delete-popup__cancel\");\r\n    deletepopupCancel.textContent = \"Cancel\";\r\n\r\n    const deletepopupConfirm = document.createElement(\"button\");\r\n    deletepopupConfirm.classList.add(\"delete-popup__confirm\");\r\n    deletepopupConfirm.textContent = \"Delete\";\r\n\r\n    const deletepopupText = document.createElement(\"p\");\r\n    deletepopupText.classList.add(\"delete-popup__text\");\r\n    deletepopupText.textContent = \"Are you sure you want to delete this entry?\";\r\n\r\n    deletebtns.append(deletepopupCancel, deletepopupConfirm);\r\n    deletepopup.append(deletepopupText, deletebtns);\r\n    entryOptionsWrapper.append(deletepopup);\r\n\r\n    const removeDeletePopup = () => { deletepopup.remove(); };\r\n    const submitDelete = () => {\r\n      proceedDelete(entry);\r\n      removeDeletePopup();\r\n      const resetCurrentView = store.getFormResetHandle(context.getComponent());\r\n      if (resetCurrentView !== null) {\r\n        resetCurrentView();\r\n      }\r\n    };\r\n\r\n    deletepopupCancel.onclick = removeDeletePopup;\r\n    deletepopupConfirm.onclick = submitDelete;\r\n  }\r\n\r\n  function formNegated() {\r\n    // The form is responsible for resetting the current view\r\n    // If the form is not toggled open from this modal,\r\n    // reset it manually on close\r\n    const resetCurrentView = store.getFormResetHandle(context.getComponent());\r\n    closeEntryOptions();\r\n    resetCurrentView();\r\n  }\r\n\r\n  function closeEntryOptions() {\r\n    [\r\n      entryOptionsDateHeader,\r\n      entryOptionsTimeHeader,\r\n      entryOptionTitle,\r\n      entryOptionDescription,\r\n      entryOptionCategory,\r\n    ].forEach(el => el.innerText = \"\");\r\n\r\n    entryOptionsWrapper.classList.add(\"entry__options--hidden\");\r\n    entryOptionsOverlay.classList.add(\"entry__options--hidden\");\r\n    store.removeActiveOverlay(\"entry__options--hidden\");\r\n    entryOptionDescription.parentElement.removeAttribute(\"style\");\r\n    entryOptionsWrapper.onmousedown = null;\r\n    entryOptionsOverlay.onmousedown = null;\r\n    document.removeEventListener(\"keydown\", handleEntryOptionKD);\r\n  }\r\n\r\n  function setEntryDefaults() {\r\n    entryOptionsWrapper.classList.remove(\"entry__options--hidden\");\r\n    entryOptionsOverlay.classList.remove(\"entry__options--hidden\");\r\n    store.addActiveOverlay(\"entry__options--hidden\");\r\n\r\n    const [start, end] = [new Date(entry.start), new Date(entry.end)];\r\n    let istoday = false;\r\n    if (compareDates(start, new Date())) {\r\n      istoday = true;\r\n    }\r\n\r\n    const getDateTime = formatEntryOptionsDate(start, end);\r\n    entryOptionsDateHeader.textContent = getDateTime.date;\r\n    if (getDateTime.time !== null) {\r\n      if (getDateTime.time === undefined) {\r\n        let tempdate = new Date();\r\n        let secondsDiff = tempdate.getTime() - end.getTime();\r\n        let daysSince = Math.floor(secondsDiff / (1000 * 60 * 60 * 24));\r\n        let timeheadertitle;\r\n\r\n        /**\r\n         * If the entry has ended, display the time since it ended\r\n         * If the entry has ended today, display the time since it ended\r\n         * If the entry has ended yesterday, display \"ended yesterday\"\r\n         * If the entry starts today, display how long until it is scheduled to end\r\n         * If the entry is yet to start, display how long until it is scheduled to start\r\n         */\r\n        if (daysSince === 0) {\r\n          let hourSince = Math.floor(secondsDiff / (1000 * 60 * 60));\r\n          let minSince = Math.floor((secondsDiff - (hourSince * 1000 * 60 * 60)) / (1000 * 60));\r\n          if (hourSince === 0) {\r\n            if (minSince === 1) {\r\n              timeheadertitle = `ended ${minSince} minute ago`;\r\n            } else {\r\n              timeheadertitle = `ended ${minSince} minutes ago`;\r\n            }\r\n          } else if (hourSince === 1) {\r\n            timeheadertitle = `ended ${hourSince} hour ago`;\r\n          } else if (hourSince > 1) {\r\n            timeheadertitle = `ended ${hourSince} hours ago`;\r\n          }\r\n        } else if (daysSince === 1) {\r\n          timeheadertitle = \"ended yesterday\";\r\n        } else {\r\n          timeheadertitle = `ended ${daysSince} days ago`;\r\n        }\r\n        entryOptionsTimeHeader.textContent = timeheadertitle;\r\n      } else {\r\n        if (istoday) {\r\n          entryOptionsTimeHeader.textContent = \"ending in \" + getDateTime.time;\r\n        } else {\r\n          entryOptionsTimeHeader.textContent = getDateTime.time;\r\n        }\r\n      }\r\n    }\r\n\r\n    entryOptionTitle.textContent = entry.title;\r\n\r\n    entry.description.length === 0 ? entryOptionDescription.parentElement.style.display = \"none\" : entryOptionDescription.textContent = entry.description;\r\n\r\n    entryOptionCategoryIcon.setAttribute(\"fill\", store.getCtgColor(entry.category));\r\n    entryOptionCategory.textContent = entry.category;\r\n\r\n    entryOptionsWrapper.onmousedown = delegateEntryOptions;\r\n    entryOptionsOverlay.onmousedown = formNegated;\r\n    document.addEventListener(\"keydown\", handleEntryOptionKD);\r\n  }\r\n\r\n  function handleEntryOptionKD(e) {\r\n    const deletepopup = document?.querySelector(\".delete-popup\");\r\n\r\n    if (e.key === \"Escape\") {\r\n      if (deletepopup) {\r\n        deletepopup.remove();\r\n        return;\r\n      } else {\r\n        formNegated();\r\n      }\r\n    }\r\n\r\n    if (e.key.toLowerCase() === \"e\") {\r\n      openEditForm();\r\n    }\r\n\r\n    if (e.key === \"Delete\") {\r\n      openDeleteWarning();\r\n    }\r\n  }\r\n\r\n  function delegateEntryOptions(e) {\r\n    const editBtn = getClosest(e, \".eoi__edit\");\r\n    const deleteBtn = getClosest(e, \".eoi__delete\");\r\n    const closeBtn = getClosest(e, \".eoi__close\");\r\n\r\n    if (editBtn) {\r\n      openEditForm();\r\n      return;\r\n    }\r\n\r\n    if (deleteBtn) {\r\n      openDeleteWarning();\r\n      return;\r\n    }\r\n\r\n    if (closeBtn) {\r\n      formNegated();\r\n      return;\r\n    }\r\n  }\r\n\r\n  setEntryDefaults();\r\n}","import locales from \"../../locales/en\";\r\n\r\nexport default function setHeader(context, component, store) {\r\n  let temp = new Date();\r\n  const btntoday = document.querySelector(\".btn-today\");\r\n  btntoday.setAttribute(\"data-tooltip\", `${locales.labels.weekdaysLong[temp.getDay()]}, ${locales.labels.monthsLong[temp.getMonth()]} ${temp.getDate()}`);\r\n\r\n  const dateTimeTitle = document.querySelector(\".datetime-content--title\");\r\n  const header = document.querySelector(\".header\");\r\n  const selectElement = document.querySelector(\".select__modal\");\r\n  const btnprev = document.querySelector('.prev');\r\n  const btnnext = document.querySelector('.next');\r\n  const datetimeWrapper = document.querySelector(\".h-col-2\");\r\n  const datetimeContent = document.querySelector(\".datetime-content\");\r\n  const prevnext = document.querySelector(\".prev-next\");\r\n\r\n  const configHeader = (borderstyle, componentTitle) => {\r\n    header.style.borderBottom = borderstyle;\r\n    dateTimeTitle.textContent = componentTitle;\r\n    datetimeWrapper.classList.remove(\"datetime-inactive\");\r\n    datetimeWrapper.style.paddingRight = \"0\";\r\n    datetimeContent.removeAttribute(\"style\");\r\n    prevnext.removeAttribute(\"style\");\r\n  };\r\n\r\n  const setHeaderAttributes = (view) => {\r\n    if (view !== \"list\") {\r\n      btnprev.setAttribute(\"data-tooltip\", `prev ${view}`);\r\n      btnnext.setAttribute(\"data-tooltip\", `next ${view}`);\r\n    }\r\n    selectElement.textContent = view[0].toUpperCase() + view.slice(1);\r\n    selectElement.setAttribute(\"data-value\", view.slice(0, 1).toUpperCase());\r\n  };\r\n\r\n  switch (component) {\r\n    case \"day\":\r\n      configHeader(\"1px solid transparent\", `${context.getMonthName()} ${context.getDay()}, ${context.getYear()}`);\r\n      setHeaderAttributes(\"day\");\r\n      break;\r\n    case \"week\":\r\n      configHeader(\"1px solid transparent\", context.getWeekRange());\r\n      setHeaderAttributes(\"week\");\r\n      break;\r\n    case \"month\":\r\n      configHeader(\"1px solid transparent\", `${context.getMonthName()} ${context.getYear()}`);\r\n      setHeaderAttributes(\"month\");\r\n      break;\r\n    case \"year\":\r\n      configHeader(\"1px solid transparent\", context.getYear());\r\n      setHeaderAttributes(\"year\");\r\n      break;\r\n    case \"list\":\r\n      setHeaderAttributes(\"list\");\r\n      header.style.borderBottom = \"1px solid var(--mediumgrey1)\";\r\n      prevnext.setAttribute(\"style\", \"opacity: 0; pointer-events:none;\");\r\n      datetimeWrapper.classList.add(\"datetime-inactive\");\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n","const shortcutsModalOverlay = document.querySelector(\".shortcuts-modal-overlay\");\r\nconst shortcutsModal = document.querySelector(\".shortcuts__modal\");\r\nconst shortcutsModalContent = document.querySelector(\".shortcuts-modal-content\");\r\nconst shortcutsModalClose = document.querySelector(\".close-shortcuts-modal\");\r\nconst notifyShortcutsStatus = document.querySelector(\".keyboard-disabled-sm-two\");\r\n\r\nexport default function handleShortCutsModal(store) {\r\n  function createShortcut(key, description) {\r\n    const shortcut = document.createElement(\"div\");\r\n    shortcut.classList.add(\"sm-item\");\r\n\r\n    const shortcutKey = document.createElement(\"div\");\r\n    shortcutKey.classList.add(\"sm-key\");\r\n    const keyone = document.createElement(\"span\");\r\n    if (Array.isArray(key)) {\r\n      const or = document.createElement(\"span\");\r\n      or.textContent = \" or \";\r\n      const keytwo = document.createElement(\"span\");\r\n      keyone.textContent = key[0].toUpperCase();\r\n      keytwo.textContent = key[1].toUpperCase();\r\n      shortcutKey.append(keyone, or, keytwo);\r\n    } else {\r\n      if (key == \"ENTER\" || key == \"ESCAPE\" || key == \"DELETE\") {\r\n        keyone.classList.add(\"key-full\");\r\n      }\r\n      keyone.textContent = key.toUpperCase();\r\n      shortcutKey.appendChild(keyone);\r\n    }\r\n\r\n    const shortcutDescription = document.createElement(\"div\");\r\n    shortcutDescription.classList.add(\"sm-description\");\r\n    if (Array.isArray(description)) {\r\n      shortcut.classList.add(\"sm-item--full\");\r\n      shortcutDescription.classList.add(\"sm-description--full\");\r\n      const descriptionOne = document.createElement(\"span\");\r\n      const descriptionTwo = document.createElement(\"span\");\r\n      descriptionOne.textContent = description[0];\r\n      descriptionTwo.textContent = description[1];\r\n      shortcutDescription.append(descriptionOne, descriptionTwo);\r\n    } else {\r\n      shortcutDescription.textContent = description;\r\n    }\r\n    shortcut.append(shortcutKey, shortcutDescription);\r\n    return shortcut;\r\n  }\r\n\r\n  function handleShortcutsModalClose() {\r\n    shortcutsModalContent.innerText = \"\";\r\n    shortcutsModalOverlay.classList.add(\"hide-shortcuts\");\r\n    shortcutsModal.classList.add(\"hide-shortcuts\");\r\n    store.removeActiveOverlay(\"hide-shortcuts\");\r\n    document.removeEventListener(\"keydown\", closeShortcutsOnKeydown);\r\n  }\r\n\r\n  function closeShortcutsOnKeydown(e) {\r\n    let inp = e.key.toLowerCase();\r\n    if (inp === \"escape\" || inp === \"/\" || inp === \"?\") {\r\n      handleShortcutsModalClose();\r\n    }\r\n  }\r\n\r\n  function setStatusIcon(status) {\r\n    if (status) {\r\n      notifyShortcutsStatus.setAttribute(\"data-tooltip\", \"Keyboard shortcuts enabled\");\r\n      notifyShortcutsStatus.firstElementChild.setAttribute(\"fill\", \"var(--primary1)\");\r\n\r\n    } else {\r\n      notifyShortcutsStatus.setAttribute(\"data-tooltip\", \"Keyboard shortcuts disabled\");\r\n      notifyShortcutsStatus.firstElementChild.setAttribute(\"fill\", \"var(--red1)\");\r\n    }\r\n  }\r\n\r\n  function handleShortcutsModalOpen() {\r\n    shortcutsModalOverlay.classList.remove(\"hide-shortcuts\");\r\n    shortcutsModal.classList.remove(\"hide-shortcuts\");\r\n    store.addActiveOverlay(\"hide-shortcuts\");\r\n\r\n    const status = store.getShortcutsStatus();\r\n    setStatusIcon(status);\r\n\r\n    const shortcuts = store.getShortcuts();\r\n    for (let i = 0; i < Object.values(shortcuts).length; i++) {\r\n      const value = Object.values(shortcuts)[i];\r\n      shortcutsModalContent.appendChild(createShortcut(\r\n        value.shortcut,\r\n        value.action,\r\n      ));\r\n    }\r\n\r\n    function toggleShortcutsStatus() {\r\n      const status = store.getShortcutsStatus() === false ? true : false;\r\n      setStatusIcon(status);\r\n      store.setShortcutsStatus(status);\r\n    }\r\n\r\n    shortcutsModalOverlay.onclick = handleShortcutsModalClose;\r\n    shortcutsModalClose.onclick = handleShortcutsModalClose;\r\n    notifyShortcutsStatus.onclick = toggleShortcutsStatus;\r\n    document.addEventListener(\"keydown\", closeShortcutsOnKeydown);\r\n  }\r\n\r\n  handleShortcutsModalOpen();\r\n}","import setViews from \"../../config/setViews\";\r\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\r\n\r\nimport {\r\n  createCheckIcon,\r\n  createEditIcon,\r\n  createCloseIcon,\r\n  createTrashIcon,\r\n} from \"../../utilities/svgs\";\r\n\r\nimport {\r\n  getClosest,\r\n  placePopup\r\n} from \"../../utilities/helpers\";\r\n\r\nimport createCategoryForm from \"./editCategory\";\r\n\r\nconst sidebarColTwo = document.querySelector(\".sb__categories\");\r\nconst cWrapper = document.querySelector(\".sb__categories--body\");\r\nconst categoriesContainer = document.querySelector(\".sb__categories--body-form\");\r\nconst categoriesHeader = document.querySelector(\".sb__categories--header\");\r\nconst categoryHeaderCaret = document.querySelector(\".sbch-caret\");\r\n// renders via menu click -- see ./renderViews.js\r\n\r\nexport default function handleSidebarCategories(context, store, datepickerContext) {\r\n  const defaultCtg = store.getDefaultCtg()[0];\r\n\r\n  function updateComponent() {\r\n    setViews(context.getComponent(), context, store, datepickerContext);\r\n  }\r\n\r\n  function renderSidebarDatepickerCtg() {\r\n    setSidebarDatepicker(context, store, datepickerContext);\r\n  }\r\n\r\n  function renderCategories() {\r\n    categoriesContainer.innerText = \"\";\r\n    const ctg = store.getAllCtg();\r\n    const keys = Object.keys(ctg);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      let [ctgname, color, status] = [\r\n        keys[i],\r\n        ctg[keys[i]].color,\r\n        ctg[keys[i]].active\r\n      ];\r\n      createCategoryListItem(ctgname, color, status);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} ctgname - category name\r\n   * @param {string} ctgcolor - hex color\r\n   * @param {Boolean} status - checked or not\r\n   */\r\n  function createCategoryListItem(ctgname, ctgcolor, status) {\r\n    const row = document.createElement('div');\r\n    row.classList.add('sbch-form--item');\r\n    const colone = document.createElement('div');\r\n    colone.classList.add('sbch-form--item__col');\r\n    const checkboxWrapper = document.createElement('div');\r\n    checkboxWrapper.classList.add('sbch-form--item__checkbox--wrapper');\r\n    const checkbox = document.createElement('div');\r\n    checkbox.classList.add('sbch-form--item__checkbox');\r\n    checkbox.setAttribute(\"data-sbch-checked\", `${status}`);\r\n    checkbox.setAttribute(\"data-sbch-category\", ctgname);\r\n    let checkIcon;\r\n\r\n    if (status) {\r\n      checkbox.style.backgroundColor = ctgcolor;\r\n      checkIcon = createCheckIcon(\"var(--taskcolor0)\");\r\n    } else {\r\n      checkbox.style.backgroundColor = \"var(--black1)\";\r\n      checkIcon = createCheckIcon(\"none\");\r\n    }\r\n\r\n    checkbox.style.border = `2px solid ${ctgcolor}`;\r\n    checkbox.appendChild(checkIcon);\r\n    checkboxWrapper.appendChild(checkbox);\r\n\r\n    const label = document.createElement('span');\r\n    label.classList.add('sbch-form--item__label');\r\n    label.textContent = ctgname;\r\n    colone.append(checkboxWrapper, label);\r\n\r\n    const coltwo = document.createElement('div');\r\n    coltwo.classList.add('sbch-form--item__col--actions');\r\n    const deleteicon = document.createElement('div');\r\n    deleteicon.classList.add('sbch-col--actions__delete-icon');\r\n    deleteicon.setAttribute(\"data-sbch-category\", ctgname);\r\n    deleteicon.setAttribute(\"data-sbch-color\", ctgcolor);\r\n    const editicon = document.createElement('div');\r\n    editicon.classList.add(\"sbch-col--actions__edit-icon\");\r\n    editicon.setAttribute(\"data-sbch-category\", ctgname);\r\n    editicon.setAttribute(\"data-sbch-color\", ctgcolor);\r\n\r\n    // must have at least one category, so default cannot be deleted\r\n    if (ctgname.toLowerCase() === defaultCtg) {\r\n      editicon.classList.add(\"sbch-col--actions__edit-icon--immutable\");\r\n    } else {\r\n      deleteicon.appendChild(createCloseIcon(\"var(--white2)\"));\r\n      coltwo.appendChild(deleteicon);\r\n    }\r\n\r\n\r\n    editicon.appendChild(createEditIcon(\"var(--white2)\"));\r\n    coltwo.appendChild(editicon);\r\n    row.append(colone, coltwo);\r\n    categoriesContainer.appendChild(row);\r\n  }\r\n\r\n  function handleCategoryModalToggle() {\r\n    cWrapper.classList.toggle(\"toggle-category--modal\");\r\n    if (!cWrapper.classList.contains(\"toggle-category--modal\")) {\r\n      categoryHeaderCaret.classList.add(\"sbch-caret--open\");\r\n    } else {\r\n      categoryHeaderCaret.classList.remove(\"sbch-caret--open\");\r\n    }\r\n    categoriesHeader.style.backgroundColor = \"var(--black0)\";\r\n    setTimeout(() => {\r\n      categoriesHeader.style.backgroundColor = \"var(--black1)\";\r\n    }, 200);\r\n  }\r\n\r\n  function createDeleteCategoryPopup(e) {\r\n    const ctgname = e.target.getAttribute(\"data-sbch-category\");\r\n    const ctgcolor = store.getCtgColor(ctgname);\r\n    const offsetColor = ctgcolor;\r\n    const categoryLength = store.getCtgLength(ctgname);\r\n    let noEntries = false;\r\n\r\n    // POPUP OVERLAY\r\n    const popupBoxOverlay = document.createElement(\"aside\");\r\n    popupBoxOverlay.classList.add(\"popup-delete-ctg__overlay\");\r\n\r\n    // POPUP BOX\r\n    const popupBox = document.createElement(\"aside\");\r\n    popupBox.classList.add(\"popup-delete-ctg\");\r\n    if (categoryLength === 0) {\r\n      noEntries = true;\r\n      popupBox.classList.add(\"popup-delete-ctg__no-entries\");\r\n    }\r\n    const ord = categoryLength === 1 ? \"entry\" : \"entries\";\r\n\r\n    /* **************************** */\r\n    // POPUP HEADER\r\n    const popupHeader = document.createElement(\"div\");\r\n    popupHeader.classList.add(\"popup-delete-ctg__header\");\r\n\r\n    const popupTitle = document.createElement(\"div\");\r\n    popupTitle.classList.add(\"popup-delete-ctg__title\");\r\n    popupTitle.style.border = `2px solid ${ctgcolor}`;\r\n    popupTitle.style.backgroundColor = offsetColor;\r\n    popupTitle.textContent = `removing  \"${ctgname}\"`;\r\n\r\n    const popupCategoryStats = document.createElement(\"div\");\r\n    popupCategoryStats.classList.add(\"popup-delete-ctg__stats\");\r\n    popupCategoryStats.textContent = `(${categoryLength} total ${ord} in this category)`;\r\n    /* **************************** */\r\n    popupHeader.append(popupTitle, popupCategoryStats);\r\n    popupBox.appendChild(popupHeader);\r\n\r\n\r\n    // category has entries -- provide options to move entries to another category or delete them\r\n    // const setChecked = (inp) => {\r\n    //   inp.checked = true;\r\n    // }\r\n    if (!noEntries) {\r\n      // POPUP BODY\r\n      const popupBody = document.createElement(\"div\");\r\n      popupBody.classList.add(\"popup-delete-ctg__body\");\r\n\r\n      // OPTION ONE : MOVE ENTRIES TO ANOTHER CATEGORY\r\n      const optionsWrapperOne = document.createElement(\"div\");\r\n      const categoryNames = store.getAllCtgNames();\r\n      optionsWrapperOne.classList.add(\"popup-delete-ctg__options\");\r\n      optionsWrapperOne.classList.add(\"popup-delete-act\");\r\n      optionsWrapperOne.style.backgroundColor = offsetColor;\r\n      optionsWrapperOne.style.border = `2px solid ${ctgcolor}`;\r\n      const optionMoveRadio = document.createElement(\"input\");\r\n      optionMoveRadio.setAttribute(\"type\", \"radio\");\r\n      optionMoveRadio.setAttribute(\"name\", \"popup-delete-ctg__option\");\r\n      optionMoveRadio.setAttribute(\"id\", \"ctg-move\");\r\n      optionMoveRadio.setAttribute(\"checked\", \"true\");\r\n\r\n      const optionMove = document.createElement(\"div\");\r\n      const optionMoveTitle = document.createElement(\"span\");\r\n      const optionMoveSelect = document.createElement(\"select\");\r\n      optionMove.classList.add(\"popup-delete-ctg__option--move\");\r\n      optionMoveTitle.textContent = `Move \"${ctgname}\" ${ord} to `;\r\n      optionMoveSelect.classList.add(\"popup-delete-ctg__option--move-select\");\r\n      for (let i = 0; i < categoryNames.length; i++) {\r\n        if (categoryNames[i] === ctgname) continue;\r\n        const option = document.createElement(\"option\");\r\n        option.value = categoryNames[i];\r\n        option.textContent = categoryNames[i];\r\n        optionMoveSelect.appendChild(option);\r\n      }\r\n      optionMove.append(optionMoveTitle, optionMoveSelect);\r\n      optionsWrapperOne.append(optionMoveRadio, optionMove);\r\n\r\n\r\n      /* ************ */\r\n      // OPTION TWO : REMOVE CATEGORY AND ENTRIES\r\n      const optionsWrapperTwo = document.createElement(\"div\");\r\n      optionsWrapperTwo.classList.add(\"popup-delete-ctg__options\");\r\n      optionsWrapperTwo.style.border = `2px solid ${ctgcolor}`;\r\n\r\n      const optionRemoveRadio = document.createElement(\"input\");\r\n      optionRemoveRadio.setAttribute(\"type\", \"radio\");\r\n      optionRemoveRadio.setAttribute(\"name\", \"popup-delete-ctg__option\");\r\n      optionRemoveRadio.setAttribute(\"id\", \"ctg-delete\");\r\n\r\n      const optionRemove = document.createElement(\"div\");\r\n      optionRemove.classList.add(\"popup-delete-ctg__option--remove\");\r\n      const optionRemoveTitle = document.createElement(\"span\");\r\n\r\n      optionRemoveTitle.textContent = `Delete \"${ctgname}\" and ${categoryLength} ${ord} (irreversible)`;\r\n      const optionRemoveIcon = createTrashIcon(ctgcolor);\r\n      const handleWrapperClick = (e) => {\r\n        if (e.target.id === \"ctg-delete\" || e.target.id === \"ctg-move\" || e.target.classList.contains(\"popup-delete-ctg__option--move\") || e.target.classList.contains(\"popup-delete-ctg__option--move-select\")) {\r\n          return;\r\n        } else {\r\n          e.target.closest(\".popup-delete-ctg__options\").querySelector(\"input\").checked = true;\r\n          document.querySelectorAll(\".popup-delete-ctg__options\").forEach((el) => {\r\n            // el.style.backgroundColor = \"transparent\";\r\n            el.setAttribute(\"style\", `background-color: transparent; border: 2px solid ${ctgcolor};`);\r\n            el.classList.remove(\"popup-delete-act\");\r\n          });\r\n          // popup-delete-act\r\n          e.target.closest(\".popup-delete-ctg__options\").setAttribute(\"style\", `background-color: ${offsetColor}; border: 2px solid ${ctgcolor};`);\r\n\r\n          e.target.closest(\".popup-delete-ctg__options\").classList.add(\"popup-delete-act\");\r\n        }\r\n      };\r\n\r\n      optionRemove.append(optionRemoveTitle, optionRemoveIcon);\r\n      optionsWrapperTwo.append(optionRemoveRadio, optionRemove);\r\n\r\n      popupBody.append(optionsWrapperOne, optionsWrapperTwo);\r\n      popupBox.appendChild(popupBody);\r\n      optionsWrapperOne.onclick = handleWrapperClick;\r\n      optionsWrapperTwo.onclick = handleWrapperClick;\r\n    }\r\n\r\n\r\n    /* **************************** */\r\n    // POPUP FOOTER\r\n    const popupFooter = document.createElement(\"div\");\r\n    popupFooter.classList.add(\"popup-delete-ctg__footer\");\r\n    const btncancel = document.createElement(\"button\");\r\n    btncancel.textContent = \"cancel\";\r\n    btncancel.classList.add(\"popup-delete-ctg__btn--cancel\");\r\n    btncancel.style.backgroundColor = offsetColor;\r\n    const btnproceed = document.createElement(\"button\");\r\n    btnproceed.classList.add(\"popup-delete-ctg__btn--proceed\");\r\n    btnproceed.textContent = \"proceed\";\r\n    /* **************************** */\r\n    popupFooter.append(btncancel, btnproceed);\r\n    popupBox.appendChild(popupFooter);\r\n    document.body.append(popupBoxOverlay, popupBox);\r\n\r\n    // EVENT LISTENERS\r\n    store.addActiveOverlay(\"popup-delete-ctg__overlay\");\r\n    const closeDeletePopupOnEscape = (e) => {\r\n      if (e.key === \"Escape\") closeDeletePopup();\r\n    };\r\n\r\n    const closeDeletePopup = () => {\r\n      popupBox.remove();\r\n      popupBoxOverlay.remove();\r\n      store.removeActiveOverlay(\"popup-delete-ctg__overlay\");\r\n      document.removeEventListener(\"keydown\", closeDeletePopupOnEscape);\r\n    };\r\n\r\n    const proceedDeletePopup = () => {\r\n      if (!noEntries) {\r\n        const selectedOption = document?.querySelector(\"input[name='popup-delete-ctg__option']:checked\").id;\r\n        const selectedCategory = document.querySelector(\".popup-delete-ctg__option--move-select\").value;\r\n        if (selectedOption === \"ctg-move\") {\r\n          store.moveCategoryEntriesToNewCategory(\r\n            ctgname, selectedCategory\r\n          );\r\n        } else if (selectedOption === \"ctg-delete\") {\r\n          store.removeCategoryAndEntries(ctgname);\r\n        }\r\n      } else {\r\n        store.deleteCategory(ctgname);\r\n      }\r\n\r\n      closeDeletePopup();\r\n      updateComponent();\r\n      renderSidebarDatepickerCtg();\r\n      renderCategories();\r\n    };\r\n\r\n    btnproceed.onclick = proceedDeletePopup;\r\n    popupBoxOverlay.onclick = closeDeletePopup;\r\n    btncancel.onclick = closeDeletePopup;\r\n    document.addEventListener(\"keydown\", closeDeletePopupOnEscape);\r\n  }\r\n\r\n  function handleCategorySelection(e) {\r\n    let checkbox = e.target.children[0].children[0];\r\n    let status = checkbox.getAttribute(\"data-sbch-checked\");\r\n    let cat = checkbox.getAttribute(\"data-sbch-category\");\r\n    let color = store.getCtgColor(cat);\r\n    if (status === \"true\") {\r\n      checkbox.setAttribute(\"data-sbch-checked\", \"false\");\r\n      store.setCategoryStatus(cat, false);\r\n      checkbox.style.backgroundColor = \"var(--black1)\";\r\n      checkbox.firstChild.setAttribute(\"fill\", \"none\");\r\n    } else {\r\n      checkbox.setAttribute(\"data-sbch-checked\", \"true\");\r\n      store.setCategoryStatus(cat, true);\r\n      checkbox.style.backgroundColor = color;\r\n      checkbox.firstChild.setAttribute(\"fill\", \"var(--taskcolor0)\");\r\n    }\r\n    renderSidebarDatepickerCtg();\r\n    updateComponent();\r\n  }\r\n\r\n  function openCategoryOptionsMenu(e, data) {\r\n    const [targetCtg, targetElement] = data;\r\n    let [x, y] = placePopup(\r\n      192,\r\n      128,\r\n      [\r\n        e.clientX,\r\n        parseInt(targetElement.getBoundingClientRect().top) - 8\r\n      ],\r\n      [window.innerWidth, window.innerHeight],\r\n      false,\r\n      null\r\n    );\r\n\r\n    const popupBox = document.createElement(\"div\");\r\n    popupBox.classList.add(\"popup-ctg-options\");\r\n    popupBox.style.top = `${y}px`;\r\n    popupBox.style.left = `${x}px`;\r\n    const popupBoxOverlay = document.createElement(\"div\");\r\n    popupBoxOverlay.classList.add(\"popup-ctg-options__overlay\");\r\n    store.addActiveOverlay(\"popup-ctg-options__overlay\");\r\n\r\n    const optionEdit = document.createElement(\"div\");\r\n    optionEdit.classList.add(\"option__open-ctg-edit\");\r\n    optionEdit.textContent = \"Edit category (name, color)\";\r\n    const optionTurnOff = document.createElement(\"div\");\r\n    optionTurnOff.classList.add(\"option__close-other-ctg\");\r\n    optionTurnOff.textContent = \"Display this only\";\r\n    const optionTurnOn = document.createElement(\"div\");\r\n    optionTurnOn.classList.add(\"option__open-other-ctg\");\r\n    optionTurnOn.textContent = \"Display all but this\";\r\n\r\n    function closeCategoryOptionsMenu(flag, chckbox) {\r\n      document.querySelector(\".popup-ctg-options\").remove();\r\n      document.querySelector(\".popup-ctg-options__overlay\").remove();\r\n      store.removeActiveOverlay(\"popup-ctg-options__overlay\");\r\n      if (flag) { chckbox.removeAttribute(\"style\"); }\r\n      document.removeEventListener(\"keydown\", handleCloseOnEscapeCtgOptionsMenu);\r\n    }\r\n\r\n    function handleOpenEditCtg(e) {\r\n      createCategoryForm(store, targetCtg, true, targetElement);\r\n      closeCategoryOptionsMenu();\r\n    }\r\n\r\n    function rerender() {\r\n      renderSidebarDatepickerCtg();\r\n      updateComponent();\r\n      renderCategories();\r\n    }\r\n\r\n    function closeAndRemoveStyle() {\r\n      closeCategoryOptionsMenu(true, targetElement);\r\n    }\r\n\r\n    function turnoff() {\r\n      store.setAllCategoryStatusExcept(targetCtg.name, false);\r\n      closeAndRemoveStyle();\r\n      rerender();\r\n    }\r\n\r\n    function turnon() {\r\n      store.setAllCategoryStatusExcept(targetCtg.name, true);\r\n      closeAndRemoveStyle();\r\n      rerender();\r\n    }\r\n\r\n    function handleCloseOnEscapeCtgOptionsMenu(e) {\r\n      if (e.key === \"Escape\") { closeAndRemoveStyle(); }\r\n    }\r\n\r\n    popupBox.append(optionEdit, optionTurnOff, optionTurnOn);\r\n    document.body.prepend(popupBoxOverlay, popupBox);\r\n    document.addEventListener(\"keydown\", handleCloseOnEscapeCtgOptionsMenu);\r\n    optionEdit.onclick = handleOpenEditCtg;\r\n    popupBoxOverlay.onclick = closeAndRemoveStyle;\r\n    optionTurnOff.onclick = turnoff;\r\n    optionTurnOn.onclick = turnon;\r\n  }\r\n\r\n  function delegateCategoryEvents(e) {\r\n    const ctgtoggleModal = getClosest(e, \".sbch-col__one\");\r\n    const editctgBtn = getClosest(e, \".sbch-col--actions__edit-icon\");\r\n    const deletectgBtn = getClosest(e, \".sbch-col--actions__delete-icon\");\r\n    const ctgChck = getClosest(e, \".sbch-form--item__col\");\r\n    const ctgPlus = getClosest(e, \".sbch-plus\");\r\n\r\n    if (ctgtoggleModal) {\r\n      handleCategoryModalToggle();\r\n      return;\r\n    }\r\n\r\n    // open category options menu (edit, turn others off, turn others on)\r\n    if (editctgBtn) {\r\n      const targetcat = {\r\n        name: e.target.getAttribute(\"data-sbch-category\"),\r\n        color: e.target.getAttribute(\"data-sbch-color\"),\r\n      };\r\n      const targetparent = e.target.parentElement.parentElement;\r\n      targetparent.style.borderBottom = `2px solid ${targetcat.color}`;\r\n      openCategoryOptionsMenu(\r\n        e, [targetcat, targetparent]\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (deletectgBtn) {\r\n      createDeleteCategoryPopup(e);\r\n      return;\r\n    }\r\n\r\n    // toggle category checkbox and display entries\r\n    if (ctgChck) {\r\n      handleCategorySelection(e);\r\n      return;\r\n    }\r\n\r\n    // create popup with category creation form\r\n    if (ctgPlus) {\r\n      const targetcat = {\r\n        name: \"new category\",\r\n        color: \"#2C52BA\",\r\n      };\r\n      createCategoryForm(store, targetcat, false, e.target);\r\n      return;\r\n    }\r\n  }\r\n\r\n  const initSidebarCategories = () => {\r\n    renderCategories();\r\n    const fullCtgRender = () => {\r\n      renderCategories();\r\n      updateComponent();\r\n    };\r\n    store.setRenderCategoriesCallback(fullCtgRender);\r\n    sidebarColTwo.onmousedown = delegateCategoryEvents;\r\n  };\r\n  initSidebarCategories();\r\n}","import { getDateForStore } from \"../../utilities/dateutils\";\r\nimport setViews from \"../../config/setViews\";\r\nimport { getClosest } from \"../../utilities/helpers\";\r\n\r\n\r\nconst sbdatepicker = document.querySelector(\".datepicker-sidebar\");\r\nconst sbdatepickerBody = document.querySelector(\".sbdatepicker__body--dates\");\r\nconst sbdatepickerTitle = document.querySelector(\".sbdatepicker-title\");\r\n\r\nconst sbdatepickerChangeDate = document.querySelector(\".sb-datepicker-change-date\");\r\n\r\nconst sbyearpickerTitle = document.querySelector(\".sb-yearpicker-title\");\r\nconst sbmonthpickerMonths = document.querySelectorAll(\".sb-monthpicker__month\");\r\n\r\nexport default function setSidebarDatepicker(context, store, datepickerContext) {\r\n\r\n  datepickerContext.setDate(\r\n    context.getYear(),\r\n    context.getMonth(),\r\n    context.getDay()\r\n  );\r\n\r\n  let montharray = datepickerContext.getMonthArray();\r\n  let groupedEntries = store.getMonthEntryDates(montharray);\r\n  let currentWeekStart = context.getWeek();\r\n  let hasweek = false;\r\n  let count = 0;\r\n  let [checkmonth, checkyear] = [null, null];\r\n\r\n  function setDatepickerHeader() {\r\n    const month = datepickerContext.getMonthName();\r\n    const year = datepickerContext.getYear();\r\n    sbdatepickerTitle.textContent = `${month} ${year}`;\r\n  }\r\n\r\n  function createCells(montharray) {\r\n    sbdatepickerBody.innerText = \"\";\r\n    const component = context.getComponent();\r\n\r\n    for (let i = 0; i < montharray.length; i++) {\r\n      const cell = document.createElement(\"div\");\r\n      const datename = document.createElement(\"div\");\r\n      cell.classList.add(\"sbdatepicker__body--dates-cell\");\r\n      datename.classList.add(\"sbdatepicker__body--datename\");\r\n\r\n      if (montharray[i].getMonth() !== datepickerContext.getMonth()) {\r\n        datename.classList.add(\"sbdatepicker__body--datename-disabled\");\r\n      }\r\n\r\n      if (component === \"week\") {\r\n        if (currentWeekStart.getDate() === montharray[i].getDate()) {\r\n          if (currentWeekStart.getMonth() === montharray[i].getMonth()) {\r\n            if (currentWeekStart.getFullYear() === montharray[i].getFullYear()) {\r\n              hasweek = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (hasweek) {\r\n        count++;\r\n        if (count <= 7) {\r\n          cell.classList.add(\"sbdatepicker__body--dates-week\");\r\n        }\r\n      } else {\r\n        cell.classList.remove(\"sbdatepicker__body--dates-week\");\r\n      }\r\n\r\n      if (context.isToday(montharray[i])) {\r\n        datename.setAttribute(\"class\", \"sbdatepicker__body--datename\");\r\n        datename.classList.add(\"sbdatepicker__body--datename-today\");\r\n      }\r\n\r\n      if (montharray[i].getDate() === context.getDateSelected() && montharray[i].getMonth() === datepickerContext.getMonth()) {\r\n        if (!datename.classList.contains(\"sbdatepicker__body--datename-today\")) {\r\n          datename.setAttribute(\"class\", \"sbdatepicker__body--datename\");\r\n          datename.classList.add(\"sbdatepicker__body--datename-selected\");\r\n        }\r\n      }\r\n\r\n      datename.textContent = montharray[i].getDate();\r\n      const formattedDate = getDateForStore(montharray[i]);\r\n      datename.setAttribute(\"data-datepicker-date\", formattedDate);\r\n      if (groupedEntries.includes(formattedDate)) {\r\n        if (!datename.classList.contains(\"sbdatepicker__body--datename-selected\") && !datename.classList.contains(\"sbdatepicker__body--datename-today\")) {\r\n          datename.setAttribute(\"class\", \"sbdatepicker__body--datename\");\r\n          datename.classList.add(\"sbdatepicker__body--datename-entries\");\r\n        }\r\n      } else {\r\n        datename.classList.remove(\"sbdatepicker__body--datename-entries\");\r\n      }\r\n\r\n      cell.appendChild(datename);\r\n      sbdatepickerBody.appendChild(cell);\r\n    }\r\n  }\r\n\r\n  function resetpickerData() {\r\n    montharray = datepickerContext.getMonthArray();\r\n    groupedEntries = store.getMonthEntryDates(montharray);\r\n    currentWeekStart = context.getWeek();\r\n    count = 0;\r\n    hasweek = false;\r\n  }\r\n\r\n  function renderpicker(y, m, d) {\r\n    context.setDate(y, m, d);\r\n    context.setDateSelected(d);\r\n    datepickerContext.setDate(y, m, d);\r\n    setViews(\r\n      context.getComponent(),\r\n      context,\r\n      store,\r\n      datepickerContext,\r\n    );\r\n\r\n    resetpickerData();\r\n    createCells(montharray);\r\n    setDatepickerHeader();\r\n    montharray = [];\r\n  }\r\n\r\n  function renderSelectedDay(e, d) {\r\n    context.setDateSelected(d);\r\n    const selected = document.querySelectorAll(\".sbdatepicker__body--datename-selected\");\r\n    selected.forEach((x) => {\r\n      x.classList.remove(\"sbdatepicker__body--datename-selected\");\r\n    });\r\n    e.target.setAttribute(\"class\", \"sbdatepicker__body--datename\");\r\n    e.target.classList.add(\"sbdatepicker__body--datename-selected\");\r\n  }\r\n\r\n  function renderprevMonth() {\r\n    datepickerContext.setPrevMonth();\r\n    resetpickerData();\r\n    createCells(montharray);\r\n    setDatepickerHeader();\r\n    montharray = [];\r\n  }\r\n\r\n  function rendernextMonth() {\r\n    datepickerContext.setNextMonth();\r\n    resetpickerData();\r\n    createCells(montharray);\r\n    setDatepickerHeader();\r\n    montharray = [];\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {*} e \r\n   * @description some extra steps required for the sidebar datepicker \r\n   * vs any other datepicker due to the fact that the sidebar datepicker will stay open after a date is selected.\r\n   * These extra steps include:\r\n   *  1. do not re render datepicker if the selected date is in the current month, just update the selected date\r\n   *  2. the one exception to above rule is if the component is the week view and the selected date is not in the current week, then re render the datepicker\r\n   *  3. if the component is in the list view (schedule), do not re render the view, just update the selected date\r\n   */\r\n  function setNewDate(e) {\r\n    const target = e.target;\r\n    let [y, m, d] = target.getAttribute(\"data-datepicker-date\").split('-').map(x => parseInt(x));\r\n\r\n    const component = context.getComponent();\r\n\r\n    if (component === \"list\") {\r\n      renderSelectedDay(e, d);\r\n      return;\r\n    }\r\n\r\n    if (component === \"year\") {\r\n      if (context.getYear() !== y) {\r\n        renderpicker(y, m, d);\r\n        return;\r\n      } else {\r\n        renderSelectedDay(e, d);\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (component === \"month\") {\r\n      if (context.getMonth() !== m) {\r\n        renderpicker(y, m, d);\r\n        return;\r\n      } else {\r\n        renderSelectedDay(e, d);\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (component === \"week\") {\r\n      if (e.target.parentElement.classList.contains(\"sbdatepicker__body--dates-week\")) {\r\n        renderSelectedDay(e, d);\r\n        return;\r\n      } else {\r\n        renderpicker(y, m, d);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (component === \"day\") {\r\n      if (context.isToday(new Date(y, m, d))) {\r\n        renderSelectedDay(e, d);\r\n        return;\r\n      } else {\r\n        renderpicker(y, m, d);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  function setCheckMonthYear() {\r\n    checkmonth = datepickerContext.getMonth();\r\n    checkyear = datepickerContext.getYear();\r\n  }\r\n\r\n  function getMonthYearCheck() {\r\n    return checkmonth === datepickerContext.getMonth() && checkyear === datepickerContext.getYear();\r\n  }\r\n\r\n  function openChangeDateModal() {\r\n    setCheckMonthYear();\r\n    sbdatepickerChangeDate.classList.add(\"show-sbdpcd\");\r\n    yearpickerSetYear(null, true);\r\n    monthpickerSetMonth(datepickerContext.getMonth(), true);\r\n  }\r\n\r\n  function closeChangeDateModal() {\r\n    // check if date has changed;\r\n    if (!getMonthYearCheck()) {\r\n      resetpickerData();\r\n      createCells(montharray);\r\n      setDatepickerHeader();\r\n      montharray = [];\r\n    }\r\n    sbdatepickerChangeDate.classList.remove(\"show-sbdpcd\");\r\n  }\r\n\r\n  function monthpickerSetMonth(val, init) {\r\n    const newmonth = val;\r\n\r\n    if (!init && newmonth === datepickerContext.getMonth()) return;\r\n    datepickerContext.setMonth(newmonth);\r\n    sbmonthpickerMonths.forEach((month, idx) => {\r\n      if (idx === newmonth) {\r\n        month.classList.add(\"monthpicker__active-month\");\r\n      } else {\r\n        month.classList.remove(\"monthpicker__active-month\");\r\n      }\r\n    });\r\n  }\r\n\r\n  function yearpickerSetYear(increment, init) {\r\n    if (init) {\r\n      sbyearpickerTitle.textContent = datepickerContext.getYear();\r\n      return;\r\n    }\r\n\r\n    const newyear = parseInt(datepickerContext.getYear()) + increment;\r\n    if (newyear == +datepickerContext.getYear()) return;\r\n    datepickerContext.setYear(newyear);\r\n    sbyearpickerTitle.textContent = newyear;\r\n  }\r\n\r\n  function delegateDatepickerEvents(e) {\r\n    const datenumber = getClosest(e, \".sbdatepicker__body--datename\");\r\n    const navnext = getClosest(e, \".sbdatepicker-nav--next\");\r\n    const navprev = getClosest(e, \".sbdatepicker-nav--prev\");\r\n    const title = getClosest(e, \".sbdatepicker-title\");\r\n    const closeChangeDateBtn = getClosest(e, \".sb-close-change-date\");\r\n    const ypNext = getClosest(e, \".sb-yearpicker-next\");\r\n    const ypPrev = getClosest(e, \".sb-yearpicker-prev\");\r\n    const mpMonth = getClosest(e, \".sb-monthpicker__month\");\r\n\r\n    if (datenumber) {\r\n      setNewDate(e);\r\n      return;\r\n    }\r\n\r\n    if (navnext) {\r\n      rendernextMonth();\r\n      return;\r\n    }\r\n\r\n    if (navprev) {\r\n      renderprevMonth();\r\n      return;\r\n    }\r\n\r\n    if (datenumber) {\r\n      setNewDate(e);\r\n      return;\r\n    }\r\n\r\n    if (title) {\r\n      openChangeDateModal();\r\n      return;\r\n    }\r\n\r\n    if (closeChangeDateBtn) {\r\n      closeChangeDateModal();\r\n      return;\r\n    }\r\n\r\n    if (ypNext) {\r\n      yearpickerSetYear(1, false);\r\n      return;\r\n    }\r\n\r\n    if (ypPrev) {\r\n      yearpickerSetYear(-1, false);\r\n      return;\r\n    }\r\n\r\n    if (mpMonth) {\r\n      const newmonth = parseInt(e.target.getAttribute(\"data-sbdp-month\"));\r\n      monthpickerSetMonth(newmonth, false);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function initsbdatepicker() {\r\n    sbdatepickerChangeDate.classList.remove(\"show-sbdpcd\");\r\n    setDatepickerHeader();\r\n    createCells(montharray);\r\n    sbdatepicker.onmousedown = delegateDatepickerEvents;\r\n    montharray = null;\r\n    groupedEntries = null;\r\n  };\r\n  \r\n  initsbdatepicker();\r\n}","import { getClosest } from \"../../utilities/helpers\";\r\n\r\nconst sidebarFooter = document.querySelector(\".sb__info\");\r\n\r\n// popup containing : project notes, privacy policy, & terms of use\r\nconst sbInfoPopup = document.querySelector(\".sb__info-popup\");\r\nconst sbInfoPopupOverlay = document.querySelector(\".sb__info-popup-overlay\");\r\nconst selectInfo = document.querySelector(\".select-popup-info\");\r\nconst closePopupButton = document.querySelector(\".close-sb-info\");\r\nconst infopopupTitle = document.querySelector(\".sbip-title\");\r\nconst infopopupBody = document.querySelector(\".sbip-content\");\r\n\r\n\r\nexport default function handleSidebarFooter(store) {\r\n\r\n  const infoContent = {\r\n    notes: {\r\n      title: \"Breakdown of project & current status\",\r\n      content: \"These are my project notes\",\r\n    },\r\n    privacy: {\r\n      title: \"Cookies and Data Privacy\",\r\n      content: \"This project uses an open source license\",\r\n    },\r\n    terms: {\r\n      title: \"Code license and terms of use\",\r\n      content: \"All data is stored locally meaning no data is sent to a server.\"\r\n    },\r\n  };\r\n\r\n  function closeInfoPopup() {\r\n    store.removeActiveOverlay(\"hide-sb-info-popup\");\r\n    sbInfoPopup.classList.add(\"hide-sb-info-popup\");\r\n    sbInfoPopupOverlay.classList.add(\"hide-sb-info-popup\");\r\n    document.removeEventListener(\"keydown\", closeInfoPopupOnEscape);\r\n    sbInfoPopupOverlay.onclick = null;\r\n    closePopupButton.onclick = null;\r\n  }\r\n\r\n  function setInfoContent(selection) {\r\n    infopopupTitle.innerText = infoContent[selection].title;\r\n    infopopupBody.innerText = infoContent[selection].content;\r\n  }\r\n\r\n  function handleSelectInfoChange(e) {\r\n    const selection = e.target.value;\r\n    setInfoContent(selection);\r\n  }\r\n\r\n  function closeInfoPopupOnEscape(e) {\r\n    if (e.key === \"Escape\") {\r\n      closeInfoPopup();\r\n    }\r\n  }\r\n\r\n  function setUpInfoPopup() {\r\n    setInfoContent(selectInfo.value);\r\n    selectInfo.onchange = handleSelectInfoChange;\r\n    sbInfoPopupOverlay.onclick = closeInfoPopup;\r\n    closePopupButton.onclick = closeInfoPopup;\r\n    document.addEventListener(\"keydown\", closeInfoPopupOnEscape);\r\n  }\r\n\r\n  function openInfoPopup(selection) {\r\n    const selections = ['notes', 'privacy', 'terms'];\r\n    const idx = selections.indexOf(selection);\r\n    selectInfo.selectedIndex = idx;\r\n\r\n    store.addActiveOverlay(\"hide-sb-info-popup\");\r\n    sbInfoPopup.classList.remove(\"hide-sb-info-popup\");\r\n    sbInfoPopupOverlay.classList.remove(\"hide-sb-info-popup\");\r\n    setUpInfoPopup();\r\n  }\r\n\r\n  function delegateSidebarFooterEvents(e) {\r\n    const projectNotes = getClosest(e, \".sb__project-notes\");\r\n    const privacy = getClosest(e, \".sb__privacy\");\r\n    const terms = getClosest(e, \".sb__terms\");\r\n\r\n    if (projectNotes) {\r\n      openInfoPopup(\"notes\");\r\n      return;\r\n    }\r\n\r\n    if (privacy) {\r\n      openInfoPopup(\"privacy\");\r\n      return;\r\n    }\r\n\r\n    if (terms) {\r\n      openInfoPopup(\"terms\");\r\n      return;\r\n    }\r\n  }\r\n\r\n  sidebarFooter.onmousedown = delegateSidebarFooterEvents;\r\n}","import { getClosest, setTheme } from \"../../utilities/helpers\";\r\nimport { createTimestamp } from \"../../utilities/dateutils\";\r\nimport handleShortCutsModal from \"./shortcutsModal\";\r\n\r\n\r\n\r\nconst sidebarSubMenuOverlay = document.querySelector('.sidebar-sub-menu__overlay');\r\nconst sidebarSubMenu = document.querySelector('.sidebar-sub-menu');\r\nconst closeSubMenuBtn = document.querySelector('.close-sub-menu');\r\nconst closemenu = \"hide-sidebar-sub-menu\";\r\nconst appBody = document.querySelector(\".body\");\r\n\r\n// dark, light, contrast\r\nconst themeRadioBtns = document.querySelectorAll(\".theme-radio__input\");\r\nconst themeRadioOptions = [\"dark\", \"light\", \"contrast\"];\r\n\r\n// keyboard shortcut toggle on/off | open modal\r\nconst shortcutSwitch = document.querySelector(\".smia-toggle-shortcuts-checkbox\");\r\nconst animationsSwitchBtn = document.querySelector(\".smdt-toggle-checkbox\");\r\nconst notifyDisabledShortcutsIcon = document.querySelector(\".keyboard-disabled-sm\");\r\n\r\nexport default function getSidebarSubMenu(store, context) {\r\n\r\n  function closeSubOnEscape(e) {\r\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\r\n    if (e.key === \"Escape\") {\r\n      if (popup) {\r\n        popup.remove();\r\n        sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\r\n        return;\r\n      } else {\r\n        closeSubMenu();\r\n        sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\r\n      }\r\n    }\r\n    if (e.key.toLowerCase() === \"a\") {\r\n      if (popup) {\r\n        return;\r\n      } else {\r\n        closeSubMenu();\r\n      }\r\n    }\r\n  }\r\n\r\n  function createUploadConfirmationPopup() {\r\n    const popup = document.createElement(\"div\");\r\n    popup.classList.add(\"sb-sub-popup-confirm\");\r\n    const [totalEntries, totalCategories] = store.getStoreStats();\r\n\r\n    // let totals;\r\n    let [hasEntries, hasCategories] = [false, false];\r\n    let titleEntries;\r\n    if (totalEntries > 0) {\r\n      hasEntries = `Overwriting ${totalEntries} entries`;\r\n    }\r\n    if (totalCategories > 1) {\r\n      if (totalCategories === 2) {\r\n        hasCategories = \"1 category.\";\r\n      } else {\r\n        hasCategories = `${+totalCategories - 1} categories.`;\r\n      }\r\n    }\r\n\r\n    if (hasEntries && hasCategories) {\r\n      titleEntries = `${hasEntries} and ${hasCategories}`;\r\n    } else if (hasEntries && !hasCategories) {\r\n      titleEntries = `${hasEntries}.`;\r\n    } else if (!hasEntries && hasCategories) {\r\n      titleEntries = `No entries. Overwriting ${hasCategories}`;\r\n    } else {\r\n      titleEntries = \"Current calendar has no entries or categories.\";\r\n    }\r\n\r\n    const subtitle = document.createElement(\"div\");\r\n    subtitle.classList.add(\"sb-sub-popup-subtitle\");\r\n    subtitle.textContent = titleEntries;\r\n    const subtitle2 = document.createElement(\"div\");\r\n    subtitle2.classList.add(\"sb-sub-popup-subtitle\");\r\n    subtitle2.textContent = 'This action is irreversible.';\r\n    const subtitle3 = document.createElement(\"div\");\r\n    subtitle3.classList.add(\"sb-sub-popup-title\");\r\n    subtitle3.textContent = 'Please ensure you have a valid backup before proceeding. Use the \"validate .json\" button next to \"upload .json\" to check that everything is in order.';\r\n\r\n    const btns = document.createElement(\"div\");\r\n    btns.classList.add(\"sb-sub-popup-btns\");\r\n    const cancelBtn = document.createElement(\"button\");\r\n    cancelBtn.classList.add(\"sb-sub-popup-btn--cancel\");\r\n    cancelBtn.textContent = \"Cancel\";\r\n    const proceedBtn = document.createElement(\"button\");\r\n    proceedBtn.classList.add(\"sb-sub-popup-btn--proceed\");\r\n    proceedBtn.textContent = \"Proceed\";\r\n\r\n    btns.append(cancelBtn, proceedBtn);\r\n    console.log(popup);\r\n    popup.append(\r\n      subtitle,\r\n      subtitle2,\r\n      subtitle3,\r\n      btns\r\n    );\r\n    return popup;\r\n  }\r\n\r\n  function closeSubMenu() {\r\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\r\n    if (popup) {\r\n      popup.remove();\r\n      sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\r\n      return;\r\n    } else {\r\n      store.removeActiveOverlay(closemenu);\r\n      sidebarSubMenu.classList.add(closemenu);\r\n      sidebarSubMenuOverlay.classList.add(closemenu);\r\n      document.removeEventListener(\"keydown\", closeSubOnEscape);\r\n      sidebarSubMenuOverlay.onclick = null;\r\n    }\r\n  }\r\n\r\n  function setStatusIcon(status) {\r\n    if (status) {\r\n      notifyDisabledShortcutsIcon.setAttribute(\"data-tooltip\", \"Keyboard shortcuts enabled\");\r\n      notifyDisabledShortcutsIcon.firstElementChild.setAttribute(\"fill\", \"var(--primary1)\");\r\n    } else {\r\n      notifyDisabledShortcutsIcon.setAttribute(\"data-tooltip\", \"Keyboard shortcuts disabled\");\r\n      notifyDisabledShortcutsIcon.firstElementChild.setAttribute(\"fill\", \"var(--red1)\");\r\n    }\r\n  }\r\n\r\n  function openSubMenu() {\r\n    // configure current active status of theme radio btns\r\n    const themeIdx = themeRadioOptions.indexOf(context.getColorScheme());\r\n    themeRadioBtns[themeIdx].checked = true;\r\n\r\n    const shortcutStatus = store.getShortcutsStatus();\r\n    setStatusIcon(shortcutStatus);\r\n    shortcutSwitch.checked = shortcutStatus;\r\n\r\n    const animationStatus = store.getAnimationStatus();\r\n    setAnimationsIcons(animationStatus);\r\n    animationsSwitchBtn.checked = animationStatus;\r\n\r\n    store.addActiveOverlay(closemenu);\r\n    sidebarSubMenu.classList.remove(closemenu);\r\n    sidebarSubMenuOverlay.classList.remove(closemenu);\r\n\r\n    document.addEventListener(\"keydown\", closeSubOnEscape);\r\n    sidebarSubMenuOverlay.onclick = closeSubMenu;\r\n    // closeSubMenuBtn.onclick = closeSubMenu;\r\n  }\r\n\r\n  function getJSONUpload(e) {\r\n    const file = document.createElement(\"input\");\r\n    file.type = \"file\";\r\n    file.accept = \"application/json\";\r\n    file.onchange = (e) => {\r\n      const file = e.target.files[0];\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        const json = JSON.parse(e.target.result);\r\n        store.setUserUpload(json);\r\n        closeSubMenu();\r\n      };\r\n      reader.readAsText(file);\r\n    };\r\n    document.body.appendChild(file);\r\n    file.click();\r\n    document.body.removeChild(file);\r\n    closeSubMenu();\r\n    return;\r\n  }\r\n\r\n  function getJSONDownload() {\r\n    const json = JSON.stringify(localStorage);\r\n    const [totalEntries, totalCategories] = store.getStoreStats();\r\n    const filename = `ENT_${totalEntries}_CAT_${totalCategories}_${createTimestamp()}`;\r\n    const blob = new Blob([json], { type: \"application/json\" });\r\n    const href = URL.createObjectURL(blob);\r\n    const link = document.createElement(\"a\");\r\n    link.href = href;\r\n    link.download = filename + \".json\";\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n\r\n  function removePopup() {\r\n    sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\r\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\r\n    if (popup) {\r\n      popup.remove();\r\n    }\r\n  }\r\n\r\n  function handleCalendarJSON(action) {\r\n    if (action === \"download\") {\r\n      getJSONDownload();\r\n      return;\r\n    }\r\n\r\n    if (action === \"upload\") {\r\n      // create popup to warn user that they are about to overwrite all calendar data\r\n      const popup = createUploadConfirmationPopup();\r\n      document.body.appendChild(popup);\r\n      sidebarSubMenuOverlay.classList.add(\"sub-overlay-vis\");\r\n      // cancel will close popup but keep open sidebar sub menu\r\n      // \"Escape\" key will also close popup but keep open sidebar sub menu\r\n      // \"a\" key will be temporarily disabled while popup is open\r\n      const cancelBtn = popup.querySelector(\".sb-sub-popup-btn--cancel\");\r\n      const proceedBtn = popup.querySelector(\".sb-sub-popup-btn--proceed\");\r\n      cancelBtn.onclick = removePopup;\r\n      proceedBtn.onclick = getJSONUpload;\r\n\r\n      // if user clicks proceed, create blob to open user's local file system\r\n      // const handleProceed = (e) => {\r\n      //   cancelBtn.classList.add(\"hide-cancel-btn\");\r\n      //   let proceedBtnText = \"Waiting for file upload\";\r\n      //   setTimeout(() => {\r\n      //     console.log(\"waiting for file upload\");\r\n      //     proceedBtnText += \".\";\r\n      //     proceedBtn.textContent = proceedBtnText;\r\n      //     if (proceedBtnText.length > 20) {\r\n      //       proceedBtnText = \"Waiting for file upload\";\r\n      //     }\r\n      //   }, 2000);\r\n      //   getJSONUpload(e);\r\n      // }\r\n\r\n\r\n      // check if user has cancelled out of their file explorer\r\n      // const checkForUpload = setInterval(() => {\r\n      //   const userUpload = store.getUserUpload()\r\n      //   if (userUpload) {\r\n      //     clearInterval(checkForUpload);\r\n      //     popup.remove();\r\n      //     sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\r\n      //     store.clearUserUpload()\r\n      //     return;\r\n      //   } else {\r\n      //   }\r\n      // })\r\n    }\r\n  }\r\n\r\n  function handleThemeChange(e) {\r\n    const target = e.target;\r\n    const targetinput = target.firstElementChild;\r\n    const value = targetinput.value;\r\n    targetinput.checked = true;\r\n    const currentTheme = context.getColorScheme();\r\n    if (value === currentTheme) {\r\n      return;\r\n    }\r\n    context.setColorScheme(value);\r\n    setTheme(context);\r\n  }\r\n\r\n  function openKbShortcutMenu() {\r\n    closeSubMenu();\r\n    handleShortCutsModal(store);\r\n  }\r\n\r\n  function toggleShortcuts() {\r\n    const status = shortcutSwitch.checked ? false : true;\r\n    store.setShortcutsStatus(status);\r\n    setStatusIcon(status);\r\n  }\r\n\r\n  function toggleShortcutsIcon() {\r\n    let status = store.getShortcutsStatus();\r\n\r\n    status = !status;\r\n    store.setShortcutsStatus(status);\r\n    setStatusIcon(status);\r\n    shortcutSwitch.checked = status ? true : false;\r\n  }\r\n\r\n  function setAnimationsIcons(val) {\r\n    const parenticonwrapper = document.querySelector(\".toggle-animations-icon__sm\");\r\n    const icons = {\r\n      on: document.querySelector(\".tai-on\"),\r\n      off: document.querySelector(\".tai-off\"),\r\n    };\r\n\r\n    if (val) {\r\n      icons.on.classList.remove(\"hide-tai\");\r\n      icons.off.classList.add(\"hide-tai\");\r\n      parenticonwrapper.setAttribute(\"data-tooltip\", \"Animations Enabled\");\r\n    } else {\r\n      icons.on.classList.add(\"hide-tai\");\r\n      icons.off.classList.remove(\"hide-tai\");\r\n      parenticonwrapper.setAttribute(\"data-tooltip\", \"Animations Disabled\");\r\n    }\r\n  }\r\n\r\n  function toggleAnimations(fromicon) {\r\n    const status = animationsSwitchBtn.checked ? false : true;\r\n    store.setAnimationStatus(status);\r\n    setAnimationsIcons(status);\r\n    if (fromicon) {\r\n      animationsSwitchBtn.checked = status ? true : false;\r\n    }\r\n    if (status) {\r\n      appBody.classList.remove(\"disable-transitions\");\r\n    } else {\r\n      appBody.classList.add(\"disable-transitions\");\r\n    }\r\n  }\r\n\r\n  function delegateSubMenuEvents(e) {\r\n    const downloadjsonBtn = getClosest(e, \".down-json\");\r\n    const uploadjsonBtn = getClosest(e, \".upload-json\");\r\n    const themebtn = getClosest(e, \".theme-option\");\r\n    const kbShortcutMenu = getClosest(e, \".toggle-kb-shortcuts-btn__smia\");\r\n    const shortcutSwitch = getClosest(e, \".smia-disable-shortcuts__btn\");\r\n    const shortcutSwitchNotifyIcon = getClosest(e, \".keyboard-disabled-sm\");\r\n    const animationsSwitch = getClosest(e, \".smdt-toggle\");\r\n    const animationsIcon = getClosest(e, \".toggle-animations-icon__sm\");\r\n    const getCloseSubMenuBtn = getClosest(e, \".close-sub-menu\");\r\n\r\n    if (downloadjsonBtn) {\r\n      handleCalendarJSON(\"download\");\r\n      return;\r\n    }\r\n\r\n    if (uploadjsonBtn) {\r\n      handleCalendarJSON(\"upload\");\r\n      return;\r\n    }\r\n\r\n    if (themebtn) {\r\n      handleThemeChange(e);\r\n      return;\r\n    }\r\n\r\n    if (kbShortcutMenu) {\r\n      openKbShortcutMenu();\r\n      return;\r\n    }\r\n\r\n    if (shortcutSwitch) {\r\n      toggleShortcuts();\r\n      return;\r\n    }\r\n\r\n    if (shortcutSwitchNotifyIcon) {\r\n      toggleShortcutsIcon();\r\n      return;\r\n    }\r\n\r\n    if (animationsSwitch) {\r\n      toggleAnimations();\r\n      return;\r\n    }\r\n\r\n    if (animationsIcon) {\r\n      toggleAnimations(true);\r\n      return;\r\n    }\r\n\r\n    if (getCloseSubMenuBtn) {\r\n      closeSubMenu();\r\n      return;\r\n    }\r\n  }\r\n\r\n  function setSidebarSubMenu() {\r\n    openSubMenu();\r\n    sidebarSubMenu.onmousedown = delegateSubMenuEvents;\r\n  }\r\n  setSidebarSubMenu();\r\n}","import {\r\n  createCloseIcon,\r\n} from \"../../utilities/svgs\";\r\n\r\nimport { getClosest } from \"../../utilities/helpers\";\r\nimport store from \"../../context/store\";\r\n\r\nconst body = document.querySelector(\".body\");\r\nconst toast = document.querySelector(\".toast\");\r\n/**\r\n * \r\n * @param {string} message \r\n * @param {function} callback \r\n * @param {function} callbackTwo \r\n * @param {function} removeCallback \r\n * @param {function} undoCallback \r\n */\r\nexport default function createToast(message, undoCallback) {\r\n\r\n  function closetoast() {\r\n    toast.classList.remove(\"show-toast\");\r\n    toast.innerText = \"\";\r\n    document.onmousedown = null;\r\n    document.onkeydown = null;\r\n    store.removeActiveOverlay(\"toast\");\r\n  }\r\n\r\n  function createToast() {\r\n    toast.innerText = \"\";\r\n\r\n    const toastMessage = document.createElement(\"div\");\r\n    toastMessage.classList.add(\"toast-message\");\r\n    toastMessage.textContent = message;\r\n\r\n    const closeIconWrapper = document.createElement(\"div\");\r\n    closeIconWrapper.classList.add(\"close-toast-icon-wrapper\");\r\n    closeIconWrapper.appendChild(createCloseIcon(\"var(--white4)\"));\r\n\r\n    const undoToastWrapper = document.createElement(\"div\");\r\n    undoToastWrapper.classList.add(\"undo-toast-wrapper\");\r\n    const undoToastMessage = document.createElement(\"div\");\r\n    undoToastMessage.classList.add(\"undo-toast-message\");\r\n    undoToastMessage.textContent = \"Undo\";\r\n    undoToastWrapper.appendChild(undoToastMessage);\r\n\r\n    function delegateToast(e) {\r\n      // if e.target is not in the toast, remove the toast\r\n      const gettoast = getClosest(e, \".toast\");\r\n      if (!gettoast) {\r\n        closetoast();\r\n        return;\r\n      }\r\n\r\n      const getundo = getClosest(e, \".undo-toast-wrapper\");\r\n      const getclose = getClosest(e, \".close-toast-icon-wrapper\");\r\n\r\n      if (getundo) {\r\n        undoCallback();\r\n        closetoast();\r\n        return;\r\n      }\r\n\r\n      if (getclose) {\r\n        closetoast();\r\n        return;\r\n      }\r\n    }\r\n\r\n    function handleToastKeydown(e) {\r\n      if (e.key) {\r\n        closetoast();\r\n      }\r\n    }\r\n\r\n    toast.append(toastMessage, undoToastWrapper, closeIconWrapper);\r\n    toast.classList.add(\"show-toast\");\r\n    store.addActiveOverlay(\"toast\");\r\n\r\n\r\n    document.onkeydown = handleToastKeydown;\r\n    document.onmousedown = delegateToast;\r\n  }\r\n  createToast();\r\n}","import fullFormConfig from \"../forms/formUtils\";\r\nimport FormSetup from \"../forms/setForm\";\r\nimport getEntryOptionModal from \"../menus/entryOptions\";\r\n\r\nimport { Day } from \"../../factory/entries\";\r\n\r\nimport calcTime, { formatTime } from \"../../utilities/timeutils\";\r\n\r\nimport {\r\n  formatStartEndTime,\r\n  getTempDates,\r\n  getFormDateObject,\r\n  formatEntryOptionsDate,\r\n} from \"../../utilities/dateutils\";\r\n\r\nimport { createCloseIcon } from \"../../utilities/svgs\";\r\n\r\nimport handleOverlap, {\r\n  setStylingForEvent,\r\n  updateBoxCoordinates,\r\n  setBoxTimeAttributes,\r\n  createBox,\r\n  createTemporaryBox,\r\n  getBoxDefaultStyle,\r\n  resetStyleOnClick,\r\n  createTempBoxHeader,\r\n  startEndDefault,\r\n  calcNewHourFromCoords,\r\n  calcNewMinuteFromCoords,\r\n  getOriginalBoxObject,\r\n  resetOriginalBox,\r\n} from \"../../utilities/dragutils\";\r\n\r\nimport { getClosest, placePopup } from \"../../utilities/helpers\";\r\n\r\nimport locales from \"../../locales/en\";\r\n\r\n// day view header (row 1)\r\nconst dvHeaderDayNumber = document.querySelector(\".dayview--header-day__title\");\r\nconst dvHeaderDayOfWeek = document.querySelector(\r\n  \".dayview--header-day__number\"\r\n);\r\nconst dvHeaderInfo = document.querySelector(\".dayview--header-day__info\");\r\n\r\n// day view on top container (row 2)\r\nconst dvOnTop = document.querySelector(\".dayview--ontop-container\");\r\n\r\n// main grid wrapper (row 3) (scroll wrapper) (offsettop)\r\nconst dvContainer = document.querySelector(\".calendar__dayview\");\r\nconst dvGrid = document.querySelector(\".dayview__grid\");\r\nconst dvMainGrid = document.querySelector(\".dayview--main-grid\");\r\n\r\nconst dvSideGridWrapper = document.querySelector(\".dayview--side-grid\");\r\n\r\nexport default function setDayView(context, store, datepickerContext) {\r\n  // let entries = store.getDayEntries(context.getDate());\r\n  // let boxes = new Day(entries.day, entries.allDay);\r\n  let entries = null;\r\n  let boxes = null;\r\n  let firstY = null;\r\n\r\n  function firstLastDates(bxs) {\r\n    let longest = 0;\r\n    let shortest = 100;\r\n    for (let i = 0; i < bxs.length; i++) {\r\n      let [tempshort, templong] = [bxs[i].coordinates.y, bxs[i].coordinates.e];\r\n      if (templong > longest) {\r\n        longest = templong;\r\n      }\r\n      if (tempshort < shortest) {\r\n        shortest = tempshort;\r\n      }\r\n    }\r\n    let [h1, h2] = [Math.floor(shortest / 4), Math.floor(longest / 4)];\r\n    let [m1, m2] = [(shortest % 4) * 15, (longest % 4) * 15];\r\n    let [tempdate1, tempdate2] = [\r\n      new Date(bxs[0].start),\r\n      new Date(bxs[0].start),\r\n    ];\r\n    tempdate1.setHours(h1);\r\n    tempdate1.setMinutes(m1);\r\n    tempdate2.setHours(h2);\r\n    tempdate2.setMinutes(m2);\r\n    return formatStartEndTime(tempdate1, tempdate2);\r\n  }\r\n\r\n  function getDayviewHeaderEntryCount() {\r\n    let allboxes = boxes.getAllBoxes();\r\n    if (allboxes.length === 0) {\r\n      return \"no entries\";\r\n    }\r\n    let [endingToday, startingToday] = [0, 0];\r\n    let tempEndCase1;\r\n\r\n    for (let i = 0; i < allboxes.length; i++) {\r\n      const [start, end, current] = [\r\n        new Date(allboxes[i].start),\r\n        new Date(allboxes[i].end),\r\n        context.getDate(),\r\n      ];\r\n\r\n      if (start.getDate() === current.getDate()) {\r\n        startingToday++;\r\n      }\r\n\r\n      if (end.getDate() === current.getDate()) {\r\n        endingToday++;\r\n        tempEndCase1 = allboxes[i];\r\n      }\r\n    }\r\n\r\n    if (startingToday === 1 && endingToday === 1) {\r\n      return `1 entry ( ${formatStartEndTime(\r\n        new Date(allboxes[0].start),\r\n        new Date(allboxes[0].end)\r\n      )} )`;\r\n    }\r\n\r\n    if (startingToday > 1 && startingToday === endingToday) {\r\n      return `${startingToday} entries starting & ending today ( ${firstLastDates(\r\n        boxes.boxes\r\n      )} )`;\r\n    }\r\n\r\n    let fulltitle = \"\";\r\n    if (startingToday > 0) {\r\n      if (startingToday === 1) {\r\n        fulltitle += `${startingToday} entry starting today`;\r\n      } else {\r\n        fulltitle += `${startingToday} entries started`;\r\n      }\r\n    } else {\r\n      fulltitle += `no entries started`;\r\n    }\r\n\r\n    if (endingToday > 0) {\r\n      if (endingToday === 1) {\r\n        fulltitle += `  ${endingToday} ending ( ${formatStartEndTime(\r\n          new Date(tempEndCase1.start),\r\n          new Date(tempEndCase1.end)\r\n        )} )`;\r\n      } else {\r\n        fulltitle += `  ${endingToday} ending ( ${firstLastDates(\r\n          boxes.boxes\r\n        )} )`;\r\n      }\r\n    } else {\r\n      fulltitle += `  no entries ending today`;\r\n    }\r\n    return fulltitle;\r\n  }\r\n\r\n  function createDVSideGridCells() {\r\n    for (let i = 0; i < 24; i++) {\r\n      let hour;\r\n      let md;\r\n\r\n      if (i === 0) {\r\n        hour = \"\";\r\n        md = \"\";\r\n      } else {\r\n        hour = i;\r\n        md = \"AM\";\r\n      }\r\n\r\n      if (hour > 12) {hour -= 12;}\r\n      if (i >= 12) {md = \"PM\";}\r\n\r\n      const dvSideGridCell = document.createElement(\"div\");\r\n      dvSideGridCell.classList.add(\"dv-sidegrid--cell\");\r\n      dvSideGridCell.textContent = `${hour} ${md}`;\r\n      dvSideGridWrapper.appendChild(dvSideGridCell);\r\n    }\r\n  }\r\n\r\n  function configHeader() {\r\n    [dvHeaderDayNumber, dvHeaderDayOfWeek, dvHeaderInfo].forEach((el) => {\r\n      el.innerText = \"\";\r\n    });\r\n\r\n    let gmtOffset = new Date().getTimezoneOffset() / 60;\r\n    if (gmtOffset < 0) {\r\n      gmtOffset = `+${Math.abs(gmtOffset)}`;\r\n    }\r\n\r\n    document.querySelector(\".dv-gmt\").textContent = `UTC ${context.getGmt()}`;\r\n    let day = context.getDay();\r\n    dvHeaderDayOfWeek.textContent = day;\r\n\r\n    if (context.isToday()) {\r\n      dvHeaderDayOfWeek.classList.add(\"dayview--header-day__number--today\");\r\n      dvHeaderDayNumber.style.color = \"var(--primary1)\";\r\n    } else {\r\n      dvHeaderDayOfWeek.classList.remove(\"dayview--header-day__number--today\");\r\n      dvHeaderDayNumber.removeAttribute(\"style\");\r\n    }\r\n    dvHeaderDayNumber.textContent =\r\n      locales.labels.weekdaysShort[context.getWeekday()].toUpperCase();\r\n    dvHeaderInfo.textContent = getDayviewHeaderEntryCount();\r\n  }\r\n\r\n  function resetDayview() {\r\n    dvMainGrid.innerText = \"\";\r\n    dvOnTop.innerText = \"\";\r\n    dvSideGridWrapper.innerText = \"\";\r\n    dvHeaderInfo.innerText = \"\";\r\n    dvContainer.onmousedown = null;\r\n    entries = null;\r\n    boxes = null;\r\n    firstY = null;\r\n  }\r\n\r\n  function openDvMore(entr) {\r\n    store.addActiveOverlay(\"morepopup\");\r\n    const morepopupoverlay = document.createElement(\"aside\");\r\n    morepopupoverlay.classList.add(\"dv--morepopup__overlay\");\r\n\r\n    const morepopup = document.createElement(\"aside\");\r\n    morepopup.classList.add(\"dv--morepopup\");\r\n    morepopup.style.left = `${dvOnTop.offsetLeft}px`;\r\n    morepopup.style.top = `${dvOnTop.offsetTop}px`;\r\n\r\n    const morepopupHeader = document.createElement(\"div\");\r\n    morepopupHeader.classList.add(\"dv--morepopup__header\");\r\n    const morepopupTitle = document.createElement(\"span\");\r\n    morepopupTitle.classList.add(\"dv--morepopup__title\");\r\n    morepopupTitle.textContent = \"Events spanning multiple days\";\r\n    const morepopupClose = document.createElement(\"span\");\r\n    morepopupClose.classList.add(\"dv--morepopup__close\");\r\n    morepopupClose.appendChild(createCloseIcon(\"var(--white3)\"));\r\n    morepopupHeader.append(morepopupTitle, morepopupClose);\r\n    const morepopupBody = document.createElement(\"div\");\r\n    morepopupBody.classList.add(\"dv--morepopup__body\");\r\n\r\n    const createMorePopupEntry = (entry) => {\r\n      const morepopupEntry = document.createElement(\"div\");\r\n      morepopupEntry.classList.add(\"dv--morepopup__entry\");\r\n      morepopupEntry.style.backgroundColor = `${store.getCtgColor(\r\n        entry.category\r\n      )}`;\r\n      morepopupEntry.setAttribute(\"data-sdvt-id\", entry.id);\r\n      const morepopupEntryTitle = document.createElement(\"span\");\r\n      morepopupEntryTitle.classList.add(\"dv--morepopup__entry-title\");\r\n      morepopupEntryTitle.textContent = entry.title;\r\n      const morepopupCategory = document.createElement(\"span\");\r\n      morepopupCategory.classList.add(\"dv--morepopup__entry-category\");\r\n      morepopupCategory.textContent = entry.category;\r\n      const morepopupEntryTime = document.createElement(\"span\");\r\n      morepopupEntryTime.classList.add(\"dv--morepopup__entry-time\");\r\n      morepopupEntryTime.textContent = formatEntryOptionsDate(\r\n        new Date(entry.start),\r\n        new Date(entry.end)\r\n      ).date;\r\n      morepopupEntry.append(\r\n        morepopupEntryTitle,\r\n        morepopupCategory,\r\n        morepopupEntryTime\r\n      );\r\n      return morepopupEntry;\r\n    };\r\n\r\n    entr.forEach((entry) => {\r\n      const morepopupEntry = createMorePopupEntry(entry);\r\n      morepopupBody.appendChild(morepopupEntry);\r\n    });\r\n\r\n    const closemp = () => {\r\n      morepopupoverlay.remove();\r\n      morepopup.remove();\r\n      store.removeActiveOverlay(\"morepopup\");\r\n      document.removeEventListener(\"keydown\", closeMpOnEsc);\r\n      morepopupoverlay.onclick = null;\r\n      morepopupClose.onclick = null;\r\n      morepopupBody.onclick = null;\r\n    };\r\n\r\n    const closeMpOnEsc = (e) => {\r\n      if (e.key === \"Escape\") {\r\n        closemp();\r\n        return;\r\n      }\r\n    };\r\n\r\n    function getEntrItem(e) {\r\n      if (getClosest(e, \".dv--morepopup__entry\")) {\r\n        openStackEntryOnTop(e, closemp);\r\n        return;\r\n      }\r\n    }\r\n\r\n    morepopup.append(morepopupHeader, morepopupBody);\r\n    document.body.prepend(morepopupoverlay, morepopup);\r\n    // document.body.appendChild(morepopup);\r\n    morepopupoverlay.onclick = closemp;\r\n    morepopupClose.onclick = closemp;\r\n    morepopupBody.onclick = getEntrItem;\r\n    // document.querySelector(\".dv--ontop__more\").onclick = null;\r\n    document.addEventListener(\"keydown\", closeMpOnEsc);\r\n  }\r\n\r\n  function openStackEntryOnTop(e, closearg) {\r\n    const target = e.target;\r\n    const id = target.getAttribute(\"data-sdvt-id\");\r\n    const setResetDv = () => {\r\n      console.log(\"reset\");\r\n    };\r\n\r\n    const entry = store.getEntry(id);\r\n    const start = entry.start;\r\n    const color = store.getCtgColor(entry.category);\r\n    const rect = target.getBoundingClientRect();\r\n\r\n    let [x, y] = placePopup(\r\n      400,\r\n      165,\r\n      [parseInt(rect.left), parseInt(rect.top) + 24],\r\n      [window.innerWidth, window.innerHeight],\r\n      false\r\n    );\r\n\r\n    closearg\r\n      ? store.setFormResetHandle(\"day\", closearg)\r\n      : store.setFormResetHandle(\"day\", setResetDv);\r\n    const setup = new FormSetup();\r\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n    setup.setCategory(entry.category, color);\r\n    setup.setDates(getFormDateObject(start, entry.end));\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\r\n\r\n    const modal = document.querySelector(\".entry__options\");\r\n    modal.style.top = +y + \"px\";\r\n    modal.style.left = +x + \"px\";\r\n  }\r\n\r\n  function createStackableEntriesOnTop(entr) {\r\n    const dvOnTopGrid = document.createElement(\"div\");\r\n    dvOnTopGrid.classList.add(\"dayview--ontop__grid\");\r\n    entr.forEach((ent) => {\r\n      const dvOnTopEntry = document.createElement(\"div\");\r\n      dvOnTopEntry.classList.add(\"dayview--ontop__grid-item\");\r\n      dvOnTopEntry.textContent = ent.title;\r\n      dvOnTopEntry.style.backgroundColor = store.getCtgColor(ent.category);\r\n      dvOnTopEntry.setAttribute(\"data-sdvt-id\", ent.id);\r\n      dvOnTopGrid.appendChild(dvOnTopEntry);\r\n    });\r\n    dvOnTop.appendChild(dvOnTopGrid);\r\n  }\r\n\r\n  function createDvTop(entr) {\r\n    const dvtopgrid = document.createElement(\"div\");\r\n    dvtopgrid.classList.add(\"dv--ontop__grid\");\r\n\r\n    if (entr.length > 6) {\r\n      const moremessage = document.createElement(\"div\");\r\n      moremessage.classList.add(\"dv--ontop__more\");\r\n      moremessage.textContent = `${entr.length} more...`;\r\n      dvOnTop.appendChild(moremessage);\r\n      return;\r\n    } else {\r\n      createStackableEntriesOnTop(entr);\r\n    }\r\n  }\r\n\r\n  function renderBoxes() {\r\n    dvMainGrid.innerText = \"\";\r\n    dvOnTop.innerText = \"\";\r\n    createDvTop(boxes.getBoxesTop());\r\n    boxes.getBoxes().forEach((entry) => {\r\n      const y = entry.coordinates.y;\r\n      firstY == null || y < firstY ? (firstY = y) : null;\r\n      createBox(\r\n        dvMainGrid, // column\r\n        entry, // entry object\r\n        \"day\", // current view\r\n        store.getCtgColor(entry.category) // background color\r\n      );\r\n    });\r\n  }\r\n\r\n  /** RESIZE NORTH/SOUTH */\r\n  function resizeBoxNSDay(e, box) {\r\n    setStylingForEvent(\"dragstart\", dvGrid, store);\r\n    document.body.style.cursor = \"move\";\r\n    const col = box.parentElement;\r\n\r\n    let boxhasOnTop = false;\r\n    const boxorig = getOriginalBoxObject(box);\r\n    if (box.classList.contains(\"dv-box-ontop\")) {\r\n      boxhasOnTop = true;\r\n      resetStyleOnClick(\"day\", box);\r\n    }\r\n\r\n    box.classList.add(\"dv-box-resizing\");\r\n    const boxTop = box.offsetTop;\r\n    const headerOffset = parseInt(dvGrid.offsetTop);\r\n    createTemporaryBox(box, col, boxhasOnTop, \"day\");\r\n\r\n    let amountScrolled = parseInt(dvGrid.scrollTop);\r\n    const mousemove = (e) => {\r\n      let newHeight =\r\n        Math.round((e.pageY + amountScrolled - boxTop - headerOffset) / 12.5) *\r\n        12.5;\r\n\r\n      if (newHeight <= 12.5) {\r\n        box.style.height = \"12.5px\";\r\n        return;\r\n      } else if (newHeight + boxTop > 1188) {\r\n        return;\r\n      } else {\r\n        box.style.height = `${newHeight}px`;\r\n      }\r\n    };\r\n\r\n    function mouseup() {\r\n      document.querySelector(\".dv-temporary-box\").remove();\r\n      box.classList.remove(\"dv-box-resizing\");\r\n      if (boxhasOnTop) {\r\n        box.classList.add(\"dv-box-ontop\");\r\n      }\r\n\r\n      if (boxorig.height === box.offsetHeight) {\r\n        resetOriginalBox(box, boxorig);\r\n      } else {\r\n        setBoxTimeAttributes(box, \"day\");\r\n        const start = +box.getAttribute(\"data-dv-start-time\");\r\n        const length = +box.getAttribute(\"data-dv-time-intervals\");\r\n        const time = calcTime(start, length);\r\n        box.setAttribute(\"data-dv-time\", time);\r\n        box.firstChild.nextSibling.firstElementChild.textContent = time;\r\n\r\n        updateBoxCoordinates(box, \"day\", boxes);\r\n        boxes.updateStore(store, box.getAttribute(\"data-dv-box-id\"));\r\n        // check if new position overlaps with other boxes and handle\r\n        if (boxes.getBoxes().length > 1) {\r\n          handleOverlap(null, \"day\", boxes);\r\n        } else {\r\n          box.setAttribute(\"data-dv-box-index\", \"box-one\");\r\n        }\r\n      }\r\n\r\n      configHeader();\r\n      setStylingForEvent(\"dragend\", dvGrid, store);\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    }\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  /** DRAG NORTH/ SOUTH, EAST/ WEST */\r\n  function dragEngineDay(e, box) {\r\n    setStylingForEvent(\"dragstart\", dvGrid, store);\r\n    const col = box.parentElement;\r\n    let boxhasOnTop = false;\r\n\r\n    const startTop = +box.style.top.split(\"px\")[0];\r\n    const boxHeight = +box.style.height.split(\"px\")[0];\r\n    const startCursorY = e.pageY - parseInt(dvGrid.offsetTop);\r\n    const headerOffset = +dvGrid.getBoundingClientRect().top.toFixed(2);\r\n    let [tempX, tempY] = [e.pageX, e.pageY];\r\n    let [sX, sY] = [0, 0];\r\n    let hasStyles = false;\r\n\r\n    /** DRAG NORTH SOUTH */\r\n    const mousemove = (e) => {\r\n      sX = Math.abs(e.clientX - tempX);\r\n      sY = Math.abs(e.clientY - tempY);\r\n      if (!hasStyles) {\r\n        if (sX > 3 || sY > 3) {\r\n          hasStyles = true;\r\n          document.body.style.cursor = \"move\";\r\n          if (box.classList.contains(\"dv-box-ontop\")) {\r\n            boxhasOnTop = true;\r\n            resetStyleOnClick(\"day\", box);\r\n          }\r\n          box.classList.add(\"dv-box-dragging\");\r\n          createTemporaryBox(box, col, boxhasOnTop, \"day\");\r\n          sX = 0;\r\n          sY = 0;\r\n        }\r\n      }\r\n\r\n      const currentCursorY = e.pageY - headerOffset;\r\n      let newOffsetY = currentCursorY - startCursorY;\r\n      let newTop = Math.round((newOffsetY + startTop) / 12.5) * 12.5;\r\n      if (newTop < 0 || currentCursorY < 0) {\r\n        newTop = 0;\r\n        return;\r\n      } else if (newTop + boxHeight > 1188) {\r\n        return;\r\n      }\r\n      box.style.top = `${newTop}px`;\r\n    };\r\n\r\n    const mouseup = () => {\r\n      const tempbox = document?.querySelector(\".dv-temporary-box\");\r\n      // if box did not move, no render needed\r\n      // click event to open form\r\n      if (tempbox === null) {\r\n        const setResetDv = () => {\r\n          setStylingForEvent(\"dragend\", dvGrid, store);\r\n          box.classList.remove(\"dv-box-clicked\");\r\n        };\r\n\r\n        box.classList.add(\"dv-box-clicked\");\r\n        const id = box.getAttribute(\"data-dv-box-id\");\r\n        const entry = store.getEntry(id);\r\n        const start = entry.start;\r\n        const color = box.style.backgroundColor;\r\n        const rect = box.getBoundingClientRect();\r\n\r\n        let [x, y] = placePopup(\r\n          400,\r\n          165,\r\n          [parseInt(rect.left) + 32, parseInt(rect.top) + 32],\r\n          [window.innerWidth, window.innerHeight],\r\n          false\r\n        );\r\n        store.setFormResetHandle(\"day\", setResetDv);\r\n        const setup = new FormSetup();\r\n        setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n        setup.setCategory(entry.category, color);\r\n        setup.setDates(getFormDateObject(start, entry.end));\r\n        fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n        const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n        getEntryOptionModal(\r\n          context,\r\n          store,\r\n          entry,\r\n          datepickerContext,\r\n          finishSetup\r\n        );\r\n\r\n        const modal = document.querySelector(\".entry__options\");\r\n        if (window.innerWidth > 580) {\r\n          modal.style.top = +y + \"px\";\r\n          modal.style.left = x + \"px\";\r\n        } else {\r\n          modal.style.top = \"64px\";\r\n        }\r\n        // ******************\r\n      } else {\r\n        tempbox.remove();\r\n        box.classList.remove(\"dv-box-dragging\");\r\n        if (boxhasOnTop) {\r\n          box.classList.add(\"dv-box-ontop\");\r\n        }\r\n\r\n        setBoxTimeAttributes(box, \"day\");\r\n        const start = +box.getAttribute(\"data-dv-start-time\");\r\n        const length = +box.getAttribute(\"data-dv-time-intervals\");\r\n        const time = calcTime(start, length);\r\n        box.setAttribute(\"data-dv-time\", time);\r\n\r\n        box.children[1].children[0].textContent = time;\r\n        updateBoxCoordinates(box, \"day\", boxes);\r\n        boxes.updateStore(store, box.getAttribute(\"data-dv-box-id\"));\r\n        // check if new position overlaps with other boxes and handle\r\n        if (boxes.getBoxes().length > 1) {\r\n          handleOverlap(null, \"day\", boxes);\r\n        } else {\r\n          box.setAttribute(\"data-dv-box-index\", \"box-one\");\r\n        }\r\n\r\n        configHeader();\r\n        setStylingForEvent(\"dragend\", dvGrid, store);\r\n      }\r\n\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    };\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  function handleDayviewClose() {\r\n    document.querySelector(\".dayview-temp-box\")?.remove();\r\n  }\r\n\r\n  function openDayviewForm(box, category, dates, type) {\r\n    store.setFormResetHandle(\"day\", handleDayviewClose);\r\n\r\n    const openForm = store.getRenderFormCallback();\r\n    const setup = new FormSetup();\r\n\r\n    const [submitType, id, title, description] = type;\r\n    setup.setSubmission(submitType, id, title, description);\r\n    if (submitType === \"create\") {\r\n      box.style.opacity = 0.9;\r\n    }\r\n\r\n    const [categoryName, color] = category;\r\n    setup.setCategory(categoryName, color);\r\n\r\n    const [start, end] = dates;\r\n    setup.setDates(getFormDateObject(start, end));\r\n\r\n    openForm();\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n    fullFormConfig.getConfig(setup.getSetup());\r\n  }\r\n\r\n  /** CREATE BOX ON DRAG */\r\n  function createBoxOnDragDay(e) {\r\n    setStylingForEvent(\"dragstart\", dvGrid, store);\r\n    document.body.style.cursor = \"move\";\r\n    const [tempcategory, color] = store.getFirstActiveCategoryKeyPair();\r\n\r\n    const box = document.createElement(\"div\");\r\n    box.setAttribute(\"class\", \"dv-box dv-box-dragging dayview-temp-box\");\r\n\r\n    // boxheader is static - create from template\r\n    const boxheader = createTempBoxHeader(\"day\");\r\n    const boxcontent = document.createElement(\"div\");\r\n    const boxtime = document.createElement(\"span\");\r\n    const boxtimeend = document.createElement(\"span\");\r\n    boxcontent.classList.add(\"dv-box__content\");\r\n    boxtime.classList.add(\"dv-box-time\");\r\n    boxtimeend.classList.add(\"dv-box-time\");\r\n\r\n    const headerOffset = parseInt(dvGrid.offsetTop);\r\n    const scrolled = parseInt(dvGrid.scrollTop);\r\n    const startCursorY = e.pageY - headerOffset;\r\n\r\n    let y = Math.round((startCursorY + Math.abs(scrolled)) / 12.5) * 12.5;\r\n    box.setAttribute(\"style\", getBoxDefaultStyle(y, color));\r\n\r\n    let coords = { y: +y / 12.5, x: 1, h: 1, e: 2 };\r\n    let [starthour, startmin, endhour, endmin] = startEndDefault(y);\r\n    let movedY = 0;\r\n\r\n    function mousemove(e) {\r\n      movedY += e.movementY;\r\n      let newHeight =\r\n        Math.round((e.pageY + scrolled - y - headerOffset) / 12.5) * 12.5;\r\n      if (newHeight <= 12.5) {\r\n        newHeight = 12.5;\r\n      }\r\n      if (newHeight + y > 1188) {\r\n        newHeight = 1187.5 - y;\r\n      }\r\n\r\n      box.style.height = `${newHeight}px`;\r\n      coords.h = +newHeight / 12.5;\r\n      coords.e = +coords.y + coords.h;\r\n\r\n      endhour = calcNewHourFromCoords(newHeight, y);\r\n      endmin = calcNewMinuteFromCoords(newHeight, y);\r\n\r\n      boxtime.style.wordBreak = \"break-word\";\r\n      boxtime.textContent = `${formatTime(starthour, startmin)}  `;\r\n      boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\r\n    }\r\n\r\n    // append content to temporary box\r\n    boxcontent.append(boxtime, boxtimeend);\r\n    box.append(boxheader, boxcontent);\r\n    e.target.appendChild(box);\r\n\r\n    function mouseup() {\r\n      if (movedY <= 20) {\r\n        if (+coords.y >= 92) {\r\n          coords.y = 92;\r\n          coords.e = 95;\r\n          coords.h = 3;\r\n          box.style.height = \"37.5px\";\r\n          box.style.top = \"1150px\";\r\n          [starthour, startmin] = [23, 0];\r\n          [endhour, endmin] = [23, 45];\r\n          boxtime.textContent = `${formatTime(starthour, startmin)}  `;\r\n          boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\r\n        } else {\r\n          coords.y = starthour * 4;\r\n          coords.e = +coords.y + 4;\r\n          coords.h = 4;\r\n          box.style.height = \"50px\";\r\n          box.style.top = `${+coords.y * 12.5}px`;\r\n          [starthour, startmin] = [starthour, 0];\r\n          [endhour, endmin] = [starthour + 1, 0];\r\n          boxtime.textContent = `${formatTime(starthour, startmin)}  `;\r\n          boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\r\n        }\r\n      }\r\n\r\n      const datesData = getTempDates(\r\n        new Date(context.getDate()),\r\n        [starthour, endhour],\r\n        [startmin, endmin]\r\n      );\r\n\r\n      openDayviewForm(\r\n        box,\r\n        [tempcategory, color],\r\n        datesData,\r\n        [\"create\", null, null, null]\r\n      );\r\n\r\n      setStylingForEvent(\"dragend\", dvGrid, store);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n    }\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  function renderBoxesForGrid() {\r\n    renderBoxes();\r\n    handleOverlap(null, \"day\", boxes);\r\n  }\r\n\r\n  function delegateDayView(e) {\r\n    const dvhresizehandle = getClosest(e, \".dv-box-resize-s\");\r\n    const dvhbox = getClosest(e, \".dv-box\");\r\n    const dvhgrid = getClosest(e, \".dayview--main-grid\");\r\n    const dvhboxTop = getClosest(e, \".dayview--ontop__grid-item\");\r\n    const dvhGrouped = getClosest(e, \".dv--ontop__more\");\r\n\r\n    // resize existing event\r\n    if (dvhresizehandle) {\r\n      resizeBoxNSDay(e, e.target.parentElement);\r\n      return;\r\n    }\r\n\r\n    // drag existing event\r\n    if (dvhbox) {\r\n      dragEngineDay(e, e.target);\r\n      return;\r\n    }\r\n\r\n    // drag empty space to create new event\r\n    if (dvhgrid) {\r\n      createBoxOnDragDay(e, e.target);\r\n      return;\r\n    }\r\n\r\n    // opens stacked all day events (less than 6)\r\n    if (dvhboxTop) {\r\n      openStackEntryOnTop(e);\r\n      return;\r\n    }\r\n\r\n    // opens grouped all day events (more than 6)\r\n    if (dvhGrouped) {\r\n      openDvMore(boxes.getBoxesTop());\r\n      return;\r\n    }\r\n  }\r\n\r\n  function handleScrollToOnInit() {\r\n    if (firstY !== null) {\r\n      let settop = +firstY * 12.5;\r\n      setTimeout(() => {\r\n        dvGrid.scrollTo({\r\n          top: settop,\r\n          behavior: \"instant\",\r\n        });\r\n      }, 4);\r\n    } else {\r\n      const hour = new Date().getHours() * 50;\r\n      setTimeout(() => {\r\n        dvGrid.scrollTo({\r\n          top: hour - 25 <= 0 ? 0 : hour - 25,\r\n          behavior: \"instant\",\r\n        });\r\n      }, 4);\r\n    }\r\n  }\r\n\r\n  const initDayView = () => {\r\n    dvSideGridWrapper.innerText = \"\";\r\n    createDVSideGridCells();\r\n    entries = store.getDayEntries(context.getDate());\r\n    boxes = new Day(entries.day, entries.allDay);\r\n    renderBoxesForGrid();\r\n    configHeader();\r\n    dvContainer.onmousedown = delegateDayView;\r\n    store.setResetPreviousViewCallback(resetDayview);\r\n    handleScrollToOnInit();\r\n  };\r\n\r\n  initDayView();\r\n}\r\n","import getEntryOptionModal from \"../menus/entryOptions\";\r\nimport setViews from \"../../config/setViews\";\r\nimport FormSetup from \"../forms/setForm\";\r\nimport fullFormConfig from \"../forms/formUtils\";\r\nimport {\r\n  getClosest,\r\n  hextorgba\r\n} from '../../utilities/helpers';\r\nimport {\r\n  getdatearray,\r\n  getFormDateObject,\r\n  getDateFromAttribute,\r\n  longerThanDay,\r\n  formatStartEndDate\r\n} from \"../../utilities/dateutils\";\r\nimport { formatStartEndTimes } from \"../../utilities/timeutils\";\r\nimport locales from \"../../locales/en\";\r\n\r\nconst dateTimeTitle = document.querySelector(\".datetime-content--title\");\r\nconst listview = document.querySelector('.listview');\r\nconst listviewBody = document.querySelector('.listview__body');\r\n\r\nexport default function setListView(context, store, datepickerContext) {\r\n  \r\n  let monthNames = locales.labels.monthsShort.map(x => x.toUpperCase());\r\n  let weekDayNames = locales.labels.weekdaysShort.map(x => x.toUpperCase());\r\n  let [todayYear, todayMonth, todayDay] = getdatearray(new Date());\r\n  /*************************************** */\r\n  /* CREATE ROW GROUPS*/\r\n  function createRowGroups(entries) {\r\n    let count = 0;\r\n    for (let [key, value] of Object.entries(entries)) {\r\n      count++;\r\n      const tempdate = new Date(Date.parse(key));\r\n      const [month, day, dow] = [\r\n        tempdate.getMonth(),\r\n        tempdate.getDate(),\r\n        tempdate.getDay()\r\n      ];\r\n\r\n      const [wn, mn] = [weekDayNames[dow], monthNames[month]];\r\n      const rgheader = createRowGroupHeader(wn, mn, day, key, count === 1 ? true : false);\r\n\r\n      const rgContent = document.createElement(\"div\");\r\n      rgContent.classList.add(\"rowgroup-content\");\r\n\r\n      value.sort((a, b) => {\r\n        return new Date(a.end) - new Date(b.end);\r\n      });\r\n\r\n      value.forEach((entry) => {\r\n        rgContent.append(createRowGroupCell(entry));\r\n      });\r\n\r\n      const rg = document.createElement('div');\r\n      rg.classList.add('listview__rowgroup');\r\n      rg.append(rgheader, rgContent);\r\n      listviewBody.appendChild(rg);\r\n    }\r\n  }\r\n\r\n  function createRowGroupHeader(weekname, monthname, day, date, settop) {\r\n    const rgHeader = document.createElement('div');\r\n    rgHeader.classList.add('rowgroup-header');\r\n    const rgHeaderDateNumber = document.createElement('div');\r\n\r\n    rgHeaderDateNumber.classList.add('rowgroup--header__datenumber');\r\n    rgHeaderDateNumber.textContent = day;\r\n    rgHeaderDateNumber.setAttribute(\"data-rgheader-date\", date);\r\n    const rgHeaderDate = document.createElement('div');\r\n    rgHeaderDate.classList.add('rowgroup--header__monthdow');\r\n    rgHeaderDate.textContent = `${monthname}, ${weekname}`;\r\n    if (settop) {\r\n      rgHeaderDateNumber.classList.add(\"top-datenumber\");\r\n      rgHeaderDate.classList.add(\"top-monthdow\");\r\n\r\n    }\r\n    rgHeader.append(rgHeaderDateNumber, rgHeaderDate);\r\n    return rgHeader;\r\n  }\r\n\r\n  function createRowGroupCell(entry) {\r\n    const color = store.getCtgColor(entry.category);\r\n    const [start, end] = [new Date(entry.start), new Date(entry.end)];\r\n    let datetitle;\r\n    if (longerThanDay(start, end)) {\r\n      let tempyear;\r\n      if (start.getFullYear() !== end.getFullYear()) {\r\n        tempyear = +end.getFullYear() - 2000;\r\n      }\r\n\r\n      datetitle = `${monthNames[end.getMonth()]} ${end.getDate()} ${tempyear ? tempyear : \"\"}`;\r\n    } else {\r\n      datetitle = `${formatStartEndTimes(\r\n        [start.getHours(), end.getHours()],\r\n        [start.getMinutes(), end.getMinutes()]\r\n      )}`;\r\n    }\r\n\r\n    const rgCell = document.createElement('div');\r\n    rgCell.classList.add('rowgroup--cell');\r\n    rgCell.setAttribute('data-rgcell-id', entry.id);\r\n    const rgCellColor = document.createElement(\"div\");\r\n    rgCellColor.classList.add(\"rowgroup--cell__color\");\r\n    rgCellColor.style.backgroundColor = color;\r\n    const rgCellTime = document.createElement(\"div\");\r\n    rgCellTime.classList.add(\"rowgroup--cell__time\");\r\n    rgCellTime.textContent = datetitle;\r\n    const rgCellTitle = document.createElement(\"div\");\r\n    rgCellTitle.classList.add(\"rowgroup--cell__title\");\r\n    rgCellTitle.textContent = entry.title;\r\n    rgCell.append(rgCellColor, rgCellTime, rgCellTitle);\r\n    return rgCell;\r\n  }\r\n  /*************************************** */\r\n\r\n  /*************************************** */\r\n  // EVENTS\r\n  function resetCellActive() {\r\n    const activeCell = document?.querySelector(\".rowgroup--cell-active\");\r\n    if (activeCell) {\r\n      activeCell.classList.remove(\"rowgroup--cell-active\");\r\n      activeCell.removeAttribute(\"style\");\r\n    }\r\n  }\r\n\r\n  function getRgContextMenu(cell) {\r\n    const id = cell.getAttribute(\"data-rgcell-id\");\r\n    cell.classList.add(\"rowgroup--cell-active\");\r\n    const entry = store.getEntry(id);\r\n    const start = entry.start;\r\n    const color = store.getCtgColor(entry.category);\r\n    cell.style.backgroundColor = hextorgba(color, 0.7);\r\n\r\n    const rect = cell.getBoundingClientRect();\r\n    const height = cell.offsetHeight;\r\n    const rectTop = parseInt(rect.top) + height;\r\n    const rectLeft = parseInt(rect.left);\r\n    const modalHeight = 165;\r\n\r\n    let y = rectTop + 12;\r\n    if (rectTop + modalHeight > window.innerHeight) {\r\n      y = rectTop - modalHeight - height - 12;\r\n    }\r\n\r\n\r\n    let x = rectLeft;\r\n    if (rectLeft + 150 > window.innerWidth) {\r\n      x = window.innerWidth - 150;\r\n    }\r\n\r\n    // *** config & open form ***\r\n    store.setFormResetHandle(\"list\", resetCellActive);\r\n\r\n    const setup = new FormSetup();\r\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n    setup.setCategory(entry.category, color);\r\n    setup.setDates(getFormDateObject(start, entry.end));\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\r\n    const modal = document.querySelector(\".entry__options\");\r\n    modal.style.top = y + \"px\";\r\n    modal.style.left = x + \"px\";\r\n  }\r\n\r\n  // SWITCH TO DAY VIEW\r\n  function setDayViewLV(target) {\r\n    let [year, month, day] = getDateFromAttribute(target, 'data-rgheader-date', \"month\");\r\n    context.setDate(year, month, day);\r\n    context.setDateSelected(day);\r\n    if (context.getSidebarState() === \"open\") {\r\n      datepickerContext.setDate(year, month, day);\r\n      datepickerContext.setDateSelected(day);\r\n    }\r\n    context.setComponent(\"day\");\r\n    setViews(\"day\", context, store, datepickerContext);\r\n  }\r\n  /*************************************** */\r\n\r\n  /*************************************** */\r\n  // DELEGATION\r\n  function delegateListview(e) {\r\n    const headerNum = getClosest(e, \".rowgroup--header__datenumber\");\r\n    const rgCell = getClosest(e, \".rowgroup--cell\");\r\n\r\n    if (headerNum) {\r\n      setDayViewLV(e.target);\r\n      return;\r\n    }\r\n\r\n    if (rgCell) {\r\n      getRgContextMenu(rgCell);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function resetListview() {\r\n    listviewBody.innerText = \"\";\r\n    listview.onclick = null;\r\n    monthNames = null;\r\n    weekDayNames = null;\r\n  }\r\n  \r\n  const initListView = () => {\r\n    listviewBody.innerText = \"\";\r\n    store.setResetPreviousViewCallback(resetListview);\r\n    \r\n    let activeEnt = store.getActiveEntries();\r\n    if (activeEnt.length === 0) {\r\n      dateTimeTitle.textContent = \"No Entries to Display\";\r\n      return;\r\n    } else {\r\n      let entries = store.sortBy(activeEnt, \"start\", \"desc\");\r\n      let groupedEntries = entries.reduce((acc, curr) => {\r\n        const date = new Date(curr.start);\r\n        const [year, month, day] = getdatearray(date);\r\n        // for parse&group\r\n        const datestring = `${year}-${month}-${day}`; \r\n\r\n        if (year < todayYear) {\r\n          return acc;\r\n        } else if (year === todayYear) {\r\n          if (month < todayMonth) {\r\n            return acc;\r\n          } else if (month === todayMonth && day < todayDay) {\r\n            return acc;\r\n          }\r\n        }\r\n\r\n        if (!acc[datestring]) { acc[datestring] = []; }\r\n        acc[datestring].push(curr);\r\n        return acc;\r\n      }, {});\r\n\r\n      // set the header title to the first date with entries that is not in the past and the last date with entries\r\n      // if no entries are in the future, set the header title to \"Schedule Clear\";\r\n      let keys = Object.keys(groupedEntries);\r\n      const length = keys.length;\r\n      if (length === 0) {\r\n        dateTimeTitle.textContent = \"Schedule Clear\";\r\n      } else {\r\n        // true will slice the year at last two digits if two years are displayed at the same time;\r\n        const earliestDate = new Date(Date.parse(keys[0]));\r\n\r\n        context.setDate(\r\n          earliestDate.getFullYear(),\r\n          earliestDate.getMonth(),\r\n          earliestDate.getDate()\r\n        );\r\n\r\n        context.setDateSelected(earliestDate.getDate());\r\n\r\n        if (context.getSidebarState === \"open\") {\r\n          datepickerContext.setDate(\r\n            earliestDate.getFullYear(),\r\n            earliestDate.getMonth(),\r\n            earliestDate.getDate()\r\n          );\r\n          datepickerContext.setDateSelected(earliestDate.getDate());\r\n        }\r\n\r\n        dateTimeTitle.textContent = formatStartEndDate(\r\n          keys[0],\r\n          keys[length - 1],\r\n          true\r\n        );\r\n      }\r\n\r\n      createRowGroups(groupedEntries);\r\n      listview.onclick = delegateListview;\r\n      activeEnt = null;\r\n      entries = null;\r\n      groupedEntries = null;\r\n      keys = null;\r\n    }\r\n  };\r\n\r\n  initListView();\r\n}","// rendering\r\nimport setViews from \"../../config/setViews\";\r\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\r\nimport fullFormConfig from \"../forms/formUtils\";\r\nimport FormSetup from \"../forms/setForm\";\r\nimport getEntryOptionModal from \"../menus/entryOptions\";\r\n\r\n// Box query\r\nimport MonthBoxQuery from \"../../factory/queries\";\r\n\r\n// date utilities\r\nimport {\r\n  getDateFormatted,\r\n  compareDates,\r\n  createDateFromFormattedString,\r\n  getDateFromAttribute,\r\n  getFormDateObject,\r\n  generateTempStartEnd,\r\n  getDurationSeconds,\r\n} from \"../../utilities/dateutils\";\r\n\r\nimport { createCloseIcon } from \"../../utilities/svgs\";\r\n\r\n// general utilities\r\nimport {\r\n  getClosest,\r\n  hextorgba,\r\n  placePopup\r\n} from '../../utilities/helpers';\r\n\r\n// drag&drop / resize utilities\r\nimport { setStylingForEvent } from \"../../utilities/dragutils\";\r\n\r\n// naming\r\nimport locales from \"../../locales/en\";\r\n\r\nconst resizeoverlay = document.querySelector(\".resize-overlay\");\r\nconst sidebar = document.querySelector(\".sidebar\");\r\nconst monthWrapper = document.querySelector(\".monthview--calendar\");\r\n\r\nexport default function setMonthView(context, store, datepickerContext) {\r\n  const boxquery = new MonthBoxQuery(\r\n    window.innerWidth <= 530 || window.innerHeight <= 470\r\n  );\r\n\r\n  function renderSidebarDatepickerMonth() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\r\n      context.setDateSelected(context.getDay());\r\n      setSidebarDatepicker(context, store, datepickerContext);\r\n    }\r\n  }\r\n\r\n  function handleOverlay(type) {\r\n    if (type === \"hide\") {\r\n      resizeoverlay.classList.add(\"hide-resize-overlay\");\r\n      store.removeActiveOverlay(\"hide-resize-overlay\");\r\n    } else {\r\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\r\n      store.addActiveOverlay(\"hide-resize-overlay\");\r\n    }\r\n  }\r\n\r\n  function setDayViewViaMonth() {\r\n    context.setComponent(\"day\");\r\n    setViews(\"day\", context, store, datepickerContext);\r\n    renderSidebarDatepickerMonth();\r\n  }\r\n\r\n  function renderDayViewViaModal(parentDate) {\r\n    handleOverlay(\"hide\");\r\n    context.setDate(\r\n      parentDate.getFullYear(),\r\n      parentDate.getMonth(),\r\n      parentDate.getDate()\r\n    );\r\n    setDayViewViaMonth();\r\n  }\r\n\r\n  function createBox(id, category, top, title) {\r\n    const box = document.createElement(\"div\");\r\n    box.classList.add(\"monthview--box\");\r\n    box.setAttribute(\"data-monthview-id\", id);\r\n    box.style.backgroundColor = store.getCtgColor(category);\r\n    box.style.top = `${top}px`;\r\n    box.style.height = `${boxquery.getHeight()}px`;\r\n    box.style.width = \"100%\";\r\n\r\n    const boxtitle = document.createElement(\"div\");\r\n    boxtitle.classList.add(\"monthview--title\");\r\n    boxtitle.textContent = title;\r\n    box.appendChild(boxtitle);\r\n    return box;\r\n  }\r\n\r\n  function createGroupedCell(cellDate, count) {\r\n    const groupedBxs = document.createElement('div');\r\n    groupedBxs.classList.add('monthview--daygroup');\r\n    groupedBxs.setAttribute(\"data-mvgrouped-date\", cellDate);\r\n    groupedBxs.setAttribute(\"data-mvgrouped-length\", count);\r\n    const groupedDiv = document.createElement(\"div\");\r\n    groupedDiv.classList.add(\"monthview--grouped\");\r\n    const groupedTitle = document.createElement(\"div\");\r\n    groupedTitle.classList.add(\"monthview--daycontent__grouped-title\");\r\n    groupedTitle.textContent = count + \" \" + \"more...\";\r\n\r\n    groupedDiv.appendChild(groupedTitle);\r\n    groupedBxs.appendChild(groupedDiv);\r\n    return groupedBxs;\r\n  }\r\n\r\n  function createCellHeader(cell, day) {\r\n    const daynumberAndMonth = day.getDate() + \" \" + locales.labels.monthsShort[day.getMonth()];\r\n    const daynumber = document.createElement('span');\r\n    daynumber.classList.add(\"monthview--daynumber\");\r\n    /**\r\n     * case 1: cell does not represent current month\r\n     * case 2: cell represents first day of current month\r\n     * case 3: cell represents today\r\n     * case 4: cell represents days within current month\r\n    **/\r\n    if (day.getMonth() !== context.getMonth()) {\r\n      daynumber.textContent = daynumberAndMonth;\r\n      daynumber.classList.add(\"monthview--daynumber-prevnext\");\r\n    } else if (day.getDate() === 1) {\r\n      daynumber.textContent = daynumberAndMonth;\r\n    } else if (context.isToday(day)) {\r\n      daynumber.textContent = day.getDate();\r\n      daynumber.classList.add(\"monthview--daynumber-today\");\r\n      cell.classList.add(\"monthview--today\");\r\n    } else {\r\n      daynumber.textContent = day.getDate();\r\n    }\r\n    return daynumber;\r\n  }\r\n\r\n  function createCell(day, idx, entry, cellDate) {\r\n    const cellCoordinates = [\r\n      +day.getDay(),        // (x): day of week\r\n      Math.floor((idx) / 7) // (y): week of month\r\n    ];\r\n\r\n    const cell = document.createElement(\"div\");\r\n    cell.classList.add(\"monthview--day\");\r\n    cell.setAttribute(\"data-mv-date\", cellDate);\r\n    cell.setAttribute(\"data-mv-idx\", idx);\r\n    cell.setAttribute(\"data-mv-coordinates\", cellCoordinates);\r\n\r\n    const dayofmonth = document.createElement('div');\r\n    const cellContent = document.createElement('div');\r\n    dayofmonth.classList.add('monthview--dayofmonth');\r\n    cellContent.classList.add('monthview--daycontent');\r\n\r\n    if (day.getMonth() === context.getMonth() && day.getDate() === context.getDateSelected()) {\r\n      dayofmonth.classList.add(\"monthview--dayofmonth-selected\");\r\n    }\r\n    dayofmonth.appendChild(createCellHeader(cell, day));\r\n\r\n    let toptotal = 0; // box.style.top = (box index) * boxquery.getTop()\r\n\r\n    if (entry !== undefined && entry.length > 0) {\r\n\r\n      // handle instances where entries have same day but different month\r\n      entry = entry.filter((el) => new Date(el.start).getMonth() === day.getMonth());\r\n\r\n      if (entry.length >= 6) {\r\n        // automatically group if there are more than 6 entries on a day\r\n        cellContent.appendChild(createGroupedCell(cellDate, entry.length));\r\n        cellContent.classList.add(\"monthview--daycontent-grouped\");\r\n\r\n      } else {\r\n\r\n        // not grouped (less than 6 entries)\r\n        entry.forEach((el, idx) => {\r\n          if (compareDates(new Date(el.start), day)) {\r\n            if (idx > 0) {\r\n              toptotal += boxquery.getTop();\r\n            }\r\n            cellContent.appendChild(createBox(\r\n              el.id,        // entry id\r\n              el.category,  // backgroundColor\r\n              toptotal,     // style.top\r\n              el.title      // entry title\r\n            ));\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    cell.append(dayofmonth, cellContent);\r\n    monthWrapper.appendChild(cell);\r\n  }\r\n\r\n  function resetMonthview() {\r\n    monthWrapper.innerText = \"\";\r\n    monthWrapper.onmousedown = null;\r\n    monthWrapper.onclick = null;\r\n  }\r\n\r\n  function populateCells() {\r\n    monthWrapper.innerText = \"\";\r\n    let montharray = context.getMonthArray();\r\n    let monthentries = store.getMonthEntries(montharray);\r\n    let groupedEntries = store.getGroupedMonthEntries(monthentries);\r\n\r\n    montharray.length < 42\r\n      ? monthWrapper.classList.add(\"five-weeks\")\r\n      : monthWrapper.classList.remove(\"five-weeks\");\r\n\r\n    const dayHasEntry = (day) => {\r\n      const dayEntries = groupedEntries[day.getDate()];\r\n      return dayEntries !== undefined ? dayEntries : [];\r\n    };\r\n\r\n    montharray.forEach((day, idx) => {\r\n      createCell(day, idx, dayHasEntry(day), getDateFormatted(day));\r\n    });\r\n\r\n    montharray = null;\r\n    monthentries = null;\r\n    groupedEntries = null;\r\n  }\r\n\r\n  function getCoordinatesFromCell(cell) {\r\n    return cell.getAttribute(\"data-mv-coordinates\").split(\",\").map((x) => {\r\n      return parseInt(x);\r\n    });\r\n  }\r\n\r\n  function configureForStorage(newCell, clone) {\r\n    let [year, month, day] = getDateFromAttribute(newCell, \"data-mv-date\", \"month\");\r\n    const id = clone.getAttribute(\"data-monthview-id\");\r\n    let tempEntry = store.getEntry(id);\r\n\r\n    let [start, end] = [new Date(tempEntry.start), new Date(tempEntry.end)];\r\n    let tempdate = new Date(year, month, day);\r\n    let diff = getDurationSeconds(start, tempdate);\r\n    let endDay = end.getDate() + Math.floor(diff / 86400) + 1;\r\n\r\n    store.updateEntry(id, {\r\n      start: new Date(\r\n        year, month, day, start.getHours(), start.getMinutes()\r\n      ),\r\n      end: new Date(\r\n        end.getFullYear(), end.getMonth(), endDay, end.getHours(), end.getMinutes()\r\n      ),\r\n    });\r\n  }\r\n\r\n  function createTemporaryBox(box) {\r\n    const clone = box.cloneNode(true);\r\n    monthWrapper.prepend(clone);\r\n    clone.classList.add(\"box-mv-dragactive\");\r\n    clone.focus();\r\n  }\r\n\r\n  function configGroupedCellOnDrop(groupedCell) {\r\n    const count = groupedCell.getAttribute(\"data-mvgrouped-length\");\r\n    groupedCell.setAttribute(\"data-mvgrouped-length\", +count + 1);\r\n    groupedCell.firstChild.firstChild.textContent = `${groupedCell.getAttribute(\"data-mvgrouped-length\")} more...`;\r\n  }\r\n\r\n  function configClonedBoxForDrop(clone) {\r\n    clone.classList.remove(\"box-mv-dragactive\");\r\n    clone.style.top = \"0px\";\r\n    clone.style.left = \"0px\";\r\n    clone.style.width = \"100%\";\r\n    clone.style.height = `${boxquery.getHeight()}px`;\r\n  }\r\n\r\n  function resetCellOnDrop(bxs, transition) {\r\n    if (bxs.length === 0 || bxs === undefined) return;\r\n    for (let i = 0; i < bxs.length; i++) {\r\n\r\n      if (bxs[i] !== undefined && bxs[i] !== null && !bxs[i].classList.contains(\"monthview--box__form-temp\")) {\r\n        bxs[i].style.top = `${i * boxquery.getTop()}px`;\r\n\r\n        if (transition) {\r\n          bxs[i].classList.add(\"monthview--box__drop\");\r\n          setTimeout(() => {\r\n            bxs[i].classList.remove(\"monthview--box__drop\");\r\n          }, 200);\r\n\r\n        } else {\r\n          bxs[i].setAttribute(\"class\", \"monthview--box\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function createGroupedCellOnDrop(cell, content, boxes, clone) {\r\n    const newGroupedCell = document.createElement('div');\r\n    newGroupedCell.classList.add('monthview--daygroup');\r\n    newGroupedCell.setAttribute(\"data-mvgrouped-date\", cell.getAttribute(\"data-mv-date\"));\r\n    newGroupedCell.setAttribute(\"data-mvgrouped-length\", boxes.length);\r\n\r\n    const groupedDiv = document.createElement(\"div\");\r\n    groupedDiv.classList.add(\"monthview--grouped\");\r\n    const groupedTitle = document.createElement(\"div\");\r\n    groupedTitle.classList.add(\"monthview--daycontent__grouped-title\");\r\n    groupedTitle.textContent = boxes.length + \" \" + \"more...\";\r\n\r\n    // reset cell content to empty then append grouped cell\r\n    content.innerText = \"\";\r\n    newGroupedCell.appendChild(groupedDiv);\r\n    groupedDiv.appendChild(groupedTitle);\r\n    content.appendChild(newGroupedCell);\r\n    content.classList.add(\"monthview--daycontent-grouped\");\r\n    clone.remove();\r\n  }\r\n\r\n  // the month view drag and drop system differs from the week & day views\r\n  // see readme for more info (section : drag engine)\r\n  function dragEngineMonth(e, box) {\r\n    setStylingForEvent(\"dragstart\", monthWrapper, store);\r\n    const startDragTime = Date.now();\r\n    const parent = box.parentElement;\r\n    const cell = parent.parentElement;\r\n    cell.classList.add(\"current-drop-zone\");\r\n    const targetModal = document?.querySelector(\".more-modal\");\r\n\r\n    const originalCellLength = parent.childElementCount;\r\n    const [cellX, cellY] = getCoordinatesFromCell(cell);\r\n\r\n    // create cloned box with class box-mv-dragactive\r\n    createTemporaryBox(box);\r\n    const clone = document?.querySelector(\".box-mv-dragactive\");\r\n    clone.setAttribute(\"data-box-mvx\", cellX);\r\n    clone.setAttribute(\"data-box-mvy\", cellY);\r\n\r\n    const cellRect = cell.getBoundingClientRect();\r\n    const cellWidth = parseFloat(cellRect.width.toFixed(2));\r\n    const cellHeight = parseFloat(cellRect.height.toFixed(2));\r\n    const wrapperLeft = parseInt(monthWrapper.offsetLeft);\r\n    const boxRect = box.getBoundingClientRect();\r\n    const boxWidth = parseFloat(boxRect.width);\r\n    const boxHeight = boxquery.getHeight();\r\n\r\n    clone.style.top = `${parent.offsetTop}px`;\r\n    clone.style.width = `${boxWidth}px`;\r\n    clone.style.height = `${boxHeight}px`;\r\n    clone.style.left = `${parent.offsetLeft}px`;\r\n    clone.classList.add(\"hide-mv-clone\")\r\n\r\n    let hasFiveWeeks = monthWrapper.classList.contains(\"five-weeks\");\r\n    let [startcursorx, startcursory] = [e.clientX, e.clientY];\r\n    let [movedX, movedY] = [0, 0];\r\n    let [lastX, lastY] = [cellX, cellY];\r\n    let gaveStyles = false;\r\n    let changeCursor = false;\r\n\r\n    const mousemove = e => {\r\n      movedX = Math.abs(e.clientX - startcursorx);\r\n      movedY = Math.abs(e.clientY - startcursory);\r\n      // Do not apply styles until user has moved the box at least 5px from starting position.\r\n      if (movedX > 1 || movedY > 1) {\r\n        if (!changeCursor) {\r\n          if (targetModal) {\r\n            targetModal.remove();\r\n          }\r\n          document.body.style.cursor = \"move\";\r\n          changeCursor = true;\r\n        }\r\n      }\r\n      if (movedX > 3 || movedY > 3) {\r\n        if (!gaveStyles) {\r\n          box.style.opacity = \"0.5\";\r\n          clone.classList.remove(\"hide-mv-clone\")\r\n        }\r\n        gaveStyles = true;\r\n      }\r\n\r\n      // *********************\r\n      // DRAG EAST / WEST\r\n      let newX = Math.floor((e.clientX - monthWrapper.offsetLeft) / cellWidth);\r\n      // min : first column\r\n      if (newX < 0) {\r\n        newX = 0;\r\n        return;\r\n      }\r\n      // max : last column\r\n      if (newX > 6) {\r\n        newX = 6;\r\n        return;\r\n      }\r\n\r\n      // update new left position once\r\n      if (lastX !== newX) {\r\n        let multX = (newX * cellWidth) + wrapperLeft;\r\n        clone.style.left = `${parseFloat(multX.toFixed(2))}px`;\r\n        lastX = newX;\r\n      }\r\n\r\n\r\n      // *********************\r\n      // DRAG NORTH / SOUTH\r\n      let newY = Math.floor((e.clientY - monthWrapper.offsetTop) / cellHeight);\r\n      // min : first row\r\n      if (newY < 0) {\r\n        newY = 0;\r\n        return;\r\n      }\r\n      // max : last row (5 weeks)\r\n      if (hasFiveWeeks && newY > 4) {\r\n        newY = 4;\r\n        return;\r\n      }\r\n      // max : last row (6 weeks)\r\n      if (!hasFiveWeeks && newY > 5) {\r\n        newY = 5;\r\n        return;\r\n      }\r\n\r\n      // ensure new top position is only calculated if the cursor has moved\r\n      // vertically across a cell border\r\n      if (lastY !== newY) {\r\n        let multY = (newY * cellHeight) + monthWrapper.offsetTop + 16;\r\n        clone.style.top = `${parseFloat(multY.toFixed(2))}px`;\r\n        lastY = newY;\r\n      }\r\n\r\n      // *********************\r\n      // .current-drop-zone\r\n      // Provides a callable reference to the\r\n      // final drop zone initiated on mouseup. \r\n      document.querySelector(\".current-drop-zone\")?.classList.remove(\"current-drop-zone\");\r\n      document.querySelector(`[data-mv-coordinates=\"${newX},${newY}\"]`).classList.add(\"current-drop-zone\");\r\n    };\r\n\r\n    const mouseup = () => {\r\n      const newCell = document?.querySelector(\".current-drop-zone\");\r\n      const endDragTime = Date.now();\r\n      const timeDiff = endDragTime - startDragTime;\r\n      const [newCellX, newCellY] = getCoordinatesFromCell(newCell);\r\n      newCell.classList.remove(\"current-drop-zone\");\r\n      const newCellContent = newCell.children[1];\r\n      const boxes = newCellContent?.children;\r\n      let boxmoved = false;\r\n\r\n      // newcell not found \r\n      // edge case, haven't come across this yet\r\n      if (newCell === undefined || newCell === null) {\r\n        setStylingForEvent(\"dragend\", monthWrapper, store);\r\n        box.style.opacity = \"1\";\r\n        clone.remove();\r\n        boxmoved = false;\r\n        document.removeEventListener(\"mousemove\", mousemove);\r\n        document.removeEventListener(\"mouseup\", mouseup);\r\n        return;\r\n      }\r\n\r\n      // handle case where box is not moved\r\n      // treat as click event if quick enough\r\n      if (newCellX === cellX && newCellY === cellY) {\r\n        boxmoved = false;\r\n        box.style.opacity = \"1\";\r\n        clone.remove();\r\n        if (targetModal) {\r\n          targetModal.remove();\r\n        }\r\n        if (timeDiff < 200) {\r\n          openFormOnClickMV(box, newCell);\r\n        }\r\n\r\n        // box was moved\r\n      } else {\r\n        // case 1 : cell has 6 or more items (more than 6 items)\r\n        // case 2 : cell is not empty and not group (1-5 items)\r\n        // case 3 : cell becomes group (6 items)\r\n        // case 4 : cell is empty\r\n        // cases 1-4 : run update after to update styling\r\n        // (click)     case 5 : box not moved \r\n        // movedX / movedY : cursor distance, i.e. (dragstart to dragend)\r\n        boxmoved = true;\r\n        if (boxes[0] !== undefined) {\r\n\r\n          // grouped cell\r\n          if (boxes[0].classList.contains(\"monthview--daygroup\")) {\r\n            // (case 1)\r\n            configGroupedCellOnDrop(boxes[0]);\r\n            configureForStorage(newCell, clone);\r\n            clone.remove();\r\n            box.remove();\r\n\r\n          } else {\r\n            // ***********************\r\n            // setup for cases 2 & 3 (not grouped/not empty)\r\n            configClonedBoxForDrop(clone);\r\n            clone.classList.remove(\"hide-mv-clone\")\r\n            newCellContent.insertBefore(clone, boxes[0]);\r\n            configureForStorage(newCell, clone);\r\n            box.remove();\r\n            // ***********************\r\n            if (boxes.length <= 5) {\r\n              // (case 2)\r\n              resetCellOnDrop(boxes, true);\r\n            } else {\r\n              // (case 3)\r\n              createGroupedCellOnDrop(newCell, newCellContent, boxes, clone);\r\n            }\r\n          }\r\n        } else {\r\n          // (case 4)\r\n          configClonedBoxForDrop(clone);\r\n          box.remove();\r\n          clone.classList.remove(\"hide-mv-clone\")\r\n          newCellContent.appendChild(clone);\r\n          configureForStorage(newCell, clone);\r\n          renderSidebarDatepickerMonth();\r\n        }\r\n      }\r\n\r\n      if (boxmoved) {\r\n        // & original cell empty \r\n        if (originalCellLength === 1) {\r\n          renderSidebarDatepickerMonth();\r\n        } else {\r\n          // & original cell not empty --- re calculate styling\r\n          resetCellOnDrop(parent.children, true);\r\n        }\r\n      }\r\n      /*******************/\r\n      setStylingForEvent(\"dragend\", monthWrapper, store);\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    };\r\n\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  function getMoreModalEntries(e) {\r\n    const [y, m, d] = getDateFromAttribute(\r\n      e.target.parentElement.parentElement, \"data-mv-date\", \"month\"\r\n    );\r\n    return store.getDayEntriesArray(new Date(y, m, d));\r\n  }\r\n\r\n  function closeMoreModalOnEscape(e) {\r\n    if (e.key === \"Escape\") {\r\n      closeMoreModal();\r\n    }\r\n  }\r\n\r\n  function closeMoreModal() {\r\n    const mm = document?.querySelector(\".more-modal\");\r\n    if (mm) {\r\n      mm.remove();\r\n    }\r\n    handleOverlay(\"hide\");\r\n    document.removeEventListener(\"keydown\", closeMoreModalOnEscape);\r\n  }\r\n\r\n  function createMoreModalBox(moreModalEntries) {\r\n    const modalContent = document.createElement(\"div\");\r\n    modalContent.classList.add(\"more-modal-content\");\r\n    for (let i = 0; i < moreModalEntries.length; i++) {\r\n      const entry = moreModalEntries[i];\r\n\r\n      const modalEntry = document.createElement(\"div\");\r\n      modalEntry.classList.add(\"more-modal-entry\");\r\n      modalEntry.style.top = `${i * 22}px`;\r\n\r\n      modalEntry.style.width = `calc(100% - 16px)`;\r\n      modalEntry.style.height = \"20px\";\r\n      modalEntry.setAttribute(\"data-monthview-id\", entry.id);\r\n      modalEntry.setAttribute(\"data-mvhidden-category\", entry.category);\r\n      modalEntry.style.backgroundColor = store.getCtgColor(entry.category);\r\n\r\n      const modalEntryTitle = document.createElement(\"div\");\r\n      modalEntryTitle.classList.add(\"more-modal-entry-title\");\r\n      modalEntryTitle.textContent = entry.title;\r\n\r\n      modalEntry.appendChild(modalEntryTitle);\r\n      modalContent.appendChild(modalEntry);\r\n    }\r\n    return modalContent;\r\n  }\r\n  // if more than four tasks exist in a cell, group them on next reload\r\n  function createMoreModal(e) {\r\n    const moreModalEntries = getMoreModalEntries(e);\r\n    handleOverlay(\"show\");\r\n    // parent : month cell\r\n    const parent = e.target.parentElement.parentElement;\r\n    const modal = document.createElement(\"div\");\r\n    modal.classList.add(\"more-modal\");\r\n    modal.setAttribute(\"data-mv-modal\", parent.getAttribute(\"data-mv-idx\"));\r\n\r\n    let modalHeight = (moreModalEntries.length * 28) + 64;\r\n\r\n    if (modalHeight > 400) {\r\n      modalHeight = 400;\r\n    }\r\n\r\n    const rect = parent.getBoundingClientRect();\r\n    let newleft = parseInt(rect.left);\r\n    let rectWidth = parseInt(rect.width);\r\n\r\n    let [x, y] = placePopup(\r\n      216,\r\n      modalHeight,\r\n      [parseInt(rect.left), parseInt(rect.top)],\r\n      [window.innerWidth, window.innerHeight],\r\n      true,\r\n      rectWidth\r\n      // parseInt(rect.width)\r\n    );\r\n\r\n    let maxH = +window.innerHeight - +y - 24;\r\n    modal.setAttribute(\"style\", `top: ${y}px; left: ${x}px; width: 216px; height: ${modalHeight}px; min-height: 120px; max-height: ${maxH}px;`);\r\n\r\n    const modalHeader = document.createElement(\"div\");\r\n    modalHeader.classList.add(\"more-modal-header\");\r\n    const modalHeaderTitle = document.createElement(\"div\");\r\n    modalHeaderTitle.classList.add(\"more-modal-header-title\");\r\n    const parentDate = createDateFromFormattedString(e.target.parentElement.parentElement.getAttribute(\"data-mv-date\"));\r\n\r\n    // dayn: daynumber (1, 2, 3, etc)\r\n    const dowspan = document.createElement(\"span\");\r\n    dowspan.classList.add(\"more-modal-header-title-dow\");\r\n    dowspan.textContent = locales.labels.weekdaysShort[parentDate.getDay()].toUpperCase();\r\n\r\n    const daynspan = document.createElement(\"span\");\r\n    daynspan.classList.add(\"more-modal-header-title-dayn\");\r\n    daynspan.textContent = parentDate.getDate();\r\n\r\n    const modalHeaderClose = document.createElement(\"div\");\r\n    modalHeaderClose.classList.add(\"more-modal-header-close\");\r\n    modalHeaderClose.appendChild(createCloseIcon(\"var(--white3)\"));\r\n    modalHeaderClose.setAttribute(\"data-tooltip\", \"Close\");\r\n\r\n    modalHeaderTitle.append(modalHeaderClose, dowspan, daynspan);\r\n    modalHeader.appendChild(modalHeaderTitle);\r\n    modal.append(modalHeader, createMoreModalBox(moreModalEntries)); //entries\r\n    monthWrapper.appendChild(modal);\r\n\r\n    // open day view (number click)\r\n    daynspan.addEventListener(\"click\", () => {\r\n      renderDayViewViaModal(parentDate);\r\n    }, { once: true });\r\n\r\n    // click away from modal to close\r\n    resizeoverlay.addEventListener(\"click\", (e) => {\r\n      closeMoreModal();\r\n    }, { once: true });\r\n\r\n    document.addEventListener(\"keydown\", closeMoreModalOnEscape);\r\n  }\r\n\r\n  function dragOutOfModal(e) {\r\n    const targetModal = document.querySelector(\".more-modal\");\r\n    const targetCellIdx = parseInt(targetModal.getAttribute(\"data-mv-modal\"));\r\n    const targetCell = document.querySelector(`[data-mv-idx=\"${targetCellIdx}\"]`);\r\n\r\n    const cloned = e.target.cloneNode(true);\r\n    cloned.setAttribute(\"class\", \"monthview--box\");\r\n    cloned.firstChild.setAttribute(\"class\", \"monthview--title\");\r\n    cloned.style.top = `${boxquery.getTop()}px`;\r\n    cloned.style.left = \"0px\";\r\n    cloned.style.width = \"100%\";\r\n    targetCell.lastChild.appendChild(cloned);\r\n\r\n    // update title of more modal to reflect one less entry\r\n    const moreModal = targetCell.lastChild.firstChild;\r\n    const newLength = parseInt(moreModal.getAttribute(\"data-mvgrouped-length\")) - 1;\r\n\r\n    if (newLength < 1) {\r\n      targetCell.lastChild.classList.remove(\"monthview--daycontent-grouped\");\r\n      moreModal.remove();\r\n      cloned.style.top = \"0px\";\r\n    } else {\r\n      moreModal.setAttribute(\"data-mvgrouped-length\", newLength);\r\n      moreModal.firstChild.firstChild.textContent = `${newLength} more...`;\r\n    }\r\n\r\n    // instantiate drag engine on cloned element and destroy the more modal instance\r\n    // \r\n    dragEngineMonth(e, cloned);\r\n    cloned.focus();\r\n    targetModal.style.opacity = \"0.8\";\r\n  }\r\n\r\n  function openDayView(e) {\r\n    const [year, month, day] = getDateFromAttribute(\r\n      e.target.parentElement, \"data-mv-date\", \"month\"\r\n    );\r\n    context.setDate(year, month, day);\r\n    context.setDateSelected(day);\r\n    setDayViewViaMonth();\r\n  }\r\n\r\n  function handleMonthviewEditFormClose() {\r\n    const tempcell = document.querySelector(\".monthview--daycontent__form-temp\");\r\n    if (!tempcell) return;\r\n\r\n    tempcell.removeAttribute(\"style\");\r\n    tempcell.classList.remove(\"monthview--daycontent__form-temp\");\r\n  }\r\n\r\n  // reset cell to original state if form is closed without any action\r\n  function handleMonthviewFormClose() {\r\n    const tempbox = document?.querySelector(\".monthview--box__form-temp\");\r\n    if (!tempbox) return;\r\n    const cellContent = tempbox.parentElement;\r\n    const cell = cellContent.parentElement;\r\n    cell.removeAttribute(\"style\");\r\n    cell.classList.remove(\"monthview--daycontent__form-temp\");\r\n    tempbox.remove();\r\n    resetCellOnDrop(cellContent.children, false);\r\n  }\r\n\r\n  function openFormOnClickMV(box, cell) {\r\n    const id = box.getAttribute(\"data-monthview-id\");\r\n    const entry = store.getEntry(id);\r\n    const start = entry.start;\r\n    const color = store.getCtgColor(entry.category);\r\n    const offsetColor = hextorgba(color, 0.5);\r\n    cell.classList.add(\"monthview--daycontent__form-temp\");\r\n    cell.style.backgroundColor = offsetColor;\r\n\r\n    const rect = cell.getBoundingClientRect();\r\n    let [x, y] = placePopup(\r\n      360,\r\n      165,\r\n      [parseInt(rect.left), parseInt(rect.top)],\r\n      [window.innerWidth, window.innerHeight]\r\n    );\r\n    // *** config & open form ***\r\n    store.setFormResetHandle(\"month\", handleMonthviewEditFormClose);\r\n\r\n    const setup = new FormSetup();\r\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n    setup.setCategory(entry.category, color);\r\n    setup.setDates(getFormDateObject(start, entry.end));\r\n\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n    // Entry option modal will either trigger or release the above setup\r\n    // provide callback to finish setup and open form\r\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\r\n    const modal = document.querySelector(\".entry__options\");\r\n    modal.style.top = y + \"px\";\r\n    modal.style.left = x + \"px\";\r\n    // *******************\r\n  }\r\n\r\n  function configNewBoxInsertion(cellWrapper, cell, category, color) {\r\n    const tempBox = createBox(\r\n      'temp',          // box.id\r\n      category,        // box.style.backgroundColor \r\n      0,               // box.style.top\r\n      \"( New Entry )\"  // box title\r\n    );\r\n    cellWrapper.scrollTop = 0;\r\n    tempBox.classList.add(\"monthview--box__form-temp\");\r\n    cell.classList.add(\"monthview--daycontent__form-temp\");\r\n    cell.style.backgroundColor = color;\r\n    if (cellWrapper.children.length > 0) {\r\n      cellWrapper.insertBefore(tempBox, cellWrapper.children[0]);\r\n      resetCellOnDrop(cellWrapper.children, false);\r\n    } else {\r\n      cellWrapper.appendChild(tempBox);\r\n    }\r\n  }\r\n\r\n  function createEntryOnEmptyTarget(e, cellWrapper) {\r\n    if (e.target.classList.contains(\"monthview--daycontent\")) {\r\n      // get first active category & create temp box with its color\r\n      const cell = cellWrapper.parentElement;\r\n      const rect = cell.getBoundingClientRect();\r\n      const [start, end] = generateTempStartEnd(\r\n        getDateFromAttribute(cell, \"data-mv-date\", \"month\")\r\n      );\r\n\r\n      // handle case where no category is active\r\n      let tempctg;\r\n      let color;\r\n      if (store.getActiveCategories() === undefined) {\r\n        let tempdefaultctg = store.getDefaultCtg();\r\n        tempctg = tempdefaultctg[0];\r\n        color = tempdefaultctg[1].color;\r\n      } else {\r\n        let tempcurrentctg = store.getFirstActiveCategoryKeyPair();\r\n        tempctg = tempcurrentctg[0];\r\n        color = tempcurrentctg[1];\r\n      }\r\n      const offsetcolor = hextorgba(color, 0.5);\r\n\r\n      configNewBoxInsertion(cellWrapper, cell, tempctg, offsetcolor);\r\n      store.setFormResetHandle(\"month\", handleMonthviewFormClose);\r\n      const openForm = store.getRenderFormCallback();\r\n      const setup = new FormSetup();\r\n\r\n      setup.setSubmission(\"create\", null, null, null);\r\n      setup.setCategory(tempctg, color);\r\n      setup.setDates(getFormDateObject(start, end));\r\n\r\n      openForm();\r\n      fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n      fullFormConfig.getConfig(setup.getSetup());\r\n      fullFormConfig.setFormStyle(\r\n        parseInt(rect.right),\r\n        parseInt(rect.top),\r\n        false,\r\n        null\r\n      );\r\n    }\r\n  }\r\n\r\n  function delegateMonthEvents(e) {\r\n    // delegates via monthview--box (monthWrapper) onmousedown\r\n    const monthviewBox = getClosest(e, \".monthview--box\");\r\n    const monthviewBoxHeader = getClosest(e, \".monthview--dayofmonth\");\r\n    const groupedBox = getClosest(e, \".monthview--daygroup\");\r\n    const groupedBoxItem = getClosest(e, \".more-modal-entry\");\r\n    const closeGroupedBox = getClosest(e, \".more-modal-header-close\");\r\n\r\n    // target : any box (task/event) within a day\r\n    // execute : drag and drop\r\n    if (monthviewBox) {\r\n      if (window.innerHeight <= 280) return;\r\n      dragEngineMonth(e, e.target);\r\n      return;\r\n    }\r\n\r\n    // target : cell day number\r\n    // execute : open day view of that day \r\n    if (monthviewBoxHeader) {\r\n      openDayView(e);\r\n      return;\r\n    }\r\n\r\n    // target : grouped box (more...)\r\n    // execute : create popup modal with all grouped entries of that day\r\n    if (groupedBox) {\r\n      createMoreModal(e);\r\n      return;\r\n    }\r\n\r\n    // target : entry within more modal \r\n    // execute : drag box (e.target) out of the more modal for reassignment, (same day works as well)\r\n    if (groupedBoxItem) {\r\n      if (window.innerHeight <= 300) return;\r\n      dragOutOfModal(e);\r\n      return;\r\n    }\r\n\r\n    // target : close btn within more modal\r\n    if (closeGroupedBox) {\r\n      closeMoreModal();\r\n      return;\r\n    }\r\n  }\r\n\r\n  function delegateNewBox(e) {\r\n    // delegates via monthview--daycontent (cellWrapper) onclick\r\n    // note that this is the same parent element that delegates mouse down events\r\n    // second delegation is needed to prevent the scrollbars that exist within the cells (days) from triggering the creation of a new entry on cell click\r\n    const emptyBoxClick = getClosest(e, \".monthview--daycontent\");\r\n    if (emptyBoxClick) {\r\n      if (window.innerHeight <= 300) return;\r\n      createEntryOnEmptyTarget(e, e.target);\r\n      return;\r\n    }\r\n  }\r\n\r\n  // event listener is added & removed @ ./setViews.js\r\n  // function getMonthviewResize() {\r\n  //   let lastquery = boxquery.getFlag();\r\n  //   console.log('ran')\r\n  //   boxquery.updateFlag();\r\n  //   // run once per query change\r\n  //   if (lastquery === boxquery.getFlag()) return;\r\n  //   const boxes = document.querySelectorAll(\".monthview--box\");\r\n  //   const querytop = boxquery.getTop();\r\n  //   const queryHeight = boxquery.getHeight();\r\n  //   const prevtop = boxquery.getPrevTop(querytop);\r\n  //   boxes.forEach(box => {\r\n  //     // always set height \r\n  //     box.style.height = `${queryHeight}px`;\r\n  //     let currenttop = parseInt(box.style.top);\r\n  //     if (currenttop === 0) {\r\n  //       return;\r\n  //     } else {\r\n  //       // get previous query top to find index of curren top then calc\r\n  //       let idx = currenttop / prevtop;\r\n  //       box.style.top = `${idx * querytop}px`;\r\n  //     }\r\n  //   });\r\n  // }\r\n\r\n  const initMonth = () => {\r\n    populateCells();\r\n    monthWrapper.onmousedown = delegateMonthEvents;\r\n    monthWrapper.onclick = delegateNewBox;\r\n    store.setResetPreviousViewCallback(resetMonthview);\r\n    // const handleMVResize = debounce(getMonthviewResize, 40);\r\n    // store.setResizeHandle(\"month\", handleMVResize);\r\n  };\r\n\r\n  initMonth();\r\n}","import setViews from \"../../config/setViews\";\r\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\r\nimport fullFormConfig from \"../forms/formUtils\";\r\nimport FormSetup from \"../forms/setForm\";\r\nimport getEntryOptionModal from \"../menus/entryOptions\";\r\nimport { Week } from \"../../factory/entries\";\r\nimport locales from \"../../locales/en\";\r\nimport calcTime, { formatTime } from \"../../utilities/timeutils\";\r\n\r\nimport {\r\n  createCloseIcon,\r\n  createMeatballVertIcon,\r\n  createExpandDownIcon\r\n} from \"../../utilities/svgs\";\r\n\r\nimport {\r\n  formatStartEndDate,\r\n  getTempDates,\r\n  getFormDateObject,\r\n  getDateFromAttribute,\r\n  getDayOrdinal\r\n} from \"../../utilities/dateutils\";\r\n\r\nimport handleOverlap, {\r\n  setStylingForEvent,\r\n  updateBoxCoordinates,\r\n  setBoxTimeAttributes,\r\n  createBox,\r\n  createTemporaryBox,\r\n  getBoxDefaultStyle,\r\n  resetStyleOnClick,\r\n  createTempBoxHeader,\r\n  startEndDefault,\r\n  getOriginalBoxObject,\r\n} from \"../../utilities/dragutils\";\r\n\r\nimport { getClosest, placePopup } from \"../../utilities/helpers\";\r\n\r\n// main app sidebar\r\nconst sidebar = document.querySelector('.sidebar');\r\n// calendar overlay\r\nconst resizeoverlay = document.querySelector(\".resize-overlay\");\r\n// weekview main grid wrapper & children\r\nconst main = document.querySelector(\".weekview\");\r\nconst container = document.querySelector(\".weekview--calendar\");\r\nconst weekviewHeaderDayNumber = document.querySelectorAll(\".weekview--header-day__number\");\r\n\r\nconst weekviewGrid = document.querySelector(\".weekview__grid\");\r\nconst weekviewSideGrid = document.querySelector(\".weekview--sidebar\");\r\n\r\nconst topCols = document.querySelectorAll(\".allday--col\");\r\n\r\nconst cols = document.querySelectorAll(\".week--col\");\r\n\r\nexport default function setWeekView(context, store, datepickerContext) {\r\n  const weekArray = context.getWeekArray();\r\n  let entries = store.getWeekEntries(weekArray);\r\n  let boxes = new Week(entries.day, entries.allDay);\r\n  let firstY = null;\r\n\r\n  function setDayView(e) {\r\n    let [yr, mo, da] = getDateFromAttribute(e.target, \"data-weekview-date\");\r\n    context.setDate(yr, mo, da);\r\n    context.setDateSelected(da);\r\n    context.setComponent(\"day\");\r\n    setViews(\"day\", context, store, datepickerContext);\r\n  }\r\n\r\n  function createWVSideGridCells() {\r\n    for (let i = 0; i < 24; i++) {\r\n      let hour;\r\n      let md;\r\n\r\n      if (i === 0) {\r\n        hour = \"\";\r\n        md = \"\";\r\n      } else {\r\n        hour = i;\r\n        md = \"AM\";\r\n      }\r\n\r\n      if (hour > 12) {hour -= 12;}\r\n      if (i >= 12) {md = \"PM\";}\r\n\r\n      const wvSideGridCell = document.createElement(\"div\");\r\n      wvSideGridCell.classList.add(\"sidegrid-cell\");\r\n      wvSideGridCell.textContent = `${hour} ${md}`;\r\n      weekviewSideGrid.appendChild(wvSideGridCell);\r\n    }\r\n  }\r\n\r\n  function configureDaysOfWeek() {\r\n    document.querySelector(\".wv-gmt\").textContent = `UTC ${context.getGmt()}`;\r\n    let hasToday;\r\n    let hasSelected;\r\n    let dayNumbers = [];\r\n    let ymd = [];\r\n    const today = context.getToday();\r\n    let [ty, tm, td] = [today.getFullYear(), today.getMonth(), today.getDate()];\r\n\r\n    weekArray.forEach((day, idx) => {\r\n      let [y, m, d] = [\r\n        day.getFullYear(),\r\n        day.getMonth(),\r\n        day.getDate(),\r\n      ];\r\n\r\n      dayNumbers.push(d);\r\n      ymd.push(`${y}-${m}-${d}`);\r\n\r\n      if (d === context.getDateSelected() && m === context.getMonth()) {\r\n        hasSelected = d;\r\n      }\r\n\r\n      if (d === td && m === tm && y === ty) {\r\n        hasToday = d;\r\n      }\r\n    });\r\n\r\n    dayNumbers.forEach((num, idx) => {\r\n      if (num === hasSelected) {\r\n        weekviewHeaderDayNumber[idx].classList.add(\"wvh--selected\");\r\n      } else {\r\n        weekviewHeaderDayNumber[idx].classList.remove(\"wvh--selected\");\r\n      }\r\n\r\n      if (num === hasToday) {\r\n        weekviewHeaderDayNumber[idx].classList.add(\"wvh--today\");\r\n      } else {\r\n        weekviewHeaderDayNumber[idx].classList.remove(\"wvh--today\");\r\n      }\r\n\r\n      weekviewHeaderDayNumber[idx].textContent = num;\r\n      weekviewHeaderDayNumber[idx].setAttribute(\"data-weekview-date\", ymd[idx]);\r\n      topCols[idx].setAttribute(\"data-wvtop-day\", num);\r\n    });\r\n  }\r\n\r\n  function renderSidebarDatepickerWeek() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\r\n      setSidebarDatepicker(context, store, datepickerContext);\r\n    }\r\n  }\r\n\r\n  function resetWeekviewBoxes() {\r\n    cols.forEach(col => { col.innerText = \"\"; });\r\n    topCols.forEach(col => { col.innerText = \"\"; });\r\n    main.onmousedown = null;\r\n    weekviewSideGrid.innerText = \"\";\r\n  }\r\n\r\n  function renderBoxes() {\r\n    cols.forEach(col => { col.innerText = \"\"; });\r\n    topCols.forEach(col => { col.innerText = \"\"; });\r\n\r\n    boxes.getBoxes().forEach((entry) => {\r\n      const y = entry.coordinates.y;\r\n      firstY == null || y < firstY ? (firstY = y) : null;\r\n      const col = cols[+entry.coordinates.x];\r\n      createBox(col, entry, \"week\", store.getCtgColor(entry.category));\r\n    });\r\n\r\n    const boxt = boxes.getBoxesTopLengths();\r\n    for (const k in boxt) {\r\n      const col = topCols[+k];\r\n      createBoxesTop(col, boxt[k]);\r\n    }\r\n  }\r\n\r\n  function createBoxesTop(col, len) {\r\n    const cell = document.createElement(\"div\");\r\n    cell.classList.add(\"allday__cell\");\r\n    cell.classList.add(\"allday__cell--active\");\r\n\r\n    const taskicons = document.createElement(\"div\");\r\n    taskicons.classList.add(\"wv-ad--taskicons\");\r\n\r\n    const icon = document.createElement(\"div\");\r\n    icon.classList.add(\"wv-ad--taskicon\");\r\n    icon.style.backgroundColor = \"#6F0C2B\";\r\n    taskicons.appendChild(icon);\r\n\r\n    const celltitle = document.createElement(\"div\");\r\n    celltitle.classList.add(\"wv-ad--celltitle\");\r\n    celltitle.textContent = `${len} more`;\r\n    const cellexpand = document.createElement(\"div\");\r\n    cellexpand.classList.add(\"wv-ad--cellexpand\");\r\n    cellexpand.appendChild(createExpandDownIcon(\"var(--white3)\"));\r\n\r\n    cell.append(taskicons, celltitle, cellexpand);\r\n    col.appendChild(cell);\r\n  }\r\n\r\n  function createAllDayModalCell(entry, idx, col, handleCloseCallback) {\r\n    const cell = document.createElement(\"div\");\r\n    cell.classList.add(\"allday-modal__cell\");\r\n    cell.setAttribute(\"data-allday-modal-cell\", idx);\r\n    cell.setAttribute(\"data-allday-modal-cell-id\", entry.id);\r\n    cell.style.backgroundColor = store.getCtgColor(entry.category);\r\n\r\n    const cellcontent = document.createElement(\"div\");\r\n    cellcontent.classList.add(\"allday-modal__cell-content\");\r\n\r\n    const cellIcons = document.createElement(\"div\");\r\n    cellIcons.classList.add(\"allday-modal__cell-action-icons\");\r\n\r\n    const celltitle = document.createElement(\"div\");\r\n    celltitle.classList.add(\"allday-modal__celltitle\");\r\n    celltitle.textContent = entry.title;\r\n\r\n    const cellendDate = document.createElement(\"div\");\r\n    cellendDate.classList.add(\"allday-modal__cellend-date\");\r\n    cellendDate.textContent = formatStartEndDate(\r\n      new Date(entry.start), new Date(entry.end)\r\n    );\r\n\r\n    const cellcategoryTitle = document.createElement(\"div\");\r\n    cellcategoryTitle.classList.add(\"allday-modal__cellcategory-title\");\r\n    cellcategoryTitle.textContent = \"category: \" + entry.category;\r\n\r\n    cellcontent.append(celltitle, cellcategoryTitle, cellendDate);\r\n    cellIcons.appendChild(createMeatballVertIcon(\"var(--taskcolor\"));\r\n    cell.append(cellcontent, cellIcons);\r\n    return cell;\r\n  }\r\n\r\n  function createAllDayModal(e, col, entries, idx, cell) {\r\n    let dayofweek = locales.labels.weekdaysLong[idx];\r\n    let daynumber = col.getAttribute(\"data-wvtop-day\");\r\n\r\n    const modal = document.createElement(\"div\");\r\n    modal.classList.add(\"allday-modal\");\r\n\r\n    const rect = col.getBoundingClientRect();\r\n    let entriesoffset;\r\n    if (entries.length < 4) {\r\n      entriesoffset = parseInt(55 * entries.length) + 60;\r\n    } else {\r\n      entriesoffset = parseInt(55 * 4) + 60;\r\n    }\r\n\r\n    let [x, y] = placePopup(\r\n      240,\r\n      entriesoffset,\r\n      [parseInt(rect.left), parseInt(rect.top) + 24],\r\n      [window.innerWidth, window.innerHeight],\r\n      true,\r\n      Math.floor((window.innerWidth - 36 - weekviewGrid.offsetLeft) / 7)\r\n    );\r\n\r\n    if (x + 250 > window.innerWidth) {\r\n      modal.style.left = window.innerWidth - 246 + \"px\";\r\n    } else {\r\n      modal.style.left = x + \"px\";\r\n    }\r\n\r\n    modal.style.top = y + \"px\";\r\n\r\n    const modalheader = document.createElement(\"div\");\r\n    modalheader.classList.add(\"allday-modal__header\");\r\n\r\n    const modaltitle = document.createElement(\"div\");\r\n    modaltitle.classList.add(\"allday-modal-title\");\r\n    modaltitle.textContent = `${dayofweek}, ${locales.labels.monthsLong[weekArray[idx].getMonth()]} ${daynumber}${getDayOrdinal(daynumber)}`;\r\n\r\n    const closeAlldayModalBtn = document.createElement(\"div\");\r\n    closeAlldayModalBtn.classList.add(\"close-allday-modal\");\r\n    closeAlldayModalBtn.appendChild(createCloseIcon(\"var(--white4\"));\r\n\r\n    const modalcontent = document.createElement(\"div\");\r\n    modalcontent.classList.add(\"allday-modal__content\");\r\n\r\n\r\n    function closealldayonEsc(e) {\r\n      if (e.key === \"Escape\") {\r\n        closealldaymodal();\r\n      }\r\n    }\r\n\r\n    // remove all listeners / functionality when context menu is opened\r\n    // do so separately from the closealldaymodal function so that the modal itself will still be visible when form/context menu is open\r\n    function resetalldaymodal() {\r\n    }\r\n    \r\n    function closealldaymodal() {\r\n      modal.remove();\r\n      modal.onmousedown = null;\r\n      resizeoverlay.classList.add(\"hide-resize-overlay\");\r\n      resizeoverlay.onclick = null;\r\n      document.removeEventListener(\"keydown\", closealldayonEsc);\r\n      store.removeActiveOverlay(\"allday-modal\");\r\n      cell.firstChild.firstChild.style.backgroundColor = \"#6F0C2B\";\r\n      cell.classList.remove(\"allday-modal__cell--open\");\r\n    }\r\n\r\n    entries.forEach((entry, idx) => {\r\n      const cell = createAllDayModalCell(\r\n        entry, idx, col, closealldaymodal\r\n      );\r\n      modalcontent.appendChild(cell);\r\n    });\r\n\r\n    function delegateAllDayModal(e) {\r\n      const getCloseAdBtn = getClosest(e, \".close-allday-modal\");\r\n      const getMeatballBtn = getClosest(e, \".allday-modal__cell-action-icons\");\r\n\r\n      if (getCloseAdBtn) {\r\n        // resetalldaymodal();\r\n        closealldaymodal();\r\n        return;\r\n      }\r\n\r\n      if (getMeatballBtn) {\r\n        // resetalldaymodal();\r\n        getWeekViewContextMenu(\r\n          store.getEntry(e.target.parentElement.getAttribute(\"data-allday-modal-cell-id\")),\r\n          closealldaymodal,\r\n          e\r\n        );\r\n        return;\r\n      }\r\n    }\r\n\r\n    modalheader.append(modaltitle, closeAlldayModalBtn);\r\n    modal.append(modalheader, modalcontent);\r\n    main.insertBefore(modal, document.querySelector(\".weekview__top\"));\r\n    store.addActiveOverlay(\"allday-modal\");\r\n    resizeoverlay.onclick = closealldaymodal;\r\n    modal.onmousedown = delegateAllDayModal;\r\n    document.addEventListener(\"keydown\", closealldayonEsc);\r\n  }\r\n\r\n  function openAllDayModal(e, cell) {\r\n    const col = cell.parentElement;\r\n    cell.classList.add(\"allday-modal__cell--open\");\r\n    cell.firstChild.firstChild.style.backgroundColor = \"#01635b\";\r\n    const colidx = parseInt(col.getAttribute(\"data-allday-column\"));\r\n    let colentries = boxes.getBoxesByColumnTop(colidx);\r\n    if (colentries.length > 0) {\r\n      createAllDayModal(e, col, colentries, colidx, cell);\r\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\r\n    }\r\n  }\r\n\r\n  function getcol(idx) {\r\n    return document.querySelector(`[data-column-index=\"${idx}\"]`);\r\n  }\r\n\r\n  function handleWeekviewFormClose() {\r\n    document.querySelector(\".temp-week-box\")?.remove();\r\n  }\r\n\r\n  function openWeekviewForm(box, coords, category, dates, type) {\r\n    store.setFormResetHandle(\"week\", handleWeekviewFormClose);\r\n\r\n    const openForm = store.getRenderFormCallback();\r\n    const setup = new FormSetup();\r\n\r\n    const [submitType, id, title, description] = type;\r\n    setup.setSubmission(submitType, id, title, description);\r\n    if (submitType === \"create\") { box.style.opacity = 0.9; }\r\n\r\n    const [categoryName, color] = category;\r\n    setup.setCategory(\r\n      categoryName,\r\n      color,\r\n    );\r\n\r\n    const [start, end] = dates;\r\n    setup.setDates(getFormDateObject(start, end));\r\n    openForm();\r\n\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n    fullFormConfig.getConfig(setup.getSetup());\r\n  }\r\n\r\n  // ***********************\r\n  // CONTEXT MENU SETUP\r\n  function getWeekViewContextMenu(entry, handleCloseCallback, e) {\r\n    const id = entry.id;\r\n    const start = entry.start;\r\n    const color = store.getCtgColor(entry.category);\r\n    const targetrect = e.target.getBoundingClientRect();\r\n    let [x, y] = placePopup(\r\n      400,\r\n      165,\r\n      [parseInt(targetrect.right), (e.clientY) + 28],\r\n      [window.innerWidth, window.innerHeight],\r\n    );\r\n\r\n    store.setFormResetHandle(\"week\", handleCloseCallback);\r\n    const setup = new FormSetup();\r\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n    setup.setCategory(entry.category, color);\r\n    setup.setDates(getFormDateObject(start, entry.end));\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n\r\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\r\n\r\n    const modal = document.querySelector(\".entry__options\");\r\n    modal.style.top = y + \"px\";\r\n    modal.style.left = x + \"px\";\r\n  }\r\n  // ***********************\r\n\r\n  /** DRAG NORTH, SOUTH, EAST, WEST */\r\n  function dragEngineWeek(e, box) {\r\n    setStylingForEvent(\"dragstart\", main, store);\r\n    const col = box.parentElement;\r\n    const originalColumn = col.getAttribute(\"data-column-index\");\r\n    let currentColumn = col.getAttribute(\"data-column-index\");\r\n    let boxhasOnTop = false;\r\n    box.setAttribute(\"data-box-col\", currentColumn);\r\n\r\n    const startTop = +box.style.top.split(\"px\")[0];\r\n    const boxHeight = +box.style.height.split(\"px\")[0];\r\n    let startCursorY = e.pageY - weekviewGrid.offsetTop;\r\n    let tempstartY = e.pageY;\r\n    let startCursorX = e.pageX;\r\n    let [movedX, movedY] = [0, 0];\r\n    let [sX, sY] = [0, 0];\r\n    let hasStyles = false;\r\n\r\n    /** DRAG NORTH SOUTH */\r\n    const mousemove = (e) => {\r\n      sX = Math.abs(e.clientX - startCursorX);\r\n      sY = Math.abs(e.clientY - tempstartY);\r\n      if (!hasStyles) {\r\n        if (sX > 3 || sY > 3) {\r\n          hasStyles = true;\r\n          document.body.style.cursor = \"move\";\r\n          if (box.classList.contains(\"box-ontop\")) {\r\n            boxhasOnTop = true;\r\n            resetStyleOnClick(\"week\", box);\r\n          }\r\n          box.classList.add(\"box-dragging\");\r\n          createTemporaryBox(box, col, boxhasOnTop, \"week\");\r\n          sX = 0;\r\n          sY = 0;\r\n        }\r\n      }\r\n\r\n      const headerOffset = weekviewGrid.offsetTop;\r\n      const currentCursorY = e.pageY - headerOffset;\r\n      let newOffsetY = currentCursorY - startCursorY;\r\n      let newTop = Math.round((newOffsetY + startTop) / 12.5) * 12.5;\r\n\r\n      if (newTop < 0 || currentCursorY < 0) {\r\n        newTop = 0;\r\n        return;\r\n      } else if (newTop + boxHeight > 1188) {\r\n        return;\r\n      }\r\n\r\n      box.style.top = `${newTop}px`;\r\n      /** DRAG EAST/WEST */\r\n      const direction = e.pageX - startCursorX > 0 ? \"right\" : \"left\";\r\n      const currentCursorX = e.pageX;\r\n      let newOffsetX = startCursorX - currentCursorX;\r\n      let leftColX;\r\n      let rightColX;\r\n\r\n      if (+currentColumn - 1 >= 0) {\r\n        leftColX = parseInt(getcol(currentColumn - 1).getBoundingClientRect().right);\r\n      } else {\r\n        leftColX = null;\r\n      }\r\n\r\n      if (+currentColumn + 1 < cols.length) {\r\n        rightColX = parseInt(getcol(+currentColumn + 1).getBoundingClientRect().left);\r\n      } else {\r\n        rightColX = null;\r\n      }\r\n\r\n      if (direction === \"right\" && rightColX !== null) {\r\n        if (e.pageX >= rightColX) {\r\n          getcol(+currentColumn + 1).appendChild(box);\r\n          startCursorX = e.pageX;\r\n          currentColumn = +currentColumn + 1;\r\n          box.setAttribute(\"data-box-col\", +currentColumn);\r\n        }\r\n      }\r\n\r\n      if (direction === \"left\" && leftColX !== null) {\r\n        if (e.pageX <= leftColX) {\r\n          getcol(+currentColumn - 1).appendChild(box);\r\n          startCursorX = e.pageX;\r\n          currentColumn = +currentColumn - 1;\r\n          box.setAttribute(\"data-box-col\", +currentColumn);\r\n        }\r\n      }\r\n\r\n      movedY = newOffsetY;\r\n      movedX = newOffsetX;\r\n    };\r\n\r\n    function mouseup() {\r\n      const tempbox = document.querySelector(\".temporary-box\");\r\n      box.classList.remove(\"box-dragging\");\r\n      if (boxhasOnTop) { box.classList.add(\"box-ontop\"); }\r\n\r\n      if (tempbox === null) {\r\n        // const reset\r\n        const setResetWv = () => {\r\n          setStylingForEvent(\"dragend\", main, store);\r\n          box.classList.remove(\"wv-box-clicked\");\r\n        };\r\n        box.classList.add(\"wv-box-clicked\");\r\n        const id = box.getAttribute(\"data-box-id\");\r\n        const entry = store.getEntry(id);\r\n        const start = entry.start;\r\n        const color = box.style.backgroundColor;\r\n        const rect = box.getBoundingClientRect();\r\n        let [x, y] = placePopup(\r\n          400,\r\n          165,\r\n          [parseInt(rect.left), parseInt(rect.top) + 56],\r\n          [window.innerWidth, window.innerHeight],\r\n          false,\r\n        );\r\n        store.setFormResetHandle(\"week\", setResetWv);\r\n\r\n        const setup = new FormSetup();\r\n        setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n        setup.setCategory(entry.category, color);\r\n        setup.setDates(getFormDateObject(start, entry.end));\r\n        fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n        const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n        getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\r\n\r\n        const modal = document.querySelector(\".entry__options\");\r\n        if (window.innerWidth > 580) {\r\n          modal.style.top = +y + \"px\";\r\n          modal.style.left = x + \"px\";\r\n        } else {\r\n          modal.style.top = \"64px\";\r\n        }\r\n\r\n      } else {\r\n        tempbox.remove();\r\n        setBoxTimeAttributes(box, \"week\");\r\n        const time = calcTime(\r\n          +box.getAttribute(\"data-start-time\"),\r\n          +box.getAttribute(\"data-time-intervals\")\r\n        );\r\n\r\n        box.setAttribute(\"data-time\", time);\r\n        box.children[1].children[0].textContent = time;\r\n\r\n        updateBoxCoordinates(box, \"week\", boxes);\r\n        boxes.updateStore(\r\n          store,\r\n          box.getAttribute(\"data-box-id\"),\r\n          weekArray\r\n        );\r\n        // if box is moved to a new column, update sidebar datepicker\r\n        if (currentColumn !== +originalColumn) {\r\n          renderSidebarDatepickerWeek();\r\n        };\r\n        // check if new position overlaps with other boxes and handle\r\n        let droppedCol = +box.getAttribute(\"data-box-col\");\r\n        if (boxes.getBoxesByColumn(droppedCol).length > 1) {\r\n          handleOverlap(droppedCol, \"week\", boxes);\r\n        } else {\r\n          box.setAttribute(\"box-idx\", \"box-one\");\r\n        }\r\n        setStylingForEvent(\"dragend\", main, store);\r\n      }\r\n\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    }\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  /** RESIZE NORTH/SOUTH \r\n   * resizing will never trigger form\r\n  */\r\n  function resizeBoxNS(e, box) {\r\n    setStylingForEvent(\"dragstart\", main, store);\r\n    document.body.style.cursor = \"move\";\r\n\r\n    const col = box.parentElement;\r\n    const currentColumn = col.getAttribute(\"data-column-index\");\r\n    box.setAttribute(\"data-box-col\", currentColumn);\r\n\r\n    let boxhasOnTop = false;\r\n    let boxorig = getOriginalBoxObject(box);\r\n    if (box.classList.contains(\"box-ontop\")) {\r\n      boxhasOnTop = true;\r\n      resetStyleOnClick(\"week\", box);\r\n    }\r\n\r\n    box.classList.add(\"box-resizing\");\r\n    const boxTop = box.offsetTop;\r\n    createTemporaryBox(box, col, boxhasOnTop, \"week\");\r\n\r\n    const mousemove = (e) => {\r\n      const headerOffset = weekviewGrid.offsetTop;\r\n      let amountScrolled = Math.abs(parseInt(container.getBoundingClientRect().top));\r\n      if (amountScrolled == headerOffset) {\r\n        amountScrolled -= headerOffset;\r\n      } else if (container.getBoundingClientRect().top > 0) {\r\n        amountScrolled = headerOffset - amountScrolled;\r\n      } else {\r\n        amountScrolled += headerOffset;\r\n      }\r\n\r\n      const newHeight = Math.round(((e.pageY - boxTop - headerOffset) + amountScrolled) / 12.5) * 12.5;\r\n\r\n      if (newHeight <= 12.5) {\r\n        box.style.height = '12.5px';\r\n        return;\r\n      } else if (newHeight + parseInt(box.style.top) > 1188) {\r\n        return;\r\n      } else {\r\n        box.style.height = `${newHeight}px`;\r\n      }\r\n    };\r\n\r\n    const mouseup = (e) => {\r\n      document.querySelector(\".temporary-box\").remove();\r\n      box.classList.remove(\"box-resizing\");\r\n      if (boxhasOnTop) { box.classList.add(\"box-ontop\"); }\r\n\r\n      if (box.style.height === boxorig.height) {\r\n        if (boxhasOnTop) {\r\n          box.setAttribute(\"class\", boxorig.class);\r\n          box.style.left = boxorig.left;\r\n          box.style.width = boxorig.width;\r\n        }\r\n      } else {\r\n        setBoxTimeAttributes(box, \"week\");\r\n        const start = +box.getAttribute(\"data-start-time\");\r\n        const length = +box.getAttribute(\"data-time-intervals\");\r\n        const time = calcTime(start, length);\r\n        box.children[1].children[0].textContent = time;\r\n        updateBoxCoordinates(box, \"week\", boxes);\r\n\r\n        let droppedCol = +box.getAttribute(\"data-box-col\");\r\n        if (boxes.getBoxesByColumn(droppedCol).length > 1) {\r\n          handleOverlap(droppedCol, \"week\", boxes);\r\n        }\r\n\r\n        boxes.updateStore(\r\n          store,\r\n          box.getAttribute(\"data-box-id\"),\r\n          weekArray,\r\n        );\r\n      }\r\n\r\n      setStylingForEvent(\"dragend\", main, store);\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    };\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  /** Drag down empty column to create box */\r\n  function createBoxOnDrag(e) {\r\n    setStylingForEvent(\"dragstart\", main, store);\r\n    document.body.style.cursor = \"move\";\r\n    const [tempcategory, color] = store.getFirstActiveCategoryKeyPair();\r\n    const colIdx = parseInt(e.target.getAttribute(\"data-column-index\"));\r\n\r\n    const box = document.createElement('div');\r\n    box.setAttribute(\"class\", \"box box-dragging temp-week-box\");\r\n\r\n    // boxheader is static - create from template\r\n    const boxheader = createTempBoxHeader(\"week\");\r\n    const boxcontent = document.createElement('div');\r\n    const boxtime = document.createElement('span');\r\n    const boxtimeend = document.createElement('span');\r\n    boxcontent.classList.add('box__content');\r\n    boxtime.classList.add('box-time');\r\n    boxtimeend.classList.add('box-time');\r\n\r\n\r\n    const headerOffset = +weekviewGrid.offsetTop;\r\n    const scrolled = parseInt(weekviewGrid.scrollTop);\r\n    const startCursorY = e.pageY - weekviewGrid.offsetTop;\r\n\r\n    let y = Math.round((startCursorY + Math.abs(scrolled)) / 12.5) * 12.5;\r\n    box.setAttribute(\"style\", getBoxDefaultStyle(y, color));\r\n\r\n    let coords = { y: +y / 12.5, x: colIdx, h: 1, e: 2 };\r\n    let [starthour, startmin, endhour, endmin] = startEndDefault(y);\r\n\r\n    function mousemove(e) {\r\n      const currentCursorY = e.pageY - headerOffset;\r\n      let newOffsetY = currentCursorY - startCursorY;\r\n      let newHeight = Math.round((newOffsetY) / 12.5) * 12.5;\r\n\r\n      if (newHeight <= 12.5) { newHeight = 12.5; }\r\n      if (newHeight + y > 1188) { newHeight = 1187.5 - y; }\r\n      box.style.height = `${newHeight}px`;\r\n\r\n      coords.h = +newHeight / 12.5;\r\n      coords.e = +coords.y + coords.h;\r\n\r\n      endhour = Math.floor(((+newHeight + +y) / 12.5) / 4);\r\n      endmin = Math.floor(((+newHeight + +y) / 12.5) % 4) * 15;\r\n      boxtime.style.wordBreak = \"break-word\";\r\n      boxtime.textContent = `${formatTime(starthour, startmin)}  `;\r\n      boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\r\n    }\r\n\r\n    boxcontent.append(boxtime, boxtimeend);\r\n    box.append(boxheader, boxcontent);\r\n    e.target.appendChild(box);\r\n\r\n    function mouseup() {\r\n      const datesData = getTempDates(\r\n        new Date(weekArray[colIdx]),\r\n        [starthour, endhour],\r\n        [startmin, endmin],\r\n      );\r\n\r\n      openWeekviewForm(\r\n        box,\r\n        coords,\r\n        [tempcategory, color],\r\n        datesData,\r\n        [\"create\", null, null, null],\r\n      );\r\n\r\n      setStylingForEvent(\"dragend\", main, store);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n    }\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  /** delegate via grid */\r\n  function delegateGridEvents(e) {\r\n    const getHeaderDayNumber = getClosest(e, \".weekview--header-day__number\");\r\n    const getBoxResizeHandle = getClosest(e, \".box-resize-s\");\r\n    const getBox = getClosest(e, \".box\");\r\n    const getWeekCol = getClosest(e, \".week--col\");\r\n    const getAllDayCol = getClosest(e, \".allday--col\");\r\n\r\n    if (getHeaderDayNumber) {\r\n      setDayView(e);\r\n      return;\r\n    }\r\n\r\n    if (getBoxResizeHandle) {\r\n      resizeBoxNS(e, e.target.parentElement);\r\n      return;\r\n    }\r\n\r\n    if (getBox) {\r\n      dragEngineWeek(e, e.target);\r\n      return;\r\n    }\r\n\r\n    if (getWeekCol) {\r\n      createBoxOnDrag(e, e.target);\r\n      return;\r\n    }\r\n\r\n    if (getAllDayCol) {\r\n      if (e.target.childElementCount > 0) {\r\n        openAllDayModal(e, e.target);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  function renderDataForGrid() {\r\n    renderBoxes();\r\n    const colsToCheck = boxes.getColumnsWithMultipleBoxes();\r\n    colsToCheck.forEach(col => handleOverlap(col, \"week\", boxes));\r\n  }\r\n\r\n  const initWeek = () => {\r\n    weekviewSideGrid.innerText = \"\";\r\n    createWVSideGridCells();\r\n    configureDaysOfWeek();\r\n    renderDataForGrid();\r\n    main.onmousedown = delegateGridEvents;\r\n    store.setResetPreviousViewCallback(resetWeekviewBoxes);\r\n    if (firstY !== null) {\r\n      setTimeout(() => {\r\n        weekviewGrid.scrollTo({ top: Math.abs((+firstY * 12.5) - 25), behavior: \"instant\" });\r\n      }, 4);\r\n    }\r\n  };\r\n\r\n  initWeek();\r\n}","import setViews from \"../../config/setViews\";\r\nimport locales from \"../../locales/en\";\r\nimport { getClosest } from \"../../utilities/helpers\";\r\nimport { getDateFromAttribute } from \"../../utilities/dateutils\";\r\nimport setSidebarDatepicker from \"../../components/menus/sidebarDatepicker\";\r\nconst yearviewGrid = document.querySelector(\".calendar__yearview\");\r\nconst sidebar = document.querySelector(\".sidebar\");\r\n\r\nexport default function setYearView(context, store, datepickerContext) {\r\n\r\n  function renderSidebarDatepicker() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      datepickerContext.setDate(\r\n        context.getYear(), context.getMonth(), context.getDay()\r\n      );\r\n      setSidebarDatepicker(context, store, datepickerContext);\r\n    }\r\n  }\r\n\r\n  function renderMonthCells() {\r\n    yearviewGrid.innerText = \"\";\r\n    let year = context.getYear();\r\n    let entries = store.getGroupedYearEntries(store.getYearEntries(year));\r\n    for (let i = 0; i < 12; i++) {\r\n      if (entries[i]) {\r\n        yearviewGrid.appendChild(createMonthCell(year, i, entries[i]));\r\n      } else {\r\n        yearviewGrid.appendChild(createMonthCell(year, i, []));\r\n      }\r\n    }\r\n\r\n    entries = null;\r\n    year = null;\r\n  }\r\n\r\n  function createMonthCell(year, month, entries) {\r\n    const today = context.getToday();\r\n    const [ty, tm, td] = [\r\n      +today.getFullYear(),\r\n      +today.getMonth(),\r\n      +today.getDate()\r\n    ];\r\n\r\n    const prevmonth = new Date(year, month, 0);\r\n    const daysInPrevMonth = prevmonth.getDate();\r\n    const nextmonth = new Date(year, month + 2, 0);\r\n    const currentMonth = new Date(year, month, 1);\r\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\r\n    const firstDayOfMonth = currentMonth.getDay();\r\n\r\n    const cellWrapper = document.createElement(\"div\");\r\n    cellWrapper.classList.add(\"yv-monthcell\");\r\n\r\n    const cellHeader = document.createElement(\"div\");\r\n    cellHeader.classList.add(\"yv-monthcell__header\");\r\n\r\n    const cellHeaderRowOne = document.createElement(\"div\");\r\n    cellHeaderRowOne.classList.add(\"yv-monthcell__header--rowone\");\r\n    cellHeaderRowOne.textContent = locales.labels.monthsLong[month];\r\n\r\n    if (month === context.getMonth() && year === context.getYear()) {\r\n      cellHeaderRowOne.classList.add(\"yvmht-current\");\r\n      cellWrapper.classList.add(\"cell-current\");\r\n    }\r\n\r\n    // **************************\r\n    // cell header row two\r\n    const cellHeaderWeekDayNames = document.createElement(\"div\");\r\n    cellHeaderWeekDayNames.classList.add(\"yv-monthcell__header--weekdays\");\r\n\r\n    locales.labels.weekdaysNarrow.forEach((el) => {\r\n      const weekday = document.createElement(\"div\");\r\n      weekday.classList.add(\"yv-monthcell__header--weekday\");\r\n      weekday.textContent = el;\r\n      cellHeaderWeekDayNames.appendChild(weekday);\r\n    });\r\n\r\n\r\n    const cellBody = document.createElement(\"div\");\r\n    cellBody.classList.add(\"yv-monthcell__body\");\r\n\r\n    function populateMonths() {\r\n      let count = 0;\r\n      let prevmonthstart = daysInPrevMonth - firstDayOfMonth;\r\n\r\n      const createyvcell = (day, classname, year, month, current) => {\r\n        const daywrapper = document.createElement(\"div\");\r\n        daywrapper.classList.add(\"yv-monthcell__body--day-wrapper\");\r\n      \r\n        if (classname !== null) {\r\n          daywrapper.classList.add(classname);\r\n        }\r\n        \r\n        if (current) {\r\n          daywrapper.setAttribute(\"data-yv-date\", `${year}-${month}-${day}`);\r\n          daywrapper.textContent = day;\r\n          // check if day is selected\r\n          if (day === context.getDateSelected() && month === context.getMonth() && year === context.getYear()) {\r\n            daywrapper.classList.add(\"yvmb-selected\");\r\n          }\r\n      \r\n          // check if day is today\r\n          if (day === td && month === tm && year === ty) {\r\n            daywrapper.classList.add(\"yvmb-today\");\r\n          }\r\n      \r\n          // check if day has entry\r\n          if (entries[day]) {\r\n            daywrapper.classList.add(\"yvmb-has-entry\");\r\n          }\r\n        }\r\n      \r\n        return daywrapper;\r\n      };\r\n\r\n      // if first day of month is not sunday, add previous month days until the start of the current month\r\n      for (let i = prevmonthstart; i < daysInPrevMonth; i++) {\r\n        cellBody.appendChild(createyvcell(\r\n          i + 1,\r\n          \"yvmb-prevnext\",\r\n          prevmonth.getFullYear(),\r\n          prevmonth.getMonth(),\r\n          false,\r\n        ));\r\n        count++;\r\n      }\r\n\r\n      for (let i = 0; i < daysInMonth; i++) {\r\n        cellBody.appendChild(createyvcell(\r\n          i + 1,\r\n          null,\r\n          currentMonth.getFullYear(),\r\n          currentMonth.getMonth(),\r\n          true,\r\n        ));\r\n        count++;\r\n      }\r\n\r\n      // ensure that each month cell has 42 days, use next month days if necessary\r\n      // let i = 0;\r\n      // while (count < 42) {\r\n      //   i++;\r\n      //   cellBody.appendChild(createyvcell(\r\n      //     i,\r\n      //     \"yvmb-prevnext\",\r\n      //     nextmonth.getFullYear(),\r\n      //     nextmonth.getMonth(),\r\n      //     false,\r\n      //   ));\r\n      //   count++;\r\n      // }\r\n    }\r\n\r\n    cellHeader.append(cellHeaderRowOne, cellHeaderWeekDayNames);\r\n    populateMonths();\r\n    cellWrapper.append(cellHeader, cellBody);\r\n    return cellWrapper;\r\n  }\r\n\r\n  function handleDaySelection(e) {\r\n    const target = e.target;\r\n    const [tempy, tempm, tempd] = getDateFromAttribute(target, \"data-yv-date\", null);\r\n    context.setDate(tempy, tempm, tempd);\r\n    context.setDateSelected(tempd);\r\n    context.setComponent(\"day\");\r\n    setViews(\"day\", context, store, datepickerContext);\r\n    renderSidebarDatepicker();\r\n  }\r\n\r\n  function delegateYearEvents(e) {\r\n    if (getClosest(e, \".yv-monthcell__body--day-wrapper\")) {\r\n      handleDaySelection(e);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function resetYearview() {\r\n    yearviewGrid.innerText = \"\";\r\n    yearviewGrid.onmousedown = null;\r\n  }\r\n\r\n  function initYearview() {\r\n    renderMonthCells();\r\n    yearviewGrid.onmousedown = delegateYearEvents;\r\n    store.setResetPreviousViewCallback(resetYearview);\r\n    const currentmonth = document?.querySelector(\".cell-current\");\r\n    if (currentmonth) {\r\n      setTimeout(() => {\r\n        yearviewGrid.scrollTo({\r\n          top: parseInt(currentmonth.offsetTop) - 100,\r\n          behavior: \"instant\",\r\n        });\r\n      }, 4);\r\n    }\r\n  };\r\n  initYearview();\r\n}","import { setTheme } from \"../utilities/helpers\";\r\nconst appBody = document.querySelector(\".body\");\r\n\r\nexport default function setAppDefaults(context, store) {\r\n  let animationStatus = store.getAnimationStatus();\r\n\r\n  const disableTransitionsOnLoad = () => {\r\n    setTimeout(() => {\r\n      appBody.classList.remove(\"preload\");\r\n    }, 4);\r\n  };\r\n\r\n  const setDefaultAnimationStatus = () => {\r\n    animationStatus ? appBody.classList.remove(\"disable-transitions\") : appBody.classList.add(\"disable-transitions\");\r\n  };\r\n\r\n  disableTransitionsOnLoad();\r\n  setTheme(context);\r\n  setDefaultAnimationStatus();\r\n}","import setViews from \"./setViews\";\r\nimport setDatepicker from \"../components/menus/datepicker\";\r\nimport setSidebarDatepicker from \"../components/menus/sidebarDatepicker\";\r\nimport handleSidebarCategories from \"../components/menus/sidebarCategories\";\r\nimport { getClosest, throttle } from \"../utilities/helpers\";\r\nimport setEntryForm from \"../components/forms/entryForm\";\r\nimport handleSidebarFooter from \"../components/menus/sidebarFooter\";\r\nimport handleShortCutsModal from \"../components/menus/shortcutsModal\";\r\nimport getSidebarSubMenu from \"../components/menus/sidebarSubMenu\";\r\nimport createGoTo from \"../components/forms/goto\";\r\nimport createCategoryForm from \"../components/menus/editCategory\";\r\n\r\nconst appBody = document.querySelector(\".body\");\r\nconst colorSchemeMeta = document.getElementsByName(\"color-scheme\")[0];\r\n\r\nconst header = document.querySelector(\".h__container\");\r\nconst headerLogo = document.querySelector(\".logo\");\r\n\r\nconst toggleForm = document.querySelector(\".toggle-form\");\r\nconst sbToggleForm = document.querySelector(\".sb-toggle-form-btn\");\r\nconst sbToggleSubBtn = document.querySelector(\".sb-data-btn\");\r\nconst formOverlay = document.querySelector(\".form-overlay\");\r\nconst form = document.querySelector(\".entries__form\");\r\n\r\nconst datepicker = document.querySelector(\".datepicker\");\r\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\");\r\nconst dateTimeWrapper = document.querySelector(\".datetime-wrapper\");\r\n\r\nconst sbDatepicker = document.querySelector(\".datepicker-sidebar\");\r\nconst sbDatepickerBody = document.querySelector(\".sbdatepicker__body--dates\");\r\nconst sbCategoriesWrapper = document.querySelector(\".sb__categories--body-form\");\r\n\r\nconst selectElement = document.querySelector(\".select__modal\");\r\nconst selectOverlay = document.querySelector(\".change-view--overlay\");\r\nconst optionswrapper = document.querySelector(\".change-view--wrapper\");\r\nconst options = document.querySelectorAll(\".view-option\");\r\n\r\nconst sidebar = document.querySelector(\".sidebar\");\r\nconst sbFooter = document.querySelector(\".sb__info\");\r\nconst sbCategories = document.querySelector(\".sb__categories\");\r\n\r\nconst viewsContainer = document.querySelector(\".container__calendars\");\r\nconst yearwrapper = document.querySelector(\".yearview\");\r\nconst monthwrapper = document.querySelector(\".monthview\");\r\nconst listviewBody = document.querySelector(\".listview__body\");\r\n\r\nconst collapsebtn = document.querySelector(\".collapse-view\");\r\n\r\nexport default function renderViews(context, datepickerContext, store) {\r\n  function setColorScheme() {\r\n    const darkicon = document.querySelector(\".sbti-one\");\r\n    const lighticon = document.querySelector(\".sbti-two\");\r\n    const contrasticon = document.querySelector(\".sbti-three\");\r\n\r\n    const setlight = () => {\r\n      context.setColorScheme(\"light\");\r\n      colorSchemeMeta.setAttribute(\"content\", \"light\");\r\n      appBody.classList.add(\"light-mode\");\r\n      appBody.classList.remove(\"contrast-mode\");\r\n      darkicon.classList.add(\"sb-theme-icon-hide\");\r\n      contrasticon.classList.add(\"sb-theme-icon-hide\");\r\n      lighticon.classList.remove(\"sb-theme-icon-hide\");\r\n    };\r\n\r\n    const setdark = () => {\r\n      context.setColorScheme(\"dark\");\r\n      colorSchemeMeta.setAttribute(\"content\", \"dark light\");\r\n      appBody.classList.remove(\"light-mode\");\r\n      appBody.classList.remove(\"contrast-mode\");\r\n      darkicon.classList.remove(\"sb-theme-icon-hide\");\r\n      contrasticon.classList.add(\"sb-theme-icon-hide\");\r\n      lighticon.classList.add(\"sb-theme-icon-hide\");\r\n    };\r\n\r\n    const setcontrast = () => {\r\n      context.setColorScheme(\"contrast\");\r\n      colorSchemeMeta.setAttribute(\"content\", \"dark\");\r\n      appBody.classList.remove(\"light-mode\");\r\n      appBody.classList.add(\"contrast-mode\");\r\n      contrasticon.classList.remove(\"sb-theme-icon-hide\");\r\n      darkicon.classList.add(\"sb-theme-icon-hide\");\r\n      lighticon.classList.add(\"sb-theme-icon-hide\");\r\n    };\r\n\r\n    const currentScheme = context.getColorScheme();\r\n    if (currentScheme === \"light\") {\r\n      setdark();\r\n    } else if (currentScheme === \"dark\") {\r\n      setcontrast();\r\n    } else {\r\n      setlight();\r\n    }\r\n  }\r\n\r\n  function fullRender(component) {\r\n    setViews(component, context, store, datepickerContext);\r\n  }\r\n\r\n  function setInitialAttributes() {\r\n    selectElement.setAttribute(\"data-value\", `${context.getComponent().slice(0, 1).toUpperCase()}`);\r\n\r\n    headerLogo.setAttribute(\"data-current-day-of-month\", new Date().getDate());\r\n  }\r\n\r\n  function renderSidebarDatepicker() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\r\n      setSidebarDatepicker(context, store, datepickerContext);\r\n    }\r\n  }\r\n\r\n  function renderSidebarCategories() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      handleSidebarCategories(context, store, datepickerContext);\r\n      handleSidebarFooter(store);\r\n    }\r\n  }\r\n\r\n  function getPreviousDay() {\r\n    context.setPrevDay();\r\n    fullRender(\"day\");\r\n    context.setDateSelected(context.getDay());\r\n    renderSidebarDatepicker();\r\n  }\r\n\r\n  function getNextDay() {\r\n    context.setNextDay();\r\n    fullRender(\"day\");\r\n    context.setDateSelected(context.getDay());\r\n    renderSidebarDatepicker();\r\n  }\r\n\r\n  function getPreviousWeek() {\r\n    context.setPrevWeek();\r\n    fullRender(\"week\");\r\n    renderSidebarDatepicker();\r\n  }\r\n\r\n  function getNextWeek() {\r\n    context.setNextWeek();\r\n    fullRender(\"week\");\r\n    renderSidebarDatepicker();\r\n  }\r\n\r\n  function getPreviousMonth() {\r\n    context.setPrevMonth();\r\n    fullRender(\"month\");\r\n    renderSidebarDatepicker();\r\n  }\r\n\r\n  function getNextMonth() {\r\n    context.setNextMonth();\r\n    fullRender(\"month\");\r\n    renderSidebarDatepicker();\r\n  }\r\n\r\n  function getPreviousYear() {\r\n    context.setPrevYear();\r\n    fullRender(\"year\");\r\n    renderSidebarDatepicker();\r\n    return;\r\n  }\r\n\r\n  function getNextYear() {\r\n    context.setNextYear();\r\n    fullRender(\"year\");\r\n    renderSidebarDatepicker();\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * handleTransition\r\n   * @desc  The main purpose of this function is to handle situations where a user is holding down a hotkey to navigate through previous and next periods. Rather than having the swipe fire every single time, it will wait until after the user has stopped holding down the hotkey.\r\n   * Same goes for swipe gestures/prev & next button clicks.\r\n   * \r\n   * @param {HTMLElement} view (current calendar view to be transitioned)\r\n   * @param {String} keyframeDirection (direction of the keyframe animation) prev/next period\r\n   * @param {Function} callback (load next and previous periods)\r\n   */\r\n  let tm = 250; // define timeout out of scope so that it can be \r\n  function handleTransition(view, keyframeDirection, callback) {\r\n    if (!store.getAnimationStatus()) {\r\n      callback();\r\n      return;\r\n    } else {\r\n      const removeslide = (dir) => {\r\n        dir === \"left\" ? view.classList.remove(\"transition--right\") : view.classList.remove(\"transition--left\");\r\n      };\r\n\r\n      if (!view.classList.contains(\"weekview--header\")) {\r\n        viewsContainer.style.overflowX = \"hidden\";\r\n        setTimeout(() => {\r\n          viewsContainer.style.overflowX = \"auto\";\r\n        }, 200);\r\n      }\r\n\r\n      removeslide(keyframeDirection);\r\n      const slide = `transition--${keyframeDirection}`;\r\n      if (view.classList.contains(slide)) {\r\n        // prevent transition from firing too often\r\n        callback();\r\n        tm += 250;\r\n      } else {\r\n        view.classList.add(slide);\r\n        setTimeout(() => {\r\n          view.classList.remove(slide);\r\n        }, tm);\r\n        callback();\r\n        tm = 250;\r\n      }\r\n    }\r\n  }\r\n\r\n  // define a means for opening the form then provide it to the store so that it can be accessed by other components\r\n  function handleForm() {\r\n    setEntryForm(context, store, datepickerContext);\r\n    form.setAttribute(\"style\", \"top:5%;left:5%;right:5%;bottom:5%;margin:auto;\");\r\n    form.classList.remove(\"hide-form\");\r\n    formOverlay.classList.remove(\"hide-form-overlay\");\r\n    store.addActiveOverlay(\"hide-form-overlay\");\r\n  }\r\n\r\n  // the submenu (meatball? menu) adjacent to \"create\" button in sidebar\r\n  // opens instance of settings menu\r\n  function handleToggleSubmenu() {\r\n    getSidebarSubMenu(store, context);\r\n  }\r\n\r\n  // open / close sidebar\r\n  // triggers via \"s\" keypress or by clicking on the hamburger menu icon\r\n  // will also trigger in instances where the user tries to create a new entry on a blank day but no categories are selected.\r\n  function handleBtnMainMenu() {\r\n    const currentSidebarState = context.getSidebarState();\r\n    if (currentSidebarState === \"hide\") {\r\n      toggleForm.onclick = handleForm;\r\n      sbToggleForm.onclick = null;\r\n      sbToggleSubBtn.onclick = null;\r\n      sbFooter.onmousedown = null;\r\n      sbCategories.onmousedown = null;\r\n      sbDatepicker.onmousedown = null;\r\n\r\n      // clear categories/datepicker content when inactive\r\n      setTimeout(() => {\r\n        sbDatepickerBody.innerText = \"\";\r\n        sbCategoriesWrapper.innerText = \"\";\r\n      }, 100);\r\n\r\n      toggleForm.classList.remove(\"hide-toggle--form\");\r\n      viewsContainer.classList.remove(\"container__calendars-sb-active\");\r\n      sidebar.classList.add(\"hide-sidebar\");\r\n      dateTimeWrapper.classList.remove(\"datetime-inactive\");\r\n      listviewBody.removeAttribute(\"style\");\r\n    } else {\r\n\r\n      toggleForm.onclick = null;\r\n      sbToggleForm.onclick = handleForm;\r\n      sbToggleSubBtn.onclick = handleToggleSubmenu;\r\n      // if a callback has been provided to the store (from the datepicker), this means that the header datepicker is open and needs to be closed to prevent two calendars that share the same date state from coinciding.\r\n      // this can only happen if datepicker is open and user presses \"s\" on their keyboard to open sidebar\r\n\r\n      const resetdatepicker = store.getResetDatepickerCallback();\r\n      if (resetdatepicker !== null) {\r\n        resetdatepicker();\r\n        store.setResetDatepickerCallback(null);\r\n      }\r\n\r\n      listviewBody.style.width = \"100%\";\r\n      listviewBody.style.marginLeft = \"0\";\r\n\r\n      toggleForm.classList.add(\"hide-toggle--form\");\r\n      viewsContainer.classList.add(\"container__calendars-sb-active\");\r\n      dateTimeWrapper.classList.add(\"datetime-inactive\");\r\n      sidebar.classList.remove(\"hide-sidebar\");\r\n\r\n      datepickerContext.setDate(\r\n        context.getYear(), context.getMonth(), context.getDay()\r\n      );\r\n\r\n      datepickerContext.setDateSelected(context.getDay());\r\n\r\n      renderSidebarCategories();\r\n      renderSidebarDatepicker();\r\n    }\r\n  }\r\n\r\n  function handleBtnToday() {\r\n    if (!context.isToday() && context.getComponent() !== \"list\") {\r\n      let tempdate = new Date();\r\n      context.setDate(\r\n        tempdate.getFullYear(),\r\n        tempdate.getMonth(),\r\n        tempdate.getDate(),\r\n      );\r\n\r\n      fullRender(context.getComponent());\r\n      renderSidebarDatepicker();\r\n    }\r\n  }\r\n\r\n  function handleBtnPrev() {\r\n    switch (context.getComponent()) {\r\n      case \"day\":\r\n        handleTransition(\r\n          document.querySelector(\".dayview--header-day__number\"),\r\n          \"right\",\r\n          getPreviousDay\r\n        );\r\n        break;\r\n      case \"week\":\r\n        handleTransition(\r\n          document.querySelector(\".weekview--header\"),\r\n          \"right\",\r\n          getPreviousWeek\r\n        );\r\n        break;\r\n      case \"month\":\r\n        handleTransition(monthwrapper, \"right\", getPreviousMonth);\r\n        break;\r\n      case \"year\":\r\n        handleTransition(yearwrapper, \"right\", getPreviousYear);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  function handleBtnNext() {\r\n    switch (context.getComponent()) {\r\n      case \"day\":\r\n        handleTransition(\r\n          document.querySelector(\".dayview--header-day__number\"),\r\n          \"left\",\r\n          getNextDay\r\n        );\r\n        break;\r\n      case \"week\":\r\n        handleTransition(\r\n          document.querySelector(\".weekview--header\"),\r\n          \"left\",\r\n          getNextWeek\r\n        );\r\n        break;\r\n      case \"month\":\r\n        handleTransition(monthwrapper, \"left\", getNextMonth);\r\n        break;\r\n      case \"year\":\r\n        handleTransition(yearwrapper, \"left\", getNextYear);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  function handleDatePickerBtn(e) {\r\n    datepicker.classList.remove(\"hide-datepicker\");\r\n    datepickeroverlay.classList.remove(\"hide-datepicker-overlay\");\r\n    datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\r\n    const rect = e.target.getBoundingClientRect();\r\n    const newDatepickerLeft = parseInt(rect.left);\r\n    // convert rect left into a percentage so that it scales with window resize\r\n    const perc = parseInt((newDatepickerLeft / window.innerWidth) * 100);\r\n    datepicker.setAttribute(\"style\", `left:${perc}%;top:12px;`);\r\n    setDatepicker(context, store, datepickerContext, \"header\");\r\n\r\n  }\r\n\r\n  function setOptionStyle(option) {\r\n    const views = ['day', 'week', 'month', 'year', 'list'];\r\n    const activeIndex = views.indexOf(option);\r\n    for (let i = 0; i < options.length; i++) {\r\n      if (i === activeIndex) {\r\n        options[i].classList.add(\"change-view--option__active\");\r\n      } else {\r\n        options[i].classList.remove(\"change-view--option__active\");\r\n      }\r\n    }\r\n  }\r\n\r\n  function closeOptionsModal() {\r\n    selectElement.classList.remove(\"selection--active\");\r\n    selectOverlay.style.display = \"none\";\r\n    selectOverlay.classList.add(\"toggle-options\");\r\n    optionswrapper.classList.add(\"toggle-options\");\r\n    optionswrapper.classList.remove(\"toggle-animate\");\r\n  }\r\n\r\n  function renderOption(option, initialRender) {\r\n    const comp = context.getComponent();\r\n    // console.log(comp, option)\r\n    if (option === \"week\" || option === \"day\") {\r\n      collapsebtn.onclick = handleCollapse;\r\n      collapsebtn.classList.remove(\"hide-cbt\");\r\n    } else {\r\n      collapsebtn.onclick = null;\r\n      collapsebtn.classList.add(\"hide-cbt\");\r\n    }\r\n\r\n    if (option === comp && !initialRender) return;\r\n    closeOptionsModal();\r\n    context.setComponent(option);\r\n    fullRender(option);\r\n    setOptionStyle(option);\r\n    // week datepicker is the only one that has any stylistic difference\r\n    if (comp || option === \"week\") {\r\n      renderSidebarDatepicker();\r\n    }\r\n    document.activeElement.blur();\r\n  }\r\n\r\n  function handleSelect(e) {\r\n    selectElement.classList.add(\"selection--active\");\r\n    selectOverlay.classList.remove(\"toggle-options\");\r\n    selectOverlay.style.display = \"block\";\r\n    optionswrapper.classList.remove(\"toggle-options\");\r\n    optionswrapper.classList.add(\"toggle-animate\");\r\n    const setOption = (e) => {\r\n      const option = e.target.getAttribute(\"data-view-option\");\r\n      renderOption(option);\r\n    };\r\n    optionswrapper.onclick = setOption;\r\n    selectOverlay.onclick = closeOptionsModal;\r\n  }\r\n\r\n  // EVENT DELEGATION : HEADER ELEMENTS\r\n  function delegateHeaderEvents(e) {\r\n    e.preventDefault();\r\n    const btnMainMenu = getClosest(e, \".menu\");\r\n    const btnToday = getClosest(e, \".btn-today\");\r\n    const btnPrev = getClosest(e, \".prev\");\r\n    const btnNext = getClosest(e, \".next\");\r\n    const dateTime = getClosest(e, \".datetime-content\");\r\n    const search = getClosest(e, \".h-search\");\r\n    const settings = getClosest(e, \".settings\");\r\n    const select = getClosest(e, \".select__modal\");\r\n\r\n    if (btnMainMenu) {\r\n      context.toggleSidebarState();\r\n      handleBtnMainMenu();\r\n      return;\r\n    }\r\n\r\n    if (btnToday) {\r\n      handleBtnToday();\r\n      return;\r\n    }\r\n\r\n    if (btnPrev) {\r\n      handleBtnPrev();\r\n      return;\r\n    }\r\n\r\n    if (btnNext) {\r\n      handleBtnNext();\r\n      return;\r\n    }\r\n\r\n    if (dateTime) {\r\n      handleDatePickerBtn(e);\r\n      return;\r\n    }\r\n\r\n    if (search) {\r\n      createGoTo(context, store, datepickerContext);\r\n      return;\r\n    }\r\n\r\n    if (settings) {\r\n      handleToggleSubmenu(e);\r\n      return;\r\n    }\r\n\r\n    if (select) {\r\n      handleSelect(e);\r\n      return;\r\n    }\r\n  }\r\n\r\n  /* configure keyboard shortcuts */\r\n  /* 2022-01-14\r\n  * Google calendar has recently updated their app wide throttling from a global value of around 150 to the minimum of 4ms(might be 10) for period changes and (250-300) for view changes. \r\n  * For now, I'm keeping global throttle at 150ms. \r\n  */\r\n  function delegateGlobalKeyDown(e) {\r\n    // const temptoastpopup = document?.querySelector(\".toast\")\r\n    const toggleChangeview = (e) => {\r\n      if (selectElement.classList.contains(\"selection--active\")) {\r\n        if (e.key.toLowerCase() === \"v\") {\r\n          closeOptionsModal();\r\n        }\r\n      } else {\r\n        handleSelect();\r\n      }\r\n    };\r\n\r\n    // if (toastpopup.classList.contains(\"show-toast\")) {\r\n    //   toastpopup.innerText = \"\";\r\n    //   toastpopup.classList.remove(\"show-toast\");\r\n    //   document.onmousedown = null;\r\n    // }\r\n\r\n    switch (e.key.toLowerCase()) {\r\n      // switch to day view\r\n      case \"d\":\r\n        renderOption(\"day\");\r\n        break;\r\n      case \"1\":\r\n        renderOption(\"day\");\r\n        break;\r\n\r\n      // switch to week view\r\n      case \"w\":\r\n        renderOption(\"week\");\r\n        break;\r\n      case \"2\":\r\n        renderOption(\"week\");\r\n        break;\r\n\r\n      // switch to month view\r\n      case \"m\":\r\n        renderOption(\"month\");\r\n        break;\r\n      case \"3\":\r\n        renderOption(\"month\");\r\n        break;\r\n\r\n      // switch to year view\r\n      case \"y\":\r\n        renderOption(\"year\");\r\n        break;\r\n      case \"4\":\r\n        renderOption(\"year\");\r\n        break;\r\n\r\n      // switch to list view\r\n      case \"l\":\r\n        renderOption(\"list\");\r\n        break;\r\n      case \"5\":\r\n        renderOption(\"list\");\r\n        break;\r\n\r\n      // toggle sidebar open/close\r\n      case \"s\":\r\n        context.toggleSidebarState();\r\n        handleBtnMainMenu();\r\n        break;\r\n\r\n      // toggle form open (close with escape)\r\n      case \"f\":\r\n        handleForm();\r\n        break;\r\n\r\n      // open \"views\" menu\r\n      case \"v\":\r\n        toggleChangeview(e);\r\n        break;\r\n\r\n      // (day/week) next month\r\n      case \"p\":\r\n        handleBtnPrev();\r\n        break;\r\n\r\n      // (day/week) prev month\r\n      case \"n\":\r\n        handleBtnNext();\r\n        break;\r\n\r\n      // set date to today\r\n      case \"t\":\r\n        handleBtnToday();\r\n        break;\r\n\r\n      // open submenu\r\n      case \"a\":\r\n        handleToggleSubmenu();\r\n        break;\r\n\r\n      // open keyboard shortcuts modal\r\n      case \"?\":\r\n        handleShortCutsModal(store);\r\n        break;\r\n      case \"/\":\r\n        handleShortCutsModal(store);\r\n        break;\r\n\r\n      // toggle between light/dark mode\r\n      case \"0\":\r\n        setColorScheme();\r\n        break;\r\n\r\n      // opens search modal\r\n      case \"g\":\r\n        createGoTo(context, store, datepickerContext);\r\n        break;\r\n\r\n      // case \"escape\":\r\n      //   break;\r\n\r\n      case \"+\":\r\n        const targetcat = {\r\n          name: \"new category\",\r\n          color: \"#2C52BA\",\r\n        };\r\n        createCategoryForm(store, targetcat, false, null);\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  const getKeyPressThrottled = throttle(delegateGlobalKeyDown, 150);\r\n  // shortcuts defined within this function are global and will work anywhere within the application (except for modal/popup/form windows)\r\n\r\n  // If a modal/popup is open, all keyboard shortcuts defined within this function will be disabled until the modal/popup is closed.\r\n  // Note that Each modal/popup has its own keydown close event on escape thats defined within the scope of its own function,\r\n  // once it is closed, the event listener is removed from the DOM.\r\n  let [lk, lk2] = ['', ''];\r\n  function handleGlobalKeydown(e) {\r\n    if (!store.getShortcutsStatus()) return;\r\n    if (store.hasActiveOverlay()) return;\r\n\r\n    // prevent ctrl + key shortcuts from triggering at all\r\n    lk = e.key;\r\n    if (lk === \"Control\") {\r\n      lk2 = \"Control\";\r\n      return;\r\n    }\r\n    if (lk2 === \"Control\" && lk !== \"Control\") {\r\n      lk2 = \"\";\r\n      return;\r\n    }\r\n\r\n    getKeyPressThrottled(e);\r\n  }\r\n\r\n  const handleHeaderDelegation = (e) => {\r\n    delegateHeaderEvents(e);\r\n  }\r\n\r\n  function handleCollapse() {\r\n    const view = context.getComponent();\r\n    const headers = {\r\n      ['day']: {\r\n        component: document.querySelector(\".dayview--header\"),\r\n        collapse: \"dvh-collapse\",\r\n      },\r\n      ['week']: {\r\n        component: document.querySelector(\".weekview--header\"),\r\n        componentBody: document.querySelector(\".weekview__grid\"),\r\n        collapse: \"wvh-collapse\",\r\n        componentBodytoggle: \"wvh-body-collapse\"\r\n      },\r\n    };\r\n\r\n    const eyeIcons = {\r\n      on: document.querySelector(\".cv-svg-on\"),\r\n      off: document.querySelector(\".cv-svg-off\")\r\n    };\r\n\r\n    if (view === \"week\" || view === \"day\") {\r\n      eyeIcons.on.classList.toggle(\"hide-cbt\");\r\n      eyeIcons.off.classList.toggle(\"hide-cbt\");\r\n      headers[view].component.classList.toggle(headers[view].collapse);\r\n      if (view === \"week\") {\r\n        headers[view].componentBody.classList.toggle(headers[view].componentBodytoggle);\r\n      }\r\n    }\r\n  }\r\n\r\n  const appinit = () => {\r\n    /*************************/\r\n    // render initial view and set initial attributes\r\n    renderOption(context.getComponent(), true);\r\n    setInitialAttributes();\r\n    handleBtnMainMenu();\r\n\r\n    /*************************/\r\n    // supply callbacks to store for opening form and sidebar\r\n    store.setRenderFormCallback(handleForm);\r\n    const ensureSidebarIsOpen = () => {\r\n      context.setSidebarState(\"open\");\r\n      handleBtnMainMenu();\r\n    };\r\n    store.setRenderSidebarCallback(ensureSidebarIsOpen);\r\n\r\n    /*************************/\r\n    // establish global event listeners\r\n    header.onclick = throttle(handleHeaderDelegation, 150);\r\n    document.addEventListener(\"keydown\", handleGlobalKeydown);\r\n  };\r\n  appinit();\r\n}","import setHeader from \"../components/menus/header\";\r\nimport setYearView from \"../components/views/yearview\";\r\nimport setMonthView from \"../components/views/monthview\";\r\nimport setWeekView from \"../components/views/weekview\";\r\nimport setDayView from \"../components/views/dayview\";\r\nimport setListView from \"../components/views/listview\";\r\n// import setListView from \"../components/views/listview\"\r\n\r\nconst yearComponent = document.querySelector(\".yearview\");\r\nconst monthComponent = document.querySelector(\".monthview\");\r\nconst weekComponent = document.querySelector(\".weekview\");\r\nconst dayComponent = document.querySelector(\".dayview\");\r\nconst listComponent = document.querySelector(\".listview\");\r\n\r\nlet [prev1, prev2] = [null, null];\r\nexport default function setViews(component, context, store, datepickerContext) {\r\n  prev1 = prev2;\r\n  prev2 = component;\r\n\r\n  function hideViews() {\r\n    const views = [\r\n      yearComponent,\r\n      monthComponent,\r\n      weekComponent,\r\n      dayComponent,\r\n      listComponent\r\n    ];\r\n\r\n    // reset previous view after switching to a new view\r\n    const resetPrevView = store.getResetPreviousViewCallback();\r\n    if (prev1 !== null && resetPrevView !== null && prev1 !== prev2) {\r\n      resetPrevView();\r\n    }\r\n\r\n    // only the month view relies on a resize listener\r\n    // more info provided @readme > monthview > box queries\r\n    views.forEach((view) => {\r\n      view.classList.add(\"hide-view\");\r\n      // if (view !== monthComponent) {\r\n      //   window.onresize = null;\r\n      // }\r\n    });\r\n  }\r\n  // window.removeEventListener(\"resize\", store.getResizeHandle(\"month\"));\r\n\r\n  function initView(component) {\r\n    switch (component) {\r\n      case \"day\":\r\n        context.setComponent(component);\r\n        setHeader(context, component);\r\n        setDayView(context, store, datepickerContext);\r\n        dayComponent.classList.remove(\"hide-view\");\r\n        break;\r\n      case \"week\":\r\n        context.setComponent(component);\r\n        setHeader(context, component);\r\n        setWeekView(context, store, datepickerContext);\r\n        weekComponent.classList.remove(\"hide-view\");\r\n        break;\r\n      case \"month\":\r\n        context.setComponent(component);\r\n        setHeader(context, component);\r\n        setMonthView(context, store, datepickerContext);\r\n        monthComponent.classList.remove(\"hide-view\");\r\n        // window.onresize = store.getResizeHandle(\"month\");\r\n        // window.addEventListener(\"resize\", store.getResizeHandle(\"month\"));\r\n        break;\r\n      case \"year\":\r\n        context.setComponent(component);\r\n        setHeader(context, component);\r\n        setYearView(context, store, datepickerContext);\r\n        yearComponent.classList.remove(\"hide-view\");\r\n        break;\r\n      case \"list\":\r\n        context.setComponent(component);\r\n        setHeader(context, component, store);\r\n        setListView(context, store, datepickerContext);\r\n        listComponent.classList.remove(\"hide-view\");\r\n        break;\r\n      default:\r\n        context.setComponent(\"month\");\r\n        setHeader(context, \"month\");\r\n        setMonthView(context, store, datepickerContext);\r\n        monthComponent.classList.remove(\"hide-view\");\r\n        break;\r\n    }\r\n  }\r\n\r\n  hideViews();\r\n  document.title = context.getMonthName();\r\n  initView(component);\r\n}","import { compareDates } from \"../utilities/dateutils\";\r\nimport locales from \"../locales/en\";\r\nconst labels = locales.labels;\r\n\r\n\r\n/*\r\n\"setDateDefaults\",\r\n\"setSchemaDefaults\",\r\n\"setDefaults\",\r\n\"getAllMethodNames\",\r\n\"getColorScheme\",\r\n\"setColorScheme\",\r\n\"setSidebarState\",\r\n\"toggleSidebarState\",\r\n\"getComponent\",\r\n\"setComponent\",\r\n\"getSidebarState\",\r\n\"setDay\",\r\n\"setMonth\",\r\n\"setYear\",\r\n\"setDate\",\r\n\"setDateSelected\",\r\n\"setPrevDay\",\r\n\"setPrevWeek\",\r\n\"setPrevMonth\",\r\n\"setPrevYear\",\r\n\"setNextDay\",\r\n\"setNextWeek\",\r\n\"setNextMonth\",\r\n\"setNextYear\",\r\n\r\n\"getGmt\",\r\n\"getDateSelected\",\r\n\"getDay\",\r\n\"getMonth\",\r\n\"getYear\",\r\n\"getDate\",\r\n\"getToday\",\r\n\"getWeek\",\r\n\"getWeekday\",\r\n\"getWeekArray\",\r\n\"getWeekRange\",\r\n\"getWeekNumber\",\r\n\"getMonthName\",\r\n\"getDaysInMonth\",\r\n\"getMonthArrayStartDay\",\r\n\"getMonthArrayStart\",\r\n\"getMonthArrayEndDay\",\r\n\"getMonthArrayEnd\",\r\n\"getMonthArray\",\r\n\"isToday\"\r\n*/\r\nclass Context {\r\n  constructor () {\r\n    this.colorScheme = \"light\";\r\n    this.component = \"month\";\r\n    this.sidebarState = \"hide\";\r\n    this.date = new Date();\r\n    this.gmt = new Date().getTimezoneOffset() / 60;\r\n\r\n    this.dateSelected = 1;\r\n    this.daySelected = this.date.getDate();\r\n    this.monthSelected = this.date.getMonth();\r\n    this.yearSelected = this.date.getFullYear();\r\n\r\n    this.month = this.getMonth();\r\n    this.monthArray = this.getMonthArray();\r\n    this.week = this.getWeek();\r\n  }\r\n\r\n  setDateDefaults() {\r\n    if (localStorage.getItem(\"yearSelected\") === null) {\r\n      if (this.yearSelected === undefined) {\r\n        this.yearSelected = this.date.getFullYear();\r\n      }\r\n      Context.setLocalYear(this.yearSelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"monthSelected\") === null) {\r\n      if (this.monthSelected === undefined) {\r\n        this.monthSelected = this.date.getMonth();\r\n      }\r\n      Context.setLocalMonth(this.monthSelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"daySelected\") === null) {\r\n      if (this.daySelected === undefined) {\r\n        this.daySelected = this.date.getDate();\r\n      }\r\n      Context.setLocalDay(this.daySelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"dateSelected\") === null) {\r\n      if (this.dateSelected === undefined) {\r\n        this.dateSelected = 1;\r\n      }\r\n      Context.setLocalDateSelected(this.dateSelected);\r\n    }\r\n  }\r\n\r\n  setSchemaDefaults() {\r\n    if (localStorage.getItem(\"colorScheme\") === null) {\r\n      if (this.colorScheme === undefined) {\r\n        this.colorScheme = \"light\";\r\n      }\r\n      Context.setLocalColorScheme(this.colorScheme);\r\n    }\r\n\r\n    if (localStorage.getItem(\"component\") === null) {\r\n      if (this.component === undefined) {\r\n        this.component = \"month\";\r\n      }\r\n      Context.setLocalComponent(this.component);\r\n    }\r\n\r\n    if (localStorage.getItem(\"sidebarState\") === null) {\r\n      if (this.sidebarState === undefined) {\r\n        this.sidebarState = \"hide\";\r\n      }\r\n      Context.setLocalSidebarState(this.sidebarState);\r\n    }\r\n  }\r\n\r\n  setDefaults() {\r\n    this.setSchemaDefaults();\r\n    this.setDateDefaults();\r\n  }\r\n\r\n  /* **************************************** */\r\n  /* LOCAL STATE MANAGEMENT */\r\n  static getLocalDay() {\r\n    return +localStorage.getItem(\"daySelected\") === undefined ? 1 : +localStorage.getItem(\"daySelected\");\r\n  }\r\n\r\n  static getLocalMonth() {\r\n    return +localStorage.getItem(\"monthSelected\") === undefined ? 1 : +localStorage.getItem(\"monthSelected\");\r\n  }\r\n\r\n  static getLocalYear() {\r\n    return +localStorage.getItem(\"yearSelected\") === undefined ? 1 : +localStorage.getItem(\"yearSelected\");\r\n  }\r\n\r\n  static getLocalDateSelected() {\r\n    return +localStorage.getItem(\"dateSelected\");\r\n  }\r\n\r\n  static getLocalComponent() {\r\n    return localStorage.getItem(\"component\");\r\n  }\r\n\r\n  static getLocalColorScheme() {\r\n    return localStorage.getItem(\"colorScheme\");\r\n  }\r\n\r\n  static getLocalSidebarState() {\r\n    return localStorage.getItem(\"sidebarState\");\r\n  }\r\n\r\n  static setLocalDay(day) {\r\n    localStorage.setItem(\"daySelected\", day);\r\n  }\r\n\r\n  static setLocalMonth(month) {\r\n    localStorage.setItem(\"monthSelected\", month);\r\n  }\r\n\r\n  static setLocalYear(year) {\r\n    localStorage.setItem(\"yearSelected\", year);\r\n  }\r\n\r\n  static setLocalDateSelected(date) {\r\n    localStorage.setItem(\"dateSelected\", date);\r\n  }\r\n\r\n  static setLocalComponent(component) {\r\n    localStorage.setItem(\"component\", component);\r\n  }\r\n\r\n  static setLocalSidebarState(state) {\r\n    localStorage.setItem(\"sidebarState\", state);\r\n  }\r\n\r\n  static setLocalColorScheme(colorScheme) {\r\n    localStorage.setItem(\"colorScheme\", colorScheme);\r\n  }\r\n  /* **************************************** */\r\n\r\n\r\n  /* **************************************** */\r\n  /* TESTING -- DEV ONLY */\r\n  getAllMethodNames() {\r\n    return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(\r\n      (method) => {\r\n        return method !== \"constructor\" && method !== \"getStoreStats\";\r\n      }\r\n    );\r\n  }\r\n\r\n  /* **************************************** */\r\n  /* APPLICATION THEME (DARK/LIGHT) */\r\n  getColorScheme() {\r\n    return Context.getLocalColorScheme();\r\n  }\r\n  setColorScheme(colorScheme) {\r\n    this.colorScheme = colorScheme;\r\n    Context.setLocalColorScheme(colorScheme);\r\n  }\r\n  setSidebarState(state) {\r\n    this.sidebarState = state;\r\n    Context.setLocalSidebarState(state);\r\n  }\r\n  toggleSidebarState() {\r\n    this.sidebarState = this.getSidebarState() === \"open\" ? \"hide\" : \"open\";\r\n    Context.setLocalSidebarState(this.sidebarState);\r\n  }\r\n  /* **************************************** */\r\n\r\n\r\n  /* **************************************** */\r\n  /* APPLICATION CURRENT COMPONENT */\r\n  getComponent() {\r\n    return Context.getLocalComponent() || \"month\";\r\n  }\r\n  setComponent(component) {\r\n    this.component = component;\r\n    Context.setLocalComponent(component);\r\n  }\r\n  getSidebarState() {\r\n    return Context.getLocalSidebarState() || \"hide\";\r\n  }\r\n  /* **************************************** */\r\n\r\n\r\n\r\n  /* **************************************** */\r\n  /* APPLICATION DATE HANDLING */\r\n  // set the current date for the following\r\n  /* DAY, MONTH, YEAR, DATE, DAY_SELECTED */\r\n  setDay(day) {\r\n    this.daySelected = day;\r\n    Context.setLocalDay(day);\r\n  }\r\n\r\n  setMonth(month) {\r\n    this.monthSelected = month;\r\n    Context.setLocalMonth(month);\r\n  }\r\n\r\n  setYear(year) {\r\n    this.yearSelected = year;\r\n    Context.setLocalYear(year);\r\n  }\r\n\r\n  setDate(year, month, day) {\r\n    this.setYear(year);\r\n    this.setMonth(month);\r\n    this.setDay(day);\r\n  }\r\n\r\n  setDateSelected(date) {\r\n    this.dateSelected = date;\r\n    Context.setLocalDateSelected(date);\r\n  }\r\n  /* ************** */\r\n  // Take current date and set it to previous day/week/month/year\r\n  /* PREVIOUS : DAY, WEEK, MONTH, YEAR */\r\n  setPrevDay() {\r\n    const prevDay = new Date(\r\n      this.getYear(), this.getMonth(), this.getDay() - 1\r\n    );\r\n\r\n    this.setDate(\r\n      prevDay.getFullYear(), prevDay.getMonth(), prevDay.getDate()\r\n    );\r\n  }\r\n\r\n  setPrevWeek() {\r\n    const prevWeek = new Date(\r\n      this.getYear(), this.getMonth(), this.getDay() - 7\r\n    );\r\n\r\n    this.setDate(\r\n      prevWeek.getFullYear(), prevWeek.getMonth(), prevWeek.getDate()\r\n    );\r\n  }\r\n\r\n  setPrevMonth() {\r\n    const prevMonth = new Date(\r\n      this.getYear(), +this.getMonth() - 1, this.getDay()\r\n    );\r\n\r\n    this.setDate(\r\n      prevMonth.getFullYear(), prevMonth.getMonth(), prevMonth.getDate()\r\n    );\r\n  }\r\n\r\n  setPrevYear() {\r\n    this.setYear(this.getYear() - 1);\r\n  }\r\n  /* ************** */\r\n\r\n  // Take current date and set it to next day/week/month/year\r\n  /* NEXT : DAY, WEEK, MONTH, YEAR */\r\n  setNextDay() {\r\n    const nextDay = new Date(this.getYear(), this.getMonth(), this.getDay() + 1);\r\n    this.setDate(nextDay.getFullYear(), nextDay.getMonth(), nextDay.getDate());\r\n  }\r\n\r\n  setNextWeek() {\r\n    const nextWeek = new Date(this.getYear(), this.getMonth(), this.getDay() + 7);\r\n    this.setDate(nextWeek.getFullYear(), nextWeek.getMonth(), nextWeek.getDate());\r\n  }\r\n\r\n  setNextMonth() {\r\n    const nextMonth = new Date(this.getYear(), this.getMonth() + 1, this.getDay());\r\n    this.setDate(nextMonth.getFullYear(), nextMonth.getMonth(), nextMonth.getDate());\r\n  }\r\n\r\n  setNextYear() {\r\n    this.setYear(this.getYear() + 1);\r\n  }\r\n  /* ************** */\r\n\r\n\r\n  /* ************** */\r\n  /* GETTERS */\r\n  getGmt() {\r\n    return this.gmt;  // UTC Offset\r\n  }\r\n\r\n  getDateSelected() {\r\n\r\n    return +Context.getLocalDateSelected();\r\n    // return +this.dateSelected;\r\n  }\r\n\r\n  getDay() {\r\n    return +Context.getLocalDay();\r\n    // return +this.daySelected;\r\n  }\r\n\r\n  getMonth() {\r\n    // const month = Context.getLocalMonth();\r\n    return +Context.getLocalMonth();\r\n    // return +this.monthSelected;\r\n  }\r\n\r\n  getYear() {\r\n    return +Context.getLocalYear() || this.date.getFullYear();\r\n    // return +this.yearSelected;\r\n  }\r\n\r\n  getDate() {\r\n    return new Date(this.getYear(), this.getMonth(), this.getDay());\r\n  }\r\n\r\n  getToday() {\r\n    return this.date;\r\n  }\r\n\r\n  getWeek() {\r\n    let tempdate = this.getDate();\r\n    tempdate.setDate(tempdate.getDate() - tempdate.getDay());\r\n    return tempdate;\r\n  }\r\n\r\n  getWeekday() {\r\n    return this.getDate().getDay();\r\n  }\r\n\r\n  getWeekArray() {\r\n    let week = this.getWeek();\r\n    let weekArray = [];\r\n    for (let i = 0; i < 7; i++) {\r\n      if (i < 6) {\r\n        weekArray.push(new Date(week.getFullYear(), week.getMonth(), week.getDate() + i));\r\n      } else {\r\n        weekArray.push(new Date(week.getFullYear(), week.getMonth(), week.getDate() + i, 23, 59, 59, 999));\r\n      }\r\n    }\r\n    return weekArray;\r\n  }\r\n\r\n  getWeekRange() {\r\n    let weekArray = this.getWeekArray();\r\n    let [m1, m2] = [weekArray[0].getMonth(), weekArray[6].getMonth()];\r\n    let [d1, d2] = [weekArray[0].getDate(), weekArray[6].getDate()];\r\n\r\n    if (m1 === m2) {\r\n      return `${labels.monthsShort[m1]} ${d1}  ${d2}, ${weekArray[0].getFullYear()}`;\r\n    } else {\r\n      return `${labels.monthsShort[m1]} ${d1}  ${d2} ${labels.monthsShort[m2]}, ${weekArray[1].getFullYear()}`;\r\n    }\r\n  }\r\n\r\n  // ** not in use **\r\n  getWeekNumber() {\r\n    // returns week index 1 - 52\r\n    let d = new Date(Date.UTC(this.getYear(), this.getMonth(), this.getDay()));\r\n    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\r\n    let yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\r\n  }\r\n\r\n  getMonthName() {\r\n    return labels.monthsLong[this.getMonth()];\r\n  }\r\n\r\n  getDaysInMonth() {\r\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDate();\r\n  }\r\n\r\n  getMonthArrayStartDay() {\r\n    return new Date(this.getYear(), this.getMonth(), 1).getDay();\r\n  }\r\n\r\n  getMonthArrayStart() {\r\n    let monthArrayStart = [];\r\n    let [year, month] = [this.getYear(), this.getMonth()];\r\n    for (let i = 0; i < this.getMonthArrayStartDay(); i++) {\r\n      monthArrayStart.push(new Date(year, month, 0 - i));\r\n    }\r\n    return monthArrayStart;\r\n  }\r\n\r\n  getMonthArrayEndDay() {\r\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDay();\r\n  }\r\n\r\n  getMonthArrayEnd(handleFourWeeks) {\r\n    let monthArrayEnd = [];\r\n    let [year, month] = [this.getYear(), this.getMonth()];\r\n\r\n    if (handleFourWeeks) {\r\n      for (let i = 1; i < 8; i++) {\r\n        monthArrayEnd.push(new Date(year, +month + 1, i));\r\n      }\r\n      return monthArrayEnd;\r\n    } else {\r\n      for (let i = 1; i < 7 - this.getMonthArrayEndDay(); i++) {\r\n        monthArrayEnd.push(new Date(year, +month + 1, i));\r\n      }\r\n      return monthArrayEnd;\r\n    }\r\n  }\r\n\r\n  getMonthArray() {\r\n    let monthArray = [];\r\n    let start = this.getMonthArrayStart();\r\n    let daysInMonth = this.getDaysInMonth();\r\n    let [year, month] = [this.getYear(), this.getMonth()];\r\n    let end = this.getMonthArrayEnd();\r\n\r\n    for (let i = start.length - 1; i >= 0; i--) {\r\n      monthArray.push(start[i]);\r\n    }\r\n\r\n    for (let i = 1; i <= daysInMonth; i++) {\r\n      monthArray.push(new Date(year, month, i));\r\n    }\r\n\r\n    monthArray[monthArray.length - 1].setHours(23, 59, 59, 999);\r\n\r\n    if (monthArray.length === 28 && end.length < 7) {\r\n      end = this.getMonthArrayEnd(true);\r\n    }\r\n\r\n    for (let i = 0; i < end.length; i++) {\r\n      if (i === end.length - 1) {\r\n        end[i].setHours(23, 59, 59, 999);\r\n      }\r\n      monthArray.push(end[i]);\r\n    }\r\n\r\n    return monthArray;\r\n  }\r\n\r\n  isToday(testDate) {\r\n    if (!testDate) {\r\n      return compareDates(this.getDate(), new Date());\r\n    } else {\r\n      return compareDates(testDate, new Date());\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n  * DatepickerContext\r\n  * @class\r\n  * @classdesc date context for datepicker -- \r\n  * slimmed down version of @Context class \r\n  * @property {Date} date - today's date\r\n  * @property {Date} dateSelected - selected date\r\n  * @property {number} daySelected - selected day\r\n  * @property {number} monthSelected - selected month\r\n  * @property {number} yearSelected - selected year\r\n  * @property {number} month - current month\r\n  * @property {Array} monthArray - current month array\r\n  * \r\n */\r\nclass DatepickerContext {\r\n  constructor () {\r\n    this.date = new Date();\r\n    this.dateSelected = this.date.getDate();\r\n    this.daySelected = this.date.getDate();\r\n    this.monthSelected = this.date.getMonth();\r\n    this.yearSelected = this.date.getFullYear();\r\n    this.month = this.getMonth();\r\n    this.monthArray = this.getMonthArray();\r\n  }\r\n\r\n  setDefaults() {\r\n    if (localStorage.getItem(\"pickerYearSelected\") === null) {\r\n      if (this.yearSelected === undefined) {\r\n        this.yearSelected = this.date.getFullYear();\r\n      }\r\n      DatepickerContext.setLocalPickerYear(this.yearSelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"pickerMonthSelected\") === null) {\r\n      if (this.monthSelected === undefined) {\r\n        this.monthSelected = this.date.getMonth();\r\n      }\r\n      DatepickerContext.setLocalPickerMonth(this.monthSelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"pickerDaySelected\") === null) {\r\n      if (this.daySelected === undefined) {\r\n        this.daySelected = this.date.getDate();\r\n      }\r\n      DatepickerContext.setLocalPickerDay(this.daySelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"pickerDateSelected\") === null) {\r\n      if (this.dateSelected === undefined) {\r\n        this.dateSelected = this.date.getDate();\r\n      }\r\n      DatepickerContext.setLocalPickerDateSelected(this.dateSelected);\r\n    }\r\n  }\r\n\r\n  /* **************************************** */\r\n  /* LOCAL STATE MANAGEMENT */\r\n  static getLocalPickerDay() {\r\n    return +localStorage.getItem(\"pickerDaySelected\");\r\n  }\r\n\r\n  static getLocalPickerMonth() {\r\n    return +localStorage.getItem(\"pickerMonthSelected\");\r\n  }\r\n\r\n  static getLocalPickerYear() {\r\n    return +localStorage.getItem(\"pickerYearSelected\");\r\n  }\r\n\r\n  static getLocalPickerDateSelected() {\r\n    return +localStorage.getItem(\"pickerDateSelected\");\r\n  }\r\n\r\n  static setLocalPickerDay(day) {\r\n    localStorage.setItem(\"pickerDaySelected\", day);\r\n  }\r\n\r\n  static setLocalPickerMonth(month) {\r\n    localStorage.setItem(\"pickerMonthSelected\", month);\r\n  }\r\n\r\n  static setLocalPickerYear(year) {\r\n    localStorage.setItem(\"pickerYearSelected\", year);\r\n  }\r\n\r\n  static setLocalPickerDateSelected(date) {\r\n    localStorage.setItem(\"pickerDateSelected\", date);\r\n  }\r\n\r\n  /* **************************************** */\r\n  /* DAY, MONTH, YEAR, DATE, DAY_SELECTED */\r\n  setDay(day) {\r\n    this.daySelected = day;\r\n    DatepickerContext.setLocalPickerDay(day);\r\n  }\r\n\r\n  setMonth(month) {\r\n    this.monthSelected = month;\r\n    DatepickerContext.setLocalPickerMonth(month);\r\n  }\r\n\r\n  setYear(year) {\r\n    this.yearSelected = year;\r\n    DatepickerContext.setLocalPickerYear(year);\r\n  }\r\n\r\n  setDateSelected(date) {\r\n    this.dateSelected = date;\r\n    DatepickerContext.setLocalPickerDateSelected(date);\r\n  }\r\n\r\n  setDate(year, month, day) {\r\n    this.setYear(year);\r\n    this.setMonth(month);\r\n    this.setDay(day);\r\n  }\r\n\r\n  /* ************** */\r\n  setPrevMonth() {\r\n    const prevMonth = new Date(\r\n      this.getYear(), this.getMonth() - 1, this.getDay()\r\n    );\r\n\r\n    this.setDate(\r\n      prevMonth.getFullYear(), prevMonth.getMonth(), prevMonth.getDate()\r\n    );\r\n  }\r\n\r\n  setNextMonth() {\r\n    const nextMonth = new Date(\r\n      this.getYear(), this.getMonth() + 1, this.getDay()\r\n    );\r\n\r\n    this.setDate(\r\n      nextMonth.getFullYear(), nextMonth.getMonth(), nextMonth.getDate()\r\n    );\r\n  }\r\n  /* ************** */\r\n  getDateSelected() {\r\n    return +DatepickerContext.getLocalPickerDateSelected();\r\n  }\r\n\r\n  getDay() {\r\n    return +DatepickerContext.getLocalPickerDay();\r\n  }\r\n\r\n  getMonth() {\r\n    return +DatepickerContext.getLocalPickerMonth();\r\n  }\r\n\r\n  getYear() {\r\n    return +DatepickerContext.getLocalPickerYear();\r\n  }\r\n\r\n  getDate() {\r\n    return new Date(this.getYear(), this.getMonth(), this.getDay());\r\n  }\r\n\r\n  getToday() {\r\n    return this.date;\r\n  }\r\n\r\n  getMonthName() {\r\n    return labels.monthsLong[this.getMonth()];\r\n  }\r\n\r\n  getDaysInMonth() {\r\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDate();\r\n  }\r\n\r\n  getMonthArrayStartDay() {\r\n    return new Date(this.getYear(), this.getMonth(), 1).getDay();\r\n  }\r\n\r\n  getMonthArrayStart() {\r\n    let monthArrayStart = [];\r\n    let [year, month] = [this.getYear(), this.getMonth()];\r\n    for (let i = 0; i < this.getMonthArrayStartDay(); i++) {\r\n      monthArrayStart.push(new Date(year, month, 0 - i));\r\n    }\r\n    return monthArrayStart;\r\n  }\r\n\r\n  getMonthArrayEndDay() {\r\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDay();\r\n  }\r\n\r\n  getMonthArrayEnd() {\r\n    let monthArrayEnd = [];\r\n    let [year, month] = [this.getYear(), this.getMonth()];\r\n    for (let i = 1; i < 7 - this.getMonthArrayEndDay(); i++) {\r\n      monthArrayEnd.push(new Date(year, +month + 1, i));\r\n    }\r\n    return monthArrayEnd;\r\n  }\r\n\r\n  getMonthArray() {\r\n    let monthArray = [];\r\n\r\n    let start = this.getMonthArrayStart();\r\n    for (let i = start.length - 1; i >= 0; i--) {\r\n      monthArray.push(start[i]);\r\n    }\r\n\r\n    let [year, month] = [this.getYear(), this.getMonth()];\r\n    for (let i = 1; i <= this.getDaysInMonth(); i++) {\r\n      monthArray.push(new Date(year, month, i));\r\n    }\r\n\r\n    let end = this.getMonthArrayEnd();\r\n    for (let i = 0; i < end.length; i++) {\r\n      if (i === end.length - 1) {\r\n        end[i].setHours(23, 59, 59, 999);\r\n      }\r\n      monthArray.push(end[i]);\r\n    }\r\n    return monthArray;\r\n  }\r\n}\r\n\r\nconst context = new Context();\r\nconst datepickerContext = new DatepickerContext();\r\ncontext.setDefaults();\r\ndatepickerContext.setDefaults();\r\nexport default context;\r\nexport { datepickerContext };","const localStoreKeyNames = [\r\n  \"animationStatus\",\r\n  \"colorScheme\",\r\n  \"component\",\r\n  \"ctg\",\r\n  \"dateSelected\",\r\n  \"daySelected\",\r\n  \"keyboardShortcutsStatus\",\r\n  \"monthSelected\",\r\n  \"pickerDateSelected\",\r\n  \"pickerDaySelected\",\r\n  \"pickerMonthSelected\",\r\n  \"pickerYearSelected\",\r\n  \"refresh\",\r\n  \"sidebarState\",\r\n  \"store\",\r\n  \"yearSelected\"\r\n];\r\n\r\n// [\r\n//   \"activeCtg\",\r\n//   \"dateSelected\",\r\n//   \"pickerDaySelected\",\r\n//   \"pickerMonthSelected\",\r\n//   \"sidebarState\",\r\n//   \"animationStatus\",\r\n//   \"refresh\",\r\n//   \"component\",\r\n//   \"yearSelected\",\r\n//   \"ctg\",\r\n//   \"monthSelected\",\r\n//   \"daySelected\",\r\n//   \"pickerDateSelected\",\r\n//   \"pickerYearSelected\",\r\n//   \"store\",\r\n//   \"colorScheme\",\r\n//   \"keyboardShortcutsStatus\"\r\n// ]\r\n\r\nexport default localStoreKeyNames;","import Entry from \"../factory/entries\";\r\nimport localStoreKeyNames from \"./constants\";\r\nimport { testDate, compareDates } from \"../utilities/dateutils\";\r\nimport locales from \"../locales/en\";\r\nimport defautlKeyboardShortcuts from \"../locales/kbDefault\";\r\nconst colors = locales.colors;\r\n/*\r\n  this is a temporary list of store methods for development purposes, it is not a complete list of methods\r\n\r\n\r\n\r\n  ***************************************\r\n  // ENTRY MANAGEMENT\r\n  \"addEntry\",\r\n  \"createEntry\",\r\n  \"deleteEntry\",\r\n  \"getActiveEntries\",\r\n  \"getEntry\",\r\n  \"getEntries\",\r\n  \"removeLastEntry\",\r\n  \"updateEntry\",\r\n  \"searchBy\",\r\n  \"sortBy\",\r\n  \"getFirstAndLastEntry\",\r\n  \"generateCoordinates\",\r\n  \"getDayEntries\",\r\n  \"getDayEntriesArray\",\r\n  \"getMonthEntries\",\r\n  \"getMonthEntryDates\",\r\n  \"getGroupedMonthEntries\",\r\n  \"getWeekEntries\",\r\n  \"getYearEntries\",\r\n  \"getGroupedYearEntries\",\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // CATEGORY MANAGEMENT\r\n  \"addNewCtg\",\r\n  \"deleteCategory\",\r\n  \"getDefaultCtg\",\r\n  \"getFirstActiveCategory\",\r\n  \"getFirstActiveCategoryKeyPair\",\r\n  \"getActiveCategories\",\r\n  \"getActiveCategoriesKeyPair\",\r\n  \"getAllCtg\",\r\n  \"getAllCtgColors\",\r\n  \"getAllCtgNames\",\r\n  \"getCategoryStatus\",\r\n  \"getCtgColor\",\r\n  \"getCtgLength\",\r\n  \"hasCtg\",\r\n  \"moveCategoryEntriesToNewCategory\",\r\n  \"removeCategoryAndEntries\",\r\n  \"setCategoryStatus\",\r\n  \"setAllCategoryStatusExcept\",\r\n  \"updateCtgColor\",\r\n  \"updateCtg\"\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // KEYBOARD SHORTCUT MANAGEMENT\r\n  \"getShortcuts\",\r\n  \"setShortCut\",\r\n  \"setShortcutsStatus\",\r\n  \"getShortcutsStatus\",\r\n  ***************************************\r\n\r\n  ***************************************\r\n  // ANIMATION MANAGEMENT\r\n  \"setAnimationStatus\",\r\n  \"getAnimationStatus\"\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // POPUP/TOAST/NOTIFICATION MANAGEMENT\r\n  \"addActiveOverlay\",\r\n  \"removeActiveOverlay\",\r\n  \"getActiveOverlay\",\r\n  \"hasActiveOverlay\",\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // USER UPLOAD/DOWNLOAD MANAGEMNET\r\n  \"validateUserUpload\",\r\n  \"setUserUpload\",\r\n  \"setDataReconfigCallback\",\r\n  \"getUserUpload\",\r\n  \"getDataReconfigCallback\",\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // FORM MANAGEMENT \r\n  \"setFormRenderHandle\",\r\n  \"getFormRenderHandle\",\r\n\r\n  \"setFormResetHandle\",\r\n  \"getFormResetHandle\",\r\n\r\n  \"setRenderFormCallback\",\r\n  \"getRenderFormCallback\",\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // SIDEBAR MANAGEMENT\r\n  \"setRenderSidebarCallback\",\r\n  \"getRenderSidebarCallback\"\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // DATEPICKER MANAGEMENT\r\n  \"setResetDatepickerCallback\",\r\n  \"getResetDatepickerCallback\",\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // CALENDAR MANAGEMENT\r\n  \"setResizeHandle\",\r\n  \"getResizeHandle\",\r\n  ***************************************\r\n]\r\n*/\r\n// Store is passed to all calendar views in the following order :\r\n// ./index > ./renderViews > ./setViews > component\r\n\r\nclass Store {\r\n  constructor () {\r\n    this.store = localStorage.getItem(\"store\")\r\n      ? JSON.parse(localStorage.getItem(\"store\"))\r\n      : [];\r\n\r\n    this.userUpload;\r\n\r\n    this.ctg = localStorage.getItem(\"ctg\")\r\n      ? JSON.parse(localStorage.getItem(\"ctg\"))\r\n      : {\r\n        default: { color: colors.blue[4], active: true },\r\n      };\r\n\r\n    this.activeOverlay = new Set();\r\n\r\n    this.handleRenders = {\r\n      sidebar: {\r\n        callback: null,\r\n      },\r\n      datepicker: {\r\n        reset: null,\r\n      },\r\n      form: {\r\n        callback: null,\r\n      },\r\n      reconfig: {\r\n        callback: null,\r\n      },\r\n      categories: {\r\n        callback: null,\r\n      },\r\n      calendars: {\r\n        previous: {\r\n          reset: null,\r\n        },\r\n        month: {\r\n          reset: null,\r\n          resize: null,\r\n        },\r\n        week: {\r\n          reset: null,\r\n          render: null,\r\n        },\r\n        day: {\r\n          reset: null,\r\n        },\r\n        list: {\r\n          reset: null,\r\n        },\r\n      },\r\n    };\r\n\r\n    this.keyboardShortcuts = defautlKeyboardShortcuts;\r\n    this.keyboardShortcutsStatus = true;\r\n    this.animationStatus = true;\r\n  }\r\n\r\n  setStoreForTesting(store) {\r\n    this.store = store;\r\n    Store.setStore(this.store);\r\n  }\r\n\r\n  getStoreStats() {\r\n    return [this.store.length, this.getAllCtgNames().length];\r\n  }\r\n\r\n  getAllMethodNames() {\r\n    return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(\r\n      (method) => {\r\n        return method !== \"constructor\" && method !== \"getStoreStats\";\r\n      }\r\n    );\r\n  }\r\n\r\n  /* ************************* */\r\n  /* LOCAL STORAGE MANAGEMENT */\r\n  static getStore() {\r\n    return JSON.parse(localStorage.getItem(\"store\")) || [];\r\n  }\r\n\r\n  static getActiveStore() {\r\n    return JSON.parse(localStorage.getItem(\"activeStore\")) || [];\r\n  }\r\n\r\n  static getCtg() {\r\n    return JSON.parse(localStorage.getItem(\"ctg\")) || [];\r\n  }\r\n\r\n  static getShortcutsStatus() {\r\n    return JSON.parse(localStorage.getItem(\"keyboardShortcutsStatus\"));\r\n  }\r\n\r\n  static getAnimationStatus() {\r\n    return JSON.parse(localStorage.getItem(\"animationStatus\"));\r\n  }\r\n\r\n  // *******************\r\n  static setStore(store) {\r\n    localStorage.setItem(\"store\", JSON.stringify(store));\r\n  }\r\n\r\n  static setActiveStore(activeStore) {\r\n    localStorage.setItem(\"activeStore\", JSON.stringify(activeStore));\r\n  }\r\n\r\n  static setCtg(ctg) {\r\n    localStorage.setItem(\"ctg\", JSON.stringify(ctg));\r\n  }\r\n\r\n  static setShortcutsStatus(status) {\r\n    localStorage.setItem(\"keyboardShortcutsStatus\", JSON.stringify(status));\r\n  }\r\n\r\n  static setAnimationStatus(status) {\r\n    localStorage.setItem(\"animationStatus\", JSON.stringify(status));\r\n  }\r\n  /* ************************* */\r\n\r\n  /* ************** */\r\n  /* essential crud (entries) - create, read, update, delete */\r\n  addEntry(entry) {\r\n    this.store.push(entry);\r\n    Store.setStore(this.store);\r\n  }\r\n\r\n  createEntry(...args) {\r\n    this.addEntry(new Entry(...args));\r\n    Store.setStore(this.store);\r\n  }\r\n\r\n  deleteEntry(id) {\r\n    this.store = this.store.filter((entry) => entry.id !== id);\r\n    Store.setStore(this.store);\r\n  }\r\n\r\n  getActiveEntries() {\r\n    const active = this.getActiveCategories();\r\n    if (!active) return [];\r\n    const activeEntries = this.store.filter((entry) => {\r\n      return active ? active.indexOf(entry.category) > -1 : [];\r\n    });\r\n    return activeEntries;\r\n  }\r\n\r\n  getEntry(id) {\r\n    return this.store.find((entry) => entry.id === id);\r\n  }\r\n\r\n  getEntries() {\r\n    return this.store || [];\r\n  }\r\n\r\n  getEntriesByCtg(ctg) {\r\n    return this.store.filter((entry) => {\r\n      return entry.category === ctg;\r\n    });\r\n  }\r\n\r\n  removeLastEntry() {\r\n    this.store.pop();\r\n    Store.setStore(this.store);\r\n  }\r\n\r\n  getLastEntryId() {\r\n    return this.store[this.store.length - 1].id;\r\n  }\r\n\r\n  compareEntries(entry1, entry2) {\r\n    for (let key in entry1) {\r\n      if (key === \"id\" || key === \"coordinates\") continue;\r\n      if (key === \"end\" || key === \"start\") {\r\n        if (new Date(entry1[key]).getTime() - new Date(entry2[key]).getTime() !== 0) {\r\n          return false;\r\n        }\r\n      } else if (entry1[key] !== entry2[key]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  updateEntry(id, data) {\r\n    let entry = this.getEntry(id);\r\n    entry = Object.assign(entry, data);\r\n    Store.setStore(this.store);\r\n  }\r\n  /* ************ */\r\n\r\n  /* **************************** */\r\n  /* (ENTRIES) FILTER/SORT/PARTITION/ */\r\n  searchBy(entries, searchtype, value) {\r\n    if (entries.length === 0) return;\r\n    return entries.filter((entry) => {\r\n      return entry[searchtype].toLowerCase().slice(0, value.length) === value;\r\n    });\r\n  }\r\n\r\n  sortBy(entries, type, direction) {\r\n    if (entries.length === 0) return;\r\n\r\n    if (direction === \"desc\") {\r\n      return entries.sort((a, b) => {\r\n        if (type === \"start\") {\r\n          return new Date(a.start) - new Date(b.start);\r\n        } else if (type === \"end\") {\r\n          return new Date(a.end) - new Date(b.end);\r\n        } else if (\r\n          type === \"description\" ||\r\n          type === \"title\" ||\r\n          type === \"category\"\r\n        ) {\r\n          return a[type].localeCompare(b[type]);\r\n        } else {\r\n          return a[type] - b[type];\r\n        }\r\n      });\r\n    } else {\r\n      return entries.sort((a, b) => {\r\n        if (type === \"start\") {\r\n          return new Date(b.start) - new Date(a.start);\r\n        } else if (type === \"end\") {\r\n          return new Date(b.end) - new Date(a.end);\r\n        } else if (\r\n          type === \"description\" ||\r\n          type === \"title\" ||\r\n          type === \"category\"\r\n        ) {\r\n          return b[type].localeCompare(a[type]);\r\n        } else {\r\n          return b[type] - a[type];\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {Array} [\r\n   *    start date/time of earliest entry,  {string}\r\n   *    end date/time of last entry         {string}\r\n   * ]\r\n   */\r\n  getFirstAndLastEntry() {\r\n    let sorted = this.sortBy(this.getActiveEntries(), \"start\", \"desc\");\r\n    if (sorted === undefined) {\r\n      return [0, 0];\r\n    } else {\r\n      return [sorted[0].start, sorted[sorted.length - 1].end];\r\n    }\r\n  }\r\n  /* **************************** */\r\n\r\n  /* *************************************** */\r\n  /* SEGMENT ENTRIES FOR SPECIFIC VIEWS (YEAR/MONTH/...ect)*/\r\n\r\n  // @generateCoordinates -- (only used in week and day view)\r\n  // generates coordinates based on start and end times for a given entry\r\n  // if an entry spans beyond a day, it will render at the top of the grid in\r\n  // a static (immobile) position.\r\n  generateCoordinates(start, end) {\r\n    [start, end] = [testDate(start), testDate(end)];\r\n\r\n    let startMin = start.getHours() * 4 + Math.floor(start.getMinutes() / 15);\r\n    let endMin = end.getHours() * 4 + Math.floor(end.getMinutes() / 15);\r\n    let height = endMin - startMin;\r\n    let total = startMin + height;\r\n\r\n    if (!compareDates(start, end)) {\r\n      return {\r\n        allDay: true,\r\n        x: start.getDay(),\r\n        x2: end.getDay(),\r\n      };\r\n    } else {\r\n      return {\r\n        allDay: false,\r\n        x: start.getDay(),\r\n        y: startMin,\r\n        h: height,\r\n        e: total,\r\n      };\r\n    }\r\n  }\r\n\r\n  getDayEntries(day) {\r\n    let activeEntries = this.getActiveEntries();\r\n    let boxes = {\r\n      allDay: [], // entries that start on one day and end on another\r\n      day: [], // entries that start and end on same day\r\n    };\r\n\r\n    if (activeEntries.length === 0) return boxes;\r\n\r\n    let dayEntries = activeEntries.filter((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      const [y, m, d] = [\r\n        entryDate.getFullYear(),\r\n        entryDate.getMonth(),\r\n        entryDate.getDate(),\r\n      ];\r\n      return (\r\n        y === day.getFullYear() && m === day.getMonth() && d === day.getDate()\r\n      );\r\n    });\r\n\r\n    dayEntries.forEach((entry) => {\r\n      entry.coordinates = this.generateCoordinates(\r\n        new Date(entry.start),\r\n        new Date(entry.end)\r\n      );\r\n\r\n      if (entry.coordinates.allDay) {\r\n        boxes.allDay.push(entry);\r\n      } else {\r\n        boxes.day.push(entry);\r\n      }\r\n    });\r\n    return boxes;\r\n  }\r\n\r\n  getDayEntriesArray(targetDate) {\r\n    let activeEntries = this.getActiveEntries();\r\n    if (activeEntries.length === 0) return [];\r\n\r\n    return activeEntries.filter((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      const [y, m, d] = [\r\n        entryDate.getFullYear(),\r\n        entryDate.getMonth(),\r\n        entryDate.getDate(),\r\n      ];\r\n      return (\r\n        y === targetDate.getFullYear() &&\r\n        m === targetDate.getMonth() &&\r\n        d === targetDate.getDate()\r\n      );\r\n    });\r\n  }\r\n\r\n  getMonthEntries(montharr) {\r\n    let activeEntries = this.getActiveEntries();\r\n    if (activeEntries.length === 0) return [];\r\n\r\n    return activeEntries.filter((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      return (\r\n        entryDate >= montharr[0] && entryDate <= montharr[montharr.length - 1]\r\n      );\r\n    });\r\n  }\r\n\r\n  getMonthEntryDates(montharr) {\r\n    let entries = this.getMonthEntries(montharr);\r\n    let grouped = {};\r\n    entries.forEach((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      const [y, m, d] = [\r\n        entryDate.getFullYear(),\r\n        entryDate.getMonth(),\r\n        entryDate.getDate(),\r\n      ];\r\n      let key = `${y}-${m}-${d}`;\r\n      if (!grouped[key]) {\r\n        grouped[key] = [];\r\n      }\r\n      grouped[key].push(entry);\r\n    });\r\n    return Object.keys(grouped);\r\n  }\r\n\r\n  getGroupedMonthEntries(entries) {\r\n    return entries.reduce((acc, entry) => {\r\n      let tempDate = new Date(entry.start);\r\n      let day = tempDate.getDate();\r\n      if (!acc[day]) {\r\n        acc[day] = [];\r\n      }\r\n      acc[day].push(entry);\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  getWeekEntries(week) {\r\n    let activeEntries = this.getActiveEntries();\r\n    let [start, end] = [week[0], week[6]];\r\n    let boxes = {\r\n      allDay: [], // entries that start on one day and end on another\r\n      day: [], // entries that start and end on same day\r\n    };\r\n\r\n    if (activeEntries.length === 0) return boxes;\r\n    let entries = activeEntries.filter((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      return entryDate >= start && entryDate <= end;\r\n    });\r\n\r\n    entries.forEach((entry) => {\r\n      entry.coordinates = this.generateCoordinates(\r\n        new Date(entry.start),\r\n        new Date(entry.end)\r\n      );\r\n\r\n      if (entry.coordinates.allDay) {\r\n        boxes.allDay.push(entry);\r\n      } else {\r\n        boxes.day.push(entry);\r\n      }\r\n    });\r\n\r\n    return boxes;\r\n  }\r\n\r\n  getYearEntries(year) {\r\n    let activeEntries = this.getActiveEntries();\r\n    if (activeEntries.length === 0) return [];\r\n    return activeEntries.filter(\r\n      (entry) => new Date(entry.start).getFullYear() === year\r\n    );\r\n  }\r\n\r\n  getGroupedYearEntries(yearentries) {\r\n    let grouped = {};\r\n    yearentries.forEach((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      let month = entryDate.getMonth();\r\n      let day = entryDate.getDate();\r\n\r\n      if (!grouped[month]) {\r\n        grouped[month] = {};\r\n      }\r\n\r\n      if (!grouped[month][day]) {\r\n        grouped[month][day] = [];\r\n      }\r\n\r\n      grouped[month][day].push(entry);\r\n    });\r\n\r\n    return grouped;\r\n  }\r\n\r\n  /* ************************************* */\r\n\r\n  /* ********************* */\r\n  /*  CATEGORY MANAGEMENT */\r\n  addNewCtg(categoryName, color) {\r\n    if (!this.hasCtg(categoryName)) {\r\n      this.ctg[categoryName] = {\r\n        color: color,\r\n        active: true,\r\n      };\r\n      Store.setCtg(this.ctg);\r\n    }\r\n  }\r\n\r\n  deleteCategory(category) {\r\n    if (this.hasCtg(category)) {\r\n      delete this.ctg[category];\r\n      Store.setCtg(this.ctg);\r\n    }\r\n  }\r\n\r\n  getDefaultCtg() {\r\n    return Object.entries(this.ctg)[0];\r\n  }\r\n\r\n  getFirstActiveCategory() {\r\n    for (let [key, value] of Object.entries(this.ctg)) {\r\n      if (value.active) {\r\n        return key;\r\n      }\r\n    }\r\n    return \"default\";\r\n  }\r\n\r\n  getFirstActiveCategoryKeyPair() {\r\n    for (let [key, value] of Object.entries(this.ctg)) {\r\n      if (value.active) {\r\n        return [key, value.color];\r\n      }\r\n    }\r\n    const backup = this.getDefaultCtg();\r\n    return [backup[0], backup[1].color];\r\n  }\r\n\r\n  getActiveCategories() {\r\n    let active = Object.keys(this.ctg).filter((key) => this.ctg[key].active);\r\n    if (active.length > 0) {\r\n      return active;\r\n    } else {\r\n      active = [];\r\n    }\r\n  }\r\n\r\n  getActiveCategoriesKeyPair() {\r\n    return Object.entries(this.ctg).filter((key) => key[1].active);\r\n  }\r\n\r\n  getAllCtg() {\r\n    return this.ctg;\r\n  }\r\n\r\n  getAllCtgColors() {\r\n    return Object.values(this.ctg).map((ctg) => ctg.color);\r\n  }\r\n\r\n  getAllCtgNames() {\r\n    return Object.keys(this.ctg);\r\n  }\r\n\r\n  getCategoryStatus(category) {\r\n    if (this.ctg.hasOwnProperty(category)) {\r\n      return this.ctg[category].active;\r\n    }\r\n  }\r\n\r\n  getCtgColor(ctg) {\r\n    return this.ctg[ctg].color;\r\n  }\r\n\r\n  getCtgLength(category) {\r\n    return this.store.filter((entry) => entry.category === category).length;\r\n  }\r\n\r\n  hasCtg(categoryName) {\r\n    let hasctg = false;\r\n    for (let key in this.ctg) {\r\n      if (key.toLowerCase() === categoryName.toLowerCase()) {\r\n        hasctg = true;\r\n      }\r\n    }\r\n    return hasctg;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} category\r\n   * @param {string} newCategory\r\n   */\r\n  moveCategoryEntriesToNewCategory(category, newCategory, newName) {\r\n    if (this.hasCtg(category) || newName === true) {\r\n      this.store.forEach((entry) => {\r\n        if (entry.category === category) {\r\n          entry.category = newCategory;\r\n        }\r\n      });\r\n      Store.setStore(this.store);\r\n    }\r\n    this.deleteCategory(category);\r\n  }\r\n\r\n  removeCategoryAndEntries(category) {\r\n    if (this.hasCtg(category)) {\r\n      this.store = this.store.filter((entry) => entry.category !== category);\r\n      Store.setStore(this.store);\r\n    }\r\n    this.deleteCategory(category);\r\n  }\r\n\r\n  setCategoryStatus(category, status) {\r\n    if (this.hasCtg(category)) {\r\n      this.ctg[category].active = status;\r\n      Store.setCtg(this.ctg);\r\n    }\r\n  }\r\n\r\n  setAllCategoryStatusExcept(category, status) {\r\n    for (let key in this.ctg) {\r\n      if (key !== category) {\r\n        this.ctg[key].active = status;\r\n      } else {\r\n        this.ctg[key].active = !status;\r\n      }\r\n    }\r\n    Store.setCtg(this.ctg);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} categoryName\r\n   * @param {string} color\r\n   * @desc updates the color of a category\r\n   */\r\n  updateCtgColor(categoryName, color) {\r\n    if (this.hasCtg(categoryName)) {\r\n      this.ctg[categoryName].color = color;\r\n      Store.setCtg(this.ctg);\r\n    }\r\n  }\r\n\r\n  getCtgIndex(category) {\r\n    return Object.keys(this.ctg).indexOf(category);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} newName\r\n   * @param {string} newColor\r\n   * @param {string} oldName\r\n   * @returns new category object\r\n   * @desc note that 'value' of [key, value] is necessary to segment the object, even if it is not directly referenced\r\n   */\r\n  updateCtg(newName, newColor, oldName) {\r\n    let entries = Object.entries(this.ctg);\r\n    let hasColor = newColor !== null;\r\n    let count = 0;\r\n    let length = entries.length;\r\n\r\n    const isNumeric = (n) => !isNaN(parseFloat(n)) && isFinite(n);\r\n    if (isNumeric(newName)) {\r\n      newName = \"category \" + newName;\r\n    }\r\n\r\n    for (let [key, value] of entries) {\r\n      count++;\r\n      if (count === 1) {\r\n        // changing the default category;\r\n        if (oldName === key) {\r\n          entries[0][0] = newName;\r\n          if (hasColor) {\r\n            entries[0][1].color = newColor;\r\n          }\r\n        }\r\n      } else {\r\n        if (oldName === key) {\r\n          entries[count - 1][0] = newName;\r\n          if (hasColor) {\r\n            entries[count - 1][1].color = newColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (entries.length !== length) {\r\n      console.error(\"something went wrong with category name/color change\");\r\n      return;\r\n    } else {\r\n      this.ctg = Object.fromEntries(entries);\r\n      this.moveCategoryEntriesToNewCategory(oldName, newName, true);\r\n      Store.setCtg(this.ctg);\r\n    }\r\n  }\r\n  /* ********************* */\r\n\r\n  /* ***************************** */\r\n  /*  KEYBOARD SHORTCUT MANAGEMENT */\r\n  getShortcuts() {\r\n    return this.keyboardShortcuts;\r\n  }\r\n\r\n  setShortCut(shortcut) {\r\n    const keys = Object.keys(this.getShortcuts());\r\n    let idx = keys.indexOf(shortcut);\r\n    if (idx > -1) {\r\n      return `Shortcut (${shortcut}) is already in use`;\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  setShortcutsStatus(status) {\r\n    this.keyboardShortcutsStatus = status;\r\n    Store.setShortcutsStatus(status);\r\n  }\r\n\r\n  getShortcutsStatus() {\r\n    const status = Store.getShortcutsStatus();\r\n    return status !== null ? status : true;\r\n  }\r\n  /* ***************************** */\r\n\r\n  /* ***************************** */\r\n  /*  ANIMATION MANAGEMENT */\r\n\r\n  getAnimationStatus() {\r\n    const status = Store.getAnimationStatus();\r\n    return status !== null ? status : true;\r\n  }\r\n\r\n  setAnimationStatus(status) {\r\n    this.animationStatus = status;\r\n    Store.setAnimationStatus(status);\r\n  }\r\n  /* ***************************** */\r\n\r\n  /* ******************** */\r\n  /*  OVERLAY MANAGEMENT */\r\n  // see readme @ --overlay management-- for more info\r\n  addActiveOverlay(overlay) {\r\n    this.activeOverlay.add(overlay);\r\n  }\r\n\r\n  removeActiveOverlay(overlay) {\r\n    const len = this.activeOverlay.size;\r\n    if (len === 0) {\r\n      return;\r\n    } else if (this.activeOverlay.size === 1) {\r\n      this.activeOverlay = new Set();\r\n      return;\r\n    } else {\r\n      this.activeOverlay = new Set(\r\n        [...this.activeOverlay].filter((o) => o !== overlay)\r\n      );\r\n      return;\r\n    }\r\n  }\r\n\r\n  getActiveOverlay() {\r\n    return this.activeOverlay;\r\n  }\r\n\r\n  hasActiveOverlay() {\r\n    return this.activeOverlay.size > 0;\r\n  }\r\n  /* ******************** */\r\n\r\n  /* ************************ */\r\n  /*  JSON UPLOAD & DOWNLOAD */\r\n  validateUserUpload(userUpload) {\r\n    const keys = Object.keys(userUpload);\r\n    let message = {};\r\n    if (keys.length > localStoreKeyNames.length) {\r\n      message.err1 = \"invalid number of keys (too many)\";\r\n    }\r\n\r\n    for (let i = 0; i < keys.length; i++) {\r\n      if (!localStoreKeyNames.includes(keys[i])) {\r\n        let errname = \"err\" + Object.keys(message).length;\r\n        message[errname] = \"invalid key: \" + keys[i];\r\n      }\r\n    }\r\n\r\n    if (Object.keys(message).length > 0) {\r\n      return message;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  setUserUpload(userUpload) {\r\n    const validation = this.validateUserUpload(userUpload);\r\n    let validated;\r\n    if (validation === true) {\r\n      localStorage.clear();\r\n      validated = true;\r\n      for (const [key, value] of Object.entries(userUpload)) {\r\n        localStorage.setItem(key, value);\r\n      }\r\n    } else {\r\n      return validation;\r\n    }\r\n    if (validated) {\r\n      const refresh = localStorage.getItem(\"refresh\");\r\n      if (refresh === null) {\r\n        window.location.reload();\r\n        window.localStorage.setItem(\"refresh\", \"1\");\r\n      }\r\n    }\r\n  }\r\n\r\n  getUserUpload() {\r\n    return this.userUpload;\r\n  }\r\n  /* ************************ */\r\n\r\n  /* ******************************************* */\r\n  /*  STATE MANAGEMENT : RENDERING / RESET / RESIZE */\r\n  /**\r\n   * This got a bit more complicated than I anticipated, I'll come back to this later;\r\n   */\r\n  setFormRenderHandle(type, callback) {\r\n    this.handleRenders.calendars[type].render = callback;\r\n  }\r\n\r\n  setFormResetHandle(type, callback) {\r\n    this.handleRenders.calendars[type].reset = callback;\r\n  }\r\n\r\n  setRenderFormCallback(callback) {\r\n    this.handleRenders.form.callback = callback;\r\n  }\r\n\r\n  setRenderSidebarCallback(callback) {\r\n    this.handleRenders.sidebar.callback = callback;\r\n  }\r\n\r\n  setResizeHandle(type, callback) {\r\n    this.handleRenders.calendars[type].resize = callback;\r\n  }\r\n\r\n  setDataReconfigCallback(callback) {\r\n    this.handleRenders.reconfig.callback = callback;\r\n  }\r\n\r\n  setResetDatepickerCallback(callback) {\r\n    this.handleRenders.datepicker.reset = callback;\r\n  }\r\n\r\n  setResetPreviousViewCallback(callback) {\r\n    this.handleRenders.calendars[\"previous\"].reset = callback;\r\n  }\r\n\r\n  setRenderCategoriesCallback(callback) {\r\n    this.handleRenders.categories.callback = callback;\r\n  }\r\n\r\n  getRenderCategoriesCallback() {\r\n    return this.handleRenders.categories.callback;\r\n  }\r\n\r\n  getResetPreviousViewCallback() {\r\n    return this.handleRenders.calendars[\"previous\"].reset;\r\n  }\r\n\r\n  getResetDatepickerCallback() {\r\n    return this.handleRenders.datepicker.reset;\r\n  }\r\n\r\n  getDataReconfigCallback() {\r\n    return this.handleRenders.reconfig.callback;\r\n  }\r\n\r\n  getResizeHandle(type) {\r\n    if (this.handleRenders.calendars[type] === undefined) {\r\n      return null;\r\n    } else {\r\n      return this.handleRenders.calendars[type].resize;\r\n    }\r\n  }\r\n\r\n  getFormRenderHandle(type) {\r\n    if (this.handleRenders.calendars[type] === undefined) {\r\n      return null;\r\n    } else {\r\n      return this.handleRenders.calendars[type].render;\r\n    }\r\n  }\r\n\r\n  getFormResetHandle(type) {\r\n    if (this.handleRenders.calendars[type].reset === undefined) {\r\n      return null;\r\n    } else {\r\n      return this.handleRenders.calendars[type].reset;\r\n    }\r\n  }\r\n\r\n  getRenderFormCallback() {\r\n    const callback = this.handleRenders.form.callback;\r\n    if (callback !== null) {\r\n      return callback;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  getRenderSidebarCallback() {\r\n    const callback = this.handleRenders.sidebar.callback;\r\n    if (callback !== null) {\r\n      return callback;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  /* ************************************ */\r\n}\r\n\r\n// single\r\nexport default new Store();\r\n","import { generateId } from \"../utilities/helpers\";\r\n\r\n/**\r\n * @class Entry\r\n * @param {String} id - Unique identifier\r\n * @param {String} title\r\n * @param {String} description\r\n * @param {Date} start\r\n * @param {Date} end\r\n * @param {String} category\r\n * @param {Boolean} completed\r\n */\r\nexport default class Entry {\r\n  constructor (category, completed, description, end, start, title) {\r\n    this.category = category;\r\n    this.completed = completed;\r\n    this.description = description;\r\n    this.end = end;\r\n    this.id = generateId();\r\n    this.start = start;\r\n    this.title = title;\r\n  }\r\n}\r\n\r\nclass CoordinateEntry {\r\n  constructor (category, completed, coordinates, description, id, title) {\r\n    this.category = category;\r\n    this.completed = completed || false;\r\n    this.coordinates = coordinates || {};\r\n    this.description = description;\r\n    this.id = id;\r\n    this.title = title;\r\n  }\r\n}\r\n\r\n/**\r\n * @class Week\r\n * \r\n * @param {Array} dayEntries\r\n * @description Array of entries that span a single day.\r\n * \r\n * @param {Array} allDayEntries\r\n * @description Array of entries that span multiple days.\r\n */\r\nclass Week {\r\n  constructor (dayEntries, allDayEntries) {\r\n    this.boxes = dayEntries;\r\n    this.boxesTop = allDayEntries;\r\n  }\r\n\r\n  setAllBoxes(tempEntries) {\r\n    this.boxes = tempEntries.day;\r\n    this.boxesTop = tempEntries.allDay;\r\n  }\r\n\r\n  addBox(box) {\r\n    this.boxes.push(box);\r\n  }\r\n\r\n  addBoxTop(box) {\r\n    this.boxesTop.push(box);\r\n  }\r\n\r\n  getBox(id) {\r\n    return this.boxes.find(box => box.id === id);\r\n  }\r\n\r\n  getBoxes() {\r\n    return this.boxes;\r\n  }\r\n\r\n  getBoxesTop() {\r\n    return this.boxesTop;\r\n  }\r\n\r\n  getLength() {\r\n    return this.boxes.length;\r\n  }\r\n\r\n  getBoxesByColumn(col) {\r\n    return this.boxes.filter(box => +box.coordinates.x == col);\r\n  }\r\n\r\n  getBoxesByColumnTop(col) {\r\n    return this.boxesTop.filter(box => +box.coordinates.x == col);\r\n  }\r\n\r\n  getBoxesTopByDay(day) {\r\n    return this.boxesTop.filter(box => +box.coordinates.y == day);\r\n  }\r\n\r\n  getBoxesTopLengths() {\r\n    return this.getBoxesTop().reduce((a, c) => {\r\n      let start = new Date(c.start);\r\n      if (a[start.getDay()]) {\r\n        a[start.getDay()]++;\r\n      }\r\n      else {\r\n        a[start.getDay()] = 1;\r\n      }\r\n      return a;\r\n    }, {});\r\n  }\r\n\r\n  getColumnsWithMultipleBoxes() {\r\n    let temp = {};\r\n    let columns = [];\r\n    for (const box of this.boxes) {\r\n      if (temp[box.coordinates.x]) {\r\n        temp[box.coordinates.x]++;\r\n        if (temp[box.coordinates.x] === 2) {\r\n          columns.push(box.coordinates.x);\r\n        }\r\n      } else {\r\n        temp[box.coordinates.x] = 1;\r\n      }\r\n    }\r\n    return columns;\r\n  }\r\n\r\n  getEntriesByTitle(title) {\r\n    return this.boxes.filter(box => box.title.toLowerCase().includes(title.toLowerCase()));\r\n  }\r\n\r\n  updateCoordinates(id, coordinates) {\r\n    this.getBox(id).coordinates = coordinates;\r\n  }\r\n\r\n  sortByY(bxs) {\r\n    return bxs.sort((a, b) => +a.coordinates.y - +b.coordinates.y);\r\n  }\r\n\r\n  checkForCollision(col) {\r\n    const bxs = this.getBoxesByColumn(col);\r\n    const arr = [];\r\n    let collisions = new Set();\r\n\r\n    for (const box of bxs) {\r\n      arr.push([box.coordinates.y, box.coordinates.e]);\r\n    }\r\n\r\n    for (let i = 0; i < arr.length; i++) {\r\n      for (let j = i + 1; j < arr.length; j++) {\r\n        if (arr[i][1] > arr[j][0] && arr[i][0] < arr[j][1]) {\r\n          collisions.add(bxs[i]);\r\n          collisions.add(bxs[j]);\r\n        }\r\n      }\r\n    }\r\n    return this.sortByY([...collisions]);\r\n  }\r\n\r\n  updateStore(store, id, weekArray) {\r\n    const boxEntry = this.getBox(id);\r\n    const coords = boxEntry.coordinates;\r\n    let boxstart = +coords.y * 15;\r\n    let boxend = +coords.e * 15;\r\n    let day = weekArray[+coords.x];\r\n\r\n    const startDate = new Date(day);\r\n    const starthours = Math.floor(boxstart / 60);\r\n    const startminutes = boxstart % 60;\r\n    startDate.setHours(starthours);\r\n    startDate.setMinutes(startminutes);\r\n\r\n    const endDate = new Date(day);\r\n    const endhours = Math.floor(boxend / 60);\r\n    const endminutes = boxend % 60;\r\n    endDate.setHours(endhours);\r\n    endDate.setMinutes(endminutes);\r\n\r\n    store.updateEntry(id, {\r\n      start: startDate,\r\n      end: endDate,\r\n    });\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @class Week\r\n * \r\n * @param {Array} dayEntries\r\n * @description Array of entries that span a single day.\r\n * \r\n * @param {Array} allDayEntries\r\n * @description Array of entries that span multiple days.\r\n */\r\nclass Day {\r\n  constructor (dayEntries, allDayEntries) {\r\n    this.boxes = dayEntries;\r\n    this.boxesTop = allDayEntries;\r\n  }\r\n\r\n  setAllBoxes(tempEntries) {\r\n    this.boxes = tempEntries.day;\r\n    this.boxesTop = tempEntries.allDay;\r\n  }\r\n\r\n  addBox(box) {\r\n    this.boxes.push(box);\r\n  }\r\n\r\n  addBoxTop(box) {\r\n    this.boxesTop.push(box);\r\n  }\r\n\r\n  getBox(id) {\r\n    return this.boxes.find(box => box.id === id);\r\n  }\r\n\r\n  getBoxes() {\r\n    return this.boxes;\r\n  }\r\n\r\n  getBoxesTop() {\r\n    return this.boxesTop;\r\n  }\r\n\r\n  getAllBoxes() {\r\n    return [...this.boxes, ...this.boxesTop];\r\n  }\r\n\r\n  getLength() {\r\n    return this.boxes.length;\r\n  }\r\n\r\n  getBoxesTopLengths() {\r\n    return this.getBoxesTop().reduce((a, c) => {\r\n      let start = new Date(c.start);\r\n      if (a[start.getDay()]) {\r\n        a[start.getDay()]++;\r\n      }\r\n      else {\r\n        a[start.getDay()] = 1;\r\n      }\r\n      return a;\r\n    }, {});\r\n  }\r\n\r\n  getEntriesByTitle(title) {\r\n    return this.boxes.filter(box => box.title.toLowerCase().includes(title.toLowerCase()));\r\n  }\r\n\r\n  updateCoordinates(id, coordinates) {\r\n    this.getBox(id).coordinates = coordinates;\r\n  }\r\n\r\n  getEntriesEndingOnDay(day) {\r\n    return this.boxes.filter(box => +box.coordinates.e === day);\r\n  }\r\n\r\n  sortByY(bxs) {\r\n    return bxs.sort((a, b) => {\r\n      let diff = +a.coordinates.y - +b.coordinates.y;\r\n      if (diff === 0) {\r\n        return +a.coordinates.e - +b.coordinates.e;\r\n      } else {\r\n        return diff;\r\n      }\r\n    });\r\n  }\r\n\r\n  checkForCollision() {\r\n    const bxs = this.getBoxes();\r\n    const arr = [];\r\n    let collisions = new Set();\r\n\r\n    for (const box of bxs) {\r\n      arr.push([box.coordinates.y, box.coordinates.e]);\r\n    }\r\n\r\n    for (let i = 0; i < arr.length; i++) {\r\n      for (let j = i + 1; j < arr.length; j++) {\r\n        if (arr[i][1] > arr[j][0] && arr[i][0] < arr[j][1]) {\r\n          collisions.add(bxs[i]);\r\n          collisions.add(bxs[j]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return this.sortByY([...collisions]);\r\n  }\r\n\r\n  updateStore(store, id) {\r\n    const boxEntry = this.getBox(id);\r\n    const coords = boxEntry.coordinates;\r\n    let boxstart = +coords.y * 15;\r\n    let boxend = +coords.e * 15;\r\n\r\n    const startDate = new Date(boxEntry.start);\r\n    const starthours = Math.floor(boxstart / 60);\r\n    const startminutes = boxstart % 60;\r\n    startDate.setHours(starthours);\r\n    startDate.setMinutes(startminutes);\r\n\r\n    const endDate = new Date(boxEntry.start);\r\n    let endhours = Math.floor(boxend / 60);\r\n    let endminutes = boxend % 60;\r\n    if (endhours === 24) {\r\n      endhours = 23;\r\n      endminutes = 59;\r\n    }\r\n    endDate.setHours(endhours);\r\n    endDate.setMinutes(endminutes);\r\n\r\n    store.updateEntry(id, {\r\n      start: startDate,\r\n      end: endDate,\r\n    });\r\n  }\r\n}\r\n\r\nexport {\r\n  CoordinateEntry,\r\n  Week,\r\n  Day,\r\n};","class MonthBoxQuery {\r\n  constructor (flag) {\r\n    this.flag = flag;\r\n    this.tops = [20, 20];\r\n    this.heights = [18, 18];\r\n    // this.tops = [16, 20];\r\n    // this.heights = [14, 18];\r\n  }\r\n\r\n  updateFlag() {\r\n    this.flag = window.innerWidth <= 530 || window.innerHeight <= 470;\r\n  }\r\n\r\n  getFlag() {\r\n    return this.flag;\r\n  }\r\n\r\n  getTop() {\r\n    const [a, b] = this.tops;\r\n    return this.flag ? a : b;\r\n  }\r\n\r\n  getHeight() {\r\n    const [a, b] = this.heights;\r\n    return this.flag ? a : b;\r\n  }\r\n\r\n  getPrevTop(top) {\r\n    const [a, b] = this.tops;\r\n    return top === a ? b : a;\r\n  }\r\n}\r\n\r\nexport default MonthBoxQuery;","export default {\r\n  labels: {\r\n    monthsLong: [\r\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\r\n    ],\r\n    monthsShortLower: [\r\n      'jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'\r\n    ],\r\n    monthsLongLower: [\r\n      'january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'\r\n    ],\r\n    monthsShort: [\r\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\r\n    ],\r\n    weekdaysLong: [\r\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\r\n    ],\r\n    weekdaysShort: [\r\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\r\n    ],\r\n    weekdaysNarrow: [\r\n      'S', 'M', 'T', 'W', 'T', 'F', 'S'\r\n    ],\r\n\r\n  },\r\n\r\n  /*\r\n    - the following are colors for calendar categories\r\n  */\r\n  colors: {\r\n    red: {\r\n      1: '#DF2A79',\r\n      2: '#A51955',\r\n      3: '#73113C',\r\n      4: '#C20000',\r\n      5: '#9D0000',\r\n      6: '#690000',\r\n      7: '#460000',\r\n    },\r\n\r\n    orange: {\r\n      1: '#EE756A',\r\n      2: '#E84334',\r\n      3: '#E77C2B',\r\n      4: '#D56A18',\r\n      5: '#954A11',\r\n      6: '#6B350C',\r\n      7: '#402007',\r\n    },\r\n\r\n    green: {\r\n      1: '#1E9E98',\r\n      2: '#1A8A84',\r\n      3: '#167671',\r\n      4: '#115855',\r\n      5: '#0F4E4B',\r\n      6: '#09312F',\r\n      7: '#072726',\r\n    },\r\n\r\n    blue: {\r\n      1: '#14489A',\r\n      2: '#125ab8',\r\n      3: '#5578D7',\r\n      4: '#2C52BA',\r\n      5: '#234295',\r\n      6: '#1B3375',\r\n      7: '#142555',\r\n    },\r\n\r\n    purple: {\r\n      1: '#42338B',\r\n      2: '#513FAB',\r\n      3: '#614E7A',\r\n      4: '#604793',\r\n      5: '#49356F',\r\n      6: '#342650',\r\n      7: '#271D3C',\r\n    },\r\n\r\n    grey: {\r\n      1: '#858F93',\r\n      2: '#4D5458',\r\n      3: '#272B2C',\r\n      4: '#202B31',\r\n      5: '#2C3C44',\r\n      6: '#384C56',\r\n      7: '#516C7B',\r\n    },\r\n  },\r\n};","export default {\r\n  0: { shortcut: '0', action: \"change app theme\" },\r\n  1: { shortcut: ['1', 'D'], action: 'open day view' },\r\n  2: { shortcut: ['2', 'W'], action: 'open week view' },\r\n  3: { shortcut: ['3', 'M'], action: 'open month view' },\r\n  4: { shortcut: ['4', 'Y'], action: 'open year view' },\r\n  5: { shortcut: ['5', 'L'], action: 'open list view' },\r\n  6: { shortcut: 'v', action: 'toggle view options' },\r\n  7: { shortcut: 't', action: 'set date to today' },\r\n  8: { shortcut: \"g\", action: 'enter date manually' },\r\n  9: { shortcut: \"n\", action: 'next period' },\r\n  10: { shortcut: \"p\", action: 'previous period' },\r\n  11: { shortcut: 's', action: 'toggle sidebar' },\r\n  12: { shortcut: 'f', action: 'open form' },\r\n  13: { shortcut: '+', action: 'open new category form' },\r\n  14: { shortcut: 'a', action: 'open settings' },\r\n  15: { shortcut: ['/', '?'], action: 'open keyboard shortcuts' },\r\n  16: { shortcut: \"e\", action: '(entry options) opens form with entry details' },\r\n  17: {\r\n    shortcut: '', action: [\r\n      '(datepicker) set date to next month/week',\r\n      '(yearpicker) set year to next year'\r\n    ]\r\n  },\r\n  18: {\r\n    shortcut: '', action: [\r\n      '(datepicker) set date to prev month/week',\r\n      '(yearpicker) set year to prev year'\r\n    ]\r\n  },\r\n  19: {\r\n    shortcut: '', action: [\r\n      '(datepicker) set date to prev day',\r\n      '(monthpicker) set month to prev month',\r\n    ]\r\n  },\r\n  20: {\r\n    shortcut: '', action: [\r\n      '(datepicker) set date to next day',\r\n      '(monthpicker) set month to next month',\r\n    ]\r\n  },\r\n  21: { shortcut: 'DELETE', action: '(entry options) delete entry' },\r\n  22: {\r\n    shortcut: 'ENTER', action: [\r\n      '(datepicker) set date to selected date',\r\n      '(form) submit form',\r\n    ]\r\n  },\r\n  23: { shortcut: \"ESCAPE\", action: 'close any active modal/popup/form' },\r\n};","import { formatTime, formatStartEndTimes } from \"./timeutils\";\r\nimport locales from \"../locales/en\";\r\nconst labels = locales.labels;\r\nconst monthNames = labels.monthsShort;\r\n\r\nexport default function createDate(year, month, day) {\r\n  const pad = (num) => { return num < 10 ? `0${num}` : num; };\r\n  Date.prototype.toCustomISO = function () {\r\n    return this.getFullYear() +\r\n      '-' + pad(this.getMonth() + 1) +\r\n      '-' + pad(this.getDate()) +\r\n      'T' + pad(this.getHours()) +\r\n      ':' + pad(this.getMinutes()) +\r\n      ':' + pad(this.getSeconds()) +\r\n      '.' + (this.getMilliseconds() / 1000).toFixed(3).slice(2, 5) +\r\n      'Z';\r\n  };\r\n  if (!year && !month && !day) {\r\n    return new Date().toCustomISO();\r\n  } else {\r\n    return new Date(year, month, day, 0, 0, 0, 0).toCustomISO().slice(0, 10);\r\n  }\r\n}\r\n\r\nfunction testDate(date) {\r\n  return date instanceof Date && !isNaN(date) ? date : new Date(date);\r\n}\r\n\r\nfunction getDateFormatted(date) {\r\n  date = testDate(date);\r\n  return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\r\n}\r\n\r\nfunction getDateForStore(date) {\r\n  date = testDate(date);\r\n  return `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`;\r\n}\r\n\r\nfunction getdatearray(date) {\r\n  return [+date.getFullYear(), +date.getMonth() + 1, +date.getDate()];\r\n\r\n}\r\n\r\nfunction formatDateForDisplay(date) {\r\n  date = testDate(date);\r\n  const month = locales.labels.monthsShort[date.getMonth()];\r\n  const day = date.getDate();\r\n  let hours = date.getHours();\r\n  let minutes = date.getMinutes();\r\n  hours = hours < 10 ? `0${hours}` : hours;\r\n  minutes = minutes < 10 ? `0${minutes}` : minutes;\r\n  let hm = `${hours}:${minutes}`;\r\n  return `${month} ${day} ${date.getFullYear()}, (${hm}) `;\r\n}\r\n\r\nfunction compareDates(date1, date2) {\r\n  [date1, date2] = [testDate(date1), testDate(date2)];\r\n  return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();\r\n}\r\n\r\nfunction formatDuration(seconds) {\r\n  let time = { year: 31536000, day: 86400, hour: 3600 },\r\n    res = [];\r\n  if (seconds === 0) return 'now';\r\n  for (let key in time) {\r\n    if (seconds >= time[key]) {\r\n      let val = Math.floor(seconds / time[key]);\r\n      res.push(val += val > 1 ? ' ' + key + 's' : ' ' + key);\r\n      seconds = seconds % time[key];\r\n    }\r\n  }\r\n  return res.length > 1 ? res.join(', ').replace(/,([^,]*)$/, ' &' + '$1') : res[0];\r\n}\r\n\r\nfunction formatDurationHourMin(seconds) {\r\n  let time = { hour: 3600, minute: 60 },\r\n    res = [];\r\n  if (seconds === 0) return 'now';\r\n  for (let key in time) {\r\n    if (seconds >= time[key]) {\r\n      let val = Math.floor(seconds / time[key]);\r\n      res.push(val += val > 1 ? ' ' + key + 's' : ' ' + key);\r\n      seconds = seconds % time[key];\r\n    }\r\n  }\r\n  return res.length > 1 ? res.join(', ').replace(/,([^,]*)$/, ' &' + '$1') : res[0];\r\n}\r\n\r\nfunction formatStartEndDate(start, end, flag) {\r\n  [start, end] = [testDate(start), testDate(end)];\r\n\r\n  const [startday, startmonth, startyear] = [\r\n    start.getDate(),\r\n    monthNames[start.getMonth()],\r\n    start.getFullYear()\r\n  ];\r\n\r\n  const [endday, endmonth, endyear] = [\r\n    end.getDate(),\r\n    monthNames[end.getMonth()],\r\n    end.getFullYear()\r\n  ];\r\n\r\n  let tempstartyear = startyear;\r\n  let tempendyear = endyear;\r\n  if (flag) {\r\n    tempstartyear = startyear.toString().slice(2, 4);\r\n    tempendyear = endyear.toString().slice(2, 4);\r\n  }\r\n\r\n  if (startyear === endyear) {\r\n    if (startmonth === endmonth) {\r\n      if (startday === endday) {\r\n        // same : day, month, year\r\n        return `${startmonth} ${startday} ${startyear}`;\r\n      } else {\r\n        // same : month, year\r\n        return `${startmonth} ${startday}  ${endday}, ${startyear}`;\r\n      }\r\n    } else {\r\n      // same : year\r\n      return `${startmonth} ${startday}  ${endmonth} ${endday}, ${startyear}`;\r\n    }\r\n  } else {\r\n    // same : nothing\r\n    return `${startmonth} ${startday}, ${tempstartyear}  ${endmonth} ${endday}, ${tempendyear}`;\r\n  }\r\n}\r\n\r\nfunction formatStartEndTime(start, end) {\r\n  [start, end] = [new Date(start), new Date(end)];\r\n  let startmin = start.getMinutes();\r\n  let endmin = end.getMinutes();\r\n  endmin = endmin % 15 === 0 ? endmin : endmin + (15 - (endmin % 15));\r\n  startmin = startmin % 15 === 0 ? startmin : startmin + (15 - (startmin % 15));\r\n  let starttime = formatTime(start.getHours(), startmin);\r\n  let endtime = formatTime(end.getHours(), endmin);\r\n  if (starttime.slice(-2) === endtime.slice(-2)) {\r\n    starttime = starttime.slice(0, -2);\r\n  }\r\n  return `${starttime}  ${endtime}`;\r\n}\r\n\r\nfunction getDuration(start, end) {\r\n  [start, end] = [new Date(start), new Date(end)];\r\n  const duration = formatDuration((Math.floor(end.getTime() / 1000)) - (Math.floor(start.getTime() / 1000)));\r\n  if (duration === undefined) {\r\n    return \"completed\";\r\n  } else {\r\n    return duration;\r\n  }\r\n}\r\n\r\nfunction createDateFromFormattedString(dateString) {\r\n  const dateArray = dateString.split(\"-\");\r\n  return new Date(dateArray[0], dateArray[1] - 1, dateArray[2]);\r\n}\r\n\r\nfunction isBeforeDate(date1, date2) {\r\n  [date1, date2] = [new Date(date1), new Date(date2)];\r\n  return date1.getTime() < date2.getTime();\r\n}\r\n\r\nfunction isDate(value) {\r\n  return value instanceof Date && !isNaN(value);\r\n}\r\n\r\nfunction getDateFromAttribute(target, attribute, view) {\r\n  return target.getAttribute(attribute).split(\"-\").map((x, i) => {\r\n    if (view === \"month\") {\r\n      return i === 1 ? parseInt(x) - 1 : parseInt(x);\r\n    } else {\r\n      return parseInt(x);\r\n    }\r\n  });\r\n}\r\n\r\nfunction getTimeFromAttribute(target, attribute) {\r\n  return target.getAttribute(attribute).split(\":\").map((x) => {\r\n    return parseInt(x);\r\n  });\r\n}\r\n\r\nfunction getDateTimeFormatted(date, hour, minute) {\r\n  date = testDate(date);\r\n  return new Date(\r\n    date.getFullYear(),\r\n    date.getMonth(),\r\n    date.getDate(),\r\n    parseInt(hour),\r\n    parseInt(minute),\r\n    1,\r\n    1,\r\n  );\r\n}\r\n\r\nfunction getTempDates(tempdate, hours, minutes) {\r\n  tempdate = testDate(tempdate);\r\n  return [\r\n    getDateTimeFormatted(tempdate, hours[0], minutes[0]),\r\n    getDateTimeFormatted(tempdate, hours[1], minutes[1]),\r\n  ];\r\n}\r\n\r\nfunction generateTempStartEnd(data) {\r\n  let tempdate = new Date();\r\n\r\n  const [year, month, day] = data;\r\n  let startDate = new Date(year, month, day);\r\n  startDate.setHours(tempdate.getHours());\r\n  startDate.setMinutes(0);\r\n\r\n  let endDate = new Date(startDate);\r\n  endDate.setHours(tempdate.getHours());\r\n  endDate.setMinutes(30);\r\n\r\n  return [startDate, endDate];\r\n}\r\n\r\nfunction getFormDateObject(start, end) {\r\n  [start, end] = [testDate(start), testDate(end)];\r\n\r\n  const setmin = min => min === 0 ? \"00\" : min;\r\n  return {\r\n    dateObj: [start, end],\r\n    minutes: [setmin(start.getMinutes()), setmin(end.getMinutes())],\r\n    formatted: [getDateForStore(start), getDateForStore(end)],\r\n  };\r\n}\r\n\r\nfunction sortDates(dates, dir) {\r\n  return dates.sort((a, b) => {\r\n    let [date1, date2] = [new Date(a), new Date(b)];\r\n    if (dir === \"asc\") {\r\n      return date1 - date2;\r\n    } else {\r\n      return date2 - date1;\r\n    }\r\n  });\r\n}\r\n\r\nfunction getDurationSeconds(date1, date2) {\r\n  return (Math.floor(date2.getTime() / 1000)) - (Math.floor(date1.getTime() / 1000));\r\n}\r\n\r\nfunction formatEntryOptionsDate(date1, date2) {\r\n  let [y1, y2] = [date1.getFullYear(), date2.getFullYear()];\r\n  let [m1, m2] = [date1.getMonth(), date2.getMonth()];\r\n  let [d1, d2] = [date1.getDate(), date2.getDate()];\r\n  let [h1, h2] = [date1.getHours(), date2.getHours()];\r\n  let [min1, min2] = [date1.getMinutes(), date2.getMinutes()];\r\n\r\n  let useTempDate = false;\r\n  let tempdateone = new Date();\r\n  if (isBeforeDate(date1, tempdateone)) {\r\n    useTempDate = true;\r\n  }\r\n  // if same day, month, & year -- return time as start-end\r\n  // otherwise, return time as duration between start & end\r\n  if (y1 === y2) {\r\n    if (m1 === m2) {\r\n      if (d1 === d2) {\r\n        // === year, month, day\r\n        let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\r\n        let durationTime = formatDurationHourMin(duration);\r\n        return {\r\n          date: `${labels.monthsLong[m1]} ${d1}, ${y1} (${formatStartEndTimes([h1, h2], [min1, min2])})`,\r\n          time: durationTime,\r\n        };\r\n      } else {\r\n        // === year, month\r\n        let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\r\n        let durationTime = formatDuration(duration);\r\n        return {\r\n          date: `${labels.monthsLong[m1]} ${d1}  ${d2}, ${y1}`,\r\n          time: durationTime,\r\n        };\r\n      }\r\n    } else {\r\n      // === year\r\n      let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\r\n      let durationTime = formatDuration(duration);\r\n      return {\r\n        date: `${labels.monthsShort[m1]} ${d1}  ${labels.monthsShort[m2]} ${d2}, ${y2}`,\r\n        time: durationTime,\r\n      };\r\n    }\r\n  } else {\r\n    // different year --- return full date\r\n    let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\r\n    let durationTime = formatDuration(duration);\r\n    return {\r\n      date: `${labels.monthsShort[m1]} ${d1}, ${y1}  ${labels.monthsShort[m2]} ${d2}, ${y2}`,\r\n      time: durationTime,\r\n    };\r\n  }\r\n}\r\n\r\nfunction createTimestamp() {\r\n  const date = new Date();\r\n  const year = date.getFullYear().toString().slice(-2);\r\n  const month = monthNames[date.getMonth()].toUpperCase();\r\n  const day = parseInt(date.getDate());\r\n  return `${month}${day}`;\r\n}\r\n\r\nfunction longerThanDay(date1, date2) {\r\n  return getDurationSeconds(date1, date2) > 86400;\r\n}\r\n\r\nfunction getDayOrdinal(day) {\r\n  if (day > 3 && day < 21) return 'th';\r\n  switch (day % 10) {\r\n    case 1: return \"st\";\r\n    case 2: return \"nd\";\r\n    case 3: return \"rd\";\r\n    default: return \"th\";\r\n  }\r\n}\r\n\r\nexport {\r\n  testDate,\r\n  getDateFormatted,\r\n  getDateForStore,\r\n  getdatearray,\r\n  formatDateForDisplay,\r\n  formatDuration,\r\n  compareDates,\r\n  createDateFromFormattedString,\r\n  formatStartEndDate,\r\n  formatStartEndTime,\r\n  getDuration,\r\n  isBeforeDate,\r\n  isDate,\r\n  getDateFromAttribute,\r\n  getTimeFromAttribute,\r\n  getDateTimeFormatted,\r\n  getTempDates,\r\n  generateTempStartEnd,\r\n  getFormDateObject,\r\n  sortDates,\r\n  formatEntryOptionsDate,\r\n  getDurationSeconds,\r\n  createTimestamp,\r\n  longerThanDay,\r\n  getDayOrdinal,\r\n};","import calcTime from \"./timeutils\";\r\n\r\n/**\r\n * For a full explanation see readme @grid-engines\r\n * \r\n * The weekiew & dayview drag/resize systems are 90% similar with the only difference of course being some additional calculations to drag between days in the weekview.\r\n * \r\n * \r\n * All drag / resize events throughout each view follow these steps;\r\n * -- capture :\r\n * document.onmousedown captures the position of cursor & defines variables for start/end points\r\n * \r\n * -- relay :\r\n * document.onmousemove relays the new position to start/end point variables, which in turn relay a new set of styling rules to the element target (entry) \r\n * \r\n * -- render :\r\n * document.onmouseup intitiates all render logic\r\n * \r\n */\r\n\r\nconst identifiers = {\r\n  boxnumarr: {\r\n    week: [\r\n      'box-one', 'box-two', 'box-three',\r\n      'box-four', 'box-five', 'box-six',\r\n      'box-seven', 'box-eight', 'box-nine',\r\n      'box-ten', 'box-eleven', 'box-twelve',\r\n      'box-thirteen', 'box-fourteen', 'box-fifteen',\r\n    ],\r\n    day: [\r\n      'dv-box-one', 'dv-box-two', 'dv-box-three',\r\n      'dv-box-four', 'dv-box-five', 'dv-box-six',\r\n      'dv-box-seven', 'dv-box-eight', 'dv-box-nine',\r\n      'dv-box-ten', 'dv-box-eleven', 'dv-box-twelve',\r\n      'dv-box-thirteen', 'dv-box-fourteen', 'dv-box-fifteen',\r\n    ],\r\n  },\r\n\r\n  boxClasses: {\r\n    week: {\r\n      base: \"box\",\r\n      ontop: \"box-ontop\",\r\n      active: \"box-mv-dragactive\",\r\n      temporary: \"temporary-box\",\r\n      prepend: \"box-\",\r\n    },\r\n    day: {\r\n      base: \"dv-box\",\r\n      ontop: \"dv-box-ontop\",\r\n      active: \"dv-box-mv-dragactive\",\r\n      temporary: \"dv-temporary-box\",\r\n      prepend: \"dv-box-\",\r\n    },\r\n  },\r\n\r\n  boxAttributes: {\r\n    week: {\r\n      updatecoord: [\r\n        \"data-box-id\",\r\n        \"data-start-time\",\r\n        \"data-time-intervals\"\r\n      ],\r\n      dataIdx: \"box-idx\",\r\n      dataId: \"data-box-id\",\r\n      dataCol: \"data-box-col\",\r\n      prepend: \"data-\",\r\n      prepentwo: \"data-wv-\"\r\n    },\r\n    day: {\r\n      updatecoord: [\r\n        \"data-dv-box-id\",\r\n        \"data-dv-start-time\",\r\n        \"data-dv-time-intervals\",\r\n      ],\r\n      dataIdx: \"data-dv-box-index\",\r\n      dataId: \"data-dv-box-id\",\r\n      prepend: \"data-dv-\",\r\n      prepentwo: \"data-dv-\"\r\n    },\r\n  },\r\n\r\n  styles: {\r\n    newBox: {\r\n      left: \"calc((100% - 0px) * 0 + 0px)\",\r\n      height: \"12.5px\",\r\n      width: \"calc((100% - 4px) * 1)\",\r\n    }\r\n  }\r\n};\r\n\r\nfunction calcNewLeft(index) {\r\n  let base = 0.1;\r\n  let add = 0.05;\r\n\r\n  if (index === 0) {\r\n    return 0;\r\n  }\r\n\r\n  if (index >= 1 && index <= 5) {\r\n    return (index * add) + base;\r\n  }\r\n}\r\n\r\n\r\n// *** I'm using a temporary switch statement to try and fine tune the collision handling for now\r\nfunction setBoxWidthWeek(box, prepend, dataidx) {\r\n  const attr = box.getAttribute(dataidx);\r\n  switch (attr) {\r\n    case `${prepend}one`:\r\n      box.style.left = 'calc((100% - 0px) * 0 + 0px)';\r\n      box.style.width = \"calc((100% - 4px) * 1)\";\r\n      break;\r\n    case `${prepend}two`:\r\n      box.style.left = \"calc((100% - 0px) * 0.2 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.80)\";\r\n      break;\r\n    case `${prepend}three`:\r\n      box.style.left = \"calc((100% - 0px) * 0.45 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.55)\";\r\n      break;\r\n    case `${prepend}four`:\r\n      box.style.left = \"calc((100% - 0px) * 0.0 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.44)\";\r\n      break;\r\n    case `${prepend}five`:\r\n      box.style.left = \"calc((100% - 0px) * .5 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.35)\";\r\n      break;\r\n    case `${prepend}six`:\r\n      box.style.left = \"calc((100% - 0px) * 0.1 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.4)\";\r\n      break;\r\n    case `${prepend}seven`:\r\n      box.style.left = \"calc((100% - 0px) * 0.5 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.5)\";\r\n      break;\r\n    case `${prepend}eight`:\r\n      box.style.left = \"calc((100% - 0px) * 0.25 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.25)\";\r\n      break;\r\n    case `${prepend}nine`:\r\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.35)\";\r\n      break;\r\n    case `${prepend}ten`:\r\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\r\n      break;\r\n    case `${prepend}eleven`:\r\n      box.style.left = \"calc((100% - 0px) * 0.70 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\r\n      break;\r\n    case `${prepend}twelve`:\r\n      box.style.left = \"calc((100% - 0px) * 0.85 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\r\n      break;\r\n    case `${prepend}thirteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.05 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\r\n      break;\r\n    case `${prepend}fourteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\r\n      break;\r\n    case `${prepend}fifteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction setBoxWidthDay(box, prepend, dataidx) {\r\n  const attr = box.getAttribute(dataidx);\r\n  switch (attr) {\r\n    case `${prepend}one`:\r\n      box.style.left = 'calc((100% - 0px) * 0 + 0px)';\r\n      box.style.width = \"calc((100% - 4px) * 1)\";\r\n      break;\r\n    case `${prepend}two`:\r\n      box.style.left = \"calc((100% - 0px) * 0.15 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.85)\";\r\n      break;\r\n    case `${prepend}three`:\r\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.70)\";\r\n      break;\r\n    case `${prepend}four`:\r\n      box.style.left = \"calc((100% - 0px) * 0.45 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.55)\";\r\n      break;\r\n    case `${prepend}five`:\r\n      box.style.left = \"calc((100% - 0px) * 0.60 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.40)\";\r\n      break;\r\n    case `${prepend}six`:\r\n      box.style.left = \"calc((100% - 0px) * 0.75 + 0px)\";\r\n      box.style.width = \"calc((100% - 4px) * 0.25)\";\r\n      break;\r\n    case `${prepend}seven`:\r\n      box.style.left = \"calc((100% - 0px) * 0.10 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\r\n      break;\r\n    case `${prepend}eight`:\r\n      box.style.left = \"calc((100% - 0px) * 0.25 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\r\n      break;\r\n    case `${prepend}nine`:\r\n      box.style.left = \"calc((100% - 0px) * 0.4 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\r\n      break;\r\n    case `${prepend}ten`:\r\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\r\n      break;\r\n    case `${prepend}eleven`:\r\n      box.style.left = \"calc((100% - 0px) * 0.70 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\r\n      break;\r\n    case `${prepend}twelve`:\r\n      box.style.left = \"calc((100% - 0px) * 0.85 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\r\n      break;\r\n    case `${prepend}thirteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.05 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\r\n      break;\r\n    case `${prepend}fourteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\r\n      break;\r\n    case `${prepend}fifteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\nfunction handleOverlap(col, view, boxes) {\r\n\r\n  const collisions = view === \"day\" ? boxes.checkForCollision() : boxes.checkForCollision(col);\r\n\r\n  const identifyBox = identifiers.boxnumarr[view];\r\n\r\n  const [baseClass, classPrepend] = [\r\n    identifiers.boxClasses[view],\r\n    identifiers.boxClasses[view].prepend,\r\n  ];\r\n\r\n  const [boxIdxAttr, boxIdAttr] = [\r\n    identifiers.boxAttributes[view].dataIdx,\r\n    identifiers.boxAttributes[view].dataId,\r\n  ];\r\n\r\n  for (let i = 0; i < collisions.length; i++) {\r\n    const box = document.querySelector(`[${boxIdAttr}=\"${collisions[i].id}\"]`);\r\n    let idx = i;\r\n    if (i >= 15) {\r\n      idx -= 12;\r\n    }\r\n    if (i === 0) {\r\n      box.setAttribute(\"class\", `${baseClass.base} ${identifyBox[idx]}`);\r\n      box.setAttribute(boxIdxAttr, identifyBox[idx]);\r\n    } else {\r\n      box.setAttribute(\"class\", `${baseClass.base} ${baseClass.ontop} ${identifyBox[idx]}`);\r\n      box.setAttribute(boxIdxAttr, identifyBox[idx]);\r\n    }\r\n    view === \"day\"\r\n      ? setBoxWidthDay(box, classPrepend, boxIdxAttr)\r\n      : setBoxWidthWeek(box, classPrepend, boxIdxAttr);\r\n  }\r\n}\r\n\r\nfunction setStylingForEvent(clause, wrapper, store) {\r\n  const sidebar = document.querySelector(\".sidebar\");\r\n  const resizeoverlay = document.querySelector(\".resize-overlay\");\r\n\r\n  switch (clause) {\r\n    case \"dragstart\":\r\n      // make sidebar slightly see through if it is open and the user is dragging or resizing (screens smaller than 840px);\r\n      if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n        if (wrapper.offsetLeft === 0) {\r\n          sidebar.classList.add(\"sidebar--dragged-over\");\r\n        }\r\n      }\r\n      store.addActiveOverlay(\"hide-resize-overlay\");\r\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\r\n      break;\r\n    case \"dragend\":\r\n      store.removeActiveOverlay(\"hide-resize-overlay\");\r\n      sidebar.classList.remove(\"sidebar--dragged-over\");\r\n      resizeoverlay.classList.add(\"hide-resize-overlay\");\r\n      document.body.style.cursor = \"default\";\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction updateBoxCoordinates(box, view, boxes) {\r\n  let [id, y, h] = identifiers.boxAttributes[view].updatecoord.map((x) => {\r\n    return box.getAttribute(x);\r\n  });\r\n  let x = view === \"week\" ? box.getAttribute(\"data-box-col\") : 1;\r\n  boxes.updateCoordinates(id, {\r\n    x: parseInt(x),\r\n    y: parseInt(y),\r\n    h: parseInt(h),\r\n    e: parseInt(y) + parseInt(h),\r\n  });\r\n}\r\n\r\nfunction setBoxTimeAttributes(box, view) {\r\n  let start = +box.style.top.split(\"px\")[0];\r\n  start = start >= 0 ? start / 12.5 : 0;\r\n  let length = +box.style.height.split(\"px\")[0] / 12.5;\r\n  let end = start + length;\r\n  let prepend = identifiers.boxAttributes[view].prepend;\r\n  box.setAttribute(`${prepend}start-time`, start);\r\n  box.setAttribute(`${prepend}time-intervals`, length);\r\n  box.setAttribute(`${prepend}end-time`, end);\r\n}\r\n\r\nfunction createBox(col, entry, view, color) {\r\n  const baseClass = identifiers.boxClasses[view].base;\r\n  const attrPrepend = identifiers.boxAttributes[view].prepend;\r\n  const attrPrependTwo = identifiers.boxAttributes[view].prependtwo;\r\n  const coord = entry.coordinates;\r\n\r\n  const box = document.createElement('div');\r\n  box.classList.add(baseClass);\r\n  box.style.backgroundColor = color;\r\n  box.style.top = `${+coord.y * 12.5}px`;\r\n  box.style.height = `${+coord.h * 12.5}px`;\r\n  box.style.left = 'calc((100% - 0px) * 0 + 0px)';\r\n  box.style.width = \"calc((100% - 4px) * 1)\";\r\n\r\n  const boxheader = document.createElement('div');\r\n  boxheader.classList.add(`${baseClass}__header`);\r\n  const entryTitle = document.createElement('div');\r\n  entryTitle.classList.add(`${baseClass}-title`);\r\n  entryTitle.textContent = entry.title;\r\n  boxheader.appendChild(entryTitle);\r\n\r\n  const boxcontent = document.createElement('div');\r\n  boxcontent.classList.add(`${baseClass}__content`);\r\n  const entryTime = document.createElement('span');\r\n  entryTime.classList.add(`${baseClass}-time`);\r\n  boxcontent.appendChild(entryTime);\r\n\r\n  const resizehandleS = document.createElement('div');\r\n  resizehandleS.classList.add(`${baseClass}-resize-s`);\r\n\r\n  if (col.getAttribute(`${attrPrependTwo}top`) === \"true\") {\r\n    box.setAttribute(`${attrPrependTwo}start`, coord.x);\r\n    box.setAttribute(`${attrPrependTwo}end`, coord.x2);\r\n  } else {\r\n    box.setAttribute(`${attrPrepend}start-time`, coord.y);\r\n    box.setAttribute(`${attrPrepend}time-intervals`, coord.h);\r\n    box.setAttribute(`${attrPrepend}end-time`, +coord.y + +coord.h);\r\n    if (view === \"week\") {\r\n      box.setAttribute(\"data-box-col\", coord.x);\r\n      box.setAttribute(\"box-idx\", 1);\r\n    } else {\r\n      box.setAttribute(\"data-dv-box-index\", 1);\r\n    }\r\n    entryTime.textContent = calcTime(coord.y, +coord.h);\r\n  }\r\n\r\n  box.setAttribute(`${attrPrepend}box-id`, entry.id);\r\n  box.setAttribute(`${attrPrepend}box-category`, entry.category);\r\n  box.append(boxheader, boxcontent, resizehandleS);\r\n  col.appendChild(box);\r\n}\r\n\r\nfunction createTemporaryBox(box, col, hasSibling, view) {\r\n  const clone = box.cloneNode(true);\r\n  clone.classList.add(`${identifiers.boxClasses[view].temporary}`);\r\n  if (hasSibling) {\r\n    col.insertBefore(clone, box.nextElementSibling);\r\n  } else {\r\n    col.appendChild(clone);\r\n  }\r\n}\r\n\r\nfunction getBoxDefaultStyle(y, backgroundColor) {\r\n  const style = identifiers.styles.newBox;\r\n  return `top:${y}px; left:${style.left}; height:${style.height}; width:${style.width}; background-color:${backgroundColor};`;\r\n}\r\n\r\nfunction resetStyleOnClick(view, box) {\r\n  box.setAttribute(\"class\", identifiers.boxClasses[view].base);\r\n  box.style.left = 'calc((100% - 0px) * 0 + 0px)';\r\n  box.style.width = \"calc((100% - 4px) * 1)\";\r\n}\r\n\r\nfunction createTempBoxHeader(view) {\r\n  const baseClass = identifiers.boxClasses[view].base;\r\n  const boxheader = document.createElement('div');\r\n  const boxtitle = document.createElement('div');\r\n  boxheader.classList.add(`${baseClass}__header`);\r\n  boxtitle.classList.add(`${baseClass}-title`);\r\n  boxtitle.textContent = \"(no title)\";\r\n  boxheader.appendChild(boxtitle);\r\n  return boxheader;\r\n}\r\n\r\nfunction startEndDefault(y) {\r\n  let tempstarthour = Math.floor((y / 12.5) / 4);\r\n  let tempstartmin = Math.floor((y / 12.5) % 4) * 15;\r\n  return [\r\n    tempstarthour,        // start hour\r\n    tempstartmin,         // start minute\r\n    tempstarthour,        // end hour\r\n    +tempstartmin + 15    // end minute\r\n  ];\r\n}\r\n\r\nfunction calcNewHourFromCoords(h, y) {\r\n  return Math.floor(((h + y) / 12.5) / 4);\r\n}\r\n\r\nfunction calcNewMinuteFromCoords(h, y) {\r\n  return Math.floor(((h + y) / 12.5) % 4) * 15;\r\n}\r\n\r\nfunction calcDateOnClick(date, start, length) {\r\n  let [startDate, endDate] = [new Date(date), new Date(date)];\r\n  startDate.setHours(Math.floor(+start / 4));\r\n  startDate.setMinutes((+start * 15) % 60);\r\n  endDate.setHours(Math.floor((start + length) / 4));\r\n  endDate.setMinutes(((start + length) * 15) % 60);\r\n  return [startDate, endDate];\r\n}\r\n\r\nfunction getOriginalBoxObject(box) {\r\n  return {\r\n    height: box.style.height,\r\n    left: box.style.left,\r\n    width: box.style.width,\r\n    class: box.getAttribute(\"class\"),\r\n  };\r\n}\r\n\r\nfunction resetOriginalBox(box, boxorig) {\r\n  box.setAttribute(\"class\", boxorig.class);\r\n  box.style.left = boxorig.left;\r\n  box.style.width = boxorig.width;\r\n}\r\n\r\nexport default handleOverlap;\r\nexport {\r\n  setStylingForEvent,\r\n  updateBoxCoordinates,\r\n  setBoxTimeAttributes,\r\n  createBox,\r\n  createTemporaryBox,\r\n  getBoxDefaultStyle,\r\n  resetStyleOnClick,\r\n  createTempBoxHeader,\r\n  startEndDefault,\r\n  calcNewHourFromCoords,\r\n  calcNewMinuteFromCoords,\r\n  calcDateOnClick,\r\n  getOriginalBoxObject,\r\n  resetOriginalBox\r\n};","/**\r\n * \r\n * @param {callback} func \r\n * @param {number} limit \r\n * @returns strict debounce \r\n */\r\nfunction debounce(func, limit) {\r\n  let timeoutId;\r\n  return function (...args) {\r\n    clearTimeout(timeoutId);\r\n    timeoutId = setTimeout(() => func.apply(this, args), limit);\r\n  };\r\n}\r\n/**\r\n * \r\n * @param {*} e \r\n * @param {*} element \r\n * \r\n * With the exception of popup modals, all events in the app\r\n * are delegated from their parent element.\r\n */\r\nfunction getClosest(e, element) {\r\n  return e.target.closest(element);\r\n}\r\n\r\nfunction hextorgba(hex, alpha) {\r\n  let r = 0, g = 0, b = 0, a = alpha;\r\n  r = \"0x\" + hex[1] + hex[2];\r\n  g = \"0x\" + hex[3] + hex[4];\r\n  b = \"0x\" + hex[5] + hex[6];\r\n  return \"rgba(\" + +r + \",\" + +g + \",\" + +b + \",\" + a + \")\";\r\n}\r\n\r\nfunction generateId() {\r\n  return Date.now().toString(36) + Math.random().toString(36).substring(2);\r\n}\r\n\r\nconst throttle = (fn, wait) => {\r\n  let inThrottle, lastFn, lastTime;\r\n  return function () {\r\n    const context = this,\r\n      args = arguments;\r\n    if (!inThrottle) {\r\n      fn.apply(context, args);\r\n      lastTime = Date.now();\r\n      inThrottle = true;\r\n    } else {\r\n      clearTimeout(lastFn);\r\n      lastFn = setTimeout(function () {\r\n        if (Date.now() - lastTime >= wait) {\r\n          fn.apply(context, args);\r\n          lastTime = Date.now();\r\n        }\r\n      }, Math.max(wait - (Date.now() - lastTime), 0));\r\n    }\r\n  };\r\n};\r\n\r\nfunction setTheme(context) {\r\n  const appBody = document.querySelector(\".body\");\r\n  const colorSchemeMeta = document.getElementsByName(\"color-scheme\")[0];\r\n  const currentScheme = context.getColorScheme();\r\n  const hasLightMode = appBody.classList.contains(\"light-mode\");\r\n  const hasContrastMode = appBody.classList.contains(\"contrast-mode\");\r\n\r\n  const setColorSchema = () => {\r\n    if (currentScheme === \"light\" && hasLightMode && !hasContrastMode) {\r\n      return;\r\n    } else if (currentScheme === \"dark\" && !hasLightMode && !hasContrastMode) {\r\n      return;\r\n    } else if (currentScheme === \"contrast\" && hasContrastMode && !hasLightMode) {\r\n      return;\r\n    }\r\n\r\n    const darkicon = document.querySelector(\".sbti-one\");\r\n    const lighticon = document.querySelector(\".sbti-two\");\r\n    const contrasticon = document.querySelector(\".sbti-three\");\r\n\r\n    const setlight = () => {\r\n      context.setColorScheme(\"light\");\r\n      colorSchemeMeta.setAttribute(\"content\", \"light\");\r\n\r\n      appBody.classList.remove(\"contrast-mode\");\r\n      appBody.classList.add(\"light-mode\");\r\n\r\n      lighticon.classList.remove(\"sb-theme-icon-hide\");\r\n      darkicon.classList.add(\"sb-theme-icon-hide\");\r\n      contrasticon.classList.add(\"sb-theme-icon-hide\");\r\n    };\r\n\r\n    const setdark = () => {\r\n      context.setColorScheme(\"dark\");\r\n      colorSchemeMeta.setAttribute(\"content\", \"dark light\");\r\n\r\n      appBody.classList.remove(\"light-mode\");\r\n      appBody.classList.remove(\"contrast-mode\");\r\n\r\n      darkicon.classList.remove(\"sb-theme-icon-hide\");\r\n      contrasticon.classList.add(\"sb-theme-icon-hide\");\r\n      lighticon.classList.add(\"sb-theme-icon-hide\");\r\n    };\r\n\r\n    const setcontrast = () => {\r\n      context.setColorScheme(\"contrast\");\r\n      colorSchemeMeta.setAttribute(\"content\", \"dark\");\r\n\r\n      appBody.classList.remove(\"light-mode\");\r\n      appBody.classList.add(\"contrast-mode\");\r\n\r\n      contrasticon.classList.remove(\"sb-theme-icon-hide\");\r\n      darkicon.classList.add(\"sb-theme-icon-hide\");\r\n      lighticon.classList.add(\"sb-theme-icon-hide\");\r\n    };\r\n\r\n\r\n    if (currentScheme === \"light\") {\r\n      setlight();\r\n      return;\r\n    }\r\n\r\n    if (currentScheme === \"contrast\") {\r\n      setcontrast();\r\n      return;\r\n    }\r\n\r\n    if (currentScheme === \"dark\") {\r\n      setdark();\r\n      return;\r\n    }\r\n  };\r\n  setColorSchema();\r\n}\r\n\r\n\r\n/**\r\n * \r\n * @param {number} popupWidth \r\n * @param {number} popupHeight \r\n * @param {array} coords [x: e.clientX, y: e.clientY]\r\n * @param {array} windowCoords [x: window.innerWidth, y: window.innerHeight]\r\n * @param {boolean} center should popup be centered ?\r\n * @param {number} targetWidth if center is true, targetWidth required to center\r\n * @returns [left position, top position];\r\n */\r\nfunction placePopup(popupWidth, popupHeight, coords, windowCoords, center, targetWidth) {\r\n  const [popupW, popupH] = [popupWidth, popupHeight];\r\n  const [x, y] = coords;\r\n  const [winW, winH] = windowCoords;\r\n\r\n  let popupX;\r\n  if (center) {\r\n    popupX = x - (popupW / 2) + (targetWidth / 2);\r\n    if (popupWidth + x + 4 >= winW) {\r\n      popupX = winW - popupW - 4;\r\n    }\r\n  } else {\r\n    popupX = x + popupW > winW ? x - popupW - 6 : x;\r\n  }\r\n\r\n  let popupY = y + popupH > winH ? winH - popupH - 6 : y;\r\n\r\n  if (popupX < 0) popupX = Math.abs(popupX);\r\n  if (popupY < 0) popupY = 56;\r\n  return [popupX, popupY];\r\n}\r\n\r\nfunction isNumeric(n) {\r\n  return !isNaN(parseFloat(n)) && isFinite(n);\r\n}\r\n\r\n\r\nexport default debounce;\r\nexport {\r\n  getClosest,\r\n  hextorgba,\r\n  generateId,\r\n  throttle,\r\n  setTheme,\r\n  placePopup,\r\n  isNumeric\r\n}; ","let n = 40;\r\nexport default n;\r\n\r\nconst createStatusIcon = () => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"24\");\r\n  icon.setAttribute(\"width\", \"24\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  icon.classList.add(\"lvhi-status--icon\");\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\r\n  pathone.setAttribute(\"fill\", \"none\");\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z\");\r\n  icon.append(pathone, pathtwo);\r\n  return icon;\r\n};\r\n\r\nconst createCategoryIcon = () => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"24\");\r\n  icon.setAttribute(\"width\", \"24\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\r\n  pathone.setAttribute(\"fill\", \"none\");\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\");\r\n  icon.classList.add(\"lvhi-category--icon\");\r\n  icon.append(pathone, pathtwo);\r\n  return icon;\r\n};\r\n\r\nconst createEditIcon = () => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"20\");\r\n  icon.setAttribute(\"width\", \"20\");\r\n  icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M10 16q-.625 0-1.062-.438Q8.5 15.125 8.5 14.5t.438-1.062Q9.375 13 10 13t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 16 10 16Zm0-4.5q-.625 0-1.062-.438Q8.5 10.625 8.5 10t.438-1.062Q9.375 8.5 10 8.5t1.062.438q.438.437.438 1.062t-.438 1.062q-.437.438-1.062.438ZM10 7q-.625 0-1.062-.438Q8.5 6.125 8.5 5.5t.438-1.062Q9.375 4 10 4t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 7 10 7Z\");\r\n  icon.appendChild(pathone);\r\n  return icon;\r\n};\r\n\r\nconst createPencilIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"20\");\r\n  icon.setAttribute(\"width\", \"20\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill);\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M20.41 4.94l-1.35-1.35c-.78-.78-2.05-.78-2.83 0L3 16.82V21h4.18L20.41 7.77c.79-.78.79-2.05 0-2.83zm-14 14.12L5 19v-1.36l9.82-9.82 1.41 1.41-9.82 9.83z\");\r\n  icon.appendChild(pathone);\r\n  return icon;\r\n};\r\n\r\nconst createTrashIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"24\");\r\n  icon.setAttribute(\"width\", \"24\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill);\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M15 4V3H9v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5zm2 15H7V6h10v13z\");\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M9 8h2v9H9zm4 0h2v9h-2z\");\r\n  icon.append(pathone, pathtwo);\r\n  return icon;\r\n};\r\n\r\nconst createCloseIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"20\");\r\n  icon.setAttribute(\"width\", \"20\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill);\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M6.062 15 5 13.938 8.938 10 5 6.062 6.062 5 10 8.938 13.938 5 15 6.062 11.062 10 15 13.938 13.938 15 10 11.062Z\");\r\n  icon.appendChild(pathone);\r\n  return icon;\r\n};\r\n\r\nconst createCaretDownIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"18\");\r\n  icon.setAttribute(\"width\", \"18\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill);\r\n  }\r\n\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\r\n  pathone.setAttribute(\"fill\", \"none\");\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M7 10l5 5 5-5z\");\r\n  icon.append(pathone, pathtwo);\r\n  return icon;\r\n};\r\n\r\nconst createCaretUpIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"18\");\r\n  icon.setAttribute(\"width\", \"18\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill);\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0V0z\");\r\n  pathone.setAttribute(\"fill\", \"none\");\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M7 14l5-5 5 5H7z\");\r\n  icon.append(pathone, pathtwo);\r\n  return icon;\r\n};\r\n\r\nconst createCaretRightIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"20\");\r\n  icon.setAttribute(\"width\", \"20\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill);\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"m6 18.167-1.583-1.584L11 10 4.417 3.417 6 1.833 14.167 10Z\");\r\n  icon.appendChild(pathone);\r\n  return icon;\r\n};\r\n\r\nconst createCheckIcon = (fill) => {\r\n  // <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"18px\" viewBox=\"0 0 24 24\" width=\"18px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"/></svg>\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"18px\");\r\n  icon.setAttribute(\"width\", \"18px\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white2)\");\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill);\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\r\n  pathone.setAttribute(\"fill\", \"none\");\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\");\r\n  icon.append(pathone, pathtwo);\r\n  return icon;\r\n};\r\n\r\nconst createCheckBoxIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"24\");\r\n  icon.setAttribute(\"width\", \"24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white2)\");\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill);\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"m10.6 16.2 7.05-7.05-1.4-1.4-5.65 5.65-2.85-2.85-1.4 1.4ZM5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h14q.825 0 1.413.587Q21 4.175 21 5v14q0 .825-.587 1.413Q19.825 21 19 21Zm0-2h14V5H5v14ZM5 5v14V5Z\");\r\n  icon.appendChild(pathone);\r\n  return icon;\r\n};\r\n\r\nconst createMeatballVertIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"24\");\r\n  icon.setAttribute(\"width\", \"24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white4)\");\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill);\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M6 14q-.825 0-1.412-.588Q4 12.825 4 12t.588-1.413Q5.175 10 6 10t1.412.587Q8 11.175 8 12q0 .825-.588 1.412Q6.825 14 6 14Zm6 0q-.825 0-1.412-.588Q10 12.825 10 12t.588-1.413Q11.175 10 12 10t1.413.587Q14 11.175 14 12q0 .825-.587 1.412Q12.825 14 12 14Zm6 0q-.825 0-1.413-.588Q16 12.825 16 12t.587-1.413Q17.175 10 18 10q.825 0 1.413.587Q20 11.175 20 12q0 .825-.587 1.412Q18.825 14 18 14Z\");\r\n  icon.appendChild(pathone);\r\n  return icon;\r\n};\r\n\r\nconst createExpandDownIcon = (fill) => {\r\n  {/* <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"18px\" viewBox=\"0 0 24 24\" width=\"18px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"/></svg> */ }\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"18px\");\r\n  icon.setAttribute(\"width\", \"18px\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  // icon.setAttribute(\"fill\", \"\")\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill);\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\r\n  pathone.setAttribute(\"fill\", \"none\");\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\");\r\n  icon.append(pathone, pathtwo);\r\n  return icon;\r\n};\r\n\r\nexport {\r\n  createStatusIcon,\r\n  createCategoryIcon,\r\n  createEditIcon,\r\n  createPencilIcon,\r\n  createTrashIcon,\r\n  createCloseIcon,\r\n  createCaretDownIcon,\r\n  createCaretUpIcon,\r\n  createCaretRightIcon,\r\n  createCheckIcon,\r\n  createCheckBoxIcon,\r\n  createMeatballVertIcon,\r\n  createExpandDownIcon\r\n};\r\n","function formatTime(hours, minutes) {\r\n  let md;\r\n  if (minutes === 60) {\r\n    minutes = 0;\r\n    hours += 1;\r\n  }\r\n  if (+hours === 0) {\r\n    hours = 12;\r\n    md = \"am\";\r\n  } else if (hours < 12) {\r\n    md = \"am\";\r\n  } else if (hours === 12) {\r\n    md = \"pm\";\r\n  } else if (hours === 24) {\r\n    md = \"am\";\r\n    hours -= 12;\r\n  } else {\r\n    hours -= 12;\r\n    md = \"pm\";\r\n  }\r\n\r\n  if (+minutes === 0) {\r\n    return `${hours}${md}`;\r\n  } else {\r\n    return `${hours}:${minutes}${md}`;\r\n  }\r\n}\r\n\r\nfunction formatStartEndTimes(hours, minutes) {\r\n  let [startHours, endHours] = hours;\r\n  let [startMinutes, endMinutes] = minutes;\r\n\r\n  let [start, end] = [\r\n    formatTime(startHours, startMinutes),\r\n    formatTime(endHours, endMinutes),\r\n  ];\r\n\r\n  if (start.slice(-2) === end.slice(-2)) {\r\n    start = start.slice(0, -2);\r\n  }\r\n\r\n  return `${start}  ${end}`;\r\n}\r\n\r\nfunction configMinutesForStore(minutes) {\r\n  return minutes === 0 ? \"00\" : minutes;\r\n}\r\n\r\nfunction calcTime(start, length) {\r\n  let startHours = Math.floor(+start / 4);\r\n  let startMinutes = (+start * 15) % 60;\r\n\r\n  let endHours = Math.floor((start + length) / 4);\r\n  let endMinutes = ((start + length) * 15) % 60;\r\n\r\n  let startingtime = formatTime(startHours, startMinutes);\r\n  let endingtime = formatTime(endHours, endMinutes);\r\n\r\n  if (startingtime.slice(-2) == endingtime.slice(-2)) {\r\n    startingtime = startingtime.slice(0, -2);\r\n  }\r\n\r\n  const boxtime = `${startingtime}  ${endingtime}`;\r\n  return boxtime;\r\n}\r\n\r\nfunction compareTimes(time1, time2) {\r\n  let [hours1, minutes1] = time1.split(\":\");\r\n  let [hours2, minutes2] = time2.split(\":\");\r\n  // get time difference in minutes\r\n  let diff = (hours2 - hours1) * 60 + (minutes2 - minutes1);\r\n  let closest;\r\n\r\n  // if diff is negative, return the next closest time difference in 15 minute interval\r\n  if (diff < 0) {\r\n    closest = 15 * Math.ceil(diff / 15);\r\n  } else {\r\n    closest = true;\r\n  }\r\n\r\n  return [diff, closest];\r\n}\r\n\r\n\r\nexport default calcTime;\r\nexport {\r\n  configMinutesForStore,\r\n  formatStartEndTimes,\r\n  formatTime,\r\n  compareTimes\r\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import context, { datepickerContext } from \"./context/appContext\";\r\nimport store from \"./context/store\";\r\nimport setAppDefaults from \"./config/appDefaults\";\r\nimport renderViews from \"./config/renderViews\";\r\n\r\n// import generateRandomEvents from \"./utilities/testing\"\r\n// store.setStoreForTesting(generateRandomEvents(1000));\r\n\r\n/*!*************************************!*\\\r\n// (CSS) \r\n/*!*************************************!*/\r\n\r\n// <html>\r\nimport \"./styles/root.css\";\r\n// </html>\r\n\r\n// <header>\r\nimport \"./styles/header.css\";\r\n// </header>\r\n\r\n// <main>\r\nimport \"./styles/containers.css\";\r\nimport \"./styles/yearview.css\";\r\nimport \"./styles/monthview.css\";\r\nimport \"./styles/weekview.css\";\r\nimport \"./styles/dayview.css\";\r\nimport \"./styles/listview.css\";\r\nimport \"./styles/sidebar.css\";\r\nimport \"./styles/sbdatepicker.css\";\r\n// </main>\r\n\r\n// <aside>\r\nimport \"./styles/aside/datepicker.css\";\r\nimport \"./styles/aside/toast.css\";\r\nimport \"./styles/aside/goto.css\";\r\nimport \"./styles/aside/toggleForm.css\";\r\nimport \"./styles/aside/sidebarSubMenu.css\";\r\nimport \"./styles/aside/changeViewModule.css\";\r\nimport \"./styles/aside/editCategoryForm.css\";\r\nimport \"./styles/aside/form.css\";\r\nimport \"./styles/aside/timepicker.css\";\r\nimport \"./styles/aside/deleteCategoryPopup.css\";\r\nimport \"./styles/aside/entryOptions.css\";\r\nimport \"./styles/aside/info.css\";\r\nimport \"./styles/aside/shortcuts.css\";\r\n// </aside>\r\n\r\n/*!*************************************!*/\r\n// FIX;\r\n// hide sidebar datepicker after sidebar has been closed\r\n// invalid date mobile\r\n// stats sidebar\r\n// drag mobile\r\n// keyframe lag\r\n// cursor issue, don't remember what it was\r\n// * validate .json files\r\nsetAppDefaults(context, store);\r\nrenderViews(context, datepickerContext, store);\r\n// window.addEventListener(\"touchmove\", e => {\r\n//   console.log(\"touchmove\", e.target.getAttribute(\"class\"));\r\n// })\r\n// for testing::\r\n// window.addEventListener(\"mouseup\", () => {\r\n//   for (let i = 0; i < document.all.length; i++) {\r\n//     const element = document.all[i];\r\n//     if (element.onmousedown) {\r\n//       console.log(\"onmousedown\", element.getAttribute(\"class\"));\r\n//     }\r\n//     if (element.onkeydown) {\r\n//       console.log(\"onkeydown\", element.getAttribute(\"class\"));\r\n//     }\r\n//     if (element.onclick) {\r\n//       console.log(\"onclick\", element.getAttribute(\"class\"));\r\n//     }\r\n//   }\r\n// });"],"names":["sidebar","document","querySelector","datepicker","datepickeroverlay","formOverlay","formModalOverlay","entriesFormWrapper","entriesForm","entriesFormBody","titleInput","descriptionInput","startDateInput","endDateInput","startTimeInput","endTimeInput","categoryModal","closeCategoryModalBtn","categoryModalIcon","categoryModalWrapper","selectedCategoryWrapper","selectedCategoryColor","selectedCategoryTitle","formSubmitButton","setEntryForm","context","store","datepickerContext","categories","activeCategories","currentComponent","year","month","day","closetimepicker","timep","timepoverlay","timepcontainer","activeTimeElement","scrollTo","remove","onclick","classList","setEndDateToNextDay","startCurrentDate","getAttribute","split","map","x","parseInt","nextDay","Date","nextDayString","getFullYear","getMonth","getDate","nextDayTitle","setAttribute","textContent","createTimepicker","coords","currentTime","end","endLimit","timepicker","createElement","add","style","top","y","left","timepickerOverlay","timepickerTimesContainer","hours","md","minutes","currenthour","currentmin","currentmd","isSameDay","shouldTestReset","h","m","slice","length","si","count","setnewtime","e","time","target","attr","testhour","testminute","endTestHour","endTestMinute","startCurrentTime","newh","newm","nextHour","getHours","nextHourString","getMinutes","nextHourTitle","setEndDateToNextHour","forEach","hour","houridx","min","timepickerTime","appendChild","body","prepend","getClosest","handleSetDate","type","d","getDateFromAttribute","rect","getBoundingClientRect","datepickerLeft","bott","bottom","datepickerTop","window","innerHeight","addActiveOverlay","setDate","setDateSelected","getDatePicker","getDateFormatViaAttr","dateAttr","getTimeFormatViaAttr","timeAttr","getDateTimeFormatted","setHours","setMinutes","setSeconds","removeErrorMessages","contains","preventDefault","removeAttribute","firstElementChild","focus","removeLastFormEntry","removeLastEntry","clearAllErrors","inputErrElements","querySelectorAll","el","handleFormClose","onmousedown","removeEventListener","delegateFormKeyDown","removeActiveOverlay","reset","value","closeCategoryModal","resetCurrentView","getFormResetHandle","setFormResetHandle","handleSubmissionRender","start","id","entryBefore","getDayEntriesArray","setTimeout","compareEntries","getEntry","handleUndoLastEdit","updateEntry","category","completed","description","title","undoLastFormEdit","handleFormSubmission","startDate","endDate","startTimeAttr","starthour","startminute","endTimeAttr","endhour","endminute","configDatesForStore","validityStatus","status","valid","titlecheck","trim","replace","hasCtg","isDate","isBeforeDate","hasErrors","errors","key","checkFormValidity","JSON","parse","stringify","createEntry","getLastEntryId","errorMessages","blur","components","err","parentElement","svg","fill","handleFormErrors","display","innerText","openCategoryModal","scrollHeight","behavior","height","parent","currentCategory","color","categoryWrapper","width","backgroundColor","categoryDisplayColor","categoryTitle","checkIcon","createCheckIcon","checkIconWrapper","append","createCategoryOptions","handleTimepickerSetup","placePopup","innerWidth","delegateEntryFormEvents","dragHeader","closeicon","startdate","starttime","enddate","endtime","getCategoryModal","getcloseCategoryModalBtn","getCategoryModalOverlay","inputError","customInputError","resetbtn","submitbtn","closeBtn","currleft","currtop","margin","opacity","userSelect","right","pointerEvents","leftBefore","topBefore","clientX","clientY","winH","winW","throttlemove","throttle","leftAfter","topAfter","offsetTop","offsetLeft","offsetWidth","offsetHeight","addEventListener","mouseup","dragFormAnywhere","childElementCount","handleCategorySelection","setFormInitialValues","catsAct","Object","entries","getAllCtg","getActiveCategoriesKeyPair","getComponent","getYear","getDay","categoryColor","setInitialFormCategory","dateSelected","getMonthName","getDateForStore","temphours","getTimeAndMd","constructor","this","monthNames","headerOffset","form","formBody","formTitleDescription","formStartEndCtg","formsubmitbtn","formCategoryWrapper","formCategorySelect","formCategoryWrapperIcon","formCategoryTitle","formCatgoryIcon","setFormStyle","eX","eY","shouldCenter","centerOffset","setFormSubmitType","configFormTitleDescriptionInput","input","idx","setFormDateInput","date","dateFormatted","dateinput","timeinput","lastElementChild","timeformatted","setFormDatepickerDate","configFormDateInputs","dates","i","dateObj","formatted","configFormCategoryInput","categoryData","firstChild","getConfig","data","submission","name","object","monthsArray","monthsArrayLong","gotoOverlay","goto","gotoInput","inputErrMessage","cancelGoto","submitGoto","createGoTo","removeError","handleGoTo","newdate","arr","haserr","includes","dateInt","tempMonth","isNaN","indexOf","toLowerCase","toString","validateDate","getSidebarState","component","closeGoTo","closeGoToOnEscape","formatStart","FormSetup","setSubmission","setCategory","setDates","getSetup","datepickerBody","datepickerTitle","datepickerChangeDate","headerPrevBtn","headerNextBtn","yearpickerTitle","monthpickerMonths","setDatepicker","hasweek","montharray","getMonthArray","testDateSelected","getDateSelected","checkmonth","checkyear","datepickerKeypressThrottle","flag","yearpickerSetYear","renderPrevMonth","renderNextMonth","handleMonthpicker","curr","next","nextElementSibling","newDateSelected","setSelectedToNextDay","prev","previousElementSibling","lastday","getDaysInMonth","last","setSelectedToPrevDay","closeChangeDateModal","setNewDate","openChangeDateModal","closeDatepicker","setDatepickerHeader","createCells","groupedEntries","getMonthEntryDates","currentWeekStart","getWeek","cell","datename","compareDates","isToday","formattedDate","temp","datepickerDate","activeFormDate","inactiveFormDate","inactiveValue","inactiveDate","inactiveDateType","handleFormDate","renderpicker","setNextMonth","setPrevMonth","monthpickerSetMonth","val","init","newmonth","setMonth","increment","newyear","setYear","dir","formOpen","getActiveOverlay","has","delegateDatepickerEvents","datenumber","navnext","navprev","closeChangeDateBtn","ypNext","ypPrev","mpMonth","setResetDatepickerCallback","colors","values","CatFormHelper","catname","catcolor","errMsg","prevColorIdx","originalName","originalColor","setName","setColor","setPrevColor","getName","getColor","prevColor","setErrMsg","msg","getErrMsg","getOriginalName","getOriginalColor","ctgform","ctgformoverlay","ctgformInput","colorPickerTitle","colorPickerOptions","ctgErrMsg","createCategoryForm","selectedCategory","editing","resetParent","formhelper","createColorOption","selected","colorOption","validateNewCategory","categoryName","trimName","isNumeric","origName","errormsg","closeCategoryForm","updateCtg","updateCtgColor","addNewCtg","fullrenderCtg","getRenderCategoriesCallback","closeCategoryFormOnEsc","gc","element","closest","delegateCtgForm","cancelctgBtn","submitctgBtn","current","option","background","handleColorSelection","currentColor","console","log","getright","gettop","placeholder","openCtgForm","entryOptionsOverlay","entryOptionsWrapper","entryOptionsDateHeader","entryOptionsTimeHeader","entryOptionTitle","entryOptionDescription","entryOptionCategoryIcon","entryOptionCategory","getEntryOptionModal","entry","finishSetup","openEditForm","getRenderFormCallback","openForm","closeEntryOptions","openDeleteWarning","deletepopup","deletebtns","deletepopupCancel","deletepopupConfirm","deletepopupText","removeDeletePopup","deleteEntry","proceedDelete","formNegated","handleEntryOptionKD","delegateEntryOptions","editBtn","deleteBtn","istoday","getDateTime","formatEntryOptionsDate","undefined","timeheadertitle","secondsDiff","getTime","daysSince","Math","floor","hourSince","minSince","getCtgColor","setEntryDefaults","setHeader","dateTimeTitle","header","selectElement","btnprev","btnnext","datetimeWrapper","datetimeContent","prevnext","configHeader","borderstyle","componentTitle","borderBottom","paddingRight","setHeaderAttributes","view","toUpperCase","getWeekRange","shortcutsModalOverlay","shortcutsModal","shortcutsModalContent","shortcutsModalClose","notifyShortcutsStatus","handleShortCutsModal","createShortcut","shortcut","shortcutKey","keyone","Array","isArray","or","keytwo","shortcutDescription","descriptionOne","descriptionTwo","handleShortcutsModalClose","closeShortcutsOnKeydown","inp","setStatusIcon","getShortcutsStatus","shortcuts","getShortcuts","action","setShortcutsStatus","handleShortcutsModalOpen","sidebarColTwo","cWrapper","categoriesContainer","categoriesHeader","categoryHeaderCaret","handleSidebarCategories","defaultCtg","getDefaultCtg","updateComponent","renderSidebarDatepickerCtg","renderCategories","ctg","keys","ctgname","active","createCategoryListItem","ctgcolor","row","colone","checkboxWrapper","checkbox","border","label","coltwo","deleteicon","editicon","createCloseIcon","createEditIcon","delegateCategoryEvents","ctgtoggleModal","editctgBtn","deletectgBtn","ctgChck","ctgPlus","toggle","targetcat","targetparent","targetCtg","targetElement","popupBox","popupBoxOverlay","optionEdit","optionTurnOff","optionTurnOn","closeCategoryOptionsMenu","chckbox","handleCloseOnEscapeCtgOptionsMenu","rerender","closeAndRemoveStyle","setAllCategoryStatusExcept","openCategoryOptionsMenu","offsetColor","categoryLength","getCtgLength","noEntries","ord","popupHeader","popupTitle","popupCategoryStats","popupBody","optionsWrapperOne","categoryNames","getAllCtgNames","optionMoveRadio","optionMove","optionMoveTitle","optionMoveSelect","optionsWrapperTwo","optionRemoveRadio","optionRemove","optionRemoveTitle","optionRemoveIcon","createTrashIcon","handleWrapperClick","checked","popupFooter","btncancel","btnproceed","closeDeletePopupOnEscape","closeDeletePopup","deleteCategory","selectedOption","moveCategoryEntriesToNewCategory","removeCategoryAndEntries","createDeleteCategoryPopup","children","cat","setCategoryStatus","setRenderCategoriesCallback","initSidebarCategories","sbdatepicker","sbdatepickerBody","sbdatepickerTitle","sbdatepickerChangeDate","sbyearpickerTitle","sbmonthpickerMonths","setSidebarDatepicker","resetpickerData","renderSelectedDay","sidebarFooter","sbInfoPopup","sbInfoPopupOverlay","selectInfo","closePopupButton","infopopupTitle","infopopupBody","handleSidebarFooter","infoContent","notes","content","privacy","terms","closeInfoPopup","closeInfoPopupOnEscape","setInfoContent","selection","handleSelectInfoChange","openInfoPopup","selectedIndex","onchange","projectNotes","sidebarSubMenuOverlay","sidebarSubMenu","closemenu","appBody","themeRadioBtns","themeRadioOptions","shortcutSwitch","animationsSwitchBtn","notifyDisabledShortcutsIcon","getSidebarSubMenu","closeSubOnEscape","popup","closeSubMenu","getJSONUpload","file","accept","files","reader","FileReader","onload","json","result","setUserUpload","readAsText","click","removeChild","removePopup","handleCalendarJSON","totalEntries","totalCategories","getStoreStats","titleEntries","hasEntries","hasCategories","subtitle","subtitle2","subtitle3","btns","cancelBtn","proceedBtn","createUploadConfirmationPopup","localStorage","filename","createTimestamp","blob","Blob","href","URL","createObjectURL","link","download","getJSONDownload","toggleShortcuts","toggleShortcutsIcon","setAnimationsIcons","parenticonwrapper","icons","on","off","toggleAnimations","fromicon","setAnimationStatus","delegateSubMenuEvents","downloadjsonBtn","uploadjsonBtn","themebtn","kbShortcutMenu","shortcutSwitchNotifyIcon","animationsSwitch","animationsIcon","getCloseSubMenuBtn","targetinput","getColorScheme","setColorScheme","setTheme","handleThemeChange","themeIdx","shortcutStatus","animationStatus","getAnimationStatus","openSubMenu","toast","createToast","message","undoCallback","closetoast","onkeydown","toastMessage","closeIconWrapper","undoToastWrapper","undoToastMessage","getundo","getclose","dvHeaderDayNumber","dvHeaderDayOfWeek","dvHeaderInfo","dvOnTop","dvContainer","dvGrid","dvMainGrid","dvSideGridWrapper","setDayView","boxes","firstY","firstLastDates","bxs","longest","shortest","tempshort","templong","coordinates","h1","h2","m1","m2","tempdate1","tempdate2","formatStartEndTime","gmtOffset","getTimezoneOffset","abs","getGmt","getWeekday","allboxes","getAllBoxes","tempEndCase1","endingToday","startingToday","fulltitle","getDayviewHeaderEntryCount","resetDayview","openDvMore","entr","morepopupoverlay","morepopup","morepopupHeader","morepopupTitle","morepopupClose","morepopupBody","morepopupEntry","morepopupEntryTitle","morepopupCategory","morepopupEntryTime","createMorePopupEntry","closemp","closeMpOnEsc","openStackEntryOnTop","closearg","setup","getFormDateObject","modal","createDvTop","moremessage","dvOnTopGrid","ent","dvOnTopEntry","createStackableEntriesOnTop","handleDayviewClose","createBoxOnDragDay","setStylingForEvent","cursor","tempcategory","getFirstActiveCategoryKeyPair","box","boxheader","createTempBoxHeader","boxcontent","boxtime","boxtimeend","scrolled","scrollTop","startCursorY","pageY","round","getBoxDefaultStyle","startmin","endmin","startEndDefault","movedY","mousemove","movementY","newHeight","calcNewHourFromCoords","calcNewMinuteFromCoords","wordBreak","formatTime","datesData","getTempDates","submitType","openDayviewForm","renderBoxesForGrid","getBoxesTop","getBoxes","createBox","delegateDayView","dvhresizehandle","dvhbox","dvhgrid","dvhboxTop","dvhGrouped","col","boxhasOnTop","boxorig","getOriginalBoxObject","resetStyleOnClick","boxTop","createTemporaryBox","amountScrolled","resetOriginalBox","setBoxTimeAttributes","nextSibling","updateBoxCoordinates","updateStore","resizeBoxNSDay","startTop","boxHeight","toFixed","tempX","tempY","pageX","sX","sY","hasStyles","currentCursorY","newOffsetY","newTop","tempbox","setResetDv","dragEngineDay","dvSideGridCell","createDVSideGridCells","getDayEntries","Day","allDay","setResetPreviousViewCallback","settop","handleScrollToOnInit","listview","listviewBody","setListView","weekDayNames","todayYear","todayMonth","todayDay","getdatearray","createRowGroupHeader","weekname","monthname","rgHeader","rgHeaderDateNumber","rgHeaderDate","createRowGroupCell","datetitle","longerThanDay","tempyear","formatStartEndTimes","rgCell","rgCellColor","rgCellTime","rgCellTitle","resetCellActive","activeCell","delegateListview","headerNum","setComponent","setDayViewLV","hextorgba","rectTop","rectLeft","getRgContextMenu","resetListview","activeEnt","getActiveEntries","sortBy","reduce","acc","datestring","push","earliestDate","formatStartEndDate","tempdate","dow","wn","mn","rgheader","rgContent","sort","a","b","rg","createRowGroups","initListView","resizeoverlay","monthWrapper","setMonthView","boxquery","renderSidebarDatepickerMonth","handleOverlay","setDayViewViaMonth","getHeight","boxtitle","createCell","cellDate","cellCoordinates","dayofmonth","cellContent","daynumberAndMonth","daynumber","createCellHeader","toptotal","filter","groupedBxs","groupedDiv","groupedTitle","createGroupedCell","getTop","resetMonthview","populateCells","monthentries","getMonthEntries","getGroupedMonthEntries","dayEntries","dayHasEntry","getDateFormatted","getCoordinatesFromCell","configureForStorage","newCell","clone","tempEntry","diff","getDurationSeconds","endDay","configClonedBoxForDrop","resetCellOnDrop","transition","dragEngineMonth","startDragTime","now","targetModal","originalCellLength","cellX","cellY","cloneNode","cellRect","cellWidth","parseFloat","cellHeight","wrapperLeft","boxRect","boxWidth","hasFiveWeeks","startcursorx","startcursory","movedX","lastX","lastY","gaveStyles","changeCursor","newX","multX","newY","multY","timeDiff","newCellX","newCellY","newCellContent","boxmoved","handleMonthviewEditFormClose","openFormOnClickMV","groupedCell","configGroupedCellOnDrop","insertBefore","newGroupedCell","createGroupedCellOnDrop","closeMoreModalOnEscape","closeMoreModal","mm","createMoreModal","moreModalEntries","getMoreModalEntries","modalHeight","rectWidth","maxH","modalHeader","modalHeaderTitle","parentDate","createDateFromFormattedString","dowspan","daynspan","modalHeaderClose","modalContent","modalEntry","modalEntryTitle","createMoreModalBox","renderDayViewViaModal","once","tempcell","handleMonthviewFormClose","createEntryOnEmptyTarget","cellWrapper","generateTempStartEnd","tempctg","getActiveCategories","tempdefaultctg","tempcurrentctg","tempBox","configNewBoxInsertion","delegateMonthEvents","monthviewBox","monthviewBoxHeader","groupedBox","groupedBoxItem","closeGroupedBox","openDayView","targetCellIdx","targetCell","cloned","lastChild","moreModal","newLength","dragOutOfModal","delegateNewBox","main","container","weekviewHeaderDayNumber","weekviewGrid","weekviewSideGrid","topCols","cols","setWeekView","weekArray","getWeekArray","getWeekEntries","Week","resetWeekviewBoxes","createBoxesTop","len","taskicons","icon","celltitle","cellexpand","createExpandDownIcon","createAllDayModal","dayofweek","entriesoffset","modalheader","modaltitle","getDayOrdinal","closeAlldayModalBtn","modalcontent","closealldayonEsc","closealldaymodal","handleCloseCallback","cellcontent","cellIcons","cellendDate","cellcategoryTitle","createMeatballVertIcon","createAllDayModalCell","getCloseAdBtn","getMeatballBtn","targetrect","getWeekViewContextMenu","getcol","handleWeekviewFormClose","dragEngineWeek","originalColumn","currentColumn","tempstartY","startCursorX","direction","currentCursorX","leftColX","rightColX","newOffsetX","setResetWv","droppedCol","getBoxesByColumn","createBoxOnDrag","colIdx","openWeekviewForm","delegateGridEvents","getHeaderDayNumber","getBoxResizeHandle","getBox","getWeekCol","getAllDayCol","yr","mo","da","class","resizeBoxNS","colidx","colentries","getBoxesByColumnTop","openAllDayModal","renderDataForGrid","boxt","getBoxesTopLengths","k","renderBoxes","getColumnsWithMultipleBoxes","wvSideGridCell","createWVSideGridCells","hasToday","hasSelected","dayNumbers","ymd","today","getToday","ty","tm","td","num","configureDaysOfWeek","yearviewGrid","setYearView","createMonthCell","prevmonth","daysInPrevMonth","currentMonth","daysInMonth","firstDayOfMonth","cellHeader","cellHeaderRowOne","cellHeaderWeekDayNames","weekday","cellBody","createyvcell","classname","daywrapper","populateMonths","handleDaySelection","tempy","tempm","tempd","delegateYearEvents","resetYearview","getGroupedYearEntries","getYearEntries","renderMonthCells","currentmonth","initYearview","setAppDefaults","colorSchemeMeta","getElementsByName","headerLogo","toggleForm","sbToggleForm","sbToggleSubBtn","dateTimeWrapper","sbDatepicker","sbDatepickerBody","sbCategoriesWrapper","selectOverlay","optionswrapper","options","sbFooter","sbCategories","viewsContainer","yearwrapper","monthwrapper","collapsebtn","renderViews","darkicon","lighticon","contrasticon","currentScheme","fullRender","renderSidebarDatepicker","getPreviousDay","setPrevDay","getNextDay","setNextDay","getPreviousWeek","setPrevWeek","getNextWeek","setNextWeek","getPreviousMonth","getNextMonth","getPreviousYear","setPrevYear","getNextYear","setNextYear","handleTransition","keyframeDirection","callback","removeslide","overflowX","slide","handleForm","handleToggleSubmenu","handleBtnMainMenu","resetdatepicker","getResetDatepickerCallback","marginLeft","handleBtnToday","handleBtnPrev","handleBtnNext","closeOptionsModal","renderOption","initialRender","comp","handleCollapse","activeIndex","setOptionStyle","activeElement","handleSelect","delegateHeaderEvents","btnMainMenu","btnToday","btnPrev","btnNext","dateTime","search","settings","select","toggleSidebarState","newDatepickerLeft","perc","handleDatePickerBtn","getKeyPressThrottled","toggleChangeview","lk","lk2","handleGlobalKeydown","hasActiveOverlay","handleHeaderDelegation","headers","collapse","componentBody","componentBodytoggle","eyeIcons","setRenderFormCallback","setRenderSidebarCallback","setSidebarState","appinit","yearComponent","monthComponent","weekComponent","dayComponent","listComponent","prev1","prev2","setViews","views","resetPrevView","getResetPreviousViewCallback","hideViews","initView","labels","Context","colorScheme","sidebarState","gmt","daySelected","monthSelected","yearSelected","monthArray","week","setDateDefaults","getItem","setLocalYear","setLocalMonth","setLocalDay","setLocalDateSelected","setSchemaDefaults","setLocalColorScheme","setLocalComponent","setLocalSidebarState","setDefaults","static","setItem","state","getAllMethodNames","getOwnPropertyNames","getPrototypeOf","method","getLocalColorScheme","getLocalComponent","getLocalSidebarState","setDay","prevDay","prevWeek","prevMonth","nextWeek","nextMonth","getLocalDateSelected","getLocalDay","getLocalMonth","getLocalYear","d1","d2","monthsShort","getWeekNumber","UTC","setUTCDate","getUTCDate","getUTCDay","yearStart","getUTCFullYear","ceil","monthsLong","getMonthArrayStartDay","getMonthArrayStart","monthArrayStart","getMonthArrayEndDay","getMonthArrayEnd","handleFourWeeks","monthArrayEnd","testDate","DatepickerContext","setLocalPickerYear","setLocalPickerMonth","setLocalPickerDay","setLocalPickerDateSelected","getLocalPickerDateSelected","getLocalPickerDay","getLocalPickerMonth","getLocalPickerYear","Store","userUpload","default","blue","activeOverlay","Set","handleRenders","reconfig","calendars","previous","resize","render","list","keyboardShortcuts","keyboardShortcutsStatus","setStoreForTesting","setStore","activeStore","addEntry","args","find","getEntries","getEntriesByCtg","pop","entry1","entry2","assign","searchBy","searchtype","localeCompare","getFirstAndLastEntry","sorted","generateCoordinates","startMin","total","x2","activeEntries","entryDate","targetDate","montharr","grouped","yearentries","setCtg","getFirstActiveCategory","backup","getAllCtgColors","getCategoryStatus","hasOwnProperty","hasctg","newCategory","newName","getCtgIndex","newColor","oldName","hasColor","n","isFinite","fromEntries","error","setShortCut","overlay","size","o","validateUserUpload","err1","validation","validated","clear","location","reload","getUserUpload","setFormRenderHandle","setResizeHandle","setDataReconfigCallback","getDataReconfigCallback","getResizeHandle","getFormRenderHandle","getRenderSidebarCallback","Entry","generateId","CoordinateEntry","allDayEntries","boxesTop","setAllBoxes","tempEntries","addBox","addBoxTop","getLength","getBoxesTopByDay","c","columns","getEntriesByTitle","updateCoordinates","sortByY","checkForCollision","collisions","j","boxstart","boxend","starthours","startminutes","endhours","endminutes","getEntriesEndingOnDay","boxEntry","tops","heights","updateFlag","getFlag","getPrevTop","monthsShortLower","monthsLongLower","weekdaysLong","weekdaysShort","weekdaysNarrow","red","orange","green","purple","grey","createDate","pad","prototype","toCustomISO","getSeconds","getMilliseconds","formatDateForDisplay","hm","date1","date2","formatDuration","seconds","res","join","startday","startmonth","startyear","endday","endmonth","endyear","tempstartyear","tempendyear","getDuration","duration","dateString","dateArray","attribute","getTimeFromAttribute","minute","setmin","sortDates","y1","y2","min1","min2","useTempDate","tempdateone","durationTime","formatDurationHourMin","identifiers","boxnumarr","boxClasses","base","ontop","temporary","boxAttributes","updatecoord","dataIdx","dataId","dataCol","prepentwo","styles","newBox","setBoxWidthWeek","dataidx","setBoxWidthDay","clause","wrapper","baseClass","attrPrepend","attrPrependTwo","prependtwo","coord","entryTitle","entryTime","resizehandleS","hasSibling","tempstarthour","tempstartmin","calcDateOnClick","identifyBox","classPrepend","boxIdxAttr","boxIdAttr","hex","alpha","r","g","random","substring","fn","wait","inThrottle","lastFn","lastTime","arguments","clearTimeout","apply","max","hasLightMode","hasContrastMode","setColorSchema","popupWidth","popupHeight","windowCoords","center","targetWidth","popupW","popupH","popupX","popupY","func","limit","timeoutId","createStatusIcon","createElementNS","pathone","pathtwo","createCategoryIcon","createPencilIcon","createCaretDownIcon","createCaretUpIcon","createCaretRightIcon","createCheckBoxIcon","startHours","endHours","startMinutes","endMinutes","configMinutesForStore","compareTimes","time1","time2","hours1","minutes1","hours2","minutes2","startingtime","endingtime","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","definition","defineProperty","enumerable","get","obj","prop","call","Symbol","toStringTag"],"sourceRoot":""}