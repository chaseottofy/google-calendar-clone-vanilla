{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://google-calendar-clone-vanilla/./src/components/forms/entryForm.js","webpack://google-calendar-clone-vanilla/./src/components/forms/formUtils.js","webpack://google-calendar-clone-vanilla/./src/components/forms/goto.js","webpack://google-calendar-clone-vanilla/./src/components/forms/setForm.js","webpack://google-calendar-clone-vanilla/./src/components/menus/datepicker.js","webpack://google-calendar-clone-vanilla/./src/components/menus/editCategory.js","webpack://google-calendar-clone-vanilla/./src/components/menus/entryOptions.js","webpack://google-calendar-clone-vanilla/./src/components/menus/header.js","webpack://google-calendar-clone-vanilla/./src/components/menus/shortcutsModal.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarCategories.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarDatepicker.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarFooter.js","webpack://google-calendar-clone-vanilla/./src/components/menus/sidebarSubMenu.js","webpack://google-calendar-clone-vanilla/./src/components/toastPopups/toast.js","webpack://google-calendar-clone-vanilla/./src/components/toastPopups/toastCallbacks.js","webpack://google-calendar-clone-vanilla/./src/components/views/dayview.js","webpack://google-calendar-clone-vanilla/./src/components/views/listview.js","webpack://google-calendar-clone-vanilla/./src/components/views/monthview.js","webpack://google-calendar-clone-vanilla/./src/components/views/weekview.js","webpack://google-calendar-clone-vanilla/./src/components/views/yearview.js","webpack://google-calendar-clone-vanilla/./src/config/appDefaults.js","webpack://google-calendar-clone-vanilla/./src/config/renderViews.js","webpack://google-calendar-clone-vanilla/./src/config/setViews.js","webpack://google-calendar-clone-vanilla/./src/context/appContext.js","webpack://google-calendar-clone-vanilla/./src/context/constants.js","webpack://google-calendar-clone-vanilla/./src/context/store.js","webpack://google-calendar-clone-vanilla/./src/factory/entries.js","webpack://google-calendar-clone-vanilla/./src/factory/queries.js","webpack://google-calendar-clone-vanilla/./src/locales/en.js","webpack://google-calendar-clone-vanilla/./src/locales/kbDefault.js","webpack://google-calendar-clone-vanilla/./src/utilities/dateutils.js","webpack://google-calendar-clone-vanilla/./src/utilities/dragutils.js","webpack://google-calendar-clone-vanilla/./src/utilities/helpers.js","webpack://google-calendar-clone-vanilla/./src/utilities/svgs.js","webpack://google-calendar-clone-vanilla/./src/utilities/timeutils.js","webpack://google-calendar-clone-vanilla/webpack/bootstrap","webpack://google-calendar-clone-vanilla/webpack/runtime/define property getters","webpack://google-calendar-clone-vanilla/webpack/runtime/hasOwnProperty shorthand","webpack://google-calendar-clone-vanilla/webpack/runtime/make namespace object","webpack://google-calendar-clone-vanilla/./src/index.js"],"sourcesContent":["// render methods\r\nimport setViews from \"../../config/setViews\"\r\nimport setDatepicker from \"../menus/datepicker\"\r\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\"\r\nimport locales from \"../../locales/en\"\r\n\r\n// svgs\r\nimport { createCheckIcon, createCloseIcon } from \"../../utilities/svgs\"\r\n\r\n// popups\r\nimport createToast from \"../toastPopups/toast\"\r\nimport toastCallbackSaving from \"../toastPopups/toastCallbacks\"\r\n\r\n// helpers\r\nimport {\r\n  getClosest,\r\n  placePopup,\r\n  throttle\r\n} from \"../../utilities/helpers\"\r\n\r\n// date / time helpers\r\nimport {\r\n  getDateForStore,\r\n  isBeforeDate,\r\n  isDate,\r\n  getDateFromAttribute,\r\n  formatDateForDisplay\r\n} from \"../../utilities/dateutils\"\r\n\r\nimport {\r\n  compareTimes,\r\n} from \"../../utilities/timeutils\"\r\nimport { \r\n  calcNewHourFromCoords, \r\n  getOriginalBoxObject \r\n} from \"../../utilities/dragutils\"\r\n\r\n\r\n// main app sidebar\r\nconst sidebar = document.querySelector(\".sidebar\")\r\n// main app datepicker / overlay\r\nconst datepicker = document.querySelector(\".datepicker\")\r\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\")\r\n\r\n// form wrappers / overlay\r\nconst formOverlay = document.querySelector(\".form-overlay\")\r\nconst formModalOverlay = document.querySelector(\".form-modal-overlay\")\r\nconst entriesFormWrapper = document.querySelector(\".entries__form\")\r\nconst entriesForm = document.querySelector(\".entry-form\")\r\nconst entriesFormBody = document.querySelector(\".entries__form--body\")\r\n\r\n// title / description inputs\r\nconst titleInput = document.querySelector(\".form--body__title-input\")\r\nconst descriptionInput = document.querySelector(\".form--body__description-input\")\r\n\r\n// start date / time\r\n// end date / time\r\nconst startDateInput = document.querySelector(\".form--body-start__date\")\r\nconst endDateInput = document.querySelector(\".form--body-end__date\")\r\n\r\nconst startTimeInput = document.querySelector(\".form--body-start__time\")\r\nconst endTimeInput = document.querySelector(\".form--body-end__time\")\r\n\r\n// category modal\r\nconst categoryModal = document.querySelector(\".form--body__category-modal\")\r\nconst closeCategoryModalBtn = document.querySelector(\".close-options-floating__btn\")\r\nconst categoryModalIcon = document.querySelector(\".form--body__category-icon\")\r\nconst categoryModalWrapper = document.querySelector(\".form--body__category-modal--wrapper\")\r\nconst selectedCategoryWrapper = document.querySelector(\".form--body__category-modal--wrapper-selection\")\r\nconst selectedCategoryColor = document.querySelector(\".form--body__category-modal--wrapper__color\")\r\nconst selectedCategoryTitle = document.querySelector(\".form--body__category-modal--wrapper__title\")\r\n\r\n// reset / save btns\r\nconst formSubmitButton = document.querySelector(\".form--footer__button-save\");\r\n\r\n\r\n/**\r\n * list of methods -- I plan on cleaning the form up\r\n * \r\n * closetimepicker\r\n * setEndDateToNextDay\r\n * setEndDateToNextHour\r\n * createTimepicker\r\n * renderSidebarDatepickerForm\r\n * getDefaultCategory\r\n * setInitialFormCategory\r\n * setFormInitialValues\r\n * getDatePicker\r\n * handleOverlayClose\r\n * handleSetDate\r\n * getDateFormatViaAttr\r\n * getTimeFormatViaAttr\r\n * getDateTimeFormatted\r\n * configDatesForStore\r\n * checkFormValidity\r\n * removeErrorMessages\r\n * handleFormErrors\r\n * removeLastFormEntry\r\n * handleFormClose\r\n * handleSubmissionRender\r\n * handleFormSubmission\r\n * handleCategorySelection\r\n * closeCategoryModal\r\n * createCategoryOptions\r\n * openCategoryModal\r\n * dragFormAnywhere\r\n * delegateCategorySelection\r\n * handleTimepickerSetup\r\n * delegateEntryFormEvents\r\n * delegateFormKeyDown\r\n */\r\n\r\nexport default function setEntryForm(context, store, datepickerContext) {\r\n  let categories;\r\n  let activeCategories;\r\n  let currentComponent;\r\n  let [year, month, day] = [null, null, null]\r\n\r\n  function closetimepicker() {\r\n    const timep = document?.querySelector(\".timepicker\")\r\n    const timepoverlay = document?.querySelector(\".timepicker-overlay\")\r\n    const activeTimeElement = document?.querySelector(\".active-form-time\")\r\n    if (timep) {\r\n      timep.scrollTo(0, 0)\r\n      timep.remove();\r\n      timepoverlay.remove();\r\n    }\r\n    if (activeTimeElement) {\r\n      activeTimeElement.classList.remove(\"active-form-time\")\r\n    }\r\n  }\r\n\r\n  function setEndDateToNextDay() {\r\n    const startCurrentDate = startDateInput.getAttribute(\"data-form-date\").split(\"-\").map(x => parseInt(x))\r\n    let nextDay = new Date(\r\n      startCurrentDate[0],\r\n      startCurrentDate[1],\r\n      startCurrentDate[2] + 1\r\n    )\r\n    let nextDayString = `${nextDay.getFullYear()}-${nextDay.getMonth()}-${nextDay.getDate()}`\r\n    let nextDayTitle = locales.labels.monthsShort[nextDay.getMonth()] + \" \" + nextDay.getDate() + \", \" + nextDay.getFullYear();\r\n\r\n    endDateInput.setAttribute(\"data-form-date\", nextDayString);\r\n    endDateInput.textContent = nextDayTitle;\r\n    endTimeInput.setAttribute(\"data-form-time\", \"00:30\")\r\n    endTimeInput.textContent = \"12:30am\";\r\n  }\r\n\r\n  function setEndDateToNextHour() {\r\n    const startCurrentTime = startTimeInput.getAttribute(\"data-form-time\").split(\":\").map(x => parseInt(x));\r\n\r\n    let [newh, newm] = [\r\n      startCurrentTime[0] < 23 ? startCurrentTime[0] + 1 : 23,\r\n      startCurrentTime[0] < 23 ? startCurrentTime[1] : 45\r\n    ]\r\n\r\n    let nextHour = new Date(0, 0, 0, newh, newm)\r\n    let md = nextHour.getHours() > 12 ? \"pm\" : \"am\"\r\n\r\n    let nextHourString = `${nextHour.getHours()}:${nextHour.getMinutes()}`\r\n    let nextHourTitle = `${+nextHour.getHours() % 12}:${+nextHour.getMinutes() == 0 ? \"00\" : nextHour.getMinutes()}${md}`\r\n\r\n    endTimeInput.setAttribute(\"data-form-time\", nextHourString);\r\n    endTimeInput.textContent = nextHourTitle;\r\n  }\r\n\r\n  function createTimepicker(coords, currentTime, end, endLimit) {\r\n    const timepicker = document.createElement(\"div\")\r\n    timepicker.classList.add(\"timepicker\")\r\n    timepicker.style.top = `${coords.y}px`\r\n    timepicker.style.left = `${coords.x}px`\r\n\r\n\r\n\r\n    const timepickerOverlay = document.createElement(\"div\")\r\n    timepickerOverlay.classList.add(\"timepicker-overlay\")\r\n\r\n    const timepickerTimesContainer = document.createElement(\"div\")\r\n    timepickerTimesContainer.classList.add(\"timepicker-times__container\");\r\n\r\n    let hours = [\r\n      12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,\r\n      12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,\r\n    ];\r\n    let md = [\r\n      'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am',\r\n      'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm',\r\n    ]\r\n    let minutes = [\"00\", \"15\", \"30\", \"45\"];\r\n\r\n    let [currenthour, currentmin] = currentTime.split(\":\").map((x) => {\r\n      return parseInt(x)\r\n    })\r\n\r\n    let currentmd = currenthour > 12 ? \"pm\" : \"am\"\r\n\r\n    let isSameDay = startDateInput.getAttribute(\"data-form-date\") === endDateInput.getAttribute(\"data-form-date\")\r\n    let shouldTestReset = false;\r\n\r\n    if (end && currenthour === 23 && currentmin === 45) {\r\n      shouldTestReset = true;\r\n    }\r\n\r\n    currenthour > 12 ? currenthour -= 12 : currenthour\r\n\r\n\r\n    if (endLimit !== null && isSameDay) {\r\n      let [h, m] = endLimit.split(\":\").map(x => parseInt(x))\r\n      if (shouldTestReset) {\r\n        if (h === 23 && m >= 15) {\r\n          setEndDateToNextDay();\r\n          closetimepicker()\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (h === 23) {\r\n        if (m === 45) {\r\n          setEndDateToNextDay();\r\n        } else {\r\n          hours = [12]\r\n          md = ['pm']\r\n          m = m.slice(-1)\r\n        }\r\n      } else {\r\n        hours = hours.slice(+h + 1, hours.length)\r\n        md = md.slice(+h + 1, md.length)\r\n      }\r\n    }\r\n\r\n    let count = 0\r\n    let si;\r\n    hours.forEach((hour, houridx) => {\r\n      minutes.forEach(min => {\r\n        const timepickerTime = document.createElement(\"div\")\r\n        timepickerTime.classList.add(\"timepicker-time\")\r\n        let attr;\r\n        if (md[houridx] === \"am\") {\r\n          if (+hour === 12) {\r\n            attr = `00:${min}`\r\n\r\n          } else {\r\n            attr = `${hour}:${min}`\r\n          }\r\n        } else if (md[houridx] === \"pm\") {\r\n          if (hour === 12) {\r\n            attr = `12:${min}`\r\n          } else {\r\n            attr = `${hour + 12}:${min}`\r\n          }\r\n        }\r\n\r\n        timepickerTime.setAttribute(\"data-tp-time\", attr)\r\n        timepickerTime.textContent = `${hour}:${min}${md[houridx]}`\r\n        count++\r\n\r\n        if (!end) {\r\n          if (+hour == +currenthour && +min == +currentmin) {\r\n            if (currentmd === \"pm\" && md[houridx] === \"pm\") {\r\n              timepickerTime.classList.add(\"timepicker-time--selected\")\r\n              si = count;\r\n            } else if (currentmd === \"am\" && md[houridx] === \"am\") {\r\n              timepickerTime.classList.add(\"timepicker-time--selected\")\r\n              si = count;\r\n            }\r\n          }\r\n        }\r\n\r\n        timepickerTimesContainer.appendChild(timepickerTime)\r\n      })\r\n    })\r\n\r\n\r\n    function setnewtime(e) {\r\n      const time = e.target.textContent\r\n      let attr = e.target.getAttribute(\"data-tp-time\")\r\n\r\n      if (!end) {\r\n        startTimeInput.textContent = time\r\n        startTimeInput.setAttribute(\"data-form-time\", attr)\r\n\r\n        let [testhour, testminute] = attr.split(\":\").map(x => +x)\r\n        let [endTestHour, endTestMinute] = endTimeInput.getAttribute(\"data-form-time\").split(\":\").map(x => parseInt(x))\r\n\r\n        if (isSameDay) {\r\n          if (testhour === 23 && testminute === 45) {\r\n            setEndDateToNextDay()\r\n          } else {\r\n            if (testhour > endTestHour || (testhour === endTestHour && testminute >= endTestMinute)) {\r\n              setEndDateToNextHour()\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        endTimeInput.textContent = time;\r\n        endTimeInput.setAttribute(\"data-form-time\", attr)\r\n      }\r\n      closetimepicker();\r\n    }\r\n\r\n    const delegateNewTime = (e) => {\r\n      if (getClosest(e, \".timepicker-time\")) {\r\n        setnewtime(e)\r\n        return;\r\n      }\r\n    }\r\n\r\n    timepicker.appendChild(timepickerTimesContainer)\r\n    const [x, y] = coords\r\n    timepicker.setAttribute(\"style\", `top:${y}px; left:${x}px;`)\r\n    document.body.prepend(timepickerOverlay);\r\n    document.body.prepend(timepicker)\r\n    timepickerOverlay.onclick = closetimepicker;\r\n    timepickerTimesContainer.onclick = delegateNewTime;\r\n    if (!end) {\r\n      if (si > 0) {\r\n        timepicker.scrollTo(0, parseInt(si * 40) - 40)\r\n      } else {\r\n        timepicker.scrollTo(0, 0);\r\n      }\r\n    } else {\r\n      timepicker.scrollTo(0, 0);\r\n    }\r\n  }\r\n\r\n  function renderSidebarDatepickerForm() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      // datepickerContext.setDate(year, month, day)\r\n      context.setDateSelected(day)\r\n      setSidebarDatepicker(context, store, datepickerContext)\r\n    }\r\n  }\r\n\r\n  function getDefaultCategory() {\r\n    if (activeCategories.length === 0) {\r\n      return [categories[0][0], categories[0][1].color]\r\n    } else {\r\n      return [activeCategories[0][0], activeCategories[0][1].color]\r\n    }\r\n  }\r\n\r\n  function setInitialFormCategory() {\r\n    let [categoryTitle, categoryColor] = getDefaultCategory();\r\n    categoryModalWrapper.setAttribute(\"data-form-category\", categoryTitle)\r\n\r\n    selectedCategoryWrapper.style.backgroundColor = categoryColor\r\n    selectedCategoryTitle.textContent = categoryTitle\r\n    selectedCategoryColor.style.backgroundColor = categoryColor\r\n    categoryModalIcon.firstElementChild.setAttribute(\"fill\", categoryColor)\r\n  }\r\n\r\n  function setFormInitialValues() {\r\n    // variable setup\r\n    categories = Object.entries(store.getAllCtg())\r\n    activeCategories = store.getActiveCategoriesKeyPair()\r\n    currentComponent = context.getComponent()\r\n    year = context.getYear()\r\n    month = context.getMonth()\r\n    day = context.getDay()\r\n    // ****************************************** //\r\n    // title / description\r\n    descriptionInput.value = \"\";\r\n    titleInput.blur();\r\n    titleInput.value = \"\";\r\n    setTimeout(() => {\r\n      titleInput.focus();\r\n    }, 10)\r\n    // ****************************************** //\r\n    // category setup \r\n    setInitialFormCategory()\r\n\r\n    // ****************************************** // \r\n    // date picker setup\r\n    datepickerContext.setDate(year, month, day)\r\n    context.setDateSelected(day)\r\n    // ****************************************** // \r\n\r\n    // date inputs setup\r\n    const dateSelected = `${context.getMonthName().slice(0, 3)} ${day}, ${year}`\r\n    // DATES : START/END\r\n    startDateInput.textContent = dateSelected\r\n    startDateInput.setAttribute(\"data-form-date\", getDateForStore(context.getDate()))\r\n    endDateInput.textContent = dateSelected\r\n    endDateInput.setAttribute(\"data-form-date\", getDateForStore(context.getDate()))\r\n\r\n    // TIME : START/END \r\n    const temphours = new Date().getHours()\r\n    startTimeInput.setAttribute(\"data-form-time\", `${temphours}:00`)\r\n    endTimeInput.setAttribute(\"data-form-time\", `${temphours}:30`)\r\n    const getTimeAndMd = (hour, min) => {\r\n      return `${+hour === 0 || +hour === 12 ? 12 : hour % 12}:${min}${hour < 12 ? \"am\" : \"pm\"}`;\r\n    }\r\n    startTimeInput.textContent = getTimeAndMd(temphours, \"00\")\r\n    endTimeInput.textContent = getTimeAndMd(temphours, \"30\")\r\n\r\n    // ****************************************** // \r\n    // submit button setup \r\n    formSubmitButton.setAttribute(\"data-form-action\", \"create\")\r\n    formSubmitButton.setAttribute(\"data-form-id\", \"\")\r\n    // ****************************************** // \r\n\r\n    // approve form event delegation\r\n    entriesFormWrapper.onmousedown = delegateEntryFormEvents\r\n    formOverlay.onmousedown = handleOverlayClose\r\n    document.addEventListener(\"keydown\", delegateFormKeyDown)\r\n    // ****************************************** // \r\n  }\r\n\r\n  function getDatePicker(year, month, day) {\r\n    datepickeroverlay.classList.remove(\"hide-datepicker-overlay\")\r\n    datepicker.classList.remove(\"hide-datepicker\")\r\n    store.addActiveOverlay(\"hide-datepicker-overlay\")\r\n    datepickerContext.setDate(year, month, day)\r\n    datepickerContext.setDateSelected(day)\r\n    setDatepicker(context, store, datepickerContext, \"form\")\r\n  }\r\n\r\n  function handleOverlayClose(e) {\r\n    if (e.target.classList.contains(\"form-overlay\")) {\r\n      handleFormClose(e)\r\n    }\r\n  }\r\n\r\n  function handleSetDate(e, type) {\r\n    if (type === \"start\") {\r\n      startDateInput.setAttribute(\"class\", \"form--body-start__date active-form-date\");\r\n      endDateInput.setAttribute(\"class\", \"form--body-end__date inactive-form-date\");\r\n    } else {\r\n      startDateInput.setAttribute(\"class\", \"form--body-start__date inactive-form-date\");\r\n      endDateInput.setAttribute(\"class\", \"form--body-end__date active-form-date\");\r\n    }\r\n\r\n    const [y, m, d] = getDateFromAttribute(e.target, \"data-form-date\");\r\n    const rect = e.target.getBoundingClientRect();\r\n    const datepickerLeft = parseInt(rect.left);\r\n    const bott = parseInt(rect.bottom);\r\n    let datepickerTop = parseInt(rect.top);\r\n\r\n    if (type === \"end\") {\r\n      datepickerTop -= 40;\r\n    }\r\n\r\n    if (window.innerHeight - 216 <= bott) {\r\n      datepickerTop = window.innerHeight - 242;\r\n    }\r\n\r\n    datepicker.setAttribute(\"style\", `top:${datepickerTop}px;left:${datepickerLeft}px;`)\r\n    getDatePicker(y, m, d)\r\n  }\r\n\r\n  function getDateFormatViaAttr(dateAttr) {\r\n    const [year, month, day] = dateAttr.split(\"-\").map(x => parseInt(x))\r\n    return new Date(year, month, day)\r\n  }\r\n\r\n  function getTimeFormatViaAttr(timeAttr) {\r\n    return timeAttr.split(\":\").map(x => parseInt(x))\r\n  }\r\n\r\n  function getDateTimeFormatted(dateAttr, timeAttr) {\r\n    dateAttr.setHours(timeAttr[0])\r\n    dateAttr.setMinutes(timeAttr[1])\r\n    dateAttr.setSeconds(0)\r\n    return dateAttr\r\n  }\r\n\r\n  function configDatesForStore() {\r\n    let startDateAttr = startDateInput.getAttribute(\"data-form-date\")\r\n    let startDate = getDateFormatViaAttr(startDateAttr)\r\n    let startTimeAttr = startTimeInput.getAttribute(\"data-form-time\")\r\n    let [starthour, startminute] = getTimeFormatViaAttr(startTimeAttr)\r\n\r\n    let endDateAttr = endDateInput.getAttribute(\"data-form-date\")\r\n    let endDate = getDateFormatViaAttr(endDateAttr)\r\n    let endTimeAttr = endTimeInput.getAttribute(\"data-form-time\")\r\n    let [endhour, endminute] = getTimeFormatViaAttr(endTimeAttr)\r\n\r\n    return [\r\n      getDateTimeFormatted(startDate, [starthour, startminute]),\r\n      getDateTimeFormatted(endDate, [endhour, endminute])\r\n    ]\r\n  }\r\n\r\n  function checkFormValidity(title, description, category, startDate, endDate) {\r\n    // all inputs are valid by default \r\n    // if any input becomes invalid, only the error message for that input will be returned through a error object defined below\r\n    const status = {\r\n      title: true,\r\n      description: true,\r\n      startDate: true,\r\n      endDate: true,\r\n      valid: true,\r\n    }\r\n    /* ************************ */\r\n    /*  TITLE VALIDATION CHECK */\r\n    if (typeof title === \"string\") {\r\n      const titlecheck = title.trim().replace(/[^a-zA-Z0-9\\s_-]+|\\s{2,}/g, ' ');\r\n      if (titlecheck.length > 50) {\r\n        status.title = \"Title must be Less than 50 characters\";\r\n        status.valid = false;\r\n      } else if (titlecheck.length === 0) {\r\n        status.title = \"Title cannot be empty\";\r\n        status.valid = false;\r\n      }\r\n    } else {\r\n      status.title = \"Title cannot be empty\";\r\n    }\r\n    /* ***************************** */\r\n    /*  DESCRIPTION VALIDATION CHECK */\r\n    if (description.length >= 200) {\r\n      status.description = \"Description must be less than 200 characters\";\r\n      status.valid = false;\r\n    }\r\n    /* ************************** */\r\n    /*  CATEGORY VALIDATION CHECK */\r\n    if (!store.hasCtg(category) || !category) {\r\n      categoryModalWrapper.setAttribute(\"data-form-category\", \"default\");\r\n    }\r\n    /* **************************** */\r\n    /*  START DATE VALIDATION CHECK */\r\n    if (!startDate) {\r\n      status.startDate = \"Start date cannot be empty\";\r\n      status.valid = false;\r\n    } else if (!isDate(startDate)) {\r\n      status.startDate = \"Start date is not valid\";\r\n      status.valid = false;\r\n    }\r\n    /* **************************** */\r\n    /*  END DATE VALIDATION CHECK */\r\n    if (!endDate) {\r\n      status.endDate = \"End date cannot be empty\";\r\n      status.valid = false;\r\n    } else if (!isDate(endDate)) {\r\n      status.endDate = \"End date is not valid\";\r\n      status.valid = false;\r\n    } else if (!isBeforeDate(startDate, endDate)) {\r\n      status.endDate = \"End date must be after start date\";\r\n      status.valid = false;\r\n    }\r\n    /* ************* */\r\n    /*  congregate any errors  */\r\n    let errors = {};\r\n    let hasErrors;\r\n    for (let key in status) {\r\n      if (status[key] !== true) {\r\n        errors[key] = status[key];\r\n        hasErrors = true;\r\n      }\r\n    }\r\n\r\n\r\n    if (hasErrors) {\r\n      return errors;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  function removeErrorMessages(e) {\r\n    if (e.target.classList.contains(\"form-input-error\")) {\r\n      e.preventDefault()\r\n      e.target.classList.remove(\"form-input-error\")\r\n      e.target.removeAttribute(\"data-form-error-message\")\r\n      e.target.firstElementChild.focus()\r\n    } else if (e.target.classList.contains(\"form-input-error__custom-input\")) {\r\n      e.target.classList.remove(\"form-input-error__custom-input\")\r\n      e.target.removeAttribute(\"data-form-error-message\")\r\n      e.target.focus()\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {object} errorMessages object key represents the input name and the value represents the string error message\r\n   * \r\n   * Use object key to get the input HTML element class name and append the error message as a data attribute to the input element using the err object.\r\n   * \r\n   * Set the submit button to disabled until all errors are resolved\r\n   * \r\n   */\r\n  function handleFormErrors(errorMessages) {\r\n    titleInput.blur()\r\n\r\n    const components = {\r\n      title: titleInput,\r\n      description: descriptionInput,\r\n      startDate: startDateInput,\r\n      endDate: endDateInput,\r\n    }\r\n    const err = {\r\n      inputAttr: \"data-form-error-message\",\r\n      inputClass: \"form-input-error\",\r\n      svgClass: \"form-input-error__custom-input\",\r\n      submitbtn: \"form-error__submit-btn\"\r\n    }\r\n\r\n    for (let key in errorMessages) {\r\n      if (components[key]) {\r\n        if (key === \"title\" || key === \"description\") {\r\n          components[key].parentElement.setAttribute(err.inputAttr, errorMessages[key]);\r\n          components[key].parentElement.classList.add(err.inputClass)\r\n        } else {\r\n          components[key].setAttribute(err.inputAttr, errorMessages[key])\r\n          components[key].classList.add(err.svgClass)\r\n          const svg = components[key].parentElement.parentElement.firstElementChild.firstElementChild\r\n          svg.style.fill = \"var(--red2)\";\r\n          setTimeout(() => { svg.style.fill = \"var(--white3)\" }, 1000)\r\n        }\r\n      }\r\n    }\r\n\r\n    formSubmitButton.classList.add(err.submitbtn)\r\n    setTimeout(() => { formSubmitButton.classList.remove(err.submitbtn) }, 1000)\r\n  }\r\n\r\n  function removeLastFormEntry() {\r\n    store.removeLastEntry()\r\n    setViews(currentComponent, context, store, datepickerContext);\r\n  }\r\n\r\n  function handleFormClose(e) {\r\n    if (!datepicker.classList.contains(\"hide-datepicker\")) {\r\n      datepicker.classList.add(\"hide-datepicker\")\r\n      datepickeroverlay.classList.add(\"hide-datepicker-overlay\")\r\n    }\r\n\r\n    entriesFormWrapper.classList.add(\"hide-form\");\r\n    formOverlay.classList.add(\"hide-form-overlay\");\r\n    store.removeActiveOverlay(\"hide-datepicker-overlay\")\r\n    store.removeActiveOverlay(\"hide-form-overlay\")\r\n    entriesForm.reset();\r\n    descriptionInput.value = \"\";\r\n    titleInput.value = \"\";\r\n    if (categoryModalWrapper.classList.contains(\"category-modal-open\")) {\r\n      closeCategoryModal()\r\n    }\r\n    document.removeEventListener(\"keydown\", delegateFormKeyDown)\r\n\r\n    const resetCurrentView = store.getFormResetHandle(currentComponent)\r\n    if (resetCurrentView !== null) {\r\n      resetCurrentView()\r\n      store.setFormResetHandle(currentComponent, null)\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  function handleSubmissionRender(start) {\r\n    context.setDate(start.getFullYear(), start.getMonth(), start.getDate())\r\n    context.setDateSelected(start.getDate())\r\n\r\n    setViews(currentComponent, context, store, datepickerContext);\r\n\r\n    if (store.getDayEntriesArray(context.getDate()).length <= 1) {\r\n      renderSidebarDatepickerForm()\r\n    }\r\n    handleFormClose()\r\n    createToast(\"Saving\", 1000, null, null, null, removeLastFormEntry)\r\n  }\r\n\r\n  function handleFormSubmission(e) {\r\n    e.preventDefault()\r\n    const title = titleInput.value\r\n    const description = descriptionInput.value;\r\n    const [startDate, endDate] = configDatesForStore()\r\n    const category = categoryModalWrapper.getAttribute(\"data-form-category\")\r\n\r\n    // if errors exist, validityStatus will represent an object with keys that match the input names, and values that represent the error messages as strings;\r\n    // note that two types of submissions are possible: edit and create\r\n    const validityStatus = checkFormValidity(\r\n      title, description, category, startDate, endDate,\r\n    )\r\n\r\n    if (validityStatus !== true) {\r\n      handleFormErrors(validityStatus)\r\n      return;\r\n    } else {\r\n      // submission : edit\r\n      if (formSubmitButton.getAttribute(\"data-form-action\") === \"edit\") {\r\n        store.updateEntry(\r\n          formSubmitButton.getAttribute(\"data-form-entry-id\"),\r\n          {\r\n            category: category,\r\n            completed: false,\r\n            description: description,\r\n            end: endDate,\r\n            id: formSubmitButton.getAttribute(\"data-form-entry-id\"),\r\n            start: startDate,\r\n            title: title,\r\n          }\r\n        )\r\n        handleSubmissionRender(startDate)\r\n        return;\r\n      } else {\r\n        // submission : create\r\n        store.createEntry(\r\n          category, false, description, endDate, startDate, title\r\n        )\r\n        handleSubmissionRender(startDate)\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleCategorySelection(e) {\r\n    const title = e.target.getAttribute(\"data-form-category-title\")\r\n    const color = e.target.getAttribute(\"data-form-category-color\")\r\n    categoryModalWrapper.setAttribute(\"data-form-category\", title)\r\n    categoryModalIcon.firstElementChild.setAttribute(\"fill\", color)\r\n\r\n    selectedCategoryWrapper.style.backgroundColor = color\r\n    selectedCategoryColor.style.backgroundColor = color\r\n    selectedCategoryTitle.textContent = title\r\n    closeCategoryModal()\r\n  }\r\n\r\n  function closeCategoryModal() {\r\n    closeCategoryModalBtn.style.display = \"none\";\r\n    categoryModalWrapper.classList.remove(\"category-modal-open\")\r\n    categoryModal.classList.add(\"hide-form-category-modal\")\r\n    selectedCategoryWrapper.classList.remove(\"hide-form-category-selection\")\r\n    formModalOverlay.classList.add(\"hide-form-overlay\")\r\n    categoryModalWrapper.removeAttribute(\"style\")\r\n  }\r\n\r\n  function createCategoryOptions(parent, categories) {\r\n    const currentCategory = categoryModalWrapper.getAttribute(\"data-form-category\")\r\n\r\n\r\n    categories.forEach(([key, value]) => {\r\n      const color = value.color;\r\n      const categoryWrapper = document.createElement(\"div\")\r\n      categoryWrapper.classList.add(\"category-modal--category\")\r\n      categoryWrapper.style.width = \"200px\"\r\n\r\n      categoryWrapper.style.backgroundColor = color;\r\n      categoryWrapper.setAttribute(\"data-form-category-title\", key);\r\n      categoryWrapper.setAttribute(\"data-form-category-color\", color);\r\n\r\n      const categoryDisplayColor = document.createElement(\"div\")\r\n      categoryDisplayColor.classList.add(\"category-modal--category-color\")\r\n      categoryDisplayColor.style.backgroundColor = color;\r\n\r\n      const categoryTitle = document.createElement(\"div\");\r\n      categoryTitle.classList.add(\"category-modal--category-title\");\r\n      categoryTitle.textContent = key;\r\n\r\n      if (key === currentCategory) {\r\n        const checkIcon = createCheckIcon(\"var(--white4)\");\r\n        const checkIconWrapper = document.createElement(\"div\");\r\n        checkIconWrapper.classList.add(\"category-modal--category-check\");\r\n        checkIconWrapper.appendChild(checkIcon);\r\n\r\n        categoryWrapper.append(\r\n          categoryDisplayColor,\r\n          categoryTitle,\r\n          checkIconWrapper\r\n        );\r\n\r\n      } else {\r\n        categoryWrapper.append(categoryDisplayColor, categoryTitle)\r\n      }\r\n      parent.appendChild(categoryWrapper)\r\n    })\r\n  }\r\n\r\n  function openCategoryModal(e, categories) {\r\n    const length = categories.length;\r\n    if (length === 1) return;\r\n\r\n    closeCategoryModalBtn.removeAttribute(\"style\");\r\n    setTimeout(() => {\r\n      entriesFormBody.scrollTo({\r\n        top: entriesFormBody.scrollHeight,\r\n        behavior: \"smooth\"\r\n      })\r\n    }, 5)\r\n\r\n    if (length >= 5) {\r\n      closeCategoryModalBtn.setAttribute(\"style\", `top: -100px`)\r\n    } else {\r\n      closeCategoryModalBtn.setAttribute(\"style\", `top: ${(length * 20) * -1}px`)\r\n    }\r\n\r\n    categoryModalWrapper.classList.add(\"category-modal-open\")\r\n    if (length < 5) {\r\n      categoryModalWrapper.style.height = `${length * 32}px`;\r\n    } else {\r\n      categoryModalWrapper.style.height = \"160px\";\r\n    }\r\n\r\n    selectedCategoryWrapper.classList.add(\"hide-form-category-selection\");\r\n    categoryModal.classList.remove(\"hide-form-category-modal\");\r\n    categoryModal.innerText = \"\";\r\n    categoryModal.style.height = `${length * 32}px`;\r\n    createCategoryOptions(categoryModal, categories)\r\n\r\n    if (categoryModal.childElementCount > 0) {\r\n      categoryModal.onclick = delegateCategorySelection;\r\n    }\r\n    formModalOverlay.classList.remove(\"hide-form-overlay\");\r\n    formModalOverlay.onclick = closeCategoryModal;\r\n    closeCategoryModalBtn.onclick = closeCategoryModal;\r\n  }\r\n\r\n  function dragFormAnywhere(e) {\r\n    const closeBtn = document.querySelector(\".form--header__icon-close\")\r\n    const rect = entriesFormWrapper.getBoundingClientRect();\r\n    const [currleft, currtop] = [\r\n      parseInt(rect.left),\r\n      parseInt(rect.top),\r\n    ]; \r\n\r\n    entriesFormWrapper.style.margin = \"0\";\r\n    entriesFormWrapper.style.opacity = \"0.8\";\r\n    entriesFormWrapper.style.userSelect = \"none\";\r\n    entriesFormWrapper.style.top = currtop + \"px\";\r\n    entriesFormWrapper.style.left = currleft + \"px\";\r\n    entriesFormWrapper.style.bottom = \"0\";\r\n    entriesFormWrapper.style.right = \"0\";\r\n    closeBtn.style.pointerEvents = \"none\";\r\n    entriesForm.style.pointerEvents = \"none\";\r\n    \r\n    let [leftBefore, topBefore] = [e.clientX, e.clientY];\r\n    const [winH, winW] = [window.innerHeight, window.innerWidth];\r\n\r\n    function mousemove(e) {\r\n      let [leftAfter, topAfter] = [\r\n        leftBefore - e.clientX, topBefore - e.clientY\r\n      ];\r\n\r\n      leftBefore = e.clientX;\r\n      topBefore = e.clientY;\r\n\r\n      if (entriesFormWrapper.offsetTop < 0) {\r\n        entriesFormWrapper.style.top = \"0px\";\r\n      }\r\n\r\n      if (entriesFormWrapper.offsetLeft < 0) {\r\n        entriesFormWrapper.style.left = \"0px\";\r\n      }\r\n\r\n      if ((entriesFormWrapper.offsetLeft + entriesFormWrapper.offsetWidth) > winW) {\r\n        entriesFormWrapper.style.left = winW - entriesFormWrapper.offsetWidth + \"px\";\r\n      }\r\n\r\n      if ((entriesFormWrapper.offsetTop + entriesFormWrapper.offsetHeight) > winH) {\r\n        entriesFormWrapper.style.top = winH - entriesFormWrapper.offsetHeight + \"px\";\r\n      }\r\n\r\n      entriesFormWrapper.style.top = entriesFormWrapper.offsetTop - topAfter + \"px\";\r\n      entriesFormWrapper.style.left = entriesFormWrapper.offsetLeft - leftAfter + \"px\";\r\n    }\r\n    \r\n    const throttlemove = throttle(mousemove, 10);\r\n\r\n    function mouseup() {\r\n      entriesFormWrapper.style.opacity = \"1\";\r\n      entriesFormWrapper.style.userSelect = \"all\";\r\n      closeBtn.removeAttribute(\"style\")\r\n      entriesForm.removeAttribute(\"style\")\r\n      document.removeEventListener(\"mousemove\", throttlemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    }\r\n\r\n    document.addEventListener(\"mousemove\", throttlemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  function delegateCategorySelection(e) {\r\n    if (getClosest(e, \".category-modal--category\")) {\r\n      handleCategorySelection(e);\r\n    }\r\n  }\r\n\r\n  function handleTimepickerSetup(target) {\r\n    const rect = target.getBoundingClientRect()\r\n    let [x, y] = placePopup(\r\n      180,\r\n      200,\r\n      [parseInt(rect.left), parseInt(rect.top)],\r\n      [window.innerWidth, window.innerHeight],\r\n      false,\r\n    )\r\n    return [x, y]\r\n  }\r\n\r\n  function delegateEntryFormEvents(e) {\r\n    // header\r\n    const dragHeader = getClosest(e, \".form-header--dragarea\");\r\n    const closeicon = getClosest(e, \".form--header__icon-close\");\r\n\r\n    // form inputs\r\n    const startdate = getClosest(e, \".form--body-start__date\");\r\n    const starttime = getClosest(e, \".form--body-start__time\");\r\n    const enddate = getClosest(e, \".form--body-end__date\");\r\n    const endtime = getClosest(e, \".form--body-end__time\");\r\n    const category = getClosest(e, \".form--body__category-modal--wrapper-selection\");\r\n\r\n    // error msg : <input> / <textarea>\r\n    const inputError = getClosest(e, \".form-input-error\");\r\n\r\n    // error msg : custom inputs (date / time)\r\n    const customInputError = getClosest(e, \".form-input-error__custom-input\");\r\n\r\n    // form footer buttons\r\n    const clearbtn = getClosest(e, \".form--footer__button-cancel\");\r\n    const submitbtn = getClosest(e, \".form--footer__button-save\");\r\n\r\n    if (dragHeader) {\r\n      if (window.innerWidth < 500 || window.innerHeight < 500) {\r\n        return;\r\n      } else \r\n      dragFormAnywhere(e);\r\n      return;\r\n    }\r\n\r\n    if (closeicon) {\r\n      handleFormClose(e);\r\n      return;\r\n    }\r\n\r\n    if (startdate) {\r\n      handleSetDate(e, \"start\");\r\n      return;\r\n    }\r\n\r\n    if (starttime) {\r\n      e.target.classList.add(\"active-form-time\")\r\n      createTimepicker(\r\n        handleTimepickerSetup(e.target),\r\n        startTimeInput.getAttribute(\"data-form-time\"),\r\n        false,\r\n        null\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (enddate) {\r\n      handleSetDate(e, \"end\");\r\n      return;\r\n    }\r\n\r\n    if (endtime) {\r\n      e.target.classList.add(\"active-form-time\")\r\n      createTimepicker(\r\n        handleTimepickerSetup(e.target),\r\n        endTimeInput.getAttribute(\"data-form-time\"),\r\n        true,\r\n        startTimeInput.getAttribute(\"data-form-time\"),\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (category) {\r\n      openCategoryModal(e, categories);\r\n      return;\r\n    }\r\n\r\n    if (inputError) {\r\n      removeErrorMessages(e);\r\n      return;\r\n    }\r\n\r\n    if (customInputError) {\r\n      removeErrorMessages(e);\r\n      return;\r\n    }\r\n\r\n    if (clearbtn) {\r\n      entriesForm.reset();\r\n      setFormInitialValues();\r\n      closeCategoryModal();\r\n      return;\r\n    }\r\n\r\n    if (submitbtn) {\r\n      handleFormSubmission(e);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function delegateFormKeyDown(e) {\r\n    if (!datepicker.classList.contains(\"hide-datepicker\")) {\r\n      return;\r\n    } else {\r\n      const timep = document?.querySelector(\".timepicker\")\r\n      const catsAct = document?.querySelector(\".hide-form-category-modal\")\r\n\r\n      if (e.key === \"Escape\") {\r\n        if (timep !== null) {\r\n          closetimepicker()\r\n        } else if (catsAct === null) {\r\n          closeCategoryModal()\r\n        } else {\r\n          handleFormClose(e);\r\n        }\r\n      }\r\n\r\n      if (e.key === \"Enter\") {\r\n        handleFormSubmission(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  setFormInitialValues()\r\n}","import locales from \"../../locales/en\"\r\nimport { placePopup } from \"../../utilities/helpers\"\r\nclass FormConfig {\r\n  constructor() {\r\n    this.monthNames = locales.labels.monthsShort;\r\n    this.headerOffset = document.querySelector(\".header\");\r\n    this.form = document.querySelector(\".entries__form\");\r\n    this.formBody = document.querySelector(\".entries__form--body\");\r\n    this.formTitleDescription = document.querySelectorAll(\".form-body-single\");\r\n    this.formStartEndCtg = document.querySelectorAll(\".form-body-double\");\r\n    this.formsubmitbtn = document.querySelector(\".form--footer__button-save\");\r\n    this.formCategoryWrapper = document.querySelector(\".form--body__category-modal--wrapper\");\r\n    this.formCategorySelect = document.querySelector(\".form--body__category-modal--wrapper-selection\");\r\n    this.formCategoryWrapperIcon = document.querySelector(\".form--body__category-modal--wrapper__color\");\r\n    this.formCategoryTitle = document.querySelector(\".form--body__category-modal--wrapper__title\");\r\n    this.formCatgoryIcon = document.querySelector(\".form--body__category-icon\");\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {number} eX element left\r\n   * @param {number} eY element top\r\n   * @param {boolean} shouldCenter (optional) should the form be centered to the element\r\n   * @param {number} centerOffset (optional) offset from the center of the element\r\n   */\r\n  setFormStyle(eX, eY, shouldCenter, centerOffset) {\r\n    if (!shouldCenter) {\r\n      shouldCenter = false;\r\n    }\r\n    if (!centerOffset) {\r\n      centerOffset = null;\r\n    }\r\n    let [x, y] = placePopup(\r\n      this.form.offsetWidth,\r\n      this.form.offsetHeight,\r\n      [eX, eY],\r\n      [window.innerWidth, window.innerHeight],\r\n      shouldCenter,\r\n      centerOffset\r\n    )\r\n    this.form.style.left = `${x}px`;\r\n    this.form.style.top = `${y}px`;\r\n    this.form.style.margin = \"0\";\r\n  }\r\n\r\n  setFormSubmitType(type, id) {\r\n    this.formsubmitbtn.setAttribute(\"data-form-action\", type);\r\n    this.formsubmitbtn.setAttribute(\r\n      \"data-form-entry-id\",\r\n      id === null ? id = \"\" : id\r\n    );\r\n  }\r\n\r\n  configFormTitleDescriptionInput(title, description) {\r\n    this.formTitleDescription.forEach((input, idx) => {\r\n      input.firstElementChild.value = [title, description][idx]\r\n    })\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {HTML} input \r\n   * @param {object} date \r\n   * @param {number} minutes \r\n   * @param {string} dateFormatted \r\n   * @desc\r\n   * Set the date & time for the form input fields\r\n   * Set attributes for date/time inputs\r\n   * Format date/time for display\r\n   */\r\n  setFormDateInput(input, date, minutes, dateFormatted) {\r\n    const [dateinput, timeinput] = [\r\n      input.firstElementChild,\r\n      input.lastElementChild\r\n    ]\r\n\r\n    const timeformatted = `${date.getHours()}:${minutes}`\r\n    timeinput.setAttribute(\r\n      \"data-form-time\",\r\n      timeformatted\r\n    );\r\n\r\n    // darn yankee time\r\n    timeinput.textContent = `${+date.getHours() === 0 || +date.getHours() === 12 ? 12 : date.getHours() % 12}:${minutes}${date.getHours() < 12 ? \"am\" : \"pm\"}`;\r\n\r\n    dateinput.setAttribute(\"data-form-date\", dateFormatted)\r\n    dateinput.textContent = `${this.monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`\r\n  }\r\n\r\n  setFormDatepickerDate(context, datepickerContext, start) {\r\n    start = new Date(start);\r\n    context.setDateSelected(start.getDate());\r\n    datepickerContext.setDate(\r\n      context.getYear(),\r\n      context.getMonth(),\r\n      context.getDay(),\r\n    );\r\n    datepickerContext.setDateSelected(start.getDate());\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {object} dates \r\n   * @desc\r\n   * Iterate through object containing the data below to both the start date/time & end date/time form inputs\r\n   * \r\n   * DateObject: [Date(start), Date(end)]\r\n   * \r\n   * Minutes: [start minutes, end minutes]\r\n   * \r\n   * DateString [start date, end date]\r\n   * \r\n   */\r\n  configFormDateInputs(dates) {\r\n    for (let i = 0; i < 2; i++) {\r\n      this.setFormDateInput(\r\n        this.formStartEndCtg[i].lastElementChild,\r\n        dates.dateObj[i],\r\n        dates.minutes[i],\r\n        dates.formatted[i],\r\n      );\r\n    }\r\n  }\r\n\r\n  configFormCategoryInput(categoryData) {\r\n    const [title, color] = categoryData;\r\n    this.formCategoryWrapper.setAttribute(\"data-form-category\", title)\r\n    this.formCategorySelect.style.backgroundColor = color;\r\n    this.formCategoryWrapperIcon.style.backgroundColor = color;\r\n    this.formCatgoryIcon.firstChild.setAttribute(\"fill\", color)\r\n    this.formCategoryTitle.textContent = title;\r\n  }\r\n\r\n  getConfig(data) {\r\n    this.setFormSubmitType(\r\n      data.submission.type,\r\n      data.submission.id\r\n    );\r\n\r\n    this.configFormCategoryInput([\r\n      data.category.name,\r\n      data.category.color,\r\n    ]);\r\n\r\n    this.configFormDateInputs(\r\n      data.dates.object\r\n    );\r\n\r\n    if (data.submission.type === \"edit\") {\r\n      this.configFormTitleDescriptionInput(\r\n        data.submission.title,\r\n        data.submission.description\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst fullFormConfig = new FormConfig()\r\nexport default fullFormConfig","import locales from \"../../locales/en\"\r\nimport setViews from \"../../config/setViews\"\r\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\r\nconst monthsArray = locales.labels.monthsShortLower;\r\nconst monthsArrayLong = locales.labels.monthsLongLower;\r\nconst gotoOverlay = document.querySelector(\".go-to-date-overlay\");\r\nconst goto = document.querySelector(\".go-to-date\")\r\nconst gotoInput = document.querySelector(\".go-to-input\")\r\nconst inputErrMessage = document.querySelector(\".go-to-err\");\r\nconst cancelGoto = document.querySelector(\".cancel-go-to\")\r\nconst submitGoto = document.querySelector(\".submit-go-to\")\r\nexport default function createGoTo(context, store, datepickerContext) {\r\n  function validateDate(date) {\r\n    let arr;\r\n    let haserr = false;\r\n\r\n    // accepts two formats: DD/MM/YYYY or jan 1 2021\r\n    if (date.includes(\"/\")) {\r\n      arr = date.split(\"/\");\r\n    } else {\r\n      arr = date.split(\" \");\r\n    }\r\n\r\n    if (arr.length !== 3) {\r\n      haserr = true;\r\n    } \r\n\r\n    // convert string year/month/day to int\r\n    // convert 'jan' to 0 || 'january' to 0\r\n    const [month, day, year] = arr.map((date, idx) => {\r\n      let dateInt = parseInt(date);\r\n      let tempMonth = null; // in case of month string\r\n\r\n\r\n      if (isNaN(dateInt)) {\r\n        if (date.length > 3) {\r\n          tempMonth = monthsArrayLong.indexOf(date.toLowerCase());\r\n        } else {\r\n          tempMonth = monthsArray.indexOf(date.toLowerCase());\r\n        }\r\n      }\r\n\r\n      if (idx === 0 && tempMonth === null) {\r\n        dateInt -= 1;\r\n        if (dateInt === -1) {\r\n          dateInt = 0;\r\n        }\r\n      }\r\n\r\n      if (tempMonth === -1) {\r\n        haserr = true;\r\n      }\r\n\r\n      // check if year is valid\r\n      // if user inputs value less than 100, assume they mean 2000s\r\n      // do not allow year greater than 2100 or less than 1901\r\n      if (idx === 2) {\r\n        if (dateInt < 100) {\r\n          dateInt += 2000;\r\n        } else if (dateInt > 2100) {\r\n          haserr = true;\r\n        } else if (dateInt > 100 && dateInt < 1901) {\r\n          haserr = true;\r\n        }\r\n      } \r\n\r\n      return tempMonth === null ? dateInt : tempMonth;\r\n    })\r\n\r\n\r\n    // form date object and check if valid\r\n    const dateObj = new Date(year, month, day);\r\n    if (dateObj.toString() === \"Invalid Date\") {\r\n      haserr = true;\r\n    }\r\n\r\n    return haserr ? false : dateObj;\r\n  }\r\n\r\n  function removeError() {\r\n    inputErrMessage.style.display = \"none\";\r\n    inputErrMessage.onmousedown = null;\r\n  }\r\n\r\n  function handleError() {\r\n    inputErrMessage.style.display = \"block\";\r\n    inputErrMessage.onmousedown = removeError;\r\n  }\r\n\r\n  function handleGoTo() {\r\n    const newdate = validateDate(gotoInput.value);\r\n    if (newdate instanceof Date) {\r\n      context.setDate(\r\n        newdate.getFullYear(),\r\n        newdate.getMonth(),\r\n        newdate.getDate()\r\n      )\r\n\r\n      context.setDateSelected(newdate.getDate())\r\n      if (context.getSidebarState() !== \"hide\") {\r\n        setSidebarDatepicker(context, store, datepickerContext)\r\n      }\r\n      \r\n      let component = context.getComponent();\r\n      if (component === 'list') {\r\n        component = 'day';\r\n      }\r\n      \r\n      closeGoTo();\r\n      setViews(component, context, store, datepickerContext);\r\n    } else {\r\n      handleError();\r\n    }\r\n  }\r\n\r\n  function closeGoToOnEscape(e) {\r\n    const key = e.key.toLowerCase();\r\n    if (key === \"escape\") {\r\n      if (inputErrMessage.style.display === \"block\") {\r\n        removeError();\r\n      } else {\r\n        closeGoTo();\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (key === \"enter\") {\r\n      handleGoTo();\r\n      return;\r\n    }\r\n  }\r\n\r\n  function closeGoTo() {\r\n    document.removeEventListener(\"keydown\", closeGoToOnEscape);\r\n    store.removeActiveOverlay(\"hide-gotodate\");\r\n    gotoOverlay.classList.add(\"hide-gotodate\");\r\n    goto.classList.add(\"hide-gotodate\");\r\n    gotoInput.value = \"\";\r\n  }\r\n\r\n  function formatStart() {\r\n    const [year, month, day] = [\r\n      context.getYear(),\r\n      context.getMonth(),\r\n      context.getDay(),\r\n    ];\r\n    return `${monthsArray[month]} ${day} ${year}`;\r\n  }\r\n\r\n  function openGoTo() {\r\n    // prevent keyboard shortcut from being registering in input field onload\r\n    removeError()\r\n    setTimeout(() => {\r\n      gotoInput.focus()\r\n      gotoInput.value = formatStart()\r\n    }, 10) // 10ms is within browser threshold\r\n    gotoOverlay.classList.remove(\"hide-gotodate\");\r\n    goto.classList.remove(\"hide-gotodate\");\r\n    store.addActiveOverlay(\"hide-gotodate\");\r\n    document.addEventListener(\"keydown\", closeGoToOnEscape);\r\n    cancelGoto.onclick = closeGoTo;\r\n    submitGoto.onclick = handleGoTo;\r\n  }\r\n\r\n  openGoTo()\r\n}","export default class FormSetup {\r\n  constructor() {\r\n    this.submission;\r\n    this.category;\r\n    this.dates;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} type (\"edit\" / \"create\")\r\n   * @param {string} id (entry ID || null)\r\n   * @param {string} title || null\r\n   * @param {string} description || nulll\r\n   */\r\n  setSubmission(type, id, title, description) {\r\n    this.submission = {\r\n      type: type,\r\n      id: id || null,\r\n      title: title || null,\r\n      description: description || null,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} name (store category name)\r\n   * @param {string} color (store category color)\r\n   * @param {string} offsetColor (category color rgba 0.5)\r\n   */\r\n  setCategory(name, color) {\r\n    this.category = {\r\n      name: name,\r\n      color: color,\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {object} \r\n   * : {Dates: [new Date(start), new Date(end)]}\r\n   * : {Dates: [start(\"YYYY-MM-DD\"), end(\"YYYY-MM-DD\")]}\r\n   * : {Minutes: [number, number]}\r\n   */\r\n  setDates(object) {\r\n    this.dates = { object: object }\r\n  }\r\n\r\n  getSetup() {\r\n    return {\r\n      submission: this.submission,\r\n      category: this.category,\r\n      dates: this.dates,\r\n    }\r\n  }\r\n}","import { getClosest, throttle } from \"../../utilities/helpers\"\r\nimport {\r\n  getDateForStore,\r\n  compareDates,\r\n  getDateFromAttribute,\r\n  isBeforeDate\r\n} from \"../../utilities/dateutils\";\r\nimport setViews from \"../../config/setViews\";\r\n\r\nconst datepicker = document.querySelector(\".datepicker\");\r\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\")\r\nconst datepickerBody = document.querySelector(\".datepicker__body--dates\");\r\nconst datepickerTitle = document.querySelector(\".datepicker-title\");\r\nconst datepickerChangeDate = document.querySelector(\".datepicker-change-date\")\r\n\r\n// prev and next buttons aside from main app header datewrapper\r\nconst headerPrevBtn = document.querySelector(\".prev\")\r\nconst headerNextBtn = document.querySelector(\".next\")\r\n\r\nconst yearpickerTitle = document.querySelector(\".yearpicker-title\")\r\nconst monthpickerMonths = document.querySelectorAll(\".monthpicker__month\")\r\n\r\n\r\nexport default function setDatepicker(context, store, datepickerContext, type) {\r\n  let montharray = datepickerContext.getMonthArray();\r\n  let count = 0;\r\n  let hasweek;\r\n  // let currentdate = [];\r\n  let [checkmonth, checkyear] = [null, null];\r\n  const datepickerKeypressThrottle = throttle(handleKeydownNav, 100);\r\n\r\n  function setDatepickerHeader() {\r\n    const y = datepickerContext.getYear()\r\n    const m = datepickerContext.getMonthName()\r\n    datepickerTitle.textContent = `${m} ${y}`\r\n  }\r\n\r\n  function createCells(montharray) {\r\n    let groupedEntries = store.getMonthEntryDates(montharray)\r\n    let currentWeekStart = context.getWeek();\r\n\r\n    datepickerBody.innerText = \"\";\r\n    for (let i = 0; i < montharray.length; i++) {\r\n      const cell = document.createElement(\"div\");\r\n      const datename = document.createElement(\"div\");\r\n      cell.classList.add(\"datepicker__body--dates-cell\");\r\n      datename.classList.add(\"datepicker__body--datename\");\r\n\r\n      if (montharray[i].getMonth() !== datepickerContext.getMonth()) {\r\n        datename.classList.add(\"datepicker__body--datename-disabled\");\r\n      }\r\n\r\n      if (compareDates(montharray[i], currentWeekStart) && context.getComponent() === \"week\") {\r\n        hasweek = true;\r\n      }\r\n\r\n      if (hasweek) {\r\n        count++\r\n        if (count <= 7) {\r\n          cell.classList.add(\"datepicker__body--dates-week\")\r\n        }\r\n      } else {\r\n        cell.classList.remove(\"datepicker__body--dates-week\")\r\n      }\r\n\r\n      if (montharray[i].getDate() === context.getDateSelected() && montharray[i].getMonth() === datepickerContext.getMonth()) {\r\n        if (!datename.classList.contains(\"datepicker__body--datename-today\")) {\r\n          datename.setAttribute(\"class\", \"datepicker__body--datename\")\r\n          datename.classList.add(\"datepicker__body--datename-selected\");\r\n        }\r\n      }\r\n\r\n      if (context.isToday(montharray[i])) {\r\n        datename.setAttribute(\"class\", \"datepicker__body--datename\")\r\n        datename.classList.add(\"datepicker__body--datename-today\");\r\n      }\r\n\r\n      datename.innerText = montharray[i].getDate();\r\n      const formattedDate = getDateForStore(montharray[i])\r\n\r\n      datename.setAttribute(\"data-datepicker-date\", formattedDate);\r\n      if (groupedEntries.includes(formattedDate)) {\r\n        if (!datename.classList.contains(\"datepicker__body--datename-today\") && !datename.classList.contains(\"datepicker__body--datename-selected\")) {\r\n          datename.setAttribute(\"class\", \"datepicker__body--datename\")\r\n          datename.classList.add(\"datepicker__body--datename-entries\")\r\n        }\r\n      } else {\r\n        datename.classList.remove(\"datepicker__body--datename-entries\")\r\n      }\r\n\r\n      cell.appendChild(datename)\r\n      datepickerBody.appendChild(cell);\r\n    }\r\n\r\n    currentWeekStart = null;\r\n    groupedEntries = []\r\n  }\r\n\r\n  function closeDatepicker() {\r\n    datepicker.classList.add(\"hide-datepicker\");\r\n    datepickeroverlay.classList.add(\"hide-datepicker-overlay\")\r\n    closeChangeDateModal();\r\n    const formOpen = store.getActiveOverlay().has(\"hide-form-overlay\");\r\n    const listOpen = context.getComponent() !== \"list\";\r\n    if (listOpen || !formOpen) {\r\n      headerPrevBtn.removeAttribute(\"style\");\r\n      headerNextBtn.removeAttribute(\"style\");\r\n    }\r\n\r\n    if (type === \"form\") {\r\n      document.querySelector(\".active-form-date\")?.classList.remove(\"active-form-date\")\r\n    }\r\n\r\n    datepickeroverlay.onclick = null;\r\n    document.removeEventListener(\"keydown\", datepickerKeypressThrottle)\r\n    montharray = [];\r\n  }\r\n\r\n  function renderpicker(y, m, d) {\r\n    context.setDate(y, m, d)\r\n    context.setDateSelected(d)\r\n    setViews(context.getComponent(), context, store, datepickerContext);\r\n    datepickerContext.setDate(y, m, d)\r\n    closeDatepicker()\r\n  }\r\n\r\n  function handleFormDate(y, m, d) {\r\n    datepickerContext.setDate(y, m, d)\r\n    context.setDateSelected(d)\r\n    const datepickerDate = datepickerContext.getDate()\r\n\r\n    const activeFormDate = document.querySelector(\".active-form-date\")\r\n    activeFormDate.setAttribute(\"data-form-date\", `${y}-${m}-${d}`)\r\n    activeFormDate.textContent = `${datepickerContext.getMonthName().slice(0, 3)} ${d}, ${y}`\r\n\r\n    const inactiveFormDate = document?.querySelector(\".inactive-form-date\")\r\n    const inactiveValue = inactiveFormDate.getAttribute(\"data-form-date\").split(\"-\").map(x => parseInt(x))\r\n    const inactiveDate = new Date(inactiveValue[0], inactiveValue[1], inactiveValue[2])\r\n    const inactiveDateType = inactiveFormDate.getAttribute(\"data-form-date-type\")\r\n\r\n    /**\r\n     * FORM DATEPICKER CONDITIONS\r\n     * 1. if user selects start date that is after end date\r\n     *   -- set end date to start date\r\n     * 2. if user selects end date that is before start date\r\n     *  -- set start date to end date\r\n     */\r\n    if ((isBeforeDate(inactiveDate, datepickerDate) && inactiveDateType === \"end\") || (isBeforeDate(datepickerDate, inactiveDate) && inactiveDateType === \"start\")) {\r\n      inactiveFormDate.setAttribute(\"data-form-date\", `${y}-${m}-${d}`)\r\n      inactiveFormDate.textContent = `${datepickerContext.getMonthName().slice(0, 3)} ${d}, ${y}`\r\n    }\r\n  }\r\n\r\n  function setNewDate(e, data) {\r\n    let [y, m, d] = [null, null, null]\r\n    if (e === null) {\r\n      y = data[0]\r\n      m = data[1]\r\n      d = data[2]\r\n    } else {\r\n      let temp = getDateFromAttribute(e.target, \"data-datepicker-date\")\r\n      y = temp[0]\r\n      m = temp[1]\r\n      d = temp[2]\r\n    }\r\n    if (type === \"form\") {\r\n      handleFormDate(y, m, d)\r\n      closeDatepicker()\r\n    } else {\r\n      renderpicker(y, m, d)\r\n    }\r\n  }\r\n\r\n  function setCheckMonthYear() {\r\n    checkmonth = datepickerContext.getMonth()\r\n    checkyear = datepickerContext.getYear()\r\n  }\r\n\r\n  function getMonthYearCheck() {\r\n    return checkmonth === datepickerContext.getMonth() && checkyear === datepickerContext.getYear()\r\n  }\r\n\r\n  function renderNextMonth() {\r\n    datepickerContext.setNextMonth()\r\n    montharray = datepickerContext.getMonthArray()\r\n    createCells(montharray)\r\n    setDatepickerHeader()\r\n  }\r\n\r\n  function renderPrevMonth() {\r\n    datepickerContext.setPrevMonth()\r\n    montharray = datepickerContext.getMonthArray()\r\n    createCells(montharray)\r\n    setDatepickerHeader()\r\n  }\r\n\r\n  function setSelectedToNextDay() {\r\n    let curr = document.querySelector(\".datepicker__body--datename-selected\")\r\n    const parent = curr.parentElement;\r\n    const next = parent?.nextElementSibling?.firstElementChild;\r\n\r\n    if (!next || next === undefined || next === null) {\r\n      renderNextMonth();\r\n      datepickerContext.setDateSelected(1);\r\n      curr = document.querySelector(\".datepicker__body--datename-selected\")\r\n      curr.classList.remove(\"datepicker__body--datename-selected\")\r\n      let frst = document.querySelectorAll(\".datepicker__body--datename\");\r\n      frst[0].classList.add(\"datepicker__body--datename-selected\")\r\n      return;\r\n    } else {\r\n      curr.classList.remove(\"datepicker__body--datename-selected\")\r\n      next.classList.add(\"datepicker__body--datename-selected\")\r\n      let attr = next.getAttribute(\"data-datepicker-date\");\r\n      let newDateSelected = parseInt(attr.split(\"-\")[2])\r\n      datepickerContext.setDateSelected(newDateSelected)\r\n      return;\r\n    }\r\n  }\r\n\r\n  function setSelectedToPrevDay() {\r\n    let curr = document.querySelector(\".datepicker__body--datename-selected\")\r\n    const parent = curr.parentElement;\r\n    const prev = parent?.previousElementSibling?.firstElementChild;\r\n\r\n    if (!prev || prev === undefined || prev === null) {\r\n      renderPrevMonth();\r\n      const lastday = datepickerContext.getDaysInMonth()\r\n      datepickerContext.setDateSelected(+lastday);\r\n      curr = document.querySelector(\".datepicker__body--datename-selected\")\r\n      curr.classList.remove(\"datepicker__body--datename-selected\")\r\n      let last = document.querySelectorAll(\".datepicker__body--datename\");\r\n      last[last.length - 1].classList.add (\"datepicker__body--datename-selected\");\r\n      return;\r\n    } else {\r\n      curr.classList.remove(\"datepicker__body--datename-selected\");\r\n      prev.classList.add(\"datepicker__body--datename-selected\");\r\n      return;\r\n    }\r\n  }\r\n\r\n  function openChangeDateModal() {\r\n    setCheckMonthYear()\r\n    datepickerChangeDate.classList.add(\"show-dpcd\")\r\n    yearpickerSetYear(null, true);\r\n    monthpickerSetMonth(datepickerContext.getMonth(), true);\r\n  }\r\n\r\n  function closeChangeDateModal() {\r\n    // check if date has changed;\r\n    if (!getMonthYearCheck()) {\r\n      montharray = datepickerContext.getMonthArray();\r\n      createCells(montharray);\r\n      setDatepickerHeader();\r\n    }\r\n    datepickerChangeDate.classList.remove(\"show-dpcd\");\r\n  }\r\n\r\n  function monthpickerSetMonth(val, init) {\r\n    const newmonth = val;\r\n\r\n    if (!init && newmonth === datepickerContext.getMonth()) return;\r\n    datepickerContext.setMonth(newmonth);\r\n    monthpickerMonths.forEach((month, idx) => {\r\n      if (idx === newmonth) {\r\n        month.classList.add(\"monthpicker__active-month\")\r\n      } else {\r\n        month.classList.remove(\"monthpicker__active-month\")\r\n      }\r\n    })\r\n  }\r\n\r\n  function yearpickerSetYear(increment, init) {\r\n    if (init) {\r\n      yearpickerTitle.textContent = datepickerContext.getYear();\r\n      return;\r\n    }\r\n\r\n    const newyear = parseInt(datepickerContext.getYear()) + increment;\r\n    if (newyear == +datepickerContext.getYear()) return;\r\n    datepickerContext.setYear(newyear);\r\n    yearpickerTitle.textContent = newyear;\r\n  }\r\n\r\n  function handleMonthpicker(dir) {\r\n    const target = document.querySelector(\".monthpicker__active-month\");\r\n    let attr = parseInt(target.getAttribute(\"data-dp-month\"));\r\n    if (dir === \"next\") {\r\n      monthpickerSetMonth((attr + 1) % 12);\r\n    } else {\r\n      if (attr === 0) {\r\n        monthpickerSetMonth(11);\r\n      } else {\r\n        monthpickerSetMonth(attr - 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  function delegateDatepickerEvents(e) {\r\n    const datenumber = getClosest(e, \".datepicker__body--datename\");\r\n    const navnext = getClosest(e, \".datepicker-nav--next\");\r\n    const navprev = getClosest(e, \".datepicker-nav--prev\");\r\n    const title = getClosest(e, \".datepicker-title\");\r\n    const closeChangeDateBtn = getClosest(e, \".close-change-date\");\r\n    const ypNext = getClosest(e, \".yearpicker-next\");\r\n    const ypPrev = getClosest(e, \".yearpicker-prev\");\r\n    const mpMonth = getClosest(e, \".monthpicker__month\");\r\n\r\n    if (datenumber) {\r\n      setNewDate(e);\r\n      return;\r\n    }\r\n\r\n    if (navnext) {\r\n      renderNextMonth();\r\n      return;\r\n    }\r\n\r\n    if (navprev) {\r\n      renderPrevMonth();\r\n      return;\r\n    }\r\n\r\n    if (title) {\r\n      openChangeDateModal();\r\n      return;\r\n    }\r\n\r\n    if (closeChangeDateBtn) {\r\n      closeChangeDateModal();\r\n      return;\r\n    }\r\n\r\n    if (ypNext) {\r\n      yearpickerSetYear(1, false);\r\n      return;\r\n    }\r\n\r\n    if (ypPrev) {\r\n      yearpickerSetYear(-1, false);\r\n      return;\r\n    }\r\n\r\n    if (mpMonth) {\r\n      const newmonth = parseInt(e.target.getAttribute(\"data-dp-month\"))\r\n      monthpickerSetMonth(newmonth, false);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function handleKeydownNav(e) {\r\n    // functionality will change depending on whether the change date modal is open -- use flag to check\r\n    const flag = datepickerChangeDate.classList.contains(\"show-dpcd\");\r\n    switch (e.key) {\r\n      case \"ArrowDown\":\r\n        flag ? yearpickerSetYear(-1, false) : renderPrevMonth();\r\n        break;\r\n      case \"ArrowUp\":\r\n        flag ? yearpickerSetYear(1, false) : renderNextMonth();\r\n        break;\r\n      case \"ArrowRight\":\r\n        flag ? handleMonthpicker(\"next\") : setSelectedToNextDay();\r\n        break;\r\n      case \"ArrowLeft\":\r\n        flag ? handleMonthpicker(\"prev\") : setSelectedToPrevDay();\r\n        break;\r\n      case \"Enter\":\r\n        if (datepickerChangeDate.classList.contains(\"show-dpcd\")) {\r\n          closeChangeDateModal();\r\n        } else {\r\n          const target = document.querySelector(\".datepicker__body--datename-selected\")\r\n          if (target === null || !target) {\r\n            // the last selected day in the previous month was longer than the days in the current month\r\n            setNewDate(null, [\r\n              datepickerContext.getYear(),\r\n              datepickerContext.getMonth(),\r\n              28\r\n            ]);\r\n          } else {\r\n            let attr = getDateFromAttribute(target, \"data-datepicker-date\")\r\n            setNewDate(null, attr);\r\n          }\r\n        }\r\n        break;\r\n      case \"Tab\":\r\n        flag ? closeChangeDateModal() : openChangeDateModal();\r\n        \r\n        break;\r\n      case \"Escape\":\r\n        if (datepickerChangeDate.classList.contains(\"show-dpcd\")) {\r\n          closeChangeDateModal();\r\n        } else {\r\n          closeDatepicker();\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  const initDatepicker = () => {\r\n    // closeChangeDateModal();\r\n    setDatepickerHeader();\r\n    createCells(montharray);\r\n    store.setResetDatepickerCallback(closeDatepicker)\r\n    datepickeroverlay.onclick = closeDatepicker;\r\n    datepicker.onmousedown = delegateDatepickerEvents;\r\n    document.addEventListener(\"keydown\", datepickerKeypressThrottle);\r\n    montharray = [];\r\n  }\r\n\r\n  initDatepicker()\r\n}\r\n","import locales from \"../../locales/en\"\r\nimport { createCheckIcon } from \"../../utilities/svgs\";\r\nimport { isNumeric, placePopup } from \"../../utilities/helpers\";\r\nconst checkIcon = createCheckIcon('var(--taskcolor');\r\nconst colors = Object.values(locales.colors)\r\n\r\nclass CatFormHelper {\r\n  constructor(catname, catcolor) {\r\n    this.catname = catname;\r\n    this.catcolor = catcolor;\r\n    this.errMsg = '';\r\n    this.prevColorIdx = catcolor;\r\n    this.originalName = catname;\r\n    this.originalColor = catcolor;\r\n  }\r\n  setName(name) {this.catname = name;}\r\n  setColor(color) {this.catcolor = color;}\r\n  setPrevColor(color) {this.prevColorIdx = color;}\r\n  getName() {return this.catname;}\r\n  getColor() {return this.catcolor;}\r\n  prevColor() {return this.prevColorIdx;}\r\n  setErrMsg(msg) {this.errMsg = msg;}\r\n  getErrMsg() {return this.errMsg;}\r\n  getOriginalName() {return this.originalName;}\r\n  getOriginalColor() {return this.originalColor;}\r\n}\r\n\r\nconst ctgform = document.querySelector(\".category__form\")\r\nconst ctgformoverlay = document.querySelector(\".category__form-overlay\")\r\nconst ctgformBody = document.querySelector(\".category__form--body\")\r\nconst ctgformInput = document.querySelector(\".category__form-input\")\r\nconst colorPickerTitle = document.querySelector(\".color-picker__title\")\r\nconst colorPickerOptions = document.querySelector(\".color-picker__options\");\r\nconst ctgErrMsg = document.querySelector(\".ctg-input--err\")\r\n\r\nexport default function createCategoryForm(store, selectedCategory, editing, resetParent) {\r\n\r\n  const formhelper = new CatFormHelper(\r\n    selectedCategory.name,\r\n    selectedCategory.color\r\n  );\r\n\r\n  function createColorOption(color, selected) {\r\n    const colorOption = document.createElement(\"div\");\r\n    colorOption.classList.add(\"color-picker--option\");\r\n    colorOption.style.backgroundColor = color;\r\n    colorOption.setAttribute(\"data-color-hex\", color)\r\n\r\n    if (color === selected) {\r\n      colorOption.append(checkIcon);\r\n      formhelper.setColor(color);\r\n    }\r\n\r\n    return colorOption;\r\n  }\r\n\r\n  function createPickerOptions(currentColor) {\r\n    colorPickerOptions.innerText = \"\";\r\n    colors.forEach((color) => {\r\n      for (let i = 1; i < 8; i++) {\r\n        colorPickerOptions.append(\r\n          createColorOption(color[i], currentColor)\r\n        )\r\n      }\r\n    })\r\n  }\r\n\r\n  function handleColorSelection(e, current) {\r\n    const target = e.target;\r\n    const color = target.getAttribute(\"data-color-hex\");\r\n\r\n    if (color === current) return;\r\n\r\n    const colorOptions = document.querySelectorAll(\".color-picker--option\");\r\n    colorOptions.forEach((option) => {\r\n      option.innerText = \"\";\r\n    })\r\n    target.appendChild(checkIcon);\r\n    colorPickerTitle.style.background = color;\r\n    formhelper.setColor(color);\r\n  }\r\n\r\n  function handleInputErr() {\r\n    const removeInputErr = () => {\r\n      ctgErrMsg.classList.add(\"hide-ctg-err\");\r\n      ctgformInput.focus();\r\n    }\r\n    ctgErrMsg.textContent = formhelper.getErrMsg();\r\n    ctgErrMsg.onclick = removeInputErr;\r\n  }\r\n\r\n  function validateNewCategory(categoryName, color) {\r\n    let trimName = categoryName.trim().replace(/[^a-zA-Z0-9\\s]+|\\s{2,}/g, ' ').trim();\r\n\r\n    if (isNumeric(trimName)) {\r\n      trimName = `category ${trimName}`;\r\n    }\r\n    \r\n    const origName = formhelper.getOriginalName();\r\n\r\n    let errormsg = false;\r\n    if (trimName.length < 1) {\r\n      formhelper.setErrMsg(\"Category name is required\");\r\n      errormsg = true;\r\n    } else if (store.hasCtg(trimName)) {\r\n      if (!editing || (editing && origName !== trimName)) {\r\n        formhelper.setErrMsg(\"Category already exists\");\r\n        errormsg = true;\r\n      }\r\n    }\r\n\r\n    if (errormsg) {\r\n      ctgErrMsg.classList.remove(\"hide-ctg-err\");\r\n      handleInputErr(errormsg);\r\n      return;\r\n    } else {\r\n      if (editing) {\r\n        if (origName === trimName && formhelper.getOriginalColor() === color) {\r\n          closeCategoryForm();\r\n          return;\r\n        } else {\r\n          if (origName !== trimName){\r\n            store.updateCtg(trimName, color, formhelper.getName());\r\n          } else {\r\n            store.updateCtgColor(origName, color);\r\n          }\r\n        }\r\n      } else {\r\n        store.addNewCtg(trimName, color);\r\n      }\r\n\r\n      const fullrenderCtg = store.getRenderCategoriesCallback();\r\n      closeCategoryForm();\r\n      fullrenderCtg();\r\n    }\r\n  }\r\n\r\n  function closeCategoryForm() {\r\n    if (resetParent !== null) {\r\n      resetParent.removeAttribute(\"style\");\r\n    }\r\n    ctgform.classList.add(\"hide-ctg-form\");\r\n    ctgformoverlay.classList.add(\"hide-ctg-form\");\r\n    ctgformInput.value = \"\";\r\n    ctgErrMsg.classList.add(\"hide-ctg-err\");\r\n    store.removeActiveOverlay('hide-ctg-form');\r\n    document.removeEventListener(\"keydown\", closeCategoryFormOnEsc);\r\n  }\r\n\r\n  function closeCategoryFormOnEsc(e) {\r\n    const val = e.key.toLowerCase()\r\n    if (val === \"escape\") {\r\n      if (!ctgErrMsg.classList.contains(\"hide-ctg-err\")) {\r\n        ctgErrMsg.classList.add(\"hide-ctg-err\");\r\n        ctgformInput.focus();\r\n        return;\r\n      } else {\r\n        closeCategoryForm();\r\n        return;\r\n      }\r\n    }\r\n    if (val === \"enter\") {\r\n      validateNewCategory(ctgformInput.value, formhelper.getColor());\r\n      return;\r\n    }\r\n  }\r\n\r\n  function openCtgForm(editing) {\r\n    store.addActiveOverlay(\"hide-ctg-form\");\r\n    ctgformoverlay.classList.remove(\"hide-ctg-form\");\r\n    ctgform.classList.remove(\"hide-ctg-form\");\r\n    ctgErrMsg.classList.add(\"hide-ctg-err\");\r\n    colorPickerTitle.style.backgroundColor = formhelper.getColor();\r\n    setTimeout(() => {\r\n      if (editing) {\r\n        ctgformInput.value = formhelper.getName();\r\n      } else {\r\n        ctgformInput.placeholder = \"Create new category\";\r\n      }\r\n      ctgformInput.focus();\r\n    }, 4)\r\n  }\r\n\r\n  function gc(e, element) {\r\n    return e.target.closest(element)\r\n  }\r\n\r\n  function delegateCtgForm(e) {\r\n    const cancelctgBtn = gc(e, \".category__form--cancel\");\r\n    const colorOption = gc(e, \".color-picker--option\");\r\n    const submitctgBtn = gc(e, \".category__form--submit\");\r\n\r\n    if (cancelctgBtn) {\r\n      closeCategoryForm(e);\r\n      return;\r\n    }\r\n\r\n    if (colorOption) {\r\n      handleColorSelection(e, formhelper.getColor());\r\n      return;\r\n    }\r\n\r\n    if (submitctgBtn) {\r\n      validateNewCategory(ctgformInput.value, formhelper.getColor());\r\n      return;\r\n    }\r\n  }\r\n\r\n  const initCtgForm = () => {\r\n    createPickerOptions(formhelper.getColor());\r\n    openCtgForm(editing);\r\n    ctgform.onmousedown = delegateCtgForm;\r\n    ctgformoverlay.onclick = closeCategoryForm;\r\n    document.addEventListener(\"keydown\", closeCategoryFormOnEsc);\r\n  }\r\n\r\n  initCtgForm();\r\n}","import setViews from \"../../config/setViews\";\r\nimport { getClosest } from \"../../utilities/helpers\";\r\nimport createToast from \"../toastPopups/toast\";\r\nimport { taostDeleteEntryWarning } from \"../toastPopups/toastCallbacks\";\r\nimport { formatStartEndTimes } from \"../../utilities/timeutils\";\r\n\r\nimport {\r\n  formatEntryOptionsDate,\r\n  compareDates,\r\n} from \"../../utilities/dateutils\";\r\n\r\nconst entryOptionsOverlay = document.querySelector(\".entry__options--overlay\");\r\nconst entryOptionsWrapper = document.querySelector('.entry__options');\r\nconst entryOptionsDateHeader = document.querySelector('.entry__options-date');\r\nconst entryOptionsTimeHeader = document.querySelector('.entry__options-time');\r\nconst entryOptionTitle = document.querySelector(\".eob-title\")\r\nconst entryOptionDescription = document.querySelector('.eob-description');\r\nconst entryOptionCategoryIcon = document.querySelector(\".eob-category--icon\")\r\nconst entryOptionCategory = document.querySelector('.eob-category');\r\n\r\nconst reset = [\r\n  entryOptionsDateHeader,\r\n  entryOptionsTimeHeader,\r\n  entryOptionTitle,\r\n  entryOptionDescription,\r\n  entryOptionCategory,\r\n]\r\n\r\nexport default function getEntryOptionModal(context, store, entry, datepickerContext, finishSetup) {\r\n\r\n  function openEditForm() {\r\n    const openForm = store.getRenderFormCallback()\r\n    openForm();\r\n    finishSetup();\r\n    closeEntryOptions();\r\n  }\r\n\r\n  function proceedDelete(entry) {\r\n    store.deleteEntry(entry.id);\r\n    closeEntryOptions();\r\n    setViews(context.getComponent(), context, store, datepickerContext);\r\n  }\r\n\r\n  function openDeleteWarning() {\r\n    const deletepopup = document.createElement(\"div\");\r\n    deletepopup.classList.add(\"delete-popup\");\r\n\r\n    const deletebtns = document.createElement(\"div\");\r\n    deletebtns.classList.add(\"delete-popup__btns\");\r\n\r\n    const deletepopupCancel = document.createElement(\"button\");\r\n    deletepopupCancel.classList.add(\"delete-popup__cancel\");\r\n    deletepopupCancel.textContent = \"Cancel\";\r\n\r\n    const deletepopupConfirm = document.createElement(\"button\");\r\n    deletepopupConfirm.classList.add(\"delete-popup__confirm\");\r\n    deletepopupConfirm.textContent = \"Delete\";\r\n\r\n    const deletepopupText = document.createElement(\"p\");\r\n    deletepopupText.classList.add(\"delete-popup__text\");\r\n    deletepopupText.textContent = \"Are you sure you want to delete this entry?\";\r\n\r\n    deletebtns.append(deletepopupCancel, deletepopupConfirm)\r\n    deletepopup.append(deletepopupText, deletebtns);\r\n    entryOptionsWrapper.append(deletepopup);\r\n\r\n    const removeDeletePopup = () => { deletepopup.remove(); }\r\n    const submitDelete = () => {\r\n      proceedDelete(entry);\r\n      removeDeletePopup();\r\n      const resetCurrentView = store.getFormResetHandle(context.getComponent())\r\n      if (resetCurrentView !== null) {\r\n        resetCurrentView()\r\n      }\r\n    }\r\n\r\n    deletepopupCancel.onclick = removeDeletePopup\r\n    deletepopupConfirm.onclick = submitDelete\r\n  }\r\n\r\n  function formNegated() {\r\n    // The form is responsible for resetting the current view\r\n    // If the form is not toggled open from this modal,\r\n    // reset it manually on close\r\n    const resetCurrentView = store.getFormResetHandle(context.getComponent())\r\n    closeEntryOptions()\r\n    resetCurrentView();\r\n  }\r\n\r\n  function closeEntryOptions() {\r\n    // Close the modal and remove event listeners\r\n    // Only ever called directly if the form is toggled open\r\n    entryOptionsWrapper.classList.add(\"entry__options--hidden\");\r\n    entryOptionsOverlay.classList.add(\"entry__options--hidden\");\r\n    store.removeActiveOverlay(\"entry__options--hidden\")\r\n    entryOptionDescription.parentElement.removeAttribute(\"style\");\r\n\r\n    document.removeEventListener(\"keydown\", handleEntryOptionKD);\r\n  }\r\n\r\n  function setEntryDefaults() {\r\n    reset.forEach(el => el.textContent = \"\")\r\n    entryOptionsWrapper.classList.remove(\"entry__options--hidden\");\r\n    entryOptionsOverlay.classList.remove(\"entry__options--hidden\");\r\n    store.addActiveOverlay(\"entry__options--hidden\")\r\n\r\n    const [start, end] = [new Date(entry.start), new Date(entry.end)]\r\n    let istoday = false;\r\n    if (compareDates(start, new Date())) {\r\n      istoday = true;\r\n    }\r\n\r\n    const getDateTime = formatEntryOptionsDate(start, end);\r\n    entryOptionsDateHeader.textContent = getDateTime.date;\r\n    if (getDateTime.time !== null) {\r\n      if (getDateTime.time === undefined) {\r\n        let tempdate = new Date()\r\n        let secondsDiff = tempdate.getTime() - end.getTime()\r\n        let daysSince = Math.floor(secondsDiff / (1000 * 60 * 60 * 24))\r\n        let timeheadertitle;\r\n\r\n        /**\r\n         * If the entry has ended, display the time since it ended\r\n         * If the entry has ended today, display the time since it ended\r\n         * If the entry has ended yesterday, display \"ended yesterday\"\r\n         * If the entry starts today, display how long until it is scheduled to end\r\n         * If the entry is yet to start, display how long until it is scheduled to start\r\n         */\r\n        if (daysSince === 0) {\r\n          let hourSince = Math.floor(secondsDiff / (1000 * 60 * 60))\r\n          let minSince = Math.floor((secondsDiff - (hourSince * 1000 * 60 * 60)) / (1000 * 60))\r\n          if (hourSince === 0) {\r\n            if (minSince === 1) {\r\n              timeheadertitle = `ended ${minSince} minute ago`\r\n            } else {\r\n              timeheadertitle = `ended ${minSince} minutes ago`\r\n            }\r\n          } else if (hourSince === 1) {\r\n            timeheadertitle = `ended ${hourSince} hour ago`\r\n          } else if (hourSince > 1) {\r\n            timeheadertitle = `ended ${hourSince} hours ago`\r\n          } \r\n        } else if (daysSince === 1) {\r\n          timeheadertitle = \"ended yesterday\"\r\n        } else {\r\n          timeheadertitle = `ended ${daysSince} days ago`\r\n        }\r\n        entryOptionsTimeHeader.textContent = timeheadertitle;\r\n      } else {\r\n        if (istoday) {\r\n          entryOptionsTimeHeader.textContent = \"ending in \" + getDateTime.time;\r\n        } else {\r\n          entryOptionsTimeHeader.textContent = getDateTime.time;\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    entryOptionTitle.textContent = entry.title;\r\n\r\n    entry.description.length === 0 ? entryOptionDescription.parentElement.style.display = \"none\" : entryOptionDescription.textContent = entry.description;\r\n\r\n    entryOptionCategoryIcon.setAttribute(\"fill\", store.getCtgColor(entry.category))\r\n    entryOptionCategory.textContent = entry.category;\r\n\r\n    entryOptionsWrapper.onmousedown = delegateEntryOptions;\r\n    entryOptionsOverlay.onmousedown = formNegated\r\n    document.addEventListener(\"keydown\", handleEntryOptionKD)\r\n  }\r\n\r\n  function handleEntryOptionKD(e) {\r\n    const deletepopup = document?.querySelector(\".delete-popup\")\r\n    if (e.key === \"Escape\") {\r\n      if (deletepopup) {\r\n        deletepopup.remove();\r\n        return;\r\n      } else {\r\n        formNegated();\r\n      }\r\n    }\r\n\r\n    if (e.key.toLowerCase() === \"e\") {\r\n      openEditForm();\r\n    }\r\n\r\n    if (e.key === \"Delete\") {\r\n      openDeleteWarning();\r\n    }\r\n  }\r\n\r\n  function delegateEntryOptions(e) {\r\n    const editBtn = getClosest(e, \".eoi__edit\")\r\n    const deleteBtn = getClosest(e, \".eoi__delete\")\r\n    const closeBtn = getClosest(e, \".eoi__close\")\r\n\r\n    if (editBtn) {\r\n      openEditForm();\r\n      return;\r\n    }\r\n\r\n    if (deleteBtn) {\r\n      openDeleteWarning();\r\n      return;\r\n    }\r\n\r\n    if (closeBtn) {\r\n      formNegated();\r\n      return;\r\n    }\r\n  }\r\n\r\n  setEntryDefaults()\r\n}","import locales from \"../../locales/en\"\r\nimport { formatStartEndDate } from \"../../utilities/dateutils\"\r\nexport default function setHeader(context, component, store) {\r\n  let temp = new Date()\r\n  const btntoday = document.querySelector(\".btn-today\")\r\n  btntoday.setAttribute(\"data-tooltip\", `${locales.labels.weekdaysLong[temp.getDay()]}, ${locales.labels.monthsLong[temp.getMonth()]} ${temp.getDate()}`)\r\n  \r\n  const dateTimeTitle = document.querySelector(\".datetime-content--title\")\r\n  const header = document.querySelector(\".header\")\r\n  const selectElement = document.querySelector(\".select__modal\")\r\n  const btnprev = document.querySelector('.prev');\r\n  const btnnext = document.querySelector('.next');\r\n  const datetimeWrapper = document.querySelector(\".h-col-2\");\r\n  const datetimeContent = document.querySelector(\".datetime-content\")\r\n  const collapsebtn = document.querySelector(\".collapse-view\")\r\n  const prevnext = document.querySelector(\".prev-next\");\r\n  \r\n  component === \"week\" || component === \"day\" ? collapsebtn.classList.remove(\"hide-cbt\") : collapsebtn.classList.add(\"hide-cbt\");\r\n\r\n  const configHeader = (borderstyle, componentTitle) => {\r\n    header.style.borderBottom = borderstyle;\r\n    dateTimeTitle.textContent = componentTitle;\r\n    datetimeWrapper.classList.remove(\"datetime-inactive\");\r\n    datetimeWrapper.style.paddingRight = \"0\";\r\n    datetimeContent.removeAttribute(\"style\")\r\n      prevnext.removeAttribute(\"style\")\r\n  }\r\n\r\n  const setHeaderAttributes = (view) => {\r\n    if (view !== \"list\") {\r\n      btnprev.setAttribute(\"data-tooltip\", `prev ${view}`);\r\n      btnnext.setAttribute(\"data-tooltip\", `next ${view}`);\r\n    }\r\n    selectElement.textContent = view[0].toUpperCase() + view.slice(1);\r\n    selectElement.setAttribute(\"data-value\", view.slice(0, 1).toUpperCase());\r\n  }\r\n\r\n  switch (component) {\r\n    case \"day\":\r\n      configHeader(\"1px solid transparent\", `${context.getMonthName()} ${context.getDay()}, ${context.getYear()}`);\r\n      setHeaderAttributes(\"day\");\r\n      break;\r\n    case \"week\":\r\n      configHeader(\"1px solid transparent\", context.getWeekRange());\r\n      setHeaderAttributes(\"week\");\r\n      break;\r\n    case \"month\":\r\n      configHeader(\"1px solid transparent\", `${context.getMonthName()} ${context.getYear()}`);\r\n      setHeaderAttributes(\"month\");\r\n      break;\r\n    case \"year\":\r\n      configHeader(\"1px solid transparent\", context.getYear());\r\n      setHeaderAttributes(\"year\");\r\n      break;\r\n    case \"list\":\r\n      setHeaderAttributes(\"list\");\r\n      header.style.borderBottom = \"1px solid var(--mediumgrey1)\";\r\n      prevnext.setAttribute(\"style\", \"opacity: 0; pointer-events:none;\");\r\n      datetimeWrapper.classList.add(\"datetime-inactive\");\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n","const shortcutsModalOverlay = document.querySelector(\".shortcuts-modal-overlay\")\r\nconst shortcutsModal = document.querySelector(\".shortcuts__modal\")\r\nconst shortcutsModalContent = document.querySelector(\".shortcuts-modal-content\")\r\nconst shortcutsModalClose = document.querySelector(\".close-shortcuts-modal\")\r\nconst notifyShortcutsStatus = document.querySelector(\".keyboard-disabled-sm-two\")\r\nexport default function handleShortCutsModal(store) {\r\n  function createShortcut(key, description) {\r\n    const shortcut = document.createElement(\"div\");\r\n    shortcut.classList.add(\"sm-item\");\r\n\r\n    const shortcutKey = document.createElement(\"div\");\r\n    shortcutKey.classList.add(\"sm-key\");\r\n    const keyone = document.createElement(\"span\")\r\n    if (Array.isArray(key)) {\r\n      const or = document.createElement(\"span\")\r\n      or.textContent = \" or \"\r\n      const keytwo = document.createElement(\"span\")\r\n      keyone.textContent = key[0].toUpperCase()\r\n      keytwo.textContent = key[1].toUpperCase()\r\n      shortcutKey.append(keyone, or, keytwo)\r\n    } else {\r\n      if (key == \"ENTER\" || key == \"ESCAPE\" || key == \"DELETE\") {\r\n        keyone.classList.add(\"key-full\");\r\n      }\r\n      keyone.textContent = key.toUpperCase();\r\n      shortcutKey.appendChild(keyone);\r\n    }\r\n\r\n    const shortcutDescription = document.createElement(\"div\");\r\n    shortcutDescription.classList.add(\"sm-description\");\r\n    if (Array.isArray(description)) {\r\n      shortcut.classList.add(\"sm-item--full\");\r\n      shortcutDescription.classList.add(\"sm-description--full\");\r\n      const descriptionOne = document.createElement(\"span\");\r\n      const descriptionTwo = document.createElement(\"span\");\r\n      descriptionOne.textContent = description[0];\r\n      descriptionTwo.textContent = description[1];\r\n      shortcutDescription.append(descriptionOne, descriptionTwo);\r\n    } else {\r\n      shortcutDescription.textContent = description;\r\n    }\r\n    shortcut.append(shortcutKey, shortcutDescription);\r\n    return shortcut;\r\n  }\r\n\r\n  // close the modal and remove the event listener\r\n  function handleShortcutsModalClose() {\r\n    shortcutsModalOverlay.classList.add(\"hide-shortcuts\")\r\n    shortcutsModal.classList.add(\"hide-shortcuts\")\r\n    store.removeActiveOverlay(\"hide-shortcuts\")\r\n    document.removeEventListener(\"keydown\", closeShortcutsOnKeydown)\r\n  }\r\n\r\n  // provide the ability to close the shortcuts modal with \"escape\" or with the keys that open it\r\n  function closeShortcutsOnKeydown(e) {\r\n    let inp = e.key.toLowerCase();\r\n    if (inp === \"escape\" || inp === \"/\" || inp === \"?\") {\r\n      handleShortcutsModalClose();\r\n    }\r\n  }\r\n\r\n  function setStatusIcon(status) {\r\n    if (status) {\r\n      notifyShortcutsStatus.setAttribute(\"data-tooltip\", \"Keyboard shortcuts enabled\")\r\n      notifyShortcutsStatus.firstElementChild.setAttribute(\"fill\", \"var(--primary1)\")\r\n  \r\n    } else {\r\n      notifyShortcutsStatus.setAttribute(\"data-tooltip\", \"Keyboard shortcuts disabled\")\r\n      notifyShortcutsStatus.firstElementChild.setAttribute(\"fill\", \"var(--red1)\")\r\n    }\r\n  }\r\n  \r\n  function handleShortcutsModalOpen() {\r\n    shortcutsModalContent.innerText = \"\";\r\n    shortcutsModalOverlay.classList.remove(\"hide-shortcuts\")\r\n    shortcutsModal.classList.remove(\"hide-shortcuts\")\r\n    store.addActiveOverlay(\"hide-shortcuts\")\r\n    \r\n    const status = store.getShortcutsStatus()\r\n    setStatusIcon(status)\r\n\r\n    const shortcuts = store.getShortcuts();\r\n    for (let i = 0; i < Object.values(shortcuts).length; i++) {\r\n      const value = Object.values(shortcuts)[i]\r\n      shortcutsModalContent.appendChild(createShortcut(\r\n        value.shortcut,\r\n        value.action,\r\n      ));\r\n    }\r\n\r\n    function toggleShortcutsStatus() {\r\n      const status = store.getShortcutsStatus() === false ? true : false;\r\n      setStatusIcon(status);\r\n      store.setShortcutsStatus(status);\r\n    }\r\n\r\n    shortcutsModalOverlay.onclick = handleShortcutsModalClose;\r\n    shortcutsModalClose.onclick = handleShortcutsModalClose;\r\n    notifyShortcutsStatus.onclick = toggleShortcutsStatus;\r\n    document.addEventListener(\"keydown\", closeShortcutsOnKeydown);\r\n  }\r\n\r\n  handleShortcutsModalOpen()\r\n}","import setViews from \"../../config/setViews\"\r\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\"\r\nimport locales from \"../../locales/en\"\r\n\r\nimport {\r\n  createCheckIcon,\r\n  createEditIcon,\r\n  createCloseIcon,\r\n  createTrashIcon,\r\n} from \"../../utilities/svgs\"\r\n\r\nimport debounce, {\r\n  getClosest,\r\n  hextorgba,\r\n  placePopup\r\n} from \"../../utilities/helpers\"\r\n\r\nimport createCategoryForm from \"./editCategory\"\r\n\r\nconst sidebar = document.querySelector(\".sidebar\")\r\nconst sidebarColTwo = document.querySelector(\".sb__categories\")\r\nconst cWrapper = document.querySelector(\".sb__categories--body\")\r\nconst categoriesContainer = document.querySelector(\".sb__categories--body-form\")\r\nconst sidebarScrollContainer = document.querySelector(\".sidebar-content__wrapper\")\r\nconst categoriesHeader = document.querySelector(\".sb__categories--header\")\r\nconst categoryHeaderCaret = document.querySelector(\".sbch-caret\")\r\n// renders via menu click -- see ./renderViews.js\r\nexport default function handleSidebarCategories(context, store, datepickerContext) {\r\n  const defaultCtg = store.getDefaultCtg()[0]\r\n\r\n  function updateComponent() {\r\n    setViews(context.getComponent(), context, store, datepickerContext)\r\n  }\r\n\r\n\r\n  function renderSidebarDatepickerCtg() {\r\n    setSidebarDatepicker(context, store, datepickerContext)\r\n  }\r\n\r\n  function renderCategories() {\r\n    categoriesContainer.innerText = \"\"\r\n    const ctg = store.getAllCtg();\r\n    const keys = Object.keys(ctg);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      let [ctgname, color, status] = [\r\n        keys[i],\r\n        ctg[keys[i]].color,\r\n        ctg[keys[i]].active\r\n      ]\r\n      createCategoryListItem(ctgname, color, status)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} ctgname - category name\r\n   * @param {string} ctgcolor - hex color\r\n   * @param {Boolean} status - checked or not\r\n   */\r\n  function createCategoryListItem(ctgname, ctgcolor, status) {\r\n    const row = document.createElement('div');\r\n    row.classList.add('sbch-form--item');\r\n    const colone = document.createElement('div');\r\n    colone.classList.add('sbch-form--item__col');\r\n    const checkboxWrapper = document.createElement('div');\r\n    checkboxWrapper.classList.add('sbch-form--item__checkbox--wrapper');\r\n    const checkbox = document.createElement('div');\r\n    checkbox.classList.add('sbch-form--item__checkbox');\r\n    checkbox.setAttribute(\"data-sbch-checked\", `${status}`);\r\n    checkbox.setAttribute(\"data-sbch-category\", ctgname);\r\n    let checkIcon;\r\n\r\n    if (status) {\r\n      checkbox.style.backgroundColor = ctgcolor;\r\n      checkIcon = createCheckIcon(\"var(--taskcolor0)\")\r\n    } else {\r\n      checkbox.style.backgroundColor = \"var(--black1)\";\r\n      checkIcon = createCheckIcon(\"none\")\r\n    }\r\n\r\n    checkbox.style.border = `2px solid ${ctgcolor}`;\r\n    checkbox.appendChild(checkIcon)\r\n    checkboxWrapper.appendChild(checkbox)\r\n\r\n    const label = document.createElement('span');\r\n    label.classList.add('sbch-form--item__label');\r\n    label.textContent = ctgname;\r\n    colone.append(checkboxWrapper, label);\r\n\r\n    const coltwo = document.createElement('div');\r\n    coltwo.classList.add('sbch-form--item__col--actions');\r\n    const deleteicon = document.createElement('div');\r\n    deleteicon.classList.add('sbch-col--actions__delete-icon');\r\n    deleteicon.setAttribute(\"data-sbch-category\", ctgname)\r\n    deleteicon.setAttribute(\"data-sbch-color\", ctgcolor)\r\n    const editicon = document.createElement('div');\r\n    editicon.classList.add(\"sbch-col--actions__edit-icon\")\r\n    editicon.setAttribute(\"data-sbch-category\", ctgname)\r\n    editicon.setAttribute(\"data-sbch-color\", ctgcolor)\r\n\r\n    // must have at least one category, so default cannot be deleted\r\n    if (ctgname.toLowerCase() === defaultCtg) {\r\n      editicon.classList.add(\"sbch-col--actions__edit-icon--immutable\")\r\n    } else {\r\n      deleteicon.appendChild(createCloseIcon(\"var(--white2)\"))\r\n      coltwo.appendChild(deleteicon)\r\n    }\r\n\r\n\r\n    editicon.appendChild(createEditIcon(\"var(--white2)\"))\r\n    coltwo.appendChild(editicon)\r\n    row.append(colone, coltwo)\r\n    categoriesContainer.appendChild(row)\r\n  }\r\n\r\n  function handleCategoryModalToggle() {\r\n    cWrapper.classList.toggle(\"toggle-category--modal\")\r\n    if (!cWrapper.classList.contains(\"toggle-category--modal\")) {\r\n      categoryHeaderCaret.classList.add(\"sbch-caret--open\")\r\n    } else {\r\n      categoryHeaderCaret.classList.remove(\"sbch-caret--open\")\r\n    }\r\n    categoriesHeader.style.backgroundColor = \"var(--black0)\"\r\n    setTimeout(() => {\r\n      categoriesHeader.style.backgroundColor = \"var(--black1)\"\r\n    }, 200)\r\n  }\r\n\r\n  function createDeleteCategoryPopup(e) {\r\n    const ctgname = e.target.getAttribute(\"data-sbch-category\")\r\n    const ctgcolor = store.getCtgColor(ctgname)\r\n    // const offsetColor = hextorgba(ctgcolor, 0.8)\r\n    const offsetColor = ctgcolor;\r\n    const categoryLength = store.getCtgLength(ctgname)\r\n    let noEntries = false;\r\n\r\n    // POPUP OVERLAY\r\n    const popupBoxOverlay = document.createElement(\"aside\");\r\n    popupBoxOverlay.classList.add(\"popup-delete-ctg__overlay\");\r\n\r\n    // POPUP BOX\r\n    const popupBox = document.createElement(\"aside\");\r\n    popupBox.classList.add(\"popup-delete-ctg\");\r\n    if (categoryLength === 0) {\r\n      noEntries = true;\r\n      popupBox.classList.add(\"popup-delete-ctg__no-entries\")\r\n    }\r\n    const ord = categoryLength === 1 ? \"entry\" : \"entries\";\r\n\r\n    /* **************************** */\r\n    // POPUP HEADER\r\n    const popupHeader = document.createElement(\"div\");\r\n    popupHeader.classList.add(\"popup-delete-ctg__header\");\r\n\r\n    const popupTitle = document.createElement(\"div\");\r\n    popupTitle.classList.add(\"popup-delete-ctg__title\");\r\n    popupTitle.style.border = `2px solid ${ctgcolor}`;\r\n    popupTitle.style.backgroundColor = offsetColor;\r\n    popupTitle.textContent = `removing  \"${ctgname}\"`;\r\n\r\n    const popupCategoryStats = document.createElement(\"div\");\r\n    popupCategoryStats.classList.add(\"popup-delete-ctg__stats\");\r\n    popupCategoryStats.textContent = `(${categoryLength} total ${ord} in this category)`;\r\n    /* **************************** */\r\n    popupHeader.append(popupTitle, popupCategoryStats);\r\n    popupBox.appendChild(popupHeader)\r\n\r\n\r\n    // category has entries -- provide options to move entries to another category or delete them\r\n    // const setChecked = (inp) => {\r\n    //   inp.checked = true;\r\n    // }\r\n    if (!noEntries) {\r\n      // POPUP BODY\r\n      const popupBody = document.createElement(\"div\");\r\n      popupBody.classList.add(\"popup-delete-ctg__body\");\r\n\r\n      // OPTION ONE : MOVE ENTRIES TO ANOTHER CATEGORY\r\n      const optionsWrapperOne = document.createElement(\"div\");\r\n      const categoryNames = store.getAllCtgNames();\r\n      optionsWrapperOne.classList.add(\"popup-delete-ctg__options\");\r\n      optionsWrapperOne.classList.add(\"popup-delete-act\")\r\n      optionsWrapperOne.style.backgroundColor = offsetColor;\r\n      optionsWrapperOne.style.border = `2px solid ${ctgcolor}`\r\n      const optionMoveRadio = document.createElement(\"input\");\r\n      optionMoveRadio.setAttribute(\"type\", \"radio\");\r\n      optionMoveRadio.setAttribute(\"name\", \"popup-delete-ctg__option\");\r\n      optionMoveRadio.setAttribute(\"id\", \"ctg-move\");\r\n      optionMoveRadio.setAttribute(\"checked\", \"true\")\r\n\r\n      const optionMove = document.createElement(\"div\");\r\n      const optionMoveTitle = document.createElement(\"span\");\r\n      const optionMoveSelect = document.createElement(\"select\");\r\n      optionMove.classList.add(\"popup-delete-ctg__option--move\");\r\n      optionMoveTitle.textContent = `Move \"${ctgname}\" ${ord} to `;\r\n      optionMoveSelect.classList.add(\"popup-delete-ctg__option--move-select\");\r\n      for (let i = 0; i < categoryNames.length; i++) {\r\n        if (categoryNames[i] === ctgname) continue;\r\n        const option = document.createElement(\"option\");\r\n        option.value = categoryNames[i];\r\n        option.textContent = categoryNames[i];\r\n        optionMoveSelect.appendChild(option);\r\n      }\r\n      optionMove.append(optionMoveTitle, optionMoveSelect);\r\n      optionsWrapperOne.append(optionMoveRadio, optionMove);\r\n\r\n\r\n      /* ************ */\r\n      // OPTION TWO : REMOVE CATEGORY AND ENTRIES\r\n      const optionsWrapperTwo = document.createElement(\"div\");\r\n      optionsWrapperTwo.classList.add(\"popup-delete-ctg__options\");\r\n      optionsWrapperTwo.style.border = `2px solid ${ctgcolor}`\r\n\r\n      const optionRemoveRadio = document.createElement(\"input\");\r\n      optionRemoveRadio.setAttribute(\"type\", \"radio\");\r\n      optionRemoveRadio.setAttribute(\"name\", \"popup-delete-ctg__option\");\r\n      optionRemoveRadio.setAttribute(\"id\", \"ctg-delete\");\r\n\r\n      const optionRemove = document.createElement(\"div\");\r\n      optionRemove.classList.add(\"popup-delete-ctg__option--remove\");\r\n      const optionRemoveTitle = document.createElement(\"span\");\r\n\r\n      optionRemoveTitle.textContent = `Delete \"${ctgname}\" and ${categoryLength} ${ord} (irreversible)`;\r\n      const optionRemoveIcon = createTrashIcon(ctgcolor);\r\n      const handleWrapperClick = (e) => {\r\n        if (e.target.id === \"ctg-delete\" || e.target.id === \"ctg-move\" || e.target.classList.contains(\"popup-delete-ctg__option--move\") || e.target.classList.contains(\"popup-delete-ctg__option--move-select\")) {\r\n          return;\r\n        } else {\r\n          e.target.closest(\".popup-delete-ctg__options\").querySelector(\"input\").checked = true;\r\n          document.querySelectorAll(\".popup-delete-ctg__options\").forEach((el) => {\r\n            // el.style.backgroundColor = \"transparent\";\r\n            el.setAttribute(\"style\", `background-color: transparent; border: 2px solid ${ctgcolor};`)\r\n            el.classList.remove(\"popup-delete-act\")\r\n          })\r\n          // popup-delete-act\r\n          e.target.closest(\".popup-delete-ctg__options\").setAttribute(\"style\", `background-color: ${offsetColor}; border: 2px solid ${ctgcolor};`)\r\n\r\n          e.target.closest(\".popup-delete-ctg__options\").classList.add(\"popup-delete-act\")\r\n        }\r\n      }\r\n\r\n      optionRemove.append(optionRemoveTitle, optionRemoveIcon)\r\n      optionsWrapperTwo.append(optionRemoveRadio, optionRemove);\r\n\r\n      popupBody.append(optionsWrapperOne, optionsWrapperTwo);\r\n      popupBox.appendChild(popupBody)\r\n      optionsWrapperOne.onclick = handleWrapperClick;\r\n      optionsWrapperTwo.onclick = handleWrapperClick;\r\n    }\r\n\r\n\r\n    /* **************************** */\r\n    // POPUP FOOTER\r\n    const popupFooter = document.createElement(\"div\");\r\n    popupFooter.classList.add(\"popup-delete-ctg__footer\");\r\n    const btncancel = document.createElement(\"button\");\r\n    btncancel.textContent = \"cancel\"\r\n    btncancel.classList.add(\"popup-delete-ctg__btn--cancel\");\r\n    btncancel.style.backgroundColor = offsetColor;\r\n    const btnproceed = document.createElement(\"button\");\r\n    btnproceed.classList.add(\"popup-delete-ctg__btn--proceed\");\r\n    btnproceed.textContent = \"proceed\"\r\n    /* **************************** */\r\n    popupFooter.append(btncancel, btnproceed);\r\n    popupBox.appendChild(popupFooter)\r\n    document.body.append(popupBoxOverlay, popupBox);\r\n\r\n    // EVENT LISTENERS\r\n    store.addActiveOverlay(\"popup-delete-ctg__overlay\")\r\n    const closeDeletePopupOnEscape = (e) => {\r\n      if (e.key === \"Escape\") closeDeletePopup()\r\n    }\r\n\r\n    const closeDeletePopup = () => {\r\n      popupBox.remove()\r\n      popupBoxOverlay.remove()\r\n      store.removeActiveOverlay(\"popup-delete-ctg__overlay\")\r\n      document.removeEventListener(\"keydown\", closeDeletePopupOnEscape)\r\n    }\r\n\r\n    const proceedDeletePopup = () => {\r\n      if (!noEntries) {\r\n        const selectedOption = document?.querySelector(\"input[name='popup-delete-ctg__option']:checked\").id\r\n        const selectedCategory = document.querySelector(\".popup-delete-ctg__option--move-select\").value\r\n        if (selectedOption === \"ctg-move\") {\r\n          store.moveCategoryEntriesToNewCategory(\r\n            ctgname, selectedCategory\r\n          );\r\n        } else if (selectedOption === \"ctg-delete\") {\r\n          store.removeCategoryAndEntries(ctgname)\r\n        }\r\n      } else {\r\n        store.deleteCategory(ctgname)\r\n      }\r\n\r\n      closeDeletePopup()\r\n      updateComponent()\r\n      renderSidebarDatepickerCtg()\r\n      renderCategories()\r\n    }\r\n\r\n    btnproceed.onclick = proceedDeletePopup\r\n    popupBoxOverlay.onclick = closeDeletePopup\r\n    btncancel.onclick = closeDeletePopup\r\n    document.addEventListener(\"keydown\", closeDeletePopupOnEscape)\r\n  }\r\n\r\n  function handleCategorySelection(e) {\r\n    let checkbox = e.target.children[0].children[0]\r\n    let status = checkbox.getAttribute(\"data-sbch-checked\")\r\n    let cat = checkbox.getAttribute(\"data-sbch-category\")\r\n    let color = store.getCtgColor(cat)\r\n    if (status === \"true\") {\r\n      checkbox.setAttribute(\"data-sbch-checked\", \"false\")\r\n      store.setCategoryStatus(cat, false)\r\n      checkbox.style.backgroundColor = \"var(--black1)\"\r\n      checkbox.firstChild.setAttribute(\"fill\", \"none\")\r\n    } else {\r\n      checkbox.setAttribute(\"data-sbch-checked\", \"true\")\r\n      store.setCategoryStatus(cat, true)\r\n      checkbox.style.backgroundColor = color\r\n      checkbox.firstChild.setAttribute(\"fill\", \"var(--taskcolor0)\")\r\n    }\r\n    renderSidebarDatepickerCtg()\r\n    updateComponent()\r\n  }\r\n\r\n  function openCategoryOptionsMenu(e, data) {\r\n    const [targetCtg, targetElement] = data;\r\n    let [x, y] = placePopup(\r\n      192,\r\n      128,\r\n      [\r\n        e.clientX, \r\n        parseInt(targetElement.getBoundingClientRect().top) - 8\r\n      ],\r\n      [window.innerWidth, window.innerHeight],\r\n      false,\r\n      null\r\n    )\r\n\r\n    const popupBox = document.createElement(\"div\");\r\n    popupBox.classList.add(\"popup-ctg-options\");\r\n    popupBox.style.top = `${y}px`;\r\n    popupBox.style.left = `${x}px`;\r\n    const popupBoxOverlay = document.createElement(\"div\");\r\n    popupBoxOverlay.classList.add(\"popup-ctg-options__overlay\");\r\n    store.addActiveOverlay(\"popup-ctg-options__overlay\");\r\n\r\n    const optionEdit = document.createElement(\"div\");\r\n    optionEdit.classList.add(\"option__open-ctg-edit\");\r\n    optionEdit.textContent = \"Edit category (name, color)\";\r\n    const optionTurnOff = document.createElement(\"div\");\r\n    optionTurnOff.classList.add(\"option__close-other-ctg\");\r\n    optionTurnOff.textContent = \"Display this only\";\r\n    const optionTurnOn = document.createElement(\"div\")\r\n    optionTurnOn.classList.add(\"option__open-other-ctg\");\r\n    optionTurnOn.textContent = \"Display all but this\";\r\n\r\n    function closeCategoryOptionsMenu(flag, chckbox) {\r\n      document.querySelector(\".popup-ctg-options\").remove()\r\n      document.querySelector(\".popup-ctg-options__overlay\").remove()\r\n      store.removeActiveOverlay(\"popup-ctg-options__overlay\");\r\n      if (flag) { chckbox.removeAttribute(\"style\") }\r\n      document.removeEventListener(\"keydown\", handleCloseOnEscapeCtgOptionsMenu)\r\n    }\r\n\r\n    function handleOpenEditCtg() {\r\n      createCategoryForm(store, targetCtg, true, targetElement);\r\n      closeCategoryOptionsMenu();\r\n    }\r\n\r\n    function rerender() {\r\n      renderSidebarDatepickerCtg();\r\n      updateComponent();\r\n      renderCategories();\r\n    }\r\n\r\n    function closeAndRemoveStyle() {\r\n      closeCategoryOptionsMenu(true, targetElement)\r\n    }\r\n\r\n    function turnoff() {\r\n      store.setAllCategoryStatusExcept(targetCtg.name, false)\r\n      closeAndRemoveStyle();\r\n      rerender();\r\n    }\r\n\r\n    function turnon() {\r\n      store.setAllCategoryStatusExcept(targetCtg.name, true)\r\n      closeAndRemoveStyle();\r\n      rerender();\r\n    }\r\n\r\n    function handleCloseOnEscapeCtgOptionsMenu(e) {\r\n      if (e.key === \"Escape\") { closeAndRemoveStyle(); }\r\n    }\r\n\r\n    popupBox.append(optionEdit, optionTurnOff, optionTurnOn);\r\n    document.body.prepend(popupBoxOverlay, popupBox);\r\n    document.addEventListener(\"keydown\", handleCloseOnEscapeCtgOptionsMenu);\r\n    optionEdit.onclick = handleOpenEditCtg;\r\n    popupBoxOverlay.onclick = closeAndRemoveStyle;\r\n    optionTurnOff.onclick = turnoff;\r\n    optionTurnOn.onclick = turnon;\r\n  }\r\n\r\n  function delegateCategoryEvents(e) {\r\n    const ctgtoggleModal = getClosest(e, \".sbch-col__one\")\r\n    const editctgBtn = getClosest(e, \".sbch-col--actions__edit-icon\")\r\n    const deletectgBtn = getClosest(e, \".sbch-col--actions__delete-icon\")\r\n    const ctgChck = getClosest(e, \".sbch-form--item__col\")\r\n    const ctgPlus = getClosest(e, \".sbch-plus\")\r\n\r\n    if (ctgtoggleModal) {\r\n      handleCategoryModalToggle()\r\n      return;\r\n    }\r\n\r\n    // open category options menu (edit, turn others off, turn others on)\r\n    if (editctgBtn) {\r\n      const targetcat = {\r\n        name: e.target.getAttribute(\"data-sbch-category\"),\r\n        color: e.target.getAttribute(\"data-sbch-color\"),\r\n      }\r\n      const targetparent = e.target.parentElement.parentElement\r\n      targetparent.style.borderBottom = `2px solid ${targetcat.color}`\r\n      openCategoryOptionsMenu(\r\n        e, [targetcat, targetparent]\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (deletectgBtn) {\r\n      createDeleteCategoryPopup(e)\r\n      return;\r\n    }\r\n\r\n    // toggle category checkbox and display entries\r\n    if (ctgChck) {\r\n      handleCategorySelection(e)\r\n      return;\r\n    }\r\n\r\n    // create popup with category creation form\r\n    if (ctgPlus) {\r\n      const targetcat = {\r\n        name: \"new category\",\r\n        color: \"#2C52BA\",\r\n      }\r\n      createCategoryForm(store, targetcat, false, null);\r\n      return;\r\n    }\r\n  }\r\n\r\n  const initSidebarCategories = () => {\r\n    renderCategories()\r\n    const fullCtgRender = () => {\r\n      renderCategories();\r\n      updateComponent();\r\n    }\r\n    store.setRenderCategoriesCallback(fullCtgRender)\r\n    sidebarColTwo.onmousedown = delegateCategoryEvents\r\n  }\r\n  initSidebarCategories();\r\n}","import { getDateForStore } from \"../../utilities/dateutils\";\r\nimport setViews from \"../../config/setViews\";\r\nimport { getClosest } from \"../../utilities/helpers\"\r\n\r\n\r\nconst datepicker = document.querySelector(\".datepicker-sidebar\");\r\nconst datepickerBody = document.querySelector(\".sbdatepicker__body--dates\");\r\nconst datepickerTitle = document.querySelector(\".sbdatepicker-title\");\r\n\r\nconst sbdatepickerChangeDate = document.querySelector(\".sb-datepicker-change-date\")\r\n\r\nconst sbyearpickerTitle = document.querySelector(\".sb-yearpicker-title\")\r\nconst sbmonthpickerMonths = document.querySelectorAll(\".sb-monthpicker__month\");\r\nexport default function setSidebarDatepicker(context, store, datepickerContext) {\r\n\r\n  datepickerContext.setDate(\r\n    context.getYear(), \r\n    context.getMonth(), \r\n    context.getDay()\r\n  );\r\n\r\n  let montharray = datepickerContext.getMonthArray();\r\n  let groupedEntries = store.getMonthEntryDates(montharray);\r\n  let currentWeekStart = context.getWeek();\r\n  let hasweek = false;\r\n  let count = 0;\r\n  let [checkmonth, checkyear] = [null, null];\r\n\r\n  function setDatepickerHeader() {\r\n    const month = datepickerContext.getMonthName()\r\n    const year = datepickerContext.getYear()\r\n    datepickerTitle.textContent = `${month} ${year}`\r\n  }\r\n\r\n  function createCells(montharray) {\r\n    datepickerBody.innerText = \"\";\r\n    const component = context.getComponent();\r\n\r\n    for (let i = 0; i < montharray.length; i++) {\r\n      const cell = document.createElement(\"div\");\r\n      const datename = document.createElement(\"div\");\r\n      cell.classList.add(\"sbdatepicker__body--dates-cell\");\r\n      datename.classList.add(\"sbdatepicker__body--datename\");\r\n\r\n      if (montharray[i].getMonth() !== datepickerContext.getMonth()) {\r\n        datename.classList.add(\"sbdatepicker__body--datename-disabled\");\r\n      }\r\n\r\n      if (component === \"week\") {\r\n        if (currentWeekStart.getDate() === montharray[i].getDate()) {\r\n          if (currentWeekStart.getMonth() === montharray[i].getMonth()) {\r\n            if (currentWeekStart.getFullYear() === montharray[i].getFullYear()) {\r\n            hasweek = true;\r\n            } \r\n          }\r\n        } \r\n      } \r\n\r\n      if (hasweek) {\r\n        count++\r\n        if (count <= 7) {\r\n          cell.classList.add(\"sbdatepicker__body--dates-week\")\r\n        }\r\n      } else {\r\n        cell.classList.remove(\"sbdatepicker__body--dates-week\")\r\n      }\r\n\r\n      if (context.isToday(montharray[i])) {\r\n        datename.setAttribute(\"class\", \"sbdatepicker__body--datename\")\r\n        datename.classList.add(\"sbdatepicker__body--datename-today\");\r\n      }\r\n\r\n      if (montharray[i].getDate() === context.getDateSelected() && montharray[i].getMonth() === datepickerContext.getMonth()) {\r\n        if (!datename.classList.contains(\"sbdatepicker__body--datename-today\")) {\r\n          datename.setAttribute(\"class\", \"sbdatepicker__body--datename\")\r\n          datename.classList.add(\"sbdatepicker__body--datename-selected\");\r\n        }\r\n      }\r\n\r\n      datename.textContent = montharray[i].getDate();\r\n      const formattedDate = getDateForStore(montharray[i])\r\n      datename.setAttribute(\"data-datepicker-date\", formattedDate);\r\n      if (groupedEntries.includes(formattedDate)) {\r\n        if (!datename.classList.contains(\"sbdatepicker__body--datename-selected\") && !datename.classList.contains(\"sbdatepicker__body--datename-today\")) {\r\n          datename.setAttribute(\"class\", \"sbdatepicker__body--datename\")\r\n          datename.classList.add(\"sbdatepicker__body--datename-entries\")\r\n        }\r\n      } else {\r\n        datename.classList.remove(\"sbdatepicker__body--datename-entries\")\r\n      }\r\n\r\n      cell.appendChild(datename)\r\n      datepickerBody.appendChild(cell);\r\n    }\r\n  }\r\n\r\n  function resetpickerData() {\r\n    montharray = datepickerContext.getMonthArray()\r\n    groupedEntries = store.getMonthEntryDates(montharray)\r\n    currentWeekStart = context.getWeek()\r\n    count = 0;\r\n    hasweek = false;\r\n  }  \r\n\r\n  function renderpicker(y, m, d) {\r\n    context.setDate(y, m, d)\r\n    context.setDateSelected(d)\r\n    datepickerContext.setDate(y, m, d)\r\n    setViews(\r\n      context.getComponent(),\r\n      context,\r\n      store,\r\n      datepickerContext,\r\n    );\r\n\r\n    resetpickerData()\r\n    createCells(montharray)\r\n    setDatepickerHeader()\r\n    montharray = []\r\n  }\r\n\r\n  function renderSelectedDay(e, d) {\r\n    context.setDateSelected(d)\r\n    const selected = document.querySelectorAll(\".sbdatepicker__body--datename-selected\")\r\n    selected.forEach((x) => {\r\n      x.classList.remove(\"sbdatepicker__body--datename-selected\")\r\n    })\r\n    e.target.setAttribute(\"class\", \"sbdatepicker__body--datename\")\r\n    e.target.classList.add(\"sbdatepicker__body--datename-selected\")\r\n  }\r\n\r\n  function renderprevMonth() {\r\n    datepickerContext.setPrevMonth();\r\n    resetpickerData()\r\n    createCells(montharray);\r\n    setDatepickerHeader();\r\n    montharray = [];\r\n  }\r\n\r\n  function rendernextMonth() {\r\n    datepickerContext.setNextMonth();\r\n    resetpickerData()\r\n    createCells(montharray);\r\n    setDatepickerHeader();\r\n    montharray = [];\r\n  }\r\n\r\n\r\n  /**\r\n   * \r\n   * @param {*} e \r\n   * @description some extra steps required for the sidebar datepicker \r\n   * vs any other datepicker due to the fact that the sidebar datepicker will stay open after a date is selected.\r\n   * These extra steps include:\r\n   *  1. do not re render datepicker if the selected date is in the current month, just update the selected date\r\n   *  2. the one exception to above rule is if the component is the week view and the selected date is not in the current week, then re render the datepicker\r\n   *  3. if the component is in the list view (schedule), do not re render the view, just update the selected date\r\n   */\r\n  function setNewDate(e) {\r\n    const target = e.target;\r\n    let [y, m, d] = target.getAttribute(\"data-datepicker-date\").split('-').map(x => parseInt(x));\r\n\r\n    const component = context.getComponent()\r\n\r\n    if (component === \"list\") {\r\n      renderSelectedDay(e, d);\r\n      return;\r\n    }\r\n\r\n    if (component === \"year\") {\r\n      if (context.getYear() !== y) {\r\n        renderpicker(y, m, d);\r\n        return;\r\n      } else {\r\n        renderSelectedDay(e, d);\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (component === \"month\") {\r\n      if (context.getMonth() !== m) {\r\n        renderpicker(y, m, d);\r\n        return;\r\n      } else {\r\n        renderSelectedDay(e, d);\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (component === \"week\") {\r\n      if (e.target.parentElement.classList.contains(\"sbdatepicker__body--dates-week\")) {\r\n        renderSelectedDay(e, d);\r\n        return;\r\n      } else {\r\n        renderpicker(y, m, d);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (component === \"day\") {\r\n      if (context.isToday(new Date(y, m, d))) {\r\n        renderSelectedDay(e, d);\r\n        return;\r\n      } else {\r\n        renderpicker(y, m, d);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  function setCheckMonthYear() {\r\n    checkmonth = datepickerContext.getMonth()\r\n    checkyear = datepickerContext.getYear()\r\n  }\r\n\r\n  function getMonthYearCheck() {\r\n    return checkmonth === datepickerContext.getMonth() && checkyear === datepickerContext.getYear()\r\n  }\r\n\r\n  function openChangeDateModal() {\r\n    setCheckMonthYear()\r\n    sbdatepickerChangeDate.classList.add(\"show-sbdpcd\")\r\n    yearpickerSetYear(null, true);\r\n    monthpickerSetMonth(datepickerContext.getMonth(), true);\r\n  }\r\n\r\n\r\n  function closeChangeDateModal() {\r\n    // check if date has changed;\r\n    if (!getMonthYearCheck()) {\r\n      resetpickerData()\r\n      createCells(montharray);\r\n      setDatepickerHeader();\r\n      montharray = [];\r\n    }\r\n    sbdatepickerChangeDate.classList.remove(\"show-sbdpcd\");\r\n  }\r\n\r\n  function monthpickerSetMonth(val, init) {\r\n    const newmonth = val;\r\n\r\n    if (!init && newmonth === datepickerContext.getMonth()) return;\r\n    datepickerContext.setMonth(newmonth);\r\n    sbmonthpickerMonths.forEach((month, idx) => {\r\n      if (idx === newmonth) {\r\n        month.classList.add(\"monthpicker__active-month\")\r\n      } else {\r\n        month.classList.remove(\"monthpicker__active-month\")\r\n      }\r\n    })\r\n  }\r\n  \r\n  function yearpickerSetYear(increment, init) {\r\n    if (init) {\r\n      sbyearpickerTitle.textContent = datepickerContext.getYear();\r\n      return;\r\n    }\r\n\r\n    const newyear = parseInt(datepickerContext.getYear()) + increment;\r\n    if (newyear == +datepickerContext.getYear()) return;\r\n    datepickerContext.setYear(newyear);\r\n    sbyearpickerTitle.textContent = newyear;\r\n  }\r\n\r\n  function delegateDatepickerEvents(e) {\r\n    const datenumber = getClosest(e, \".sbdatepicker__body--datename\")\r\n    const navnext = getClosest(e, \".sbdatepicker-nav--next\")\r\n    const navprev = getClosest(e, \".sbdatepicker-nav--prev\")\r\n    const title = getClosest(e, \".sbdatepicker-title\");\r\n    const closeChangeDateBtn = getClosest(e, \".sb-close-change-date\");\r\n    const ypNext = getClosest(e, \".sb-yearpicker-next\");\r\n    const ypPrev = getClosest(e, \".sb-yearpicker-prev\");\r\n    const mpMonth = getClosest(e, \".sb-monthpicker__month\");\r\n\r\n    if (datenumber) {\r\n      setNewDate(e);\r\n      return;\r\n    }\r\n\r\n    if (navnext) {\r\n      rendernextMonth();\r\n      return;\r\n    }\r\n\r\n    if (navprev) {\r\n      renderprevMonth();\r\n      return;\r\n    }\r\n\r\n    if (datenumber) {\r\n      setNewDate(e);\r\n      return;\r\n    }\r\n\r\n    if (title) {\r\n      openChangeDateModal();\r\n      return;\r\n    }\r\n\r\n    if (closeChangeDateBtn) {\r\n      closeChangeDateModal();\r\n      return;\r\n    }\r\n\r\n    if (ypNext) {\r\n      yearpickerSetYear(1, false);\r\n      return;\r\n    }\r\n\r\n    if (ypPrev) {\r\n      yearpickerSetYear(-1, false);\r\n      return;\r\n    }\r\n\r\n    if (mpMonth) {\r\n      const newmonth = parseInt(e.target.getAttribute(\"data-sbdp-month\"))\r\n      monthpickerSetMonth(newmonth, false);\r\n      return;\r\n    }\r\n  }\r\n\r\n  const initsbdatepicker = () => {\r\n    sbdatepickerChangeDate.classList.remove(\"show-sbdpcd\");\r\n    setDatepickerHeader();\r\n    createCells(montharray);\r\n    datepicker.onmousedown = delegateDatepickerEvents;\r\n    montharray = [];\r\n  }\r\n  initsbdatepicker();\r\n}","import {getClosest} from \"../../utilities/helpers\"\r\n\r\nconst sidebarFooter = document.querySelector(\".sb__info\")\r\n\r\n// popup containing : project notes, privacy policy, & terms of use\r\nconst sbInfoPopup = document.querySelector(\".sb__info-popup\")\r\nconst sbInfoPopupOverlay = document.querySelector(\".sb__info-popup-overlay\")\r\nconst selectInfo = document.querySelector(\".select-popup-info\")\r\nconst closePopupButton = document.querySelector(\".close-sb-info\")\r\nconst infopopupTitle = document.querySelector(\".sbip-title\")\r\nconst infopopupBody = document.querySelector(\".sbip-content\")\r\n\r\n\r\nexport default function handleSidebarFooter(store) {\r\n\r\n  const infoContent = {\r\n    notes: {\r\n      title: \"Breakdown of project & current status\",\r\n      content: \"These are my project notes\",\r\n    },\r\n    privacy: {\r\n      title: \"Cookies and Data Privacy\",\r\n      content: \"This project uses an open source license\",\r\n    },\r\n    terms: {\r\n      title: \"Code license and terms of use\",\r\n      content: \"All data is stored locally meaning no data is sent to a server.\"\r\n    },\r\n  }\r\n\r\n  function closeInfoPopup() {\r\n    store.removeActiveOverlay(\"hide-sb-info-popup\")\r\n    sbInfoPopup.classList.add(\"hide-sb-info-popup\")\r\n    sbInfoPopupOverlay.classList.add(\"hide-sb-info-popup\")\r\n    document.removeEventListener(\"keydown\", closeInfoPopupOnEscape)\r\n  }\r\n\r\n  function setInfoContent(selection) {\r\n    infopopupTitle.innerText = infoContent[selection].title;\r\n    infopopupBody.innerText = infoContent[selection].content;\r\n  }\r\n\r\n  function handleSelectInfoChange(e) {\r\n    const selection = e.target.value;\r\n    setInfoContent(selection)\r\n  }\r\n\r\n  function closeInfoPopupOnEscape(e) {\r\n    if (e.key === \"Escape\") {\r\n      closeInfoPopup()\r\n    }\r\n  }\r\n\r\n  function setUpInfoPopup() {\r\n    setInfoContent(selectInfo.value)\r\n    selectInfo.onchange = handleSelectInfoChange\r\n    sbInfoPopupOverlay.onclick = closeInfoPopup\r\n    closePopupButton.onclick = closeInfoPopup\r\n    document.addEventListener(\"keydown\", closeInfoPopupOnEscape)\r\n  }\r\n\r\n  function openInfoPopup(selection) {\r\n    const selections = ['notes', 'privacy', 'terms']\r\n    const idx = selections.indexOf(selection)\r\n    selectInfo.selectedIndex = idx;\r\n\r\n    store.addActiveOverlay(\"hide-sb-info-popup\")\r\n    sbInfoPopup.classList.remove(\"hide-sb-info-popup\")\r\n    sbInfoPopupOverlay.classList.remove(\"hide-sb-info-popup\")\r\n    setUpInfoPopup()\r\n  }\r\n\r\n  function delegateSidebarFooterEvents(e) {\r\n    const projectNotes = getClosest(e, \".sb__project-notes\");\r\n    const privacy = getClosest(e, \".sb__privacy\");\r\n    const terms = getClosest(e, \".sb__terms\");\r\n\r\n    if (projectNotes) {\r\n      openInfoPopup(\"notes\")\r\n      return;\r\n    }\r\n\r\n    if (privacy) {\r\n      openInfoPopup(\"privacy\")\r\n      return;\r\n    }\r\n\r\n    if (terms) {\r\n      openInfoPopup(\"terms\")\r\n      return;\r\n    }\r\n  }\r\n\r\n  sidebarFooter.onmousedown = delegateSidebarFooterEvents\r\n}","import { getClosest, setTheme } from \"../../utilities/helpers\";\r\nimport { createTimestamp } from \"../../utilities/dateutils\";\r\nimport handleShortCutsModal from \"./shortcutsModal\";\r\n\r\n\r\n\r\nconst sidebarSubMenuOverlay = document.querySelector('.sidebar-sub-menu__overlay');\r\nconst sidebarSubMenu = document.querySelector('.sidebar-sub-menu');\r\nconst closeSubMenuBtn = document.querySelector('.close-sub-menu');\r\nconst closemenu = \"hide-sidebar-sub-menu\";\r\nconst appBody = document.querySelector(\".body\");\r\n\r\n// dark, light, contrast\r\nconst themeRadioBtns = document.querySelectorAll(\".theme-radio__input\");\r\nconst themeRadioOptions = [\"dark\", \"light\", \"contrast\"];\r\n\r\n// keyboard shortcut toggle on/off | open modal\r\nconst shortcutSwitch = document.querySelector(\".smia-toggle-shortcuts-checkbox\")\r\nconst animationsSwitchBtn = document.querySelector(\".smdt-toggle-checkbox\")\r\n// const animationsIcon = document.querySelector(\".toggle-animations-icon__sm\");\r\nconst shortcutTitle = document.querySelector(\".smia-set-status-title\")\r\nconst notifyDisabledShortcutsIcon = document.querySelector(\".keyboard-disabled-sm\")\r\n\r\n\r\nexport default function getSidebarSubMenu(store, context) {\r\n\r\n  function closeSubOnEscape(e) {\r\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\r\n    if (e.key === \"Escape\") {\r\n      if (popup) {\r\n        popup.remove()\r\n        sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\")\r\n        return;\r\n      } else {\r\n        closeSubMenu()\r\n        sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\")\r\n      }\r\n    }\r\n    if (e.key.toLowerCase() === \"a\") {\r\n      if (popup) {\r\n        return;\r\n      } else {\r\n        closeSubMenu()\r\n      }\r\n    }\r\n  }\r\n\r\n  function createUploadConfirmationPopup() {\r\n    const popup = document.createElement(\"div\");\r\n    popup.classList.add(\"sb-sub-popup-confirm\");\r\n    const [totalEntries, totalCategories] = store.getStoreStats()\r\n    \r\n\r\n    // let totals;\r\n    let [hasEntries, hasCategories] = [false, false]\r\n    let titleEntries;\r\n    if (totalEntries > 0) {\r\n      hasEntries = `Overwriting ${totalEntries} entries`;\r\n    }\r\n    if (totalCategories > 1) {\r\n      if (totalCategories === 2) {\r\n        hasCategories = \"1 category.\"\r\n      } else {\r\n        hasCategories = `${+totalCategories - 1} categories.`;\r\n      }\r\n    }\r\n\r\n    if (hasEntries && hasCategories) {\r\n      titleEntries = `${hasEntries} and ${hasCategories}`\r\n    } else if (hasEntries && !hasCategories) {\r\n      titleEntries = `${hasEntries}.`\r\n    } else if (!hasEntries && hasCategories) {\r\n      titleEntries = `No entries. Overwriting ${hasCategories}`\r\n    } else {\r\n      titleEntries = \"Current calendar has no entries or categories.\"\r\n    }\r\n\r\n\r\n    const subtitle = document.createElement(\"div\")\r\n    subtitle.classList.add(\"sb-sub-popup-subtitle\")\r\n    subtitle.textContent = titleEntries;\r\n    const subtitle2 = document.createElement(\"div\")\r\n    subtitle2.classList.add(\"sb-sub-popup-subtitle\")\r\n    subtitle2.textContent = 'This action is irreversible.'\r\n    const subtitle3 = document.createElement(\"div\")\r\n    subtitle3.classList.add(\"sb-sub-popup-title\")\r\n    subtitle3.textContent = 'Please ensure you have a valid backup before proceeding. Use the \"validate .json\" button next to \"upload .json\" to check that everything is in order.'\r\n    \r\n    const btns = document.createElement(\"div\");\r\n    btns.classList.add(\"sb-sub-popup-btns\");\r\n    const cancelBtn = document.createElement(\"button\");\r\n    cancelBtn.classList.add(\"sb-sub-popup-btn--cancel\");\r\n    cancelBtn.textContent = \"Cancel\";\r\n    const proceedBtn = document.createElement(\"button\");\r\n    proceedBtn.classList.add(\"sb-sub-popup-btn--proceed\")\r\n    proceedBtn.textContent = \"Proceed\";\r\n\r\n    btns.append(cancelBtn, proceedBtn);\r\n    popup.append(\r\n      subtitle, \r\n      subtitle2, \r\n      subtitle3, \r\n      btns\r\n    );\r\n    return popup\r\n  }\r\n\r\n  function closeSubMenu() {\r\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\r\n    if (popup) {\r\n      popup.remove()\r\n      sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\")\r\n      return;\r\n    } else {\r\n      store.removeActiveOverlay(closemenu)\r\n      sidebarSubMenu.classList.add(closemenu)\r\n      sidebarSubMenuOverlay.classList.add(closemenu);\r\n      document.removeEventListener(\"keydown\", closeSubOnEscape);\r\n    }\r\n  }\r\n\r\n  function setStatusIcon(status) {\r\n    if (status) {\r\n      notifyDisabledShortcutsIcon.setAttribute(\"data-tooltip\", \"Keyboard shortcuts enabled\")\r\n      notifyDisabledShortcutsIcon.firstElementChild.setAttribute(\"fill\", \"var(--primary1)\")\r\n    } else {\r\n      notifyDisabledShortcutsIcon.setAttribute(\"data-tooltip\", \"Keyboard shortcuts disabled\")\r\n      notifyDisabledShortcutsIcon.firstElementChild.setAttribute(\"fill\", \"var(--red1)\")\r\n    }\r\n  }\r\n\r\n  function openSubMenu() {\r\n    // configure current active status of theme radio btns\r\n    const themeIdx = themeRadioOptions.indexOf(context.getColorScheme())\r\n    themeRadioBtns[themeIdx].checked = true;\r\n\r\n\r\n    const shortcutStatus = store.getShortcutsStatus();\r\n    setStatusIcon(shortcutStatus);\r\n    shortcutSwitch.checked = shortcutStatus;\r\n\r\n\r\n    const animationStatus = store.getAnimationStatus()\r\n    setAnimationsIcons(animationStatus);\r\n    animationsSwitchBtn.checked = animationStatus;\r\n\r\n\r\n    store.addActiveOverlay(closemenu);\r\n    sidebarSubMenu.classList.remove(closemenu);\r\n    sidebarSubMenuOverlay.classList.remove(closemenu);\r\n\r\n    document.addEventListener(\"keydown\", closeSubOnEscape);\r\n    sidebarSubMenuOverlay.onclick = closeSubMenu;\r\n    closeSubMenuBtn.onclick = closeSubMenu;\r\n  }\r\n\r\n  function getJSONUpload(e) {\r\n    const file = document.createElement(\"input\");\r\n    file.type = \"file\";\r\n    file.accept = \"application/json\";\r\n    file.onchange = (e) => {\r\n      const file = e.target.files[0];\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        const json = JSON.parse(e.target.result);\r\n        store.setUserUpload(json)\r\n        closeSubMenu();\r\n      };\r\n      reader.readAsText(file);\r\n    };\r\n    document.body.appendChild(file);\r\n    file.click();\r\n    document.body.removeChild(file);\r\n    closeSubMenu();\r\n    return;\r\n  }\r\n\r\n  function getJSONDownload() {\r\n    const json = JSON.stringify(localStorage)\r\n    const [totalEntries, totalCategories] = store.getStoreStats()\r\n    const filename = `ENT_${totalEntries}_CAT_${totalCategories}_${createTimestamp()}`;\r\n    const blob = new Blob([json], { type: \"application/json\" });\r\n    const href = URL.createObjectURL(blob);\r\n    const link = document.createElement(\"a\");\r\n    link.href = href;\r\n    link.download = filename + \".json\";\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n\r\n  function removePopup() {\r\n    sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\")\r\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\r\n    if (popup) {\r\n      popup.remove()\r\n    }\r\n  }\r\n\r\n  function handleCalendarJSON(action) {\r\n    if (action === \"download\") {\r\n      getJSONDownload()\r\n      return;\r\n    }\r\n\r\n    if (action === \"upload\") {\r\n      // create popup to warn user that they are about to overwrite all calendar data\r\n      const popup = createUploadConfirmationPopup();\r\n      document.body.appendChild(popup);\r\n      sidebarSubMenuOverlay.classList.add(\"sub-overlay-vis\");\r\n      // cancel will close popup but keep open sidebar sub menu\r\n      // \"Escape\" key will also close popup but keep open sidebar sub menu\r\n      // \"a\" key will be temporarily disabled while popup is open\r\n      const cancelBtn = popup.querySelector(\".sb-sub-popup-btn--cancel\");\r\n      const proceedBtn = popup.querySelector(\".sb-sub-popup-btn--proceed\");\r\n      cancelBtn.onclick = removePopup;\r\n      proceedBtn.onclick = getJSONUpload;\r\n\r\n      // if user clicks proceed, create blob to open user's local file system\r\n      // const handleProceed = (e) => {\r\n      //   cancelBtn.classList.add(\"hide-cancel-btn\");\r\n      //   let proceedBtnText = \"Waiting for file upload\";\r\n      //   setTimeout(() => {\r\n      //     console.log(\"waiting for file upload\");\r\n      //     proceedBtnText += \".\";\r\n      //     proceedBtn.textContent = proceedBtnText;\r\n      //     if (proceedBtnText.length > 20) {\r\n      //       proceedBtnText = \"Waiting for file upload\";\r\n      //     }\r\n      //   }, 2000);\r\n      //   getJSONUpload(e);\r\n      // }\r\n\r\n\r\n      // check if user has cancelled out of their file explorer\r\n      // const checkForUpload = setInterval(() => {\r\n      //   const userUpload = store.getUserUpload()\r\n      //   if (userUpload) {\r\n      //     clearInterval(checkForUpload);\r\n      //     popup.remove();\r\n      //     sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\r\n      //     store.clearUserUpload()\r\n      //     return;\r\n      //   } else {\r\n      //   }\r\n      // })\r\n    }\r\n  }\r\n\r\n  function handleThemeChange(e) {\r\n    const target = e.target;\r\n    const targetinput = target.firstElementChild;\r\n    const value = targetinput.value\r\n    targetinput.checked = true;\r\n    const currentTheme = context.getColorScheme()\r\n    if (value === currentTheme) {\r\n      return;\r\n    }\r\n    context.setColorScheme(value);\r\n    setTheme(context);\r\n  }\r\n\r\n  function openKbShortcutMenu() {\r\n    closeSubMenu()\r\n    handleShortCutsModal(store)\r\n  }\r\n\r\n  function toggleShortcuts() {\r\n    const status = shortcutSwitch.checked ? false : true;\r\n    store.setShortcutsStatus(status)\r\n    setStatusIcon(status)\r\n  }\r\n\r\n  function toggleShortcutsIcon() {\r\n    let status = store.getShortcutsStatus()\r\n\r\n    status = !status\r\n    store.setShortcutsStatus(status)\r\n    setStatusIcon(status)\r\n    shortcutSwitch.checked = status ? true : false;\r\n  }\r\n\r\n  function setAnimationsIcons(val) {\r\n    const parenticonwrapper = document.querySelector(\".toggle-animations-icon__sm\")\r\n    const icons = {\r\n      on: document.querySelector(\".tai-on\"),\r\n      off: document.querySelector(\".tai-off\"),\r\n    }\r\n\r\n    if (val) {\r\n      icons.on.classList.remove(\"hide-tai\")\r\n      icons.off.classList.add(\"hide-tai\")\r\n      parenticonwrapper.setAttribute(\"data-tooltip\", \"Animations Enabled\");\r\n    } else {\r\n      icons.on.classList.add(\"hide-tai\")\r\n      icons.off.classList.remove(\"hide-tai\")\r\n      parenticonwrapper.setAttribute(\"data-tooltip\", \"Animations Disabled\");\r\n    }\r\n  }\r\n\r\n  function toggleAnimations(fromicon) {\r\n    const status = animationsSwitchBtn.checked ? false : true;\r\n    store.setAnimationStatus(status)\r\n    setAnimationsIcons(status)\r\n    if (fromicon) {\r\n      animationsSwitchBtn.checked = status ? true : false;\r\n    }\r\n    if (status) {\r\n      appBody.classList.remove(\"disable-transitions\")\r\n    } else {\r\n      appBody.classList.add(\"disable-transitions\")\r\n    }\r\n  }\r\n\r\n  function delegateSubMenuEvents(e) {\r\n    const downloadjsonBtn = getClosest(e, \".down-json\");\r\n    const uploadjsonBtn = getClosest(e, \".upload-json\");\r\n    const themebtn = getClosest(e, \".theme-option\");\r\n    const kbShortcutMenu = getClosest(e, \".toggle-kb-shortcuts-btn__smia\")\r\n    const shortcutSwitch = getClosest(e, \".smia-disable-shortcuts__btn\")\r\n    const shortcutSwitchNotifyIcon = getClosest(e, \".keyboard-disabled-sm\")\r\n    const animationsSwitch = getClosest(e, \".smdt-toggle\")\r\n    const animationsIcon = getClosest(e, \".toggle-animations-icon__sm\")\r\n\r\n    if (downloadjsonBtn) {\r\n      handleCalendarJSON(\"download\");\r\n      return;\r\n    }\r\n\r\n    if (uploadjsonBtn) {\r\n      handleCalendarJSON(\"upload\");\r\n      return;\r\n    }\r\n\r\n    if (themebtn) {\r\n      handleThemeChange(e);\r\n      return;\r\n    }\r\n\r\n    if (kbShortcutMenu) {\r\n      openKbShortcutMenu();\r\n      return;\r\n    }\r\n\r\n    if (shortcutSwitch) {\r\n      toggleShortcuts();\r\n      return;\r\n    }\r\n\r\n    if (shortcutSwitchNotifyIcon) {\r\n      toggleShortcutsIcon();\r\n      return;\r\n    }\r\n\r\n    if (animationsSwitch) {\r\n      toggleAnimations();\r\n      return;\r\n    }\r\n\r\n    if (animationsIcon) {\r\n      toggleAnimations(true);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function setSidebarSubMenu() {\r\n    openSubMenu();\r\n    sidebarSubMenu.onmousedown = delegateSubMenuEvents;\r\n  }\r\n  setSidebarSubMenu()\r\n}","import {\r\n  createCloseIcon,\r\n} from \"../../utilities/svgs\"\r\n\r\nconst body = document.querySelector(\".body\");\r\nconst toastoverlay = document.querySelector(\".toast-overlay\")\r\n\r\nexport default function createToast(message, timeout, callback, callbackTwo, removeCallback, undoCallback) {\r\n  function closetoast() {\r\n    toastoverlay.classList.add(\"hide-toast-overlay\")\r\n    document.querySelector(\".toast\")?.remove()\r\n    if (removeCallback) {\r\n      removeCallback()\r\n    }\r\n  }\r\n  function undo() {\r\n    undoCallback()\r\n    closetoast()\r\n  }\r\n\r\n  function initToast() {\r\n    toastoverlay.classList.remove(\"hide-toast-overlay\")\r\n    const toast = document.createElement(\"aside\");\r\n    toast.classList.add(\"toast\");\r\n\r\n    const toastMessage = document.createElement(\"div\");\r\n    toastMessage.classList.add(\"toast-message\");\r\n    toastMessage.textContent = message;\r\n    \r\n    const closeIconWrapper = document.createElement(\"div\")\r\n    closeIconWrapper.classList.add(\"close-toast-icon-wrapper\")\r\n    closeIconWrapper.appendChild(createCloseIcon(\"var(--white4)\"))\r\n    closeIconWrapper.onclick = closetoast\r\n    \r\n    if (undoCallback) {\r\n      const undoToastWrapper = document.createElement(\"div\")\r\n      undoToastWrapper.classList.add(\"undo-toast-wrapper\")\r\n\r\n      const undoToastMessage = document.createElement(\"div\")\r\n      undoToastMessage.classList.add(\"undo-toast-message\")\r\n      undoToastMessage.textContent = \"Undo\"\r\n\r\n      undoToastWrapper.appendChild(undoToastMessage);\r\n      toast.append(toastMessage, undoToastWrapper, closeIconWrapper);\r\n\r\n      undoToastWrapper.onclick = undo\r\n\r\n    } else {\r\n      toast.append(toastMessage, closeIconWrapper);\r\n    }\r\n\r\n    body.insertBefore(toast, body.firstChild)\r\n\r\n    if (callback) {\r\n      callback()\r\n    }\r\n\r\n    if (callbackTwo) {\r\n      callbackTwo()\r\n    }\r\n  }\r\n\r\n  initToast()\r\n  toastoverlay.onclick = closetoast\r\n\r\n  if (!timeout) {\r\n    timeout = 1000\r\n  } \r\n  setTimeout(() => {\r\n    closetoast()\r\n  }, timeout)\r\n}","const overlay = document.querySelector(\".toast-overlay\")\r\nconst sbform = document.querySelector(\".sb__categories--body-form\")\r\n\r\n\r\nexport default function toastCallbackSaving() {\r\n  const toastmessage = document.querySelector(\".toast-message\");\r\n  toastmessage.textContent = \"Saved\";\r\n  // overlay.classList.remove(\"hide-toast-overlay\");\r\n}\r\n\r\nfunction removeToast() {\r\n  document.querySelector(\".toast\")?.remove()\r\n  overlay.classList.add(\"hide-toast-overlay\")\r\n}\r\n\r\nfunction toastNoCategorySelected() {\r\n  overlay.classList.add(\"toast-overlay--allow__sidebar\")\r\n  sbform.classList.add(\"sb__categories--body-form-hint\")\r\n  sbform.addEventListener(\"mouseover\", removeToastNoCategorySelected)\r\n}\r\n\r\nfunction removeToastNoCategorySelected() {\r\n  removeToast()\r\n  overlay.classList.remove(\"toast-overlay--allow__sidebar\")\r\n  sbform.classList.remove(\"sb__categories--body-form-hint\")\r\n  sbform.removeEventListener(\"mouseover\", removeToastNoCategorySelected)\r\n}\r\n\r\nfunction taostDeleteEntryWarning() {\r\n\r\n}\r\n\r\nexport {\r\n  toastNoCategorySelected,\r\n  removeToastNoCategorySelected,\r\n  taostDeleteEntryWarning,\r\n}","import fullFormConfig from \"../forms/formUtils\";\r\nimport FormSetup from \"../forms/setForm\";\r\nimport getEntryOptionModal from \"../menus/entryOptions\";\r\n\r\nimport { Day } from \"../../factory/entries\";\r\n\r\nimport calcTime, { formatTime } from \"../../utilities/timeutils\";\r\n\r\nimport {\r\n  formatStartEndTime,\r\n  getTempDates,\r\n  getFormDateObject,\r\n  formatEntryOptionsDate,\r\n} from \"../../utilities/dateutils\";\r\n\r\nimport { createCloseIcon } from \"../../utilities/svgs\";\r\n\r\nimport handleOverlap, {\r\n  setStylingForEvent,\r\n  updateBoxCoordinates,\r\n  setBoxTimeAttributes,\r\n  createBox,\r\n  createTemporaryBox,\r\n  getBoxDefaultStyle,\r\n  resetStyleOnClick,\r\n  createTempBoxHeader,\r\n  startEndDefault,\r\n  calcNewHourFromCoords,\r\n  calcNewMinuteFromCoords,\r\n  getOriginalBoxObject,\r\n  resetOriginalBox,\r\n} from \"../../utilities/dragutils\";\r\n\r\nimport { getClosest, placePopup } from \"../../utilities/helpers\";\r\n\r\n// import createToast from \"../toastPopups/toast\";\r\n\r\n// import {\r\n//   toastNoCategorySelected,\r\n//   removeToastNoCategorySelected,\r\n// } from \"../toastPopups/toastCallbacks\";\r\n\r\nimport locales from \"../../locales/en\";\r\n\r\n// day view header (row 1)\r\nconst dvHeader = document.querySelector(\".dayview--header\");\r\nconst dvHeaderDayNumber = document.querySelector(\".dayview--header-day__title\");\r\nconst dvHeaderDayOfWeek = document.querySelector(\r\n  \".dayview--header-day__number\"\r\n);\r\nconst dvHeaderInfo = document.querySelector(\".dayview--header-day__info\");\r\n\r\n// day view on top container (row 2)\r\nconst dvOnTop = document.querySelector(\".dayview--ontop-container\");\r\n\r\n// main grid wrapper (row 3) (scroll wrapper) (offsettop)\r\nconst dvGrid = document.querySelector(\".dayview__grid\");\r\nconst dvMainGrid = document.querySelector(\".dayview--main-grid\");\r\n\r\nexport default function setDayView(context, store, datepickerContext) {\r\n  let entries = store.getDayEntries(context.getDate());\r\n  let boxes = new Day(entries.day, entries.allDay);\r\n  let firstY = null;\r\n  let lastY = null;\r\n\r\n  function firstLastDates(bxs) {\r\n    let longest = 0;\r\n    let shortest = 100;\r\n    for (let i = 0; i < bxs.length; i++) {\r\n      let [tempshort, templong] = [bxs[i].coordinates.y, bxs[i].coordinates.e];\r\n      if (templong > longest) {\r\n        longest = templong;\r\n      }\r\n      if (tempshort < shortest) {\r\n        shortest = tempshort;\r\n      }\r\n    }\r\n    let [h1, h2] = [Math.floor(shortest / 4), Math.floor(longest / 4)];\r\n    let [m1, m2] = [(shortest % 4) * 15, (longest % 4) * 15];\r\n    let [tempdate1, tempdate2] = [\r\n      new Date(bxs[0].start),\r\n      new Date(bxs[0].start),\r\n    ];\r\n    tempdate1.setHours(h1);\r\n    tempdate1.setMinutes(m1);\r\n    tempdate2.setHours(h2);\r\n    tempdate2.setMinutes(m2);\r\n    return formatStartEndTime(tempdate1, tempdate2);\r\n  }\r\n\r\n  function getDayviewHeaderEntryCount() {\r\n    let allboxes = boxes.getAllBoxes();\r\n    if (allboxes.length === 0) {\r\n      return \"no entries\";\r\n    }\r\n    let [endingToday, startingToday] = [0, 0];\r\n    let tempEndCase1;\r\n\r\n    for (let i = 0; i < allboxes.length; i++) {\r\n      const [start, end, current] = [\r\n        new Date(allboxes[i].start),\r\n        new Date(allboxes[i].end),\r\n        context.getDate(),\r\n      ];\r\n\r\n      if (start.getDate() === current.getDate()) {\r\n        startingToday++;\r\n      }\r\n\r\n      if (end.getDate() === current.getDate()) {\r\n        endingToday++;\r\n        tempEndCase1 = allboxes[i];\r\n      }\r\n    }\r\n\r\n    if (startingToday === 1 && endingToday === 1) {\r\n      return `1 entry ( ${formatStartEndTime(\r\n        new Date(allboxes[0].start),\r\n        new Date(allboxes[0].end)\r\n      )} )`;\r\n    }\r\n\r\n    if (startingToday > 1 && startingToday === endingToday) {\r\n      return `${startingToday} entries starting & ending today ( ${firstLastDates(\r\n        boxes.boxes\r\n      )} )`;\r\n    }\r\n\r\n    let fulltitle = \"\";\r\n    if (startingToday > 0) {\r\n      if (startingToday === 1) {\r\n        fulltitle += `${startingToday} entry starting today`;\r\n      } else {\r\n        fulltitle += `${startingToday} entries started`;\r\n      }\r\n    } else {\r\n      fulltitle += `no entries started`;\r\n    }\r\n\r\n    if (endingToday > 0) {\r\n      if (endingToday === 1) {\r\n        fulltitle += `  ${endingToday} ending ( ${formatStartEndTime(\r\n          new Date(tempEndCase1.start),\r\n          new Date(tempEndCase1.end)\r\n        )} )`;\r\n      } else {\r\n        fulltitle += `  ${endingToday} ending ( ${firstLastDates(\r\n          boxes.boxes\r\n        )} )`;\r\n      }\r\n    } else {\r\n      fulltitle += `  no entries ending today`;\r\n    }\r\n    return fulltitle;\r\n  }\r\n\r\n  function configHeader() {\r\n    [dvHeaderDayNumber, dvHeaderDayOfWeek, dvHeaderInfo].forEach((el) => {\r\n      el.innerText = \"\";\r\n    });\r\n\r\n    let gmtOffset = new Date().getTimezoneOffset() / 60;\r\n    if (gmtOffset < 0) {\r\n      gmtOffset = `+${Math.abs(gmtOffset)}`;\r\n    }\r\n\r\n    document.querySelector(\".dv-gmt\").textContent = `UTC ${context.getGmt()}`;\r\n    let day = context.getDay();\r\n    dvHeaderDayOfWeek.textContent = day;\r\n\r\n    if (context.isToday()) {\r\n      dvHeaderDayOfWeek.classList.add(\"dayview--header-day__number--today\");\r\n      dvHeaderDayNumber.style.color = \"var(--primary1)\";\r\n    } else {\r\n      dvHeaderDayOfWeek.classList.remove(\"dayview--header-day__number--today\");\r\n      dvHeaderDayNumber.removeAttribute(\"style\");\r\n    }\r\n    dvHeaderDayNumber.textContent =\r\n      locales.labels.weekdaysShort[context.getWeekday()].toUpperCase();\r\n    dvHeaderInfo.textContent = getDayviewHeaderEntryCount();\r\n  }\r\n\r\n  function resetDayview() {\r\n    dvMainGrid.innerText = \"\";\r\n    dvOnTop.innerText = \"\";\r\n    dvGrid.onmousedown = null;\r\n    dvOnTop.onmousedown = null;\r\n  }\r\n\r\n  function openDvMore(entr) {\r\n    store.addActiveOverlay(\"morepopup\");\r\n    const morepopupoverlay = document.createElement(\"aside\");\r\n    morepopupoverlay.classList.add(\"dv--morepopup__overlay\");\r\n\r\n    const morepopup = document.createElement(\"aside\");\r\n    morepopup.classList.add(\"dv--morepopup\");\r\n    morepopup.style.left = `${dvOnTop.offsetLeft}px`;\r\n    morepopup.style.top = `${dvOnTop.offsetTop}px`;\r\n\r\n    const morepopupHeader = document.createElement(\"div\");\r\n    morepopupHeader.classList.add(\"dv--morepopup__header\");\r\n    const morepopupTitle = document.createElement(\"span\");\r\n    morepopupTitle.classList.add(\"dv--morepopup__title\");\r\n    morepopupTitle.textContent = \"Events spanning multiple days\";\r\n    const morepopupClose = document.createElement(\"span\");\r\n    morepopupClose.classList.add(\"dv--morepopup__close\");\r\n    morepopupClose.appendChild(createCloseIcon(\"var(--white3)\"));\r\n    morepopupHeader.append(morepopupTitle, morepopupClose);\r\n    const morepopupBody = document.createElement(\"div\");\r\n    morepopupBody.classList.add(\"dv--morepopup__body\");\r\n\r\n    const createMorePopupEntry = (entry) => {\r\n      const morepopupEntry = document.createElement(\"div\");\r\n      morepopupEntry.classList.add(\"dv--morepopup__entry\");\r\n      morepopupEntry.style.backgroundColor = `${store.getCtgColor(\r\n        entry.category\r\n      )}`;\r\n      morepopupEntry.setAttribute(\"data-sdvt-id\", entry.id);\r\n      const morepopupEntryTitle = document.createElement(\"span\");\r\n      morepopupEntryTitle.classList.add(\"dv--morepopup__entry-title\");\r\n      morepopupEntryTitle.textContent = entry.title;\r\n      const morepopupCategory = document.createElement(\"span\");\r\n      morepopupCategory.classList.add(\"dv--morepopup__entry-category\");\r\n      morepopupCategory.textContent = entry.category;\r\n      const morepopupEntryTime = document.createElement(\"span\");\r\n      morepopupEntryTime.classList.add(\"dv--morepopup__entry-time\");\r\n      morepopupEntryTime.textContent = formatEntryOptionsDate(\r\n        new Date(entry.start),\r\n        new Date(entry.end)\r\n      ).date;\r\n      morepopupEntry.append(\r\n        morepopupEntryTitle,\r\n        morepopupCategory,\r\n        morepopupEntryTime\r\n      );\r\n      return morepopupEntry;\r\n    };\r\n\r\n    entr.forEach((entry) => {\r\n      const morepopupEntry = createMorePopupEntry(entry);\r\n      morepopupBody.appendChild(morepopupEntry);\r\n    });\r\n\r\n    const closemp = () => {\r\n      morepopupoverlay.remove();\r\n      morepopup.remove();\r\n      store.removeActiveOverlay(\"morepopup\");\r\n      document.removeEventListener(\"keydown\", closeMpOnEsc);\r\n    };\r\n\r\n    const closeMpOnEsc = (e) => {\r\n      if (e.key === \"Escape\") {\r\n        closemp();\r\n        return;\r\n      }\r\n    };\r\n\r\n    function getEntrItem(e) {\r\n      if (getClosest(e, \".dv--morepopup__entry\")) {\r\n        openStackEntryOnTop(e, closemp);\r\n        return;\r\n      }\r\n    }\r\n\r\n    morepopup.append(morepopupHeader, morepopupBody);\r\n    document.body.appendChild(morepopupoverlay);\r\n    document.body.appendChild(morepopup);\r\n    morepopupoverlay.onclick = closemp;\r\n    morepopupClose.onclick = closemp;\r\n    morepopupBody.onclick = getEntrItem;\r\n    document.addEventListener(\"keydown\", closeMpOnEsc);\r\n  }\r\n\r\n  function openStackEntryOnTop(e, closearg) {\r\n    const target = e.target;\r\n    const id = target.getAttribute(\"data-sdvt-id\");\r\n    const setResetDv = () => {\r\n      console.log(\"reset\");\r\n    };\r\n\r\n    const entry = store.getEntry(id);\r\n    const start = entry.start;\r\n    const color = store.getCtgColor(entry.category);\r\n    const rect = target.getBoundingClientRect();\r\n\r\n    let [x, y] = placePopup(\r\n      400,\r\n      165,\r\n      [parseInt(rect.left), parseInt(rect.top) + 24],\r\n      [window.innerWidth, window.innerHeight],\r\n      false\r\n    );\r\n\r\n    closearg\r\n      ? store.setFormResetHandle(\"day\", closearg)\r\n      : store.setFormResetHandle(\"day\", setResetDv);\r\n    const setup = new FormSetup();\r\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n    setup.setCategory(entry.category, color);\r\n    setup.setDates(getFormDateObject(start, entry.end));\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\r\n\r\n    const modal = document.querySelector(\".entry__options\");\r\n    modal.style.top = +y + \"px\";\r\n    modal.style.left = +x + \"px\";\r\n  }\r\n\r\n  function createStackableEntriesOnTop(entr) {\r\n    const dvOnTopGrid = document.createElement(\"div\");\r\n    dvOnTopGrid.classList.add(\"dayview--ontop__grid\");\r\n    entr.forEach((ent) => {\r\n      const dvOnTopEntry = document.createElement(\"div\");\r\n      dvOnTopEntry.classList.add(\"dayview--ontop__grid-item\");\r\n      dvOnTopEntry.textContent = ent.title;\r\n      dvOnTopEntry.style.backgroundColor = store.getCtgColor(ent.category);\r\n      dvOnTopEntry.setAttribute(\"data-sdvt-id\", ent.id);\r\n      dvOnTopGrid.appendChild(dvOnTopEntry);\r\n    });\r\n    dvOnTop.appendChild(dvOnTopGrid);\r\n  }\r\n\r\n  function createDvTop(entr) {\r\n    const dvtopgrid = document.createElement(\"div\");\r\n    dvtopgrid.classList.add(\"dv--ontop__grid\");\r\n\r\n    if (entr.length > 6) {\r\n      const moremessage = document.createElement(\"div\");\r\n      moremessage.classList.add(\"dv--ontop__more\");\r\n      moremessage.textContent = `${entr.length} more...`;\r\n      dvOnTop.appendChild(moremessage);\r\n      const opdm = () => openDvMore(entr);\r\n      moremessage.onclick = opdm;\r\n      return;\r\n    } else {\r\n      createStackableEntriesOnTop(entr);\r\n    }\r\n  }\r\n\r\n  function renderBoxes() {\r\n    dvMainGrid.innerText = \"\";\r\n    dvOnTop.innerText = \"\";\r\n    createDvTop(boxes.getBoxesTop());\r\n    boxes.getBoxes().forEach((entry) => {\r\n      const y = entry.coordinates.y;\r\n      firstY == null || y < firstY ? (firstY = y) : null;\r\n      createBox(\r\n        dvMainGrid, // column\r\n        entry, // entry object\r\n        \"day\", // current view\r\n        store.getCtgColor(entry.category) // background color\r\n      );\r\n    });\r\n  }\r\n\r\n  /** RESIZE NORTH/SOUTH */\r\n  function resizeBoxNSDay(e, box) {\r\n    setStylingForEvent(\"dragstart\", dvGrid, store);\r\n    document.body.style.cursor = \"move\";\r\n    const col = box.parentElement;\r\n\r\n    let boxhasOnTop = false;\r\n    const boxorig = getOriginalBoxObject(box);\r\n    if (box.classList.contains(\"dv-box-ontop\")) {\r\n      boxhasOnTop = true;\r\n      resetStyleOnClick(\"day\", box);\r\n    }\r\n\r\n    box.classList.add(\"dv-box-resizing\");\r\n    const boxTop = box.offsetTop;\r\n    const headerOffset = parseInt(dvGrid.offsetTop);\r\n    createTemporaryBox(box, col, boxhasOnTop, \"day\");\r\n\r\n    let amountScrolled = parseInt(dvGrid.scrollTop);\r\n    const mousemove = (e) => {\r\n      let newHeight =\r\n        Math.round((e.pageY + amountScrolled - boxTop - headerOffset) / 12.5) *\r\n        12.5;\r\n\r\n      if (newHeight <= 12.5) {\r\n        box.style.height = \"12.5px\";\r\n        return;\r\n      } else if (newHeight + boxTop > 1188) {\r\n        return;\r\n      } else {\r\n        box.style.height = `${newHeight}px`;\r\n      }\r\n    };\r\n\r\n    function mouseup() {\r\n      document.querySelector(\".dv-temporary-box\").remove();\r\n      box.classList.remove(\"dv-box-resizing\");\r\n      if (boxhasOnTop) {\r\n        box.classList.add(\"dv-box-ontop\");\r\n      }\r\n\r\n      if (boxorig.height === box.offsetHeight) {\r\n        resetOriginalBox(box, boxorig);\r\n      } else {\r\n        setBoxTimeAttributes(box, \"day\");\r\n        const start = +box.getAttribute(\"data-dv-start-time\");\r\n        const length = +box.getAttribute(\"data-dv-time-intervals\");\r\n        const time = calcTime(start, length);\r\n        box.setAttribute(\"data-dv-time\", time);\r\n        box.firstChild.nextSibling.firstElementChild.textContent = time;\r\n\r\n        updateBoxCoordinates(box, \"day\", boxes);\r\n        boxes.updateStore(store, box.getAttribute(\"data-dv-box-id\"));\r\n        // check if new position overlaps with other boxes and handle\r\n        if (boxes.getBoxes().length > 1) {\r\n          handleOverlap(null, \"day\", boxes);\r\n        } else {\r\n          box.setAttribute(\"data-dv-box-index\", \"box-one\");\r\n        }\r\n      }\r\n\r\n      configHeader();\r\n      setStylingForEvent(\"dragend\", dvGrid, store);\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    }\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  /** DRAG NORTH/ SOUTH, EAST/ WEST */\r\n  function dragEngineDay(e, box) {\r\n    setStylingForEvent(\"dragstart\", dvGrid, store);\r\n    const col = box.parentElement;\r\n    let boxhasOnTop = false;\r\n\r\n    const startTop = +box.style.top.split(\"px\")[0];\r\n    const boxHeight = +box.style.height.split(\"px\")[0];\r\n    const startCursorY = e.pageY - parseInt(dvGrid.offsetTop);\r\n    const headerOffset = +dvGrid.getBoundingClientRect().top.toFixed(2);\r\n    let [tempX, tempY] = [e.pageX, e.pageY];\r\n    let [sX, sY] = [0, 0];\r\n    let hasStyles = false;\r\n\r\n    /** DRAG NORTH SOUTH */\r\n    const mousemove = (e) => {\r\n      sX = Math.abs(e.clientX - tempX);\r\n      sY = Math.abs(e.clientY - tempY);\r\n      if (!hasStyles) {\r\n        if (sX > 3 || sY > 3) {\r\n          hasStyles = true;\r\n          document.body.style.cursor = \"move\";\r\n          if (box.classList.contains(\"dv-box-ontop\")) {\r\n            boxhasOnTop = true;\r\n            resetStyleOnClick(\"day\", box);\r\n          }\r\n          box.classList.add(\"dv-box-dragging\");\r\n          createTemporaryBox(box, col, boxhasOnTop, \"day\");\r\n          sX = 0;\r\n          sY = 0;\r\n        }\r\n      }\r\n\r\n      const currentCursorY = e.pageY - headerOffset;\r\n      let newOffsetY = currentCursorY - startCursorY;\r\n      let newTop = Math.round((newOffsetY + startTop) / 12.5) * 12.5;\r\n      if (newTop < 0 || currentCursorY < 0) {\r\n        newTop = 0;\r\n        return;\r\n      } else if (newTop + boxHeight > 1188) {\r\n        return;\r\n      }\r\n      box.style.top = `${newTop}px`;\r\n    };\r\n\r\n    const mouseup = () => {\r\n      const tempbox = document?.querySelector(\".dv-temporary-box\");\r\n      // if box did not move, no render needed\r\n      // click event to open form\r\n      if (tempbox === null) {\r\n        const setResetDv = () => {\r\n          setStylingForEvent(\"dragend\", dvGrid, store);\r\n          box.classList.remove(\"dv-box-clicked\");\r\n        };\r\n\r\n        box.classList.add(\"dv-box-clicked\");\r\n        const id = box.getAttribute(\"data-dv-box-id\");\r\n        const entry = store.getEntry(id);\r\n        const start = entry.start;\r\n        const color = box.style.backgroundColor;\r\n        const rect = box.getBoundingClientRect();\r\n\r\n        let [x, y] = placePopup(\r\n          400,\r\n          165,\r\n          [parseInt(rect.left) + 32, parseInt(rect.top) + 32],\r\n          [window.innerWidth, window.innerHeight],\r\n          false\r\n        );\r\n        store.setFormResetHandle(\"day\", setResetDv);\r\n        const setup = new FormSetup();\r\n        setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n        setup.setCategory(entry.category, color);\r\n        setup.setDates(getFormDateObject(start, entry.end));\r\n        fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n        const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n        getEntryOptionModal(\r\n          context,\r\n          store,\r\n          entry,\r\n          datepickerContext,\r\n          finishSetup\r\n        );\r\n\r\n        const modal = document.querySelector(\".entry__options\");\r\n        if (window.innerWidth > 580) {\r\n          modal.style.top = +y + \"px\";\r\n          modal.style.left = x + \"px\";\r\n        } else {\r\n          modal.style.top = \"64px\";\r\n        }\r\n        // ******************\r\n      } else {\r\n        tempbox.remove();\r\n        box.classList.remove(\"dv-box-dragging\");\r\n        if (boxhasOnTop) {\r\n          box.classList.add(\"dv-box-ontop\");\r\n        }\r\n\r\n        setBoxTimeAttributes(box, \"day\");\r\n        const start = +box.getAttribute(\"data-dv-start-time\");\r\n        const length = +box.getAttribute(\"data-dv-time-intervals\");\r\n        const time = calcTime(start, length);\r\n        box.setAttribute(\"data-dv-time\", time);\r\n\r\n        box.children[1].children[0].textContent = time;\r\n        updateBoxCoordinates(box, \"day\", boxes);\r\n        boxes.updateStore(store, box.getAttribute(\"data-dv-box-id\"));\r\n        // check if new position overlaps with other boxes and handle\r\n        if (boxes.getBoxes().length > 1) {\r\n          handleOverlap(null, \"day\", boxes);\r\n        } else {\r\n          box.setAttribute(\"data-dv-box-index\", \"box-one\");\r\n        }\r\n\r\n        configHeader();\r\n        setStylingForEvent(\"dragend\", dvGrid, store);\r\n      }\r\n\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    };\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  function handleDayviewClose() {\r\n    document.querySelector(\".dayview-temp-box\")?.remove();\r\n  }\r\n\r\n  function openDayviewForm(box, category, dates, type) {\r\n    store.setFormResetHandle(\"day\", handleDayviewClose);\r\n\r\n    const openForm = store.getRenderFormCallback();\r\n    const setup = new FormSetup();\r\n\r\n    const [submitType, id, title, description] = type;\r\n    setup.setSubmission(submitType, id, title, description);\r\n    if (submitType === \"create\") {\r\n      box.style.opacity = 0.9;\r\n    }\r\n\r\n    const [categoryName, color] = category;\r\n    setup.setCategory(categoryName, color);\r\n\r\n    const [start, end] = dates;\r\n    setup.setDates(getFormDateObject(start, end));\r\n\r\n    openForm();\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n    fullFormConfig.getConfig(setup.getSetup());\r\n  }\r\n\r\n  /** CREATE BOX ON DRAG */\r\n  function createBoxOnDragDay(e) {\r\n    setStylingForEvent(\"dragstart\", dvGrid, store);\r\n    document.body.style.cursor = \"move\";\r\n    const [tempcategory, color] = store.getFirstActiveCategoryKeyPair();\r\n\r\n    const box = document.createElement(\"div\");\r\n    box.setAttribute(\"class\", \"dv-box dv-box-dragging dayview-temp-box\");\r\n\r\n    // boxheader is static - create from template\r\n    const boxheader = createTempBoxHeader(\"day\");\r\n    const boxcontent = document.createElement(\"div\");\r\n    const boxtime = document.createElement(\"span\");\r\n    const boxtimeend = document.createElement(\"span\");\r\n    boxcontent.classList.add(\"dv-box__content\");\r\n    boxtime.classList.add(\"dv-box-time\");\r\n    boxtimeend.classList.add(\"dv-box-time\");\r\n\r\n    const headerOffset = parseInt(dvGrid.offsetTop);\r\n    const scrolled = parseInt(dvGrid.scrollTop);\r\n    const startCursorY = e.pageY - headerOffset;\r\n\r\n    let y = Math.round((startCursorY + Math.abs(scrolled)) / 12.5) * 12.5;\r\n    box.setAttribute(\"style\", getBoxDefaultStyle(y, color));\r\n\r\n    let coords = { y: +y / 12.5, x: 1, h: 1, e: 2 };\r\n    let [starthour, startmin, endhour, endmin] = startEndDefault(y);\r\n    let movedY = 0;\r\n\r\n    function mousemove(e) {\r\n      // console.log(e)\r\n      movedY += e.movementY;\r\n      let newHeight =\r\n        Math.round((e.pageY + scrolled - y - headerOffset) / 12.5) * 12.5;\r\n      if (newHeight <= 12.5) {\r\n        newHeight = 12.5;\r\n      }\r\n      if (newHeight + y > 1188) {\r\n        newHeight = 1187.5 - y;\r\n      }\r\n\r\n      box.style.height = `${newHeight}px`;\r\n      coords.h = +newHeight / 12.5;\r\n      coords.e = +coords.y + coords.h;\r\n\r\n      endhour = calcNewHourFromCoords(newHeight, y);\r\n      endmin = calcNewMinuteFromCoords(newHeight, y);\r\n\r\n      boxtime.style.wordBreak = \"break-word\";\r\n      boxtime.textContent = `${formatTime(starthour, startmin)}  `;\r\n      boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\r\n    }\r\n\r\n    // append content to temporary box\r\n    boxcontent.append(boxtime, boxtimeend);\r\n    box.append(boxheader, boxcontent);\r\n    e.target.appendChild(box);\r\n\r\n    function mouseup() {\r\n      if (movedY <= 20) {\r\n        if (+coords.y >= 92) {\r\n          coords.y = 92;\r\n          coords.e = 95;\r\n          coords.h = 3;\r\n          box.style.height = \"37.5px\";\r\n          box.style.top = \"1150px\";\r\n          [starthour, startmin] = [23, 0];\r\n          [endhour, endmin] = [23, 45];\r\n          boxtime.textContent = `${formatTime(starthour, startmin)}  `;\r\n          boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\r\n        } else {\r\n          coords.y = starthour * 4;\r\n          coords.e = +coords.y + 4;\r\n          coords.h = 4;\r\n          box.style.height = \"50px\";\r\n          box.style.top = `${+coords.y * 12.5}px`;\r\n          [starthour, startmin] = [starthour, 0];\r\n          [endhour, endmin] = [starthour + 1, 0];\r\n          boxtime.textContent = `${formatTime(starthour, startmin)}  `;\r\n          boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\r\n        }\r\n      }\r\n\r\n      const datesData = getTempDates(\r\n        new Date(context.getDate()),\r\n        [starthour, endhour],\r\n        [startmin, endmin]\r\n      );\r\n\r\n      lastY = +coords.y;\r\n\r\n      openDayviewForm(\r\n        box,\r\n        [tempcategory, color],\r\n        datesData,\r\n        [\"create\", null, null, null]\r\n      );\r\n\r\n      setStylingForEvent(\"dragend\", dvGrid, store);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n    }\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  function renderBoxesForGrid() {\r\n    renderBoxes();\r\n    handleOverlap(null, \"day\", boxes);\r\n  }\r\n\r\n  function delegateDayViewOnTop(e) {\r\n    const dvhboxTop = getClosest(e, \".dayview--ontop__grid-item\");\r\n    if (dvhboxTop) {\r\n      openStackEntryOnTop(e);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function delegateDayView(e) {\r\n    const dvhresizehandle = getClosest(e, \".dv-box-resize-s\");\r\n    const dvhbox = getClosest(e, \".dv-box\");\r\n    const dvhgrid = getClosest(e, \".dayview--main-grid\");\r\n\r\n    if (dvhresizehandle) {\r\n      resizeBoxNSDay(e, e.target.parentElement);\r\n      return;\r\n    }\r\n\r\n    if (dvhbox) {\r\n      dragEngineDay(e, e.target);\r\n      return;\r\n    }\r\n\r\n    if (dvhgrid) {\r\n      createBoxOnDragDay(e, e.target);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function handleScrollToOnInit() {\r\n    if (firstY !== null) {\r\n      let settop = +firstY * 12.5;\r\n      setTimeout(()=> {\r\n        dvGrid.scrollTo({\r\n          top: settop,\r\n          behavior: \"instant\",\r\n        })\r\n      }, 4)\r\n    } else {\r\n      const hour = new Date().getHours() * 50;\r\n      setTimeout(() => {\r\n        dvGrid.scrollTo({\r\n          top: hour - 25 <= 0 ? 0 : hour - 25,\r\n          behavior: \"instant\",\r\n        })\r\n      }, 4)\r\n    }\r\n  }\r\n\r\n  const initDayView = () => {\r\n    renderBoxesForGrid();\r\n    configHeader();\r\n    dvGrid.onmousedown = delegateDayView;\r\n    dvOnTop.onmousedown = delegateDayViewOnTop;\r\n    store.setResetPreviousViewCallback(resetDayview);\r\n    handleScrollToOnInit();\r\n  };\r\n  initDayView();\r\n}\r\n","import getEntryOptionModal from \"../menus/entryOptions\";\r\nimport setViews from \"../../config/setViews\";\r\nimport FormSetup from \"../forms/setForm\";\r\nimport fullFormConfig from \"../forms/formUtils\";\r\nimport {\r\n  getClosest,\r\n  hextorgba\r\n} from '../../utilities/helpers'\r\nimport {\r\n  getdatearray,\r\n  getFormDateObject,\r\n  getDateFromAttribute,\r\n  getDuration,\r\n  formatEntryOptionsDate,\r\n  longerThanDay,\r\n  formatStartEndDate\r\n} from \"../../utilities/dateutils\"\r\nimport { formatStartEndTimes } from \"../../utilities/timeutils\"\r\nimport locales from \"../../locales/en\"\r\n\r\nconst monthNames = locales.labels.monthsShort.map(x => x.toUpperCase())\r\nconst weekDayNames = locales.labels.weekdaysShort.map(x => x.toUpperCase())\r\n\r\nconst dateTimeTitle = document.querySelector(\".datetime-content--title\");\r\nconst listview = document.querySelector('.listview');\r\nconst listviewBody = document.querySelector('.listview__body');\r\n\r\nexport default function setListView(context, store, datepickerContext) {\r\n  let today = new Date();\r\n  let [todayYear, todayMonth, todayDay] = getdatearray(today)\r\n  /*************************************** */\r\n  /* CREATE ROW GROUPS*/\r\n  function createRowGroups(entries) {\r\n    // console.log(entries);\r\n    let count = 0;\r\n    for (let [key, value] of Object.entries(entries)) {\r\n      count++\r\n      const tempdate = new Date(Date.parse(key))\r\n      const [month, day, dow] = [\r\n        tempdate.getMonth(),\r\n        tempdate.getDate(),\r\n        tempdate.getDay()\r\n      ]\r\n\r\n      const [wn, mn] = [weekDayNames[dow], monthNames[month]];\r\n      const rgheader = createRowGroupHeader(wn, mn, day, key, count === 1 ? true : false);\r\n\r\n      const rgContent = document.createElement(\"div\");\r\n      rgContent.classList.add(\"rowgroup-content\");\r\n\r\n      value.sort((a, b) => {\r\n        return new Date(a.end) - new Date(b.end)\r\n      })\r\n\r\n      value.forEach((entry, idx) => {\r\n        rgContent.append(createRowGroupCell(entry))\r\n      })\r\n\r\n      const rg = document.createElement('div');\r\n      rg.classList.add('listview__rowgroup');\r\n      rg.append(rgheader, rgContent);\r\n      listviewBody.appendChild(rg);\r\n\r\n    }\r\n  }\r\n\r\n  function createRowGroupHeader(weekname, monthname, day, date, settop) {\r\n    const rgHeader = document.createElement('div');\r\n    rgHeader.classList.add('rowgroup-header');\r\n    const rgHeaderDateNumber = document.createElement('div');\r\n\r\n    rgHeaderDateNumber.classList.add('rowgroup--header__datenumber');\r\n    rgHeaderDateNumber.textContent = day;\r\n    rgHeaderDateNumber.setAttribute(\"data-rgheader-date\", date)\r\n    const rgHeaderDate = document.createElement('div');\r\n    rgHeaderDate.classList.add('rowgroup--header__monthdow');\r\n    rgHeaderDate.textContent = `${monthname}, ${weekname}`;\r\n    if (settop) {\r\n      rgHeaderDateNumber.classList.add(\"top-datenumber\")\r\n      rgHeaderDate.classList.add(\"top-monthdow\")\r\n\r\n    }\r\n    rgHeader.append(rgHeaderDateNumber, rgHeaderDate);\r\n    return rgHeader;\r\n  }\r\n\r\n  function createRowGroupCell(entry) {\r\n    const color = store.getCtgColor(entry.category);\r\n    const [start, end] = [new Date(entry.start), new Date(entry.end)]\r\n    let datetitle;\r\n    if (longerThanDay(start, end)) {\r\n      let tempyear;\r\n      if (start.getFullYear() !== end.getFullYear()) {\r\n        tempyear = +end.getFullYear() - 2000;\r\n      }\r\n\r\n      datetitle = `${monthNames[end.getMonth()]} ${end.getDate()} ${tempyear ? tempyear : \"\"}`\r\n    } else {\r\n      datetitle = `${formatStartEndTimes(\r\n        [start.getHours(), end.getHours()],\r\n        [start.getMinutes(), end.getMinutes()]\r\n      )}`\r\n    }\r\n\r\n    const rgCell = document.createElement('div');\r\n    rgCell.classList.add('rowgroup--cell');\r\n    rgCell.setAttribute('data-rgcell-id', entry.id);\r\n    const rgCellColor = document.createElement(\"div\");\r\n    rgCellColor.classList.add(\"rowgroup--cell__color\");\r\n    rgCellColor.style.backgroundColor = color;\r\n    const rgCellTime = document.createElement(\"div\");\r\n    rgCellTime.classList.add(\"rowgroup--cell__time\");\r\n    rgCellTime.textContent = datetitle;\r\n    const rgCellTitle = document.createElement(\"div\");\r\n    rgCellTitle.classList.add(\"rowgroup--cell__title\");\r\n    rgCellTitle.textContent = entry.title;\r\n    rgCell.append(rgCellColor, rgCellTime, rgCellTitle);\r\n    return rgCell;\r\n  }\r\n  /*************************************** */\r\n\r\n\r\n  /*************************************** */\r\n  // EVENTS\r\n  function resetCellActive() {\r\n    const activeCell = document?.querySelector(\".rowgroup--cell-active\");\r\n    if (activeCell) {\r\n      activeCell.classList.remove(\"rowgroup--cell-active\");\r\n      activeCell.removeAttribute(\"style\");\r\n    }\r\n  }\r\n\r\n  function getRgContextMenu(cell) {\r\n    const id = cell.getAttribute(\"data-rgcell-id\");\r\n    cell.classList.add(\"rowgroup--cell-active\");\r\n    const entry = store.getEntry(id);\r\n    const start = entry.start;\r\n    const color = store.getCtgColor(entry.category);\r\n    cell.style.backgroundColor = hextorgba(color, 0.7);\r\n    // cell.style.backgroundColor = color;\r\n\r\n    const rect = cell.getBoundingClientRect();\r\n    const height = cell.offsetHeight;\r\n    const rectTop = parseInt(rect.top) + height;\r\n    const rectLeft = parseInt(rect.left);\r\n    const modalHeight = 165;\r\n\r\n    let y = rectTop + 12;\r\n    if (rectTop + modalHeight > window.innerHeight) {\r\n      y = rectTop - modalHeight - height - 12;\r\n    }\r\n\r\n\r\n    let x = rectLeft;\r\n    if (rectLeft + 150 > window.innerWidth) {\r\n      x = window.innerWidth - 150;\r\n    }\r\n\r\n    // *** config & open form ***\r\n    store.setFormResetHandle(\"list\", resetCellActive);\r\n\r\n    const setup = new FormSetup();\r\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n    setup.setCategory(entry.category, color);\r\n    setup.setDates(getFormDateObject(start, entry.end));\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\r\n    const modal = document.querySelector(\".entry__options\")\r\n    modal.style.top = y + \"px\";\r\n    modal.style.left = x + \"px\";\r\n  }\r\n\r\n  // SWITCH TO DAY VIEW\r\n  function setDayViewLV(target) {\r\n    let [year, month, day] = getDateFromAttribute(target, 'data-rgheader-date', \"month\");\r\n    context.setDate(year, month, day);\r\n    context.setDateSelected(day);\r\n    if (context.getSidebarState() === \"open\") {\r\n      datepickerContext.setDate(year, month, day);\r\n      datepickerContext.setDateSelected(day);\r\n    }\r\n    context.setComponent(\"day\")\r\n    setViews(\"day\", context, store, datepickerContext)\r\n  }\r\n  /*************************************** */\r\n\r\n\r\n  /*************************************** */\r\n  // DELEGATION\r\n  function delegateListview(e) {\r\n    const headerNum = getClosest(e, \".rowgroup--header__datenumber\");\r\n    const rgCell = getClosest(e, \".rowgroup--cell\");\r\n\r\n    if (headerNum) {\r\n      setDayViewLV(e.target);\r\n      return;\r\n    }\r\n\r\n    if (rgCell) {\r\n      getRgContextMenu(rgCell)\r\n      return;\r\n    }\r\n  }\r\n\r\n  \r\n  function resetListview() {\r\n    listviewBody.innerText = \"\";\r\n  }\r\n\r\n  const initListView = () => {\r\n    resetListview()\r\n    store.setResetPreviousViewCallback(resetListview)\r\n    const activeEnt = store.getActiveEntries();\r\n    if (activeEnt.length === 0) {\r\n      dateTimeTitle.textContent = \"No Entries to Display\";\r\n      return;\r\n    } else {\r\n      const entries = store.sortBy(activeEnt, \"start\", \"desc\");\r\n\r\n      const groupedEntries = entries.reduce((acc, curr) => {\r\n        const date = new Date(curr.start)\r\n        const [year, month, day] = getdatearray(date)\r\n        const datestring = `${year}-${month}-${day}` // for parse&group\r\n\r\n        if (year < todayYear) {\r\n          return acc;\r\n        } else if (year === todayYear) {\r\n          if (month < todayMonth) {\r\n            return acc;\r\n          } else if (month === todayMonth && day < todayDay) {\r\n            return acc;\r\n          }\r\n        }\r\n\r\n        if (!acc[datestring]) { acc[datestring] = [] }\r\n        acc[datestring].push(curr)\r\n        return acc;\r\n      }, {})\r\n\r\n      // set the header title to the first date with entries that is not in the past and the last date with entries\r\n      // if no entries are in the future, set the header title to \"Schedule Clear\";\r\n      const keys = Object.keys(groupedEntries)\r\n      const length = keys.length;\r\n      if (length === 0) {\r\n        dateTimeTitle.textContent = \"Schedule Clear\"\r\n      } else {\r\n        // true will slice the year at last two digits if two years are displayed at the same time;\r\n\r\n        const earliestDate = new Date(Date.parse(keys[0]))\r\n\r\n        context.setDate(\r\n          earliestDate.getFullYear(),\r\n          earliestDate.getMonth(),\r\n          earliestDate.getDate()\r\n        );\r\n\r\n        context.setDateSelected(earliestDate.getDate());\r\n\r\n        if (context.getSidebarState === \"open\") {\r\n          datepickerContext.setDate(\r\n            earliestDate.getFullYear(),\r\n            earliestDate.getMonth(),\r\n            earliestDate.getDate()\r\n          )\r\n          datepickerContext.setDateSelected(earliestDate.getDate());\r\n        }\r\n\r\n        dateTimeTitle.textContent = formatStartEndDate(\r\n          keys[0],\r\n          keys[length - 1],\r\n          true\r\n        );\r\n      }\r\n\r\n\r\n      createRowGroups(groupedEntries);\r\n      listview.onclick = delegateListview;\r\n    }\r\n  }\r\n  initListView();\r\n}","// rendering\r\nimport setViews from \"../../config/setViews\";\r\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\r\nimport fullFormConfig from \"../forms/formUtils\";\r\nimport FormSetup from \"../forms/setForm\";\r\nimport getEntryOptionModal from \"../menus/entryOptions\";\r\n\r\n// Box query\r\nimport MonthBoxQuery from \"../../factory/queries\"\r\n\r\n// popup messages / actions\r\nimport createToast from \"../toastPopups/toast\"\r\nimport {\r\n  toastNoCategorySelected,\r\n  removeToastNoCategorySelected,\r\n} from \"../toastPopups/toastCallbacks\"\r\n\r\n// date utilities\r\nimport {\r\n  getDateFormatted,\r\n  compareDates,\r\n  createDateFromFormattedString,\r\n  getDateFromAttribute,\r\n  getFormDateObject,\r\n  generateTempStartEnd,\r\n  getDurationSeconds,\r\n} from \"../../utilities/dateutils\"\r\n\r\nimport { createCloseIcon } from \"../../utilities/svgs\";\r\n\r\n// general utilities\r\nimport {\r\n  getClosest,\r\n  hextorgba,\r\n  placePopup\r\n} from '../../utilities/helpers'\r\n\r\n// drag&drop / resize utilities\r\nimport { setStylingForEvent } from \"../../utilities/dragutils\"\r\n\r\n// naming\r\nimport locales from \"../../locales/en\"\r\nconst monthNames = locales.labels.monthsShort\r\n\r\nconst resizeoverlay = document.querySelector(\".resize-overlay\")\r\nconst sidebar = document.querySelector(\".sidebar\")\r\nconst monthWrapper = document.querySelector(\".monthview--calendar\")\r\n\r\nexport default function setMonthView(context, store, datepickerContext) {\r\n  const montharray = context.getMonthArray()\r\n  const monthentries = store.getMonthEntries(montharray)\r\n  let groupedEntries = store.getGroupedMonthEntries(monthentries)\r\n\r\n  const boxquery = new MonthBoxQuery(\r\n    window.innerWidth <= 530 || window.innerHeight <= 470\r\n  );\r\n\r\n  function renderSidebarDatepickerMonth() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay())\r\n      context.setDateSelected(context.getDay())\r\n      setSidebarDatepicker(context, store, datepickerContext)\r\n    }\r\n  }\r\n\r\n  function handleOverlay(type) {\r\n    if (type === \"hide\") {\r\n      resizeoverlay.classList.add(\"hide-resize-overlay\");\r\n      store.removeActiveOverlay(\"hide-resize-overlay\");\r\n    } else {\r\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\r\n      store.addActiveOverlay(\"hide-resize-overlay\");\r\n    }\r\n  }\r\n\r\n  function setDayViewViaMonth() {\r\n    context.setComponent(\"day\")\r\n    setViews(\"day\", context, store, datepickerContext)\r\n    renderSidebarDatepickerMonth()\r\n  }\r\n\r\n  function renderDayViewViaModal(parentDate) {\r\n    handleOverlay(\"hide\")\r\n    context.setDate(\r\n      parentDate.getFullYear(),\r\n      parentDate.getMonth(),\r\n      parentDate.getDate()\r\n    );\r\n    setDayViewViaMonth();\r\n  }\r\n\r\n  function createBox(id, category, top, title) {\r\n    const box = document.createElement(\"div\")\r\n    box.classList.add(\"monthview--box\")\r\n    box.setAttribute(\"data-monthview-id\", id)\r\n    box.style.backgroundColor = store.getCtgColor(category)\r\n    box.style.top = `${top}px`\r\n    box.style.height = `${boxquery.getHeight()}px`\r\n    box.style.width = \"100%\";\r\n\r\n    const boxtitle = document.createElement(\"div\")\r\n    boxtitle.classList.add(\"monthview--title\")\r\n    boxtitle.textContent = title\r\n    box.appendChild(boxtitle)\r\n    return box\r\n  }\r\n\r\n  function createGroupedCell(cellDate, count) {\r\n    const groupedBxs = document.createElement('div');\r\n    groupedBxs.classList.add('monthview--daygroup');\r\n    groupedBxs.setAttribute(\"data-mvgrouped-date\", cellDate)\r\n    groupedBxs.setAttribute(\"data-mvgrouped-length\", count)\r\n    const groupedDiv = document.createElement(\"div\")\r\n    groupedDiv.classList.add(\"monthview--grouped\")\r\n    const groupedTitle = document.createElement(\"div\")\r\n    groupedTitle.classList.add(\"monthview--daycontent__grouped-title\")\r\n    groupedTitle.textContent = count + \" \" + \"more...\"\r\n\r\n    groupedDiv.appendChild(groupedTitle)\r\n    groupedBxs.appendChild(groupedDiv)\r\n    return groupedBxs;\r\n  }\r\n\r\n  function createCellHeader(cell, day) {\r\n    const daynumberAndMonth = day.getDate() + \" \" + monthNames[day.getMonth()]\r\n    const daynumber = document.createElement('span');\r\n    daynumber.classList.add(\"monthview--daynumber\")\r\n    /**\r\n     * case 1: cell does not represent current month\r\n     * case 2: cell represents first day of current month\r\n     * case 3: cell represents today\r\n     * case 4: cell represents days within current month\r\n    **/\r\n    if (day.getMonth() !== context.getMonth()) {\r\n      daynumber.textContent = daynumberAndMonth;\r\n      daynumber.classList.add(\"monthview--daynumber-prevnext\");\r\n    } else if (day.getDate() === 1) {\r\n      daynumber.textContent = daynumberAndMonth;\r\n    } else if (context.isToday(day)) {\r\n      daynumber.textContent = day.getDate();\r\n      daynumber.classList.add(\"monthview--daynumber-today\");\r\n      cell.classList.add(\"monthview--today\");\r\n    } else {\r\n      daynumber.textContent = day.getDate()\r\n    }\r\n    return daynumber;\r\n  }\r\n\r\n  function createCell(day, idx, entry, cellDate) {\r\n    const cellCoordinates = [\r\n      +day.getDay(),        // (x): day of week\r\n      Math.floor((idx) / 7) // (y): week of month\r\n    ]\r\n\r\n    const cell = document.createElement(\"div\");\r\n    cell.classList.add(\"monthview--day\");\r\n    cell.setAttribute(\"data-mv-date\", cellDate)\r\n    cell.setAttribute(\"data-mv-idx\", idx)\r\n    cell.setAttribute(\"data-mv-coordinates\", cellCoordinates)\r\n\r\n    const dayofmonth = document.createElement('div');\r\n    const cellContent = document.createElement('div');\r\n    dayofmonth.classList.add('monthview--dayofmonth');\r\n    cellContent.classList.add('monthview--daycontent');\r\n\r\n    if (day.getMonth() === context.getMonth() && day.getDate() === context.getDateSelected()) {\r\n      dayofmonth.classList.add(\"monthview--dayofmonth-selected\")\r\n    }\r\n    dayofmonth.appendChild(createCellHeader(cell, day))\r\n\r\n\r\n    let toptotal = 0; // box.style.top = (box index) * boxquery.getTop()\r\n\r\n\r\n    if (entry !== undefined && entry.length > 0) {\r\n\r\n      // handle instances where entries have same day but different month\r\n      entry = entry.filter((el) => new Date(el.start).getMonth() === day.getMonth())\r\n\r\n      if (entry.length >= 6) {\r\n        // automatically group if there are more than 6 entries on a day\r\n        cellContent.appendChild(createGroupedCell(cellDate, entry.length))\r\n        cellContent.classList.add(\"monthview--daycontent-grouped\")\r\n\r\n      } else {\r\n\r\n        // not grouped (less than 6 entries)\r\n        entry.forEach((el, idx) => {\r\n          if (compareDates(new Date(el.start), day)) {\r\n            if (idx > 0) {\r\n              toptotal += boxquery.getTop()\r\n            }\r\n            cellContent.appendChild(createBox(\r\n              el.id,        // entry id\r\n              el.category,  // backgroundColor\r\n              toptotal,     // style.top\r\n              el.title      // entry title\r\n            ))\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    cell.append(dayofmonth, cellContent);\r\n    monthWrapper.appendChild(cell);\r\n  }\r\n\r\n  function resetMonthview() {\r\n    monthWrapper.onmousedown = null\r\n    monthWrapper.onclick = null\r\n  }\r\n\r\n  function populateCells() {\r\n    // resetMonthview()\r\n    monthWrapper.innerText = \"\";\r\n    montharray.length < 42\r\n      ? monthWrapper.classList.add(\"five-weeks\")\r\n      : monthWrapper.classList.remove(\"five-weeks\");\r\n\r\n    const dayHasEntry = (day) => {\r\n      const dayEntries = groupedEntries[day.getDate()];\r\n      return dayEntries !== undefined ? dayEntries : [];\r\n    }\r\n\r\n    montharray.forEach((day, idx) => {\r\n      createCell(day, idx, dayHasEntry(day), getDateFormatted(day))\r\n    });\r\n\r\n    groupedEntries = [];\r\n  }\r\n\r\n  function getCoordinatesFromCell(cell) {\r\n    return cell.getAttribute(\"data-mv-coordinates\").split(\",\").map((x) => {\r\n      return parseInt(x);\r\n    })\r\n  }\r\n\r\n  function configureForStorage(newCell, clone) {\r\n    let [year, month, day] = getDateFromAttribute(newCell, \"data-mv-date\", \"month\");\r\n    const id = clone.getAttribute(\"data-monthview-id\");\r\n    let tempEntry = store.getEntry(id);\r\n\r\n    let [start, end] = [new Date(tempEntry.start), new Date(tempEntry.end)];\r\n    let tempdate = new Date(year, month, day);\r\n    let diff = getDurationSeconds(start, tempdate);\r\n    let endDay = end.getDate() + Math.floor(diff / 86400) + 1;\r\n\r\n    store.updateEntry(id, {\r\n      start: new Date(\r\n        year, month, day, start.getHours(), start.getMinutes()\r\n      ),\r\n      end: new Date(\r\n        end.getFullYear(), end.getMonth(), endDay, end.getHours(), end.getMinutes()\r\n      ),\r\n    });\r\n  }\r\n\r\n  function createTemporaryBox(box) {\r\n    const clone = box.cloneNode(true);\r\n    monthWrapper.appendChild(clone);\r\n    clone.classList.add(\"box-mv-dragactive\");\r\n    clone.focus();\r\n  }\r\n\r\n  function configGroupedCellOnDrop(groupedCell) {\r\n    const count = groupedCell.getAttribute(\"data-mvgrouped-length\");\r\n    groupedCell.setAttribute(\"data-mvgrouped-length\", +count + 1);\r\n    groupedCell.firstChild.firstChild.textContent = `${groupedCell.getAttribute(\"data-mvgrouped-length\")} more...`;\r\n  }\r\n\r\n  function configClonedBoxForDrop(clone) {\r\n    clone.classList.remove(\"box-mv-dragactive\");\r\n    clone.style.top = \"0px\";\r\n    clone.style.left = \"0px\";\r\n    clone.style.width = \"100%\";\r\n    clone.style.height = `${boxquery.getHeight()}px`;\r\n  }\r\n\r\n  function resetCellOnDrop(bxs, transition) {\r\n    if (bxs.length === 0 || bxs === undefined) return;\r\n    for (let i = 0; i < bxs.length; i++) {\r\n\r\n      if (bxs[i] !== undefined && bxs[i] !== null && !bxs[i].classList.contains(\"monthview--box__form-temp\")) {\r\n        bxs[i].style.top = `${i * boxquery.getTop()}px`;\r\n\r\n        if (transition) {\r\n          bxs[i].classList.add(\"monthview--box__drop\");\r\n          setTimeout(() => {\r\n            bxs[i].classList.remove(\"monthview--box__drop\")\r\n          }, 200);\r\n\r\n        } else {\r\n          bxs[i].setAttribute(\"class\", \"monthview--box\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function createGroupedCellOnDrop(cell, content, boxes, clone) {\r\n    const newGroupedCell = document.createElement('div');\r\n    newGroupedCell.classList.add('monthview--daygroup');\r\n    newGroupedCell.setAttribute(\"data-mvgrouped-date\", cell.getAttribute(\"data-mv-date\"));\r\n    newGroupedCell.setAttribute(\"data-mvgrouped-length\", boxes.length);\r\n\r\n    const groupedDiv = document.createElement(\"div\");\r\n    groupedDiv.classList.add(\"monthview--grouped\");\r\n    const groupedTitle = document.createElement(\"div\");\r\n    groupedTitle.classList.add(\"monthview--daycontent__grouped-title\");\r\n    groupedTitle.textContent = boxes.length + \" \" + \"more...\";\r\n\r\n    // reset cell content to empty then append grouped cell\r\n    content.innerText = \"\";\r\n    newGroupedCell.appendChild(groupedDiv);\r\n    groupedDiv.appendChild(groupedTitle);\r\n    content.appendChild(newGroupedCell);\r\n    content.classList.add(\"monthview--daycontent-grouped\")\r\n    clone.remove();\r\n  }\r\n\r\n  // the month view drag and drop system differs from the week & day views\r\n  // see readme for more info (section : drag engine)\r\n  function dragEngineMonth(e, box) {\r\n    setStylingForEvent(\"dragstart\", monthWrapper, store);\r\n    const startDragTime = Date.now()\r\n    const parent = box.parentElement;\r\n    const cell = parent.parentElement;\r\n    cell.classList.add(\"current-drop-zone\");\r\n    const targetModal = document?.querySelector(\".more-modal\");\r\n\r\n    const originalCellLength = parent.childElementCount;\r\n    const [cellX, cellY] = getCoordinatesFromCell(cell);\r\n\r\n    // create cloned box with class box-mv-dragactive\r\n    createTemporaryBox(box);\r\n    const clone = document?.querySelector(\".box-mv-dragactive\");\r\n    clone.setAttribute(\"data-box-mvx\", cellX);\r\n    clone.setAttribute(\"data-box-mvy\", cellY);\r\n\r\n    const cellRect = cell.getBoundingClientRect();\r\n    const cellWidth = parseFloat(cellRect.width.toFixed(2))\r\n    const cellHeight = parseFloat(cellRect.height.toFixed(2));\r\n    const wrapperLeft = parseInt(monthWrapper.offsetLeft)\r\n    const boxRect = box.getBoundingClientRect();\r\n    const boxWidth = parseFloat(boxRect.width);\r\n    const boxHeight = boxquery.getHeight()\r\n\r\n    clone.style.top = `${parent.offsetTop}px`;\r\n    clone.style.width = `${boxWidth}px`;\r\n    clone.style.height = `${boxHeight}px`;\r\n    clone.style.left = `${parent.offsetLeft}px`\r\n    clone.style.display = \"none\"\r\n\r\n    let hasFiveWeeks = monthWrapper.classList.contains(\"five-weeks\");\r\n    let [startcursorx, startcursory] = [e.clientX, e.clientY];\r\n    let [movedX, movedY] = [0, 0];\r\n    let [lastX, lastY] = [cellX, cellY];\r\n    let gaveStyles = false;\r\n    let changeCursor = false;\r\n\r\n\r\n\r\n    const mousemove = e => {\r\n      movedX = Math.abs(e.clientX - startcursorx);\r\n      movedY = Math.abs(e.clientY - startcursory);\r\n      // Do not apply styles until user has moved the box at least 5px from starting position.\r\n      if (movedX > 1 || movedY > 1) {\r\n        if (!changeCursor) {\r\n          if (targetModal) {\r\n            targetModal.remove();\r\n          }\r\n          document.body.style.cursor = \"move\";\r\n          changeCursor = true;\r\n        }\r\n      }\r\n      if (movedX > 3 || movedY > 3) {\r\n        if (!gaveStyles) {\r\n          // document.body.style.cursor = \"move\";\r\n          box.style.opacity = \"0.5\";\r\n          clone.style.display = \"block\"\r\n        }\r\n        gaveStyles = true;\r\n      }\r\n\r\n      // *********************\r\n      // DRAG EAST / WEST\r\n      let newX = Math.floor((e.clientX - monthWrapper.offsetLeft) / cellWidth);\r\n      // min : first column\r\n      if (newX < 0) {\r\n        newX = 0;\r\n        return;\r\n      }\r\n      // max : last column\r\n      if (newX > 6) {\r\n        newX = 6;\r\n        return;\r\n      }\r\n\r\n      // update new left position once\r\n      if (lastX !== newX) {\r\n        let multX = (newX * cellWidth) + wrapperLeft\r\n        clone.style.left = `${parseFloat(multX.toFixed(2))}px`;\r\n        lastX = newX;\r\n      }\r\n\r\n\r\n      // *********************\r\n      // DRAG NORTH / SOUTH\r\n      let newY = Math.floor((e.clientY - monthWrapper.offsetTop) / cellHeight);\r\n      // min : first row\r\n      if (newY < 0) {\r\n        newY = 0;\r\n        return;\r\n      }\r\n      // max : last row (5 weeks)\r\n      if (hasFiveWeeks && newY > 4) {\r\n        newY = 4;\r\n        return;\r\n      }\r\n      // max : last row (6 weeks)\r\n      if (!hasFiveWeeks && newY > 5) {\r\n        newY = 5;\r\n        return;\r\n      }\r\n\r\n      // ensure new top position is only calculated if the cursor has moved\r\n      // vertically across a cell border\r\n      if (lastY !== newY) {\r\n        let multY = (newY * cellHeight) + monthWrapper.offsetTop + 16\r\n        clone.style.top = `${parseFloat(multY.toFixed(2))}px`;\r\n        lastY = newY;\r\n      }\r\n\r\n      // *********************\r\n      // .current-drop-zone\r\n      // Provides a callable reference to the\r\n      // final drop zone initiated on mouseup. \r\n      document.querySelector(\".current-drop-zone\")?.classList.remove(\"current-drop-zone\");\r\n      document.querySelector(`[data-mv-coordinates=\"${newX},${newY}\"]`).classList.add(\"current-drop-zone\");\r\n    }\r\n\r\n    const mouseup = () => {\r\n      const newCell = document?.querySelector(\".current-drop-zone\");\r\n      const endDragTime = Date.now()\r\n      const timeDiff = endDragTime - startDragTime\r\n      const [newCellX, newCellY] = getCoordinatesFromCell(newCell);\r\n      newCell.classList.remove(\"current-drop-zone\");\r\n      const newCellContent = newCell.children[1];\r\n      const boxes = newCellContent?.children;\r\n      let boxmoved = false;\r\n\r\n\r\n      // newcell not found \r\n      // edge case, haven't come across this yet\r\n      if (newCell === undefined || newCell === null) {\r\n        setStylingForEvent(\"dragend\", monthWrapper, store);\r\n        box.style.opacity = \"1\";\r\n        clone.remove();\r\n        boxmoved = false;\r\n        document.removeEventListener(\"mousemove\", mousemove);\r\n        document.removeEventListener(\"mouseup\", mouseup);\r\n        return;\r\n      }\r\n\r\n      // handle case where box is not moved\r\n      // treat as click event if quick enough\r\n      if (newCellX === cellX && newCellY === cellY) {\r\n        boxmoved = false;\r\n        box.style.opacity = \"1\";\r\n        clone.remove();\r\n        if (targetModal) {\r\n          targetModal.remove();\r\n        }\r\n        if (timeDiff < 200) {\r\n          openFormOnClickMV(box, newCell);\r\n        }\r\n\r\n        // box was moved\r\n      } else {\r\n        // case 1 : cell has 6 or more items (more than 6 items)\r\n        // case 2 : cell is not empty and not group (1-5 items)\r\n        // case 3 : cell becomes group (6 items)\r\n        // case 4 : cell is empty\r\n        // cases 1-4 : run update after to update styling\r\n        // (click)     case 5 : box not moved \r\n        // movedX / movedY : cursor distance, i.e. (dragstart to dragend)\r\n        boxmoved = true;\r\n        if (boxes[0] !== undefined) {\r\n\r\n          // grouped cell\r\n          if (boxes[0].classList.contains(\"monthview--daygroup\")) {\r\n            // (case 1)\r\n            configGroupedCellOnDrop(boxes[0]);\r\n            configureForStorage(newCell, clone);\r\n            clone.remove();\r\n            box.remove();\r\n\r\n          } else {\r\n            // ***********************\r\n            // setup for cases 2 & 3 (not grouped/not empty)\r\n            configClonedBoxForDrop(clone);\r\n            newCellContent.insertBefore(clone, boxes[0]);\r\n            configureForStorage(newCell, clone);\r\n            box.remove();\r\n            // ***********************\r\n            if (boxes.length <= 5) {\r\n              // (case 2)\r\n              resetCellOnDrop(boxes, true);\r\n            } else {\r\n              // (case 3)\r\n              createGroupedCellOnDrop(newCell, newCellContent, boxes, clone);\r\n            }\r\n          }\r\n        } else {\r\n          // (case 4)\r\n          configClonedBoxForDrop(clone);\r\n          box.remove();\r\n          newCellContent.appendChild(clone);\r\n          configureForStorage(newCell, clone);\r\n          renderSidebarDatepickerMonth();\r\n        }\r\n      }\r\n\r\n\r\n      if (boxmoved) {\r\n        // & original cell empty \r\n        if (originalCellLength === 1) {\r\n          renderSidebarDatepickerMonth();\r\n        } else {\r\n          // & original cell not empty --- re calculate styling\r\n          resetCellOnDrop(parent.children, true);\r\n        }\r\n      }\r\n      /*******************/\r\n      setStylingForEvent(\"dragend\", monthWrapper, store);\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    }\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  function getMoreModalEntries(e) {\r\n    const [y, m, d] = getDateFromAttribute(\r\n      e.target.parentElement.parentElement, \"data-mv-date\", \"month\"\r\n    );\r\n    return store.getDayEntriesArray(new Date(y, m, d));\r\n  }\r\n\r\n  function closeMoreModalOnEscape(e) {\r\n    if (e.key === \"Escape\") {\r\n      closeMoreModal()\r\n    }\r\n  }\r\n\r\n  function closeMoreModal() {\r\n    const mm = document?.querySelector(\".more-modal\");\r\n    if (mm) {\r\n      mm.remove();\r\n    }\r\n    handleOverlay(\"hide\");\r\n    document.removeEventListener(\"keydown\", closeMoreModalOnEscape);\r\n  }\r\n\r\n  function createMoreModalBox(moreModalEntries) {\r\n    const modalContent = document.createElement(\"div\");\r\n    modalContent.classList.add(\"more-modal-content\");\r\n    for (let i = 0; i < moreModalEntries.length; i++) {\r\n      const entry = moreModalEntries[i];\r\n\r\n      const modalEntry = document.createElement(\"div\");\r\n      modalEntry.classList.add(\"more-modal-entry\");\r\n      modalEntry.style.top = `${i * 22}px`;\r\n\r\n      modalEntry.style.width = `calc(100% - 16px)`;\r\n      modalEntry.style.height = \"20px\";\r\n      modalEntry.setAttribute(\"data-monthview-id\", entry.id);\r\n      modalEntry.setAttribute(\"data-mvhidden-category\", entry.category);\r\n      modalEntry.style.backgroundColor = store.getCtgColor(entry.category);\r\n\r\n      const modalEntryTitle = document.createElement(\"div\");\r\n      modalEntryTitle.classList.add(\"more-modal-entry-title\");\r\n      modalEntryTitle.textContent = entry.title;\r\n\r\n      modalEntry.appendChild(modalEntryTitle);\r\n      modalContent.appendChild(modalEntry);\r\n    }\r\n    return modalContent;\r\n  }\r\n  // if more than four tasks exist in a cell, group them on next reload\r\n  function createMoreModal(e) {\r\n    const moreModalEntries = getMoreModalEntries(e);\r\n    handleOverlay(\"show\");\r\n    // parent : month cell\r\n    const parent = e.target.parentElement.parentElement;\r\n    const modal = document.createElement(\"div\");\r\n    modal.classList.add(\"more-modal\");\r\n    modal.setAttribute(\"data-mv-modal\", parent.getAttribute(\"data-mv-idx\"));\r\n\r\n    let modalHeight = (moreModalEntries.length * 28) + 64;\r\n    if (modalHeight > 400) {\r\n      modalHeight = 400;\r\n    }\r\n    const rect = parent.getBoundingClientRect();\r\n    let [x, y] = placePopup(\r\n      216,\r\n      modalHeight,\r\n      [parseInt(rect.left), parseInt(rect.top)],\r\n      [window.innerWidth, window.innerHeight],\r\n      true,\r\n      parseInt(rect.width)\r\n    );\r\n\r\n    let maxH = +window.innerHeight - +y - 24;\r\n    modal.setAttribute(\"style\", `top: ${y}px; left: ${x}px; width: 216px; height: ${modalHeight}px; min-height: 120px; max-height: ${maxH}px;`);\r\n\r\n    const modalHeader = document.createElement(\"div\");\r\n    modalHeader.classList.add(\"more-modal-header\");\r\n    const modalHeaderTitle = document.createElement(\"div\");\r\n    modalHeaderTitle.classList.add(\"more-modal-header-title\");\r\n    const parentDate = createDateFromFormattedString(e.target.parentElement.parentElement.getAttribute(\"data-mv-date\"));\r\n\r\n    // dayn: daynumber (1, 2, 3, etc)\r\n    const dowspan = document.createElement(\"span\");\r\n    dowspan.classList.add(\"more-modal-header-title-dow\");\r\n    dowspan.textContent = locales.labels.weekdaysShort[parentDate.getDay()].toUpperCase();\r\n\r\n    const daynspan = document.createElement(\"span\");\r\n    daynspan.classList.add(\"more-modal-header-title-dayn\");\r\n    daynspan.textContent = parentDate.getDate();\r\n\r\n    const modalHeaderClose = document.createElement(\"div\");\r\n    modalHeaderClose.classList.add(\"more-modal-header-close\");\r\n    modalHeaderClose.appendChild(createCloseIcon(\"var(--white3)\"))\r\n    modalHeaderClose.setAttribute(\"data-tooltip\", \"Close\");\r\n\r\n    modalHeaderTitle.append(modalHeaderClose, dowspan, daynspan);\r\n    modalHeader.appendChild(modalHeaderTitle);\r\n    modal.append(modalHeader, createMoreModalBox(moreModalEntries)) //entries\r\n    monthWrapper.appendChild(modal);\r\n\r\n    // open day view (number click)\r\n    daynspan.addEventListener(\"click\", () => {\r\n      renderDayViewViaModal(parentDate);\r\n    }, { once: true });\r\n\r\n    // click away from modal to close\r\n    resizeoverlay.addEventListener(\"click\", (e) => {\r\n      closeMoreModal();\r\n    }, { once: true });\r\n\r\n    document.addEventListener(\"keydown\", closeMoreModalOnEscape);\r\n  }\r\n\r\n  function dragOutOfModal(e) {\r\n    const targetModal = document.querySelector(\".more-modal\");\r\n    const targetCellIdx = parseInt(targetModal.getAttribute(\"data-mv-modal\"));\r\n    const targetCell = document.querySelector(`[data-mv-idx=\"${targetCellIdx}\"]`);\r\n\r\n    const cloned = e.target.cloneNode(true);\r\n    cloned.setAttribute(\"class\", \"monthview--box\");\r\n    cloned.firstChild.setAttribute(\"class\", \"monthview--title\");\r\n    cloned.style.top = `${boxquery.getTop()}px`;\r\n    cloned.style.left = \"0px\";\r\n    cloned.style.width = \"100%\";\r\n    targetCell.lastChild.appendChild(cloned);\r\n\r\n    // update title of more modal to reflect one less entry\r\n    const moreModal = targetCell.lastChild.firstChild;\r\n    const newLength = parseInt(moreModal.getAttribute(\"data-mvgrouped-length\")) - 1;\r\n\r\n    if (newLength < 1) {\r\n      targetCell.lastChild.classList.remove(\"monthview--daycontent-grouped\")\r\n      moreModal.remove();\r\n      cloned.style.top = \"0px\";\r\n    } else {\r\n      moreModal.setAttribute(\"data-mvgrouped-length\", newLength);\r\n      moreModal.firstChild.firstChild.textContent = `${newLength} more...`;\r\n    }\r\n\r\n    // instantiate drag engine on cloned element and destroy the more modal instance\r\n    // \r\n    dragEngineMonth(e, cloned);\r\n    cloned.focus();\r\n    targetModal.style.opacity = \"0.8\";\r\n  }\r\n\r\n  function openDayView(e) {\r\n    const [year, month, day] = getDateFromAttribute(\r\n      e.target.parentElement, \"data-mv-date\", \"month\"\r\n    );\r\n    context.setDate(year, month, day);\r\n    context.setDateSelected(day);\r\n    setDayViewViaMonth();\r\n  }\r\n\r\n  function handleMonthviewEditFormClose() {\r\n    const tempcell = document.querySelector(\".monthview--daycontent__form-temp\");\r\n    if (!tempcell) return;\r\n\r\n    tempcell.removeAttribute(\"style\");\r\n    tempcell.classList.remove(\"monthview--daycontent__form-temp\");\r\n  }\r\n\r\n  // reset cell to original state if form is closed without any action\r\n  function handleMonthviewFormClose() {\r\n    const tempbox = document?.querySelector(\".monthview--box__form-temp\")\r\n    if (!tempbox) return;\r\n    const cellContent = tempbox.parentElement;\r\n    const cell = cellContent.parentElement;\r\n    cell.removeAttribute(\"style\");\r\n    cell.classList.remove(\"monthview--daycontent__form-temp\");\r\n    tempbox.remove();\r\n    resetCellOnDrop(cellContent.children, false);\r\n  }\r\n\r\n  function openFormOnClickMV(box, cell) {\r\n    const id = box.getAttribute(\"data-monthview-id\");\r\n    const entry = store.getEntry(id);\r\n    const start = entry.start;\r\n    const color = store.getCtgColor(entry.category);\r\n    const offsetColor = hextorgba(color, 0.5);\r\n    cell.classList.add(\"monthview--daycontent__form-temp\");\r\n    cell.style.backgroundColor = offsetColor;\r\n\r\n    const rect = cell.getBoundingClientRect();\r\n    let [x, y] = placePopup(\r\n      360,\r\n      165,\r\n      [parseInt(rect.left), parseInt(rect.top)],\r\n      [window.innerWidth, window.innerHeight]\r\n    )\r\n    // *** config & open form ***\r\n    store.setFormResetHandle(\"month\", handleMonthviewEditFormClose);\r\n\r\n    const setup = new FormSetup();\r\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n    setup.setCategory(entry.category, color);\r\n    setup.setDates(getFormDateObject(start, entry.end));\r\n\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n    // Entry option modal will either trigger or release the above setup\r\n    // provide callback to finish setup and open form\r\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\r\n    const modal = document.querySelector(\".entry__options\")\r\n    modal.style.top = y + \"px\";\r\n    modal.style.left = x + \"px\";\r\n    // *******************\r\n  }\r\n\r\n  function configNewBoxInsertion(cellWrapper, cell, category, color) {\r\n    const tempBox = createBox(\r\n      'temp',          // box.id\r\n      category,        // box.style.backgroundColor \r\n      0,               // box.style.top\r\n      \"( New Entry )\"  // box title\r\n    );\r\n    cellWrapper.scrollTop = 0;\r\n    tempBox.classList.add(\"monthview--box__form-temp\");\r\n    cell.classList.add(\"monthview--daycontent__form-temp\");\r\n    cell.style.backgroundColor = color;\r\n    if (cellWrapper.children.length > 0) {\r\n      cellWrapper.insertBefore(tempBox, cellWrapper.children[0]);\r\n      resetCellOnDrop(cellWrapper.children, false);\r\n    } else {\r\n      cellWrapper.appendChild(tempBox);\r\n    }\r\n  }\r\n\r\n  function createEntryOnEmptyTarget(e, cellWrapper) {\r\n    if (e.target.classList.contains(\"monthview--daycontent\")) {\r\n      // if no categories are selected, open sidebar and highlight category box\r\n      const categoryBox = document.querySelector(\".sb__categories--body\")\r\n      if (store.getActiveCategories() === undefined) {\r\n        categoryBox.classList.remove(\"toggle-category--modal\")\r\n        createToast(\r\n          \"No categories selected\",\r\n          3000,\r\n          sidebar.classList.contains(\"hide-sidebar\") ? store.getRenderSidebarCallback() : null,\r\n          toastNoCategorySelected,\r\n          removeToastNoCategorySelected,\r\n          null,\r\n        )\r\n        return;\r\n      } else {\r\n\r\n        // get first active category & create temp box with its color\r\n        const cell = cellWrapper.parentElement;\r\n        const rect = cell.getBoundingClientRect();\r\n        const [start, end] = generateTempStartEnd(\r\n          getDateFromAttribute(cell, \"data-mv-date\", \"month\")\r\n        );\r\n        const [tempctg, color] = store.getFirstActiveCategoryKeyPair();\r\n        const offsetcolor = hextorgba(color, 0.5);\r\n\r\n        configNewBoxInsertion(cellWrapper, cell, tempctg, offsetcolor)\r\n        store.setFormResetHandle(\"month\", handleMonthviewFormClose);\r\n        const openForm = store.getRenderFormCallback();\r\n        const setup = new FormSetup();\r\n\r\n        setup.setSubmission(\"create\", null, null, null);\r\n        setup.setCategory(tempctg, color);\r\n        setup.setDates(getFormDateObject(start, end))\r\n\r\n        openForm()\r\n        fullFormConfig.setFormDatepickerDate(context, datepickerContext, start)\r\n        fullFormConfig.getConfig(setup.getSetup())\r\n        fullFormConfig.setFormStyle(\r\n          parseInt(rect.right), \r\n          parseInt(rect.top),\r\n          false,\r\n          null\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  function delegateMonthEvents(e) {\r\n    // delegates via monthview--box (monthWrapper) onmousedown\r\n    const monthviewBox = getClosest(e, \".monthview--box\")\r\n    const monthviewBoxHeader = getClosest(e, \".monthview--dayofmonth\")\r\n    const groupedBox = getClosest(e, \".monthview--daygroup\")\r\n    const groupedBoxItem = getClosest(e, \".more-modal-entry\")\r\n    const closeGroupedBox = getClosest(e, \".more-modal-header-close\")\r\n\r\n    // target : any box (task/event) within a day\r\n    // execute : drag and drop\r\n    if (monthviewBox) {\r\n      if (window.innerHeight <= 300) return;\r\n      dragEngineMonth(e, e.target)\r\n      return;\r\n    }\r\n\r\n    // target : cell day number\r\n    // execute : open day view of that day \r\n    if (monthviewBoxHeader) {\r\n      openDayView(e)\r\n      return;\r\n    }\r\n\r\n    // target : grouped box (more...)\r\n    // execute : create popup modal with all grouped entries of that day\r\n    if (groupedBox) {\r\n      createMoreModal(e)\r\n      return;\r\n    }\r\n\r\n    // target : entry within more modal \r\n    // execute : drag box (e.target) out of the more modal for reassignment, (same day works as well)\r\n    if (groupedBoxItem) {\r\n      if (window.innerHeight <= 300) return;\r\n      dragOutOfModal(e)\r\n      return;\r\n    }\r\n\r\n    // target : close btn within more modal\r\n    if (closeGroupedBox) {\r\n      closeMoreModal()\r\n      return;\r\n    }\r\n  }\r\n\r\n  function delegateNewBox(e) {\r\n    // delegates via monthview--daycontent (cellWrapper) onclick\r\n    // note that this is the same parent element that delegates mouse down events\r\n    // second delegation is needed to prevent the scrollbars that exist within the cells (days) from triggering the creation of a new entry on cell click\r\n    const emptyBoxClick = getClosest(e, \".monthview--daycontent\")\r\n    if (emptyBoxClick) {\r\n      if (window.innerHeight <= 300) return;\r\n      createEntryOnEmptyTarget(e, e.target)\r\n      return;\r\n    }\r\n  }\r\n\r\n  // event listener is added & removed @ ./setViews.js\r\n  function getMonthviewResize() {\r\n    let lastquery = boxquery.getFlag()\r\n    boxquery.updateFlag()\r\n    // run once per query change\r\n    if (lastquery === boxquery.getFlag()) return;\r\n    const boxes = document.querySelectorAll(\".monthview--box\");\r\n    const querytop = boxquery.getTop();\r\n    const queryHeight = boxquery.getHeight();\r\n    const prevtop = boxquery.getPrevTop(querytop);\r\n    boxes.forEach(box => {\r\n      // always set height \r\n      box.style.height = `${queryHeight}px`\r\n      let currenttop = parseInt(box.style.top)\r\n      if (currenttop === 0) {\r\n        return;\r\n      } else {\r\n        // get previous query top to find index of curren top then calc\r\n        let idx = currenttop / prevtop;\r\n        box.style.top = `${idx * querytop}px`;\r\n      }\r\n    })\r\n  }\r\n\r\n  const initMonth = () => {\r\n    // see readme @ -- monthview.events -- for more info on setup\r\n    populateCells()\r\n    monthWrapper.onmousedown = delegateMonthEvents\r\n    monthWrapper.onclick = delegateNewBox\r\n    store.setResetPreviousViewCallback(resetMonthview)\r\n    store.setResizeHandle(\"month\", getMonthviewResize)\r\n  }\r\n\r\n  initMonth()\r\n}","import setViews from \"../../config/setViews\"\r\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\"\r\nimport fullFormConfig from \"../forms/formUtils\"\r\nimport FormSetup from \"../forms/setForm\";\r\nimport getEntryOptionModal from \"../menus/entryOptions\";\r\nimport { Week } from \"../../factory/entries\"\r\nimport locales from \"../../locales/en\"\r\nimport calcTime, { formatTime } from \"../../utilities/timeutils\"\r\n\r\nimport {\r\n  createCloseIcon,\r\n  createMeatballVertIcon,\r\n  createExpandDownIcon\r\n} from \"../../utilities/svgs\"\r\n\r\nimport {\r\n  formatStartEndDate,\r\n  getTempDates,\r\n  getFormDateObject,\r\n  getDateFromAttribute,\r\n  getDayOrdinal\r\n} from \"../../utilities/dateutils\"\r\n\r\nimport handleOverlap, {\r\n  setStylingForEvent,\r\n  updateBoxCoordinates,\r\n  setBoxTimeAttributes,\r\n  createBox,\r\n  createTemporaryBox,\r\n  getBoxDefaultStyle,\r\n  resetStyleOnClick,\r\n  createTempBoxHeader,\r\n  startEndDefault,\r\n  getOriginalBoxObject,\r\n} from \"../../utilities/dragutils\"\r\n\r\nimport { getClosest, placePopup } from \"../../utilities/helpers\"\r\n\r\nimport createToast from \"../toastPopups/toast\"\r\n\r\nimport {\r\n  toastNoCategorySelected,\r\n  removeToastNoCategorySelected,\r\n} from \"../toastPopups/toastCallbacks\"\r\n\r\n// main app sidebar\r\nconst sidebar = document.querySelector('.sidebar');\r\n// calendar overlay\r\nconst calendarContainer = document.querySelector(\".container__calendars\")\r\nconst resizeoverlay = document.querySelector(\".resize-overlay\")\r\n// weekview main grid wrapper & children\r\nconst main = document.querySelector(\".weekview\")\r\nconst container = document.querySelector(\".weekview--calendar\")\r\nconst weekviewHeader = document.querySelector(\".weekview--header\")\r\nconst weekviewHeaderDayNumber = document.querySelectorAll(\".weekview--header-day__number\")\r\nconst weekviewHeaderDay = document.querySelectorAll(\".weekview--header-day\")\r\nconst weekviewGrid = document.querySelector(\".weekview__grid\")\r\nconst cols = document.querySelectorAll(\".week--col\")\r\n// weekview top grid & children\r\nconst alldaymodule = document.querySelector(\".weekview--allday-module\")\r\nconst topCols = document.querySelectorAll(\".allday--col\")\r\nexport default function setWeekView(context, store, datepickerContext) {\r\n  const weekArray = context.getWeekArray()\r\n  let entries = store.getWeekEntries(weekArray)\r\n  let boxes = new Week(entries.day, entries.allDay);\r\n  let firstY = null;\r\n\r\n  function setDayView(e) {\r\n    let [yr, mo, da] = getDateFromAttribute(e.target, \"data-weekview-date\")\r\n    context.setDate(yr, mo, da)\r\n    context.setDateSelected(da)\r\n    context.setComponent(\"day\")\r\n    setViews(\"day\", context, store, datepickerContext)\r\n  }\r\n\r\n  function configureDaysOfWeek() {\r\n    document.querySelector(\".wv-gmt\").textContent = `UTC ${context.getGmt()}`\r\n    let hasToday;\r\n    let hasSelected;\r\n    let dayNumbers = []\r\n    let ymd = []\r\n    const today = context.getToday()\r\n    let [ty, tm, td] = [today.getFullYear(), today.getMonth(), today.getDate()]\r\n\r\n    weekArray.forEach((day, idx) => {\r\n      let [y, m, d] = [\r\n        day.getFullYear(),\r\n        day.getMonth(),\r\n        day.getDate(),\r\n      ];\r\n\r\n      dayNumbers.push(d);\r\n      ymd.push(`${y}-${m}-${d}`)\r\n\r\n      if (d === context.getDateSelected() && m === context.getMonth()) {\r\n        hasSelected = d;\r\n      }\r\n\r\n      if (d === td && m === tm && y === ty) {\r\n        hasToday = d;\r\n      }\r\n    })\r\n\r\n    dayNumbers.forEach((num, idx) => {\r\n      if (num === hasSelected) {\r\n        weekviewHeaderDayNumber[idx].classList.add(\"wvh--selected\")\r\n      } else {\r\n        weekviewHeaderDayNumber[idx].classList.remove(\"wvh--selected\")\r\n      }\r\n\r\n      if (num === hasToday) {\r\n        weekviewHeaderDayNumber[idx].classList.add(\"wvh--today\")\r\n      } else {\r\n        weekviewHeaderDayNumber[idx].classList.remove(\"wvh--today\")\r\n      }\r\n      \r\n      weekviewHeaderDayNumber[idx].textContent = num\r\n      weekviewHeaderDayNumber[idx].setAttribute(\"data-weekview-date\", ymd[idx]);\r\n      topCols[idx].setAttribute(\"data-wvtop-day\", num)\r\n    })\r\n  }\r\n\r\n  function renderSidebarDatepickerWeek() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay())\r\n      setSidebarDatepicker(context, store, datepickerContext)\r\n    }\r\n  }\r\n\r\n  function resetWeekviewBoxes() {\r\n    cols.forEach(col => { col.innerText = \"\" })\r\n    topCols.forEach(col => { col.innerText = \"\" })\r\n    main.onmousedown = null;\r\n    alldaymodule.onmousedown = null;\r\n  }\r\n  \r\n  function renderBoxes() {\r\n    cols.forEach(col => { col.innerText = \"\" })\r\n    topCols.forEach(col => { col.innerText = \"\" })\r\n\r\n    boxes.getBoxes().forEach((entry) => {\r\n      const y = entry.coordinates.y;\r\n      firstY == null || y < firstY ? (firstY = y) : null;\r\n      const col = cols[+entry.coordinates.x];\r\n      createBox(col, entry, \"week\", store.getCtgColor(entry.category))\r\n    })\r\n\r\n    const boxt = boxes.getBoxesTopLengths()\r\n    for (const k in boxt) {\r\n      const col = topCols[+k]\r\n      createBoxesTop(col, boxt[k])\r\n    }\r\n  }\r\n\r\n  function createBoxesTop(col, len) {\r\n    const cell = document.createElement(\"div\")\r\n    cell.classList.add(\"allday__cell\");\r\n    cell.classList.add(\"allday__cell--active\");\r\n\r\n    const taskicons = document.createElement(\"div\");\r\n    taskicons.classList.add(\"wv-ad--taskicons\");\r\n\r\n    const icon = document.createElement(\"div\");\r\n    icon.classList.add(\"wv-ad--taskicon\");\r\n    icon.style.backgroundColor = \"#6F0C2B\";\r\n    taskicons.appendChild(icon);\r\n\r\n    const celltitle = document.createElement(\"div\");\r\n    celltitle.classList.add(\"wv-ad--celltitle\");\r\n    celltitle.textContent = `${len} more`;\r\n    const cellexpand = document.createElement(\"div\");\r\n    cellexpand.classList.add(\"wv-ad--cellexpand\");\r\n    cellexpand.appendChild(createExpandDownIcon(\"var(--white3)\"))\r\n\r\n    cell.append(taskicons, celltitle, cellexpand);\r\n    col.appendChild(cell);\r\n  }\r\n\r\n  function createAllDayModalCell(entry, idx, col, handleCloseCallback) {\r\n    const cell = document.createElement(\"div\")\r\n    cell.classList.add(\"allday-modal__cell\")\r\n    cell.setAttribute(\"data-allday-modal-cell\", idx)\r\n    cell.setAttribute(\"data-allday-modal-cell-id\", entry.id)\r\n    cell.style.backgroundColor = store.getCtgColor(entry.category)\r\n\r\n    const cellcontent = document.createElement(\"div\")\r\n    cellcontent.classList.add(\"allday-modal__cell-content\")\r\n\r\n    const cellIcons = document.createElement(\"div\")\r\n    cellIcons.classList.add(\"allday-modal__cell-action-icons\")\r\n\r\n    const celltitle = document.createElement(\"div\")\r\n    celltitle.classList.add(\"allday-modal__celltitle\")\r\n    celltitle.textContent = entry.title;\r\n\r\n    const cellendDate = document.createElement(\"div\")\r\n    cellendDate.classList.add(\"allday-modal__cellend-date\")\r\n    cellendDate.textContent = formatStartEndDate(\r\n      new Date(entry.start), new Date(entry.end)\r\n    );\r\n\r\n    const cellcategoryTitle = document.createElement(\"div\")\r\n    cellcategoryTitle.classList.add(\"allday-modal__cellcategory-title\")\r\n    cellcategoryTitle.textContent = \"category: \" + entry.category;\r\n\r\n    const getContextMenuViaMeatball = (e) => {\r\n      getWeekViewContextMenu(entry, handleCloseCallback, e);\r\n      cell.style.filter = \"brightness(1.1)\";\r\n    }\r\n\r\n    cellcontent.append(celltitle, cellcategoryTitle, cellendDate);\r\n    cellIcons.appendChild(createMeatballVertIcon(\"var(--taskcolor\"));\r\n    cell.append(cellcontent, cellIcons);\r\n    cellIcons.onclick = getContextMenuViaMeatball;\r\n    return cell;\r\n  }\r\n\r\n  function createAllDayModal(e, col, entries, idx, cell) {\r\n    let dayofweek = locales.labels.weekdaysLong[idx]\r\n    let daynumber = col.getAttribute(\"data-wvtop-day\")\r\n    const modal = document.createElement(\"div\")\r\n    modal.classList.add(\"allday-modal\")\r\n    const rect = col.getBoundingClientRect();\r\n    let entriesoffset;\r\n    if (entries.length < 4) {\r\n      entriesoffset = parseInt(55 * entries.length) + 60;\r\n    } else {\r\n      entriesoffset = parseInt(55 * 4) + 60;\r\n    }\r\n\r\n    let [x, y] = placePopup(\r\n      240,\r\n      entriesoffset,\r\n      [\r\n        parseInt(rect.left), \r\n        parseInt(rect.top) + 24\r\n      ],\r\n      [window.innerWidth, window.innerHeight],\r\n      true,\r\n      Math.floor((window.innerWidth - 36 - weekviewGrid.offsetLeft) / 7)\r\n    )\r\n\r\n    if (x + 250 > window.innerWidth) {\r\n      modal.style.left = window.innerWidth - 246 + \"px\"\r\n    } else {\r\n      modal.style.left = x + \"px\"\r\n    }\r\n\r\n    modal.style.top = y + \"px\"\r\n\r\n    const modalheader = document.createElement(\"div\")\r\n    modalheader.classList.add(\"allday-modal__header\")\r\n\r\n    const modaltitle = document.createElement(\"div\")\r\n    modaltitle.classList.add(\"allday-modal-title\")\r\n    modaltitle.textContent = `${dayofweek}, ${locales.labels.monthsLong[weekArray[idx].getMonth()]} ${daynumber}${getDayOrdinal(daynumber)}`\r\n\r\n    const closeAlldayModalBtn = document.createElement(\"div\");\r\n    closeAlldayModalBtn.classList.add(\"close-allday-modal\");\r\n    closeAlldayModalBtn.appendChild(createCloseIcon(\"var(--white4\"));\r\n\r\n    const modalcontent = document.createElement(\"div\")\r\n    modalcontent.classList.add(\"allday-modal__content\")\r\n\r\n\r\n    const closealldayonEsc = (e) => {\r\n      if (e.key === \"Escape\") {\r\n        closealldaymodal()\r\n      }\r\n    }\r\n    const closealldaymodal = () => {\r\n      modal.remove()\r\n      resizeoverlay.classList.add(\"hide-resize-overlay\")\r\n      cell.firstChild.firstChild.style.backgroundColor = \"#6F0C2B\"\r\n      document.removeEventListener(\"keydown\", closealldayonEsc)\r\n      store.removeActiveOverlay(\"allday-modal\")\r\n      cell.classList.remove(\"allday-modal__cell--open\")\r\n    }\r\n\r\n    entries.forEach((entry, idx) => {\r\n      const cell = createAllDayModalCell(entry, idx, col, closealldaymodal)\r\n      modalcontent.appendChild(cell)\r\n    })\r\n\r\n    modalheader.append(modaltitle, closeAlldayModalBtn)\r\n    modal.append(modalheader, modalcontent)\r\n    main.insertBefore(modal, document.querySelector(\".weekview__top\"))\r\n\r\n    resizeoverlay.onclick = closealldaymodal\r\n    closeAlldayModalBtn.onclick = closealldaymodal\r\n    document.addEventListener(\"keydown\", closealldayonEsc)\r\n    store.addActiveOverlay(\"allday-modal\")\r\n  }\r\n\r\n  function openAllDayModal(e, cell) {\r\n    const col = cell.parentElement\r\n    cell.classList.add(\"allday-modal__cell--open\")\r\n    cell.firstChild.firstChild.style.backgroundColor = \"#01635b\"\r\n    const colidx = parseInt(col.getAttribute(\"data-allday-column\"))\r\n    let colentries = boxes.getBoxesByColumnTop(colidx)\r\n    if (colentries.length > 0) {\r\n      createAllDayModal(e, col, colentries, colidx, cell)\r\n      resizeoverlay.classList.remove(\"hide-resize-overlay\")\r\n    }\r\n  }\r\n\r\n  function getcol(idx) {\r\n    return document.querySelector(`[data-column-index=\"${idx}\"]`)\r\n  }\r\n\r\n  function handleWeekviewFormClose() {\r\n    document.querySelector(\".temp-week-box\")?.remove()\r\n  }\r\n\r\n  function openWeekviewForm(box, coords, category, dates, type) {\r\n    store.setFormResetHandle(\"week\", handleWeekviewFormClose);\r\n\r\n    const openForm = store.getRenderFormCallback();\r\n    const setup = new FormSetup();\r\n\r\n    const [submitType, id, title, description] = type;\r\n    setup.setSubmission(submitType, id, title, description);\r\n    if (submitType === \"create\") { box.style.opacity = 0.9; }\r\n\r\n    const [categoryName, color] = category;\r\n    setup.setCategory(\r\n      categoryName,\r\n      color,\r\n    );\r\n\r\n    const [start, end] = dates\r\n    setup.setDates(getFormDateObject(start, end));\r\n    openForm();\r\n\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n    fullFormConfig.getConfig(setup.getSetup());\r\n  }\r\n\r\n  // ***********************\r\n  // CONTEXT MENU SETUP\r\n  function getWeekViewContextMenu(entry, handleCloseCallback, e) {\r\n    const id = entry.id;\r\n    const start = entry.start;\r\n    const color = store.getCtgColor(entry.category);\r\n    const targetrect = e.target.getBoundingClientRect();\r\n    let [x, y] = placePopup(\r\n      400,\r\n      165,\r\n      [parseInt(targetrect.right), (e.clientY) + 28],\r\n      [window.innerWidth, window.innerHeight],\r\n    )\r\n\r\n    store.setFormResetHandle(\"week\", handleCloseCallback);\r\n    const setup = new FormSetup();\r\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n    setup.setCategory(entry.category, color);\r\n    setup.setDates(getFormDateObject(start, entry.end));\r\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n\r\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\r\n\r\n    const modal = document.querySelector(\".entry__options\")\r\n    modal.style.top = y + \"px\";\r\n    modal.style.left = x + \"px\";\r\n  }\r\n  // ***********************\r\n\r\n  /** DRAG NORTH, SOUTH, EAST, WEST */\r\n  function dragEngineWeek(e, box) {\r\n    setStylingForEvent(\"dragstart\", main, store)\r\n    const col = box.parentElement\r\n    const originalColumn = col.getAttribute(\"data-column-index\")\r\n    let currentColumn = col.getAttribute(\"data-column-index\")\r\n    let boxhasOnTop = false;\r\n    box.setAttribute(\"data-box-col\", currentColumn)\r\n\r\n    const startTop = +box.style.top.split(\"px\")[0]\r\n    const boxHeight = +box.style.height.split(\"px\")[0]\r\n    let startCursorY = e.pageY - weekviewGrid.offsetTop\r\n    let tempstartY = e.pageY;\r\n    let startCursorX = e.pageX;\r\n    let [movedX, movedY] = [0, 0];\r\n    let [sX, sY] = [0, 0];\r\n    let hasStyles = false;\r\n\r\n    /** DRAG NORTH SOUTH */\r\n    const mousemove = (e) => {\r\n      sX = Math.abs(e.clientX - startCursorX);\r\n      sY = Math.abs(e.clientY - tempstartY);\r\n      if (!hasStyles) {\r\n        if (sX > 3 || sY > 3) {\r\n          hasStyles = true;\r\n          document.body.style.cursor = \"move\";\r\n          if (box.classList.contains(\"box-ontop\")) {\r\n            boxhasOnTop = true;\r\n            resetStyleOnClick(\"week\", box);\r\n          }\r\n          box.classList.add(\"box-dragging\")\r\n          createTemporaryBox(box, col, boxhasOnTop, \"week\")\r\n          sX = 0;\r\n          sY = 0;\r\n        }\r\n      }\r\n\r\n      const headerOffset = weekviewGrid.offsetTop\r\n      const currentCursorY = e.pageY - headerOffset\r\n      let newOffsetY = currentCursorY - startCursorY\r\n      let newTop = Math.round((newOffsetY + startTop) / 12.5) * 12.5\r\n\r\n      if (newTop < 0 || currentCursorY < 0) {\r\n        newTop = 0\r\n        return;\r\n      } else if (newTop + boxHeight > 1188) {\r\n        return;\r\n      }\r\n\r\n      box.style.top = `${newTop}px`\r\n      /** DRAG EAST/WEST */\r\n      const direction = e.pageX - startCursorX > 0 ? \"right\" : \"left\"\r\n      const currentCursorX = e.pageX\r\n      let newOffsetX = startCursorX - currentCursorX\r\n      let leftColX;\r\n      let rightColX;\r\n\r\n      if (+currentColumn - 1 >= 0) {\r\n        leftColX = parseInt(getcol(currentColumn - 1).getBoundingClientRect().right)\r\n      } else {\r\n        leftColX = null\r\n      }\r\n\r\n      if (+currentColumn + 1 < cols.length) {\r\n        rightColX = parseInt(getcol(+currentColumn + 1).getBoundingClientRect().left)\r\n      } else {\r\n        rightColX = null;\r\n      }\r\n\r\n      if (direction === \"right\" && rightColX !== null) {\r\n        if (e.pageX >= rightColX) {\r\n          getcol(+currentColumn + 1).appendChild(box)\r\n          startCursorX = e.pageX\r\n          currentColumn = +currentColumn + 1\r\n          box.setAttribute(\"data-box-col\", +currentColumn)\r\n        }\r\n      }\r\n\r\n      if (direction === \"left\" && leftColX !== null) {\r\n        if (e.pageX <= leftColX) {\r\n          getcol(+currentColumn - 1).appendChild(box)\r\n          startCursorX = e.pageX\r\n          currentColumn = +currentColumn - 1\r\n          box.setAttribute(\"data-box-col\", +currentColumn)\r\n        }\r\n      }\r\n\r\n      movedY = newOffsetY\r\n      movedX = newOffsetX\r\n    }\r\n\r\n    function mouseup() {\r\n      const tempbox = document.querySelector(\".temporary-box\")\r\n      box.classList.remove(\"box-dragging\");\r\n      if (boxhasOnTop) { box.classList.add(\"box-ontop\") }\r\n\r\n      if (tempbox === null) {\r\n        // const reset\r\n        const setResetWv = () => {\r\n          setStylingForEvent(\"dragend\", main, store)\r\n          box.classList.remove(\"wv-box-clicked\")\r\n        }\r\n        box.classList.add(\"wv-box-clicked\")\r\n        const id = box.getAttribute(\"data-box-id\");\r\n        const entry = store.getEntry(id);\r\n        const start = entry.start;\r\n        const color = box.style.backgroundColor;\r\n        const rect = box.getBoundingClientRect()\r\n        let [x, y] = placePopup(\r\n          400,\r\n          165,\r\n          [parseInt(rect.left), parseInt(rect.top) + 56],\r\n          [window.innerWidth, window.innerHeight],\r\n          false,\r\n        );\r\n        store.setFormResetHandle(\"week\", setResetWv)\r\n\r\n        const setup = new FormSetup();\r\n        setup.setSubmission(\"edit\", id, entry.title, entry.description);\r\n        setup.setCategory(entry.category, color);\r\n        setup.setDates(getFormDateObject(start, entry.end));\r\n        fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\r\n\r\n        const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\r\n        getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\r\n\r\n        const modal = document.querySelector(\".entry__options\")\r\n        if (window.innerWidth > 580) {\r\n          modal.style.top = +y + \"px\";\r\n          modal.style.left = x + \"px\";\r\n        } else {\r\n          modal.style.top = \"64px\";\r\n        }\r\n\r\n      } else {\r\n        tempbox.remove();\r\n        setBoxTimeAttributes(box, \"week\");\r\n        const time = calcTime(\r\n          +box.getAttribute(\"data-start-time\"),\r\n          +box.getAttribute(\"data-time-intervals\")\r\n        );\r\n\r\n        box.setAttribute(\"data-time\", time);\r\n        box.children[1].children[0].textContent = time;\r\n\r\n        updateBoxCoordinates(box, \"week\", boxes);\r\n        boxes.updateStore(\r\n          store,\r\n          box.getAttribute(\"data-box-id\"),\r\n          weekArray\r\n        );\r\n        // if box is moved to a new column, update sidebar datepicker\r\n        if (currentColumn !== +originalColumn) {\r\n          renderSidebarDatepickerWeek()\r\n        };\r\n        // check if new position overlaps with other boxes and handle\r\n        let droppedCol = +box.getAttribute(\"data-box-col\");\r\n        if (boxes.getBoxesByColumn(droppedCol).length > 1) {\r\n          handleOverlap(droppedCol, \"week\", boxes)\r\n        } else {\r\n          box.setAttribute(\"box-idx\", \"box-one\")\r\n        }\r\n        setStylingForEvent(\"dragend\", main, store)\r\n      }\r\n\r\n      document.removeEventListener(\"mousemove\", mousemove)\r\n      document.removeEventListener(\"mouseup\", mouseup)\r\n    }\r\n    document.addEventListener(\"mousemove\", mousemove)\r\n    document.addEventListener(\"mouseup\", mouseup)\r\n  }\r\n\r\n  /** RESIZE NORTH/SOUTH \r\n   * resizing will never trigger form\r\n  */\r\n  function resizeBoxNS(e, box) {\r\n    setStylingForEvent(\"dragstart\", main, store);\r\n    document.body.style.cursor = \"move\";\r\n\r\n    const col = box.parentElement;\r\n    const currentColumn = col.getAttribute(\"data-column-index\");\r\n    box.setAttribute(\"data-box-col\", currentColumn);\r\n\r\n    let boxhasOnTop = false;\r\n    let boxorig = getOriginalBoxObject(box);\r\n    if (box.classList.contains(\"box-ontop\")) {\r\n      boxhasOnTop = true;\r\n      resetStyleOnClick(\"week\", box);\r\n    }\r\n\r\n    box.classList.add(\"box-resizing\")\r\n    const boxTop = box.offsetTop;\r\n    createTemporaryBox(box, col, boxhasOnTop, \"week\");\r\n\r\n    const mousemove = (e) => {\r\n      const headerOffset = weekviewGrid.offsetTop;\r\n      let amountScrolled = Math.abs(parseInt(container.getBoundingClientRect().top));\r\n      if (amountScrolled == headerOffset) {\r\n        amountScrolled -= headerOffset;\r\n      } else if (container.getBoundingClientRect().top > 0) {\r\n        amountScrolled = headerOffset - amountScrolled;\r\n      } else {\r\n        amountScrolled += headerOffset;\r\n      }\r\n\r\n      const newHeight = Math.round(((e.pageY - boxTop - headerOffset) + amountScrolled) / 12.5) * 12.5;\r\n\r\n      if (newHeight <= 12.5) {\r\n        box.style.height = '12.5px';\r\n        return;\r\n      } else if (newHeight + parseInt(box.style.top) > 1188) {\r\n        return;\r\n      } else {\r\n        box.style.height = `${newHeight}px`;\r\n      }\r\n    }\r\n\r\n    const mouseup = (e) => {\r\n      document.querySelector(\".temporary-box\").remove();\r\n      box.classList.remove(\"box-resizing\");\r\n      if (boxhasOnTop) { box.classList.add(\"box-ontop\") }\r\n\r\n      if (box.style.height === boxorig.height) {\r\n        if (boxhasOnTop) {\r\n          box.setAttribute(\"class\", boxorig.class);\r\n          box.style.left = boxorig.left;\r\n          box.style.width = boxorig.width;\r\n        }\r\n      } else {\r\n        setBoxTimeAttributes(box, \"week\");\r\n        const start = +box.getAttribute(\"data-start-time\");\r\n        const length = +box.getAttribute(\"data-time-intervals\");\r\n        const time = calcTime(start, length);\r\n        box.children[1].children[0].textContent = time;\r\n        updateBoxCoordinates(box, \"week\", boxes);\r\n\r\n        let droppedCol = +box.getAttribute(\"data-box-col\");\r\n        if (boxes.getBoxesByColumn(droppedCol).length > 1) {\r\n          handleOverlap(droppedCol, \"week\", boxes);\r\n        }\r\n\r\n        boxes.updateStore(\r\n          store,\r\n          box.getAttribute(\"data-box-id\"),\r\n          weekArray,\r\n        );\r\n      }\r\n\r\n      setStylingForEvent(\"dragend\", main, store);\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n    }\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  /** Drag down empty column to create box */\r\n  function createBoxOnDrag(e) {\r\n    setStylingForEvent(\"dragstart\", main, store);\r\n    document.body.style.cursor = \"move\";\r\n    const [tempcategory, color] = store.getFirstActiveCategoryKeyPair();\r\n    const colIdx = parseInt(e.target.getAttribute(\"data-column-index\"));\r\n\r\n    const box = document.createElement('div');\r\n    box.setAttribute(\"class\", \"box box-dragging temp-week-box\");\r\n\r\n    // boxheader is static - create from template\r\n    const boxheader = createTempBoxHeader(\"week\");\r\n    const boxcontent = document.createElement('div');\r\n    const boxtime = document.createElement('span');\r\n    const boxtimeend = document.createElement('span');\r\n    boxcontent.classList.add('box__content');\r\n    boxtime.classList.add('box-time');\r\n    boxtimeend.classList.add('box-time');\r\n\r\n\r\n    const headerOffset = +weekviewGrid.offsetTop;\r\n    const scrolled = parseInt(weekviewGrid.scrollTop);\r\n    const startCursorY = e.pageY - weekviewGrid.offsetTop;\r\n\r\n    let y = Math.round((startCursorY + Math.abs(scrolled)) / 12.5) * 12.5;\r\n    box.setAttribute(\"style\", getBoxDefaultStyle(y, color));\r\n\r\n    let coords = { y: +y / 12.5, x: colIdx, h: 1, e: 2 }\r\n    let [starthour, startmin, endhour, endmin] = startEndDefault(y);\r\n\r\n    function mousemove(e) {\r\n      const currentCursorY = e.pageY - headerOffset;\r\n      let newOffsetY = currentCursorY - startCursorY;\r\n      let newHeight = Math.round((newOffsetY) / 12.5) * 12.5;\r\n\r\n      if (newHeight <= 12.5) { newHeight = 12.5 }\r\n      if (newHeight + y > 1188) { newHeight = 1187.5 - y }\r\n      box.style.height = `${newHeight}px`;\r\n\r\n      coords.h = +newHeight / 12.5;\r\n      coords.e = +coords.y + coords.h;\r\n\r\n      endhour = Math.floor(((+newHeight + +y) / 12.5) / 4);\r\n      endmin = Math.floor(((+newHeight + +y) / 12.5) % 4) * 15\r\n      boxtime.style.wordBreak = \"break-word\";\r\n      boxtime.textContent = `${formatTime(starthour, startmin)}  `;\r\n      boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\r\n    }\r\n\r\n    boxcontent.append(boxtime, boxtimeend);\r\n    box.append(boxheader, boxcontent);\r\n    e.target.appendChild(box);\r\n\r\n    function mouseup() {\r\n      const datesData = getTempDates(\r\n        new Date(weekArray[colIdx]),\r\n        [starthour, endhour],\r\n        [startmin, endmin],\r\n      );\r\n\r\n      openWeekviewForm(\r\n        box,\r\n        coords,\r\n        [tempcategory, color],\r\n        datesData,\r\n        [\"create\", null, null, null],\r\n      );\r\n\r\n      setStylingForEvent(\"dragend\", main, store);\r\n      document.removeEventListener(\"mouseup\", mouseup);\r\n      document.removeEventListener(\"mousemove\", mousemove);\r\n    }\r\n    document.addEventListener(\"mousemove\", mousemove);\r\n    document.addEventListener(\"mouseup\", mouseup);\r\n  }\r\n\r\n  /** delegate via grid */\r\n  function delegateGridEvents(e) {\r\n    if (getClosest(e, \".weekview--header-day__number\")) {\r\n      setDayView(e)\r\n      return;\r\n    }\r\n    \r\n    if (getClosest(e, \".box-resize-s\")) {\r\n      resizeBoxNS(e, e.target.parentElement);\r\n      return;\r\n    }\r\n\r\n    if (getClosest(e, \".box\")) {\r\n      dragEngineWeek(e, e.target);\r\n      return;\r\n    }\r\n\r\n    if (getClosest(e, \".week--col\")) {\r\n      createBoxOnDrag(e, e.target);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function delegateGridTop(e) {\r\n    if (getClosest(e, \".allday--col\")) {\r\n      if (e.target.childElementCount === 0) {\r\n        return;\r\n      }\r\n      openAllDayModal(e, e.target);\r\n      return;\r\n    }\r\n  }\r\n\r\n  function renderDataForGrid() {\r\n    renderBoxes();\r\n    const colsToCheck = boxes.getColumnsWithMultipleBoxes();\r\n    colsToCheck.forEach(col => handleOverlap(col, \"week\", boxes));\r\n  }\r\n\r\n  const initWeek = () => {\r\n    configureDaysOfWeek();\r\n    renderDataForGrid();\r\n    main.onmousedown = delegateGridEvents;\r\n    alldaymodule.onmousedown = delegateGridTop;\r\n    store.setResetPreviousViewCallback(resetWeekviewBoxes)\r\n    if (firstY !== null) {\r\n      setTimeout(() => {\r\n        weekviewGrid.scrollTo({top:Math.abs((+firstY * 12.5) - 25), behavior: \"instant\"})\r\n      }, 4)\r\n    }\r\n  }\r\n  initWeek();\r\n}","import setViews from \"../../config/setViews\"\r\nimport locales from \"../../locales/en\"\r\nimport { getClosest } from \"../../utilities/helpers\"\r\nimport { getDateFromAttribute } from \"../../utilities/dateutils\"\r\nimport setSidebarDatepicker from \"../../components/menus/sidebarDatepicker\";\r\nconst monthnames = locales.labels.monthsLong\r\nconst weekDayNames = locales.labels.weekdaysNarrow\r\nconst yearviewGrid = document.querySelector(\".calendar__yearview\");\r\nconst sidebar = document.querySelector(\".sidebar\");\r\n\r\n\r\nexport default function setYearView(context, store, datepickerContext) {\r\n  const year = context.getYear();\r\n  const today = context.getToday();\r\n  const [ty, tm, td] = [today.getFullYear(), today.getMonth(), today.getDate()];\r\n  const entries = store.getGroupedYearEntries(store.getYearEntries(year));\r\n\r\n  function resetYearview() {\r\n    yearviewGrid.innerText = \"\";\r\n    yearviewGrid.onmousedown = null;\r\n  }\r\n\r\n  function renderMonthCells() {\r\n    yearviewGrid.innerText = \"\"\r\n    for (let i = 0; i < 12; i++) {\r\n      if (entries[i]) {\r\n        yearviewGrid.appendChild(createMonthCell(i, entries[i]));\r\n      } else {\r\n        yearviewGrid.appendChild(createMonthCell(i, []));\r\n      }\r\n    }\r\n  }\r\n\r\n  function renderSidebarDatepicker() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay())\r\n      setSidebarDatepicker(context, store, datepickerContext)\r\n    }\r\n  }\r\n\r\n  function createMonthCell(month, entries) {\r\n    const prevmonth = new Date(year, month, 0)\r\n    const daysInPrevMonth = prevmonth.getDate()\r\n    const nextmonth = new Date(year, month + 2, 0)\r\n    const currentMonth = new Date(year, month, 1)\r\n    const daysInMonth = new Date(year, month + 1, 0).getDate()\r\n    const firstDayOfMonth = currentMonth.getDay()\r\n\r\n    const cellWrapper = document.createElement(\"div\")\r\n    cellWrapper.classList.add(\"yv-monthcell\")\r\n\r\n    const cellHeader = document.createElement(\"div\")\r\n    cellHeader.classList.add(\"yv-monthcell__header\")\r\n\r\n    const cellHeaderRowOne = document.createElement(\"div\")\r\n    cellHeaderRowOne.classList.add(\"yv-monthcell__header--rowone\")\r\n\r\n    const cellHeaderTitle = document.createElement(\"span\")\r\n    cellHeaderTitle.textContent = monthnames[month]\r\n\r\n    if (month === context.getMonth() && year === context.getYear()) {\r\n      cellHeaderTitle.classList.add(\"yvmht-current\")\r\n      cellWrapper.classList.add(\"cell-current\")\r\n    }\r\n\r\n    cellHeaderTitle.classList.add(\"yv-monthcell__header--title\")\r\n    cellHeaderRowOne.append(cellHeaderTitle)\r\n\r\n    // cell header row two\r\n    const cellHeaderWeekDayNames = document.createElement(\"div\")\r\n    cellHeaderWeekDayNames.classList.add(\"yv-monthcell__header--weekdays\")\r\n\r\n    weekDayNames.forEach((el) => {\r\n      const weekday = document.createElement(\"div\")\r\n      weekday.classList.add(\"yv-monthcell__header--weekday\")\r\n      weekday.textContent = el\r\n      cellHeaderWeekDayNames.appendChild(weekday)\r\n    })\r\n\r\n    cellHeader.append(cellHeaderRowOne,cellHeaderWeekDayNames)\r\n\r\n    const cellBody = document.createElement(\"div\")\r\n    cellBody.classList.add(\"yv-monthcell__body\")\r\n\r\n    function populateMonths() {\r\n      let count = 0;\r\n      let prevmonthstart = daysInPrevMonth - firstDayOfMonth\r\n\r\n      const createcell = (day, classname, year, month, current) => {\r\n        const daywrapper = document.createElement(\"div\")\r\n        daywrapper.classList.add(\"yv-monthcell__body--day-wrapper\")\r\n        \r\n        const daynumber = document.createElement(\"div\")\r\n        daynumber.setAttribute(\"class\", classname);\r\n        daynumber.setAttribute(\"data-yv-date\", `${year}-${month}-${day}`);\r\n        daynumber.textContent = day;\r\n        \r\n        if (current) {\r\n          // check if day is selected\r\n          if (day === context.getDateSelected() && month === context.getMonth() && year === context.getYear()) {\r\n            daynumber.classList.add(\"yvmb-selected\")\r\n          }\r\n\r\n          // check if day is today\r\n          if (day === td && month === tm && year === ty) {\r\n            daynumber.classList.add(\"yvmb-today\")\r\n          }\r\n\r\n          // check if day has entry\r\n          if (entries[day]) {\r\n            daynumber.classList.add(\"yvmb-has-entry\")\r\n          }\r\n        }\r\n        \r\n        daywrapper.appendChild(daynumber)\r\n        return daywrapper\r\n      }\r\n\r\n\r\n      for (let i = prevmonthstart; i < daysInPrevMonth; i++) {\r\n\r\n        cellBody.appendChild(createcell(\r\n          i + 1, \r\n          \"yv-monthcell__body--day yvmb-prevnext\",\r\n          prevmonth.getFullYear(),\r\n          prevmonth.getMonth(),\r\n          false,\r\n        ))\r\n        count++\r\n      }\r\n\r\n      for (let i = 0; i < daysInMonth; i++) {\r\n        cellBody.appendChild(createcell(\r\n          i + 1, \r\n          \"yv-monthcell__body--day\",\r\n          currentMonth.getFullYear(),\r\n          currentMonth.getMonth(),\r\n          true,\r\n        ))\r\n        count++\r\n      }\r\n\r\n      let i = 0\r\n      while (count < 42) {\r\n        i++\r\n        cellBody.appendChild(createcell(\r\n          i, \r\n          \"yv-monthcell__body--day yvmb-prevnext\",\r\n          nextmonth.getFullYear(),\r\n          nextmonth.getMonth(),\r\n          false,\r\n        ))\r\n        count++\r\n      }\r\n    }\r\n    \r\n    populateMonths()\r\n    cellWrapper.append(cellHeader, cellBody)\r\n    return cellWrapper\r\n  }\r\n\r\n  function handleDaySelection(e) {\r\n    const target = e.target;\r\n    const [year, month, day] = getDateFromAttribute(target, \"data-yv-date\", null);\r\n    context.setDate(year, month, day);\r\n    context.setDateSelected(day);\r\n    context.setComponent(\"day\");\r\n    setViews(\"day\", context, store, datepickerContext);\r\n    renderSidebarDatepicker();\r\n  }\r\n\r\n  function delegateYearEvents(e) {\r\n    if (getClosest(e, \".yv-monthcell__body--day\")) {\r\n      handleDaySelection(e);\r\n    }\r\n  }\r\n\r\n  const initYearview = () => {\r\n    renderMonthCells();\r\n    yearviewGrid.onmousedown = delegateYearEvents;\r\n    store.setResetPreviousViewCallback(resetYearview);\r\n    const currentmonth = document?.querySelector(\".cell-current\")\r\n    if (currentmonth) {\r\n      setTimeout(() => {\r\n        yearviewGrid.scrollTo({\r\n          top: parseInt(currentmonth.offsetTop) - 100,\r\n          behavior: \"instant\",\r\n        });\r\n      }, 4)\r\n    }\r\n  }\r\n  initYearview();\r\n}","import { setTheme } from \"../utilities/helpers\";\r\nconst appBody = document.querySelector(\".body\");\r\nexport default function setAppDefaults(context, store) {\r\n  const animationStatus = store.getAnimationStatus();\r\n\r\n  const disableTransitionsOnLoad = () => {\r\n    setTimeout(() => {\r\n      appBody.classList.remove(\"preload\");\r\n    }, 4)\r\n  }\r\n\r\n  const setDefaultAnimationStatus = () => {\r\n    animationStatus ? appBody.classList.remove(\"disable-transitions\") : appBody.classList.add(\"disable-transitions\");\r\n  }\r\n\r\n  disableTransitionsOnLoad();\r\n  setTheme(context);\r\n  setDefaultAnimationStatus();\r\n}\r\n\r\nfunction checkLocalStorageAllowed() {\r\n  try {\r\n    localStorage.setItem(\"test\", \"test\");\r\n    localStorage.removeItem(\"test\");\r\n    return true;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport {\r\n  checkLocalStorageAllowed\r\n}","import setViews from \"./setViews\";\r\nimport setDatepicker from \"../components/menus/datepicker\";\r\nimport setSidebarDatepicker from \"../components/menus/sidebarDatepicker\";\r\nimport handleSidebarCategories from \"../components/menus/sidebarCategories\";\r\nimport { getClosest, throttle } from \"../utilities/helpers\";\r\nimport setEntryForm from \"../components/forms/entryForm\";\r\nimport handleSidebarFooter from \"../components/menus/sidebarFooter\";\r\nimport handleShortCutsModal from \"../components/menus/shortcutsModal\";\r\nimport getSidebarSubMenu from \"../components/menus/sidebarSubMenu\";\r\nimport createGoTo from \"../components/forms/goto\";\r\nimport createCategoryForm from \"../components/menus/editCategory\";\r\n\r\nconst appBody = document.querySelector(\".body\");\r\nconst colorSchemeMeta = document.getElementsByName(\"color-scheme\")[0];\r\n\r\nconst header = document.querySelector(\".h__container\");\r\nconst headerLogo = document.querySelector(\".logo\")\r\n\r\nconst toggleForm = document.querySelector(\".toggle-form\")\r\nconst sbToggleForm = document.querySelector(\".sb-toggle-form-btn\")\r\nconst sbToggleSubBtn = document.querySelector(\".sb-data-btn\")\r\nconst sbToggleThemeBtn = document.querySelector(\".sb-theme-btn\")\r\nconst formOverlay = document.querySelector(\".form-overlay\")\r\nconst form = document.querySelector(\".entries__form\")\r\n\r\nconst datepicker = document.querySelector(\".datepicker\")\r\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\")\r\nconst dateTimeWrapper = document.querySelector(\".datetime-wrapper\")\r\n\r\nconst selectElement = document.querySelector(\".select__modal\")\r\nconst selectOverlay = document.querySelector(\".change-view--overlay\")\r\nconst optionswrapper = document.querySelector(\".change-view--wrapper\")\r\nconst options = document.querySelectorAll(\".view-option\")\r\n\r\nconst sidebar = document.querySelector(\".sidebar\");\r\n\r\nconst viewsContainer = document.querySelector(\".container__calendars\")\r\nconst yearwrapper = document.querySelector(\".yearview\")\r\nconst monthwrapper = document.querySelector(\".monthview\")\r\nconst listviewBody = document.querySelector(\".listview__body\");\r\n\r\nconst collapsebtn = document.querySelector(\".collapse-view\")\r\n\r\nexport default function renderViews(context, datepickerContext, store) {\r\n  function setColorScheme() {\r\n    const darkicon = document.querySelector(\".sbti-one\")\r\n    const lighticon = document.querySelector(\".sbti-two\")\r\n    const contrasticon = document.querySelector(\".sbti-three\")\r\n\r\n    const setlight = () => {\r\n      context.setColorScheme(\"light\")\r\n      colorSchemeMeta.setAttribute(\"content\", \"light\");\r\n      appBody.classList.add(\"light-mode\");\r\n      appBody.classList.remove(\"contrast-mode\")\r\n      darkicon.classList.add(\"sb-theme-icon-hide\")\r\n      contrasticon.classList.add(\"sb-theme-icon-hide\")\r\n      lighticon.classList.remove(\"sb-theme-icon-hide\")\r\n    }\r\n\r\n    const setdark = () => {\r\n      context.setColorScheme(\"dark\")\r\n      colorSchemeMeta.setAttribute(\"content\", \"dark light\");\r\n      appBody.classList.remove(\"light-mode\");\r\n      appBody.classList.remove(\"contrast-mode\")\r\n      darkicon.classList.remove(\"sb-theme-icon-hide\")\r\n      contrasticon.classList.add(\"sb-theme-icon-hide\")\r\n      lighticon.classList.add(\"sb-theme-icon-hide\")\r\n    }\r\n\r\n    const setcontrast = () => {\r\n      context.setColorScheme(\"contrast\")\r\n      colorSchemeMeta.setAttribute(\"content\", \"dark\");\r\n      appBody.classList.remove(\"light-mode\");\r\n      appBody.classList.add(\"contrast-mode\")\r\n      contrasticon.classList.remove(\"sb-theme-icon-hide\")\r\n      darkicon.classList.add(\"sb-theme-icon-hide\")\r\n      lighticon.classList.add(\"sb-theme-icon-hide\")\r\n    }\r\n\r\n    const currentScheme = context.getColorScheme()\r\n    if (currentScheme === \"light\") {\r\n      setdark()\r\n    } else if (currentScheme === \"dark\") {\r\n      setcontrast()\r\n    } else {\r\n      setlight()\r\n    }\r\n  }\r\n\r\n  function fullRender(component) {\r\n    setViews(component, context, store, datepickerContext);\r\n  }\r\n\r\n  function setInitialAttributes() {\r\n    selectElement.setAttribute(\"data-value\", `${context.getComponent().slice(0, 1).toUpperCase()}`)\r\n\r\n    headerLogo.setAttribute(\"data-current-day-of-month\", new Date().getDate())\r\n  }\r\n\r\n  function renderSidebarDatepicker() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay())\r\n      setSidebarDatepicker(context, store, datepickerContext)\r\n    }\r\n  }\r\n\r\n  function renderSidebarCategories() {\r\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n      handleSidebarCategories(context, store, datepickerContext)\r\n      handleSidebarFooter(store)\r\n    }\r\n  }\r\n\r\n  function getPreviousDay() {\r\n    context.setPrevDay()\r\n    fullRender(\"day\")\r\n    context.setDateSelected(context.getDay())\r\n    renderSidebarDatepicker()\r\n  }\r\n\r\n  function getNextDay() {\r\n    context.setNextDay()\r\n    fullRender(\"day\")\r\n    context.setDateSelected(context.getDay())\r\n    renderSidebarDatepicker()\r\n  }\r\n\r\n  function getPreviousWeek() {\r\n    context.setPrevWeek()\r\n    fullRender(\"week\")\r\n    renderSidebarDatepicker()\r\n  }\r\n\r\n  function getNextWeek() {\r\n    context.setNextWeek()\r\n    fullRender(\"week\")\r\n    renderSidebarDatepicker()\r\n  }\r\n\r\n  function getPreviousMonth() {\r\n    context.setPrevMonth()\r\n    fullRender(\"month\")\r\n    renderSidebarDatepicker()\r\n  }\r\n\r\n  function getNextMonth() {\r\n    context.setNextMonth()\r\n    fullRender(\"month\")\r\n    renderSidebarDatepicker()\r\n  }\r\n\r\n  function getPreviousYear() {\r\n    context.setPrevYear()\r\n    fullRender(\"year\")\r\n    renderSidebarDatepicker()\r\n    return;\r\n  }\r\n\r\n  function getNextYear() {\r\n    context.setNextYear()\r\n    fullRender(\"year\")\r\n    renderSidebarDatepicker()\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * handleTransition\r\n   * @desc  The main purpose of this function is to handle situations where a user is holding down a hotkey to navigate through previous and next periods. Rather than having the swipe fire every single time, it will wait until after the user has stopped holding down the hotkey.\r\n   * Same goes for swipe gestures/prev & next button clicks.\r\n   * \r\n   * @param {HTMLElement} view (current calendar view to be transitioned)\r\n   * @param {String} keyframeDirection (direction of the keyframe animation) prev/next period\r\n   * @param {Function} callback (load next and previous periods)\r\n   */\r\n  let tm = 250; // define timeout out of scope so that it can be \r\n  function handleTransition(view, keyframeDirection, callback) {\r\n    if (!store.getAnimationStatus()) {\r\n      callback()\r\n      return;\r\n    } else {\r\n      const removeslide = (dir) => {\r\n        dir === \"left\" ? view.classList.remove(\"transition--right\") : view.classList.remove(\"transition--left\");\r\n      }\r\n\r\n      if (!view.classList.contains(\"weekview--header\")) {\r\n        viewsContainer.style.overflowX = \"hidden\";\r\n        setTimeout(() => {\r\n          viewsContainer.style.overflowX = \"auto\";\r\n        }, 200);\r\n      }\r\n\r\n      removeslide(keyframeDirection)\r\n      const slide = `transition--${keyframeDirection}`\r\n      if (view.classList.contains(slide)) {\r\n        // prevent transition from firing too often\r\n        callback()\r\n        tm += 250\r\n      } else {\r\n        view.classList.add(slide)\r\n        setTimeout(() => {\r\n          view.classList.remove(slide)\r\n        }, tm)\r\n        callback()\r\n        tm = 250;\r\n      }\r\n    }\r\n  }\r\n\r\n  // define a means for opening the form then provide it to the store so that it can be accessed by other components\r\n  function handleForm() {\r\n    setEntryForm(context, store, datepickerContext)\r\n\r\n    form.setAttribute(\"style\", \"top:5%;left:5%;right:5%;bottom:5%;margin:auto;\")\r\n    form.classList.remove(\"hide-form\")\r\n    formOverlay.classList.remove(\"hide-form-overlay\")\r\n    store.addActiveOverlay(\"hide-form-overlay\")\r\n\r\n    function closeform(e) {\r\n      if (e.target === formOverlay) {\r\n        form.classList.add(\"hide-form\");\r\n        formOverlay.classList.add(\"hide-form-overlay\");\r\n        store.removeActiveOverlay(\"hide-form-overlay\");\r\n        formOverlay.onclick = null;\r\n        // formOverlay.removeEventListener(\"click\", closeform)\r\n      }\r\n    }\r\n    formOverlay.onclick = closeform\r\n    // formOverlay.addEventListener(\"click\", closeform)\r\n  }\r\n\r\n  // the submenu (meatball? menu) adjacent to \"create\" button in sidebar\r\n  // opens instance of settings menu\r\n  function handleToggleSubmenu() {\r\n    getSidebarSubMenu(store, context)\r\n  }\r\n\r\n  // open / close sidebar\r\n  // triggers via \"s\" keypress or by clicking on the hamburger menu icon\r\n  // will also trigger in instances where the user tries to create a new entry on a blank day but no categories are selected.\r\n  function handleBtnMainMenu() {\r\n    const currentSidebarState = context.getSidebarState()\r\n    if (currentSidebarState === \"hide\") {\r\n      toggleForm.classList.remove(\"hide-toggle--form\")\r\n      viewsContainer.classList.remove(\"container__calendars-sb-active\")\r\n      sidebar.classList.add(\"hide-sidebar\");\r\n      dateTimeWrapper.classList.remove(\"datetime-inactive\");\r\n      listviewBody.removeAttribute(\"style\");\r\n    } else {\r\n      // if a callback has been provided to the store (from the datepicker), this means that the header datepicker is open and needs to be closed to prevent two calendars that share the same date state from coinciding.\r\n      // this can only happen if datepicker is open and user presses \"s\" on their keyboard to open sidebar\r\n\r\n      const resetdatepicker = store.getResetDatepickerCallback()\r\n      if (resetdatepicker !== null) {\r\n        resetdatepicker()\r\n        store.setResetDatepickerCallback(null)\r\n      }\r\n\r\n      listviewBody.style.width = \"100%\";\r\n      listviewBody.style.marginLeft = \"0\";\r\n\r\n      toggleForm.classList.add(\"hide-toggle--form\")\r\n      viewsContainer.classList.add(\"container__calendars-sb-active\")\r\n      dateTimeWrapper.classList.add(\"datetime-inactive\");\r\n      sidebar.classList.remove(\"hide-sidebar\");\r\n\r\n      datepickerContext.setDate(\r\n        context.getYear(), context.getMonth(), context.getDay()\r\n      );\r\n      datepickerContext.setDateSelected(context.getDay())\r\n\r\n      renderSidebarCategories();\r\n      renderSidebarDatepicker();\r\n      sbToggleSubBtn.onclick = handleToggleSubmenu\r\n      sbToggleThemeBtn.onclick = setColorScheme;\r\n    }\r\n  }\r\n\r\n  function handleBtnToday() {\r\n    if (!context.isToday() && context.getComponent() !== \"list\") {\r\n      let tempdate = new Date();\r\n      context.setDate(\r\n        tempdate.getFullYear(),\r\n        tempdate.getMonth(),\r\n        tempdate.getDate(),\r\n      )\r\n\r\n      fullRender(context.getComponent())\r\n      renderSidebarDatepicker()\r\n    }\r\n  }\r\n\r\n  function handleBtnPrev() {\r\n    switch (context.getComponent()) {\r\n      case \"day\":\r\n        handleTransition(\r\n          document.querySelector(\".dayview--header-day__number\"),\r\n          \"right\",\r\n          getPreviousDay\r\n        );\r\n        break;\r\n      case \"week\":\r\n        handleTransition(\r\n          document.querySelector(\".weekview--header\"),\r\n          \"right\",\r\n          getPreviousWeek\r\n        );\r\n        break;\r\n      case \"month\":\r\n        handleTransition(monthwrapper, \"right\", getPreviousMonth)\r\n        break;\r\n      case \"year\":\r\n        handleTransition(yearwrapper, \"right\", getPreviousYear)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  function handleBtnNext() {\r\n    switch (context.getComponent()) {\r\n      case \"day\":\r\n        handleTransition(\r\n          document.querySelector(\".dayview--header-day__number\"),\r\n          \"left\",\r\n          getNextDay\r\n        );\r\n        break;\r\n      case \"week\":\r\n        handleTransition(\r\n          document.querySelector(\".weekview--header\"),\r\n          \"left\",\r\n          getNextWeek\r\n        );\r\n        break;\r\n      case \"month\":\r\n        handleTransition(monthwrapper, \"left\", getNextMonth)\r\n        break;\r\n      case \"year\":\r\n        handleTransition(yearwrapper, \"left\", getNextYear)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  function handleDatePickerBtn(e) {\r\n    datepicker.classList.remove(\"hide-datepicker\")\r\n    datepickeroverlay.classList.remove(\"hide-datepicker-overlay\")\r\n    datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay())\r\n    const rect = e.target.getBoundingClientRect()\r\n    const newDatepickerLeft = parseInt(rect.left)\r\n    // convert rect left into a percentage so that it scales with window resize\r\n    const perc = parseInt((newDatepickerLeft / window.innerWidth) * 100)\r\n    datepicker.setAttribute(\"style\", `left:${perc}%;top:12px;`)\r\n    setDatepicker(context, store, datepickerContext, \"header\")\r\n\r\n  }\r\n\r\n  function setOptionStyle(option) {\r\n    const views = ['day', 'week', 'month', 'year', 'list']\r\n    const activeIndex = views.indexOf(option)\r\n    for (let i = 0; i < options.length; i++) {\r\n      if (i === activeIndex) {\r\n        options[i].classList.add(\"change-view--option__active\")\r\n      } else {\r\n        options[i].classList.remove(\"change-view--option__active\")\r\n      }\r\n    }\r\n  }\r\n\r\n  function closeOptionsModal() {\r\n    selectElement.classList.remove(\"selection--active\")\r\n    selectOverlay.style.display = \"none\";\r\n    selectOverlay.classList.add(\"toggle-options\")\r\n    optionswrapper.classList.add(\"toggle-options\")\r\n    optionswrapper.classList.remove(\"toggle-animate\")\r\n  }\r\n\r\n  function renderOption(option, initialRender) {\r\n    const comp = context.getComponent()\r\n    if (option === comp && !initialRender) return;\r\n    closeOptionsModal()\r\n    context.setComponent(option)\r\n    fullRender(option)\r\n    setOptionStyle(option)\r\n    // week datepicker is the only one that has any stylistic difference\r\n    if (comp || option === \"week\") {\r\n      renderSidebarDatepicker()\r\n    }\r\n    document.activeElement.blur()\r\n  }\r\n\r\n  function handleSelect(e) {\r\n    selectElement.classList.add(\"selection--active\")\r\n    selectOverlay.classList.remove(\"toggle-options\")\r\n    selectOverlay.style.display = \"block\";\r\n    optionswrapper.classList.remove(\"toggle-options\")\r\n    optionswrapper.classList.add(\"toggle-animate\")\r\n    const setOption = (e) => {\r\n      const option = e.target.getAttribute(\"data-view-option\");\r\n      renderOption(option);\r\n    }\r\n    optionswrapper.onclick = setOption\r\n    selectOverlay.onclick = closeOptionsModal\r\n  }\r\n\r\n  // EVENT DELEGATION : HEADER ELEMENTS\r\n  function delegateHeaderEvents(e) {\r\n    e.preventDefault();\r\n    const btnMainMenu = getClosest(e, \".menu\");\r\n    const btnToday = getClosest(e, \".btn-today\");\r\n    const btnPrev = getClosest(e, \".prev\");\r\n    const btnNext = getClosest(e, \".next\");\r\n    const dateTime = getClosest(e, \".datetime-content\");\r\n    const search = getClosest(e, \".h-search\");\r\n    const settings = getClosest(e, \".settings\");\r\n    const select = getClosest(e, \".select__modal\");\r\n\r\n    if (btnMainMenu) {\r\n      context.toggleSidebarState();\r\n      handleBtnMainMenu();\r\n      return;\r\n    }\r\n\r\n    if (btnToday) {\r\n      handleBtnToday();\r\n      return;\r\n    }\r\n\r\n    if (btnPrev) {\r\n      handleBtnPrev();\r\n      return;\r\n    }\r\n\r\n    if (btnNext) {\r\n      handleBtnNext();\r\n      return;\r\n    }\r\n\r\n    if (dateTime) {\r\n      handleDatePickerBtn(e);\r\n      return;\r\n    }\r\n\r\n    if (search) {\r\n      createGoTo(context, store, datepickerContext);\r\n      return;\r\n    }\r\n\r\n    if (settings) {\r\n      handleToggleSubmenu(e);\r\n      return;\r\n    }\r\n\r\n    if (select) {\r\n      handleSelect(e);\r\n      return;\r\n    }\r\n  }\r\n\r\n  /* configure keyboard shortcuts */\r\n  /* 2022-01-14\r\n  * Google calendar has recently updated their app wide throttling from a global value of around 150 to the minimum of 4ms(might be 10) for period changes and (250-300) for view changes. \r\n  * For now, I'm keeping global throttle at 150ms. \r\n  */\r\n  function delegateGlobalKeyDown(e) {\r\n    const toggleChangeview = (e) => {\r\n      if (selectElement.classList.contains(\"selection--active\")) {\r\n        if (e.key.toLowerCase() === \"v\") {\r\n          closeOptionsModal()\r\n        }\r\n      } else {\r\n        handleSelect();\r\n      }\r\n    }\r\n\r\n    switch (e.key.toLowerCase()) {\r\n      // switch to day view\r\n      case \"d\":\r\n        renderOption(\"day\");\r\n        break;\r\n      case \"1\":\r\n        renderOption(\"day\");\r\n        break;\r\n\r\n      // switch to week view\r\n      case \"w\":\r\n        renderOption(\"week\");\r\n        break;\r\n      case \"2\":\r\n        renderOption(\"week\");\r\n        break;\r\n\r\n      // switch to month view\r\n      case \"m\":\r\n        renderOption(\"month\");\r\n        break;\r\n      case \"3\":\r\n        renderOption(\"month\");\r\n        break;\r\n\r\n      // switch to year view\r\n      case \"y\":\r\n        renderOption(\"year\");\r\n        break;\r\n      case \"4\":\r\n        renderOption(\"year\");\r\n        break;\r\n\r\n      // switch to list view\r\n      case \"l\":\r\n        renderOption(\"list\");\r\n        break;\r\n      case \"5\":\r\n        renderOption(\"list\");\r\n        break;\r\n\r\n      // toggle sidebar open/close\r\n      case \"s\":\r\n        context.toggleSidebarState();\r\n        handleBtnMainMenu();\r\n        break;\r\n\r\n      // toggle form open (close with escape)\r\n      case \"f\":\r\n        handleForm();\r\n        break;\r\n\r\n      // open \"views\" menu\r\n      case \"v\":\r\n        toggleChangeview(e);\r\n        break;\r\n\r\n      // (day/week) next month\r\n      case \"p\":\r\n        handleBtnPrev();\r\n        break;\r\n\r\n      // (day/week) prev month\r\n      case \"n\":\r\n        handleBtnNext();\r\n        break;\r\n\r\n      // set date to today\r\n      case \"t\":\r\n        handleBtnToday();\r\n        break;\r\n\r\n      // open submenu\r\n      case \"a\":\r\n        handleToggleSubmenu();\r\n        break;\r\n\r\n      // open keyboard shortcuts modal\r\n      case \"?\":\r\n        handleShortCutsModal(store);\r\n        break;\r\n      case \"/\":\r\n        handleShortCutsModal(store);\r\n        break;\r\n\r\n      // toggle between light/dark mode\r\n      case \"0\":\r\n        setColorScheme()\r\n        break;\r\n\r\n      // opens search modal\r\n      case \"g\":\r\n        createGoTo(context, store, datepickerContext);\r\n        // document.querySelector(\"\")\r\n        break;\r\n\r\n      case \"+\":\r\n        const targetcat = {\r\n          name: \"new category\",\r\n          color: \"#2C52BA\",\r\n        }\r\n        createCategoryForm(store, targetcat, false, null);\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  const getKeyPressThrottled = throttle(delegateGlobalKeyDown, 150)\r\n  // shortcuts defined within this function are global and will work anywhere within the application (except for modal/popup/form windows)\r\n\r\n  // If a modal/popup is open, all keyboard shortcuts defined within this function will be disabled until the modal/popup is closed.\r\n  // Note that Each modal/popup has its own keydown close event on escape thats defined within the scope of its own function,\r\n  // once it is closed, the event listener is removed from the DOM.\r\n  let [lk, lk2] = ['', ''];\r\n  function handleGlobalKeydown(e) {\r\n    if (!store.getShortcutsStatus()) return;\r\n    if (store.hasActiveOverlay()) return;\r\n\r\n    // prevent ctrl + key shortcuts from triggering at all\r\n    lk = e.key;\r\n    if (lk === \"Control\") {\r\n      lk2 = \"Control\";\r\n      return;\r\n    }\r\n    if (lk2 === \"Control\" && lk !== \"Control\") {\r\n      lk2 = \"\";\r\n      return;\r\n    }\r\n\r\n    getKeyPressThrottled(e);\r\n  }\r\n\r\n  function handleCollapse() {\r\n    const view = context.getComponent();\r\n    const headers = {\r\n      ['day']: {\r\n        component: document.querySelector(\".dayview--header\"),\r\n        collapse: \"dvh-collapse\",\r\n      },\r\n      ['week']: {\r\n        component: document.querySelector(\".weekview--header\"),\r\n        componentBody: document.querySelector(\".weekview__grid\"),\r\n        collapse: \"wvh-collapse\",\r\n        componentBodytoggle: \"wvh-body-collapse\"\r\n      },\r\n    };\r\n    const eyeIcons = {\r\n      on: document.querySelector(\".cv-svg-on\"),\r\n      off: document.querySelector(\".cv-svg-off\")\r\n    }\r\n\r\n    if (view === \"week\" || view === \"day\") {\r\n      eyeIcons.on.classList.toggle(\"hide-cbt\");\r\n      eyeIcons.off.classList.toggle(\"hide-cbt\");\r\n      headers[view].component.classList.toggle(headers[view].collapse);\r\n      if (view === \"week\") {\r\n        headers[view].componentBody.classList.toggle(headers[view].componentBodytoggle)\r\n      }\r\n    }\r\n  }\r\n\r\n  const appinit = () => {\r\n    /*************************/\r\n    // render initial view and set initial attributes\r\n    renderOption(context.getComponent(), true);\r\n    setInitialAttributes();\r\n    handleBtnMainMenu();\r\n    /*************************/\r\n    // supply callbacks to store for opening form and sidebar\r\n    store.setRenderFormCallback(handleForm);\r\n    const ensureSidebarIsOpen = () => {\r\n      context.setSidebarState(\"open\");\r\n      handleBtnMainMenu();\r\n    }\r\n    store.setRenderSidebarCallback(ensureSidebarIsOpen);\r\n    /*************************/\r\n    // establish delegation\r\n    toggleForm.onclick = handleForm;\r\n    sbToggleForm.onclick = handleForm;\r\n    collapsebtn.onclick = handleCollapse;\r\n\r\n    header.onmousedown = delegateHeaderEvents;\r\n    document.addEventListener(\"keydown\", handleGlobalKeydown);\r\n  }\r\n  appinit();\r\n}","import setHeader from \"../components/menus/header\"\r\nimport setYearView from \"../components/views/yearview\"\r\nimport setMonthView from \"../components/views/monthview\"\r\nimport setWeekView from \"../components/views/weekview\"\r\nimport setDayView from \"../components/views/dayview\"\r\nimport setListView from \"../components/views/listview\"\r\n// import setListView from \"../components/views/listview\"\r\n\r\nconst yearComponent = document.querySelector(\".yearview\")\r\nconst monthComponent = document.querySelector(\".monthview\")\r\nconst weekComponent = document.querySelector(\".weekview\")\r\nconst dayComponent = document.querySelector(\".dayview\")\r\nconst listComponent = document.querySelector(\".listview\")\r\n\r\n\r\n/**\r\n * \r\n * @param {string} component \r\n * @param {object} context \r\n * @param {object} store \r\n * @param {object} datepickerContext \r\n * @desc  hides all views and renders @component passed in\r\n * \r\n */\r\n\r\nlet [prev1, prev2] = [null, null];\r\nexport default function setViews(component, context, store, datepickerContext) {\r\n  prev1 = prev2;\r\n  prev2 = component;\r\n\r\n\r\n  function hideViews() {\r\n    const views = [\r\n      yearComponent, \r\n      monthComponent, \r\n      weekComponent, \r\n      dayComponent,\r\n      listComponent\r\n    ];\r\n\r\n    // reset previous view after switching to a new view\r\n    const resetPrevView = store.getResetPreviousViewCallback()\r\n    if (prev1 !== null && resetPrevView !== null && prev1 !== prev2) {\r\n      resetPrevView();\r\n    }\r\n    \r\n    // only the month view relies on a resize listener\r\n    // more info provided @readme > monthview > box queries\r\n    views.forEach((view) => {\r\n      view.classList.add(\"hide-view\")\r\n      if (view !== monthComponent) {\r\n        window.removeEventListener(\"resize\", store.getResizeHandle(\"month\"))\r\n      }\r\n    })\r\n  }\r\n\r\n  function initView(component) {\r\n    switch (component) {\r\n      case \"day\":\r\n        context.setComponent(component);\r\n        setHeader(context, component);\r\n        setDayView(context, store, datepickerContext);\r\n        dayComponent.classList.remove(\"hide-view\");\r\n        break;\r\n      case \"week\":\r\n        context.setComponent(component);\r\n        setHeader(context, component);\r\n        setWeekView(context, store, datepickerContext);\r\n        weekComponent.classList.remove(\"hide-view\");\r\n        break;\r\n      case \"month\":\r\n        context.setComponent(component);\r\n        setHeader(context, component);\r\n        setMonthView(context, store, datepickerContext);\r\n        monthComponent.classList.remove(\"hide-view\");\r\n        window.addEventListener(\"resize\", store.getResizeHandle(\"month\"))\r\n        break;\r\n      case \"year\":\r\n        context.setComponent(component);\r\n        setHeader(context, component);\r\n        setYearView(context, store, datepickerContext);\r\n        yearComponent.classList.remove(\"hide-view\");\r\n        break;\r\n      case \"list\":\r\n        context.setComponent(component);\r\n        setHeader(context, component, store);\r\n        setListView(context, store, datepickerContext);\r\n        listComponent.classList.remove(\"hide-view\");\r\n        break;\r\n      default:\r\n        context.setComponent(\"month\");\r\n        setHeader(context, \"month\");\r\n        setMonthView(context, store, datepickerContext);\r\n        monthComponent.classList.remove(\"hide-view\");\r\n        break;\r\n    }\r\n  }\r\n\r\n  hideViews();\r\n  document.title = context.getMonthName();\r\n  initView(component);\r\n}","import { compareDates } from \"../utilities/dateutils\"\r\nimport locales from \"../locales/en\"\r\nconst labels = locales.labels;\r\n\r\n\r\n/*\r\n\"setDateDefaults\",\r\n\"setSchemaDefaults\",\r\n\"setDefaults\",\r\n\"getAllMethodNames\",\r\n\"getColorScheme\",\r\n\"setColorScheme\",\r\n\"setSidebarState\",\r\n\"toggleSidebarState\",\r\n\"getComponent\",\r\n\"setComponent\",\r\n\"getSidebarState\",\r\n\"setDay\",\r\n\"setMonth\",\r\n\"setYear\",\r\n\"setDate\",\r\n\"setDateSelected\",\r\n\"setPrevDay\",\r\n\"setPrevWeek\",\r\n\"setPrevMonth\",\r\n\"setPrevYear\",\r\n\"setNextDay\",\r\n\"setNextWeek\",\r\n\"setNextMonth\",\r\n\"setNextYear\",\r\n\r\n\"getGmt\",\r\n\"getDateSelected\",\r\n\"getDay\",\r\n\"getMonth\",\r\n\"getYear\",\r\n\"getDate\",\r\n\"getToday\",\r\n\"getWeek\",\r\n\"getWeekday\",\r\n\"getWeekArray\",\r\n\"getWeekRange\",\r\n\"getWeekNumber\",\r\n\"getMonthName\",\r\n\"getDaysInMonth\",\r\n\"getMonthArrayStartDay\",\r\n\"getMonthArrayStart\",\r\n\"getMonthArrayEndDay\",\r\n\"getMonthArrayEnd\",\r\n\"getMonthArray\",\r\n\"isToday\"\r\n*/\r\nclass Context {\r\n  constructor() {\r\n    this.colorScheme = \"dark\";\r\n    this.component = \"month\";\r\n    this.sidebarState = \"hide\";\r\n    this.date = new Date();\r\n    this.gmt = new Date().getTimezoneOffset() / 60;\r\n\r\n    this.dateSelected = 1;\r\n    this.daySelected = this.date.getDate();\r\n    this.monthSelected = this.date.getMonth();\r\n    this.yearSelected = this.date.getFullYear();\r\n\r\n\r\n    this.month = this.getMonth();\r\n    this.monthArray = this.getMonthArray();\r\n    this.week = this.getWeek();\r\n  }\r\n\r\n  setDateDefaults() {\r\n    if (localStorage.getItem(\"yearSelected\") === null) {\r\n      if (this.yearSelected === undefined) {\r\n        this.yearSelected = this.date.getFullYear();\r\n      }\r\n      Context.setLocalYear(this.yearSelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"monthSelected\") === null) {\r\n      if (this.monthSelected === undefined) {\r\n        this.monthSelected = this.date.getMonth();\r\n      }\r\n      Context.setLocalMonth(this.monthSelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"daySelected\") === null) {\r\n      if (this.daySelected === undefined) {\r\n        this.daySelected = this.date.getDate();\r\n      }\r\n      Context.setLocalDay(this.daySelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"dateSelected\") === null) {\r\n      if (this.dateSelected === undefined) {\r\n        this.dateSelected = 1;\r\n      }\r\n      Context.setLocalDateSelected(this.dateSelected);\r\n    }\r\n  }\r\n\r\n  setSchemaDefaults() {\r\n    if (localStorage.getItem(\"colorScheme\") === null) {\r\n      if (this.colorScheme === undefined) {\r\n        this.colorScheme = \"dark\";\r\n      }\r\n      Context.setLocalColorScheme(this.colorScheme);\r\n    }\r\n\r\n    if (localStorage.getItem(\"component\") === null) {\r\n      if (this.component === undefined) {\r\n        this.component = \"month\";\r\n      }\r\n      Context.setLocalComponent(this.component);\r\n    }\r\n\r\n    if (localStorage.getItem(\"sidebarState\") === null) {\r\n      if (this.sidebarState === undefined) {\r\n        this.sidebarState = \"hide\";\r\n      }\r\n      Context.setLocalSidebarState(this.sidebarState);\r\n    }\r\n  }\r\n\r\n  setDefaults() {\r\n    this.setSchemaDefaults();\r\n    this.setDateDefaults();\r\n  }\r\n\r\n  /* **************************************** */\r\n  /* LOCAL STATE MANAGEMENT */\r\n  static getLocalDay() {\r\n    return +localStorage.getItem(\"daySelected\") === undefined ? 1 : +localStorage.getItem(\"daySelected\");\r\n  }\r\n\r\n  static getLocalMonth() {\r\n    return +localStorage.getItem(\"monthSelected\") === undefined ? 1 : +localStorage.getItem(\"monthSelected\");\r\n  }\r\n\r\n  static getLocalYear() {\r\n    return +localStorage.getItem(\"yearSelected\") === undefined ? 1 : +localStorage.getItem(\"yearSelected\");\r\n  }\r\n\r\n  static getLocalDateSelected() {\r\n    return +localStorage.getItem(\"dateSelected\");\r\n  }\r\n\r\n  static getLocalComponent() {\r\n    return localStorage.getItem(\"component\");\r\n  }\r\n\r\n  static getLocalColorScheme() {\r\n    return localStorage.getItem(\"colorScheme\");\r\n  }\r\n\r\n  static getLocalSidebarState() {\r\n    return localStorage.getItem(\"sidebarState\");\r\n  }\r\n\r\n  static setLocalDay(day) {\r\n    localStorage.setItem(\"daySelected\", day);\r\n  }\r\n\r\n  static setLocalMonth(month) {\r\n    localStorage.setItem(\"monthSelected\", month);\r\n  }\r\n\r\n  static setLocalYear(year) {\r\n    localStorage.setItem(\"yearSelected\", year);\r\n  }\r\n\r\n  static setLocalDateSelected(date) {\r\n    localStorage.setItem(\"dateSelected\", date);\r\n  }\r\n\r\n  static setLocalComponent(component) {\r\n    localStorage.setItem(\"component\", component);\r\n  }\r\n\r\n  static setLocalSidebarState(state) {\r\n    localStorage.setItem(\"sidebarState\", state);\r\n  }\r\n\r\n  static setLocalColorScheme(colorScheme) {\r\n    localStorage.setItem(\"colorScheme\", colorScheme);\r\n  }\r\n  /* **************************************** */\r\n\r\n\r\n  /* **************************************** */\r\n  /* TESTING -- DEV ONLY */\r\n  getAllMethodNames() {\r\n    return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(\r\n      (method) => {\r\n        return method !== \"constructor\" && method !== \"getStoreStats\";\r\n      }\r\n    );\r\n  }\r\n\r\n  /* **************************************** */\r\n  /* APPLICATION THEME (DARK/LIGHT) */\r\n  getColorScheme() {\r\n    return Context.getLocalColorScheme();\r\n  }\r\n  setColorScheme(colorScheme) {\r\n    this.colorScheme = colorScheme;\r\n    Context.setLocalColorScheme(colorScheme);\r\n  }\r\n  setSidebarState(state) {\r\n    this.sidebarState = state;\r\n    Context.setLocalSidebarState(state);\r\n  }\r\n  toggleSidebarState() {\r\n    this.sidebarState = this.getSidebarState() === \"open\" ? \"hide\" : \"open\";\r\n    Context.setLocalSidebarState(this.sidebarState);\r\n  }\r\n  /* **************************************** */\r\n\r\n\r\n  /* **************************************** */\r\n  /* APPLICATION CURRENT COMPONENT */\r\n  getComponent() {\r\n    return Context.getLocalComponent() || \"month\";\r\n  }\r\n  setComponent(component) {\r\n    this.component = component;\r\n    Context.setLocalComponent(component);\r\n  }\r\n  getSidebarState() {\r\n    return Context.getLocalSidebarState() || \"hide\";\r\n  }\r\n  /* **************************************** */\r\n\r\n\r\n\r\n  /* **************************************** */\r\n  /* APPLICATION DATE HANDLING */\r\n  // set the current date for the following\r\n  /* DAY, MONTH, YEAR, DATE, DAY_SELECTED */\r\n  setDay(day) {\r\n    this.daySelected = day;\r\n    Context.setLocalDay(day);\r\n  }\r\n\r\n  setMonth(month) {\r\n    this.monthSelected = month;\r\n    Context.setLocalMonth(month);\r\n  }\r\n\r\n  setYear(year) {\r\n    this.yearSelected = year;\r\n    Context.setLocalYear(year);\r\n  }\r\n\r\n  setDate(year, month, day) {\r\n    this.setYear(year);\r\n    this.setMonth(month);\r\n    this.setDay(day);\r\n  }\r\n\r\n  setDateSelected(date) {\r\n    this.dateSelected = date;\r\n    Context.setLocalDateSelected(date);\r\n  }\r\n  /* ************** */\r\n  // Take current date and set it to previous day/week/month/year\r\n  /* PREVIOUS : DAY, WEEK, MONTH, YEAR */\r\n  setPrevDay() {\r\n    const prevDay = new Date(\r\n      this.getYear(), this.getMonth(), this.getDay() - 1\r\n    );\r\n\r\n    this.setDate(\r\n      prevDay.getFullYear(), prevDay.getMonth(), prevDay.getDate()\r\n    );\r\n  }\r\n\r\n  setPrevWeek() {\r\n    const prevWeek = new Date(\r\n      this.getYear(), this.getMonth(), this.getDay() - 7\r\n    );\r\n\r\n    this.setDate(\r\n      prevWeek.getFullYear(), prevWeek.getMonth(), prevWeek.getDate()\r\n    );\r\n  }\r\n\r\n  setPrevMonth() {\r\n    const prevMonth = new Date(\r\n      this.getYear(), +this.getMonth() - 1, this.getDay()\r\n    );\r\n\r\n    this.setDate(\r\n      prevMonth.getFullYear(), prevMonth.getMonth(), prevMonth.getDate()\r\n    );\r\n  }\r\n\r\n  setPrevYear() {\r\n    this.setYear(this.getYear() - 1);\r\n  }\r\n  /* ************** */\r\n\r\n  // Take current date and set it to next day/week/month/year\r\n  /* NEXT : DAY, WEEK, MONTH, YEAR */\r\n  setNextDay() {\r\n    const nextDay = new Date(this.getYear(), this.getMonth(), this.getDay() + 1);\r\n    this.setDate(nextDay.getFullYear(), nextDay.getMonth(), nextDay.getDate());\r\n  }\r\n\r\n  setNextWeek() {\r\n    const nextWeek = new Date(this.getYear(), this.getMonth(), this.getDay() + 7);\r\n    this.setDate(nextWeek.getFullYear(), nextWeek.getMonth(), nextWeek.getDate());\r\n  }\r\n\r\n  setNextMonth() {\r\n    const nextMonth = new Date(this.getYear(), this.getMonth() + 1, this.getDay());\r\n    this.setDate(nextMonth.getFullYear(), nextMonth.getMonth(), nextMonth.getDate());\r\n  }\r\n\r\n  setNextYear() {\r\n    this.setYear(this.getYear() + 1);\r\n  }\r\n  /* ************** */\r\n\r\n\r\n  /* ************** */\r\n  /* GETTERS */\r\n  getGmt() {\r\n    return this.gmt;  // UTC Offset\r\n  }\r\n\r\n  getDateSelected() {\r\n\r\n    return +Context.getLocalDateSelected();\r\n    // return +this.dateSelected;\r\n  }\r\n\r\n  getDay() {\r\n    return +Context.getLocalDay();\r\n    // return +this.daySelected;\r\n  }\r\n\r\n  getMonth() {\r\n    // const month = Context.getLocalMonth();\r\n    return +Context.getLocalMonth();\r\n    // return +this.monthSelected;\r\n  }\r\n\r\n  getYear() {\r\n    return +Context.getLocalYear() || this.date.getFullYear();\r\n    // return +this.yearSelected;\r\n  }\r\n\r\n  getDate() {\r\n    return new Date(this.getYear(), this.getMonth(), this.getDay());\r\n  }\r\n\r\n  getToday() {\r\n    return this.date;\r\n  }\r\n\r\n  getWeek() {\r\n    let tempdate = this.getDate();\r\n    tempdate.setDate(tempdate.getDate() - tempdate.getDay());\r\n    return tempdate;\r\n  }\r\n\r\n  getWeekday() {\r\n    return this.getDate().getDay();\r\n  }\r\n\r\n  getWeekArray() {\r\n    let week = this.getWeek();\r\n    let weekArray = [];\r\n    for (let i = 0; i < 7; i++) {\r\n      if (i < 6) {\r\n        weekArray.push(new Date(week.getFullYear(), week.getMonth(), week.getDate() + i));\r\n      } else {\r\n        weekArray.push(new Date(week.getFullYear(), week.getMonth(), week.getDate() + i, 23, 59, 59, 999))\r\n      }\r\n    }\r\n    return weekArray;\r\n  }\r\n\r\n  getWeekRange() {\r\n    let weekArray = this.getWeekArray();\r\n    let [m1, m2] = [weekArray[0].getMonth(), weekArray[6].getMonth()]\r\n    let [d1, d2] = [weekArray[0].getDate(), weekArray[6].getDate()]\r\n\r\n    if (m1 === m2) {\r\n      return `${labels.monthsShort[m1]} ${d1}  ${d2}, ${weekArray[0].getFullYear()}`;\r\n    } else {\r\n      return `${labels.monthsShort[m1]} ${d1}  ${d2} ${labels.monthsShort[m2]}, ${weekArray[1].getFullYear()}`;\r\n    }\r\n  }\r\n\r\n  // ** not in use **\r\n  getWeekNumber() {\r\n    // returns week index 1 - 52\r\n    let d = new Date(Date.UTC(this.getYear(), this.getMonth(), this.getDay()));\r\n    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\r\n    let yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\r\n  }\r\n\r\n  getMonthName() {\r\n    return labels.monthsLong[this.getMonth()];\r\n  }\r\n\r\n  getDaysInMonth() {\r\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDate();\r\n  }\r\n\r\n  getMonthArrayStartDay() {\r\n    return new Date(this.getYear(), this.getMonth(), 1).getDay();\r\n  }\r\n\r\n  getMonthArrayStart() {\r\n    let monthArrayStart = [];\r\n    let [year, month] = [this.getYear(), this.getMonth()]\r\n    for (let i = 0; i < this.getMonthArrayStartDay(); i++) {\r\n      monthArrayStart.push(new Date(year, month, 0 - i));\r\n    }\r\n    return monthArrayStart;\r\n  }\r\n\r\n  getMonthArrayEndDay() {\r\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDay();\r\n  }\r\n\r\n  getMonthArrayEnd(handleFourWeeks) {\r\n    let monthArrayEnd = [];\r\n    let [year, month] = [this.getYear(), this.getMonth()]\r\n\r\n    if (handleFourWeeks) {\r\n      for (let i = 1; i < 8; i++) {\r\n        monthArrayEnd.push(new Date(year, +month + 1, i));\r\n      }\r\n      return monthArrayEnd;\r\n    } else {\r\n      for (let i = 1; i < 7 - this.getMonthArrayEndDay(); i++) {\r\n        monthArrayEnd.push(new Date(year, +month + 1, i));\r\n      }\r\n      return monthArrayEnd;\r\n    }\r\n  }\r\n\r\n  getMonthArray() {\r\n    let monthArray = [];\r\n    let start = this.getMonthArrayStart();\r\n    let daysInMonth = this.getDaysInMonth();\r\n    let [year, month] = [this.getYear(), this.getMonth()];\r\n    let end = this.getMonthArrayEnd();\r\n\r\n    for (let i = start.length - 1; i >= 0; i--) {\r\n      monthArray.push(start[i]);\r\n    }\r\n\r\n    for (let i = 1; i <= daysInMonth; i++) {\r\n      monthArray.push(new Date(year, month, i));\r\n    }\r\n\r\n    monthArray[monthArray.length - 1].setHours(23, 59, 59, 999);\r\n\r\n    if (monthArray.length === 28 && end.length < 7) {\r\n      end = this.getMonthArrayEnd(true);\r\n    }\r\n\r\n    for (let i = 0; i < end.length; i++) {\r\n      if (i === end.length - 1) {\r\n        end[i].setHours(23, 59, 59, 999);\r\n      }\r\n      monthArray.push(end[i]);\r\n    }\r\n    \r\n    return monthArray;\r\n  }\r\n\r\n  isToday(testDate) {\r\n    if (!testDate) {\r\n      return compareDates(this.getDate(), new Date());\r\n    } else {\r\n      return compareDates(testDate, new Date());\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n  * DatepickerContext\r\n  * @class\r\n  * @classdesc date context for datepicker -- \r\n  * slimmed down version of @Context class \r\n  * @property {Date} date - today's date\r\n  * @property {Date} dateSelected - selected date\r\n  * @property {number} daySelected - selected day\r\n  * @property {number} monthSelected - selected month\r\n  * @property {number} yearSelected - selected year\r\n  * @property {number} month - current month\r\n  * @property {Array} monthArray - current month array\r\n  * \r\n */\r\nclass DatepickerContext {\r\n  constructor() {\r\n    this.date = new Date();\r\n    this.dateSelected = this.date.getDate();\r\n    this.daySelected = this.date.getDate();\r\n    this.monthSelected = this.date.getMonth();\r\n    this.yearSelected = this.date.getFullYear();\r\n    this.month = this.getMonth();\r\n    this.monthArray = this.getMonthArray();\r\n  }\r\n\r\n  setDefaults() {\r\n    if (localStorage.getItem(\"pickerYearSelected\") === null) {\r\n      if (this.yearSelected === undefined) {\r\n        this.yearSelected = this.date.getFullYear();\r\n      }\r\n      DatepickerContext.setLocalPickerYear(this.yearSelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"pickerMonthSelected\") === null) {\r\n      if (this.monthSelected === undefined) {\r\n        this.monthSelected = this.date.getMonth();\r\n      }\r\n      DatepickerContext.setLocalPickerMonth(this.monthSelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"pickerDaySelected\") === null) {\r\n      if (this.daySelected === undefined) {\r\n        this.daySelected = this.date.getDate();\r\n      }\r\n      DatepickerContext.setLocalPickerDay(this.daySelected);\r\n    }\r\n\r\n    if (localStorage.getItem(\"pickerDateSelected\") === null) {\r\n      if (this.dateSelected === undefined) {\r\n        this.dateSelected = this.date.getDate();\r\n      }\r\n      DatepickerContext.setLocalPickerDateSelected(this.dateSelected);\r\n    }\r\n  }\r\n\r\n  /* **************************************** */\r\n  /* LOCAL STATE MANAGEMENT */\r\n  static getLocalPickerDay() {\r\n    return +localStorage.getItem(\"pickerDaySelected\");\r\n  }\r\n\r\n  static getLocalPickerMonth() {\r\n    return +localStorage.getItem(\"pickerMonthSelected\");\r\n  }\r\n\r\n  static getLocalPickerYear() {\r\n    return +localStorage.getItem(\"pickerYearSelected\");\r\n  }\r\n\r\n  static getLocalPickerDateSelected() {\r\n    return +localStorage.getItem(\"pickerDateSelected\");\r\n  }\r\n\r\n  static setLocalPickerDay(day) {\r\n    localStorage.setItem(\"pickerDaySelected\", day);\r\n  }\r\n\r\n  static setLocalPickerMonth(month) {\r\n    localStorage.setItem(\"pickerMonthSelected\", month);\r\n  }\r\n\r\n  static setLocalPickerYear(year) {\r\n    localStorage.setItem(\"pickerYearSelected\", year);\r\n  }\r\n\r\n  static setLocalPickerDateSelected(date) {\r\n    localStorage.setItem(\"pickerDateSelected\", date);\r\n  }\r\n\r\n  /* **************************************** */\r\n  /* DAY, MONTH, YEAR, DATE, DAY_SELECTED */\r\n  setDay(day) {\r\n    this.daySelected = day;\r\n    DatepickerContext.setLocalPickerDay(day);\r\n  }\r\n\r\n  setMonth(month) {\r\n    this.monthSelected = month;\r\n    DatepickerContext.setLocalPickerMonth(month);\r\n  }\r\n\r\n  setYear(year) {\r\n    this.yearSelected = year;\r\n    DatepickerContext.setLocalPickerYear(year);\r\n  }\r\n\r\n  setDateSelected(date) {\r\n    this.dateSelected = date;\r\n    DatepickerContext.setLocalPickerDateSelected(date);\r\n  }\r\n\r\n  setDate(year, month, day) {\r\n    this.setYear(year);\r\n    this.setMonth(month);\r\n    this.setDay(day);\r\n  }\r\n\r\n  /* ************** */\r\n  setPrevMonth() {\r\n    const prevMonth = new Date(\r\n      this.getYear(), this.getMonth() - 1, this.getDay()\r\n    );\r\n\r\n    this.setDate(\r\n      prevMonth.getFullYear(), prevMonth.getMonth(), prevMonth.getDate()\r\n    );\r\n  }\r\n\r\n  setNextMonth() {\r\n    const nextMonth = new Date(\r\n      this.getYear(), this.getMonth() + 1, this.getDay()\r\n    );\r\n\r\n    this.setDate(\r\n      nextMonth.getFullYear(), nextMonth.getMonth(), nextMonth.getDate()\r\n    );\r\n  }\r\n  /* ************** */\r\n  getDateSelected() {\r\n    return +DatepickerContext.getLocalPickerDateSelected();\r\n  }\r\n\r\n  getDay() {\r\n    return +DatepickerContext.getLocalPickerDay();\r\n  }\r\n\r\n  getMonth() {\r\n    return +DatepickerContext.getLocalPickerMonth();\r\n  }\r\n\r\n  getYear() {\r\n    return +DatepickerContext.getLocalPickerYear();\r\n  }\r\n\r\n  getDate() {\r\n    return new Date(this.getYear(), this.getMonth(), this.getDay());\r\n  }\r\n\r\n  getToday() {\r\n    return this.date;\r\n  }\r\n\r\n  getMonthName() {\r\n    return labels.monthsLong[this.getMonth()];\r\n  }\r\n\r\n  getDaysInMonth() {\r\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDate();\r\n  }\r\n\r\n  getMonthArrayStartDay() {\r\n    return new Date(this.getYear(), this.getMonth(), 1).getDay();\r\n  }\r\n\r\n  getMonthArrayStart() {\r\n    let monthArrayStart = [];\r\n    let [year, month] = [this.getYear(), this.getMonth()]\r\n    for (let i = 0; i < this.getMonthArrayStartDay(); i++) {\r\n      monthArrayStart.push(new Date(year, month, 0 - i));\r\n    }\r\n    return monthArrayStart;\r\n  }\r\n\r\n  getMonthArrayEndDay() {\r\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDay();\r\n  }\r\n\r\n  getMonthArrayEnd() {\r\n    let monthArrayEnd = [];\r\n    let [year, month] = [this.getYear(), this.getMonth()]\r\n    for (let i = 1; i < 7 - this.getMonthArrayEndDay(); i++) {\r\n      monthArrayEnd.push(new Date(year, +month + 1, i));\r\n    }\r\n    return monthArrayEnd;\r\n  }\r\n\r\n  getMonthArray() {\r\n    let monthArray = [];\r\n\r\n    let start = this.getMonthArrayStart();\r\n    for (let i = start.length - 1; i >= 0; i--) {\r\n      monthArray.push(start[i]);\r\n    }\r\n\r\n    let [year, month] = [this.getYear(), this.getMonth()];\r\n    for (let i = 1; i <= this.getDaysInMonth(); i++) {\r\n      monthArray.push(new Date(year, month, i));\r\n    }\r\n\r\n    let end = this.getMonthArrayEnd();\r\n    for (let i = 0; i < end.length; i++) {\r\n      if (i === end.length - 1) {\r\n        end[i].setHours(23, 59, 59, 999);\r\n      }\r\n      monthArray.push(end[i]);\r\n    }\r\n    return monthArray;\r\n  }\r\n}\r\n\r\nconst context = new Context();\r\nconst datepickerContext = new DatepickerContext();\r\ncontext.setDefaults();\r\ndatepickerContext.setDefaults();\r\nexport default context;\r\nexport { datepickerContext }","const localStoreKeyNames = [\r\n  \"animationStatus\",\r\n  \"colorScheme\",\r\n  \"component\",\r\n  \"ctg\",\r\n  \"dateSelected\",\r\n  \"daySelected\",\r\n  \"keyboardShortcutsStatus\",\r\n  \"monthSelected\",\r\n  \"pickerDateSelected\",\r\n  \"pickerDaySelected\",\r\n  \"pickerMonthSelected\",\r\n  \"pickerYearSelected\",\r\n  \"refresh\",\r\n  \"sidebarState\",\r\n  \"store\",\r\n  \"yearSelected\"\r\n]\r\n\r\n// [\r\n//   \"activeCtg\",\r\n//   \"dateSelected\",\r\n//   \"pickerDaySelected\",\r\n//   \"pickerMonthSelected\",\r\n//   \"sidebarState\",\r\n//   \"animationStatus\",\r\n//   \"refresh\",\r\n//   \"component\",\r\n//   \"yearSelected\",\r\n//   \"ctg\",\r\n//   \"monthSelected\",\r\n//   \"daySelected\",\r\n//   \"pickerDateSelected\",\r\n//   \"pickerYearSelected\",\r\n//   \"store\",\r\n//   \"colorScheme\",\r\n//   \"keyboardShortcutsStatus\"\r\n// ]\r\n\r\nexport default localStoreKeyNames","import Entry from \"../factory/entries\";\r\nimport localStoreKeyNames from \"./constants\";\r\nimport { testDate, compareDates } from \"../utilities/dateutils\";\r\nimport locales from \"../locales/en\";\r\nimport defautlKeyboardShortcuts from \"../locales/kbDefault\";\r\nconst colors = locales.colors;\r\n/*\r\n  this is a temporary list of store methods for development purposes, it is not a complete list of methods\r\n\r\n\r\n\r\n  ***************************************\r\n  // ENTRY MANAGEMENT\r\n  \"addEntry\",\r\n  \"createEntry\",\r\n  \"deleteEntry\",\r\n  \"getActiveEntries\",\r\n  \"getEntry\",\r\n  \"getEntries\",\r\n  \"removeLastEntry\",\r\n  \"updateEntry\",\r\n  \"searchBy\",\r\n  \"sortBy\",\r\n  \"getFirstAndLastEntry\",\r\n  \"generateCoordinates\",\r\n  \"getDayEntries\",\r\n  \"getDayEntriesArray\",\r\n  \"getMonthEntries\",\r\n  \"getMonthEntryDates\",\r\n  \"getGroupedMonthEntries\",\r\n  \"getWeekEntries\",\r\n  \"getYearEntries\",\r\n  \"getGroupedYearEntries\",\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // CATEGORY MANAGEMENT\r\n  \"addNewCtg\",\r\n  \"deleteCategory\",\r\n  \"getDefaultCtg\",\r\n  \"getFirstActiveCategory\",\r\n  \"getFirstActiveCategoryKeyPair\",\r\n  \"getActiveCategories\",\r\n  \"getActiveCategoriesKeyPair\",\r\n  \"getAllCtg\",\r\n  \"getAllCtgColors\",\r\n  \"getAllCtgNames\",\r\n  \"getCategoryStatus\",\r\n  \"getCtgColor\",\r\n  \"getCtgLength\",\r\n  \"hasCtg\",\r\n  \"moveCategoryEntriesToNewCategory\",\r\n  \"removeCategoryAndEntries\",\r\n  \"setCategoryStatus\",\r\n  \"setAllCategoryStatusExcept\",\r\n  \"updateCtgColor\",\r\n  \"updateCtg\"\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // KEYBOARD SHORTCUT MANAGEMENT\r\n  \"getShortcuts\",\r\n  \"setShortCut\",\r\n  \"setShortcutsStatus\",\r\n  \"getShortcutsStatus\",\r\n  ***************************************\r\n\r\n  ***************************************\r\n  // ANIMATION MANAGEMENT\r\n  \"setAnimationStatus\",\r\n  \"getAnimationStatus\"\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // POPUP/TOAST/NOTIFICATION MANAGEMENT\r\n  \"addActiveOverlay\",\r\n  \"removeActiveOverlay\",\r\n  \"getActiveOverlay\",\r\n  \"hasActiveOverlay\",\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // USER UPLOAD/DOWNLOAD MANAGEMNET\r\n  \"validateUserUpload\",\r\n  \"setUserUpload\",\r\n  \"setDataReconfigCallback\",\r\n  \"getUserUpload\",\r\n  \"getDataReconfigCallback\",\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // FORM MANAGEMENT \r\n  \"setFormRenderHandle\",\r\n  \"getFormRenderHandle\",\r\n\r\n  \"setFormResetHandle\",\r\n  \"getFormResetHandle\",\r\n\r\n  \"setRenderFormCallback\",\r\n  \"getRenderFormCallback\",\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // SIDEBAR MANAGEMENT\r\n  \"setRenderSidebarCallback\",\r\n  \"getRenderSidebarCallback\"\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // DATEPICKER MANAGEMENT\r\n  \"setResetDatepickerCallback\",\r\n  \"getResetDatepickerCallback\",\r\n  ***************************************\r\n\r\n\r\n  ***************************************\r\n  // CALENDAR MANAGEMENT\r\n  \"setResizeHandle\",\r\n  \"getResizeHandle\",\r\n  ***************************************\r\n]\r\n*/\r\n// Store is passed to all calendar views in the following order :\r\n// ./index > ./renderViews > ./setViews > component\r\n\r\nclass Store {\r\n  constructor() {\r\n    this.store = localStorage.getItem(\"store\")\r\n      ? JSON.parse(localStorage.getItem(\"store\"))\r\n      : [];\r\n\r\n    this.userUpload;\r\n\r\n    this.ctg = localStorage.getItem(\"ctg\")\r\n      ? JSON.parse(localStorage.getItem(\"ctg\"))\r\n      : {\r\n        default: { color: colors.blue[4], active: true },\r\n        misc: { color: colors.grey[2], active: true },\r\n        school: { color: colors.grey[4], active: true },\r\n      };\r\n\r\n    this.activeCtg = [\"default\", \"misc\", \"school\"];\r\n\r\n    this.activeOverlay = new Set();\r\n\r\n    this.handleRenders = {\r\n      sidebar: {\r\n        callback: null,\r\n      },\r\n      datepicker: {\r\n        reset: null,\r\n      },\r\n      form: {\r\n        callback: null,\r\n      },\r\n      reconfig: {\r\n        callback: null,\r\n      },\r\n      categories: {\r\n        callback: null,\r\n      },\r\n      calendars: {\r\n        previous: {\r\n          reset: null,\r\n        },\r\n        month: {\r\n          reset: null,\r\n          resize: null,\r\n        },\r\n        week: {\r\n          reset: null,\r\n          render: null,\r\n        },\r\n        day: {\r\n          reset: null,\r\n        },\r\n        list: {\r\n          reset: null,\r\n        },\r\n      },\r\n    };\r\n\r\n    this.keyboardShortcuts = defautlKeyboardShortcuts;\r\n    this.keyboardShortcutsStatus = true;\r\n    this.animationStatus = true;\r\n  }\r\n\r\n  setStoreForTesting(store) {\r\n    this.store = store;\r\n    Store.setStore(this.store);\r\n  }\r\n\r\n  getStoreStats() {\r\n    return [this.store.length, this.getAllCtgNames().length];\r\n  }\r\n\r\n  getAllMethodNames() {\r\n    return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(\r\n      (method) => {\r\n        return method !== \"constructor\" && method !== \"getStoreStats\";\r\n      }\r\n    );\r\n  }\r\n\r\n  /* ************************* */\r\n  /* LOCAL STORAGE MANAGEMENT */\r\n  static getStore() {\r\n    return JSON.parse(localStorage.getItem(\"store\")) || [];\r\n  }\r\n\r\n  static getActiveStore() {\r\n    return JSON.parse(localStorage.getItem(\"activeStore\")) || [];\r\n  }\r\n\r\n  static getCtg() {\r\n    return JSON.parse(localStorage.getItem(\"ctg\")) || [];\r\n  }\r\n\r\n  static getShortcutsStatus() {\r\n    return JSON.parse(localStorage.getItem(\"keyboardShortcutsStatus\"));\r\n  }\r\n\r\n  static getAnimationStatus() {\r\n    return JSON.parse(localStorage.getItem(\"animationStatus\"));\r\n  }\r\n\r\n  // *******************\r\n  static setStore(store) {\r\n    localStorage.setItem(\"store\", JSON.stringify(store));\r\n  }\r\n\r\n  static setActiveStore(activeStore) {\r\n    localStorage.setItem(\"activeStore\", JSON.stringify(activeStore));\r\n  }\r\n\r\n  static setCtg(ctg) {\r\n    localStorage.setItem(\"ctg\", JSON.stringify(ctg));\r\n  }\r\n\r\n  static setShortcutsStatus(status) {\r\n    localStorage.setItem(\"keyboardShortcutsStatus\", JSON.stringify(status));\r\n  }\r\n\r\n  static setAnimationStatus(status) {\r\n    localStorage.setItem(\"animationStatus\", JSON.stringify(status));\r\n  }\r\n  /* ************************* */\r\n\r\n  /* ************** */\r\n  /* essential crud (entries) - create, read, update, delete */\r\n  addEntry(entry) {\r\n    this.store.push(entry);\r\n    Store.setStore(this.store);\r\n  }\r\n\r\n  createEntry(...args) {\r\n    this.addEntry(new Entry(...args));\r\n    Store.setStore(this.store);\r\n  }\r\n\r\n  deleteEntry(id) {\r\n    this.store = this.store.filter((entry) => entry.id !== id);\r\n    Store.setStore(this.store);\r\n  }\r\n\r\n  getActiveEntries() {\r\n    const active = this.getActiveCategories();\r\n    if (!active) return [];\r\n    const activeEntries = this.store.filter((entry) => {\r\n      return active ? active.indexOf(entry.category) > -1 : [];\r\n    });\r\n    return activeEntries;\r\n  }\r\n\r\n  getEntry(id) {\r\n    return this.store.find((entry) => entry.id === id);\r\n  }\r\n\r\n  getEntries() {\r\n    return this.store || [];\r\n  }\r\n\r\n  getEntriesByCtg(ctg) {\r\n    return this.store.filter((entry) => {\r\n      return entry.category === ctg;\r\n    });\r\n  }\r\n\r\n  removeLastEntry() {\r\n    this.store.pop();\r\n    Store.setStore(this.store);\r\n  }\r\n\r\n  updateEntry(id, data) {\r\n    let entry = this.getEntry(id);\r\n    entry = Object.assign(entry, data);\r\n    Store.setStore(this.store);\r\n  }\r\n  /* ************ */\r\n\r\n  /* **************************** */\r\n  /* (ENTRIES) FILTER/SORT/PARTITION/ */\r\n  searchBy(entries, searchtype, value) {\r\n    if (entries.length === 0) return;\r\n    return entries.filter((entry) => {\r\n      return entry[searchtype].toLowerCase().slice(0, value.length) === value;\r\n    });\r\n  }\r\n\r\n  sortBy(entries, type, direction) {\r\n    if (entries.length === 0) return;\r\n\r\n    if (direction === \"desc\") {\r\n      return entries.sort((a, b) => {\r\n        if (type === \"start\") {\r\n          return new Date(a.start) - new Date(b.start);\r\n        } else if (type === \"end\") {\r\n          return new Date(a.end) - new Date(b.end);\r\n        } else if (\r\n          type === \"description\" ||\r\n          type === \"title\" ||\r\n          type === \"category\"\r\n        ) {\r\n          return a[type].localeCompare(b[type]);\r\n        } else {\r\n          return a[type] - b[type];\r\n        }\r\n      });\r\n    } else {\r\n      return entries.sort((a, b) => {\r\n        if (type === \"start\") {\r\n          return new Date(b.start) - new Date(a.start);\r\n        } else if (type === \"end\") {\r\n          return new Date(b.end) - new Date(a.end);\r\n        } else if (\r\n          type === \"description\" ||\r\n          type === \"title\" ||\r\n          type === \"category\"\r\n        ) {\r\n          return b[type].localeCompare(a[type]);\r\n        } else {\r\n          return b[type] - a[type];\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {Array} [\r\n   *    start date/time of earliest entry,  {string}\r\n   *    end date/time of last entry         {string}\r\n   * ]\r\n   */\r\n  getFirstAndLastEntry() {\r\n    let sorted = this.sortBy(this.getActiveEntries(), \"start\", \"desc\");\r\n    if (sorted === undefined) {\r\n      return [0, 0];\r\n    } else {\r\n      return [sorted[0].start, sorted[sorted.length - 1].end];\r\n    }\r\n  }\r\n  /* **************************** */\r\n\r\n  /* *************************************** */\r\n  /* SEGMENT ENTRIES FOR SPECIFIC VIEWS (YEAR/MONTH/...ect)*/\r\n\r\n  // @generateCoordinates -- (only used in week and day view)\r\n  // generates coordinates based on start and end times for a given entry\r\n  // if an entry spans beyond a day, it will render at the top of the grid in\r\n  // a static (immobile) position.\r\n  generateCoordinates(start, end) {\r\n    [start, end] = [testDate(start), testDate(end)];\r\n\r\n    let startMin = start.getHours() * 4 + Math.floor(start.getMinutes() / 15);\r\n    let endMin = end.getHours() * 4 + Math.floor(end.getMinutes() / 15);\r\n    let height = endMin - startMin;\r\n    let total = startMin + height;\r\n\r\n    if (!compareDates(start, end)) {\r\n      return {\r\n        allDay: true,\r\n        x: start.getDay(),\r\n        x2: end.getDay(),\r\n      };\r\n    } else {\r\n      return {\r\n        allDay: false,\r\n        x: start.getDay(),\r\n        y: startMin,\r\n        h: height,\r\n        e: total,\r\n      };\r\n    }\r\n  }\r\n\r\n  getDayEntries(day) {\r\n    let activeEntries = this.getActiveEntries();\r\n    let boxes = {\r\n      allDay: [], // entries that start on one day and end on another\r\n      day: [], // entries that start and end on same day\r\n    };\r\n\r\n    if (activeEntries.length === 0) return boxes;\r\n\r\n    let dayEntries = activeEntries.filter((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      const [y, m, d] = [\r\n        entryDate.getFullYear(),\r\n        entryDate.getMonth(),\r\n        entryDate.getDate(),\r\n      ];\r\n      return (\r\n        y === day.getFullYear() && m === day.getMonth() && d === day.getDate()\r\n      );\r\n    });\r\n\r\n    dayEntries.forEach((entry) => {\r\n      entry.coordinates = this.generateCoordinates(\r\n        new Date(entry.start),\r\n        new Date(entry.end)\r\n      );\r\n\r\n      if (entry.coordinates.allDay) {\r\n        boxes.allDay.push(entry);\r\n      } else {\r\n        boxes.day.push(entry);\r\n      }\r\n    });\r\n    return boxes;\r\n  }\r\n\r\n  getDayEntriesArray(targetDate) {\r\n    let activeEntries = this.getActiveEntries();\r\n    if (activeEntries.length === 0) return [];\r\n\r\n    return activeEntries.filter((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      const [y, m, d] = [\r\n        entryDate.getFullYear(),\r\n        entryDate.getMonth(),\r\n        entryDate.getDate(),\r\n      ];\r\n      return (\r\n        y === targetDate.getFullYear() &&\r\n        m === targetDate.getMonth() &&\r\n        d === targetDate.getDate()\r\n      );\r\n    });\r\n  }\r\n\r\n  getMonthEntries(montharr) {\r\n    let activeEntries = this.getActiveEntries();\r\n    if (activeEntries.length === 0) return [];\r\n\r\n    return activeEntries.filter((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      return (\r\n        entryDate >= montharr[0] && entryDate <= montharr[montharr.length - 1]\r\n      );\r\n    });\r\n  }\r\n\r\n  getMonthEntryDates(montharr) {\r\n    let entries = this.getMonthEntries(montharr);\r\n    let grouped = {};\r\n    entries.forEach((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      const [y, m, d] = [\r\n        entryDate.getFullYear(),\r\n        entryDate.getMonth(),\r\n        entryDate.getDate(),\r\n      ];\r\n      let key = `${y}-${m}-${d}`;\r\n      if (!grouped[key]) {\r\n        grouped[key] = [];\r\n      }\r\n      grouped[key].push(entry);\r\n    });\r\n    return Object.keys(grouped);\r\n  }\r\n\r\n  getGroupedMonthEntries(entries) {\r\n    return entries.reduce((acc, entry) => {\r\n      let tempDate = new Date(entry.start);\r\n      let day = tempDate.getDate();\r\n      if (!acc[day]) {\r\n        acc[day] = [];\r\n      }\r\n      acc[day].push(entry);\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  getWeekEntries(week) {\r\n    let activeEntries = this.getActiveEntries();\r\n    let [start, end] = [week[0], week[6]];\r\n    let boxes = {\r\n      allDay: [], // entries that start on one day and end on another\r\n      day: [], // entries that start and end on same day\r\n    };\r\n\r\n    if (activeEntries.length === 0) return boxes;\r\n    let entries = activeEntries.filter((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      return entryDate >= start && entryDate <= end;\r\n    });\r\n\r\n    entries.forEach((entry) => {\r\n      entry.coordinates = this.generateCoordinates(\r\n        new Date(entry.start),\r\n        new Date(entry.end)\r\n      );\r\n\r\n      if (entry.coordinates.allDay) {\r\n        boxes.allDay.push(entry);\r\n      } else {\r\n        boxes.day.push(entry);\r\n      }\r\n    });\r\n\r\n    return boxes;\r\n  }\r\n\r\n  getYearEntries(year) {\r\n    let activeEntries = this.getActiveEntries();\r\n    if (activeEntries.length === 0) return [];\r\n    return activeEntries.filter(\r\n      (entry) => new Date(entry.start).getFullYear() === year\r\n    );\r\n  }\r\n\r\n  getGroupedYearEntries(yearentries) {\r\n    let grouped = {};\r\n    yearentries.forEach((entry) => {\r\n      let entryDate = new Date(entry.start);\r\n      let month = entryDate.getMonth();\r\n      let day = entryDate.getDate();\r\n\r\n      if (!grouped[month]) {\r\n        grouped[month] = {};\r\n      }\r\n\r\n      if (!grouped[month][day]) {\r\n        grouped[month][day] = [];\r\n      }\r\n\r\n      grouped[month][day].push(entry);\r\n    });\r\n\r\n    return grouped;\r\n  }\r\n\r\n  /* ************************************* */\r\n\r\n  /* ********************* */\r\n  /*  CATEGORY MANAGEMENT */\r\n  addNewCtg(categoryName, color) {\r\n    if (!this.hasCtg(categoryName)) {\r\n      this.ctg[categoryName] = {\r\n        color: color,\r\n        active: true,\r\n      };\r\n      Store.setCtg(this.ctg);\r\n    }\r\n  }\r\n\r\n  deleteCategory(category) {\r\n    if (this.hasCtg(category)) {\r\n      delete this.ctg[category];\r\n      Store.setCtg(this.ctg);\r\n    }\r\n  }\r\n\r\n  getDefaultCtg() {\r\n    return Object.entries(this.ctg)[0];\r\n  }\r\n\r\n  getFirstActiveCategory() {\r\n    for (let [key, value] of Object.entries(this.ctg)) {\r\n      if (value.active) {\r\n        return key;\r\n      }\r\n    }\r\n    return \"default\";\r\n  }\r\n\r\n  getFirstActiveCategoryKeyPair() {\r\n    for (let [key, value] of Object.entries(this.ctg)) {\r\n      if (value.active) {\r\n        return [key, value.color];\r\n      }\r\n    }\r\n    const backup = this.getDefaultCtg();\r\n    return [backup[0], backup[1].color];\r\n  }\r\n\r\n  getActiveCategories() {\r\n    let active = Object.keys(this.ctg).filter((key) => this.ctg[key].active);\r\n    if (active.length > 0) {\r\n      return active;\r\n    } else {\r\n      active = [];\r\n    }\r\n  }\r\n\r\n  getActiveCategoriesKeyPair() {\r\n    return Object.entries(this.ctg).filter((key) => key[1].active);\r\n  }\r\n\r\n  getAllCtg() {\r\n    return this.ctg;\r\n  }\r\n\r\n  getAllCtgColors() {\r\n    return Object.values(this.ctg).map((ctg) => ctg.color);\r\n  }\r\n\r\n  getAllCtgNames() {\r\n    return Object.keys(this.ctg);\r\n  }\r\n\r\n  getCategoryStatus(category) {\r\n    if (this.ctg.hasOwnProperty(category)) {\r\n      return this.ctg[category].active;\r\n    }\r\n  }\r\n\r\n  getCtgColor(ctg) {\r\n    return this.ctg[ctg].color;\r\n  }\r\n\r\n  getCtgLength(category) {\r\n    return this.store.filter((entry) => entry.category === category).length;\r\n  }\r\n\r\n  hasCtg(categoryName) {\r\n    let hasctg = false;\r\n    for (let key in this.ctg) {\r\n      if (key.toLowerCase() === categoryName.toLowerCase()) {\r\n        hasctg = true;\r\n      }\r\n    }\r\n    return hasctg;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} category\r\n   * @param {string} newCategory\r\n   */\r\n  moveCategoryEntriesToNewCategory(category, newCategory, newName) {\r\n    if (this.hasCtg(category) || newName === true) {\r\n      this.store.forEach((entry) => {\r\n        if (entry.category === category) {\r\n          entry.category = newCategory;\r\n        }\r\n      });\r\n      Store.setStore(this.store);\r\n    }\r\n    this.deleteCategory(category);\r\n  }\r\n\r\n  removeCategoryAndEntries(category) {\r\n    if (this.hasCtg(category)) {\r\n      this.store = this.store.filter((entry) => entry.category !== category);\r\n      Store.setStore(this.store);\r\n    }\r\n    this.deleteCategory(category);\r\n  }\r\n\r\n  setCategoryStatus(category, status) {\r\n    if (this.hasCtg(category)) {\r\n      this.ctg[category].active = status;\r\n      Store.setCtg(this.ctg);\r\n    }\r\n  }\r\n\r\n  setAllCategoryStatusExcept(category, status) {\r\n    for (let key in this.ctg) {\r\n      if (key !== category) {\r\n        this.ctg[key].active = status;\r\n      } else {\r\n        this.ctg[key].active = !status;\r\n      }\r\n    }\r\n    Store.setCtg(this.ctg);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} categoryName\r\n   * @param {string} color\r\n   * @desc updates the color of a category\r\n   */\r\n  updateCtgColor(categoryName, color) {\r\n    if (this.hasCtg(categoryName)) {\r\n      this.ctg[categoryName].color = color;\r\n      Store.setCtg(this.ctg);\r\n    }\r\n  }\r\n\r\n  getCtgIndex(category) {\r\n    return Object.keys(this.ctg).indexOf(category);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} newName\r\n   * @param {string} newColor\r\n   * @param {string} oldName\r\n   * @returns new category object\r\n   * @desc note that 'value' of [key, value] is necessary to segment the object, even if it is not directly referenced\r\n   */\r\n  updateCtg(newName, newColor, oldName) {\r\n    let entries = Object.entries(this.ctg);\r\n    let hasColor = newColor !== null;\r\n    let count = 0;\r\n    let length = entries.length;\r\n\r\n    const isNumeric = (n) => !isNaN(parseFloat(n)) && isFinite(n);\r\n    if (isNumeric(newName)) {\r\n      newName = \"category \" + newName;\r\n    }\r\n\r\n    for (let [key, value] of entries) {\r\n      count++;\r\n      if (count === 1) {\r\n        // changing the default category;\r\n        if (oldName === key) {\r\n          entries[0][0] = newName;\r\n          if (hasColor) {\r\n            entries[0][1].color = newColor;\r\n          }\r\n        }\r\n      } else {\r\n        if (oldName === key) {\r\n          entries[count - 1][0] = newName;\r\n          if (hasColor) {\r\n            entries[count - 1][1].color = newColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (entries.length !== length) {\r\n      console.error(\"something went wrong with category name/color change\");\r\n      return;\r\n    } else {\r\n      this.ctg = Object.fromEntries(entries);\r\n      this.moveCategoryEntriesToNewCategory(oldName, newName, true);\r\n      Store.setCtg(this.ctg);\r\n    }\r\n  }\r\n  /* ********************* */\r\n\r\n  /* ***************************** */\r\n  /*  KEYBOARD SHORTCUT MANAGEMENT */\r\n  getShortcuts() {\r\n    return this.keyboardShortcuts;\r\n  }\r\n\r\n  setShortCut(shortcut) {\r\n    const keys = Object.keys(this.getShortcuts());\r\n    let idx = keys.indexOf(shortcut);\r\n    if (idx > -1) {\r\n      return `Shortcut (${shortcut}) is already in use`;\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  setShortcutsStatus(status) {\r\n    this.keyboardShortcutsStatus = status;\r\n    Store.setShortcutsStatus(status);\r\n  }\r\n\r\n  getShortcutsStatus() {\r\n    const status = Store.getShortcutsStatus();\r\n    return status !== null ? status : true;\r\n  }\r\n  /* ***************************** */\r\n\r\n  /* ***************************** */\r\n  /*  ANIMATION MANAGEMENT */\r\n\r\n  getAnimationStatus() {\r\n    const status = Store.getAnimationStatus();\r\n    return status !== null ? status : true;\r\n  }\r\n\r\n  setAnimationStatus(status) {\r\n    this.animationStatus = status;\r\n    Store.setAnimationStatus(status);\r\n  }\r\n  /* ***************************** */\r\n\r\n  /* ******************** */\r\n  /*  OVERLAY MANAGEMENT */\r\n  // see readme @ --overlay management-- for more info\r\n  addActiveOverlay(overlay) {\r\n    this.activeOverlay.add(overlay);\r\n  }\r\n\r\n  removeActiveOverlay(overlay) {\r\n    const len = this.activeOverlay.size;\r\n    if (len === 0) {\r\n      return;\r\n    } else if (this.activeOverlay.size === 1) {\r\n      this.activeOverlay = new Set();\r\n      return;\r\n    } else {\r\n      this.activeOverlay = new Set(\r\n        [...this.activeOverlay].filter((o) => o !== overlay)\r\n      );\r\n      return;\r\n    }\r\n  }\r\n\r\n  getActiveOverlay() {\r\n    return this.activeOverlay;\r\n  }\r\n\r\n  hasActiveOverlay() {\r\n    return this.activeOverlay.size > 0;\r\n  }\r\n  /* ******************** */\r\n\r\n  /* ************************ */\r\n  /*  JSON UPLOAD & DOWNLOAD */\r\n  validateUserUpload(userUpload) {\r\n    const keys = Object.keys(userUpload);\r\n    let message = {};\r\n    if (keys.length > localStoreKeyNames.length) {\r\n      message.err1 = \"invalid number of keys (too many)\";\r\n    }\r\n\r\n    for (let i = 0; i < keys.length; i++) {\r\n      if (!localStoreKeyNames.includes(keys[i])) {\r\n        let errname = \"err\" + Object.keys(message).length;\r\n        message[errname] = \"invalid key: \" + keys[i];\r\n      }\r\n    }\r\n\r\n    if (Object.keys(message).length > 0) {\r\n      return message;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  setUserUpload(userUpload) {\r\n    const validation = this.validateUserUpload(userUpload);\r\n    let validated;\r\n    if (validation === true) {\r\n      localStorage.clear();\r\n      validated = true;\r\n      for (const [key, value] of Object.entries(userUpload)) {\r\n        localStorage.setItem(key, value);\r\n      }\r\n    } else {\r\n      return validation;\r\n    }\r\n    if (validated) {\r\n      const refresh = localStorage.getItem(\"refresh\");\r\n      if (refresh === null) {\r\n        window.location.reload();\r\n        window.localStorage.setItem(\"refresh\", \"1\");\r\n      }\r\n    }\r\n  }\r\n\r\n  getUserUpload() {\r\n    return this.userUpload;\r\n  }\r\n  /* ************************ */\r\n\r\n  /* ******************************************* */\r\n  /*  STATE MANAGEMENT : RENDERING / RESET / RESIZE */\r\n  /**\r\n   * This got a bit more complicated than I anticipated, I'll come back to this later;\r\n   */\r\n  setFormRenderHandle(type, callback) {\r\n    this.handleRenders.calendars[type].render = callback;\r\n  }\r\n\r\n  setFormResetHandle(type, callback) {\r\n    this.handleRenders.calendars[type].reset = callback;\r\n  }\r\n\r\n  setRenderFormCallback(callback) {\r\n    this.handleRenders.form.callback = callback;\r\n  }\r\n\r\n  setRenderSidebarCallback(callback) {\r\n    this.handleRenders.sidebar.callback = callback;\r\n  }\r\n\r\n  setResizeHandle(type, callback) {\r\n    this.handleRenders.calendars[type].resize = callback;\r\n  }\r\n\r\n  setDataReconfigCallback(callback) {\r\n    this.handleRenders.reconfig.callback = callback;\r\n  }\r\n\r\n  setResetDatepickerCallback(callback) {\r\n    this.handleRenders.datepicker.reset = callback;\r\n  }\r\n\r\n  setResetPreviousViewCallback(callback) {\r\n    this.handleRenders.calendars[\"previous\"].reset = callback;\r\n  }\r\n\r\n  setRenderCategoriesCallback(callback) {\r\n    this.handleRenders.categories.callback = callback;\r\n  }\r\n\r\n  getRenderCategoriesCallback() {\r\n    return this.handleRenders.categories.callback;\r\n  }\r\n\r\n  getResetPreviousViewCallback() {\r\n    return this.handleRenders.calendars[\"previous\"].reset;\r\n  }\r\n\r\n  getResetDatepickerCallback() {\r\n    return this.handleRenders.datepicker.reset;\r\n  }\r\n\r\n  getDataReconfigCallback() {\r\n    return this.handleRenders.reconfig.callback;\r\n  }\r\n\r\n  getResizeHandle(type) {\r\n    if (this.handleRenders.calendars[type] === undefined) {\r\n      return null;\r\n    } else {\r\n      return this.handleRenders.calendars[type].resize;\r\n    }\r\n  }\r\n\r\n  getFormRenderHandle(type) {\r\n    if (this.handleRenders.calendars[type] === undefined) {\r\n      return null;\r\n    } else {\r\n      return this.handleRenders.calendars[type].render;\r\n    }\r\n  }\r\n\r\n  getFormResetHandle(type) {\r\n    if (this.handleRenders.calendars[type].reset === undefined) {\r\n      return null;\r\n    } else {\r\n      return this.handleRenders.calendars[type].reset;\r\n    }\r\n  }\r\n\r\n  getRenderFormCallback() {\r\n    const callback = this.handleRenders.form.callback;\r\n    if (callback !== null) {\r\n      return callback;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  getRenderSidebarCallback() {\r\n    const callback = this.handleRenders.sidebar.callback;\r\n    if (callback !== null) {\r\n      return callback;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  /* ************************************ */\r\n}\r\n\r\n// single\r\nexport default new Store();\r\n","import { generateId } from \"../utilities/helpers\"\r\n\r\n/**\r\n * @class Entry\r\n * @param {String} id - Unique identifier\r\n * @param {String} title\r\n * @param {String} description\r\n * @param {Date} start\r\n * @param {Date} end\r\n * @param {String} category\r\n * @param {Boolean} completed\r\n */\r\nexport default class Entry {\r\n  constructor(category, completed, description, end, start, title) {\r\n    this.category = category;\r\n    this.completed = completed;\r\n    this.description = description;\r\n    this.end = end;\r\n    this.id = generateId();\r\n    this.start = start;\r\n    this.title = title;\r\n  }\r\n}\r\n\r\nclass CoordinateEntry {\r\n  constructor(category, completed, coordinates, description, id, title) {\r\n    this.category = category;\r\n    this.completed = completed || false;\r\n    this.coordinates = coordinates || {};\r\n    this.description = description;\r\n    this.id = id;\r\n    this.title = title;\r\n  }\r\n}\r\n\r\n/**\r\n * @class Week\r\n * \r\n * @param {Array} dayEntries\r\n * @description Array of entries that span a single day.\r\n * \r\n * @param {Array} allDayEntries\r\n * @description Array of entries that span multiple days.\r\n */\r\nclass Week {\r\n  constructor(dayEntries, allDayEntries) {\r\n    this.boxes = dayEntries;\r\n    this.boxesTop = allDayEntries;\r\n  }\r\n\r\n  setAllBoxes(tempEntries) {\r\n    this.boxes = tempEntries.day\r\n    this.boxesTop = tempEntries.allDay\r\n  }\r\n\r\n  addBox(box) {\r\n    this.boxes.push(box);\r\n  }\r\n\r\n  addBoxTop(box) {\r\n    this.boxesTop.push(box)\r\n  }\r\n\r\n  getBox(id) {\r\n    return this.boxes.find(box => box.id === id);\r\n  }\r\n\r\n  getBoxes() {\r\n    return this.boxes;\r\n  }\r\n\r\n  getBoxesTop() {\r\n    return this.boxesTop;\r\n  }\r\n\r\n  getLength() {\r\n    return this.boxes.length;\r\n  }\r\n\r\n  getBoxesByColumn(col) {\r\n    return this.boxes.filter(box => +box.coordinates.x == col);\r\n  }\r\n\r\n  getBoxesByColumnTop(col) {\r\n    return this.boxesTop.filter(box => +box.coordinates.x == col);\r\n  }\r\n\r\n  getBoxesTopByDay(day) {\r\n    return this.boxesTop.filter(box => +box.coordinates.y == day);\r\n  }\r\n\r\n  getBoxesTopLengths() {\r\n    return this.getBoxesTop().reduce((a, c) => {\r\n      let start = new Date(c.start)\r\n      if (a[start.getDay()]) {\r\n        a[start.getDay()]++\r\n      }\r\n      else {\r\n        a[start.getDay()] = 1\r\n      }\r\n      return a\r\n    }, {})\r\n  }\r\n\r\n  getColumnsWithMultipleBoxes() {\r\n    let temp = {}\r\n    let columns = []\r\n    for (const box of this.boxes) {\r\n      if (temp[box.coordinates.x]) {\r\n        temp[box.coordinates.x]++\r\n        if (temp[box.coordinates.x] === 2) {\r\n          columns.push(box.coordinates.x)\r\n        }\r\n      } else {\r\n        temp[box.coordinates.x] = 1\r\n      }\r\n    }\r\n    return columns\r\n  }\r\n\r\n  getEntriesByTitle(title) {\r\n    return this.boxes.filter(box => box.title.toLowerCase().includes(title.toLowerCase()));\r\n  }\r\n\r\n  updateCoordinates(id, coordinates) {\r\n    this.getBox(id).coordinates = coordinates;\r\n  }\r\n\r\n  sortByY(bxs) {\r\n    return bxs.sort((a, b) => +a.coordinates.y - +b.coordinates.y)\r\n  }\r\n\r\n  checkForCollision(col) {\r\n    const bxs = this.getBoxesByColumn(col)\r\n    const arr = []\r\n    let collisions = new Set()\r\n\r\n    for (const box of bxs) {\r\n      arr.push([box.coordinates.y, box.coordinates.e])\r\n    }\r\n\r\n    for (let i = 0; i < arr.length; i++) {\r\n      for (let j = i + 1; j < arr.length; j++) {\r\n        if (arr[i][1] > arr[j][0] && arr[i][0] < arr[j][1]) {\r\n          collisions.add(bxs[i]);\r\n          collisions.add(bxs[j]);\r\n        }\r\n      }\r\n    }\r\n    return this.sortByY([...collisions])\r\n  }\r\n\r\n  updateStore(store, id, weekArray) {\r\n    const boxEntry = this.getBox(id)\r\n    const coords = boxEntry.coordinates\r\n    let boxstart = +coords.y * 15\r\n    let boxend = +coords.e * 15\r\n    let day = weekArray[+coords.x]\r\n\r\n    const startDate = new Date(day)\r\n    const starthours = Math.floor(boxstart / 60)\r\n    const startminutes = boxstart % 60\r\n    startDate.setHours(starthours)\r\n    startDate.setMinutes(startminutes)\r\n\r\n    const endDate = new Date(day)\r\n    const endhours = Math.floor(boxend / 60)\r\n    const endminutes = boxend % 60\r\n    endDate.setHours(endhours)\r\n    endDate.setMinutes(endminutes)\r\n\r\n    store.updateEntry(id, {\r\n      start: startDate,\r\n      end: endDate,\r\n    })\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @class Week\r\n * \r\n * @param {Array} dayEntries\r\n * @description Array of entries that span a single day.\r\n * \r\n * @param {Array} allDayEntries\r\n * @description Array of entries that span multiple days.\r\n */\r\nclass Day {\r\n  constructor(dayEntries, allDayEntries) {\r\n    this.boxes = dayEntries;\r\n    this.boxesTop = allDayEntries;\r\n  }\r\n\r\n  setAllBoxes(tempEntries) {\r\n    this.boxes = tempEntries.day\r\n    this.boxesTop = tempEntries.allDay\r\n  }\r\n\r\n  addBox(box) {\r\n    this.boxes.push(box);\r\n  }\r\n\r\n  addBoxTop(box) {\r\n    this.boxesTop.push(box)\r\n  }\r\n\r\n  getBox(id) {\r\n    return this.boxes.find(box => box.id === id);\r\n  }\r\n\r\n  getBoxes() {\r\n    return this.boxes;\r\n  }\r\n\r\n  getBoxesTop() {\r\n    return this.boxesTop;\r\n  }\r\n\r\n  getAllBoxes() {\r\n    return [...this.boxes, ...this.boxesTop]\r\n  }\r\n\r\n  getLength() {\r\n    return this.boxes.length;\r\n  }\r\n\r\n  getBoxesTopLengths() {\r\n    return this.getBoxesTop().reduce((a, c) => {\r\n      let start = new Date(c.start)\r\n      if (a[start.getDay()]) {\r\n        a[start.getDay()]++\r\n      }\r\n      else {\r\n        a[start.getDay()] = 1\r\n      }\r\n      return a\r\n    }, {})\r\n  }\r\n\r\n  getEntriesByTitle(title) {\r\n    return this.boxes.filter(box => box.title.toLowerCase().includes(title.toLowerCase()));\r\n  }\r\n\r\n  updateCoordinates(id, coordinates) {\r\n    this.getBox(id).coordinates = coordinates;\r\n  }\r\n\r\n  getEntriesEndingOnDay(day) {\r\n    return this.boxes.filter(box => +box.coordinates.e === day);\r\n  }\r\n\r\n  sortByY(bxs) {\r\n    return bxs.sort((a, b) => {\r\n      let diff = +a.coordinates.y - +b.coordinates.y\r\n      if (diff === 0) {\r\n        return +a.coordinates.e - +b.coordinates.e\r\n      } else {\r\n        return diff;\r\n      }\r\n    })\r\n  }\r\n\r\n  checkForCollision() {\r\n    const bxs = this.getBoxes()\r\n    const arr = []\r\n    let collisions = new Set()\r\n\r\n    for (const box of bxs) {\r\n      arr.push([box.coordinates.y, box.coordinates.e])\r\n    }\r\n\r\n    for (let i = 0; i < arr.length; i++) {\r\n      for (let j = i + 1; j < arr.length; j++) {\r\n        if (arr[i][1] > arr[j][0] && arr[i][0] < arr[j][1]) {\r\n          collisions.add(bxs[i]);\r\n          collisions.add(bxs[j]);\r\n        }\r\n      }\r\n    }\r\n    \r\n    return this.sortByY([...collisions]);\r\n  }\r\n\r\n  updateStore(store, id) {\r\n    const boxEntry = this.getBox(id)\r\n    const coords = boxEntry.coordinates\r\n    let boxstart = +coords.y * 15\r\n    let boxend = +coords.e * 15\r\n\r\n    const startDate = new Date(boxEntry.start)\r\n    const starthours = Math.floor(boxstart / 60)\r\n    const startminutes = boxstart % 60\r\n    startDate.setHours(starthours)\r\n    startDate.setMinutes(startminutes)\r\n\r\n    const endDate = new Date(boxEntry.start)\r\n    let endhours = Math.floor(boxend / 60)\r\n    let endminutes = boxend % 60\r\n    if (endhours === 24) {\r\n      endhours = 23\r\n      endminutes = 59\r\n    }\r\n    endDate.setHours(endhours)\r\n    endDate.setMinutes(endminutes)\r\n\r\n    store.updateEntry(id, {\r\n      start: startDate,\r\n      end: endDate,\r\n    })\r\n  }\r\n}\r\n\r\nexport {\r\n  CoordinateEntry,\r\n  Week,\r\n  Day,\r\n}","class MonthBoxQuery {\r\n  constructor(flag) {\r\n    this.flag = flag;\r\n    this.tops = [16, 20];\r\n    this.heights = [14, 18];\r\n  }\r\n\r\n  updateFlag() {\r\n    this.flag = window.innerWidth <= 530 || window.innerHeight <= 470;\r\n  }\r\n\r\n  getFlag() {\r\n    return this.flag;\r\n  }\r\n\r\n  getTop() {\r\n    const [a, b] = this.tops;\r\n    return this.flag ? a : b;\r\n  }\r\n\r\n  getHeight() {\r\n    const [a, b] = this.heights;\r\n    return this.flag ? a : b;\r\n  }\r\n\r\n  getPrevTop(top) {\r\n    const [a, b] = this.tops;\r\n    return top === a ? b : a;\r\n  }\r\n}\r\n\r\nexport default MonthBoxQuery;","export default {\r\n  labels: {\r\n    monthsLong: [\r\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\r\n    ],\r\n    monthsShortLower: [\r\n      'jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'\r\n    ],\r\n    monthsLongLower: [\r\n      'january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'\r\n    ],\r\n    monthsShort: [\r\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\r\n    ],\r\n    weekdaysLong: [\r\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\r\n    ],\r\n    weekdaysShort: [\r\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\r\n    ],\r\n    weekdaysNarrow: [\r\n      'S', 'M', 'T', 'W', 'T', 'F', 'S'\r\n    ],\r\n\r\n  },\r\n\r\n  /*\r\n    - the following are colors for calendar categories\r\n  */\r\n  colors: {\r\n    red: {\r\n      1: '#DF2A79',\r\n      2: '#A51955',\r\n      3: '#73113C',\r\n      4: '#C20000',\r\n      5: '#9D0000',\r\n      6: '#690000',\r\n      7: '#460000',\r\n    },\r\n\r\n    orange: { \r\n      1: '#EE756A',\r\n      2: '#E84334',\r\n      3: '#E77C2B',\r\n      4: '#D56A18',\r\n      5: '#954A11',\r\n      6: '#6B350C',\r\n      7: '#402007',\r\n    },\r\n    \r\n    green: {\r\n      1: '#1E9E98',\r\n      2: '#1A8A84',\r\n      3: '#167671',\r\n      4: '#115855',\r\n      5: '#0F4E4B',\r\n      6: '#09312F',\r\n      7: '#072726',\r\n    },\r\n    \r\n    blue: { \r\n      1: '#14489A',\r\n      2: '#125ab8',\r\n      3: '#5578D7',\r\n      4: '#2C52BA',\r\n      5: '#234295',\r\n      6: '#1B3375',\r\n      7: '#142555',\r\n    },\r\n\r\n    purple: {\r\n      1: '#42338B',\r\n      2: '#513FAB',\r\n      3: '#614E7A',\r\n      4: '#604793',\r\n      5: '#49356F',\r\n      6: '#342650',\r\n      7: '#271D3C',\r\n    },\r\n\r\n    grey: {\r\n      1: '#858F93',\r\n      2: '#4D5458',\r\n      3: '#272B2C',\r\n      4: '#202B31',\r\n      5: '#2C3C44',\r\n      6: '#384C56',\r\n      7: '#516C7B',\r\n    },\r\n  },\r\n}","export default {\r\n  0: { shortcut: '0', action: \"change app theme\" },\r\n  1: { shortcut: ['1', 'D'], action: 'open day view' },\r\n  2: { shortcut: ['2', 'W'], action: 'open week view' },\r\n  3: { shortcut: ['3', 'M'], action: 'open month view' },\r\n  4: { shortcut: ['4', 'Y'], action: 'open year view' },\r\n  5: { shortcut: ['5', 'L'], action: 'open list view' },\r\n  6: { shortcut: 'v', action: 'toggle view options' },\r\n  7: { shortcut: 't', action: 'set date to today' },\r\n  8: { shortcut: \"g\", action: 'enter date manually' },\r\n  9: { shortcut: \"n\", action: 'next period' },\r\n  10: { shortcut: \"p\", action: 'previous period' },\r\n  11: { shortcut: 's', action: 'toggle sidebar' },\r\n  12: { shortcut: 'f', action: 'open form' },\r\n  13: { shortcut: '+', action: 'open new category form' },\r\n  14: { shortcut: 'a', action: 'open settings' },\r\n  15: { shortcut: ['/', '?'], action: 'open keyboard shortcuts' },\r\n  16: { shortcut: \"e\", action: '(entry options) opens form with entry details' },\r\n  17: {\r\n    shortcut: '', action: [\r\n      '(datepicker) set date to next month/week',\r\n      '(yearpicker) set year to next year'\r\n    ]\r\n  },\r\n  18: {\r\n    shortcut: '', action: [\r\n      '(datepicker) set date to prev month/week',\r\n      '(yearpicker) set year to prev year'\r\n    ]\r\n  },\r\n  19: {\r\n    shortcut: '', action: [\r\n      '(datepicker) set date to prev day',\r\n      '(monthpicker) set month to prev month',\r\n    ]\r\n  },\r\n  20: {\r\n    shortcut: '', action: [\r\n      '(datepicker) set date to next day',\r\n      '(monthpicker) set month to next month',\r\n    ]\r\n  },\r\n  21: { shortcut: 'DELETE', action: '(entry options) delete entry' },\r\n  22: {\r\n    shortcut: 'ENTER', action: [\r\n      '(datepicker) set date to selected date',\r\n      '(form) submit form',\r\n    ]\r\n  },\r\n  23: { shortcut: \"ESCAPE\", action: 'close any active modal/popup/form' },\r\n}","import { formatTime, formatStartEndTimes } from \"./timeutils\"\r\nimport locales from \"../locales/en\"\r\nconst labels = locales.labels;\r\nconst monthNames = labels.monthsShort\r\n\r\nexport default function createDate(year, month, day) {\r\n  const pad = (num) => { return num < 10 ? `0${num}` : num; }\r\n  Date.prototype.toCustomISO = function () {\r\n    return this.getFullYear() +\r\n      '-' + pad(this.getMonth() + 1) +\r\n      '-' + pad(this.getDate()) +\r\n      'T' + pad(this.getHours()) +\r\n      ':' + pad(this.getMinutes()) +\r\n      ':' + pad(this.getSeconds()) +\r\n      '.' + (this.getMilliseconds() / 1000).toFixed(3).slice(2, 5) +\r\n      'Z';\r\n  }\r\n  if (!year && !month && !day) {\r\n    return new Date().toCustomISO()\r\n  } else {\r\n    return new Date(year, month, day, 0, 0, 0, 0).toCustomISO().slice(0, 10)\r\n  }\r\n}\r\n\r\nfunction testDate(date) {\r\n  return date instanceof Date && !isNaN(date) ? date : new Date(date)\r\n}\r\n\r\nfunction getDateFormatted(date) {\r\n  date = testDate(date)\r\n  return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`\r\n}\r\n\r\nfunction getDateForStore(date) {\r\n  date = testDate(date)\r\n  return `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`\r\n}\r\n\r\nfunction getdatearray(date) {\r\n  return [+date.getFullYear(), +date.getMonth() + 1, +date.getDate()]\r\n\r\n}\r\n\r\nfunction formatDateForDisplay(date) {\r\n  date = testDate(date)\r\n  const month = locales.labels.monthsShort[date.getMonth()]\r\n  const day = date.getDate()\r\n  let hours = date.getHours()\r\n  let minutes = date.getMinutes()\r\n  hours = hours < 10 ? `0${hours}` : hours\r\n  minutes = minutes < 10 ? `0${minutes}` : minutes\r\n  let hm = `${hours}:${minutes}`\r\n  return `${month} ${day} ${date.getFullYear()}, (${hm}) `\r\n}\r\n\r\nfunction compareDates(date1, date2) {\r\n  [date1, date2] = [testDate(date1), testDate(date2)]\r\n  return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate()\r\n}\r\n\r\nfunction formatDuration(seconds) {\r\n  let time = { year: 31536000, day: 86400, hour: 3600 },\r\n    res = [];\r\n  if (seconds === 0) return 'now';\r\n  for (let key in time) {\r\n    if (seconds >= time[key]) {\r\n      let val = Math.floor(seconds / time[key]); \r\n      res.push(val += val > 1 ? ' ' + key + 's' : ' ' + key);\r\n      seconds = seconds % time[key];\r\n    }\r\n  }\r\n  return res.length > 1 ? res.join(', ').replace(/,([^,]*)$/, ' &' + '$1') : res[0]\r\n}\r\n\r\nfunction formatDurationHourMin(seconds) {\r\n  let time = { hour: 3600, minute: 60},\r\n    res = [];\r\n  if (seconds === 0) return 'now';\r\n  for (let key in time) {\r\n    if (seconds >= time[key]) {\r\n      let val = Math.floor(seconds / time[key]);\r\n      res.push(val += val > 1 ? ' ' + key + 's' : ' ' + key);\r\n      seconds = seconds % time[key];\r\n    }\r\n  }\r\n  return res.length > 1 ? res.join(', ').replace(/,([^,]*)$/, ' &' + '$1') : res[0]\r\n}\r\n\r\nfunction formatStartEndDate(start, end, flag) {\r\n  [start, end] = [testDate(start), testDate(end)]\r\n\r\n  const [startday, startmonth, startyear] = [\r\n    start.getDate(),\r\n    monthNames[start.getMonth()],\r\n    start.getFullYear()\r\n  ]\r\n\r\n  const [endday, endmonth, endyear] = [\r\n    end.getDate(),\r\n    monthNames[end.getMonth()],\r\n    end.getFullYear()\r\n  ]\r\n\r\n  let tempstartyear = startyear;\r\n  let tempendyear = endyear;\r\n  if (flag) {\r\n    tempstartyear = startyear.toString().slice(2, 4);\r\n    tempendyear = endyear.toString().slice(2, 4);\r\n  }\r\n\r\n  if (startyear === endyear) {\r\n    if (startmonth === endmonth) {\r\n      if (startday === endday) {\r\n        // same : day, month, year\r\n        return `${startmonth} ${startday} ${startyear}`\r\n      } else {\r\n        // same : month, year\r\n        return `${startmonth} ${startday}  ${endday}, ${startyear}`\r\n      }\r\n    } else {\r\n      // same : year\r\n      return `${startmonth} ${startday}  ${endmonth} ${endday}, ${startyear}`\r\n    }\r\n  } else {\r\n    // same : nothing\r\n    return `${startmonth} ${startday}, ${tempstartyear}  ${endmonth} ${endday}, ${tempendyear}`\r\n  }\r\n}\r\n\r\nfunction formatStartEndTime(start, end) {\r\n  [start, end] = [new Date(start), new Date(end)]\r\n  let startmin = start.getMinutes()\r\n  let endmin = end.getMinutes()\r\n  endmin = endmin % 15 === 0 ? endmin : endmin + (15 - (endmin % 15))\r\n  startmin = startmin % 15 === 0 ? startmin : startmin + (15 - (startmin % 15))\r\n  let starttime = formatTime(start.getHours(), startmin)\r\n  let endtime = formatTime(end.getHours(), endmin)\r\n  if (starttime.slice(-2) === endtime.slice(-2)) {\r\n    starttime = starttime.slice(0, -2)\r\n  }\r\n  return `${starttime}  ${endtime}`\r\n}\r\n\r\nfunction getDuration(start, end) {\r\n  [start, end] = [new Date(start), new Date(end)]\r\n  const duration = formatDuration((Math.floor(end.getTime() / 1000)) - (Math.floor(start.getTime() / 1000)))\r\n  if (duration === undefined) {\r\n    return \"completed\"\r\n  } else {\r\n    return duration\r\n  }\r\n}\r\n\r\nfunction createDateFromFormattedString(dateString) {\r\n  const dateArray = dateString.split(\"-\")\r\n  return new Date(dateArray[0], dateArray[1] - 1, dateArray[2])\r\n}\r\n\r\nfunction isBeforeDate(date1, date2) {\r\n  [date1, date2] = [new Date(date1), new Date(date2)]\r\n  return date1.getTime() < date2.getTime()\r\n}\r\n\r\nfunction isDate(value) {\r\n  return value instanceof Date && !isNaN(value);\r\n}\r\n\r\nfunction getDateFromAttribute(target, attribute, view) {\r\n  return target.getAttribute(attribute).split(\"-\").map((x, i) => {\r\n    if (view === \"month\") {\r\n      return i === 1 ? parseInt(x) - 1 : parseInt(x)\r\n    } else {\r\n      return parseInt(x)\r\n    }\r\n  })\r\n}\r\n\r\nfunction getTimeFromAttribute(target, attribute) {\r\n  return target.getAttribute(attribute).split(\":\").map((x) => {\r\n    return parseInt(x);\r\n  })\r\n}\r\n\r\nfunction getDateTimeFormatted(date, hour, minute) {\r\n  date = testDate(date)\r\n  return new Date(\r\n    date.getFullYear(),\r\n    date.getMonth(),\r\n    date.getDate(),\r\n    parseInt(hour),\r\n    parseInt(minute),\r\n    1,\r\n    1,\r\n  )\r\n}\r\n\r\nfunction getTempDates(tempdate, hours, minutes) {\r\n  tempdate = testDate(tempdate);\r\n  return [\r\n    getDateTimeFormatted(tempdate, hours[0], minutes[0]),\r\n    getDateTimeFormatted(tempdate, hours[1], minutes[1]),\r\n  ];\r\n}\r\n\r\nfunction generateTempStartEnd(data) {\r\n  let tempdate = new Date()\r\n\r\n  const [year, month, day] = data\r\n  let startDate = new Date(year, month, day)\r\n  startDate.setHours(tempdate.getHours())\r\n  startDate.setMinutes(0)\r\n\r\n  let endDate = new Date(startDate)\r\n  endDate.setHours(tempdate.getHours())\r\n  endDate.setMinutes(30)\r\n\r\n  return [startDate, endDate];\r\n}\r\n\r\nfunction getFormDateObject(start, end) {\r\n  [start, end] = [testDate(start), testDate(end)]\r\n\r\n  const setmin = min => min === 0 ? \"00\" : min;\r\n  return {\r\n    dateObj: [start, end],\r\n    minutes: [setmin(start.getMinutes()), setmin(end.getMinutes())],\r\n    formatted: [getDateForStore(start), getDateForStore(end)],\r\n  }\r\n}\r\n\r\nfunction sortDates(dates, dir) {\r\n  return dates.sort((a, b) => {\r\n    let [date1, date2] = [new Date(a), new Date(b)];\r\n    if (dir === \"asc\") {\r\n      return date1 - date2;\r\n    } else {\r\n      return date2 - date1;\r\n    }\r\n  })\r\n}\r\n\r\nfunction getDurationSeconds(date1, date2) {\r\n  return (Math.floor(date2.getTime() / 1000)) - (Math.floor(date1.getTime() / 1000))\r\n}\r\n\r\nfunction formatEntryOptionsDate(date1, date2) {\r\n  let [y1, y2] = [date1.getFullYear(), date2.getFullYear()];\r\n  let [m1, m2] = [date1.getMonth(), date2.getMonth()];\r\n  let [d1, d2] = [date1.getDate(), date2.getDate()];\r\n  let [h1, h2] = [date1.getHours(), date2.getHours()];\r\n  let [min1, min2] = [date1.getMinutes(), date2.getMinutes()]\r\n\r\n  let useTempDate = false;\r\n  let tempdateone = new Date();\r\n  if (isBeforeDate(date1, tempdateone)) {\r\n    useTempDate = true;\r\n  }\r\n  // if same day, month, & year -- return time as start-end\r\n  // otherwise, return time as duration between start & end\r\n  if (y1 === y2) {\r\n    if (m1 === m2) {\r\n      if (d1 === d2) {\r\n        // === year, month, day\r\n        let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2)\r\n        let durationTime = formatDurationHourMin(duration);\r\n        return {\r\n          date: `${labels.monthsLong[m1]} ${d1}, ${y1} (${formatStartEndTimes([h1, h2], [min1, min2])})`,\r\n          time: durationTime,\r\n        }\r\n      } else {\r\n        // === year, month\r\n        let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2)\r\n        let durationTime = formatDuration(duration);\r\n        return {\r\n          date: `${labels.monthsLong[m1]} ${d1}  ${d2}, ${y1}`,\r\n          time: durationTime,\r\n        }\r\n      }\r\n    } else {\r\n      // === year\r\n      let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2)\r\n      let durationTime = formatDuration(duration);\r\n      return {\r\n        date: `${labels.monthsShort[m1]} ${d1}  ${labels.monthsShort[m2]} ${d2}, ${y2}`,\r\n        time: durationTime,\r\n      }\r\n    }\r\n  } else {\r\n    // different year --- return full date\r\n    let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2)\r\n    let durationTime = formatDuration(duration);\r\n    return {\r\n      date: `${labels.monthsShort[m1]} ${d1}, ${y1}  ${labels.monthsShort[m2]} ${d2}, ${y2}`,\r\n      time: durationTime,\r\n    }\r\n  }\r\n}\r\n\r\nfunction createTimestamp() {\r\n  const date = new Date();\r\n  const year = date.getFullYear().toString().slice(-2);\r\n  const month = monthNames[date.getMonth()].toUpperCase();\r\n  const day = parseInt(date.getDate());\r\n  return `${month}${day}`\r\n}\r\n\r\nfunction longerThanDay(date1, date2) {\r\n  return getDurationSeconds(date1, date2) > 86400;\r\n}\r\n\r\nfunction getDayOrdinal(day) {\r\n  if (day > 3 && day < 21) return 'th';\r\n  switch (day % 10) {\r\n    case 1: return \"st\";\r\n    case 2: return \"nd\";\r\n    case 3: return \"rd\";\r\n    default: return \"th\";\r\n  }\r\n}\r\n\r\nexport {\r\n  testDate,\r\n  getDateFormatted,\r\n  getDateForStore,\r\n  getdatearray,\r\n  formatDateForDisplay,\r\n  formatDuration,\r\n  compareDates,\r\n  createDateFromFormattedString,\r\n  formatStartEndDate,\r\n  formatStartEndTime,\r\n  getDuration,\r\n  isBeforeDate,\r\n  isDate,\r\n  getDateFromAttribute,\r\n  getTimeFromAttribute,\r\n  getDateTimeFormatted,\r\n  getTempDates,\r\n  generateTempStartEnd,\r\n  getFormDateObject,\r\n  sortDates,\r\n  formatEntryOptionsDate,\r\n  getDurationSeconds,\r\n  createTimestamp,\r\n  longerThanDay,\r\n  getDayOrdinal,\r\n}","import calcTime from \"./timeutils\"\r\n\r\n/**\r\n * For a full explanation see readme @grid-engines\r\n * \r\n * The weekiew & dayview drag/resize systems are 90% similar with the only difference of course being some additional calculations to drag between days in the weekview.\r\n * \r\n * \r\n * All drag / resize events throughout each view follow these steps;\r\n * -- capture :\r\n * document.onmousedown captures the position of cursor & defines variables for start/end points\r\n * \r\n * -- relay :\r\n * document.onmousemove relays the new position to start/end point variables, which in turn relay a new set of styling rules to the element target (entry) \r\n * \r\n * -- render :\r\n * document.onmouseup intitiates all render logic\r\n * \r\n * \r\n * \r\n */\r\n\r\n\r\nconst identifiers = {\r\n  boxnumarr: {\r\n    week: [\r\n      'box-one', 'box-two', 'box-three',\r\n      'box-four', 'box-five', 'box-six',\r\n      'box-seven', 'box-eight', 'box-nine',\r\n      'box-ten', 'box-eleven', 'box-twelve',\r\n      'box-thirteen', 'box-fourteen', 'box-fifteen',\r\n    ],\r\n    day: [\r\n      'dv-box-one', 'dv-box-two', 'dv-box-three',\r\n      'dv-box-four', 'dv-box-five', 'dv-box-six',\r\n      'dv-box-seven', 'dv-box-eight', 'dv-box-nine',\r\n      'dv-box-ten', 'dv-box-eleven', 'dv-box-twelve',\r\n      'dv-box-thirteen', 'dv-box-fourteen', 'dv-box-fifteen',\r\n    ],\r\n  },\r\n\r\n  boxClasses: {\r\n    week: {\r\n      base: \"box\",\r\n      ontop: \"box-ontop\",\r\n      active: \"box-mv-dragactive\",\r\n      temporary: \"temporary-box\",\r\n      prepend: \"box-\",\r\n    },\r\n    day: {\r\n      base: \"dv-box\",\r\n      ontop: \"dv-box-ontop\",\r\n      active: \"dv-box-mv-dragactive\",\r\n      temporary: \"dv-temporary-box\",\r\n      prepend: \"dv-box-\",\r\n    },\r\n  },\r\n\r\n  boxAttributes: {\r\n    week: {\r\n      updatecoord: [\r\n        \"data-box-id\",\r\n        \"data-start-time\",\r\n        \"data-time-intervals\"\r\n      ],\r\n      dataIdx: \"box-idx\",\r\n      dataId: \"data-box-id\",\r\n      dataCol: \"data-box-col\",\r\n      prepend: \"data-\",\r\n      prepentwo: \"data-wv-\"\r\n    },\r\n    day: {\r\n      updatecoord: [\r\n        \"data-dv-box-id\",\r\n        \"data-dv-start-time\",\r\n        \"data-dv-time-intervals\",\r\n      ],\r\n      dataIdx: \"data-dv-box-index\",\r\n      dataId: \"data-dv-box-id\",\r\n      prepend: \"data-dv-\",\r\n      prepentwo: \"data-dv-\"\r\n    },\r\n  },\r\n\r\n  styles: {\r\n    newBox: {\r\n      left: \"calc((100% - 0px) * 0 + 0px)\",\r\n      height: \"12.5px\",\r\n      width: \"calc((100% - 4px) * 1)\",\r\n    }\r\n  }\r\n}\r\n\r\nfunction calcNewLeft(index) {\r\n  let base = 0.1;\r\n  let add = 0.05;\r\n\r\n  if (index === 0) {\r\n    return 0;\r\n  }\r\n\r\n  if (index >= 1 && index <= 5) {\r\n    return (index * add) + base;\r\n  }\r\n}\r\n\r\n\r\n// *** I'm using a temporary switch statement to try and fine tune the collision handling for now\r\nfunction setBoxWidthWeek(box, prepend, dataidx) {\r\n  const attr = box.getAttribute(dataidx);\r\n  switch (attr) {\r\n    case `${prepend}one`:\r\n      box.style.left = 'calc((100% - 0px) * 0 + 0px)';\r\n      box.style.width = \"calc((100% - 4px) * 1)\"\r\n      break;\r\n    case `${prepend}two`:\r\n      box.style.left = \"calc((100% - 0px) * 0.2 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.80)\";\r\n      break;\r\n    case `${prepend}three`:\r\n      box.style.left = \"calc((100% - 0px) * 0.45 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.55)\";\r\n      break;\r\n    case `${prepend}four`:\r\n      box.style.left = \"calc((100% - 0px) * 0.0 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.44)\"\r\n      break;\r\n    case `${prepend}five`:\r\n      box.style.left = \"calc((100% - 0px) * .5 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.35)\"\r\n      break;\r\n    case `${prepend}six`:\r\n      box.style.left = \"calc((100% - 0px) * 0.1 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.4)\"\r\n      break;\r\n    case `${prepend}seven`:\r\n      box.style.left = \"calc((100% - 0px) * 0.5 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.5)\"\r\n      break;\r\n    case `${prepend}eight`:\r\n      box.style.left = \"calc((100% - 0px) * 0.25 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.25)\"\r\n      break;\r\n    case `${prepend}nine`:\r\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.35)\"\r\n      break;\r\n    case `${prepend}ten`:\r\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\"\r\n      break;\r\n    case `${prepend}eleven`:\r\n      box.style.left = \"calc((100% - 0px) * 0.70 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\"\r\n      break;\r\n    case `${prepend}twelve`:\r\n      box.style.left = \"calc((100% - 0px) * 0.85 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\"\r\n      break;\r\n    case `${prepend}thirteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.05 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\"\r\n      break;\r\n    case `${prepend}fourteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\"\r\n      break;\r\n    case `${prepend}fifteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\"\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction setBoxWidthDay(box, prepend, dataidx) {\r\n  const attr = box.getAttribute(dataidx);\r\n  switch (attr) {\r\n    case `${prepend}one`:\r\n      box.style.left = 'calc((100% - 0px) * 0 + 0px)';\r\n      box.style.width = \"calc((100% - 4px) * 1)\"\r\n      break;\r\n    case `${prepend}two`:\r\n      box.style.left = \"calc((100% - 0px) * 0.15 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.85)\";\r\n      break;\r\n    case `${prepend}three`:\r\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.70)\";\r\n      break;\r\n    case `${prepend}four`:\r\n      box.style.left = \"calc((100% - 0px) * 0.45 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.55)\"\r\n      break;\r\n    case `${prepend}five`:\r\n      box.style.left = \"calc((100% - 0px) * 0.60 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.40)\"\r\n      break;\r\n    case `${prepend}six`:\r\n      box.style.left = \"calc((100% - 0px) * 0.75 + 0px)\"\r\n      box.style.width = \"calc((100% - 4px) * 0.25)\"\r\n      break;\r\n    case `${prepend}seven`:\r\n      box.style.left = \"calc((100% - 0px) * 0.10 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\"\r\n      break;\r\n    case `${prepend}eight`:\r\n      box.style.left = \"calc((100% - 0px) * 0.25 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\"\r\n      break;\r\n    case `${prepend}nine`:\r\n      box.style.left = \"calc((100% - 0px) * 0.4 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\"\r\n      break;\r\n    case `${prepend}ten`:\r\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\"\r\n      break;\r\n    case `${prepend}eleven`:\r\n      box.style.left = \"calc((100% - 0px) * 0.70 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\"\r\n      break;\r\n    case `${prepend}twelve`:\r\n      box.style.left = \"calc((100% - 0px) * 0.85 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.15)\"\r\n      break;\r\n    case `${prepend}thirteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.05 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\"\r\n      break;\r\n    case `${prepend}fourteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\"\r\n      break;\r\n    case `${prepend}fifteen`:\r\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\"\r\n      box.style.width = \"calc((100% - 16px) * 0.25)\"\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\nfunction handleOverlap(col, view, boxes) {\r\n\r\n  const collisions = view === \"day\" ? boxes.checkForCollision() : boxes.checkForCollision(col);\r\n\r\n  const identifyBox = identifiers.boxnumarr[view]\r\n\r\n  const [baseClass, classPrepend] = [\r\n    identifiers.boxClasses[view],\r\n    identifiers.boxClasses[view].prepend,\r\n  ]\r\n\r\n  const [boxIdxAttr, boxIdAttr] = [\r\n    identifiers.boxAttributes[view].dataIdx,\r\n    identifiers.boxAttributes[view].dataId,\r\n  ]\r\n\r\n  for (let i = 0; i < collisions.length; i++) {\r\n    const box = document.querySelector(`[${boxIdAttr}=\"${collisions[i].id}\"]`)\r\n    let idx = i;\r\n    if (i >= 15) {\r\n      idx -= 12;\r\n    }\r\n    if (i === 0) {\r\n      box.setAttribute(\"class\", `${baseClass.base} ${identifyBox[idx]}`)\r\n      box.setAttribute(boxIdxAttr, identifyBox[idx])\r\n    } else {\r\n      box.setAttribute(\"class\", `${baseClass.base} ${baseClass.ontop} ${identifyBox[idx]}`)\r\n      box.setAttribute(boxIdxAttr, identifyBox[idx])\r\n    }\r\n    view === \"day\"\r\n      ? setBoxWidthDay(box, classPrepend, boxIdxAttr)\r\n      : setBoxWidthWeek(box, classPrepend, boxIdxAttr)\r\n  }\r\n}\r\n\r\nfunction setStylingForEvent(clause, wrapper, store) {\r\n  const sidebar = document.querySelector(\".sidebar\")\r\n  const resizeoverlay = document.querySelector(\".resize-overlay\")\r\n\r\n  switch (clause) {\r\n    case \"dragstart\":\r\n      // make sidebar slightly see through if it is open and the user is dragging or resizing (screens smaller than 840px);\r\n      if (!sidebar.classList.contains(\"hide-sidebar\")) {\r\n        if (wrapper.offsetLeft === 0) {\r\n          sidebar.classList.add(\"sidebar--dragged-over\")\r\n        }\r\n      }\r\n      store.addActiveOverlay(\"hide-resize-overlay\");\r\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\r\n      break;\r\n    case \"dragend\":\r\n      store.removeActiveOverlay(\"hide-resize-overlay\")\r\n      sidebar.classList.remove(\"sidebar--dragged-over\")\r\n      resizeoverlay.classList.add(\"hide-resize-overlay\")\r\n      document.body.style.cursor = \"default\"\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction updateBoxCoordinates(box, view, boxes) {\r\n  let [id, y, h] = identifiers.boxAttributes[view].updatecoord.map((x) => {\r\n    return box.getAttribute(x)\r\n  })\r\n  let x = view === \"week\" ? box.getAttribute(\"data-box-col\") : 1;\r\n  boxes.updateCoordinates(id, {\r\n    x: parseInt(x),\r\n    y: parseInt(y),\r\n    h: parseInt(h),\r\n    e: parseInt(y) + parseInt(h),\r\n  })\r\n}\r\n\r\nfunction setBoxTimeAttributes(box, view) {\r\n  let start = +box.style.top.split(\"px\")[0]\r\n  start = start >= 0 ? start / 12.5 : 0\r\n  let length = +box.style.height.split(\"px\")[0] / 12.5\r\n  let end = start + length\r\n  let prepend = identifiers.boxAttributes[view].prepend\r\n  box.setAttribute(`${prepend}start-time`, start)\r\n  box.setAttribute(`${prepend}time-intervals`, length)\r\n  box.setAttribute(`${prepend}end-time`, end)\r\n}\r\n\r\nfunction createBox(col, entry, view, color) {\r\n  const baseClass = identifiers.boxClasses[view].base;\r\n  const attrPrepend = identifiers.boxAttributes[view].prepend;\r\n  const attrPrependTwo = identifiers.boxAttributes[view].prependtwo;\r\n  const coord = entry.coordinates\r\n\r\n  const box = document.createElement('div');\r\n  box.classList.add(baseClass);\r\n  box.style.backgroundColor = color;\r\n  box.style.top = `${+coord.y * 12.5}px`;\r\n  box.style.height = `${+coord.h * 12.5}px`;\r\n  box.style.left = 'calc((100% - 0px) * 0 + 0px)';\r\n  box.style.width = \"calc((100% - 4px) * 1)\"\r\n\r\n  const boxheader = document.createElement('div');\r\n  boxheader.classList.add(`${baseClass}__header`);\r\n  const entryTitle = document.createElement('div');\r\n  entryTitle.classList.add(`${baseClass}-title`);\r\n  entryTitle.textContent = entry.title;\r\n  boxheader.appendChild(entryTitle);\r\n\r\n  const boxcontent = document.createElement('div');\r\n  boxcontent.classList.add(`${baseClass}__content`);\r\n  const entryTime = document.createElement('span');\r\n  entryTime.classList.add(`${baseClass}-time`)\r\n  boxcontent.appendChild(entryTime);\r\n\r\n  const resizehandleS = document.createElement('div');\r\n  resizehandleS.classList.add(`${baseClass}-resize-s`)\r\n\r\n  if (col.getAttribute(`${attrPrependTwo}top`) === \"true\") {\r\n    box.setAttribute(`${attrPrependTwo}start`, coord.x)\r\n    box.setAttribute(`${attrPrependTwo}end`, coord.x2)\r\n  } else {\r\n    box.setAttribute(`${attrPrepend}start-time`, coord.y)\r\n    box.setAttribute(`${attrPrepend}time-intervals`, coord.h)\r\n    box.setAttribute(`${attrPrepend}end-time`, +coord.y + +coord.h)\r\n    if (view === \"week\") {\r\n      box.setAttribute(\"data-box-col\", coord.x)\r\n      box.setAttribute(\"box-idx\", 1)\r\n    } else {\r\n      box.setAttribute(\"data-dv-box-index\", 1)\r\n    }\r\n    entryTime.textContent = calcTime(coord.y, +coord.h)\r\n  }\r\n\r\n  box.setAttribute(`${attrPrepend}box-id`, entry.id)\r\n  box.setAttribute(`${attrPrepend}box-category`, entry.category)\r\n  box.append(boxheader, boxcontent, resizehandleS)\r\n  col.appendChild(box);\r\n}\r\n\r\nfunction createTemporaryBox(box, col, hasSibling, view) {\r\n  const clone = box.cloneNode(true)\r\n  clone.classList.add(`${identifiers.boxClasses[view].temporary}`)\r\n  if (hasSibling) {\r\n    col.insertBefore(clone, box.nextElementSibling)\r\n  } else {\r\n    col.appendChild(clone)\r\n  }\r\n}\r\n\r\nfunction getBoxDefaultStyle(y, backgroundColor) {\r\n  const style = identifiers.styles.newBox\r\n  return `top:${y}px; left:${style.left}; height:${style.height}; width:${style.width}; background-color:${backgroundColor};`\r\n}\r\n\r\nfunction resetStyleOnClick(view, box) {\r\n  box.setAttribute(\"class\", identifiers.boxClasses[view].base)\r\n  box.style.left = 'calc((100% - 0px) * 0 + 0px)';\r\n  box.style.width = \"calc((100% - 4px) * 1)\"\r\n}\r\n\r\nfunction createTempBoxHeader(view) {\r\n  const baseClass = identifiers.boxClasses[view].base\r\n  const boxheader = document.createElement('div');\r\n  const boxtitle = document.createElement('div');\r\n  boxheader.classList.add(`${baseClass}__header`);\r\n  boxtitle.classList.add(`${baseClass}-title`);\r\n  boxtitle.textContent = \"(no title)\";\r\n  boxheader.appendChild(boxtitle)\r\n  return boxheader\r\n}\r\n\r\nfunction startEndDefault(y) {\r\n  let tempstarthour = Math.floor((y / 12.5) / 4);\r\n  let tempstartmin = Math.floor((y / 12.5) % 4) * 15;\r\n  return [\r\n    tempstarthour,        // start hour\r\n    tempstartmin,         // start minute\r\n    tempstarthour,        // end hour\r\n    +tempstartmin + 15    // end minute\r\n  ];\r\n}\r\n\r\nfunction calcNewHourFromCoords(h, y) {\r\n  return Math.floor(((h + y) / 12.5) / 4)\r\n}\r\n\r\nfunction calcNewMinuteFromCoords(h, y) {\r\n  return Math.floor(((h + y) / 12.5) % 4) * 15\r\n}\r\n\r\nfunction calcDateOnClick(date, start, length) {\r\n  let [startDate, endDate] = [new Date(date), new Date(date)];\r\n  startDate.setHours(Math.floor(+start / 4));\r\n  startDate.setMinutes((+start * 15) % 60);\r\n  endDate.setHours(Math.floor((start + length) / 4));\r\n  endDate.setMinutes(((start + length) * 15) % 60);\r\n  return [startDate, endDate];\r\n}\r\n\r\nfunction getOriginalBoxObject(box) {\r\n  return {\r\n    height: box.style.height,\r\n    left: box.style.left,\r\n    width: box.style.width,\r\n    class: box.getAttribute(\"class\"),\r\n  }\r\n}\r\n\r\nfunction resetOriginalBox(box, boxorig) {\r\n  box.setAttribute(\"class\", boxorig.class)\r\n  box.style.left = boxorig.left;\r\n  box.style.width = boxorig.width;\r\n}\r\n\r\nexport default handleOverlap\r\nexport {\r\n  setStylingForEvent,\r\n  updateBoxCoordinates,\r\n  setBoxTimeAttributes,\r\n  createBox,\r\n  createTemporaryBox,\r\n  getBoxDefaultStyle,\r\n  resetStyleOnClick,\r\n  createTempBoxHeader,\r\n  startEndDefault,\r\n  calcNewHourFromCoords,\r\n  calcNewMinuteFromCoords,\r\n  calcDateOnClick,\r\n  getOriginalBoxObject,\r\n  resetOriginalBox\r\n}","/**\r\n * \r\n * @param {callback} func \r\n * @param {number} limit \r\n * @returns strict debounce \r\n */\r\nfunction debounce(func, limit) {\r\n  let timeoutId;\r\n  return function (...args) {\r\n    clearTimeout(timeoutId);\r\n    timeoutId = setTimeout(() => func.apply(this, args), limit)\r\n  }\r\n}\r\n/**\r\n * \r\n * @param {*} e \r\n * @param {*} element \r\n * \r\n * With the exception of popup modals, all events in the app\r\n * are delegated from their parent element.\r\n */\r\nfunction getClosest(e, element) {\r\n  return e.target.closest(element)\r\n}\r\n\r\nfunction hextorgba(hex, alpha) {\r\n  let r = 0, g = 0, b = 0, a = alpha;\r\n  r = \"0x\" + hex[1] + hex[2];\r\n  g = \"0x\" + hex[3] + hex[4];\r\n  b = \"0x\" + hex[5] + hex[6];\r\n  return \"rgba(\" + +r + \",\" + +g + \",\" + +b + \",\" + a + \")\";\r\n}\r\n\r\nfunction generateId() {\r\n  return Date.now().toString(36) + Math.random().toString(36).substring(2)\r\n}\r\n\r\nconst throttle = (fn, wait) => {\r\n  let inThrottle, lastFn, lastTime;\r\n  return function() {\r\n    const context = this,\r\n      args = arguments;\r\n    if (!inThrottle) {\r\n      fn.apply(context, args);\r\n      lastTime = Date.now();\r\n      inThrottle = true;\r\n    } else {\r\n      clearTimeout(lastFn);\r\n      lastFn = setTimeout(function() {\r\n        if (Date.now() - lastTime >= wait) {\r\n          fn.apply(context, args);\r\n          lastTime = Date.now();\r\n        }\r\n      }, Math.max(wait - (Date.now() - lastTime), 0));\r\n    }\r\n  };\r\n};\r\n\r\nfunction setTheme(context) {\r\n  const appBody = document.querySelector(\".body\");\r\n  const colorSchemeMeta = document.getElementsByName(\"color-scheme\")[0];\r\n  const currentScheme = context.getColorScheme();\r\n  const hasLightMode = appBody.classList.contains(\"light-mode\");\r\n  const hasContrastMode = appBody.classList.contains(\"contrast-mode\");\r\n\r\n  const setColorSchema = () => {\r\n    if (currentScheme === \"light\" && hasLightMode && !hasContrastMode) {\r\n      return;\r\n    } else if (currentScheme === \"dark\" && !hasLightMode && !hasContrastMode) {\r\n      return;\r\n    } else if (currentScheme === \"contrast\" && hasContrastMode && !hasLightMode) {\r\n      return;\r\n    }\r\n\r\n    const darkicon = document.querySelector(\".sbti-one\")\r\n    const lighticon = document.querySelector(\".sbti-two\")\r\n    const contrasticon = document.querySelector(\".sbti-three\")\r\n\r\n    const setlight = () => {\r\n      context.setColorScheme(\"light\")\r\n      colorSchemeMeta.setAttribute(\"content\", \"light\");\r\n\r\n      appBody.classList.remove(\"contrast-mode\")\r\n      appBody.classList.add(\"light-mode\");\r\n\r\n      lighticon.classList.remove(\"sb-theme-icon-hide\")\r\n      darkicon.classList.add(\"sb-theme-icon-hide\")\r\n      contrasticon.classList.add(\"sb-theme-icon-hide\")\r\n    }\r\n\r\n    const setdark = () => {\r\n      context.setColorScheme(\"dark\")\r\n      colorSchemeMeta.setAttribute(\"content\", \"dark light\");\r\n\r\n      appBody.classList.remove(\"light-mode\");\r\n      appBody.classList.remove(\"contrast-mode\")\r\n\r\n      darkicon.classList.remove(\"sb-theme-icon-hide\")\r\n      contrasticon.classList.add(\"sb-theme-icon-hide\")\r\n      lighticon.classList.add(\"sb-theme-icon-hide\")\r\n    }\r\n\r\n    const setcontrast = () => {\r\n      context.setColorScheme(\"contrast\")\r\n      colorSchemeMeta.setAttribute(\"content\", \"dark\");\r\n\r\n      appBody.classList.remove(\"light-mode\");\r\n      appBody.classList.add(\"contrast-mode\")\r\n\r\n      contrasticon.classList.remove(\"sb-theme-icon-hide\")\r\n      darkicon.classList.add(\"sb-theme-icon-hide\")\r\n      lighticon.classList.add(\"sb-theme-icon-hide\")\r\n    }\r\n\r\n\r\n    if (currentScheme === \"light\") {\r\n      setlight()\r\n      return;\r\n    } \r\n\r\n    if (currentScheme === \"contrast\") {\r\n      setcontrast()\r\n      return;\r\n    }\r\n\r\n    if (currentScheme === \"dark\") {\r\n      setdark()\r\n      return;\r\n    }\r\n  }\r\n  setColorSchema()\r\n}\r\n\r\n\r\n/**\r\n * \r\n * @param {number} popupWidth \r\n * @param {number} popupHeight \r\n * @param {array} coords [x: e.clientX, y: e.clientY]\r\n * @param {array} windowCoords [x: window.innerWidth, y: window.innerHeight]\r\n * @param {boolean} center should popup be centered ?\r\n * @param {number} targetWidth if center is true, targetWidth required to center\r\n * @returns [left position, top position];\r\n */\r\nfunction placePopup(popupWidth, popupHeight, coords, windowCoords, center, targetWidth) {\r\n  const [popupW, popupH] = [popupWidth, popupHeight];\r\n  const [x, y] = coords;\r\n  const [winW, winH] = windowCoords;\r\n\r\n  let popupX;\r\n  if (center) {\r\n    // align to center of target element (targetWidth)\r\n    popupX = x - (popupW / 2) + (targetWidth / 2);\r\n    if (targetWidth + x + 4 >= winW) {\r\n      popupX = winW - popupW - 4;\r\n    }\r\n  } else {\r\n    popupX = x + popupW > winW ? x - popupW - 6 : x;\r\n  }\r\n\r\n  let popupY = y + popupH > winH ? winH - popupH - 6 : y;\r\n\r\n  if (popupX < 0) popupX = Math.abs(popupX);\r\n  if (popupY < 0) popupY = 56;\r\n  return [popupX, popupY];\r\n}\r\n\r\nfunction isNumeric(n) {\r\n  return !isNaN(parseFloat(n)) && isFinite(n);\r\n}\r\n\r\n\r\nexport default debounce;\r\nexport {\r\n  getClosest,\r\n  hextorgba,\r\n  generateId,\r\n  throttle,\r\n  setTheme,\r\n  placePopup,\r\n  isNumeric\r\n} ","let n = 40;\r\nexport default n\r\n\r\nconst createSortPlaceholderIcon = () => {\r\n  const iconwrapper = document.createElement(\"span\")\r\n  iconwrapper.classList.add(\"lvhi-sort--placeholder\")\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"20\");\r\n  icon.setAttribute(\"width\", \"20\");\r\n  icon.style.transform = \"scale(0.7) rotate(90deg)\"\r\n  const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  path.setAttribute(\"d\", \"M8.5 15 3 10l5.5-5Zm-1-2.25v-5.5L4.5 10Zm4 2.25V5l5.5 5Z\");\r\n  icon.appendChild(path);\r\n  iconwrapper.appendChild(icon)\r\n  return iconwrapper;\r\n}\r\n\r\nconst createStatusIcon = () => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"24\");\r\n  icon.setAttribute(\"width\", \"24\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  icon.setAttribute(\"fill\", \"var(--white3)\")\r\n  icon.classList.add(\"lvhi-status--icon\")\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\")\r\n  pathone.setAttribute(\"fill\", \"none\")\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z\");\r\n  icon.append(pathone, pathtwo)\r\n  return icon\r\n}\r\n\r\nconst createCategoryIcon = () => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"24\");\r\n  icon.setAttribute(\"width\", \"24\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  icon.setAttribute(\"fill\", \"var(--white3)\");\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\")\r\n  pathone.setAttribute(\"fill\", \"none\")\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\");\r\n  icon.classList.add(\"lvhi-category--icon\")\r\n  icon.append(pathone, pathtwo);\r\n  return icon;\r\n}\r\n\r\nconst createEditIcon = () => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"20\");\r\n  icon.setAttribute(\"width\", \"20\");\r\n  icon.setAttribute(\"fill\", \"var(--white3)\")\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M10 16q-.625 0-1.062-.438Q8.5 15.125 8.5 14.5t.438-1.062Q9.375 13 10 13t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 16 10 16Zm0-4.5q-.625 0-1.062-.438Q8.5 10.625 8.5 10t.438-1.062Q9.375 8.5 10 8.5t1.062.438q.438.437.438 1.062t-.438 1.062q-.437.438-1.062.438ZM10 7q-.625 0-1.062-.438Q8.5 6.125 8.5 5.5t.438-1.062Q9.375 4 10 4t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 7 10 7Z\")\r\n  icon.appendChild(pathone)\r\n  return icon;\r\n}\r\n\r\nconst createPencilIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"20\");\r\n  icon.setAttribute(\"width\", \"20\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\")\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\")\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill)\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M20.41 4.94l-1.35-1.35c-.78-.78-2.05-.78-2.83 0L3 16.82V21h4.18L20.41 7.77c.79-.78.79-2.05 0-2.83zm-14 14.12L5 19v-1.36l9.82-9.82 1.41 1.41-9.82 9.83z\");\r\n  icon.appendChild(pathone)\r\n  return icon;\r\n}\r\n\r\nconst createTrashIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"24\");\r\n  icon.setAttribute(\"width\", \"24\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\")\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill)\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M15 4V3H9v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5zm2 15H7V6h10v13z\")\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M9 8h2v9H9zm4 0h2v9h-2z\")\r\n  icon.append(pathone, pathtwo)\r\n  return icon;\r\n}\r\n\r\nconst createCloseIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"20\");\r\n  icon.setAttribute(\"width\", \"20\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\")\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill)\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M6.062 15 5 13.938 8.938 10 5 6.062 6.062 5 10 8.938 13.938 5 15 6.062 11.062 10 15 13.938 13.938 15 10 11.062Z\")\r\n  icon.appendChild(pathone)\r\n  return icon;\r\n}\r\n\r\nconst createCaretDownIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"18\");\r\n  icon.setAttribute(\"width\", \"18\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\")\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill)\r\n  }\r\n\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\r\n  pathone.setAttribute(\"fill\", \"none\");\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M7 10l5 5 5-5z\");\r\n  icon.append(pathone, pathtwo)\r\n  return icon;\r\n}\r\n\r\nconst createCaretUpIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"18\");\r\n  icon.setAttribute(\"width\", \"18\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\")\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill)\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0V0z\");\r\n  pathone.setAttribute(\"fill\", \"none\");\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M7 14l5-5 5 5H7z\");\r\n  icon.append(pathone, pathtwo)\r\n  return icon;\r\n}\r\n\r\nconst createCaretRightIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"20\");\r\n  icon.setAttribute(\"width\", \"20\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\")\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill)\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"m6 18.167-1.583-1.584L11 10 4.417 3.417 6 1.833 14.167 10Z\");\r\n  icon.appendChild(pathone)\r\n  return icon;\r\n}\r\n\r\nconst createCheckIcon = (fill) => {\r\n  // <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"18px\" viewBox=\"0 0 24 24\" width=\"18px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"/></svg>\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"18px\");\r\n  icon.setAttribute(\"width\", \"18px\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\")\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white2)\")\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill)\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\")\r\n  pathone.setAttribute(\"fill\", \"none\")\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\")\r\n  icon.append(pathone, pathtwo)\r\n  return icon;\r\n}\r\n\r\nconst createCheckBoxIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"24\");\r\n  icon.setAttribute(\"width\", \"24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white2)\")\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill)\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"m10.6 16.2 7.05-7.05-1.4-1.4-5.65 5.65-2.85-2.85-1.4 1.4ZM5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h14q.825 0 1.413.587Q21 4.175 21 5v14q0 .825-.587 1.413Q19.825 21 19 21Zm0-2h14V5H5v14ZM5 5v14V5Z\")\r\n  icon.appendChild(pathone)\r\n  return icon;\r\n}\r\n\r\nconst createMeatballVertIcon = (fill) => {\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"24\");\r\n  icon.setAttribute(\"width\", \"24\");\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white4)\")\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill)\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M6 14q-.825 0-1.412-.588Q4 12.825 4 12t.588-1.413Q5.175 10 6 10t1.412.587Q8 11.175 8 12q0 .825-.588 1.412Q6.825 14 6 14Zm6 0q-.825 0-1.412-.588Q10 12.825 10 12t.588-1.413Q11.175 10 12 10t1.413.587Q14 11.175 14 12q0 .825-.587 1.412Q12.825 14 12 14Zm6 0q-.825 0-1.413-.588Q16 12.825 16 12t.587-1.413Q17.175 10 18 10q.825 0 1.413.587Q20 11.175 20 12q0 .825-.587 1.412Q18.825 14 18 14Z\")\r\n  icon.appendChild(pathone)\r\n  return icon;\r\n}\r\n\r\nconst createExpandDownIcon = (fill) => {\r\n{/* <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"18px\" viewBox=\"0 0 24 24\" width=\"18px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"/></svg> */}\r\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  icon.setAttribute(\"height\", \"18px\");\r\n  icon.setAttribute(\"width\", \"18px\");\r\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\")\r\n  // icon.setAttribute(\"fill\", \"\")\r\n  if (!fill) {\r\n    icon.setAttribute(\"fill\", \"var(--white3)\")\r\n  } else {\r\n    icon.setAttribute(\"fill\", fill)\r\n  }\r\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\")\r\n  pathone.setAttribute(\"fill\", \"none\")\r\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n  pathtwo.setAttribute(\"d\", \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\")\r\n  icon.append(pathone, pathtwo);  \r\n  return icon;\r\n}\r\n\r\nexport {\r\n  createSortPlaceholderIcon,\r\n  createStatusIcon,\r\n  createCategoryIcon,\r\n  createEditIcon,\r\n  createPencilIcon,\r\n  createTrashIcon,\r\n  createCloseIcon,\r\n  createCaretDownIcon,\r\n  createCaretUpIcon,\r\n  createCaretRightIcon,\r\n  createCheckIcon,\r\n  createCheckBoxIcon,\r\n  createMeatballVertIcon,\r\n  createExpandDownIcon\r\n}\r\n","function formatTime(hours, minutes) {\r\n  let md;\r\n  if (minutes === 60) {\r\n    minutes = 0;\r\n    hours += 1;\r\n  }\r\n  if (+hours === 0) {\r\n    hours = 12;\r\n    md = \"am\";\r\n  } else if (hours < 12) {\r\n    md = \"am\";\r\n  } else if (hours === 12) {\r\n    md = \"pm\";\r\n  } else if (hours === 24) {\r\n    md = \"am\";\r\n    hours -= 12;\r\n  } else {\r\n    hours -= 12;\r\n    md = \"pm\";\r\n  }\r\n\r\n  if (+minutes === 0) {\r\n    return `${hours}${md}`;\r\n  } else {\r\n    return `${hours}:${minutes}${md}`;\r\n  }\r\n}\r\n\r\nfunction formatStartEndTimes(hours, minutes) {\r\n  let [startHours, endHours] = hours;\r\n  let [startMinutes, endMinutes] = minutes;\r\n\r\n  let [start, end] = [\r\n    formatTime(startHours, startMinutes),\r\n    formatTime(endHours, endMinutes),\r\n  ];\r\n\r\n  if (start.slice(-2) === end.slice(-2)) { \r\n    start = start.slice(0, -2);\r\n  }\r\n\r\n  return `${start}  ${end}`;\r\n}\r\n\r\nfunction configMinutesForStore(minutes) {\r\n  return minutes === 0 ? \"00\" : minutes;\r\n}\r\n\r\nfunction calcTime(start, length) {\r\n  let startHours = Math.floor(+start / 4);\r\n  let startMinutes = (+start * 15) % 60;\r\n\r\n  let endHours = Math.floor((start + length) / 4);\r\n  let endMinutes = ((start + length) * 15) % 60;\r\n\r\n  let startingtime = formatTime(startHours, startMinutes);\r\n  let endingtime = formatTime(endHours, endMinutes);\r\n\r\n  if (startingtime.slice(-2) == endingtime.slice(-2)) {\r\n    startingtime = startingtime.slice(0, -2);\r\n  }\r\n\r\n  const boxtime = `${startingtime}  ${endingtime}`;\r\n  return boxtime;\r\n}\r\n\r\nfunction compareTimes(time1, time2) {\r\n  let [hours1, minutes1] = time1.split(\":\");\r\n  let [hours2, minutes2] = time2.split(\":\");\r\n  // get time difference in minutes\r\n  let diff = (hours2 - hours1) * 60 + (minutes2 - minutes1);\r\n  let closest;\r\n\r\n  // if diff is negative, return the next closest time difference in 15 minute interval\r\n  if (diff < 0) {\r\n    closest = 15 * Math.ceil(diff / 15);\r\n  } else {\r\n    closest = true;\r\n  }\r\n\r\n  return [diff, closest];\r\n}\r\n\r\n\r\nexport default calcTime;\r\nexport { \r\n  configMinutesForStore,\r\n  formatStartEndTimes,\r\n  formatTime,\r\n  compareTimes\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import context, { datepickerContext } from \"./context/appContext\"\r\nimport store from \"./context/store\"\r\nimport setAppDefaults from \"./config/appDefaults\"\r\nimport renderViews from \"./config/renderViews\"\r\n/*!*************************************!*\\\r\n// (CSS) \r\n/*!*************************************!*/\r\n// css variables and reset\r\nimport \"./styles/root.css\";\r\nimport \"./styles/header.css\"\r\n\r\n// <main>\r\nimport \"./styles/containers.css\"\r\nimport \"./styles/yearview.css\"\r\nimport \"./styles/monthview.css\"\r\nimport \"./styles/weekview.css\"\r\nimport \"./styles/dayview.css\"\r\nimport \"./styles/listview.css\"\r\nimport \"./styles/sidebar.css\"\r\nimport \"./styles/sbdatepicker.css\"\r\n// </main>\r\n\r\n// popup / modals\r\n// <aside>\r\nimport \"./styles/aside/datepicker.css\"\r\nimport \"./styles/aside/toast.css\"\r\nimport \"./styles/aside/goto.css\"\r\nimport \"./styles/aside/toggleForm.css\"\r\nimport \"./styles/aside/sidebarSubMenu.css\"\r\nimport \"./styles/aside/changeViewModule.css\"\r\nimport \"./styles/aside/editCategoryForm.css\"\r\nimport \"./styles/aside/form.css\"\r\nimport \"./styles/aside/timepicker.css\";\r\nimport \"./styles/aside/deleteCategoryPopup.css\"\r\nimport \"./styles/aside/entryOptions.css\"\r\nimport \"./styles/aside/info.css\"\r\nimport \"./styles/aside/shortcuts.css\"\r\n// </aside>\r\n/*!*************************************!*/\r\n// NOTES;\r\n// * finish settings\r\n// * finish privacy,terms,notes\r\n\r\n// FIX;\r\n// * validate .json files\r\n// * set toast to be removed on window focus\r\n// * linter\r\n// * \r\n/*\r\n[\r\n  \"setDateDefaults\",\r\n  \"setSchemaDefaults\",\r\n  \"setDefaults\",\r\n  \"getAllMethodNames\",\r\n  \"getColorScheme\",\r\n  \"setColorScheme\",\r\n  \"setSidebarState\",\r\n  \"toggleSidebarState\",\r\n  \"getComponent\",\r\n  \"setComponent\",\r\n  \"getSidebarState\",\r\n  \"setDay\",\r\n  \"setMonth\",\r\n  \"setYear\",\r\n  \"setDate\",\r\n  \"setDateSelected\",\r\n  \"setPrevDay\",\r\n  \"setPrevWeek\",\r\n  \"setPrevMonth\",\r\n  \"setPrevYear\",\r\n  \"setNextDay\",\r\n  \"setNextWeek\",\r\n  \"setNextMonth\",\r\n  \"setNextYear\",\r\n  \"getGmt\",\r\n  \"getDateSelected\",\r\n  \"getDay\",\r\n  \"getMonth\",\r\n  \"getYear\",\r\n  \"getDate\",\r\n  \"getToday\",\r\n  \"getWeek\",\r\n  \"getWeekday\",\r\n  \"getWeekArray\",\r\n  \"getWeekRange\",\r\n  \"getWeekNumber\",\r\n  \"getMonthName\",\r\n  \"getDaysInMonth\",\r\n  \"getMonthArrayStartDay\",\r\n  \"getMonthArrayStart\",\r\n  \"getMonthArrayEndDay\",\r\n  \"getMonthArrayEnd\",\r\n  \"getMonthArray\",\r\n  \"isToday\"\r\n]\r\n*/\r\n// localStorage.clear()\r\nsetAppDefaults(context, store);\r\nrenderViews(context, datepickerContext, store);"],"names":["sidebar","document","querySelector","datepicker","datepickeroverlay","formOverlay","formModalOverlay","entriesFormWrapper","entriesForm","entriesFormBody","titleInput","descriptionInput","startDateInput","endDateInput","startTimeInput","endTimeInput","categoryModal","closeCategoryModalBtn","categoryModalIcon","categoryModalWrapper","selectedCategoryWrapper","selectedCategoryColor","selectedCategoryTitle","formSubmitButton","setEntryForm","context","store","datepickerContext","categories","activeCategories","currentComponent","year","month","day","closetimepicker","timep","timepoverlay","activeTimeElement","scrollTo","remove","classList","setEndDateToNextDay","startCurrentDate","getAttribute","split","map","x","parseInt","nextDay","Date","nextDayString","getFullYear","getMonth","getDate","nextDayTitle","setAttribute","textContent","createTimepicker","coords","currentTime","end","endLimit","timepicker","createElement","add","style","top","y","left","timepickerOverlay","timepickerTimesContainer","hours","md","minutes","currenthour","currentmin","currentmd","isSameDay","shouldTestReset","h","m","slice","length","si","count","setnewtime","e","time","target","attr","testhour","testminute","endTestHour","endTestMinute","startCurrentTime","newh","newm","nextHour","getHours","nextHourString","getMinutes","nextHourTitle","setEndDateToNextHour","forEach","hour","houridx","min","timepickerTime","appendChild","body","prepend","onclick","getClosest","setInitialFormCategory","categoryTitle","categoryColor","color","backgroundColor","firstElementChild","setFormInitialValues","Object","entries","getAllCtg","getActiveCategoriesKeyPair","getComponent","getYear","getDay","value","blur","setTimeout","focus","setDate","setDateSelected","dateSelected","getMonthName","getDateForStore","temphours","getTimeAndMd","onmousedown","delegateEntryFormEvents","handleOverlayClose","addEventListener","delegateFormKeyDown","contains","handleFormClose","handleSetDate","type","d","getDateFromAttribute","rect","getBoundingClientRect","datepickerLeft","bott","bottom","datepickerTop","window","innerHeight","addActiveOverlay","getDatePicker","getDateFormatViaAttr","dateAttr","getTimeFormatViaAttr","timeAttr","getDateTimeFormatted","setHours","setMinutes","setSeconds","removeErrorMessages","preventDefault","removeAttribute","removeLastFormEntry","removeLastEntry","removeActiveOverlay","reset","closeCategoryModal","removeEventListener","resetCurrentView","getFormResetHandle","setFormResetHandle","handleSubmissionRender","start","getDayEntriesArray","handleFormSubmission","title","description","startDate","endDate","startTimeAttr","starthour","startminute","endTimeAttr","endhour","endminute","configDatesForStore","category","validityStatus","status","valid","titlecheck","trim","replace","hasCtg","isDate","isBeforeDate","hasErrors","errors","key","checkFormValidity","updateEntry","completed","id","createEntry","errorMessages","components","err","parentElement","svg","fill","handleFormErrors","display","openCategoryModal","scrollHeight","behavior","height","innerText","parent","currentCategory","categoryWrapper","width","categoryDisplayColor","checkIcon","createCheckIcon","checkIconWrapper","append","createCategoryOptions","childElementCount","delegateCategorySelection","handleCategorySelection","handleTimepickerSetup","placePopup","innerWidth","dragHeader","closeicon","startdate","starttime","enddate","endtime","inputError","customInputError","clearbtn","submitbtn","closeBtn","currleft","currtop","margin","opacity","userSelect","right","pointerEvents","leftBefore","topBefore","clientX","clientY","winH","winW","throttlemove","throttle","leftAfter","topAfter","offsetTop","offsetLeft","offsetWidth","offsetHeight","mouseup","dragFormAnywhere","catsAct","constructor","this","monthNames","headerOffset","form","formBody","formTitleDescription","querySelectorAll","formStartEndCtg","formsubmitbtn","formCategoryWrapper","formCategorySelect","formCategoryWrapperIcon","formCategoryTitle","formCatgoryIcon","setFormStyle","eX","eY","shouldCenter","centerOffset","setFormSubmitType","configFormTitleDescriptionInput","input","idx","setFormDateInput","date","dateFormatted","dateinput","timeinput","lastElementChild","timeformatted","setFormDatepickerDate","configFormDateInputs","dates","i","dateObj","formatted","configFormCategoryInput","categoryData","firstChild","getConfig","data","submission","name","object","monthsArray","monthsArrayLong","gotoOverlay","goto","gotoInput","inputErrMessage","cancelGoto","submitGoto","createGoTo","removeError","handleGoTo","newdate","arr","haserr","includes","dateInt","tempMonth","isNaN","indexOf","toLowerCase","toString","validateDate","getSidebarState","component","closeGoTo","closeGoToOnEscape","formatStart","FormSetup","setSubmission","setCategory","setDates","getSetup","datepickerBody","datepickerTitle","datepickerChangeDate","headerPrevBtn","headerNextBtn","yearpickerTitle","monthpickerMonths","setDatepicker","hasweek","montharray","getMonthArray","checkmonth","checkyear","datepickerKeypressThrottle","flag","yearpickerSetYear","renderPrevMonth","renderNextMonth","handleMonthpicker","curr","next","nextElementSibling","newDateSelected","setSelectedToNextDay","prev","previousElementSibling","lastday","getDaysInMonth","last","setSelectedToPrevDay","closeChangeDateModal","setNewDate","openChangeDateModal","closeDatepicker","setDatepickerHeader","createCells","groupedEntries","getMonthEntryDates","currentWeekStart","getWeek","cell","datename","compareDates","getDateSelected","isToday","formattedDate","formOpen","getActiveOverlay","has","temp","datepickerDate","activeFormDate","inactiveFormDate","inactiveValue","inactiveDate","inactiveDateType","handleFormDate","renderpicker","setNextMonth","setPrevMonth","monthpickerSetMonth","val","init","newmonth","setMonth","increment","newyear","setYear","dir","delegateDatepickerEvents","datenumber","navnext","navprev","closeChangeDateBtn","ypNext","ypPrev","mpMonth","setResetDatepickerCallback","colors","values","CatFormHelper","catname","catcolor","errMsg","prevColorIdx","originalName","originalColor","setName","setColor","setPrevColor","getName","getColor","prevColor","setErrMsg","msg","getErrMsg","getOriginalName","getOriginalColor","ctgform","ctgformoverlay","ctgformInput","colorPickerTitle","colorPickerOptions","ctgErrMsg","createCategoryForm","selectedCategory","editing","resetParent","formhelper","createColorOption","selected","colorOption","validateNewCategory","categoryName","trimName","isNumeric","origName","errormsg","closeCategoryForm","updateCtg","updateCtgColor","addNewCtg","fullrenderCtg","getRenderCategoriesCallback","closeCategoryFormOnEsc","gc","element","closest","delegateCtgForm","cancelctgBtn","submitctgBtn","current","option","background","handleColorSelection","currentColor","placeholder","openCtgForm","entryOptionsOverlay","entryOptionsWrapper","entryOptionsDateHeader","entryOptionsTimeHeader","entryOptionTitle","entryOptionDescription","entryOptionCategoryIcon","entryOptionCategory","getEntryOptionModal","entry","finishSetup","openEditForm","getRenderFormCallback","openForm","closeEntryOptions","openDeleteWarning","deletepopup","deletebtns","deletepopupCancel","deletepopupConfirm","deletepopupText","removeDeletePopup","deleteEntry","proceedDelete","formNegated","handleEntryOptionKD","delegateEntryOptions","editBtn","deleteBtn","el","istoday","getDateTime","formatEntryOptionsDate","undefined","timeheadertitle","secondsDiff","getTime","daysSince","Math","floor","hourSince","minSince","getCtgColor","setEntryDefaults","setHeader","dateTimeTitle","header","selectElement","btnprev","btnnext","datetimeWrapper","datetimeContent","collapsebtn","prevnext","configHeader","borderstyle","componentTitle","borderBottom","paddingRight","setHeaderAttributes","view","toUpperCase","getWeekRange","shortcutsModalOverlay","shortcutsModal","shortcutsModalContent","shortcutsModalClose","notifyShortcutsStatus","handleShortCutsModal","createShortcut","shortcut","shortcutKey","keyone","Array","isArray","or","keytwo","shortcutDescription","descriptionOne","descriptionTwo","handleShortcutsModalClose","closeShortcutsOnKeydown","inp","setStatusIcon","getShortcutsStatus","shortcuts","getShortcuts","action","setShortcutsStatus","handleShortcutsModalOpen","sidebarColTwo","cWrapper","categoriesContainer","categoriesHeader","categoryHeaderCaret","handleSidebarCategories","defaultCtg","getDefaultCtg","updateComponent","renderSidebarDatepickerCtg","renderCategories","ctg","keys","ctgname","active","createCategoryListItem","ctgcolor","row","colone","checkboxWrapper","checkbox","border","label","coltwo","deleteicon","editicon","createCloseIcon","createEditIcon","delegateCategoryEvents","ctgtoggleModal","editctgBtn","deletectgBtn","ctgChck","ctgPlus","toggle","targetcat","targetparent","targetCtg","targetElement","popupBox","popupBoxOverlay","optionEdit","optionTurnOff","optionTurnOn","closeCategoryOptionsMenu","chckbox","handleCloseOnEscapeCtgOptionsMenu","rerender","closeAndRemoveStyle","setAllCategoryStatusExcept","openCategoryOptionsMenu","offsetColor","categoryLength","getCtgLength","noEntries","ord","popupHeader","popupTitle","popupCategoryStats","popupBody","optionsWrapperOne","categoryNames","getAllCtgNames","optionMoveRadio","optionMove","optionMoveTitle","optionMoveSelect","optionsWrapperTwo","optionRemoveRadio","optionRemove","optionRemoveTitle","optionRemoveIcon","createTrashIcon","handleWrapperClick","checked","popupFooter","btncancel","btnproceed","closeDeletePopupOnEscape","closeDeletePopup","deleteCategory","selectedOption","moveCategoryEntriesToNewCategory","removeCategoryAndEntries","createDeleteCategoryPopup","children","cat","setCategoryStatus","setRenderCategoriesCallback","initSidebarCategories","sbdatepickerChangeDate","sbyearpickerTitle","sbmonthpickerMonths","setSidebarDatepicker","resetpickerData","renderSelectedDay","sidebarFooter","sbInfoPopup","sbInfoPopupOverlay","selectInfo","closePopupButton","infopopupTitle","infopopupBody","handleSidebarFooter","infoContent","notes","content","privacy","terms","closeInfoPopup","closeInfoPopupOnEscape","setInfoContent","selection","handleSelectInfoChange","openInfoPopup","selectedIndex","onchange","projectNotes","sidebarSubMenuOverlay","sidebarSubMenu","closeSubMenuBtn","closemenu","appBody","themeRadioBtns","themeRadioOptions","shortcutSwitch","animationsSwitchBtn","notifyDisabledShortcutsIcon","getSidebarSubMenu","closeSubOnEscape","popup","closeSubMenu","getJSONUpload","file","accept","files","reader","FileReader","onload","json","JSON","parse","result","setUserUpload","readAsText","click","removeChild","removePopup","handleCalendarJSON","totalEntries","totalCategories","getStoreStats","titleEntries","hasEntries","hasCategories","subtitle","subtitle2","subtitle3","btns","cancelBtn","proceedBtn","createUploadConfirmationPopup","stringify","localStorage","filename","createTimestamp","blob","Blob","href","URL","createObjectURL","link","download","getJSONDownload","toggleShortcuts","toggleShortcutsIcon","setAnimationsIcons","parenticonwrapper","icons","on","off","toggleAnimations","fromicon","setAnimationStatus","delegateSubMenuEvents","downloadjsonBtn","uploadjsonBtn","themebtn","kbShortcutMenu","shortcutSwitchNotifyIcon","animationsSwitch","animationsIcon","targetinput","getColorScheme","setColorScheme","setTheme","handleThemeChange","themeIdx","shortcutStatus","animationStatus","getAnimationStatus","openSubMenu","toastoverlay","createToast","message","timeout","callback","callbackTwo","removeCallback","undoCallback","closetoast","undo","toast","toastMessage","closeIconWrapper","undoToastWrapper","undoToastMessage","insertBefore","initToast","overlay","sbform","toastCallbackSaving","toastNoCategorySelected","removeToastNoCategorySelected","taostDeleteEntryWarning","dvHeaderDayNumber","dvHeaderDayOfWeek","dvHeaderInfo","dvOnTop","dvGrid","dvMainGrid","setDayView","getDayEntries","boxes","Day","allDay","firstY","lastY","firstLastDates","bxs","longest","shortest","tempshort","templong","coordinates","h1","h2","m1","m2","tempdate1","tempdate2","formatStartEndTime","gmtOffset","getTimezoneOffset","abs","getGmt","getWeekday","allboxes","getAllBoxes","tempEndCase1","endingToday","startingToday","fulltitle","getDayviewHeaderEntryCount","resetDayview","openDvMore","entr","morepopupoverlay","morepopup","morepopupHeader","morepopupTitle","morepopupClose","morepopupBody","morepopupEntry","morepopupEntryTitle","morepopupCategory","morepopupEntryTime","createMorePopupEntry","closemp","closeMpOnEsc","openStackEntryOnTop","closearg","getEntry","console","log","setup","getFormDateObject","modal","createDvTop","moremessage","opdm","dvOnTopGrid","ent","dvOnTopEntry","createStackableEntriesOnTop","handleDayviewClose","createBoxOnDragDay","setStylingForEvent","cursor","tempcategory","getFirstActiveCategoryKeyPair","box","boxheader","createTempBoxHeader","boxcontent","boxtime","boxtimeend","scrolled","scrollTop","startCursorY","pageY","round","getBoxDefaultStyle","startmin","endmin","startEndDefault","movedY","mousemove","movementY","newHeight","calcNewHourFromCoords","calcNewMinuteFromCoords","wordBreak","formatTime","datesData","getTempDates","submitType","openDayviewForm","renderBoxesForGrid","getBoxesTop","getBoxes","createBox","delegateDayViewOnTop","delegateDayView","dvhresizehandle","dvhbox","dvhgrid","col","boxhasOnTop","boxorig","getOriginalBoxObject","resetStyleOnClick","boxTop","createTemporaryBox","amountScrolled","resetOriginalBox","setBoxTimeAttributes","nextSibling","updateBoxCoordinates","updateStore","resizeBoxNSDay","startTop","boxHeight","toFixed","tempX","tempY","pageX","sX","sY","hasStyles","currentCursorY","newOffsetY","newTop","tempbox","setResetDv","dragEngineDay","setResetPreviousViewCallback","settop","handleScrollToOnInit","weekDayNames","listview","listviewBody","setListView","today","todayYear","todayMonth","todayDay","getdatearray","createRowGroupHeader","weekname","monthname","rgHeader","rgHeaderDateNumber","rgHeaderDate","createRowGroupCell","datetitle","longerThanDay","tempyear","formatStartEndTimes","rgCell","rgCellColor","rgCellTime","rgCellTitle","resetCellActive","activeCell","delegateListview","headerNum","setComponent","setDayViewLV","hextorgba","rectTop","rectLeft","getRgContextMenu","resetListview","activeEnt","getActiveEntries","sortBy","reduce","acc","datestring","push","earliestDate","formatStartEndDate","tempdate","dow","wn","mn","rgheader","rgContent","sort","a","b","rg","createRowGroups","initListView","resizeoverlay","monthWrapper","setMonthView","monthentries","getMonthEntries","getGroupedMonthEntries","boxquery","renderSidebarDatepickerMonth","handleOverlay","setDayViewViaMonth","getHeight","boxtitle","createCell","cellDate","cellCoordinates","dayofmonth","cellContent","daynumberAndMonth","daynumber","createCellHeader","toptotal","filter","groupedBxs","groupedDiv","groupedTitle","createGroupedCell","getTop","resetMonthview","populateCells","dayEntries","dayHasEntry","getDateFormatted","getCoordinatesFromCell","configureForStorage","newCell","clone","tempEntry","diff","getDurationSeconds","endDay","configClonedBoxForDrop","resetCellOnDrop","transition","dragEngineMonth","startDragTime","now","targetModal","originalCellLength","cellX","cellY","cloneNode","cellRect","cellWidth","parseFloat","cellHeight","wrapperLeft","boxRect","boxWidth","hasFiveWeeks","startcursorx","startcursory","movedX","lastX","gaveStyles","changeCursor","newX","multX","newY","multY","timeDiff","newCellX","newCellY","newCellContent","boxmoved","handleMonthviewEditFormClose","openFormOnClickMV","groupedCell","configGroupedCellOnDrop","newGroupedCell","createGroupedCellOnDrop","closeMoreModalOnEscape","closeMoreModal","mm","createMoreModal","moreModalEntries","getMoreModalEntries","modalHeight","maxH","modalHeader","modalHeaderTitle","parentDate","createDateFromFormattedString","dowspan","daynspan","modalHeaderClose","modalContent","modalEntry","modalEntryTitle","createMoreModalBox","renderDayViewViaModal","once","tempcell","handleMonthviewFormClose","createEntryOnEmptyTarget","cellWrapper","categoryBox","getActiveCategories","getRenderSidebarCallback","generateTempStartEnd","tempctg","tempBox","configNewBoxInsertion","delegateMonthEvents","monthviewBox","monthviewBoxHeader","groupedBox","groupedBoxItem","closeGroupedBox","openDayView","targetCellIdx","targetCell","cloned","lastChild","moreModal","newLength","dragOutOfModal","delegateNewBox","getMonthviewResize","lastquery","getFlag","updateFlag","querytop","queryHeight","prevtop","getPrevTop","currenttop","setResizeHandle","main","container","weekviewHeaderDayNumber","weekviewGrid","cols","alldaymodule","topCols","setWeekView","weekArray","getWeekArray","getWeekEntries","Week","resetWeekviewBoxes","createBoxesTop","len","taskicons","icon","celltitle","cellexpand","createExpandDownIcon","createAllDayModalCell","handleCloseCallback","cellcontent","cellIcons","cellendDate","cellcategoryTitle","createMeatballVertIcon","targetrect","getWeekViewContextMenu","openAllDayModal","colidx","colentries","getBoxesByColumnTop","dayofweek","entriesoffset","modalheader","modaltitle","getDayOrdinal","closeAlldayModalBtn","modalcontent","closealldayonEsc","closealldaymodal","createAllDayModal","getcol","handleWeekviewFormClose","dragEngineWeek","originalColumn","currentColumn","tempstartY","startCursorX","direction","currentCursorX","leftColX","rightColX","newOffsetX","setResetWv","droppedCol","getBoxesByColumn","createBoxOnDrag","colIdx","openWeekviewForm","delegateGridEvents","yr","mo","da","class","resizeBoxNS","delegateGridTop","renderDataForGrid","boxt","getBoxesTopLengths","k","renderBoxes","getColumnsWithMultipleBoxes","hasToday","hasSelected","dayNumbers","ymd","getToday","ty","tm","td","num","configureDaysOfWeek","monthnames","yearviewGrid","setYearView","getGroupedYearEntries","getYearEntries","resetYearview","createMonthCell","prevmonth","daysInPrevMonth","nextmonth","currentMonth","daysInMonth","firstDayOfMonth","cellHeader","cellHeaderRowOne","cellHeaderTitle","cellHeaderWeekDayNames","weekday","cellBody","createcell","classname","daywrapper","populateMonths","handleDaySelection","delegateYearEvents","renderMonthCells","currentmonth","initYearview","setAppDefaults","checkLocalStorageAllowed","setItem","removeItem","colorSchemeMeta","getElementsByName","headerLogo","toggleForm","sbToggleForm","sbToggleSubBtn","sbToggleThemeBtn","dateTimeWrapper","selectOverlay","optionswrapper","options","viewsContainer","yearwrapper","monthwrapper","renderViews","darkicon","lighticon","contrasticon","currentScheme","fullRender","renderSidebarDatepicker","getPreviousDay","setPrevDay","getNextDay","setNextDay","getPreviousWeek","setPrevWeek","getNextWeek","setNextWeek","getPreviousMonth","getNextMonth","getPreviousYear","setPrevYear","getNextYear","setNextYear","handleTransition","keyframeDirection","removeslide","overflowX","slide","handleForm","handleToggleSubmenu","handleBtnMainMenu","resetdatepicker","getResetDatepickerCallback","marginLeft","handleBtnToday","handleBtnPrev","handleBtnNext","closeOptionsModal","renderOption","initialRender","comp","activeIndex","setOptionStyle","activeElement","handleSelect","delegateHeaderEvents","btnMainMenu","btnToday","btnPrev","btnNext","dateTime","search","settings","select","toggleSidebarState","newDatepickerLeft","perc","handleDatePickerBtn","getKeyPressThrottled","toggleChangeview","lk","lk2","handleGlobalKeydown","hasActiveOverlay","handleCollapse","headers","collapse","componentBody","componentBodytoggle","eyeIcons","setRenderFormCallback","setRenderSidebarCallback","setSidebarState","appinit","yearComponent","monthComponent","weekComponent","dayComponent","listComponent","prev1","prev2","setViews","views","resetPrevView","getResetPreviousViewCallback","getResizeHandle","hideViews","initView","labels","Context","colorScheme","sidebarState","gmt","daySelected","monthSelected","yearSelected","monthArray","week","setDateDefaults","getItem","setLocalYear","setLocalMonth","setLocalDay","setLocalDateSelected","setSchemaDefaults","setLocalColorScheme","setLocalComponent","setLocalSidebarState","setDefaults","static","state","getAllMethodNames","getOwnPropertyNames","getPrototypeOf","method","getLocalColorScheme","getLocalComponent","getLocalSidebarState","setDay","prevDay","prevWeek","prevMonth","nextWeek","nextMonth","getLocalDateSelected","getLocalDay","getLocalMonth","getLocalYear","d1","d2","monthsShort","getWeekNumber","UTC","setUTCDate","getUTCDate","getUTCDay","yearStart","getUTCFullYear","ceil","monthsLong","getMonthArrayStartDay","getMonthArrayStart","monthArrayStart","getMonthArrayEndDay","getMonthArrayEnd","handleFourWeeks","monthArrayEnd","testDate","DatepickerContext","setLocalPickerYear","setLocalPickerMonth","setLocalPickerDay","setLocalPickerDateSelected","getLocalPickerDateSelected","getLocalPickerDay","getLocalPickerMonth","getLocalPickerYear","Store","userUpload","default","blue","misc","grey","school","activeCtg","activeOverlay","Set","handleRenders","reconfig","calendars","previous","resize","render","list","keyboardShortcuts","keyboardShortcutsStatus","setStoreForTesting","setStore","activeStore","addEntry","args","find","getEntries","getEntriesByCtg","pop","assign","searchBy","searchtype","localeCompare","getFirstAndLastEntry","sorted","generateCoordinates","startMin","total","x2","activeEntries","entryDate","targetDate","montharr","grouped","yearentries","setCtg","getFirstActiveCategory","backup","getAllCtgColors","getCategoryStatus","hasOwnProperty","hasctg","newCategory","newName","getCtgIndex","newColor","oldName","hasColor","n","isFinite","fromEntries","error","setShortCut","size","o","validateUserUpload","err1","validation","validated","clear","location","reload","getUserUpload","setFormRenderHandle","setDataReconfigCallback","getDataReconfigCallback","getFormRenderHandle","Entry","generateId","CoordinateEntry","allDayEntries","boxesTop","setAllBoxes","tempEntries","addBox","addBoxTop","getBox","getLength","getBoxesTopByDay","c","columns","getEntriesByTitle","updateCoordinates","sortByY","checkForCollision","collisions","j","boxstart","boxend","starthours","startminutes","endhours","endminutes","getEntriesEndingOnDay","boxEntry","tops","heights","monthsShortLower","monthsLongLower","weekdaysLong","weekdaysShort","weekdaysNarrow","red","orange","green","purple","createDate","pad","prototype","toCustomISO","getSeconds","getMilliseconds","formatDateForDisplay","hm","date1","date2","formatDuration","seconds","res","join","startday","startmonth","startyear","endday","endmonth","endyear","tempstartyear","tempendyear","getDuration","duration","dateString","dateArray","attribute","getTimeFromAttribute","minute","setmin","sortDates","y1","y2","min1","min2","useTempDate","tempdateone","durationTime","formatDurationHourMin","identifiers","boxnumarr","boxClasses","base","ontop","temporary","boxAttributes","updatecoord","dataIdx","dataId","dataCol","prepentwo","styles","newBox","setBoxWidthWeek","dataidx","setBoxWidthDay","clause","wrapper","baseClass","attrPrepend","attrPrependTwo","prependtwo","coord","entryTitle","entryTime","resizehandleS","hasSibling","tempstarthour","tempstartmin","calcDateOnClick","identifyBox","classPrepend","boxIdxAttr","boxIdAttr","hex","alpha","r","g","random","substring","fn","wait","inThrottle","lastFn","lastTime","arguments","clearTimeout","apply","max","hasLightMode","hasContrastMode","setColorSchema","popupWidth","popupHeight","windowCoords","center","targetWidth","popupW","popupH","popupX","popupY","func","limit","timeoutId","createSortPlaceholderIcon","iconwrapper","createElementNS","transform","path","createStatusIcon","pathone","pathtwo","createCategoryIcon","createPencilIcon","createCaretDownIcon","createCaretUpIcon","createCaretRightIcon","createCheckBoxIcon","startHours","endHours","startMinutes","endMinutes","configMinutesForStore","compareTimes","time1","time2","hours1","minutes1","hours2","minutes2","startingtime","endingtime","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","definition","defineProperty","enumerable","get","obj","prop","call","Symbol","toStringTag"],"sourceRoot":""}