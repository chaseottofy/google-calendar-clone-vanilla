"use strict";(self.webpackChunkgoogle_calendar_clone_vanilla=self.webpackChunkgoogle_calendar_clone_vanilla||[]).push([[794],{794:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Y});var r=o(432),n=o(151),a=o(634),s=o(748),i=o(340),c=o(35),l=o(611),d=o(274);const m=document.querySelector(".toast");function u(t,e){function o(){m.classList.remove("show-toast"),m.innerText="",document.onmousedown=null,document.onkeydown=null,d.Z.removeActiveOverlay("toast")}!function(){m.innerText="";const r=document.createElement("div");r.classList.add("toast-message"),r.textContent=t;const n=document.createElement("div");n.classList.add("close-toast-icon-wrapper"),n.append((0,i.G0)("var(--white4)"));const a=document.createElement("div");a.classList.add("undo-toast-wrapper");const c=document.createElement("div");c.classList.add("undo-toast-message"),c.textContent="Undo",a.append(c),m.append(r,a,n),m.classList.add("show-toast"),d.Z.addActiveOverlay("toast"),document.onkeydown=function(t){t.key&&o()},document.onmousedown=function(t){if(!(0,s.As)(t,".toast"))return void o();const r=(0,s.As)(t,".undo-toast-wrapper"),n=(0,s.As)(t,".close-toast-icon-wrapper");if(r)return e(),void o();n&&o()}}()}const f=document.querySelector(".sidebar"),y=document.querySelector(".datepicker"),p=document.querySelector(".datepicker-overlay"),g=document.querySelector(".form-overlay"),b=document.querySelector(".form-modal-overlay"),v=document.querySelector(".entries__form"),_=document.querySelector(".entries__form--header"),A=document.querySelector(".entry-form"),h=document.querySelector(".entries__form--body"),L=document.querySelector(".form--body__title-input"),k=document.querySelector(".form--body__description-input"),w=document.querySelector(".form--body-start__date"),E=document.querySelector(".form--body-end__date"),S=document.querySelector(".form--body-start__time"),D=document.querySelector(".form--body-end__time"),x=document.querySelector(".form--body__category-modal"),C=document.querySelector(".close-options-floating__btn"),q=document.querySelector(".form--body__category-icon"),T=document.querySelector(".form--body__category-modal--wrapper"),$=document.querySelector(".form--body__category-modal--wrapper-selection"),H=document.querySelector(".form--body__category-modal--wrapper__color"),I=document.querySelector(".form--body__category-modal--wrapper__title"),N=document.querySelector(".form--footer__button-save");function Y(t,e,d){const m=t.getDate();let Y,F,M,[O,Z]=[m.getFullYear(),m.getDate()];function W(){const t=document?.querySelector(".timepicker"),e=document?.querySelector(".timepicker-overlay"),o=document?.querySelector(".timepicker-times__container"),r=document?.querySelector(".active-form-time");t&&(t.scrollTo(0,0),t.remove(),e.remove(),e.onclick=null,o.onclick=null),r&&r.classList.remove("active-form-time")}function R(){const{labels:t}=n.Z,e=w.getAttribute("data-form-date").split("-").map((t=>Number.parseInt(t))),o=new Date(e[0],e[1],e[2]+1),r=`${o.getFullYear()}-${o.getMonth()}-${o.getDate()}`,a=t.monthsShort[o.getMonth()]+" "+o.getDate()+", "+o.getFullYear();E.setAttribute("data-form-date",r),E.textContent=a,D.setAttribute("data-form-time","00:30"),D.textContent="12:30am"}function j(t,e,o,r){const n=document.createElement("div");n.classList.add("timepicker"),n.style.top=`${t.y}px`,n.style.left=`${t.x}px`;const i=document.createElement("div");i.classList.add("timepicker-overlay");const c=document.createElement("div");c.classList.add("timepicker-times__container");const l=w.getAttribute("data-form-date"),d=E.getAttribute("data-form-date");if(null!==r&&l===d){l===d&&"11:45"===e&&(R(),e="00:00");const t=S.getAttribute("data-form-time"),[r,n]=(0,a.kt)(t);let[s,i]=[r,n];for(let t=r;t<24;t++)for(let e=0;e<60;e+=15){const[r,n]=(0,a.kt)(`${t}:${e}`);if(r<=s&&n<=i)continue;const l=document.createElement("div");l.classList.add("timepicker-time"),l.setAttribute("data-tp-for",o?"end":"start"),l.setAttribute("data-tp-time",`${r}:${n}`),l.textContent=(0,a.gG)(r,n),c.append(l)}}else{const[t,r]=(0,a.kt)(e);for(let e=0;e<24;e++)for(let n=0;n<60;n+=15){const[s,i]=(0,a.kt)(`${e}:${n}`),l=document.createElement("div");l.classList.add("timepicker-time"),l.setAttribute("data-tp-for",o?"end":"start"),l.setAttribute("data-tp-time",`${s}:${i}`),l.textContent=(0,a.gG)(s,i),s===t&&i===r&&l.classList.add("timepicker-time--selected"),c.append(l)}}n.append(c);const[m,u]=t;n.setAttribute("style",`top:${u}px; left:${m}px;`),document.body.prepend(i,n),i.onclick=W,c.onclick=t=>{(0,s.As)(t,".timepicker-time")&&function(t){const{target:e}=t,o=e.textContent,r=e.getAttribute("data-tp-time"),n=e.getAttribute("data-tp-for"),[s,i]=(0,a.kt)(r),[c,l]=(0,a.kt)(D.getAttribute("data-form-time"));if("start"===n){if(S.textContent=o.startsWith("0")?o.slice(1):o,S.setAttribute("data-form-time",r),s>c||s===c&&i>=l){let[t,e]=(0,a.DT)(s,i);D.textContent=t,D.setAttribute("data-form-time",e.join(":"))}}else D.textContent=o.startsWith("0")?o.slice(1):o,D.setAttribute("data-form-time",r);W()}(t)};const f=document?.querySelector(".timepicker-time--selected");f&&n.scrollTo(0,f.offsetTop)}function G(o,r){o.preventDefault(),"start"===r?(w.setAttribute("class","form--body-start__date active-form-date"),E.setAttribute("class","form--body-end__date inactive-form-date")):(w.setAttribute("class","form--body-start__date inactive-form-date"),E.setAttribute("class","form--body-end__date active-form-date"));const[n,s,i]=(0,a.pH)(o.target,"data-form-date"),l=o.target.getBoundingClientRect(),m=Number.parseInt(l.left),u=Number.parseInt(l.bottom);let f=Number.parseInt(l.top);var g,b,v;"end"===r&&(f-=40),window.innerHeight-216<=u&&(f=window.innerHeight-242),y.setAttribute("style",`top:${f}px;left:${m}px;`),g=n,b=s,v=i,p.classList.remove("hide-datepicker-overlay"),y.classList.remove("hide-datepicker"),e.addActiveOverlay("hide-datepicker-overlay"),d.setDate(g,b,v),d.setDateSelected(v),(0,c.Z)(t,e,d,"form")}function B(t){return new Date(...t.split("-").map((t=>Number.parseInt(t))))}function X(t,e){return t.setHours(e[0]),t.setMinutes(e[1]),t.setSeconds(0),t}function J(t){if(t.target.classList.contains("form-input-error"))t.preventDefault(),t.target.classList.remove("form-input-error"),t.target.removeAttribute("data-form-error-message"),t.target.firstElementChild.focus();else{if(!t.target.classList.contains("form-input-error__custom-input"))return;t.target.classList.remove("form-input-error__custom-input"),t.target.removeAttribute("data-form-error-message"),t.target.focus()}}function P(){e.removeLastEntry(),(0,r.Z)(M,t,e,d)}function K(){const t=document?.querySelectorAll(".form-input-error");if(t)for(const e of t)e.classList.remove("form-input-error"),e.removeAttribute("data-form-error-message")}function U(){y.classList.contains("hide-datepicker")||(y.classList.add("hide-datepicker"),p.classList.add("hide-datepicker-overlay")),K(),g.onclick=null,_.onmousedown=null,v.onclick=null,document.removeEventListener("keydown",nt),v.classList.add("hide-form"),g.classList.add("hide-form-overlay"),e.removeActiveOverlay("hide-datepicker-overlay"),e.removeActiveOverlay("hide-form-overlay"),A.reset(),k.value="",L.value="",T.classList.contains("category-modal-open")&&V();const t=e.getFormResetHandle(M);null!==t&&(t(),e.setFormResetHandle(M,null))}function z(o,n,a,s){if(t.setDate(o.getFullYear(),o.getMonth(),o.getDate()),t.setDateSelected(o.getDate()),(0,r.Z)(M,t,e,d),e.getDayEntriesArray(t.getDate()).length<=1&&(f.classList.contains("hide-sidebar")||(t.setDateSelected(Z),(0,l.Z)(t,e,d))),U(),"create"===n)setTimeout((()=>{u("Event created",P)}),4);else{if(!e.compareEntries(s,e.getEntry(a))){const o=()=>{!function(o,n){const a=new Date(n.start);e.updateEntry(o,{category:n.category,completed:n.completed,description:n.description,end:new Date(n.end),id:o,start:a,title:n.title}),t.setDate(a.getFullYear(),a.getMonth(),a.getDate()),t.setDateSelected(a.getDate()),(0,r.Z)(M,t,e,d)}(a,s)};setTimeout((()=>{u("Event updated",o)}),4)}}}function Q(t){t.preventDefault();const o=L.value,r=k.value,[n,s]=function(){const t=B(w.getAttribute("data-form-date")),e=S.getAttribute("data-form-time"),[o,r]=(0,a.kt)(e),n=B(E.getAttribute("data-form-date")),s=D.getAttribute("data-form-time"),[i,c]=(0,a.kt)(s);return[X(t,[o,r]),X(n,[i,c])]}(),i=T.getAttribute("data-form-category"),c=function(t,o,r,n,s){const i={title:!0,description:!0,startDate:!0,endDate:!0,valid:!0};if("string"==typeof t){const e=t.trim().replaceAll(/[^\s\w-]+|\s{2,}/g," ");e.length>50?(i.title="Title must be Less than 50 characters",i.valid=!1):0===e.length&&(i.title="Title cannot be empty",i.valid=!1)}else i.title="Title cannot be empty";o.length>=200&&(i.description="Description must be less than 200 characters",i.valid=!1),e.hasCtg(r)&&r||T.setAttribute("data-form-category","default"),n?(0,a.J_)(n)||(i.startDate="Start date is not valid",i.valid=!1):(i.startDate="Start date cannot be empty",i.valid=!1),s?(0,a.J_)(s)?(0,a.gO)(n,s)||(i.endDate="End date must be after start date",i.valid=!1):(i.endDate="End date is not valid",i.valid=!1):(i.endDate="End date cannot be empty",i.valid=!1);const c={};let l;for(const t in i)!0!==i[t]&&(c[t]=i[t],l=!0);return!l||c}(o,r,i,n,s);if(!0===c){if("edit"===N.getAttribute("data-form-action")){const t=N.getAttribute("data-form-entry-id"),a=structuredClone(e.getEntry(t));return e.updateEntry(t,{category:i,completed:!1,description:r,end:s,id:t,start:n,title:o}),void z(n,"edit",t,a)}e.createEntry(i,!1,r,s,n,o),z(n,"create",e.getLastEntryId(),null)}else!function(t){L.blur();const e={title:L,description:k,startDate:w,endDate:E},o="data-form-error-message",r="form-input-error",n="form-input-error__custom-input",a="form-error__submit-btn";for(const a in t)if(e[a])if("title"===a||"description"===a)e[a].parentElement.setAttribute(o,t[a]),e[a].parentElement.classList.add(r);else{e[a].setAttribute(o,t[a]),e[a].classList.add(n);const r=e[a].parentElement.parentElement.firstElementChild.firstElementChild;r.style.fill="var(--red2)",setTimeout((()=>{r.style.fill="var(--white3)"}),1e3)}N.classList.add(a),setTimeout((()=>{N.classList.remove(a)}),1e3)}(c)}function V(){C.style.display="none",T.classList.remove("category-modal-open"),x.classList.add("hide-form-category-modal"),$.classList.remove("hide-form-category-selection"),b.classList.add("hide-form-overlay"),T.removeAttribute("style"),x.innerText=""}function tt(t,e){const o=e.length;1!==o&&(C.removeAttribute("style"),setTimeout((()=>{h.scrollTo({top:h.scrollHeight,behavior:"smooth"})}),5),o>=5?C.setAttribute("style","top: -100px"):C.setAttribute("style",`top: ${20*o*-1}px`),T.classList.add("category-modal-open"),T.style.height=o<5?32*o+"px":"160px",$.classList.add("hide-form-category-selection"),x.classList.remove("hide-form-category-modal"),x.style.height=32*o+"px",x.innerText="",function(t,e){const o=T.getAttribute("data-form-category");for(const[r,n]of e){const e=n.color,a=document.createElement("div");a.classList.add("category-modal--category"),a.style.width="200px",a.style.backgroundColor=e,a.setAttribute("data-form-category-title",r),a.setAttribute("data-form-category-color",e);const s=document.createElement("div");s.classList.add("category-modal--category-color"),s.style.backgroundColor=e;const c=document.createElement("div");if(c.classList.add("category-modal--category-title"),c.textContent=r,r===o){const t=(0,i.pr)("var(--white4)"),e=document.createElement("div");e.classList.add("category-modal--category-check"),e.append(t),a.append(s,c,e)}else a.append(s,c);t.append(a)}}(x,e),b.classList.remove("hide-form-overlay"))}function et(t){const e=t.getBoundingClientRect(),[o,r]=(0,s.tb)(180,200,[Number.parseInt(e.left),Number.parseInt(e.top)],[window.innerWidth,window.innerHeight],!1);return[o,r]}function ot(t){const e=(0,s.As)(t,".form-header--dragarea"),o=(0,s.As)(t,".form--header__icon-close");if(e){if(window.innerWidth<500||window.innerHeight<500)return;!function(t){const e=document.querySelector(".form--header__icon-close"),o=v.getBoundingClientRect(),[r,n]=[Number.parseInt(o.left),Number.parseInt(o.top)];v.style.margin="0",v.style.opacity="0.8",v.style.userSelect="none",v.style.top=n+"px",v.style.left=r+"px",v.style.bottom="0",v.style.right="0",e.style.pointerEvents="none",A.style.pointerEvents="none";let[a,i]=[t.clientX,t.clientY];const[c,l]=[window.innerHeight,window.innerWidth],d=(0,s.P2)((function(t){const[e,o]=[a-t.clientX,i-t.clientY];a=t.clientX,i=t.clientY,v.offsetTop<0&&(v.style.top="0px"),v.offsetLeft<0&&(v.style.left="0px"),v.offsetLeft+v.offsetWidth>l&&(v.style.left=l-v.offsetWidth+"px"),v.offsetTop+v.offsetHeight>c&&(v.style.top=c-v.offsetHeight+"px"),v.style.top=v.offsetTop-o+"px",v.style.left=v.offsetLeft-e+"px"}),10);document.addEventListener("mousemove",d),document.addEventListener("mouseup",(function t(){v.style.opacity="1",v.style.userSelect="all",e.removeAttribute("style"),A.removeAttribute("style"),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",t)}))}(t)}else o&&U()}function rt(t){const e=(0,s.As)(t,".form--body-start__date"),o=(0,s.As)(t,".form--body-start__time"),r=(0,s.As)(t,".form--body-end__date"),n=(0,s.As)(t,".form--body-end__time"),a=(0,s.As)(t,".form--body__category-modal"),i=(0,s.As)(t,".form--body__category-modal--wrapper-selection"),c=(0,s.As)(t,".close-options-floating__btn"),l=(0,s.As)(t,".form-modal-overlay"),d=(0,s.As)(t,".form-input-error"),m=(0,s.As)(t,".form-input-error__custom-input"),u=(0,s.As)(t,".form--footer__button-cancel"),f=(0,s.As)(t,".form--footer__button-save");if(e)G(t,"start");else{if(o)return t.target.classList.add("active-form-time"),void j(et(t.target),S.getAttribute("data-form-time"),!1,null);if(r)G(t,"end");else{if(n)return t.target.classList.add("active-form-time"),void j(et(t.target),D.getAttribute("data-form-time"),!0,S.getAttribute("data-form-time"));if(a)x.childElementCount>0&&function(t){const e=t.target.getAttribute("data-form-category-title"),o=t.target.getAttribute("data-form-category-color");T.setAttribute("data-form-category",e),q.firstElementChild.setAttribute("fill",o),$.style.backgroundColor=o,H.style.backgroundColor=o,I.textContent=e,V()}(t);else if(i)tt(0,Y);else if(c)V();else if(l)V();else if(d)J(t);else{if(!m)return u?(A.reset(),K(),at(),void V()):void(f&&Q(t));J(t)}}}}function nt(t){if(y.classList.contains("hide-datepicker")){const e=document?.querySelector(".timepicker"),o=document?.querySelector(".hide-form-category-modal");"Escape"===t.key&&(null!==e?W():null===o?V():U()),"Enter"===t.key&&(null!==e?W():null===o?V():Q(t))}}function at(){Y=Object.entries(e.getAllCtg()),F=e.getActiveCategoriesKeyPair(),M=t.getComponent(),k.value="",L.blur(),L.value="",setTimeout((()=>{L.focus()}),10),function(){const[t,e]=0===F.length?[Y[0][0],Y[0][1].color]:[F[0][0],F[0][1].color];T.setAttribute("data-form-category",t),$.style.backgroundColor=e,I.textContent=t,H.style.backgroundColor=e,q.firstElementChild.setAttribute("fill",e)}(),d.setDateFromDateObj(m),t.setDateSelected(Z);const o=`${t.getMonthName().slice(0,3)} ${Z}, ${O}`;w.textContent=o,w.setAttribute("data-form-date",(0,a.Ye)(t.getDate())),E.textContent=o,E.setAttribute("data-form-date",(0,a.Ye)(t.getDate()));const r=new Date;let[n,s]=[r.getHours(),r.getMinutes()];s=s%15!=0?15*Math.ceil(s/15):s;let[i,c]=(0,a.DT)(n,s);23===n&&45===s&&(R(),[i,c]=(0,a.DT)(1,15)),D.textContent=i,D.setAttribute("data-form-time",c.join(":")),S.setAttribute("data-form-time",(0,a.yi)(n,s)),S.textContent=(0,a.gG)(n,s),N.setAttribute("data-form-action","create"),N.setAttribute("data-form-id",""),_.onmousedown=ot,g.onclick=U,v.onclick=rt,document.addEventListener("keydown",nt)}!async function(){"false"===v.getAttribute("data-has-css")?(v.style.display="none",await o.e(66).then(o.bind(o,66)).then((()=>{v.setAttribute("data-has-css","true"),at()})).then((()=>{v.style.display="block"}))):at()}()}}}]);